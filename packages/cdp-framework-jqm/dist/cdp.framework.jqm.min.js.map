{"version":3,"sources":["dist/cdp.framework.jqm.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_5__","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","doc","$","mobile","apply","undefined","jQuery","document","window","uuid","runiqueId","ui","extend","version","keyCode","BACKSPACE","COMMA","DELETE","DOWN","END","ENTER","ESCAPE","HOME","LEFT","PAGE_DOWN","PAGE_UP","PERIOD","RIGHT","SPACE","TAB","UP","fn","focus","orig","delay","each","elem","setTimeout","arguments","scrollParent","ie","test","css","parents","filter","eq","length","ownerDocument","uniqueId","id","removeUniqueId","removeAttr","focusable","element","isTabIndexNotNaN","map","mapName","img","nodeName","toLowerCase","parentNode","href","visible","disabled","expr","filters","addBack","data","createPseudo","dataName","match","isNaN","attr","tabbable","tabIndex","isTabIndexNaN","outerWidth","jquery","side","type","innerWidth","innerHeight","outerHeight","reduce","size","border","margin","parseFloat","selector","add","prevObject","removeData","key","camelCase","exec","navigator","userAgent","support","selectstart","createElement","disableSelection","bind","event","preventDefault","enableSelection","unbind","zIndex","position","value","parseInt","parent","plugin","option","set","proto","plugins","push","instance","args","allowDisconnected","nodeType","options","compensateToolbars","page","desiredHeight","pageParent","toolbarsAffectingHeight","noPadders","theElement","widgetOptions","toolbar","ns","updatePagePadding","externalHeaders","children","internalHeaders","externalFooters","internalFooters","concat","toArray","index","Math","max","behaviors","silentScroll","ypos","defaultHomeScroll","special","scrollstart","enabled","scrollTo","trigger","x","y","getClosestBaseUrl","ele","url","closest","jqmData","base","path","documentBase","hrefNoHash","dynamicBaseEnabled","isPath","makeUrlAbsolute","removeActiveLinkClass","forceRemoval","activeClickedLink","activePageClass","removeClass","activeBtnClass","getInheritedTheme","el","defaultTheme","e","ltr","re","className","enhanceable","elements","haveParents","hijackable","ignoreContentEnabled","count","$newSet","$element","excluded","getAttribute","getScreenHeight","height","resetActivePageHeight","pageHeight","pageOuterHeight","loading","loader","_widget","defaultHtml","returnValue","addDependents","newDependents","$elem","dependents","removeWithDependents","enhanceWithin","widgetElements","keepNative","keepNativeSelector","that","nojs","links","degradeInputsWithin","buttonMarkup","find","initSelector","not","jqmEnhanceable","fieldcontain","widgets","constructor","widgetName","getEncodedText","text","html","jqmHijackable","nativeElement","remove","matches","matchesSelector","node","subPageUrlKey","hideUrlBar","focusClass","ajaxEnabled","hashListeningEnabled","linkBindingEnabled","defaultPageTransition","maxTransitionWidth","minScrollBack","defaultDialogTransition","pageLoadErrorMessage","pageLoadErrorMessageTheme","phonegapNavigationEnabled","autoInitializePage","pushStateEnabled","hoverDelay","pageContainer","allowCrossDomainPages","dialogHashKey","slice","Array","_cleanData","cleanData","elems","triggerHandler","widget","fullName","existingConstructor","basePrototype","proxiedPrototype","namespace","split","Widget","_createWidget","_proto","_childConstructors","prop","isFunction","_super","_superApply","__super","__superApply","widgetEventPrefix","widgetFullName","child","childPrototype","bridge","target","input","inputIndex","inputLength","isPlainObject","isMethodCall","methodValue","error","charAt","pushStack","_init","defaultElement","create","eventNamespace","_getCreateOptions","bindings","hoverable","_on","destroy","style","defaultView","parentWindow","_create","_trigger","_getCreateEventData","noop","_destroy","parts","curOption","shift","pop","_setOptions","_setOption","toggleClass","enable","disable","suppressDisabledCheck","handlers","delegateElement","handler","handlerProxy","hasClass","guid","eventName","delegate","_off","join","undelegate","_delay","_hoverable","mouseenter","currentTarget","addClass","mouseleave","_focusable","focusin","focusout","callback","Event","originalEvent","isDefaultPrevented","show","hide","method","defaultEffect","effect","hasOptions","effectName","duration","isEmptyObject","complete","effects","easing","queue","next","nsNormalizeDict","oldFind","rbrace","jqmDataRE","JSON","parse","err","nsNormalize","closestPageData","$target","result","jqmRemoveData","context","ret","extra","indexOf","replace","rcapitals","replaceFunction","loaderClass","$html","theme","textVisible","fakeFixLoader","activeBtn","first","top","scrollTop","offset","checkLoaderPosition","screenHeight","proxy","resetHtml","msgText","textonly","message","loadSettings","appendTo","pagecontainer","str_hashchange","fake_onhashchange","doc_mode","documentMode","supports_onhashchange","get_fragment","location","setup","start","teardown","stop","self","timeout_id","last_hash","fn_retval","val","history_set","history_get","poll","clearTimeout","hash","history_hash","attachEvent","addEventListener","iframe","iframe_src","src","one","insertAfter","contentWindow","onpropertychange","propertyName","title","iframe_doc","domain","open","write","close","matchMedia","bool","docElem","documentElement","refNode","firstElementChild","firstChild","fakeBody","div","cssText","background","appendChild","q","innerHTML","insertBefore","offsetWidth","removeChild","media","touch","orientation","propExists","uc_prop","toUpperCase","substr","props","vendors","v","fbCSS","prependTo","webos","operamini","toString","bb","blackberry","nokiaLTE7_3","inlineSVG","w","svg","createElementNS","createSVGRect","opera","Image","onerror","onload","width","transform3dTest","mqProp","transforms","t","MozTransform","transform","append","getComputedStyle","getPropertyValue","baseTagTest","fauxBase","protocol","host","pathname","fauxEle","link","rebase","cssPointerEventsTest","supports","pointerEvents","boundingRect","getBoundingClientRect","browser","oldIE","a","all","fixedPosition","ua","platform","wkmatch","wkversion","ffmatch","ffversion","operammobilematch","omversion","pushState","history","search","mediaquery","cssPseudoElement","touchOverflow","cssTransform3d","boxShadow","dynamicBaseTag","cssPointerEvents","gradeA","ajaxBlacklist","WebKitPoint","$win","dummyFnToInitNavigate","beforenavigate","on","off","navigate","bound","originalEventName","isPushStateEnabled","isHashChangeEnabled","popstate","newEvent","beforeNavigate","state","historyState","hashchange","hashchangeState","$base","uiStateKey","urlParseRE","getLocation","parsedUrl","parseUrl","uri","doubleSlash","substring","getDocumentUrl","asParsedObject","documentUrl","parseLocation","hrefNoSearch","authority","username","password","hostname","port","directory","filename","makePathAbsolute","relPath","absPath","absStack","relStack","isSameDomain","absUrl1","absUrl2","isRelativeUrl","isAbsoluteUrl","relUrl","absUrl","relObj","absObj","hasPath","addSearchParams","params","u","param","convertUrlToDataUrl","isEmbeddedPage","decodeURIComponent","newPath","stripHash","clean","stripQueryParams","cleanHash","isHashValid","isExternal","hasProtocol","documentBaseDiffers","squash","resolutionUrl","cleanedUrl","stateIndex","docUrl","preservedHash","uiState","isPreservableHash","hashToSelector","hasHash","getFilePath","isFirstPageUrl","samePath","fp","firstPage","fpId","isPermittedCrossDomainRequest","reqUrl","getDocumentBase","History","stack","activeIndex","getActive","getLast","previousIndex","getNext","getPrev","clearForward","earlyReturn","entry","direct","opts","newActiveIndex","present","back","forward","missing","initialHref","Navigator","ignoreInitialHashChange","popstate.history","hashchange.history","replaceState","parsed","loc","resolved","go","noEvents","popstateEvent","isPopStateEvent","preventNextHashChange","preventHashAssignPopState","ignorePopState","stopImmediatePropagation","historyEntry","direction","animation","transition","testElement","vendorPrefixes","testName","j","prefix","cssTransitions","cssAnimations","animationComplete","fallbackTime","timer","eventBinding","animationType","defaultDuration","dataPropertyName","touchTargetPropertyName","virtualEventNames","touchEventProps","mouseHookProps","mouseHooks","mouseEventProps","activeDocHandlers","resetTimerID","startX","startY","didScroll","clickBlockList","blockMouseTriggers","blockTouchTriggers","eventCaptureSupported","$document","nextTouchID","lastTouchID","threshold","vmouse","moveDistanceThreshold","clickDistanceThreshold","resetTimerDuration","getNativeEvent","createVirtualEvent","eventType","oe","ne","ct","len","which","touches","changedTouches","getVirtualBindingFlags","flags","b","k","hasVirtualBinding","getClosestElementWithVirtualBinding","enableTouchBindings","disableTouchBindings","enableMouseBindings","disableMouseBindings","startResetTimer","clearResetTimer","triggerVirtualEvent","ve","mouseEventCallback","touchID","isPropagationStopped","stopPropagation","isImmediatePropagationStopped","handleTouchStart","pageX","pageY","handleScroll","handleTouchMove","didCancel","moveThreshold","abs","handleTouchEnd","clientX","clientY","hasVirtualBindings","dummyMouseHandler","getSpecialEventObject","realType","$this","cnt","supportTouch","scrollEvent","touchStartEvent","touchStopEvent","touchMoveEvent","attrFn","triggerCustomEvent","obj","bubble","originalType","dispatch","thisObject","scrolling","tap","tapholdThreshold","emitTapOnTaphold","isTaphold","origTarget","clearTapTimer","clearTapHandlers","clickHandler","swipe","scrollSupressionThreshold","durationThreshold","horizontalDistanceThreshold","verticalDistanceThreshold","winPageX","pageXOffset","winPageY","pageYOffset","floor","time","Date","getTime","coords","origin","handleSwipe","swipestart","swipestop","eventInProgress","events","emitted","move","scrollstop","taphold","swipeleft","swiperight","sourceEvent","throttledresize","throttle","curr","diff","lastCall","heldCall","win","event_name","get_orientation","last_orientation","initial_orientation_is_landscape","initial_orientation_is_default","portrait_map","0","180","ww","wh","landscape_threshold","-90","90","orientationchange","handleObj","old_handler","isPortrait","clientWidth","clientHeight","baseElement","linkSelector","rewrite","thisAttr","is","theLocation","thisUrl","reset","originalWidget","keepNativeFactoryDefault","domCache","keepNativeDefault","contentTheme","enhanced","_enhance","pagebeforehide","pagebeforeshow","dialog","attrPrefix","role","bindRemove","samePage","prEvent","_handlePageBeforeShow","setContainerBackground","removeContainerBackground","trim","globalValue","optionValue","newDefault","oldDefault","setLastScrollEnabled","pagechange","_disableRecordScroll","_enableRecordScroll","_afterContentChange","_recordScroll","active","_getActiveHistory","currentScroll","minScroll","defaultScroll","_getScroll","_getMinScroll","_getDefaultScroll","lastScroll","_delayedRecordScroll","_filterNavigateEvents","_getHash","_handleNavigate","getActivePage","activePage","_getInitialContent","_getHistory","_getDocumentBase","steps","change","changeHash","fromHashChange","_handleDestination","to","_transitionFromHistory","defaultTransition","_handleDialog","changePageOptions","activeContent","pageUrl","reverse","_changeContent","changePage","_getBase","_getNs","content","_include","settings","_find","fileUrl","_createFileUrl","dataUrl","_createDataUrl","initialContent","_getLoader","_showLoading","msg","_loadMsg","_hideLoading","_showError","_parse","_setLoadedTitle","newPageTitle","RegExp","$1","_isRewritableBaseTag","absoluteUrl","_triggerWithDeprecated","deprecatedEvent","_loadSuccess","triggerData","deferred","textStatus","xhr","pageElemRegex","dataUrlRegex","encodeURIComponent","prefetch","toPage","showLoadMsg","resolve","_loadDefaults","reloadPage","reload","loadMsgDelay","load","Deferred","reloadOptionExtension","_findBaseWithDefault","pblEvent","reject","promise","prevPage","fromPage","ajax","contentType","dataType","success","_loadError","errorThrown","plfEvent","_getTransitionHandler","_maybeDegradeTransition","transitionHandlers","defaultTransitionHandler","_triggerCssTransitionEvents","from","nextPage","_cssTransition","TransitionHandler","done","_releaseTransitionLock","isPageTransitioning","pageTransitionQueue","_removeActiveLinkClass","force","_loadUrl","fail","_triggerPageBeforeChange","returnEvents","unshift","defaults","activeIsInitialPage","historyDir","pageTitle","isDialog","alreadyThere","cssTransitionDeferred","beforeTransition","allowSamePageTransition","activeElement","blur","encodeURI","$to","$from","alreadyFocused","duplicateCachedPage","focusPage","closestBase","navreadyDeferred","domreadyDeferred","loadDeferred","pageIsFullyLoaded","$lastVClicked","findClosestLink","loadPage","container","nav","app","backHistory","autofocus","_registerInternalEvents","getAjaxFormData","$form","calculateOnly","formData","vclickedName","serializeArray","form","$btn","btnEls","needClosest","outer","$link","httpCleanup","baseUrl","useDefaultUrlHandling","urls","inArray","readyState","when","Transition","init","toPreClass","cleanFrom","beforeDoneIn","beforeDoneOut","beforeStartOut","doneIn","toggleViewportClass","toScroll","scrollPage","sequential","doneOut","reverseClass","none","preventFocus","startIn","hideIn","startOut","maxTransitionOverride","getMaxScrollForTransition","SerialTransition","ConcurrentTransition","defaultGetMaxScrollForTransition","simultaneous","transitionFallbacks","flip","flow","slide","slidedown","slidefade","slideup","turn","degradeInputs","color","date","datetime","datetime-local","email","month","number","range","tel","week","optType","hasType","findstr","repstr","clone","replaceWith","closeBtn","closeBtnText","overlayTheme","corners","_inner","_headerCloseButton","_setCloseBtn","wrapInner","class","closeButtonLocation","closeButtonText","currentOpts","dst","btn","_isCloseable","_handlePageBeforeHide","_handleVClickSubmit","attrs","vclick","submit","click","hist","rInitialLetter","iconposClass","iconpos","expandCueText","collapseCueText","collapsed","heading","collapsedIcon","expandedIcon","inset","mini","accordion","collapsibleset","_ui","_renderedOptions","_getOptions","anchor","status","_handleExpandCollapse","accordionWidget","collapsible","_themeClassFromOption","iconclass","contentThemeClass","originalHeading","placeholder","detach","refresh","_applyOptions","isCollapsed","newTheme","oldTheme","hasCorners","hasIcon","isCollapse","expand","collapse","contents","unwrap","uiScreenHiddenRegex","noHiddenClass","addFirstLastClasses","_getVisibles","$els","visibles","_addFirstLastClasses","$visibles","end","last","_removeFirstLastClasses","childCollapsiblesSelector","_handleCollapsibleExpand","closestCollapsible","siblings","_classes","collapsibleexpand","_refresh","themeClass","collapsiblesInSet","grid","$kids","gridCols","solo","iterator","letter","$navbar","$navbtns","icon","classes","getAttr","countTheme","dividerTheme","splitIcon","splitTheme","shadow","listviewClasses","_findFirstElementByTagName","nextProp","lcName","ucName","dict","_addThumbClasses","containers","_getChildrenByTagName","results","nextSibling","_beforeListviewRefresh","_afterListviewRefresh","buttonClass","pos","numli","item","itemClass","itemTheme","itemIcon","isDivider","startCount","newStartCount","splittheme","splitThemeClass","spliticon","altButtonClass","li","$list","ol","itemClassDict","countBubbles","countThemeClass","empty","defaultAutodividersSelector","elt","listview","autodividers","autodividersSelector","_replaceDividers","lis","dividerText","lastDividerText","list","divider","createTextNode","setAttribute","rdivider","rhidden","hideDividers","items","idx","hideDivider","formReset","_handleFormReset","escapeId","wrapperClass","inheritAttr","dataAttr","label","isParent","_findLabel","inputtype","checkedClass","uncheckedClass","labelIsParent","vmouseover","vmousedown","parentLabel","labelsList","labels","contains","getElementsByTagName","wrapAll","_wrapper","wrap","prepend","_handleInputFocus","_handleInputBlur","_handleInputVClick","_getInputSet","_updateAll","_handleLabelVMouseOver","_handleLabelVClick","_cacheVals","checked","formId","radio","radios","changeTriggered","checkboxradio","_reset","_hasIcon","controlgroup","controlgroupWidget","controlgroupConstructor","isChecked","addClasses","removeClasses","currentOptions","iconshadow","inline","wrapper","_button","iconClasses","_getIconClasses","originalElement","isDisabled","meta","disabledZoom","enabledZoom","disabledInitially","zoom","locked","lock","unlock","restore","preventFocusZoom","isSearch","isTextarea","tagName","isRange","inputNeedsWrap","_classesFromOptions","_autoCorrect","setOptions","elementClasses","_wrap","autocorrect","_handleBlur","_handleFocus","trackTheme","highlight","control","trackThemeClass","cornerClass","miniClass","cType","isToggleSwitch","isRangeslider","selectClass","controlID","$label","labelID","min","step","domHandle","handle","domSlider","slider","valuebg","bg","optionsCount","origTabIndex","activeClass","sliderImg","aria-valuemin","aria-valuemax","aria-valuenow","_value","aria-valuetext","aria-labelledby","dragging","beforeStart","userModified","mouseMoved","childNodes","_labels","keyup","vmouseup","_sliderVMouseDown","vmousemove","keydown","_setTheme","_setTrackTheme","_setCorners","_setMini","_setHighlight","_setDisabled","_controlChange","_controlKeyup","_controlBlur","_controlVMouseUp","_checkedRefresh","_handleVMouseDown","_handleKeydown","_keySliding","_handleKeyup","selectedIndex","_sliderVMouseUp","_preventDocumentDrag","isfromControl","preventInputUpdate","parentTheme","left","tol","pxStep","percent","isInput","optionElements","newval","valModStep","alignValue","percentPerStep","handlePercent","aPercent","bPercent","valueChanged","round","toFixed","ab","currentTheme","currentTrackTheme","newTrackTheme","popup","getPopup","popupEnabled","showValue","_currentValue","_popup","_popupVisible","_positionPopup","dstOffset","newValue","_showPopup","_hidePopup","onText","offText","flipswitch","_originalTabIndex","_left","_right","after","existingDirection","_toggle","_keydown","$el","elClass","_inputFirst","_inputLast","_label","_sliderWidgetFirst","_sliderWidgetLast","_sliderFirst","_sliderLast","firstHandle","_sliders","_targetVal","_sliderTarget","_proxy","slidebeforestart","slidestop","slidedrag","slidebeforechange","mousedown","_handleReset","_updateHighlight","_dragFirstHandle","_slidedrag","otherSlider","_slidestop","_slidebeforestart","_change","thisSlider","margin-left","textinput","clearBtn","clearBtnText","_addClearBtn","clearButton","_clearBtnClick","_clearBtn","_enhanceClear","_bindClearEvents","_toggleClear","cut","paste","_unbindClear","_destroyClear","_toggleClearClass","autogrow","keyupTimeoutBuffer","_autogrow","pageshow","popupbeforeposition","updatelayout","panelopen","_handleShow","_prepareHeightUpdate","_unbindAutogrow","keyupTimeout","_updateHeight","_timeout","paddingTop","paddingBottom","paddingHeight","scrollHeight","borderTop","borderBottom","borderHeight","min-height","max-height","hidePlaceholderMenuItems","closeText","nativeMenu","button","_focusButton","_selectOptions","select","_preExtension","selectId","buttonId","isMultiple","multiple","setButtonText","buttonCount","build","selected","selectedIndices","span","setButtonCount","_refreshButton","idref","fitSegmentInsideSegment","windowSize","segmentSize","desired","getWindowCoordinates","theWindow","scrollLeft","cx","cy","positionTo","tolerance","closeLinkSelector","closeLinkEvents","navigateEvents","closeEvents","dismissible","_handleDocumentVmousedown","theEvent","_isOpen","_ignoreResizeEvents","myId","_scrollTop","_page","_fallbackTransition","_currentTransition","_prerequisites","_tolerance","_resizeData","_ignoreResizeTo","_orientationchangeInProgress","screen","prev","getElementById","_applyTransition","_setTolerance","focusElement","resize","fragment","createDocumentFragment","_eatEventAndClose","_resizeScreen","popupHeight","documentHeight","_handleWindowKeyUp","_expectResizeEvent","windowCoordinates","timeoutId","_resizeTimeout","reposition","_stopIgnoringResizeEvents","_handleWindowResize","_handleWindowOrientationchange","_handleDocumentFocusIn","targetElement","_safelyBlur","newOptions","r","ar","String","_clampPopupWidth","infoOnly","menuSize","rectangle","rc","_calculateFinalLocation","clampInfo","_placementCoords","_createPrerequisites","screenPrerequisite","containerPrerequisite","whenDone","prerequisites","then","_animate","classToRemove","screenClassToAdd","applyTransition","containerClassToAdd","_desiredCoords","openOptions","pTo","_reposition","currentElement","_openPrerequisitesComplete","firstFocus","_open","androidBlacklist","androidmatch","andversion","chromematch","additionalCondition","_closePrerequisiteScreen","_closePrerequisiteContainer","_closePrerequisitesDone","_close","immediate","_unenhance","_closePopup","parsedDst","toUrl","_myUrl","_bindContainerClose","hashkey","currentIsDialog","urlHistory","urlAltered","handleLink","unfocusableItemSelector","goToAdjacentItem","adjacent","selectmenu","_handleSelectFocus","_handleButtonVclickKeydown","isOpen","_decideFormat","menuType","popupId","dialogId","_handleListFocus","tabindex","_handleListKeydown","_handleMenuPageHide","_delayedTrigger","thisPage","_handleHeaderCloseClick","_handleListItemClick","listItem","oldIndex","newIndex","_triggerChange","menuId","themeAttr","overlayThemeAttr","dividerThemeAttr","menuPage","listbox","header","headerTitle","menuPageContent","menuPageClose","headerClose","_origTabIndex","click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)","pagehide","popupafterclose","_popupClosed","_isRebuildRequired","indices","_buildList","_focusMenuItem","$window","selfListParent","menuHeight","btnOffset","popupafteropen","needPlaceholder","dataIcon","$options","numOptions","dataPrefix","dataIndexAttr","dataIconAttr","dataRoleAttr","dataPlaceholderAttr","isPlaceholderItem","optGroup","$option","optLabel","_removePlaceholderAttr","aria-haspopup","aria-owns","reverseBoolOptionMap","ui-shadow","ui-corner-all","ui-btn-inline","ui-shadow-icon","ui-mini","getAttrFixed","capitalLettersRE","optionsToClasses","existingClasses","classNameToOptions","unknownClass","alreadyEnhanced","noIcon","unknownClasses","camelCase2Hyphenated","overwriteClasses","retrievedOptions","optionKey","excludeInvisible","_childWidgets","_initialRefresh","groupLegend","childWrapper","callRefresh","els","buttons","addBackBtn","backBtnTheme","backBtnText","leftbtn","rightbtn","_updateBackButton","_addHeaderButtonClasses","_setRelative","_addHeadingClasses","_btnMarkup","headerAnchors","backButton","_backButton","attached","aria-level","visibleOnPageShow","disablePageZoom","fullscreen","tapToggle","tapToggleBlacklist","hideDuringFocus","trackPersistentToolbars","supportBlacklist","_makeFixed","_addTransitionClass","_bindPageEvents","_bindToggleHandlers","$page","tclass","webkitAnimationStart","animationstart","_handleAnimationStart","_handlePageShow","thisFooter","thisHeader","nextFooter","nextHeader","_visible","tbPage","_useTransition","notransition","scroll","elHeight","pHeight","viewportHeight","hideClass","outclass","toggle","delayShow","delayHide","isVisible","pageClasses","toolbarClasses","hasFixed","hasFullscreen","_workarounds","os","_bindScrollWorkaround","_bindListThumbWorkaround","_viewportOffset","viewportOffset","_triggerRedraw","ieHack","uiTemplate","getArrow","gd","arEls","arrow","_addArrow","_tryAnArrow","dir","best","desiredForArrow","tip","arFull","dimKey","guideDims","fst","arHalf","oDimKey","menuHalf","offsetFactor","contentBox","arrowOffsetFactor","snd","tipOffset","guideOffset","posProp","posVal","_getPlacementState","clamp","gdOffset","right","bottom","elOffset","bgRef","panel","panelOpen","panelClosed","panelFixed","panelInner","modal","modalOpen","pageWrapper","pageFixedToolbar","pageContentPrefix","animate","display","swipeClose","positionFixed","_closeLink","_parentPage","_modal","_panelInner","_fixedToolbars","parentPage","_openedPage","_getPage","_getPanelInner","_getFixedToolbars","_getWrapper","_addPanelClasses","_bindUpdateLayout","_bindCloseEvents","_bindLinkListeners","_createModal","_bindSwipeEvents","extFixedToolbars","intFixedToolbars","fixedToolbars","_getPosDisplayClasses","_getPanelClasses","panelClasses","_handleCloseClick","click a:jqmData(ajax='false')","_positionPanel","scrollToTop","panelInnerHeight","_unfixPanel","_fixPanel","_bindFixListener","_unbindFixListener","click a","_handleClick","panelId","area","_pageContentOpenClasses","_modalOpenClasses","_openPanel","panelclose","_closePanel","otherPanels","multiplePanels","table","headers","allHeaders","_setHeaders","trs","rebuild","columnCount","mode","columnBtnTheme","columnPopupTheme","columnBtnText","columnBtn","priorityPrefix","columnToggleTable","_menu","_id","_addToggles","_enhanceColToggle","_setupEvents","_setToggleState","change input","menu","keep","inputs","checkboxIndex","cells","priority","_menuInputChange","evt","_unlockCells","menuButton","before","hiddenColumns","checkbox","reflowTable","cellLabels","_updateReflow","colstart","hierarchyClass","iteration","_addLabels","defaultFilterCallback","searchValue","filterReveal","filterCallback","_search","_timer","_setInput","_filterItems","_onKeyUp","lastval","_getFilterableItems","filterItems","_refreshChildWidget","recognizedWidgets","keypress","_onKeyDown","_preventKeyPress","_onKeyPress","refilter","replaceSetOptions","_syncTextInputOptions","rDividerListItem","origDefaultFilterCallback","filterable","filterPlaceholder","filterTheme","createHandlers","_setWidget","_handleCreate","_isSearchInternal","updatePlaceholder","textinputOpts","_refreshingChildWidget","textinputOptions","tabId","rhash","getNextTabId","isLocal","heightStyle","activate","beforeActivate","beforeLoad","running","_processTabs","_initialActive","isArray","unique","tabs","sort","anchors","_findActive","locationHash","tab","_getPanelForTab","_tabKeydown","focusedTab","goingForward","_handlePageNav","activating","_activate","_focusNextTab","ctrlKey","_panelKeydown","altKey","_findNextTab","lastTabIndex","constrain","_setupDisabled","_setupHeightStyle","_tabId","_sanitizeSelector","tablist","aria-selected","panels","aria-expanded","aria-hidden","_getList","anchorId","originalAriaControls","_createPanel","aria-controls","maxHeight","_eventHandler","clickedIsActive","collapsing","toShow","toHide","eventData","oldTab","oldPanel","newTab","newPanel","abort","_show","_hide","_getIndex","num","merge","_ajaxSettings","statusText","response","jqXHR","beforeSend","ajaxSettings","iosorientationfixEnabled","z","aig","checkTilt","accelerationIncludingGravity","hideRenderingClass","initializePage","$pages","hashPage","CDP","Framework","Platform","majorVersion","ltIE6","ltIE7","querySelectorAll","ltIE8","getElementsByClassName","ltIE9","uniqueID","gtIE10","Trident","Gecko","Presto","global","Blink","chrome","Webkit","Touch","ontouchstart","Mobile","ltAd4_4","EventSource","Pointer","pointerEnabled","MSPoniter","msPointerEnabled","Android","iOS","_vclickPatch","jquery_on","jquery_off","custom_on","types","_","custom_off","Patch","isSupportedVclick","s_vclickEvent","Orientation","getOrientation","PORTRAIT","LANDSCAPE","Promise","webRoot","getCurrentDocumentUrl","$activePage","_beforeRouteChange","_defaultBeforeRouteChange","setBeforeRouteChangeHandler","oldHandler","Router","initialize","$body","s_router","console","warn","s_initOptions","s_defaultInitOptions","s_loadUrl","Backbone","loadUrl","customLoadUrl","onRouteSucceeded","s_back","customJqmBack","bindEvents","setupEventHandlers","register","route","restart","regexp","_routeToRegExp","pushContext","silent","log","prevState","started","isRouting","s_lastNavigateInfo","inNavigation","initFirstPageIfNeeded","navOptions","s_defaultNavigateOptions","notifyBeforeRouteChange","calledBeforeRouteChange","backDestination","noHashChange","intent","positiveNavigate","always","subFlow","operation","startSubFlow","finishSubFlow","getFragment","s_rootContexts","findWhere","navigateFromTop","getJqmHistory","currentPage","_transition","_reverse","destStacks","forEach","SUBFLOW_PARAM","destBase","additionalDistance","isTopPage","exitApp","pushIntent","s_lastIntent","popIntent","getQueryParameters","beginSubFlow","opt","commitSubFlow","cancelSubFlow","baseInfo","detectSubFlowBaseInfo","subFlowParam","isInSubFlow","has","some","fromHashChanged","registerPageStack","pageStack","withNavigate","newStacks","failed","makeStack","info","pathToJqmDataUrl","silentLength","finalIndex","handled","onRouteFailed","anchorVclick","onAnchorVclicked","BACK_DESTINATION_URL","setBackButtonHandler","isJustBeforeVclicked","followAnchor","backDst","DATA_BACK_DESTINATION","DATA_NO_HASH_CHANGE","noHrefHandle","DATA_NO_VCLICK_HANDLE","needDefaultOperation","isBackButtonClicked","canResolveRoute","any","isBefore","now","s_lastClickedTime","DELAY_TIME","_i","queryParams","inAdditionalBack","decideDirection","additional","detectAdditionalBackDistance","subFlowInfo","isCurrent","treatUrlHistory","newPage","historyActiveIndex","distance","jqmDataUrl","retry","NAVIGATE_INTERVAL","MAX_RETRY_COUNT","_navigate","waitForDeviceReady","cordova","_defaultBackButtonHandler","TAG","_dfInitialize","_activePage","_orientationListenerHolder","_lastOrientation","config","getConfig","applyPatch","jquerymobile","initializeI18N","i18n","localize","jqueryMajor","__WEBPACK_AMD_REQUIRE_ARRAY__","catch","isInitialized","waitForInitialize","registerOrientationChangedListener","listener","unregisterOrientationChangedListener","oldBackButtonHandler","baseBackButtonHandler","onHardwareBackButton","oldRouteChangeHandler","baseRouteChangeHandler","onBeforeRouteChange","setActivePage","getDefaultClickEvent","defConfig","cors","ajaxSetup","cache","migrateMute","Config","newOrientation","onOrientationChanged","Page","_url","_$page","_$header","_$footer","_intent","newIntent","_update","_owner","onCommand","kind","onInitialize","onPageBeforeCreate","onPageInit","onPageBeforeShow","onPageShow","onPageBeforeHide","onPageHide","onPageRemove","_this","_initialized","pageInit","pageBeforeShow","pageShow","pageBeforeHide","pageHide","pageRemove","pageBeforeCreate","owner","_keepIntent","keepIntent","getDirection","prevIndex","migrateVersion","rbadVersions","migrateWarnings","warnedAbout","migrateTrace","migrateReset","migrateWarn","trace","migrateWarnProp","migrateWarnFunc","newFunc","compatMode","oldInit","oldIsNumeric","isNumeric","rattrHashTest","rattrHashGlob","arg1","querySelector","err1","op","err2","findProp","parseJSON","isNumeric2","realStringObj","oldValue","uniqueSort","pseudos","oldAjax","jQXHR","oldRemoveAttr","oldToggleClass","rmatchNonSpace","internalSwapCall","swap","oldHook","cssHooks","old","oldData","curData","hasData","sameKeys","oldTweenRun","Tween","run","oldEasing","fx","interval","requestAnimationFrame","oldLoad","oldEventAdd","originalFix","fix","fixHooks","fixHook","addProp","_migrated_","splice","ready","oldOffset","oldParam","traditional","ajaxTraditional","oldSelf","andSelf","oldDeferred","tuples","Callbacks","func","pipe","fns","newDefer","tuple","returned","progress","notify"],"mappings":"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","sourcesContent":["/*!\n * @cdp/framework-jqm.js 2.0.0\n *\n * Date: 2017-06-26T06:44:04.749Z\n */\n\n(function webpackUniversalModuleDefinition(root, factory) {\n    if(typeof exports === 'object' && typeof module === 'object')\n        module.exports = factory(require(\"cdp.i18n\"), require(\"backbone\"), require(\"jquery\"));\n    else if(typeof define === 'function' && define.amd)\n        define([\"cdp.i18n\", \"backbone\", \"jquery\"], factory);\n    else if(typeof exports === 'object')\n        exports[\"CDP\"] = factory(require(\"cdp.i18n\"), require(\"backbone\"), require(\"jquery\"));\n    else\n        root[\"CDP\"] = factory(root[\"CDP\"], root[\"Backbone\"], root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/     // The module cache\n/******/     var installedModules = {};\n/******/\n/******/     // The require function\n/******/     function __webpack_require__(moduleId) {\n/******/\n/******/         // Check if module is in cache\n/******/         if(installedModules[moduleId]) {\n/******/             return installedModules[moduleId].exports;\n/******/         }\n/******/         // Create a new module (and put it into the cache)\n/******/         var module = installedModules[moduleId] = {\n/******/             i: moduleId,\n/******/             l: false,\n/******/             exports: {}\n/******/         };\n/******/\n/******/         // Execute the module function\n/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/         // Flag the module as loaded\n/******/         module.l = true;\n/******/\n/******/         // Return the exports of the module\n/******/         return module.exports;\n/******/     }\n/******/\n/******/\n/******/     // expose the modules object (__webpack_modules__)\n/******/     __webpack_require__.m = modules;\n/******/\n/******/     // expose the module cache\n/******/     __webpack_require__.c = installedModules;\n/******/\n/******/     // define getter function for harmony exports\n/******/     __webpack_require__.d = function(exports, name, getter) {\n/******/         if(!__webpack_require__.o(exports, name)) {\n/******/             Object.defineProperty(exports, name, {\n/******/                 configurable: false,\n/******/                 enumerable: true,\n/******/                 get: getter\n/******/             });\n/******/         }\n/******/     };\n/******/\n/******/     // getDefaultExport function for compatibility with non-harmony modules\n/******/     __webpack_require__.n = function(module) {\n/******/         var getter = module && module.__esModule ?\n/******/             function getDefault() { return module['default']; } :\n/******/             function getModuleExports() { return module; };\n/******/         __webpack_require__.d(getter, 'a', getter);\n/******/         return getter;\n/******/     };\n/******/\n/******/     // Object.prototype.hasOwnProperty.call\n/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/     // __webpack_public_path__\n/******/     __webpack_require__.p = \"\";\n/******/\n/******/     // Load entry module and return exports\n/******/     return __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n* jQuery Mobile 1.4.5\n* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC\n* http://jquerymobile.com\n*\n* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors\n* Released under the MIT license.\n* http://jquery.org/license\n*\n*/\n\n\n(function ( root, doc, factory ) {\n    if ( true ) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(5) ], __WEBPACK_AMD_DEFINE_RESULT__ = function ( $ ) {\n            factory( $, root, doc );\n            return $.mobile;\n        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {\n        // Browser globals\n        factory( root.jQuery, root, doc );\n    }\n}( this, document, function ( jQuery, window, document, undefined ) {\n(function( $ ) {\n    $.mobile = {};\n}( jQuery ));\n\n/*!\n * jQuery UI Core c0ab71056b936627e8a7821f03c044aec6280a40\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n(function( $, undefined ) {\n\nvar uuid = 0,\n    runiqueId = /^ui-id-\\d+$/;\n\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\n$.ui = $.ui || {};\n\n$.extend( $.ui, {\n    version: \"c0ab71056b936627e8a7821f03c044aec6280a40\",\n\n    keyCode: {\n        BACKSPACE: 8,\n        COMMA: 188,\n        DELETE: 46,\n        DOWN: 40,\n        END: 35,\n        ENTER: 13,\n        ESCAPE: 27,\n        HOME: 36,\n        LEFT: 37,\n        PAGE_DOWN: 34,\n        PAGE_UP: 33,\n        PERIOD: 190,\n        RIGHT: 39,\n        SPACE: 32,\n        TAB: 9,\n        UP: 38\n    }\n});\n\n// plugins\n$.fn.extend({\n    focus: (function( orig ) {\n        return function( delay, fn ) {\n            return typeof delay === \"number\" ?\n                this.each(function() {\n                    var elem = this;\n                    setTimeout(function() {\n                        $( elem ).focus();\n                        if ( fn ) {\n                            fn.call( elem );\n                        }\n                    }, delay );\n                }) :\n                orig.apply( this, arguments );\n        };\n    })( $.fn.focus ),\n\n    scrollParent: function() {\n        var scrollParent;\n        if (($.ui.ie && (/(static|relative)/).test(this.css(\"position\"))) || (/absolute/).test(this.css(\"position\"))) {\n            scrollParent = this.parents().filter(function() {\n                return (/(relative|absolute|fixed)/).test($.css(this,\"position\")) && (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n            }).eq(0);\n        } else {\n            scrollParent = this.parents().filter(function() {\n                return (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n            }).eq(0);\n        }\n\n        return ( /fixed/ ).test( this.css( \"position\") ) || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;\n    },\n\n    uniqueId: function() {\n        return this.each(function() {\n            if ( !this.id ) {\n                this.id = \"ui-id-\" + (++uuid);\n            }\n        });\n    },\n\n    removeUniqueId: function() {\n        return this.each(function() {\n            if ( runiqueId.test( this.id ) ) {\n                $( this ).removeAttr( \"id\" );\n            }\n        });\n    }\n});\n\n// selectors\nfunction focusable( element, isTabIndexNotNaN ) {\n    var map, mapName, img,\n        nodeName = element.nodeName.toLowerCase();\n    if ( \"area\" === nodeName ) {\n        map = element.parentNode;\n        mapName = map.name;\n        if ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n            return false;\n        }\n        img = $( \"img[usemap=#\" + mapName + \"]\" )[0];\n        return !!img && visible( img );\n    }\n    return ( /input|select|textarea|button|object/.test( nodeName ) ?\n        !element.disabled :\n        \"a\" === nodeName ?\n            element.href || isTabIndexNotNaN :\n            isTabIndexNotNaN) &&\n        // the element and all of its ancestors must be visible\n        visible( element );\n}\n\nfunction visible( element ) {\n    return $.expr.filters.visible( element ) &&\n        !$( element ).parents().addBack().filter(function() {\n            return $.css( this, \"visibility\" ) === \"hidden\";\n        }).length;\n}\n\n$.extend( $.expr[ \":\" ], {\n    data: $.expr.createPseudo ?\n        $.expr.createPseudo(function( dataName ) {\n            return function( elem ) {\n                return !!$.data( elem, dataName );\n            };\n        }) :\n        // support: jQuery <1.8\n        function( elem, i, match ) {\n            return !!$.data( elem, match[ 3 ] );\n        },\n\n    focusable: function( element ) {\n        return focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\n    },\n\n    tabbable: function( element ) {\n        var tabIndex = $.attr( element, \"tabindex\" ),\n            isTabIndexNaN = isNaN( tabIndex );\n        return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\n    }\n});\n\n// support: jQuery <1.8\nif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\n    $.each( [ \"Width\", \"Height\" ], function( i, name ) {\n        var side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n            type = name.toLowerCase(),\n            orig = {\n                innerWidth: $.fn.innerWidth,\n                innerHeight: $.fn.innerHeight,\n                outerWidth: $.fn.outerWidth,\n                outerHeight: $.fn.outerHeight\n            };\n\n        function reduce( elem, size, border, margin ) {\n            $.each( side, function() {\n                size -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n                if ( border ) {\n                    size -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n                }\n                if ( margin ) {\n                    size -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n                }\n            });\n            return size;\n        }\n\n        $.fn[ \"inner\" + name ] = function( size ) {\n            if ( size === undefined ) {\n                return orig[ \"inner\" + name ].call( this );\n            }\n\n            return this.each(function() {\n                $( this ).css( type, reduce( this, size ) + \"px\" );\n            });\n        };\n\n        $.fn[ \"outer\" + name] = function( size, margin ) {\n            if ( typeof size !== \"number\" ) {\n                return orig[ \"outer\" + name ].call( this, size );\n            }\n\n            return this.each(function() {\n                $( this).css( type, reduce( this, size, true, margin ) + \"px\" );\n            });\n        };\n    });\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n    $.fn.addBack = function( selector ) {\n        return this.add( selector == null ?\n            this.prevObject : this.prevObject.filter( selector )\n        );\n    };\n}\n\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\nif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\n    $.fn.removeData = (function( removeData ) {\n        return function( key ) {\n            if ( arguments.length ) {\n                return removeData.call( this, $.camelCase( key ) );\n            } else {\n                return removeData.call( this );\n            }\n        };\n    })( $.fn.removeData );\n}\n\n\n\n\n\n// deprecated\n$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n$.support.selectstart = \"onselectstart\" in document.createElement( \"div\" );\n$.fn.extend({\n    disableSelection: function() {\n        return this.bind( ( $.support.selectstart ? \"selectstart\" : \"mousedown\" ) +\n            \".ui-disableSelection\", function( event ) {\n                event.preventDefault();\n            });\n    },\n\n    enableSelection: function() {\n        return this.unbind( \".ui-disableSelection\" );\n    },\n\n    zIndex: function( zIndex ) {\n        if ( zIndex !== undefined ) {\n            return this.css( \"zIndex\", zIndex );\n        }\n\n        if ( this.length ) {\n            var elem = $( this[ 0 ] ), position, value;\n            while ( elem.length && elem[ 0 ] !== document ) {\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\n                // This makes behavior of this function consistent across browsers\n                // WebKit always returns auto if the element is positioned\n                position = elem.css( \"position\" );\n                if ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n                    // IE returns 0 when zIndex is not specified\n                    // other browsers return a string\n                    // we ignore the case of nested elements with an explicit value of 0\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n                    value = parseInt( elem.css( \"zIndex\" ), 10 );\n                    if ( !isNaN( value ) && value !== 0 ) {\n                        return value;\n                    }\n                }\n                elem = elem.parent();\n            }\n        }\n\n        return 0;\n    }\n});\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\n$.ui.plugin = {\n    add: function( module, option, set ) {\n        var i,\n            proto = $.ui[ module ].prototype;\n        for ( i in set ) {\n            proto.plugins[ i ] = proto.plugins[ i ] || [];\n            proto.plugins[ i ].push( [ option, set[ i ] ] );\n        }\n    },\n    call: function( instance, name, args, allowDisconnected ) {\n        var i,\n            set = instance.plugins[ name ];\n\n        if ( !set ) {\n            return;\n        }\n\n        if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n            return;\n        }\n\n        for ( i = 0; i < set.length; i++ ) {\n            if ( instance.options[ set[ i ][ 0 ] ] ) {\n                set[ i ][ 1 ].apply( instance.element, args );\n            }\n        }\n    }\n};\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n\n    // Subtract the height of external toolbars from the page height, if the page does not have\n    // internal toolbars of the same type. We take care to use the widget options if we find a\n    // widget instance and the element's data-attributes otherwise.\n    var compensateToolbars = function( page, desiredHeight ) {\n        var pageParent = page.parent(),\n            toolbarsAffectingHeight = [],\n\n            // We use this function to filter fixed toolbars with option updatePagePadding set to\n            // true (which is the default) from our height subtraction, because fixed toolbars with\n            // option updatePagePadding set to true compensate for their presence by adding padding\n            // to the active page. We want to avoid double-counting by also subtracting their\n            // height from the desired page height.\n            noPadders = function() {\n                var theElement = $( this ),\n                    widgetOptions = $.mobile.toolbar && theElement.data( \"mobile-toolbar\" ) ?\n                        theElement.toolbar( \"option\" ) : {\n                            position: theElement.attr( \"data-\" + $.mobile.ns + \"position\" ),\n                            updatePagePadding: ( theElement.attr( \"data-\" + $.mobile.ns +\n                                \"update-page-padding\" ) !== false )\n                        };\n\n                return !( widgetOptions.position === \"fixed\" &&\n                    widgetOptions.updatePagePadding === true );\n            },\n            externalHeaders = pageParent.children( \":jqmData(role='header')\" ).filter( noPadders ),\n            internalHeaders = page.children( \":jqmData(role='header')\" ),\n            externalFooters = pageParent.children( \":jqmData(role='footer')\" ).filter( noPadders ),\n            internalFooters = page.children( \":jqmData(role='footer')\" );\n\n        // If we have no internal headers, but we do have external headers, then their height\n        // reduces the page height\n        if ( internalHeaders.length === 0 && externalHeaders.length > 0 ) {\n            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalHeaders.toArray() );\n        }\n\n        // If we have no internal footers, but we do have external footers, then their height\n        // reduces the page height\n        if ( internalFooters.length === 0 && externalFooters.length > 0 ) {\n            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalFooters.toArray() );\n        }\n\n        $.each( toolbarsAffectingHeight, function( index, value ) {\n            desiredHeight -= $( value ).outerHeight();\n        });\n\n        // Height must be at least zero\n        return Math.max( 0, desiredHeight );\n    };\n\n    $.extend( $.mobile, {\n        // define the window and the document objects\n        window: $( window ),\n        document: $( document ),\n\n        // TODO: Remove and use $.ui.keyCode directly\n        keyCode: $.ui.keyCode,\n\n        // Place to store various widget extensions\n        behaviors: {},\n\n        // Scroll page vertically: scroll to 0 to hide iOS address bar, or pass a Y value\n        silentScroll: function( ypos ) {\n            if ( $.type( ypos ) !== \"number\" ) {\n                ypos = $.mobile.defaultHomeScroll;\n            }\n\n            // prevent scrollstart and scrollstop events\n            $.event.special.scrollstart.enabled = false;\n\n            setTimeout(function() {\n                window.scrollTo( 0, ypos );\n                $.mobile.document.trigger( \"silentscroll\", { x: 0, y: ypos });\n            }, 20 );\n\n            setTimeout(function() {\n                $.event.special.scrollstart.enabled = true;\n            }, 150 );\n        },\n\n        getClosestBaseUrl: function( ele )    {\n            // Find the closest page and extract out its url.\n            var url = $( ele ).closest( \".ui-page\" ).jqmData( \"url\" ),\n                base = $.mobile.path.documentBase.hrefNoHash;\n\n            if ( !$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath( url ) ) {\n                url = base;\n            }\n\n            return $.mobile.path.makeUrlAbsolute( url, base );\n        },\n        removeActiveLinkClass: function( forceRemoval ) {\n            if ( !!$.mobile.activeClickedLink &&\n                ( !$.mobile.activeClickedLink.closest( \".\" + $.mobile.activePageClass ).length ||\n                    forceRemoval ) ) {\n\n                $.mobile.activeClickedLink.removeClass( $.mobile.activeBtnClass );\n            }\n            $.mobile.activeClickedLink = null;\n        },\n\n        // DEPRECATED in 1.4\n        // Find the closest parent with a theme class on it. Note that\n        // we are not using $.fn.closest() on purpose here because this\n        // method gets called quite a bit and we need it to be as fast\n        // as possible.\n        getInheritedTheme: function( el, defaultTheme ) {\n            var e = el[ 0 ],\n                ltr = \"\",\n                re = /ui-(bar|body|overlay)-([a-z])\\b/,\n                c, m;\n            while ( e ) {\n                c = e.className || \"\";\n                if ( c && ( m = re.exec( c ) ) && ( ltr = m[ 2 ] ) ) {\n                    // We found a parent with a theme class\n                    // on it so bail from this loop.\n                    break;\n                }\n\n                e = e.parentNode;\n            }\n            // Return the theme letter we found, if none, return the\n            // specified default.\n            return ltr || defaultTheme || \"a\";\n        },\n\n        enhanceable: function( elements ) {\n            return this.haveParents( elements, \"enhance\" );\n        },\n\n        hijackable: function( elements ) {\n            return this.haveParents( elements, \"ajax\" );\n        },\n\n        haveParents: function( elements, attr ) {\n            if ( !$.mobile.ignoreContentEnabled ) {\n                return elements;\n            }\n\n            var count = elements.length,\n                $newSet = $(),\n                e, $element, excluded,\n                i, c;\n\n            for ( i = 0; i < count; i++ ) {\n                $element = elements.eq( i );\n                excluded = false;\n                e = elements[ i ];\n\n                while ( e ) {\n                    c = e.getAttribute ? e.getAttribute( \"data-\" + $.mobile.ns + attr ) : \"\";\n\n                    if ( c === \"false\" ) {\n                        excluded = true;\n                        break;\n                    }\n\n                    e = e.parentNode;\n                }\n\n                if ( !excluded ) {\n                    $newSet = $newSet.add( $element );\n                }\n            }\n\n            return $newSet;\n        },\n\n        getScreenHeight: function() {\n            // Native innerHeight returns more accurate value for this across platforms,\n            // jQuery version is here as a normalized fallback for platforms like Symbian\n            return window.innerHeight || $.mobile.window.height();\n        },\n\n        //simply set the active page's minimum height to screen height, depending on orientation\n        resetActivePageHeight: function( height ) {\n            var page = $( \".\" + $.mobile.activePageClass ),\n                pageHeight = page.height(),\n                pageOuterHeight = page.outerHeight( true );\n\n            height = compensateToolbars( page,\n                ( typeof height === \"number\" ) ? height : $.mobile.getScreenHeight() );\n\n            // Remove any previous min-height setting\n            page.css( \"min-height\", \"\" );\n\n            // Set the minimum height only if the height as determined by CSS is insufficient\n            if ( page.height() < height ) {\n                page.css( \"min-height\", height - ( pageOuterHeight - pageHeight ) );\n            }\n        },\n\n        loading: function() {\n            // If this is the first call to this function, instantiate a loader widget\n            var loader = this.loading._widget || $( $.mobile.loader.prototype.defaultHtml ).loader(),\n\n                // Call the appropriate method on the loader\n                returnValue = loader.loader.apply( loader, arguments );\n\n            // Make sure the loader is retained for future calls to this function.\n            this.loading._widget = loader;\n\n            return returnValue;\n        }\n    });\n\n    $.addDependents = function( elem, newDependents ) {\n        var $elem = $( elem ),\n            dependents = $elem.jqmData( \"dependents\" ) || $();\n\n        $elem.jqmData( \"dependents\", $( dependents ).add( newDependents ) );\n    };\n\n    // plugins\n    $.fn.extend({\n        removeWithDependents: function() {\n            $.removeWithDependents( this );\n        },\n\n        // Enhance child elements\n        enhanceWithin: function() {\n            var index,\n                widgetElements = {},\n                keepNative = $.mobile.page.prototype.keepNativeSelector(),\n                that = this;\n\n            // Add no js class to elements\n            if ( $.mobile.nojs ) {\n                $.mobile.nojs( this );\n            }\n\n            // Bind links for ajax nav\n            if ( $.mobile.links ) {\n                $.mobile.links( this );\n            }\n\n            // Degrade inputs for styleing\n            if ( $.mobile.degradeInputsWithin ) {\n                $.mobile.degradeInputsWithin( this );\n            }\n\n            // Run buttonmarkup\n            if ( $.fn.buttonMarkup ) {\n                this.find( $.fn.buttonMarkup.initSelector ).not( keepNative )\n                .jqmEnhanceable().buttonMarkup();\n            }\n\n            // Add classes for fieldContain\n            if ( $.fn.fieldcontain ) {\n                this.find( \":jqmData(role='fieldcontain')\" ).not( keepNative )\n                .jqmEnhanceable().fieldcontain();\n            }\n\n            // Enhance widgets\n            $.each( $.mobile.widgets, function( name, constructor ) {\n\n                // If initSelector not false find elements\n                if ( constructor.initSelector ) {\n\n                    // Filter elements that should not be enhanced based on parents\n                    var elements = $.mobile.enhanceable( that.find( constructor.initSelector ) );\n\n                    // If any matching elements remain filter ones with keepNativeSelector\n                    if ( elements.length > 0 ) {\n\n                        // $.mobile.page.prototype.keepNativeSelector is deprecated this is just for backcompat\n                        // Switch to $.mobile.keepNative in 1.5 which is just a value not a function\n                        elements = elements.not( keepNative );\n                    }\n\n                    // Enhance whatever is left\n                    if ( elements.length > 0 ) {\n                        widgetElements[ constructor.prototype.widgetName ] = elements;\n                    }\n                }\n            });\n\n            for ( index in widgetElements ) {\n                widgetElements[ index ][ index ]();\n            }\n\n            return this;\n        },\n\n        addDependents: function( newDependents ) {\n            $.addDependents( this, newDependents );\n        },\n\n        // note that this helper doesn't attempt to handle the callback\n        // or setting of an html element's text, its only purpose is\n        // to return the html encoded version of the text in all cases. (thus the name)\n        getEncodedText: function() {\n            return $( \"<a>\" ).text( this.text() ).html();\n        },\n\n        // fluent helper function for the mobile namespaced equivalent\n        jqmEnhanceable: function() {\n            return $.mobile.enhanceable( this );\n        },\n\n        jqmHijackable: function() {\n            return $.mobile.hijackable( this );\n        }\n    });\n\n    $.removeWithDependents = function( nativeElement ) {\n        var element = $( nativeElement );\n\n        ( element.jqmData( \"dependents\" ) || $() ).remove();\n        element.remove();\n    };\n    $.addDependents = function( nativeElement, newDependents ) {\n        var element = $( nativeElement ),\n            dependents = element.jqmData( \"dependents\" ) || $();\n\n        element.jqmData( \"dependents\", $( dependents ).add( newDependents ) );\n    };\n\n    $.find.matches = function( expr, set ) {\n        return $.find( expr, null, null, set );\n    };\n\n    $.find.matchesSelector = function( node, expr ) {\n        return $.find( expr, null, null, [ node ] ).length > 0;\n    };\n\n})( jQuery, this );\n\n(function( $, window, undefined ) {\n    $.extend( $.mobile, {\n\n        // Version of the jQuery Mobile Framework\n        version: \"1.4.5\",\n\n        // Deprecated and no longer used in 1.4 remove in 1.5\n        // Define the url parameter used for referencing widget-generated sub-pages.\n        // Translates to example.html&ui-page=subpageIdentifier\n        // hash segment before &ui-page= is used to make Ajax request\n        subPageUrlKey: \"ui-page\",\n\n        hideUrlBar: true,\n\n        // Keepnative Selector\n        keepNative: \":jqmData(role='none'), :jqmData(role='nojs')\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class assigned to page currently in view, and during transitions\n        activePageClass: \"ui-page-active\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class used for \"active\" button state, from CSS framework\n        activeBtnClass: \"ui-btn-active\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class used for \"focus\" form element state, from CSS framework\n        focusClass: \"ui-focus\",\n\n        // Automatically handle clicks and form submissions through Ajax, when same-domain\n        ajaxEnabled: true,\n\n        // Automatically load and show pages based on location.hash\n        hashListeningEnabled: true,\n\n        // disable to prevent jquery from bothering with links\n        linkBindingEnabled: true,\n\n        // Set default page transition - 'none' for no transitions\n        defaultPageTransition: \"fade\",\n\n        // Set maximum window width for transitions to apply - 'false' for no limit\n        maxTransitionWidth: false,\n\n        // Minimum scroll distance that will be remembered when returning to a page\n        // Deprecated remove in 1.5\n        minScrollBack: 0,\n\n        // Set default dialog transition - 'none' for no transitions\n        defaultDialogTransition: \"pop\",\n\n        // Error response message - appears when an Ajax page request fails\n        pageLoadErrorMessage: \"Error Loading Page\",\n\n        // For error messages, which theme does the box use?\n        pageLoadErrorMessageTheme: \"a\",\n\n        // replace calls to window.history.back with phonegaps navigation helper\n        // where it is provided on the window object\n        phonegapNavigationEnabled: false,\n\n        //automatically initialize the DOM when it's ready\n        autoInitializePage: true,\n\n        pushStateEnabled: true,\n\n        // allows users to opt in to ignoring content by marking a parent element as\n        // data-ignored\n        ignoreContentEnabled: false,\n\n        buttonMarkup: {\n            hoverDelay: 200\n        },\n\n        // disable the alteration of the dynamic base tag or links in the case\n        // that a dynamic base tag isn't supported\n        dynamicBaseEnabled: true,\n\n        // default the property to remove dependency on assignment in init module\n        pageContainer: $(),\n\n        //enable cross-domain page support\n        allowCrossDomainPages: false,\n\n        dialogHashKey: \"&ui-state=dialog\"\n    });\n})( jQuery, this );\n\n/*!\n * jQuery UI Widget c0ab71056b936627e8a7821f03c044aec6280a40\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n(function( $, undefined ) {\n\nvar uuid = 0,\n    slice = Array.prototype.slice,\n    _cleanData = $.cleanData;\n$.cleanData = function( elems ) {\n    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n        try {\n            $( elem ).triggerHandler( \"remove\" );\n        // http://bugs.jquery.com/ticket/8235\n        } catch( e ) {}\n    }\n    _cleanData( elems );\n};\n\n$.widget = function( name, base, prototype ) {\n    var fullName, existingConstructor, constructor, basePrototype,\n        // proxiedPrototype allows the provided prototype to remain unmodified\n        // so that it can be used as a mixin for multiple widgets (#8876)\n        proxiedPrototype = {},\n        namespace = name.split( \".\" )[ 0 ];\n\n    name = name.split( \".\" )[ 1 ];\n    fullName = namespace + \"-\" + name;\n\n    if ( !prototype ) {\n        prototype = base;\n        base = $.Widget;\n    }\n\n    // create selector for plugin\n    $.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n        return !!$.data( elem, fullName );\n    };\n\n    $[ namespace ] = $[ namespace ] || {};\n    existingConstructor = $[ namespace ][ name ];\n    constructor = $[ namespace ][ name ] = function( options, element ) {\n        // allow instantiation without \"new\" keyword\n        if ( !this._createWidget ) {\n            return new constructor( options, element );\n        }\n\n        // allow instantiation without initializing for simple inheritance\n        // must use \"new\" keyword (the code above always passes args)\n        if ( arguments.length ) {\n            this._createWidget( options, element );\n        }\n    };\n    // extend with the existing constructor to carry over any static properties\n    $.extend( constructor, existingConstructor, {\n        version: prototype.version,\n        // copy the object used to create the prototype in case we need to\n        // redefine the widget later\n        _proto: $.extend( {}, prototype ),\n        // track widgets that inherit from this widget in case this widget is\n        // redefined after a widget inherits from it\n        _childConstructors: []\n    });\n\n    basePrototype = new base();\n    // we need to make the options hash a property directly on the new instance\n    // otherwise we'll modify the options hash on the prototype that we're\n    // inheriting from\n    basePrototype.options = $.widget.extend( {}, basePrototype.options );\n    $.each( prototype, function( prop, value ) {\n        if ( !$.isFunction( value ) ) {\n            proxiedPrototype[ prop ] = value;\n            return;\n        }\n        proxiedPrototype[ prop ] = (function() {\n            var _super = function() {\n                    return base.prototype[ prop ].apply( this, arguments );\n                },\n                _superApply = function( args ) {\n                    return base.prototype[ prop ].apply( this, args );\n                };\n            return function() {\n                var __super = this._super,\n                    __superApply = this._superApply,\n                    returnValue;\n\n                this._super = _super;\n                this._superApply = _superApply;\n\n                returnValue = value.apply( this, arguments );\n\n                this._super = __super;\n                this._superApply = __superApply;\n\n                return returnValue;\n            };\n        })();\n    });\n    constructor.prototype = $.widget.extend( basePrototype, {\n        // TODO: remove support for widgetEventPrefix\n        // always use the name + a colon as the prefix, e.g., draggable:start\n        // don't prefix for widgets that aren't DOM-based\n        widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\n    }, proxiedPrototype, {\n        constructor: constructor,\n        namespace: namespace,\n        widgetName: name,\n        widgetFullName: fullName\n    });\n\n    // If this widget is being redefined then we need to find all widgets that\n    // are inheriting from it and redefine all of them so that they inherit from\n    // the new version of this widget. We're essentially trying to replace one\n    // level in the prototype chain.\n    if ( existingConstructor ) {\n        $.each( existingConstructor._childConstructors, function( i, child ) {\n            var childPrototype = child.prototype;\n\n            // redefine the child widget using the same prototype that was\n            // originally used, but inherit from the new version of the base\n            $.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\n        });\n        // remove the list of existing child constructors from the old constructor\n        // so the old child constructors can be garbage collected\n        delete existingConstructor._childConstructors;\n    } else {\n        base._childConstructors.push( constructor );\n    }\n\n    $.widget.bridge( name, constructor );\n\n    return constructor;\n};\n\n$.widget.extend = function( target ) {\n    var input = slice.call( arguments, 1 ),\n        inputIndex = 0,\n        inputLength = input.length,\n        key,\n        value;\n    for ( ; inputIndex < inputLength; inputIndex++ ) {\n        for ( key in input[ inputIndex ] ) {\n            value = input[ inputIndex ][ key ];\n            if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n                // Clone objects\n                if ( $.isPlainObject( value ) ) {\n                    target[ key ] = $.isPlainObject( target[ key ] ) ?\n                        $.widget.extend( {}, target[ key ], value ) :\n                        // Don't extend strings, arrays, etc. with objects\n                        $.widget.extend( {}, value );\n                // Copy everything else by reference\n                } else {\n                    target[ key ] = value;\n                }\n            }\n        }\n    }\n    return target;\n};\n\n$.widget.bridge = function( name, object ) {\n    var fullName = object.prototype.widgetFullName || name;\n    $.fn[ name ] = function( options ) {\n        var isMethodCall = typeof options === \"string\",\n            args = slice.call( arguments, 1 ),\n            returnValue = this;\n\n        // allow multiple hashes to be passed on init\n        options = !isMethodCall && args.length ?\n            $.widget.extend.apply( null, [ options ].concat(args) ) :\n            options;\n\n        if ( isMethodCall ) {\n            this.each(function() {\n                var methodValue,\n                    instance = $.data( this, fullName );\n                if ( options === \"instance\" ) {\n                    returnValue = instance;\n                    return false;\n                }\n                if ( !instance ) {\n                    return $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\n                        \"attempted to call method '\" + options + \"'\" );\n                }\n                if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\n                    return $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\n                }\n                methodValue = instance[ options ].apply( instance, args );\n                if ( methodValue !== instance && methodValue !== undefined ) {\n                    returnValue = methodValue && methodValue.jquery ?\n                        returnValue.pushStack( methodValue.get() ) :\n                        methodValue;\n                    return false;\n                }\n            });\n        } else {\n            this.each(function() {\n                var instance = $.data( this, fullName );\n                if ( instance ) {\n                    instance.option( options || {} )._init();\n                } else {\n                    $.data( this, fullName, new object( options, this ) );\n                }\n            });\n        }\n\n        return returnValue;\n    };\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n    widgetName: \"widget\",\n    widgetEventPrefix: \"\",\n    defaultElement: \"<div>\",\n    options: {\n        disabled: false,\n\n        // callbacks\n        create: null\n    },\n    _createWidget: function( options, element ) {\n        element = $( element || this.defaultElement || this )[ 0 ];\n        this.element = $( element );\n        this.uuid = uuid++;\n        this.eventNamespace = \".\" + this.widgetName + this.uuid;\n        this.options = $.widget.extend( {},\n            this.options,\n            this._getCreateOptions(),\n            options );\n\n        this.bindings = $();\n        this.hoverable = $();\n        this.focusable = $();\n\n        if ( element !== this ) {\n            $.data( element, this.widgetFullName, this );\n            this._on( true, this.element, {\n                remove: function( event ) {\n                    if ( event.target === element ) {\n                        this.destroy();\n                    }\n                }\n            });\n            this.document = $( element.style ?\n                // element within the document\n                element.ownerDocument :\n                // element is window or document\n                element.document || element );\n            this.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n        }\n\n        this._create();\n        this._trigger( \"create\", null, this._getCreateEventData() );\n        this._init();\n    },\n    _getCreateOptions: $.noop,\n    _getCreateEventData: $.noop,\n    _create: $.noop,\n    _init: $.noop,\n\n    destroy: function() {\n        this._destroy();\n        // we can probably remove the unbind calls in 2.0\n        // all event bindings should go through this._on()\n        this.element\n            .unbind( this.eventNamespace )\n            .removeData( this.widgetFullName )\n            // support: jquery <1.6.3\n            // http://bugs.jquery.com/ticket/9413\n            .removeData( $.camelCase( this.widgetFullName ) );\n        this.widget()\n            .unbind( this.eventNamespace )\n            .removeAttr( \"aria-disabled\" )\n            .removeClass(\n                this.widgetFullName + \"-disabled \" +\n                \"ui-state-disabled\" );\n\n        // clean up events and states\n        this.bindings.unbind( this.eventNamespace );\n        this.hoverable.removeClass( \"ui-state-hover\" );\n        this.focusable.removeClass( \"ui-state-focus\" );\n    },\n    _destroy: $.noop,\n\n    widget: function() {\n        return this.element;\n    },\n\n    option: function( key, value ) {\n        var options = key,\n            parts,\n            curOption,\n            i;\n\n        if ( arguments.length === 0 ) {\n            // don't return a reference to the internal hash\n            return $.widget.extend( {}, this.options );\n        }\n\n        if ( typeof key === \"string\" ) {\n            // handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n            options = {};\n            parts = key.split( \".\" );\n            key = parts.shift();\n            if ( parts.length ) {\n                curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n                for ( i = 0; i < parts.length - 1; i++ ) {\n                    curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n                    curOption = curOption[ parts[ i ] ];\n                }\n                key = parts.pop();\n                if ( value === undefined ) {\n                    return curOption[ key ] === undefined ? null : curOption[ key ];\n                }\n                curOption[ key ] = value;\n            } else {\n                if ( value === undefined ) {\n                    return this.options[ key ] === undefined ? null : this.options[ key ];\n                }\n                options[ key ] = value;\n            }\n        }\n\n        this._setOptions( options );\n\n        return this;\n    },\n    _setOptions: function( options ) {\n        var key;\n\n        for ( key in options ) {\n            this._setOption( key, options[ key ] );\n        }\n\n        return this;\n    },\n    _setOption: function( key, value ) {\n        this.options[ key ] = value;\n\n        if ( key === \"disabled\" ) {\n            this.widget()\n                .toggleClass( this.widgetFullName + \"-disabled\", !!value );\n            this.hoverable.removeClass( \"ui-state-hover\" );\n            this.focusable.removeClass( \"ui-state-focus\" );\n        }\n\n        return this;\n    },\n\n    enable: function() {\n        return this._setOptions({ disabled: false });\n    },\n    disable: function() {\n        return this._setOptions({ disabled: true });\n    },\n\n    _on: function( suppressDisabledCheck, element, handlers ) {\n        var delegateElement,\n            instance = this;\n\n        // no suppressDisabledCheck flag, shuffle arguments\n        if ( typeof suppressDisabledCheck !== \"boolean\" ) {\n            handlers = element;\n            element = suppressDisabledCheck;\n            suppressDisabledCheck = false;\n        }\n\n        // no element argument, shuffle and use this.element\n        if ( !handlers ) {\n            handlers = element;\n            element = this.element;\n            delegateElement = this.widget();\n        } else {\n            // accept selectors, DOM elements\n            element = delegateElement = $( element );\n            this.bindings = this.bindings.add( element );\n        }\n\n        $.each( handlers, function( event, handler ) {\n            function handlerProxy() {\n                // allow widgets to customize the disabled handling\n                // - disabled as an array instead of boolean\n                // - disabled class as method for disabling individual parts\n                if ( !suppressDisabledCheck &&\n                        ( instance.options.disabled === true ||\n                            $( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n                    return;\n                }\n                return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                    .apply( instance, arguments );\n            }\n\n            // copy the guid so direct unbinding works\n            if ( typeof handler !== \"string\" ) {\n                handlerProxy.guid = handler.guid =\n                    handler.guid || handlerProxy.guid || $.guid++;\n            }\n\n            var match = event.match( /^(\\w+)\\s*(.*)$/ ),\n                eventName = match[1] + instance.eventNamespace,\n                selector = match[2];\n            if ( selector ) {\n                delegateElement.delegate( selector, eventName, handlerProxy );\n            } else {\n                element.bind( eventName, handlerProxy );\n            }\n        });\n    },\n\n    _off: function( element, eventName ) {\n        eventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) + this.eventNamespace;\n        element.unbind( eventName ).undelegate( eventName );\n    },\n\n    _delay: function( handler, delay ) {\n        function handlerProxy() {\n            return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                .apply( instance, arguments );\n        }\n        var instance = this;\n        return setTimeout( handlerProxy, delay || 0 );\n    },\n\n    _hoverable: function( element ) {\n        this.hoverable = this.hoverable.add( element );\n        this._on( element, {\n            mouseenter: function( event ) {\n                $( event.currentTarget ).addClass( \"ui-state-hover\" );\n            },\n            mouseleave: function( event ) {\n                $( event.currentTarget ).removeClass( \"ui-state-hover\" );\n            }\n        });\n    },\n\n    _focusable: function( element ) {\n        this.focusable = this.focusable.add( element );\n        this._on( element, {\n            focusin: function( event ) {\n                $( event.currentTarget ).addClass( \"ui-state-focus\" );\n            },\n            focusout: function( event ) {\n                $( event.currentTarget ).removeClass( \"ui-state-focus\" );\n            }\n        });\n    },\n\n    _trigger: function( type, event, data ) {\n        var prop, orig,\n            callback = this.options[ type ];\n\n        data = data || {};\n        event = $.Event( event );\n        event.type = ( type === this.widgetEventPrefix ?\n            type :\n            this.widgetEventPrefix + type ).toLowerCase();\n        // the original event may come from any element\n        // so we need to reset the target on the new event\n        event.target = this.element[ 0 ];\n\n        // copy original event properties over to the new event\n        orig = event.originalEvent;\n        if ( orig ) {\n            for ( prop in orig ) {\n                if ( !( prop in event ) ) {\n                    event[ prop ] = orig[ prop ];\n                }\n            }\n        }\n\n        this.element.trigger( event, data );\n        return !( $.isFunction( callback ) &&\n            callback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n            event.isDefaultPrevented() );\n    }\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n    $.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n        if ( typeof options === \"string\" ) {\n            options = { effect: options };\n        }\n        var hasOptions,\n            effectName = !options ?\n                method :\n                options === true || typeof options === \"number\" ?\n                    defaultEffect :\n                    options.effect || defaultEffect;\n        options = options || {};\n        if ( typeof options === \"number\" ) {\n            options = { duration: options };\n        }\n        hasOptions = !$.isEmptyObject( options );\n        options.complete = callback;\n        if ( options.delay ) {\n            element.delay( options.delay );\n        }\n        if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n            element[ method ]( options );\n        } else if ( effectName !== method && element[ effectName ] ) {\n            element[ effectName ]( options.duration, options.easing, callback );\n        } else {\n            element.queue(function( next ) {\n                $( this )[ method ]();\n                if ( callback ) {\n                    callback.call( element[ 0 ] );\n                }\n                next();\n            });\n        }\n    };\n});\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n    var nsNormalizeDict = {},\n        oldFind = $.find,\n        rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\n        jqmDataRE = /:jqmData\\(([^)]*)\\)/g;\n\n    $.extend( $.mobile, {\n\n        // Namespace used framework-wide for data-attrs. Default is no namespace\n\n        ns: \"\",\n\n        // Retrieve an attribute from an element and perform some massaging of the value\n\n        getAttribute: function( element, key ) {\n            var data;\n\n            element = element.jquery ? element[0] : element;\n\n            if ( element && element.getAttribute ) {\n                data = element.getAttribute( \"data-\" + $.mobile.ns + key );\n            }\n\n            // Copied from core's src/data.js:dataAttr()\n            // Convert from a string to a proper data type\n            try {\n                data = data === \"true\" ? true :\n                    data === \"false\" ? false :\n                    data === \"null\" ? null :\n                    // Only convert to a number if it doesn't change the string\n                    +data + \"\" === data ? +data :\n                    rbrace.test( data ) ? JSON.parse( data ) :\n                    data;\n            } catch( err ) {}\n\n            return data;\n        },\n\n        // Expose our cache for testing purposes.\n        nsNormalizeDict: nsNormalizeDict,\n\n        // Take a data attribute property, prepend the namespace\n        // and then camel case the attribute string. Add the result\n        // to our nsNormalizeDict so we don't have to do this again.\n        nsNormalize: function( prop ) {\n            return nsNormalizeDict[ prop ] ||\n                ( nsNormalizeDict[ prop ] = $.camelCase( $.mobile.ns + prop ) );\n        },\n\n        // Find the closest javascript page element to gather settings data jsperf test\n        // http://jsperf.com/single-complex-selector-vs-many-complex-selectors/edit\n        // possibly naive, but it shows that the parsing overhead for *just* the page selector vs\n        // the page and dialog selector is negligable. This could probably be speed up by\n        // doing a similar parent node traversal to the one found in the inherited theme code above\n        closestPageData: function( $target ) {\n            return $target\n                .closest( \":jqmData(role='page'), :jqmData(role='dialog')\" )\n                .data( \"mobile-page\" );\n        }\n\n    });\n\n    // Mobile version of data and removeData and hasData methods\n    // ensures all data is set and retrieved using jQuery Mobile's data namespace\n    $.fn.jqmData = function( prop, value ) {\n        var result;\n        if ( typeof prop !== \"undefined\" ) {\n            if ( prop ) {\n                prop = $.mobile.nsNormalize( prop );\n            }\n\n            // undefined is permitted as an explicit input for the second param\n            // in this case it returns the value and does not set it to undefined\n            if ( arguments.length < 2 || value === undefined ) {\n                result = this.data( prop );\n            } else {\n                result = this.data( prop, value );\n            }\n        }\n        return result;\n    };\n\n    $.jqmData = function( elem, prop, value ) {\n        var result;\n        if ( typeof prop !== \"undefined\" ) {\n            result = $.data( elem, prop ? $.mobile.nsNormalize( prop ) : prop, value );\n        }\n        return result;\n    };\n\n    $.fn.jqmRemoveData = function( prop ) {\n        return this.removeData( $.mobile.nsNormalize( prop ) );\n    };\n\n    $.jqmRemoveData = function( elem, prop ) {\n        return $.removeData( elem, $.mobile.nsNormalize( prop ) );\n    };\n\n    $.find = function( selector, context, ret, extra ) {\n        if ( selector.indexOf( \":jqmData\" ) > -1 ) {\n            selector = selector.replace( jqmDataRE, \"[data-\" + ( $.mobile.ns || \"\" ) + \"$1]\" );\n        }\n\n        return oldFind.call( this, selector, context, ret, extra );\n    };\n\n    $.extend( $.find, oldFind );\n\n})( jQuery, this );\n\n(function( $, undefined ) {\n\nvar rcapitals = /[A-Z]/g,\n    replaceFunction = function( c ) {\n        return \"-\" + c.toLowerCase();\n    };\n\n$.extend( $.Widget.prototype, {\n    _getCreateOptions: function() {\n        var option, value,\n            elem = this.element[ 0 ],\n            options = {};\n\n        //\n        if ( !$.mobile.getAttribute( elem, \"defaults\" ) ) {\n            for ( option in this.options ) {\n                value = $.mobile.getAttribute( elem, option.replace( rcapitals, replaceFunction ) );\n\n                if ( value != null ) {\n                    options[ option ] = value;\n                }\n            }\n        }\n\n        return options;\n    }\n});\n\n//TODO: Remove in 1.5 for backcompat only\n$.mobile.widget = $.Widget;\n\n})( jQuery );\n\n\n(function( $ ) {\n    // TODO move loader class down into the widget settings\n    var loaderClass = \"ui-loader\", $html = $( \"html\" );\n\n    $.widget( \"mobile.loader\", {\n        // NOTE if the global config settings are defined they will override these\n        //      options\n        options: {\n            // the theme for the loading message\n            theme: \"a\",\n\n            // whether the text in the loading message is shown\n            textVisible: false,\n\n            // custom html for the inner content of the loading message\n            html: \"\",\n\n            // the text to be displayed when the popup is shown\n            text: \"loading\"\n        },\n\n        defaultHtml: \"<div class='\" + loaderClass + \"'>\" +\n            \"<span class='ui-icon-loading'></span>\" +\n            \"<h1></h1>\" +\n            \"</div>\",\n\n        // For non-fixed supportin browsers. Position at y center (if scrollTop supported), above the activeBtn (if defined), or just 100px from top\n        fakeFixLoader: function() {\n            var activeBtn = $( \".\" + $.mobile.activeBtnClass ).first();\n\n            this.element\n                .css({\n                    top: $.support.scrollTop && this.window.scrollTop() + this.window.height() / 2 ||\n                        activeBtn.length && activeBtn.offset().top || 100\n                });\n        },\n\n        // check position of loader to see if it appears to be \"fixed\" to center\n        // if not, use abs positioning\n        checkLoaderPosition: function() {\n            var offset = this.element.offset(),\n                scrollTop = this.window.scrollTop(),\n                screenHeight = $.mobile.getScreenHeight();\n\n            if ( offset.top < scrollTop || ( offset.top - scrollTop ) > screenHeight ) {\n                this.element.addClass( \"ui-loader-fakefix\" );\n                this.fakeFixLoader();\n                this.window\n                    .unbind( \"scroll\", this.checkLoaderPosition )\n                    .bind( \"scroll\", $.proxy( this.fakeFixLoader, this ) );\n            }\n        },\n\n        resetHtml: function() {\n            this.element.html( $( this.defaultHtml ).html() );\n        },\n\n        // Turn on/off page loading message. Theme doubles as an object argument\n        // with the following shape: { theme: '', text: '', html: '', textVisible: '' }\n        // NOTE that the $.mobile.loading* settings and params past the first are deprecated\n        // TODO sweet jesus we need to break some of this out\n        show: function( theme, msgText, textonly ) {\n            var textVisible, message, loadSettings;\n\n            this.resetHtml();\n\n            // use the prototype options so that people can set them globally at\n            // mobile init. Consistency, it's what's for dinner\n            if ( $.type( theme ) === \"object\" ) {\n                loadSettings = $.extend( {}, this.options, theme );\n\n                theme = loadSettings.theme;\n            } else {\n                loadSettings = this.options;\n\n                // here we prefer the theme value passed as a string argument, then\n                // we prefer the global option because we can't use undefined default\n                // prototype options, then the prototype option\n                theme = theme || loadSettings.theme;\n            }\n\n            // set the message text, prefer the param, then the settings object\n            // then loading message\n            message = msgText || ( loadSettings.text === false ? \"\" : loadSettings.text );\n\n            // prepare the dom\n            $html.addClass( \"ui-loading\" );\n\n            textVisible = loadSettings.textVisible;\n\n            // add the proper css given the options (theme, text, etc)\n            // Force text visibility if the second argument was supplied, or\n            // if the text was explicitly set in the object args\n            this.element.attr(\"class\", loaderClass +\n                \" ui-corner-all ui-body-\" + theme +\n                \" ui-loader-\" + ( textVisible || msgText || theme.text ? \"verbose\" : \"default\" ) +\n                ( loadSettings.textonly || textonly ? \" ui-loader-textonly\" : \"\" ) );\n\n            // TODO verify that jquery.fn.html is ok to use in both cases here\n            //      this might be overly defensive in preventing unknowing xss\n            // if the html attribute is defined on the loading settings, use that\n            // otherwise use the fallbacks from above\n            if ( loadSettings.html ) {\n                this.element.html( loadSettings.html );\n            } else {\n                this.element.find( \"h1\" ).text( message );\n            }\n\n            // If the pagecontainer widget has been defined we may use the :mobile-pagecontainer\n            // and attach to the element on which the pagecontainer widget has been defined. If not,\n            // we attach to the body.\n            this.element.appendTo( $.mobile.pagecontainer ?\n                $( \":mobile-pagecontainer\" ) : $( \"body\" ) );\n\n            // check that the loader is visible\n            this.checkLoaderPosition();\n\n            // on scroll check the loader position\n            this.window.bind( \"scroll\", $.proxy( this.checkLoaderPosition, this ) );\n        },\n\n        hide: function() {\n            $html.removeClass( \"ui-loading\" );\n\n            if ( this.options.text ) {\n                this.element.removeClass( \"ui-loader-fakefix\" );\n            }\n\n            this.window.unbind( \"scroll\", this.fakeFixLoader );\n            this.window.unbind( \"scroll\", this.checkLoaderPosition );\n        }\n    });\n\n})(jQuery, this);\n\n\n/*!\n * jQuery hashchange event - v1.3 - 7/21/2010\n * http://benalman.com/projects/jquery-hashchange-plugin/\n * \n * Copyright (c) 2010 \"Cowboy\" Ben Alman\n * Dual licensed under the MIT and GPL licenses.\n * http://benalman.com/about/license/\n */\n\n// Script: jQuery hashchange event\n//\n// *Version: 1.3, Last updated: 7/21/2010*\n// \n// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/\n// GitHub       - http://github.com/cowboy/jquery-hashchange/\n// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js\n// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (0.8kb gzipped)\n// \n// About: License\n// \n// Copyright (c) 2010 \"Cowboy\" Ben Alman,\n// Dual licensed under the MIT and GPL licenses.\n// http://benalman.com/about/license/\n// \n// About: Examples\n// \n// These working examples, complete with fully commented code, illustrate a few\n// ways in which this plugin can be used.\n// \n// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/\n// document.domain - http://benalman.com/code/projects/jquery-hashchange/examples/document_domain/\n// \n// About: Support and Testing\n// \n// Information about what version or versions of jQuery this plugin has been\n// tested with, what browsers it has been tested in, and where the unit tests\n// reside (so you can test it yourself).\n// \n// jQuery Versions - 1.2.6, 1.3.2, 1.4.1, 1.4.2\n// Browsers Tested - Internet Explorer 6-8, Firefox 2-4, Chrome 5-6, Safari 3.2-5,\n//                   Opera 9.6-10.60, iPhone 3.1, Android 1.6-2.2, BlackBerry 4.6-5.\n// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/\n// \n// About: Known issues\n// \n// While this jQuery hashchange event implementation is quite stable and\n// robust, there are a few unfortunate browser bugs surrounding expected\n// hashchange event-based behaviors, independent of any JavaScript\n// window.onhashchange abstraction. See the following examples for more\n// information:\n// \n// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/\n// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/\n// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/\n// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/\n// \n// Also note that should a browser natively support the window.onhashchange \n// event, but not report that it does, the fallback polling loop will be used.\n// \n// About: Release History\n// \n// 1.3   - (7/21/2010) Reorganized IE6/7 Iframe code to make it more\n//         \"removable\" for mobile-only development. Added IE6/7 document.title\n//         support. Attempted to make Iframe as hidden as possible by using\n//         techniques from http://www.paciellogroup.com/blog/?p=604. Added \n//         support for the \"shortcut\" format $(window).hashchange( fn ) and\n//         $(window).hashchange() like jQuery provides for built-in events.\n//         Renamed jQuery.hashchangeDelay to <jQuery.fn.hashchange.delay> and\n//         lowered its default value to 50. Added <jQuery.fn.hashchange.domain>\n//         and <jQuery.fn.hashchange.src> properties plus document-domain.html\n//         file to address access denied issues when setting document.domain in\n//         IE6/7.\n// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin\n//         from a page on another domain would cause an error in Safari 4. Also,\n//         IE6/7 Iframe is now inserted after the body (this actually works),\n//         which prevents the page from scrolling when the event is first bound.\n//         Event can also now be bound before DOM ready, but it won't be usable\n//         before then in IE6/7.\n// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug\n//         where browser version is incorrectly reported as 8.0, despite\n//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.\n// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special\n//         window.onhashchange functionality into a separate plugin for users\n//         who want just the basic event & back button support, without all the\n//         extra awesomeness that BBQ provides. This plugin will be included as\n//         part of jQuery BBQ, but also be available separately.\n\n(function($,window,undefined){\n  '$:nomunge'; // Used by YUI compressor.\n  \n  // Reused string.\n  var str_hashchange = 'hashchange',\n    \n    // Method / object references.\n    doc = document,\n    fake_onhashchange,\n    special = $.event.special,\n    \n    // Does the browser support window.onhashchange? Note that IE8 running in\n    // IE7 compatibility mode reports true for 'onhashchange' in window, even\n    // though the event isn't supported, so also test document.documentMode.\n    doc_mode = doc.documentMode,\n    supports_onhashchange = 'on' + str_hashchange in window && ( doc_mode === undefined || doc_mode > 7 );\n  \n  // Get location.hash (or what you'd expect location.hash to be) sans any\n  // leading #. Thanks for making this necessary, Firefox!\n  function get_fragment( url ) {\n    url = url || location.href;\n    return '#' + url.replace( /^[^#]*#?(.*)$/, '$1' );\n  };\n  \n  // Method: jQuery.fn.hashchange\n  // \n  // Bind a handler to the window.onhashchange event or trigger all bound\n  // window.onhashchange event handlers. This behavior is consistent with\n  // jQuery's built-in event handlers.\n  // \n  // Usage:\n  // \n  // > jQuery(window).hashchange( [ handler ] );\n  // \n  // Arguments:\n  // \n  //  handler - (Function) Optional handler to be bound to the hashchange\n  //    event. This is a \"shortcut\" for the more verbose form:\n  //    jQuery(window).bind( 'hashchange', handler ). If handler is omitted,\n  //    all bound window.onhashchange event handlers will be triggered. This\n  //    is a shortcut for the more verbose\n  //    jQuery(window).trigger( 'hashchange' ). These forms are described in\n  //    the <hashchange event> section.\n  // \n  // Returns:\n  // \n  //  (jQuery) The initial jQuery collection of elements.\n  \n  // Allow the \"shortcut\" format $(elem).hashchange( fn ) for binding and\n  // $(elem).hashchange() for triggering, like jQuery does for built-in events.\n  $.fn[ str_hashchange ] = function( fn ) {\n    return fn ? this.bind( str_hashchange, fn ) : this.trigger( str_hashchange );\n  };\n  \n  // Property: jQuery.fn.hashchange.delay\n  // \n  // The numeric interval (in milliseconds) at which the <hashchange event>\n  // polling loop executes. Defaults to 50.\n  \n  // Property: jQuery.fn.hashchange.domain\n  // \n  // If you're setting document.domain in your JavaScript, and you want hash\n  // history to work in IE6/7, not only must this property be set, but you must\n  // also set document.domain BEFORE jQuery is loaded into the page. This\n  // property is only applicable if you are supporting IE6/7 (or IE8 operating\n  // in \"IE7 compatibility\" mode).\n  // \n  // In addition, the <jQuery.fn.hashchange.src> property must be set to the\n  // path of the included \"document-domain.html\" file, which can be renamed or\n  // modified if necessary (note that the document.domain specified must be the\n  // same in both your main JavaScript as well as in this file).\n  // \n  // Usage:\n  // \n  // jQuery.fn.hashchange.domain = document.domain;\n  \n  // Property: jQuery.fn.hashchange.src\n  // \n  // If, for some reason, you need to specify an Iframe src file (for example,\n  // when setting document.domain as in <jQuery.fn.hashchange.domain>), you can\n  // do so using this property. Note that when using this property, history\n  // won't be recorded in IE6/7 until the Iframe src file loads. This property\n  // is only applicable if you are supporting IE6/7 (or IE8 operating in \"IE7\n  // compatibility\" mode).\n  // \n  // Usage:\n  // \n  // jQuery.fn.hashchange.src = 'path/to/file.html';\n  \n  $.fn[ str_hashchange ].delay = 50;\n  /*\n  $.fn[ str_hashchange ].domain = null;\n  $.fn[ str_hashchange ].src = null;\n  */\n  \n  // Event: hashchange event\n  // \n  // Fired when location.hash changes. In browsers that support it, the native\n  // HTML5 window.onhashchange event is used, otherwise a polling loop is\n  // initialized, running every <jQuery.fn.hashchange.delay> milliseconds to\n  // see if the hash has changed. In IE6/7 (and IE8 operating in \"IE7\n  // compatibility\" mode), a hidden Iframe is created to allow the back button\n  // and hash-based history to work.\n  // \n  // Usage as described in <jQuery.fn.hashchange>:\n  // \n  // > // Bind an event handler.\n  // > jQuery(window).hashchange( function(e) {\n  // >   var hash = location.hash;\n  // >   ...\n  // > });\n  // > \n  // > // Manually trigger the event handler.\n  // > jQuery(window).hashchange();\n  // \n  // A more verbose usage that allows for event namespacing:\n  // \n  // > // Bind an event handler.\n  // > jQuery(window).bind( 'hashchange', function(e) {\n  // >   var hash = location.hash;\n  // >   ...\n  // > });\n  // > \n  // > // Manually trigger the event handler.\n  // > jQuery(window).trigger( 'hashchange' );\n  // \n  // Additional Notes:\n  // \n  // * The polling loop and Iframe are not created until at least one handler\n  //   is actually bound to the 'hashchange' event.\n  // * If you need the bound handler(s) to execute immediately, in cases where\n  //   a location.hash exists on page load, via bookmark or page refresh for\n  //   example, use jQuery(window).hashchange() or the more verbose \n  //   jQuery(window).trigger( 'hashchange' ).\n  // * The event can be bound before DOM ready, but since it won't be usable\n  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is\n  //   to bind it inside a DOM ready handler.\n  \n  // Override existing $.event.special.hashchange methods (allowing this plugin\n  // to be defined after jQuery BBQ in BBQ's source code).\n  special[ str_hashchange ] = $.extend( special[ str_hashchange ], {\n    \n    // Called only when the first 'hashchange' event is bound to window.\n    setup: function() {\n      // If window.onhashchange is supported natively, there's nothing to do..\n      if ( supports_onhashchange ) { return false; }\n      \n      // Otherwise, we need to create our own. And we don't want to call this\n      // until the user binds to the event, just in case they never do, since it\n      // will create a polling loop and possibly even a hidden Iframe.\n      $( fake_onhashchange.start );\n    },\n    \n    // Called only when the last 'hashchange' event is unbound from window.\n    teardown: function() {\n      // If window.onhashchange is supported natively, there's nothing to do..\n      if ( supports_onhashchange ) { return false; }\n      \n      // Otherwise, we need to stop ours (if possible).\n      $( fake_onhashchange.stop );\n    }\n    \n  });\n  \n  // fake_onhashchange does all the work of triggering the window.onhashchange\n  // event for browsers that don't natively support it, including creating a\n  // polling loop to watch for hash changes and in IE 6/7 creating a hidden\n  // Iframe to enable back and forward.\n  fake_onhashchange = (function(){\n    var self = {},\n      timeout_id,\n      \n      // Remember the initial hash so it doesn't get triggered immediately.\n      last_hash = get_fragment(),\n      \n      fn_retval = function(val){ return val; },\n      history_set = fn_retval,\n      history_get = fn_retval;\n    \n    // Start the polling loop.\n    self.start = function() {\n      timeout_id || poll();\n    };\n    \n    // Stop the polling loop.\n    self.stop = function() {\n      timeout_id && clearTimeout( timeout_id );\n      timeout_id = undefined;\n    };\n    \n    // This polling loop checks every $.fn.hashchange.delay milliseconds to see\n    // if location.hash has changed, and triggers the 'hashchange' event on\n    // window when necessary.\n    function poll() {\n      var hash = get_fragment(),\n        history_hash = history_get( last_hash );\n      \n      if ( hash !== last_hash ) {\n        history_set( last_hash = hash, history_hash );\n        \n        $(window).trigger( str_hashchange );\n        \n      } else if ( history_hash !== last_hash ) {\n        location.href = location.href.replace( /#.*/, '' ) + history_hash;\n      }\n      \n      timeout_id = setTimeout( poll, $.fn[ str_hashchange ].delay );\n    };\n    \n    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    // vvvvvvvvvvvvvvvvvvv REMOVE IF NOT SUPPORTING IE6/7/8 vvvvvvvvvvvvvvvvvvv\n    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    window.attachEvent && !window.addEventListener && !supports_onhashchange && (function(){\n      // Not only do IE6/7 need the \"magical\" Iframe treatment, but so does IE8\n      // when running in \"IE7 compatibility\" mode.\n      \n      var iframe,\n        iframe_src;\n      \n      // When the event is bound and polling starts in IE 6/7, create a hidden\n      // Iframe for history handling.\n      self.start = function(){\n        if ( !iframe ) {\n          iframe_src = $.fn[ str_hashchange ].src;\n          iframe_src = iframe_src && iframe_src + get_fragment();\n          \n          // Create hidden Iframe. Attempt to make Iframe as hidden as possible\n          // by using techniques from http://www.paciellogroup.com/blog/?p=604.\n          iframe = $('<iframe tabindex=\"-1\" title=\"empty\"/>').hide()\n            \n            // When Iframe has completely loaded, initialize the history and\n            // start polling.\n            .one( 'load', function(){\n              iframe_src || history_set( get_fragment() );\n              poll();\n            })\n            \n            // Load Iframe src if specified, otherwise nothing.\n            .attr( 'src', iframe_src || 'javascript:0' )\n            \n            // Append Iframe after the end of the body to prevent unnecessary\n            // initial page scrolling (yes, this works).\n            .insertAfter( 'body' )[0].contentWindow;\n          \n          // Whenever `document.title` changes, update the Iframe's title to\n          // prettify the back/next history menu entries. Since IE sometimes\n          // errors with \"Unspecified error\" the very first time this is set\n          // (yes, very useful) wrap this with a try/catch block.\n          doc.onpropertychange = function(){\n            try {\n              if ( event.propertyName === 'title' ) {\n                iframe.document.title = doc.title;\n              }\n            } catch(e) {}\n          };\n          \n        }\n      };\n      \n      // Override the \"stop\" method since an IE6/7 Iframe was created. Even\n      // if there are no longer any bound event handlers, the polling loop\n      // is still necessary for back/next to work at all!\n      self.stop = fn_retval;\n      \n      // Get history by looking at the hidden Iframe's location.hash.\n      history_get = function() {\n        return get_fragment( iframe.location.href );\n      };\n      \n      // Set a new history item by opening and then closing the Iframe\n      // document, *then* setting its location.hash. If document.domain has\n      // been set, update that as well.\n      history_set = function( hash, history_hash ) {\n        var iframe_doc = iframe.document,\n          domain = $.fn[ str_hashchange ].domain;\n        \n        if ( hash !== history_hash ) {\n          // Update Iframe with any initial `document.title` that might be set.\n          iframe_doc.title = doc.title;\n          \n          // Opening the Iframe's document after it has been closed is what\n          // actually adds a history entry.\n          iframe_doc.open();\n          \n          // Set document.domain for the Iframe document as well, if necessary.\n          domain && iframe_doc.write( '\\x3cscript>document.domain=\"' + domain + '\"\\x3c/script>' );\n          \n          iframe_doc.close();\n          \n          // Update the Iframe's hash, for great justice.\n          iframe.location.hash = hash;\n        }\n      };\n      \n    })();\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    // ^^^^^^^^^^^^^^^^^^^ REMOVE IF NOT SUPPORTING IE6/7/8 ^^^^^^^^^^^^^^^^^^^\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    \n    return self;\n  })();\n  \n})(jQuery,this);\n\n\n(function( $, undefined ) {\n\n    /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */\n    window.matchMedia = window.matchMedia || (function( doc, undefined ) {\n\n        var bool,\n            docElem = doc.documentElement,\n            refNode = docElem.firstElementChild || docElem.firstChild,\n            // fakeBody required for <FF4 when executed in <head>\n            fakeBody = doc.createElement( \"body\" ),\n            div = doc.createElement( \"div\" );\n\n        div.id = \"mq-test-1\";\n        div.style.cssText = \"position:absolute;top:-100em\";\n        fakeBody.style.background = \"none\";\n        fakeBody.appendChild(div);\n\n        return function(q){\n\n            div.innerHTML = \"&shy;<style media=\\\"\" + q + \"\\\"> #mq-test-1 { width: 42px; }</style>\";\n\n            docElem.insertBefore( fakeBody, refNode );\n            bool = div.offsetWidth === 42;\n            docElem.removeChild( fakeBody );\n\n            return {\n                matches: bool,\n                media: q\n            };\n\n        };\n\n    }( document ));\n\n    // $.mobile.media uses matchMedia to return a boolean.\n    $.mobile.media = function( q ) {\n        return window.matchMedia( q ).matches;\n    };\n\n})(jQuery);\n\n    (function( $, undefined ) {\n        var support = {\n            touch: \"ontouchend\" in document\n        };\n\n        $.mobile.support = $.mobile.support || {};\n        $.extend( $.support, support );\n        $.extend( $.mobile.support, support );\n    }( jQuery ));\n\n    (function( $, undefined ) {\n        $.extend( $.support, {\n            orientation: \"orientation\" in window && \"onorientationchange\" in window\n        });\n    }( jQuery ));\n\n(function( $, undefined ) {\n\n// thx Modernizr\nfunction propExists( prop ) {\n    var uc_prop = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),\n        props = ( prop + \" \" + vendors.join( uc_prop + \" \" ) + uc_prop ).split( \" \" ),\n        v;\n\n    for ( v in props ) {\n        if ( fbCSS[ props[ v ] ] !== undefined ) {\n            return true;\n        }\n    }\n}\n\nvar fakeBody = $( \"<body>\" ).prependTo( \"html\" ),\n    fbCSS = fakeBody[ 0 ].style,\n    vendors = [ \"Webkit\", \"Moz\", \"O\" ],\n    webos = \"palmGetResource\" in window, //only used to rule out scrollTop\n    operamini = window.operamini && ({}).toString.call( window.operamini ) === \"[object OperaMini]\",\n    bb = window.blackberry && !propExists( \"-webkit-transform\" ), //only used to rule out box shadow, as it's filled opaque on BB 5 and lower\n    nokiaLTE7_3;\n\n// inline SVG support test\nfunction inlineSVG() {\n    // Thanks Modernizr & Erik Dahlstrom\n    var w = window,\n        svg = !!w.document.createElementNS && !!w.document.createElementNS( \"http://www.w3.org/2000/svg\", \"svg\" ).createSVGRect && !( w.opera && navigator.userAgent.indexOf( \"Chrome\" ) === -1 ),\n        support = function( data ) {\n            if ( !( data && svg ) ) {\n                $( \"html\" ).addClass( \"ui-nosvg\" );\n            }\n        },\n        img = new w.Image();\n\n    img.onerror = function() {\n        support( false );\n    };\n    img.onload = function() {\n        support( img.width === 1 && img.height === 1 );\n    };\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n}\n\nfunction transform3dTest() {\n    var mqProp = \"transform-3d\",\n        // Because the `translate3d` test below throws false positives in Android:\n        ret = $.mobile.media( \"(-\" + vendors.join( \"-\" + mqProp + \"),(-\" ) + \"-\" + mqProp + \"),(\" + mqProp + \")\" ),\n        el, transforms, t;\n\n    if ( ret ) {\n        return !!ret;\n    }\n\n    el = document.createElement( \"div\" );\n    transforms = {\n        // Were omitting Opera for the time being; MS uses unprefixed.\n        \"MozTransform\": \"-moz-transform\",\n        \"transform\": \"transform\"\n    };\n\n    fakeBody.append( el );\n\n    for ( t in transforms ) {\n        if ( el.style[ t ] !== undefined ) {\n            el.style[ t ] = \"translate3d( 100px, 1px, 1px )\";\n            ret = window.getComputedStyle( el ).getPropertyValue( transforms[ t ] );\n        }\n    }\n    return ( !!ret && ret !== \"none\" );\n}\n\n// Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )\nfunction baseTagTest() {\n    var fauxBase = location.protocol + \"//\" + location.host + location.pathname + \"ui-dir/\",\n        base = $( \"head base\" ),\n        fauxEle = null,\n        href = \"\",\n        link, rebase;\n\n    if ( !base.length ) {\n        base = fauxEle = $( \"<base>\", { \"href\": fauxBase }).appendTo( \"head\" );\n    } else {\n        href = base.attr( \"href\" );\n    }\n\n    link = $( \"<a href='testurl' />\" ).prependTo( fakeBody );\n    rebase = link[ 0 ].href;\n    base[ 0 ].href = href || location.pathname;\n\n    if ( fauxEle ) {\n        fauxEle.remove();\n    }\n    return rebase.indexOf( fauxBase ) === 0;\n}\n\n// Thanks Modernizr\nfunction cssPointerEventsTest() {\n    var element = document.createElement( \"x\" ),\n        documentElement = document.documentElement,\n        getComputedStyle = window.getComputedStyle,\n        supports;\n\n    if ( !( \"pointerEvents\" in element.style ) ) {\n        return false;\n    }\n\n    element.style.pointerEvents = \"auto\";\n    element.style.pointerEvents = \"x\";\n    documentElement.appendChild( element );\n    supports = getComputedStyle &&\n    getComputedStyle( element, \"\" ).pointerEvents === \"auto\";\n    documentElement.removeChild( element );\n    return !!supports;\n}\n\nfunction boundingRect() {\n    var div = document.createElement( \"div\" );\n    return typeof div.getBoundingClientRect !== \"undefined\";\n}\n\n// non-UA-based IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683\n// allows for inclusion of IE 6+, including Windows Mobile 7\n$.extend( $.mobile, { browser: {} } );\n$.mobile.browser.oldIE = (function() {\n    var v = 3,\n        div = document.createElement( \"div\" ),\n        a = div.all || [];\n\n    do {\n        div.innerHTML = \"<!--[if gt IE \" + ( ++v ) + \"]><br><![endif]-->\";\n    } while( a[0] );\n\n    return v > 4 ? v : !v;\n})();\n\nfunction fixedPosition() {\n    var w = window,\n        ua = navigator.userAgent,\n        platform = navigator.platform,\n        // Rendering engine is Webkit, and capture major version\n        wkmatch = ua.match( /AppleWebKit\\/([0-9]+)/ ),\n        wkversion = !!wkmatch && wkmatch[ 1 ],\n        ffmatch = ua.match( /Fennec\\/([0-9]+)/ ),\n        ffversion = !!ffmatch && ffmatch[ 1 ],\n        operammobilematch = ua.match( /Opera Mobi\\/([0-9]+)/ ),\n        omversion = !!operammobilematch && operammobilematch[ 1 ];\n\n    if (\n        // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)\n        ( ( platform.indexOf( \"iPhone\" ) > -1 || platform.indexOf( \"iPad\" ) > -1  || platform.indexOf( \"iPod\" ) > -1 ) && wkversion && wkversion < 534 ) ||\n        // Opera Mini\n        ( w.operamini && ({}).toString.call( w.operamini ) === \"[object OperaMini]\" ) ||\n        ( operammobilematch && omversion < 7458 )    ||\n        //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)\n        ( ua.indexOf( \"Android\" ) > -1 && wkversion && wkversion < 533 ) ||\n        // Firefox Mobile before 6.0 -\n        ( ffversion && ffversion < 6 ) ||\n        // WebOS less than 3\n        ( \"palmGetResource\" in window && wkversion && wkversion < 534 )    ||\n        // MeeGo\n        ( ua.indexOf( \"MeeGo\" ) > -1 && ua.indexOf( \"NokiaBrowser/8.5.0\" ) > -1 ) ) {\n        return false;\n    }\n\n    return true;\n}\n\n$.extend( $.support, {\n    // Note, Chrome for iOS has an extremely quirky implementation of popstate.\n    // We've chosen to take the shortest path to a bug fix here for issue #5426\n    // See the following link for information about the regex chosen\n    // https://developers.google.com/chrome/mobile/docs/user-agent#chrome_for_ios_user-agent\n    pushState: \"pushState\" in history &&\n        \"replaceState\" in history &&\n        // When running inside a FF iframe, calling replaceState causes an error\n        !( window.navigator.userAgent.indexOf( \"Firefox\" ) >= 0 && window.top !== window ) &&\n        ( window.navigator.userAgent.search(/CriOS/) === -1 ),\n\n    mediaquery: $.mobile.media( \"only all\" ),\n    cssPseudoElement: !!propExists( \"content\" ),\n    touchOverflow: !!propExists( \"overflowScrolling\" ),\n    cssTransform3d: transform3dTest(),\n    boxShadow: !!propExists( \"boxShadow\" ) && !bb,\n    fixedPosition: fixedPosition(),\n    scrollTop: (\"pageXOffset\" in window ||\n        \"scrollTop\" in document.documentElement ||\n        \"scrollTop\" in fakeBody[ 0 ]) && !webos && !operamini,\n\n    dynamicBaseTag: baseTagTest(),\n    cssPointerEvents: cssPointerEventsTest(),\n    boundingRect: boundingRect(),\n    inlineSVG: inlineSVG\n});\n\nfakeBody.remove();\n\n// $.mobile.ajaxBlacklist is used to override ajaxEnabled on platforms that have known conflicts with hash history updates (BB5, Symbian)\n// or that generally work better browsing in regular http for full page refreshes (Opera Mini)\n// Note: This detection below is used as a last resort.\n// We recommend only using these detection methods when all other more reliable/forward-looking approaches are not possible\nnokiaLTE7_3 = (function() {\n\n    var ua = window.navigator.userAgent;\n\n    //The following is an attempt to match Nokia browsers that are running Symbian/s60, with webkit, version 7.3 or older\n    return ua.indexOf( \"Nokia\" ) > -1 &&\n            ( ua.indexOf( \"Symbian/3\" ) > -1 || ua.indexOf( \"Series60/5\" ) > -1 ) &&\n            ua.indexOf( \"AppleWebKit\" ) > -1 &&\n            ua.match( /(BrowserNG|NokiaBrowser)\\/7\\.[0-3]/ );\n})();\n\n// Support conditions that must be met in order to proceed\n// default enhanced qualifications are media query support OR IE 7+\n\n$.mobile.gradeA = function() {\n    return ( ( $.support.mediaquery && $.support.cssPseudoElement ) || $.mobile.browser.oldIE && $.mobile.browser.oldIE >= 8 ) && ( $.support.boundingRect || $.fn.jquery.match(/1\\.[0-7+]\\.[0-9+]?/) !== null );\n};\n\n$.mobile.ajaxBlacklist =\n            // BlackBerry browsers, pre-webkit\n            window.blackberry && !window.WebKitPoint ||\n            // Opera Mini\n            operamini ||\n            // Symbian webkits pre 7.3\n            nokiaLTE7_3;\n\n// Lastly, this workaround is the only way we've found so far to get pre 7.3 Symbian webkit devices\n// to render the stylesheets when they're referenced before this script, as we'd recommend doing.\n// This simply reappends the CSS in place, which for some reason makes it apply\nif ( nokiaLTE7_3 ) {\n    $(function() {\n        $( \"head link[rel='stylesheet']\" ).attr( \"rel\", \"alternate stylesheet\" ).attr( \"rel\", \"stylesheet\" );\n    });\n}\n\n// For ruling out shadows via css\nif ( !$.support.boxShadow ) {\n    $( \"html\" ).addClass( \"ui-noboxshadow\" );\n}\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n    var $win = $.mobile.window, self,\n        dummyFnToInitNavigate = function() {\n        };\n\n    $.event.special.beforenavigate = {\n        setup: function() {\n            $win.on( \"navigate\", dummyFnToInitNavigate );\n        },\n\n        teardown: function() {\n            $win.off( \"navigate\", dummyFnToInitNavigate );\n        }\n    };\n\n    $.event.special.navigate = self = {\n        bound: false,\n\n        pushStateEnabled: true,\n\n        originalEventName: undefined,\n\n        // If pushstate support is present and push state support is defined to\n        // be true on the mobile namespace.\n        isPushStateEnabled: function() {\n            return $.support.pushState &&\n                $.mobile.pushStateEnabled === true &&\n                this.isHashChangeEnabled();\n        },\n\n        // !! assumes mobile namespace is present\n        isHashChangeEnabled: function() {\n            return $.mobile.hashListeningEnabled === true;\n        },\n\n        // TODO a lot of duplication between popstate and hashchange\n        popstate: function( event ) {\n            var newEvent = new $.Event( \"navigate\" ),\n                beforeNavigate = new $.Event( \"beforenavigate\" ),\n                state = event.originalEvent.state || {};\n\n            beforeNavigate.originalEvent = event;\n            $win.trigger( beforeNavigate );\n\n            if ( beforeNavigate.isDefaultPrevented() ) {\n                return;\n            }\n\n            if ( event.historyState ) {\n                $.extend(state, event.historyState);\n            }\n\n            // Make sure the original event is tracked for the end\n            // user to inspect incase they want to do something special\n            newEvent.originalEvent = event;\n\n            // NOTE we let the current stack unwind because any assignment to\n            //      location.hash will stop the world and run this event handler. By\n            //      doing this we create a similar behavior to hashchange on hash\n            //      assignment\n            setTimeout(function() {\n                $win.trigger( newEvent, {\n                    state: state\n                });\n            }, 0);\n        },\n\n        hashchange: function( event /*, data */ ) {\n            var newEvent = new $.Event( \"navigate\" ),\n                beforeNavigate = new $.Event( \"beforenavigate\" );\n\n            beforeNavigate.originalEvent = event;\n            $win.trigger( beforeNavigate );\n\n            if ( beforeNavigate.isDefaultPrevented() ) {\n                return;\n            }\n\n            // Make sure the original event is tracked for the end\n            // user to inspect incase they want to do something special\n            newEvent.originalEvent = event;\n\n            // Trigger the hashchange with state provided by the user\n            // that altered the hash\n            $win.trigger( newEvent, {\n                // Users that want to fully normalize the two events\n                // will need to do history management down the stack and\n                // add the state to the event before this binding is fired\n                // TODO consider allowing for the explicit addition of callbacks\n                //      to be fired before this value is set to avoid event timing issues\n                state: event.hashchangeState || {}\n            });\n        },\n\n        // TODO We really only want to set this up once\n        //      but I'm not clear if there's a beter way to achieve\n        //      this with the jQuery special event structure\n        setup: function( /* data, namespaces */ ) {\n            if ( self.bound ) {\n                return;\n            }\n\n            self.bound = true;\n\n            if ( self.isPushStateEnabled() ) {\n                self.originalEventName = \"popstate\";\n                $win.bind( \"popstate.navigate\", self.popstate );\n            } else if ( self.isHashChangeEnabled() ) {\n                self.originalEventName = \"hashchange\";\n                $win.bind( \"hashchange.navigate\", self.hashchange );\n            }\n        }\n    };\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n        var path, $base, dialogHashKey = \"&ui-state=dialog\";\n\n        $.mobile.path = path = {\n            uiStateKey: \"&ui-state\",\n\n            // This scary looking regular expression parses an absolute URL or its relative\n            // variants (protocol, site, document, query, and hash), into the various\n            // components (protocol, host, path, query, fragment, etc that make up the\n            // URL as well as some other commonly used sub-parts. When used with RegExp.exec()\n            // or String.match, it parses the URL into a results array that looks like this:\n            //\n            //     [0]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread#msg-content\n            //     [1]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread\n            //     [2]: http://jblas:password@mycompany.com:8080/mail/inbox\n            //     [3]: http://jblas:password@mycompany.com:8080\n            //     [4]: http:\n            //     [5]: //\n            //     [6]: jblas:password@mycompany.com:8080\n            //     [7]: jblas:password\n            //     [8]: jblas\n            //     [9]: password\n            //    [10]: mycompany.com:8080\n            //    [11]: mycompany.com\n            //    [12]: 8080\n            //    [13]: /mail/inbox\n            //    [14]: /mail/\n            //    [15]: inbox\n            //    [16]: ?msg=1234&type=unread\n            //    [17]: #msg-content\n            //\n            urlParseRE: /^\\s*(((([^:\\/#\\?]+:)?(?:(\\/\\/)((?:(([^:@\\/#\\?]+)(?:\\:([^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((\\/?(?:[^\\/\\?#]+\\/+)*)([^\\?#]*)))?(\\?[^#]+)?)(#.*)?/,\n\n            // Abstraction to address xss (Issue #4787) by removing the authority in\n            // browsers that auto-decode it. All references to location.href should be\n            // replaced with a call to this method so that it can be dealt with properly here\n            getLocation: function( url ) {\n                var parsedUrl = this.parseUrl( url || location.href ),\n                    uri = url ? parsedUrl : location,\n\n                    // Make sure to parse the url or the location object for the hash because using\n                    // location.hash is autodecoded in firefox, the rest of the url should be from\n                    // the object (location unless we're testing) to avoid the inclusion of the\n                    // authority\n                    hash = parsedUrl.hash;\n\n                // mimic the browser with an empty string when the hash is empty\n                hash = hash === \"#\" ? \"\" : hash;\n\n                return uri.protocol +\n                    parsedUrl.doubleSlash +\n                    uri.host +\n\n                    // The pathname must start with a slash if there's a protocol, because you\n                    // can't have a protocol followed by a relative path. Also, it's impossible to\n                    // calculate absolute URLs from relative ones if the absolute one doesn't have\n                    // a leading \"/\".\n                    ( ( uri.protocol !== \"\" && uri.pathname.substring( 0, 1 ) !== \"/\" ) ?\n                        \"/\" : \"\" ) +\n                    uri.pathname +\n                    uri.search +\n                    hash;\n            },\n\n            //return the original document url\n            getDocumentUrl: function( asParsedObject ) {\n                return asParsedObject ? $.extend( {}, path.documentUrl ) : path.documentUrl.href;\n            },\n\n            parseLocation: function() {\n                return this.parseUrl( this.getLocation() );\n            },\n\n            //Parse a URL into a structure that allows easy access to\n            //all of the URL components by name.\n            parseUrl: function( url ) {\n                // If we're passed an object, we'll assume that it is\n                // a parsed url object and just return it back to the caller.\n                if ( $.type( url ) === \"object\" ) {\n                    return url;\n                }\n\n                var matches = path.urlParseRE.exec( url || \"\" ) || [];\n\n                    // Create an object that allows the caller to access the sub-matches\n                    // by name. Note that IE returns an empty string instead of undefined,\n                    // like all other browsers do, so we normalize everything so its consistent\n                    // no matter what browser we're running on.\n                    return {\n                        href:         matches[  0 ] || \"\",\n                        hrefNoHash:   matches[  1 ] || \"\",\n                        hrefNoSearch: matches[  2 ] || \"\",\n                        domain:       matches[  3 ] || \"\",\n                        protocol:     matches[  4 ] || \"\",\n                        doubleSlash:  matches[  5 ] || \"\",\n                        authority:    matches[  6 ] || \"\",\n                        username:     matches[  8 ] || \"\",\n                        password:     matches[  9 ] || \"\",\n                        host:         matches[ 10 ] || \"\",\n                        hostname:     matches[ 11 ] || \"\",\n                        port:         matches[ 12 ] || \"\",\n                        pathname:     matches[ 13 ] || \"\",\n                        directory:    matches[ 14 ] || \"\",\n                        filename:     matches[ 15 ] || \"\",\n                        search:       matches[ 16 ] || \"\",\n                        hash:         matches[ 17 ] || \"\"\n                    };\n            },\n\n            //Turn relPath into an asbolute path. absPath is\n            //an optional absolute path which describes what\n            //relPath is relative to.\n            makePathAbsolute: function( relPath, absPath ) {\n                var absStack,\n                    relStack,\n                    i, d;\n\n                if ( relPath && relPath.charAt( 0 ) === \"/\" ) {\n                    return relPath;\n                }\n\n                relPath = relPath || \"\";\n                absPath = absPath ? absPath.replace( /^\\/|(\\/[^\\/]*|[^\\/]+)$/g, \"\" ) : \"\";\n\n                absStack = absPath ? absPath.split( \"/\" ) : [];\n                relStack = relPath.split( \"/\" );\n\n                for ( i = 0; i < relStack.length; i++ ) {\n                    d = relStack[ i ];\n                    switch ( d ) {\n                        case \".\":\n                            break;\n                        case \"..\":\n                            if ( absStack.length ) {\n                                absStack.pop();\n                            }\n                            break;\n                        default:\n                            absStack.push( d );\n                            break;\n                    }\n                }\n                return \"/\" + absStack.join( \"/\" );\n            },\n\n            //Returns true if both urls have the same domain.\n            isSameDomain: function( absUrl1, absUrl2 ) {\n                return path.parseUrl( absUrl1 ).domain.toLowerCase() ===\n                    path.parseUrl( absUrl2 ).domain.toLowerCase();\n            },\n\n            //Returns true for any relative variant.\n            isRelativeUrl: function( url ) {\n                // All relative Url variants have one thing in common, no protocol.\n                return path.parseUrl( url ).protocol === \"\";\n            },\n\n            //Returns true for an absolute url.\n            isAbsoluteUrl: function( url ) {\n                return path.parseUrl( url ).protocol !== \"\";\n            },\n\n            //Turn the specified realtive URL into an absolute one. This function\n            //can handle all relative variants (protocol, site, document, query, fragment).\n            makeUrlAbsolute: function( relUrl, absUrl ) {\n                if ( !path.isRelativeUrl( relUrl ) ) {\n                    return relUrl;\n                }\n\n                if ( absUrl === undefined ) {\n                    absUrl = this.documentBase;\n                }\n\n                var relObj = path.parseUrl( relUrl ),\n                    absObj = path.parseUrl( absUrl ),\n                    protocol = relObj.protocol || absObj.protocol,\n                    doubleSlash = relObj.protocol ? relObj.doubleSlash : ( relObj.doubleSlash || absObj.doubleSlash ),\n                    authority = relObj.authority || absObj.authority,\n                    hasPath = relObj.pathname !== \"\",\n                    pathname = path.makePathAbsolute( relObj.pathname || absObj.filename, absObj.pathname ),\n                    search = relObj.search || ( !hasPath && absObj.search ) || \"\",\n                    hash = relObj.hash;\n\n                return protocol + doubleSlash + authority + pathname + search + hash;\n            },\n\n            //Add search (aka query) params to the specified url.\n            addSearchParams: function( url, params ) {\n                var u = path.parseUrl( url ),\n                    p = ( typeof params === \"object\" ) ? $.param( params ) : params,\n                    s = u.search || \"?\";\n                return u.hrefNoSearch + s + ( s.charAt( s.length - 1 ) !== \"?\" ? \"&\" : \"\" ) + p + ( u.hash || \"\" );\n            },\n\n            convertUrlToDataUrl: function( absUrl ) {\n                var result = absUrl,\n                    u = path.parseUrl( absUrl );\n\n                if ( path.isEmbeddedPage( u ) ) {\n                    // For embedded pages, remove the dialog hash key as in getFilePath(),\n                    // and remove otherwise the Data Url won't match the id of the embedded Page.\n                    result = u.hash\n                        .split( dialogHashKey )[0]\n                        .replace( /^#/, \"\" )\n                        .replace( /\\?.*$/, \"\" );\n                } else if ( path.isSameDomain( u, this.documentBase ) ) {\n                    result = u.hrefNoHash.replace( this.documentBase.domain, \"\" ).split( dialogHashKey )[0];\n                }\n\n                return window.decodeURIComponent( result );\n            },\n\n            //get path from current hash, or from a file path\n            get: function( newPath ) {\n                if ( newPath === undefined ) {\n                    newPath = path.parseLocation().hash;\n                }\n                return path.stripHash( newPath ).replace( /[^\\/]*\\.[^\\/*]+$/, \"\" );\n            },\n\n            //set location hash to path\n            set: function( path ) {\n                location.hash = path;\n            },\n\n            //test if a given url (string) is a path\n            //NOTE might be exceptionally naive\n            isPath: function( url ) {\n                return ( /\\// ).test( url );\n            },\n\n            //return a url path with the window's location protocol/hostname/pathname removed\n            clean: function( url ) {\n                return url.replace( this.documentBase.domain, \"\" );\n            },\n\n            //just return the url without an initial #\n            stripHash: function( url ) {\n                return url.replace( /^#/, \"\" );\n            },\n\n            stripQueryParams: function( url ) {\n                return url.replace( /\\?.*$/, \"\" );\n            },\n\n            //remove the preceding hash, any query params, and dialog notations\n            cleanHash: function( hash ) {\n                return path.stripHash( hash.replace( /\\?.*$/, \"\" ).replace( dialogHashKey, \"\" ) );\n            },\n\n            isHashValid: function( hash ) {\n                return ( /^#[^#]+$/ ).test( hash );\n            },\n\n            //check whether a url is referencing the same domain, or an external domain or different protocol\n            //could be mailto, etc\n            isExternal: function( url ) {\n                var u = path.parseUrl( url );\n\n                return !!( u.protocol &&\n                    ( u.domain.toLowerCase() !== this.documentUrl.domain.toLowerCase() ) );\n            },\n\n            hasProtocol: function( url ) {\n                return ( /^(:?\\w+:)/ ).test( url );\n            },\n\n            isEmbeddedPage: function( url ) {\n                var u = path.parseUrl( url );\n\n                //if the path is absolute, then we need to compare the url against\n                //both the this.documentUrl and the documentBase. The main reason for this\n                //is that links embedded within external documents will refer to the\n                //application document, whereas links embedded within the application\n                //document will be resolved against the document base.\n                if ( u.protocol !== \"\" ) {\n                    return ( !this.isPath(u.hash) && u.hash && ( u.hrefNoHash === this.documentUrl.hrefNoHash || ( this.documentBaseDiffers && u.hrefNoHash === this.documentBase.hrefNoHash ) ) );\n                }\n                return ( /^#/ ).test( u.href );\n            },\n\n            squash: function( url, resolutionUrl ) {\n                var href, cleanedUrl, search, stateIndex, docUrl,\n                    isPath = this.isPath( url ),\n                    uri = this.parseUrl( url ),\n                    preservedHash = uri.hash,\n                    uiState = \"\";\n\n                // produce a url against which we can resolve the provided path\n                if ( !resolutionUrl ) {\n                    if ( isPath ) {\n                        resolutionUrl = path.getLocation();\n                    } else {\n                        docUrl = path.getDocumentUrl( true );\n                        if ( path.isPath( docUrl.hash ) ) {\n                            resolutionUrl = path.squash( docUrl.href );\n                        } else {\n                            resolutionUrl = docUrl.href;\n                        }\n                    }\n                }\n\n                // If the url is anything but a simple string, remove any preceding hash\n                // eg #foo/bar -> foo/bar\n                //    #foo -> #foo\n                cleanedUrl = isPath ? path.stripHash( url ) : url;\n\n                // If the url is a full url with a hash check if the parsed hash is a path\n                // if it is, strip the #, and use it otherwise continue without change\n                cleanedUrl = path.isPath( uri.hash ) ? path.stripHash( uri.hash ) : cleanedUrl;\n\n                // Split the UI State keys off the href\n                stateIndex = cleanedUrl.indexOf( this.uiStateKey );\n\n                // store the ui state keys for use\n                if ( stateIndex > -1 ) {\n                    uiState = cleanedUrl.slice( stateIndex );\n                    cleanedUrl = cleanedUrl.slice( 0, stateIndex );\n                }\n\n                // make the cleanedUrl absolute relative to the resolution url\n                href = path.makeUrlAbsolute( cleanedUrl, resolutionUrl );\n\n                // grab the search from the resolved url since parsing from\n                // the passed url may not yield the correct result\n                search = this.parseUrl( href ).search;\n\n                // TODO all this crap is terrible, clean it up\n                if ( isPath ) {\n                    // reject the hash if it's a path or it's just a dialog key\n                    if ( path.isPath( preservedHash ) || preservedHash.replace(\"#\", \"\").indexOf( this.uiStateKey ) === 0) {\n                        preservedHash = \"\";\n                    }\n\n                    // Append the UI State keys where it exists and it's been removed\n                    // from the url\n                    if ( uiState && preservedHash.indexOf( this.uiStateKey ) === -1) {\n                        preservedHash += uiState;\n                    }\n\n                    // make sure that pound is on the front of the hash\n                    if ( preservedHash.indexOf( \"#\" ) === -1 && preservedHash !== \"\" ) {\n                        preservedHash = \"#\" + preservedHash;\n                    }\n\n                    // reconstruct each of the pieces with the new search string and hash\n                    href = path.parseUrl( href );\n                    href = href.protocol + href.doubleSlash + href.host + href.pathname + search +\n                        preservedHash;\n                } else {\n                    href += href.indexOf( \"#\" ) > -1 ? uiState : \"#\" + uiState;\n                }\n\n                return href;\n            },\n\n            isPreservableHash: function( hash ) {\n                return hash.replace( \"#\", \"\" ).indexOf( this.uiStateKey ) === 0;\n            },\n\n            // Escape weird characters in the hash if it is to be used as a selector\n            hashToSelector: function( hash ) {\n                var hasHash = ( hash.substring( 0, 1 ) === \"#\" );\n                if ( hasHash ) {\n                    hash = hash.substring( 1 );\n                }\n                return ( hasHash ? \"#\" : \"\" ) + hash.replace( /([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~])/g, \"\\\\$1\" );\n            },\n\n            // return the substring of a filepath before the dialogHashKey, for making a server\n            // request\n            getFilePath: function( path ) {\n                return path && path.split( dialogHashKey )[0];\n            },\n\n            // check if the specified url refers to the first page in the main\n            // application document.\n            isFirstPageUrl: function( url ) {\n                // We only deal with absolute paths.\n                var u = path.parseUrl( path.makeUrlAbsolute( url, this.documentBase ) ),\n\n                    // Does the url have the same path as the document?\n                    samePath = u.hrefNoHash === this.documentUrl.hrefNoHash ||\n                        ( this.documentBaseDiffers &&\n                            u.hrefNoHash === this.documentBase.hrefNoHash ),\n\n                    // Get the first page element.\n                    fp = $.mobile.firstPage,\n\n                    // Get the id of the first page element if it has one.\n                    fpId = fp && fp[0] ? fp[0].id : undefined;\n\n                // The url refers to the first page if the path matches the document and\n                // it either has no hash value, or the hash is exactly equal to the id\n                // of the first page element.\n                return samePath &&\n                    ( !u.hash ||\n                        u.hash === \"#\" ||\n                        ( fpId && u.hash.replace( /^#/, \"\" ) === fpId ) );\n            },\n\n            // Some embedded browsers, like the web view in Phone Gap, allow\n            // cross-domain XHR requests if the document doing the request was loaded\n            // via the file:// protocol. This is usually to allow the application to\n            // \"phone home\" and fetch app specific data. We normally let the browser\n            // handle external/cross-domain urls, but if the allowCrossDomainPages\n            // option is true, we will allow cross-domain http/https requests to go\n            // through our page loading logic.\n            isPermittedCrossDomainRequest: function( docUrl, reqUrl ) {\n                return $.mobile.allowCrossDomainPages &&\n                    (docUrl.protocol === \"file:\" || docUrl.protocol === \"content:\") &&\n                    reqUrl.search( /^https?:/ ) !== -1;\n            }\n        };\n\n        path.documentUrl = path.parseLocation();\n\n        $base = $( \"head\" ).find( \"base\" );\n\n        path.documentBase = $base.length ?\n            path.parseUrl( path.makeUrlAbsolute( $base.attr( \"href\" ), path.documentUrl.href ) ) :\n            path.documentUrl;\n\n        path.documentBaseDiffers = (path.documentUrl.hrefNoHash !== path.documentBase.hrefNoHash);\n\n        //return the original document base url\n        path.getDocumentBase = function( asParsedObject ) {\n            return asParsedObject ? $.extend( {}, path.documentBase ) : path.documentBase.href;\n        };\n\n        // DEPRECATED as of 1.4.0 - remove in 1.5.0\n        $.extend( $.mobile, {\n\n            //return the original document url\n            getDocumentUrl: path.getDocumentUrl,\n\n            //return the original document base url\n            getDocumentBase: path.getDocumentBase\n        });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    $.mobile.History = function( stack, index ) {\n        this.stack = stack || [];\n        this.activeIndex = index || 0;\n    };\n\n    $.extend($.mobile.History.prototype, {\n        getActive: function() {\n            return this.stack[ this.activeIndex ];\n        },\n\n        getLast: function() {\n            return this.stack[ this.previousIndex ];\n        },\n\n        getNext: function() {\n            return this.stack[ this.activeIndex + 1 ];\n        },\n\n        getPrev: function() {\n            return this.stack[ this.activeIndex - 1 ];\n        },\n\n        // addNew is used whenever a new page is added\n        add: function( url, data ) {\n            data = data || {};\n\n            //if there's forward history, wipe it\n            if ( this.getNext() ) {\n                this.clearForward();\n            }\n\n            // if the hash is included in the data make sure the shape\n            // is consistent for comparison\n            if ( data.hash && data.hash.indexOf( \"#\" ) === -1) {\n                data.hash = \"#\" + data.hash;\n            }\n\n            data.url = url;\n            this.stack.push( data );\n            this.activeIndex = this.stack.length - 1;\n        },\n\n        //wipe urls ahead of active index\n        clearForward: function() {\n            this.stack = this.stack.slice( 0, this.activeIndex + 1 );\n        },\n\n        find: function( url, stack, earlyReturn ) {\n            stack = stack || this.stack;\n\n            var entry, i, length = stack.length, index;\n\n            for ( i = 0; i < length; i++ ) {\n                entry = stack[i];\n\n                if ( decodeURIComponent(url) === decodeURIComponent(entry.url) ||\n                    decodeURIComponent(url) === decodeURIComponent(entry.hash) ) {\n                    index = i;\n\n                    if ( earlyReturn ) {\n                        return index;\n                    }\n                }\n            }\n\n            return index;\n        },\n\n        closest: function( url ) {\n            var closest, a = this.activeIndex;\n\n            // First, take the slice of the history stack before the current index and search\n            // for a url match. If one is found, we'll avoid avoid looking through forward history\n            // NOTE the preference for backward history movement is driven by the fact that\n            //      most mobile browsers only have a dedicated back button, and users rarely use\n            //      the forward button in desktop browser anyhow\n            closest = this.find( url, this.stack.slice(0, a) );\n\n            // If nothing was found in backward history check forward. The `true`\n            // value passed as the third parameter causes the find method to break\n            // on the first match in the forward history slice. The starting index\n            // of the slice must then be added to the result to get the element index\n            // in the original history stack :( :(\n            //\n            // TODO this is hyper confusing and should be cleaned up (ugh so bad)\n            if ( closest === undefined ) {\n                closest = this.find( url, this.stack.slice(a), true );\n                closest = closest === undefined ? closest : closest + a;\n            }\n\n            return closest;\n        },\n\n        direct: function( opts ) {\n            var newActiveIndex = this.closest( opts.url ), a = this.activeIndex;\n\n            // save new page index, null check to prevent falsey 0 result\n            // record the previous index for reference\n            if ( newActiveIndex !== undefined ) {\n                this.activeIndex = newActiveIndex;\n                this.previousIndex = a;\n            }\n\n            // invoke callbacks where appropriate\n            //\n            // TODO this is also convoluted and confusing\n            if ( newActiveIndex < a ) {\n                ( opts.present || opts.back || $.noop )( this.getActive(), \"back\" );\n            } else if ( newActiveIndex > a ) {\n                ( opts.present || opts.forward || $.noop )( this.getActive(), \"forward\" );\n            } else if ( newActiveIndex === undefined && opts.missing ) {\n                opts.missing( this.getActive() );\n            }\n        }\n    });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    var path = $.mobile.path,\n        initialHref = location.href;\n\n    $.mobile.Navigator = function( history ) {\n        this.history = history;\n        this.ignoreInitialHashChange = true;\n\n        $.mobile.window.bind({\n            \"popstate.history\": $.proxy( this.popstate, this ),\n            \"hashchange.history\": $.proxy( this.hashchange, this )\n        });\n    };\n\n    $.extend($.mobile.Navigator.prototype, {\n        squash: function( url, data ) {\n            var state, href, hash = path.isPath(url) ? path.stripHash(url) : url;\n\n            href = path.squash( url );\n\n            // make sure to provide this information when it isn't explicitly set in the\n            // data object that was passed to the squash method\n            state = $.extend({\n                hash: hash,\n                url: href\n            }, data);\n\n            // replace the current url with the new href and store the state\n            // Note that in some cases we might be replacing an url with the\n            // same url. We do this anyways because we need to make sure that\n            // all of our history entries have a state object associated with\n            // them. This allows us to work around the case where $.mobile.back()\n            // is called to transition from an external page to an embedded page.\n            // In that particular case, a hashchange event is *NOT* generated by the browser.\n            // Ensuring each history entry has a state object means that onPopState()\n            // will always trigger our hashchange callback even when a hashchange event\n            // is not fired.\n            window.history.replaceState( state, state.title || document.title, href );\n\n            return state;\n        },\n\n        hash: function( url, href ) {\n            var parsed, loc, hash, resolved;\n\n            // Grab the hash for recording. If the passed url is a path\n            // we used the parsed version of the squashed url to reconstruct,\n            // otherwise we assume it's a hash and store it directly\n            parsed = path.parseUrl( url );\n            loc = path.parseLocation();\n\n            if ( loc.pathname + loc.search === parsed.pathname + parsed.search ) {\n                // If the pathname and search of the passed url is identical to the current loc\n                // then we must use the hash. Otherwise there will be no event\n                // eg, url = \"/foo/bar?baz#bang\", location.href = \"http://example.com/foo/bar?baz\"\n                hash = parsed.hash ? parsed.hash : parsed.pathname + parsed.search;\n            } else if ( path.isPath(url) ) {\n                resolved = path.parseUrl( href );\n                // If the passed url is a path, make it domain relative and remove any trailing hash\n                hash = resolved.pathname + resolved.search + (path.isPreservableHash( resolved.hash )? resolved.hash.replace( \"#\", \"\" ) : \"\");\n            } else {\n                hash = url;\n            }\n\n            return hash;\n        },\n\n        // TODO reconsider name\n        go: function( url, data, noEvents ) {\n            var state, href, hash, popstateEvent,\n                isPopStateEvent = $.event.special.navigate.isPushStateEnabled();\n\n            // Get the url as it would look squashed on to the current resolution url\n            href = path.squash( url );\n\n            // sort out what the hash sould be from the url\n            hash = this.hash( url, href );\n\n            // Here we prevent the next hash change or popstate event from doing any\n            // history management. In the case of hashchange we don't swallow it\n            // if there will be no hashchange fired (since that won't reset the value)\n            // and will swallow the following hashchange\n            if ( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {\n                this.preventNextHashChange = noEvents;\n            }\n\n            // IMPORTANT in the case where popstate is supported the event will be triggered\n            //      directly, stopping further execution - ie, interupting the flow of this\n            //      method call to fire bindings at this expression. Below the navigate method\n            //      there is a binding to catch this event and stop its propagation.\n            //\n            //      We then trigger a new popstate event on the window with a null state\n            //      so that the navigate events can conclude their work properly\n            //\n            // if the url is a path we want to preserve the query params that are available on\n            // the current url.\n            this.preventHashAssignPopState = true;\n            window.location.hash = hash;\n\n            // If popstate is enabled and the browser triggers `popstate` events when the hash\n            // is set (this often happens immediately in browsers like Chrome), then the\n            // this flag will be set to false already. If it's a browser that does not trigger\n            // a `popstate` on hash assignement or `replaceState` then we need avoid the branch\n            // that swallows the event created by the popstate generated by the hash assignment\n            // At the time of this writing this happens with Opera 12 and some version of IE\n            this.preventHashAssignPopState = false;\n\n            state = $.extend({\n                url: href,\n                hash: hash,\n                title: document.title\n            }, data);\n\n            if ( isPopStateEvent ) {\n                popstateEvent = new $.Event( \"popstate\" );\n                popstateEvent.originalEvent = {\n                    type: \"popstate\",\n                    state: null\n                };\n\n                this.squash( url, state );\n\n                // Trigger a new faux popstate event to replace the one that we\n                // caught that was triggered by the hash setting above.\n                if ( !noEvents ) {\n                    this.ignorePopState = true;\n                    $.mobile.window.trigger( popstateEvent );\n                }\n            }\n\n            // record the history entry so that the information can be included\n            // in hashchange event driven navigate events in a similar fashion to\n            // the state that's provided by popstate\n            this.history.add( state.url, state );\n        },\n\n        // This binding is intended to catch the popstate events that are fired\n        // when execution of the `$.navigate` method stops at window.location.hash = url;\n        // and completely prevent them from propagating. The popstate event will then be\n        // retriggered after execution resumes\n        //\n        // TODO grab the original event here and use it for the synthetic event in the\n        //      second half of the navigate execution that will follow this binding\n        popstate: function( event ) {\n            var hash, state;\n\n            // Partly to support our test suite which manually alters the support\n            // value to test hashchange. Partly to prevent all around weirdness\n            if ( !$.event.special.navigate.isPushStateEnabled() ) {\n                return;\n            }\n\n            // If this is the popstate triggered by the actual alteration of the hash\n            // prevent it completely. History is tracked manually\n            if ( this.preventHashAssignPopState ) {\n                this.preventHashAssignPopState = false;\n                event.stopImmediatePropagation();\n                return;\n            }\n\n            // if this is the popstate triggered after the `replaceState` call in the go\n            // method, then simply ignore it. The history entry has already been captured\n            if ( this.ignorePopState ) {\n                this.ignorePopState = false;\n                return;\n            }\n\n            // If there is no state, and the history stack length is one were\n            // probably getting the page load popstate fired by browsers like chrome\n            // avoid it and set the one time flag to false.\n            // TODO: Do we really need all these conditions? Comparing location hrefs\n            // should be sufficient.\n            if ( !event.originalEvent.state &&\n                this.history.stack.length === 1 &&\n                this.ignoreInitialHashChange ) {\n                this.ignoreInitialHashChange = false;\n\n                if ( location.href === initialHref ) {\n                    event.preventDefault();\n                    return;\n                }\n            }\n\n            // account for direct manipulation of the hash. That is, we will receive a popstate\n            // when the hash is changed by assignment, and it won't have a state associated. We\n            // then need to squash the hash. See below for handling of hash assignment that\n            // matches an existing history entry\n            // TODO it might be better to only add to the history stack\n            //      when the hash is adjacent to the active history entry\n            hash = path.parseLocation().hash;\n            if ( !event.originalEvent.state && hash ) {\n                // squash the hash that's been assigned on the URL with replaceState\n                // also grab the resulting state object for storage\n                state = this.squash( hash );\n\n                // record the new hash as an additional history entry\n                // to match the browser's treatment of hash assignment\n                this.history.add( state.url, state );\n\n                // pass the newly created state information\n                // along with the event\n                event.historyState = state;\n\n                // do not alter history, we've added a new history entry\n                // so we know where we are\n                return;\n            }\n\n            // If all else fails this is a popstate that comes from the back or forward buttons\n            // make sure to set the state of our history stack properly, and record the directionality\n            this.history.direct({\n                url: (event.originalEvent.state || {}).url || hash,\n\n                // When the url is either forward or backward in history include the entry\n                // as data on the event object for merging as data in the navigate event\n                present: function( historyEntry, direction ) {\n                    // make sure to create a new object to pass down as the navigate event data\n                    event.historyState = $.extend({}, historyEntry);\n                    event.historyState.direction = direction;\n                }\n            });\n        },\n\n        // NOTE must bind before `navigate` special event hashchange binding otherwise the\n        //      navigation data won't be attached to the hashchange event in time for those\n        //      bindings to attach it to the `navigate` special event\n        // TODO add a check here that `hashchange.navigate` is bound already otherwise it's\n        //      broken (exception?)\n        hashchange: function( event ) {\n            var history, hash;\n\n            // If hashchange listening is explicitly disabled or pushstate is supported\n            // avoid making use of the hashchange handler.\n            if (!$.event.special.navigate.isHashChangeEnabled() ||\n                $.event.special.navigate.isPushStateEnabled() ) {\n                return;\n            }\n\n            // On occasion explicitly want to prevent the next hash from propogating because we only\n            // with to alter the url to represent the new state do so here\n            if ( this.preventNextHashChange ) {\n                this.preventNextHashChange = false;\n                event.stopImmediatePropagation();\n                return;\n            }\n\n            history = this.history;\n            hash = path.parseLocation().hash;\n\n            // If this is a hashchange caused by the back or forward button\n            // make sure to set the state of our history stack properly\n            this.history.direct({\n                url: hash,\n\n                // When the url is either forward or backward in history include the entry\n                // as data on the event object for merging as data in the navigate event\n                present: function( historyEntry, direction ) {\n                    // make sure to create a new object to pass down as the navigate event data\n                    event.hashchangeState = $.extend({}, historyEntry);\n                    event.hashchangeState.direction = direction;\n                },\n\n                // When we don't find a hash in our history clearly we're aiming to go there\n                // record the entry as new for future traversal\n                //\n                // NOTE it's not entirely clear that this is the right thing to do given that we\n                //      can't know the users intention. It might be better to explicitly _not_\n                //      support location.hash assignment in preference to $.navigate calls\n                // TODO first arg to add should be the href, but it causes issues in identifying\n                //      embeded pages\n                missing: function() {\n                    history.add( hash, {\n                        hash: hash,\n                        title: document.title\n                    });\n                }\n            });\n        }\n    });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    // TODO consider queueing navigation activity until previous activities have completed\n    //      so that end users don't have to think about it. Punting for now\n    // TODO !! move the event bindings into callbacks on the navigate event\n    $.mobile.navigate = function( url, data, noEvents ) {\n        $.mobile.navigate.navigator.go( url, data, noEvents );\n    };\n\n    // expose the history on the navigate method in anticipation of full integration with\n    // existing navigation functionalty that is tightly coupled to the history information\n    $.mobile.navigate.history = new $.mobile.History();\n\n    // instantiate an instance of the navigator for use within the $.navigate method\n    $.mobile.navigate.navigator = new $.mobile.Navigator( $.mobile.navigate.history );\n\n    var loc = $.mobile.path.parseLocation();\n    $.mobile.navigate.history.add( loc.href, {hash: loc.hash} );\n})( jQuery );\n\n\n(function( $, undefined ) {\n    var props = {\n            \"animation\": {},\n            \"transition\": {}\n        },\n        testElement = document.createElement( \"a\" ),\n        vendorPrefixes = [ \"\", \"webkit-\", \"moz-\", \"o-\" ];\n\n    $.each( [ \"animation\", \"transition\" ], function( i, test ) {\n\n        // Get correct name for test\n        var testName = ( i === 0 ) ? test + \"-\" + \"name\" : test;\n\n        $.each( vendorPrefixes, function( j, prefix ) {\n            if ( testElement.style[ $.camelCase( prefix + testName ) ] !== undefined ) {\n                 props[ test ][ \"prefix\" ] = prefix;\n                return false;\n            }\n        });\n\n        // Set event and duration names for later use\n        props[ test ][ \"duration\" ] =\n            $.camelCase( props[ test ][ \"prefix\" ] + test + \"-\" + \"duration\" );\n        props[ test ][ \"event\" ] =\n            $.camelCase( props[ test ][ \"prefix\" ] + test + \"-\" + \"end\" );\n\n        // All lower case if not a vendor prop\n        if ( props[ test ][ \"prefix\" ] === \"\" ) {\n            props[ test ][ \"event\" ] = props[ test ][ \"event\" ].toLowerCase();\n        }\n    });\n\n    // If a valid prefix was found then the it is supported by the browser\n    $.support.cssTransitions = ( props[ \"transition\" ][ \"prefix\" ] !== undefined );\n    $.support.cssAnimations = ( props[ \"animation\" ][ \"prefix\" ] !== undefined );\n\n    // Remove the testElement\n    $( testElement ).remove();\n\n    // Animation complete callback\n    $.fn.animationComplete = function( callback, type, fallbackTime ) {\n        var timer, duration,\n            that = this,\n            eventBinding = function() {\n\n                // Clear the timer so we don't call callback twice\n                clearTimeout( timer );\n                callback.apply( this, arguments );\n            },\n            animationType = ( !type || type === \"animation\" ) ? \"animation\" : \"transition\";\n\n        // Make sure selected type is supported by browser\n        if ( ( $.support.cssTransitions && animationType === \"transition\" ) ||\n            ( $.support.cssAnimations && animationType === \"animation\" ) ) {\n\n            // If a fallback time was not passed set one\n            if ( fallbackTime === undefined ) {\n\n                // Make sure the was not bound to document before checking .css\n                if ( $( this ).context !== document ) {\n\n                    // Parse the durration since its in second multiple by 1000 for milliseconds\n                    // Multiply by 3 to make sure we give the animation plenty of time.\n                    duration = parseFloat(\n                        $( this ).css( props[ animationType ].duration )\n                    ) * 3000;\n                }\n\n                // If we could not read a duration use the default\n                if ( duration === 0 || duration === undefined || isNaN( duration ) ) {\n                    duration = $.fn.animationComplete.defaultDuration;\n                }\n            }\n\n            // Sets up the fallback if event never comes\n            timer = setTimeout( function() {\n                $( that ).off( props[ animationType ].event, eventBinding );\n                callback.apply( that );\n            }, duration );\n\n            // Bind the event\n            return $( this ).one( props[ animationType ].event, eventBinding );\n        } else {\n\n            // CSS animation / transitions not supported\n            // Defer execution for consistency between webkit/non webkit\n            setTimeout( $.proxy( callback, this ), 0 );\n            return $( this );\n        }\n    };\n\n    // Allow default callback to be configured on mobileInit\n    $.fn.animationComplete.defaultDuration = 1000;\n})( jQuery );\n\n// This plugin is an experiment for abstracting away the touch and mouse\n// events so that developers don't have to worry about which method of input\n// the device their document is loaded on supports.\n//\n// The idea here is to allow the developer to register listeners for the\n// basic mouse events, such as mousedown, mousemove, mouseup, and click,\n// and the plugin will take care of registering the correct listeners\n// behind the scenes to invoke the listener at the fastest possible time\n// for that device, while still retaining the order of event firing in\n// the traditional mouse environment, should multiple handlers be registered\n// on the same element for different events.\n//\n// The current version exposes the following virtual events to jQuery bind methods:\n// \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\"\n\n(function( $, window, document, undefined ) {\n\nvar dataPropertyName = \"virtualMouseBindings\",\n    touchTargetPropertyName = \"virtualTouchID\",\n    virtualEventNames = \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\".split( \" \" ),\n    touchEventProps = \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\n    mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],\n    mouseEventProps = $.event.props.concat( mouseHookProps ),\n    activeDocHandlers = {},\n    resetTimerID = 0,\n    startX = 0,\n    startY = 0,\n    didScroll = false,\n    clickBlockList = [],\n    blockMouseTriggers = false,\n    blockTouchTriggers = false,\n    eventCaptureSupported = \"addEventListener\" in document,\n    $document = $( document ),\n    nextTouchID = 1,\n    lastTouchID = 0, threshold,\n    i;\n\n$.vmouse = {\n    moveDistanceThreshold: 10,\n    clickDistanceThreshold: 10,\n    resetTimerDuration: 1500\n};\n\nfunction getNativeEvent( event ) {\n\n    while ( event && typeof event.originalEvent !== \"undefined\" ) {\n        event = event.originalEvent;\n    }\n    return event;\n}\n\nfunction createVirtualEvent( event, eventType ) {\n\n    var t = event.type,\n        oe, props, ne, prop, ct, touch, i, j, len;\n\n    event = $.Event( event );\n    event.type = eventType;\n\n    oe = event.originalEvent;\n    props = $.event.props;\n\n    // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280\n    // https://github.com/jquery/jquery-mobile/issues/3280\n    if ( t.search( /^(mouse|click)/ ) > -1 ) {\n        props = mouseEventProps;\n    }\n\n    // copy original event properties over to the new event\n    // this would happen if we could call $.event.fix instead of $.Event\n    // but we don't have a way to force an event to be fixed multiple times\n    if ( oe ) {\n        for ( i = props.length, prop; i; ) {\n            prop = props[ --i ];\n            event[ prop ] = oe[ prop ];\n        }\n    }\n\n    // make sure that if the mouse and click virtual events are generated\n    // without a .which one is defined\n    if ( t.search(/mouse(down|up)|click/) > -1 && !event.which ) {\n        event.which = 1;\n    }\n\n    if ( t.search(/^touch/) !== -1 ) {\n        ne = getNativeEvent( oe );\n        t = ne.touches;\n        ct = ne.changedTouches;\n        touch = ( t && t.length ) ? t[0] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );\n\n        if ( touch ) {\n            for ( j = 0, len = touchEventProps.length; j < len; j++) {\n                prop = touchEventProps[ j ];\n                event[ prop ] = touch[ prop ];\n            }\n        }\n    }\n\n    return event;\n}\n\nfunction getVirtualBindingFlags( element ) {\n\n    var flags = {},\n        b, k;\n\n    while ( element ) {\n\n        b = $.data( element, dataPropertyName );\n\n        for (  k in b ) {\n            if ( b[ k ] ) {\n                flags[ k ] = flags.hasVirtualBinding = true;\n            }\n        }\n        element = element.parentNode;\n    }\n    return flags;\n}\n\nfunction getClosestElementWithVirtualBinding( element, eventType ) {\n    var b;\n    while ( element ) {\n\n        b = $.data( element, dataPropertyName );\n\n        if ( b && ( !eventType || b[ eventType ] ) ) {\n            return element;\n        }\n        element = element.parentNode;\n    }\n    return null;\n}\n\nfunction enableTouchBindings() {\n    blockTouchTriggers = false;\n}\n\nfunction disableTouchBindings() {\n    blockTouchTriggers = true;\n}\n\nfunction enableMouseBindings() {\n    lastTouchID = 0;\n    clickBlockList.length = 0;\n    blockMouseTriggers = false;\n\n    // When mouse bindings are enabled, our\n    // touch bindings are disabled.\n    disableTouchBindings();\n}\n\nfunction disableMouseBindings() {\n    // When mouse bindings are disabled, our\n    // touch bindings are enabled.\n    enableTouchBindings();\n}\n\nfunction startResetTimer() {\n    clearResetTimer();\n    resetTimerID = setTimeout( function() {\n        resetTimerID = 0;\n        enableMouseBindings();\n    }, $.vmouse.resetTimerDuration );\n}\n\nfunction clearResetTimer() {\n    if ( resetTimerID ) {\n        clearTimeout( resetTimerID );\n        resetTimerID = 0;\n    }\n}\n\nfunction triggerVirtualEvent( eventType, event, flags ) {\n    var ve;\n\n    if ( ( flags && flags[ eventType ] ) ||\n                ( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {\n\n        ve = createVirtualEvent( event, eventType );\n\n        $( event.target).trigger( ve );\n    }\n\n    return ve;\n}\n\nfunction mouseEventCallback( event ) {\n    var touchID = $.data( event.target, touchTargetPropertyName ),\n        ve;\n\n    if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {\n        ve = triggerVirtualEvent( \"v\" + event.type, event );\n        if ( ve ) {\n            if ( ve.isDefaultPrevented() ) {\n                event.preventDefault();\n            }\n            if ( ve.isPropagationStopped() ) {\n                event.stopPropagation();\n            }\n            if ( ve.isImmediatePropagationStopped() ) {\n                event.stopImmediatePropagation();\n            }\n        }\n    }\n}\n\nfunction handleTouchStart( event ) {\n\n    var touches = getNativeEvent( event ).touches,\n        target, flags, t;\n\n    if ( touches && touches.length === 1 ) {\n\n        target = event.target;\n        flags = getVirtualBindingFlags( target );\n\n        if ( flags.hasVirtualBinding ) {\n\n            lastTouchID = nextTouchID++;\n            $.data( target, touchTargetPropertyName, lastTouchID );\n\n            clearResetTimer();\n\n            disableMouseBindings();\n            didScroll = false;\n\n            t = getNativeEvent( event ).touches[ 0 ];\n            startX = t.pageX;\n            startY = t.pageY;\n\n            triggerVirtualEvent( \"vmouseover\", event, flags );\n            triggerVirtualEvent( \"vmousedown\", event, flags );\n        }\n    }\n}\n\nfunction handleScroll( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    if ( !didScroll ) {\n        triggerVirtualEvent( \"vmousecancel\", event, getVirtualBindingFlags( event.target ) );\n    }\n\n    didScroll = true;\n    startResetTimer();\n}\n\nfunction handleTouchMove( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    var t = getNativeEvent( event ).touches[ 0 ],\n        didCancel = didScroll,\n        moveThreshold = $.vmouse.moveDistanceThreshold,\n        flags = getVirtualBindingFlags( event.target );\n\n        didScroll = didScroll ||\n            ( Math.abs( t.pageX - startX ) > moveThreshold ||\n                Math.abs( t.pageY - startY ) > moveThreshold );\n\n    if ( didScroll && !didCancel ) {\n        triggerVirtualEvent( \"vmousecancel\", event, flags );\n    }\n\n    triggerVirtualEvent( \"vmousemove\", event, flags );\n    startResetTimer();\n}\n\nfunction handleTouchEnd( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    disableTouchBindings();\n\n    var flags = getVirtualBindingFlags( event.target ),\n        ve, t;\n    triggerVirtualEvent( \"vmouseup\", event, flags );\n\n    if ( !didScroll ) {\n        ve = triggerVirtualEvent( \"vclick\", event, flags );\n        if ( ve && ve.isDefaultPrevented() ) {\n            // The target of the mouse events that follow the touchend\n            // event don't necessarily match the target used during the\n            // touch. This means we need to rely on coordinates for blocking\n            // any click that is generated.\n            t = getNativeEvent( event ).changedTouches[ 0 ];\n            clickBlockList.push({\n                touchID: lastTouchID,\n                x: t.clientX,\n                y: t.clientY\n            });\n\n            // Prevent any mouse events that follow from triggering\n            // virtual event notifications.\n            blockMouseTriggers = true;\n        }\n    }\n    triggerVirtualEvent( \"vmouseout\", event, flags);\n    didScroll = false;\n\n    startResetTimer();\n}\n\nfunction hasVirtualBindings( ele ) {\n    var bindings = $.data( ele, dataPropertyName ),\n        k;\n\n    if ( bindings ) {\n        for ( k in bindings ) {\n            if ( bindings[ k ] ) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nfunction dummyMouseHandler() {}\n\nfunction getSpecialEventObject( eventType ) {\n    var realType = eventType.substr( 1 );\n\n    return {\n        setup: function(/* data, namespace */) {\n            // If this is the first virtual mouse binding for this element,\n            // add a bindings object to its data.\n\n            if ( !hasVirtualBindings( this ) ) {\n                $.data( this, dataPropertyName, {} );\n            }\n\n            // If setup is called, we know it is the first binding for this\n            // eventType, so initialize the count for the eventType to zero.\n            var bindings = $.data( this, dataPropertyName );\n            bindings[ eventType ] = true;\n\n            // If this is the first virtual mouse event for this type,\n            // register a global handler on the document.\n\n            activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;\n\n            if ( activeDocHandlers[ eventType ] === 1 ) {\n                $document.bind( realType, mouseEventCallback );\n            }\n\n            // Some browsers, like Opera Mini, won't dispatch mouse/click events\n            // for elements unless they actually have handlers registered on them.\n            // To get around this, we register dummy handlers on the elements.\n\n            $( this ).bind( realType, dummyMouseHandler );\n\n            // For now, if event capture is not supported, we rely on mouse handlers.\n            if ( eventCaptureSupported ) {\n                // If this is the first virtual mouse binding for the document,\n                // register our touchstart handler on the document.\n\n                activeDocHandlers[ \"touchstart\" ] = ( activeDocHandlers[ \"touchstart\" ] || 0) + 1;\n\n                if ( activeDocHandlers[ \"touchstart\" ] === 1 ) {\n                    $document.bind( \"touchstart\", handleTouchStart )\n                        .bind( \"touchend\", handleTouchEnd )\n\n                        // On touch platforms, touching the screen and then dragging your finger\n                        // causes the window content to scroll after some distance threshold is\n                        // exceeded. On these platforms, a scroll prevents a click event from being\n                        // dispatched, and on some platforms, even the touchend is suppressed. To\n                        // mimic the suppression of the click event, we need to watch for a scroll\n                        // event. Unfortunately, some platforms like iOS don't dispatch scroll\n                        // events until *AFTER* the user lifts their finger (touchend). This means\n                        // we need to watch both scroll and touchmove events to figure out whether\n                        // or not a scroll happenens before the touchend event is fired.\n\n                        .bind( \"touchmove\", handleTouchMove )\n                        .bind( \"scroll\", handleScroll );\n                }\n            }\n        },\n\n        teardown: function(/* data, namespace */) {\n            // If this is the last virtual binding for this eventType,\n            // remove its global handler from the document.\n\n            --activeDocHandlers[ eventType ];\n\n            if ( !activeDocHandlers[ eventType ] ) {\n                $document.unbind( realType, mouseEventCallback );\n            }\n\n            if ( eventCaptureSupported ) {\n                // If this is the last virtual mouse binding in existence,\n                // remove our document touchstart listener.\n\n                --activeDocHandlers[ \"touchstart\" ];\n\n                if ( !activeDocHandlers[ \"touchstart\" ] ) {\n                    $document.unbind( \"touchstart\", handleTouchStart )\n                        .unbind( \"touchmove\", handleTouchMove )\n                        .unbind( \"touchend\", handleTouchEnd )\n                        .unbind( \"scroll\", handleScroll );\n                }\n            }\n\n            var $this = $( this ),\n                bindings = $.data( this, dataPropertyName );\n\n            // teardown may be called when an element was\n            // removed from the DOM. If this is the case,\n            // jQuery core may have already stripped the element\n            // of any data bindings so we need to check it before\n            // using it.\n            if ( bindings ) {\n                bindings[ eventType ] = false;\n            }\n\n            // Unregister the dummy event handler.\n\n            $this.unbind( realType, dummyMouseHandler );\n\n            // If this is the last virtual mouse binding on the\n            // element, remove the binding data from the element.\n\n            if ( !hasVirtualBindings( this ) ) {\n                $this.removeData( dataPropertyName );\n            }\n        }\n    };\n}\n\n// Expose our custom events to the jQuery bind/unbind mechanism.\n\nfor ( i = 0; i < virtualEventNames.length; i++ ) {\n    $.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );\n}\n\n// Add a capture click handler to block clicks.\n// Note that we require event capture support for this so if the device\n// doesn't support it, we punt for now and rely solely on mouse events.\nif ( eventCaptureSupported ) {\n    document.addEventListener( \"click\", function( e ) {\n        var cnt = clickBlockList.length,\n            target = e.target,\n            x, y, ele, i, o, touchID;\n\n        if ( cnt ) {\n            x = e.clientX;\n            y = e.clientY;\n            threshold = $.vmouse.clickDistanceThreshold;\n\n            // The idea here is to run through the clickBlockList to see if\n            // the current click event is in the proximity of one of our\n            // vclick events that had preventDefault() called on it. If we find\n            // one, then we block the click.\n            //\n            // Why do we have to rely on proximity?\n            //\n            // Because the target of the touch event that triggered the vclick\n            // can be different from the target of the click event synthesized\n            // by the browser. The target of a mouse/click event that is synthesized\n            // from a touch event seems to be implementation specific. For example,\n            // some browsers will fire mouse/click events for a link that is near\n            // a touch event, even though the target of the touchstart/touchend event\n            // says the user touched outside the link. Also, it seems that with most\n            // browsers, the target of the mouse/click event is not calculated until the\n            // time it is dispatched, so if you replace an element that you touched\n            // with another element, the target of the mouse/click will be the new\n            // element underneath that point.\n            //\n            // Aside from proximity, we also check to see if the target and any\n            // of its ancestors were the ones that blocked a click. This is necessary\n            // because of the strange mouse/click target calculation done in the\n            // Android 2.1 browser, where if you click on an element, and there is a\n            // mouse/click handler on one of its ancestors, the target will be the\n            // innermost child of the touched element, even if that child is no where\n            // near the point of touch.\n\n            ele = target;\n\n            while ( ele ) {\n                for ( i = 0; i < cnt; i++ ) {\n                    o = clickBlockList[ i ];\n                    touchID = 0;\n\n                    if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||\n                                $.data( ele, touchTargetPropertyName ) === o.touchID ) {\n                        // XXX: We may want to consider removing matches from the block list\n                        //      instead of waiting for the reset timer to fire.\n                        e.preventDefault();\n                        e.stopPropagation();\n                        return;\n                    }\n                }\n                ele = ele.parentNode;\n            }\n        }\n    }, true);\n}\n})( jQuery, window, document );\n\n\n(function( $, window, undefined ) {\n    var $document = $( document ),\n        supportTouch = $.mobile.support.touch,\n        scrollEvent = \"touchmove scroll\",\n        touchStartEvent = supportTouch ? \"touchstart\" : \"mousedown\",\n        touchStopEvent = supportTouch ? \"touchend\" : \"mouseup\",\n        touchMoveEvent = supportTouch ? \"touchmove\" : \"mousemove\";\n\n    // setup new event shortcuts\n    $.each( ( \"touchstart touchmove touchend \" +\n        \"tap taphold \" +\n        \"swipe swipeleft swiperight \" +\n        \"scrollstart scrollstop\" ).split( \" \" ), function( i, name ) {\n\n        $.fn[ name ] = function( fn ) {\n            return fn ? this.bind( name, fn ) : this.trigger( name );\n        };\n\n        // jQuery < 1.8\n        if ( $.attrFn ) {\n            $.attrFn[ name ] = true;\n        }\n    });\n\n    function triggerCustomEvent( obj, eventType, event, bubble ) {\n        var originalType = event.type;\n        event.type = eventType;\n        if ( bubble ) {\n            $.event.trigger( event, undefined, obj );\n        } else {\n            $.event.dispatch.call( obj, event );\n        }\n        event.type = originalType;\n    }\n\n    // also handles scrollstop\n    $.event.special.scrollstart = {\n\n        enabled: true,\n        setup: function() {\n\n            var thisObject = this,\n                $this = $( thisObject ),\n                scrolling,\n                timer;\n\n            function trigger( event, state ) {\n                scrolling = state;\n                triggerCustomEvent( thisObject, scrolling ? \"scrollstart\" : \"scrollstop\", event );\n            }\n\n            // iPhone triggers scroll after a small delay; use touchmove instead\n            $this.bind( scrollEvent, function( event ) {\n\n                if ( !$.event.special.scrollstart.enabled ) {\n                    return;\n                }\n\n                if ( !scrolling ) {\n                    trigger( event, true );\n                }\n\n                clearTimeout( timer );\n                timer = setTimeout( function() {\n                    trigger( event, false );\n                }, 50 );\n            });\n        },\n        teardown: function() {\n            $( this ).unbind( scrollEvent );\n        }\n    };\n\n    // also handles taphold\n    $.event.special.tap = {\n        tapholdThreshold: 750,\n        emitTapOnTaphold: true,\n        setup: function() {\n            var thisObject = this,\n                $this = $( thisObject ),\n                isTaphold = false;\n\n            $this.bind( \"vmousedown\", function( event ) {\n                isTaphold = false;\n                if ( event.which && event.which !== 1 ) {\n                    return false;\n                }\n\n                var origTarget = event.target,\n                    timer;\n\n                function clearTapTimer() {\n                    clearTimeout( timer );\n                }\n\n                function clearTapHandlers() {\n                    clearTapTimer();\n\n                    $this.unbind( \"vclick\", clickHandler )\n                        .unbind( \"vmouseup\", clearTapTimer );\n                    $document.unbind( \"vmousecancel\", clearTapHandlers );\n                }\n\n                function clickHandler( event ) {\n                    clearTapHandlers();\n\n                    // ONLY trigger a 'tap' event if the start target is\n                    // the same as the stop target.\n                    if ( !isTaphold && origTarget === event.target ) {\n                        triggerCustomEvent( thisObject, \"tap\", event );\n                    } else if ( isTaphold ) {\n                        event.preventDefault();\n                    }\n                }\n\n                $this.bind( \"vmouseup\", clearTapTimer )\n                    .bind( \"vclick\", clickHandler );\n                $document.bind( \"vmousecancel\", clearTapHandlers );\n\n                timer = setTimeout( function() {\n                    if ( !$.event.special.tap.emitTapOnTaphold ) {\n                        isTaphold = true;\n                    }\n                    triggerCustomEvent( thisObject, \"taphold\", $.Event( \"taphold\", { target: origTarget } ) );\n                }, $.event.special.tap.tapholdThreshold );\n            });\n        },\n        teardown: function() {\n            $( this ).unbind( \"vmousedown\" ).unbind( \"vclick\" ).unbind( \"vmouseup\" );\n            $document.unbind( \"vmousecancel\" );\n        }\n    };\n\n    // Also handles swipeleft, swiperight\n    $.event.special.swipe = {\n\n        // More than this horizontal displacement, and we will suppress scrolling.\n        scrollSupressionThreshold: 30,\n\n        // More time than this, and it isn't a swipe.\n        durationThreshold: 1000,\n\n        // Swipe horizontal displacement must be more than this.\n        horizontalDistanceThreshold: 30,\n\n        // Swipe vertical displacement must be less than this.\n        verticalDistanceThreshold: 30,\n\n        getLocation: function ( event ) {\n            var winPageX = window.pageXOffset,\n                winPageY = window.pageYOffset,\n                x = event.clientX,\n                y = event.clientY;\n\n            if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||\n                event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {\n\n                // iOS4 clientX/clientY have the value that should have been\n                // in pageX/pageY. While pageX/page/ have the value 0\n                x = x - winPageX;\n                y = y - winPageY;\n            } else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {\n\n                // Some Android browsers have totally bogus values for clientX/Y\n                // when scrolling/zooming a page. Detectable since clientX/clientY\n                // should never be smaller than pageX/pageY minus page scroll\n                x = event.pageX - winPageX;\n                y = event.pageY - winPageY;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        },\n\n        start: function( event ) {\n            var data = event.originalEvent.touches ?\n                    event.originalEvent.touches[ 0 ] : event,\n                location = $.event.special.swipe.getLocation( data );\n            return {\n                        time: ( new Date() ).getTime(),\n                        coords: [ location.x, location.y ],\n                        origin: $( event.target )\n                    };\n        },\n\n        stop: function( event ) {\n            var data = event.originalEvent.touches ?\n                    event.originalEvent.touches[ 0 ] : event,\n                location = $.event.special.swipe.getLocation( data );\n            return {\n                        time: ( new Date() ).getTime(),\n                        coords: [ location.x, location.y ]\n                    };\n        },\n\n        handleSwipe: function( start, stop, thisObject, origTarget ) {\n            if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&\n                Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&\n                Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {\n                var direction = start.coords[0] > stop.coords[ 0 ] ? \"swipeleft\" : \"swiperight\";\n\n                triggerCustomEvent( thisObject, \"swipe\", $.Event( \"swipe\", { target: origTarget, swipestart: start, swipestop: stop }), true );\n                triggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );\n                return true;\n            }\n            return false;\n\n        },\n\n        // This serves as a flag to ensure that at most one swipe event event is\n        // in work at any given time\n        eventInProgress: false,\n\n        setup: function() {\n            var events,\n                thisObject = this,\n                $this = $( thisObject ),\n                context = {};\n\n            // Retrieve the events data for this element and add the swipe context\n            events = $.data( this, \"mobile-events\" );\n            if ( !events ) {\n                events = { length: 0 };\n                $.data( this, \"mobile-events\", events );\n            }\n            events.length++;\n            events.swipe = context;\n\n            context.start = function( event ) {\n\n                // Bail if we're already working on a swipe event\n                if ( $.event.special.swipe.eventInProgress ) {\n                    return;\n                }\n                $.event.special.swipe.eventInProgress = true;\n\n                var stop,\n                    start = $.event.special.swipe.start( event ),\n                    origTarget = event.target,\n                    emitted = false;\n\n                context.move = function( event ) {\n                    if ( !start || event.isDefaultPrevented() ) {\n                        return;\n                    }\n\n                    stop = $.event.special.swipe.stop( event );\n                    if ( !emitted ) {\n                        emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );\n                        if ( emitted ) {\n\n                            // Reset the context to make way for the next swipe event\n                            $.event.special.swipe.eventInProgress = false;\n                        }\n                    }\n                    // prevent scrolling\n                    if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {\n                        event.preventDefault();\n                    }\n                };\n\n                context.stop = function() {\n                        emitted = true;\n\n                        // Reset the context to make way for the next swipe event\n                        $.event.special.swipe.eventInProgress = false;\n                        $document.off( touchMoveEvent, context.move );\n                        context.move = null;\n                };\n\n                $document.on( touchMoveEvent, context.move )\n                    .one( touchStopEvent, context.stop );\n            };\n            $this.on( touchStartEvent, context.start );\n        },\n\n        teardown: function() {\n            var events, context;\n\n            events = $.data( this, \"mobile-events\" );\n            if ( events ) {\n                context = events.swipe;\n                delete events.swipe;\n                events.length--;\n                if ( events.length === 0 ) {\n                    $.removeData( this, \"mobile-events\" );\n                }\n            }\n\n            if ( context ) {\n                if ( context.start ) {\n                    $( this ).off( touchStartEvent, context.start );\n                }\n                if ( context.move ) {\n                    $document.off( touchMoveEvent, context.move );\n                }\n                if ( context.stop ) {\n                    $document.off( touchStopEvent, context.stop );\n                }\n            }\n        }\n    };\n    $.each({\n        scrollstop: \"scrollstart\",\n        taphold: \"tap\",\n        swipeleft: \"swipe.left\",\n        swiperight: \"swipe.right\"\n    }, function( event, sourceEvent ) {\n\n        $.event.special[ event ] = {\n            setup: function() {\n                $( this ).bind( sourceEvent, $.noop );\n            },\n            teardown: function() {\n                $( this ).unbind( sourceEvent );\n            }\n        };\n    });\n\n})( jQuery, this );\n\n\n    // throttled resize event\n    (function( $ ) {\n        $.event.special.throttledresize = {\n            setup: function() {\n                $( this ).bind( \"resize\", handler );\n            },\n            teardown: function() {\n                $( this ).unbind( \"resize\", handler );\n            }\n        };\n\n        var throttle = 250,\n            handler = function() {\n                curr = ( new Date() ).getTime();\n                diff = curr - lastCall;\n\n                if ( diff >= throttle ) {\n\n                    lastCall = curr;\n                    $( this ).trigger( \"throttledresize\" );\n\n                } else {\n\n                    if ( heldCall ) {\n                        clearTimeout( heldCall );\n                    }\n\n                    // Promise a held call will still execute\n                    heldCall = setTimeout( handler, throttle - diff );\n                }\n            },\n            lastCall = 0,\n            heldCall,\n            curr,\n            diff;\n    })( jQuery );\n\n\n(function( $, window ) {\n    var win = $( window ),\n        event_name = \"orientationchange\",\n        get_orientation,\n        last_orientation,\n        initial_orientation_is_landscape,\n        initial_orientation_is_default,\n        portrait_map = { \"0\": true, \"180\": true },\n        ww, wh, landscape_threshold;\n\n    // It seems that some device/browser vendors use window.orientation values 0 and 180 to\n    // denote the \"default\" orientation. For iOS devices, and most other smart-phones tested,\n    // the default orientation is always \"portrait\", but in some Android and RIM based tablets,\n    // the default orientation is \"landscape\". The following code attempts to use the window\n    // dimensions to figure out what the current orientation is, and then makes adjustments\n    // to the to the portrait_map if necessary, so that we can properly decode the\n    // window.orientation value whenever get_orientation() is called.\n    //\n    // Note that we used to use a media query to figure out what the orientation the browser\n    // thinks it is in:\n    //\n    //     initial_orientation_is_landscape = $.mobile.media(\"all and (orientation: landscape)\");\n    //\n    // but there was an iPhone/iPod Touch bug beginning with iOS 4.2, up through iOS 5.1,\n    // where the browser *ALWAYS* applied the landscape media query. This bug does not\n    // happen on iPad.\n\n    if ( $.support.orientation ) {\n\n        // Check the window width and height to figure out what the current orientation\n        // of the device is at this moment. Note that we've initialized the portrait map\n        // values to 0 and 180, *AND* we purposely check for landscape so that if we guess\n        // wrong, , we default to the assumption that portrait is the default orientation.\n        // We use a threshold check below because on some platforms like iOS, the iPhone\n        // form-factor can report a larger width than height if the user turns on the\n        // developer console. The actual threshold value is somewhat arbitrary, we just\n        // need to make sure it is large enough to exclude the developer console case.\n\n        ww = window.innerWidth || win.width();\n        wh = window.innerHeight || win.height();\n        landscape_threshold = 50;\n\n        initial_orientation_is_landscape = ww > wh && ( ww - wh ) > landscape_threshold;\n\n        // Now check to see if the current window.orientation is 0 or 180.\n        initial_orientation_is_default = portrait_map[ window.orientation ];\n\n        // If the initial orientation is landscape, but window.orientation reports 0 or 180, *OR*\n        // if the initial orientation is portrait, but window.orientation reports 90 or -90, we\n        // need to flip our portrait_map values because landscape is the default orientation for\n        // this device/browser.\n        if ( ( initial_orientation_is_landscape && initial_orientation_is_default ) || ( !initial_orientation_is_landscape && !initial_orientation_is_default ) ) {\n            portrait_map = { \"-90\": true, \"90\": true };\n        }\n    }\n\n    $.event.special.orientationchange = $.extend( {}, $.event.special.orientationchange, {\n        setup: function() {\n            // If the event is supported natively, return false so that jQuery\n            // will bind to the event using DOM methods.\n            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {\n                return false;\n            }\n\n            // Get the current orientation to avoid initial double-triggering.\n            last_orientation = get_orientation();\n\n            // Because the orientationchange event doesn't exist, simulate the\n            // event by testing window dimensions on resize.\n            win.bind( \"throttledresize\", handler );\n        },\n        teardown: function() {\n            // If the event is not supported natively, return false so that\n            // jQuery will unbind the event using DOM methods.\n            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {\n                return false;\n            }\n\n            // Because the orientationchange event doesn't exist, unbind the\n            // resize event handler.\n            win.unbind( \"throttledresize\", handler );\n        },\n        add: function( handleObj ) {\n            // Save a reference to the bound event handler.\n            var old_handler = handleObj.handler;\n\n            handleObj.handler = function( event ) {\n                // Modify event object, adding the .orientation property.\n                event.orientation = get_orientation();\n\n                // Call the originally-bound event handler and return its result.\n                return old_handler.apply( this, arguments );\n            };\n        }\n    });\n\n    // If the event is not supported natively, this handler will be bound to\n    // the window resize event to simulate the orientationchange event.\n    function handler() {\n        // Get the current orientation.\n        var orientation = get_orientation();\n\n        if ( orientation !== last_orientation ) {\n            // The orientation has changed, so trigger the orientationchange event.\n            last_orientation = orientation;\n            win.trigger( event_name );\n        }\n    }\n\n    // Get the current page orientation. This method is exposed publicly, should it\n    // be needed, as jQuery.event.special.orientationchange.orientation()\n    $.event.special.orientationchange.orientation = get_orientation = function() {\n        var isPortrait = true, elem = document.documentElement;\n\n        // prefer window orientation to the calculation based on screensize as\n        // the actual screen resize takes place before or after the orientation change event\n        // has been fired depending on implementation (eg android 2.3 is before, iphone after).\n        // More testing is required to determine if a more reliable method of determining the new screensize\n        // is possible when orientationchange is fired. (eg, use media queries + element + opacity)\n        if ( $.support.orientation ) {\n            // if the window orientation registers as 0 or 180 degrees report\n            // portrait, otherwise landscape\n            isPortrait = portrait_map[ window.orientation ];\n        } else {\n            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;\n        }\n\n        return isPortrait ? \"portrait\" : \"landscape\";\n    };\n\n    $.fn[ event_name ] = function( fn ) {\n        return fn ? this.bind( event_name, fn ) : this.trigger( event_name );\n    };\n\n    // jQuery < 1.8\n    if ( $.attrFn ) {\n        $.attrFn[ event_name ] = true;\n    }\n\n}( jQuery, this ));\n\n\n\n\n(function( $, undefined ) {\n\n    // existing base tag?\n    var baseElement = $( \"head\" ).children( \"base\" ),\n\n    // base element management, defined depending on dynamic base tag support\n    // TODO move to external widget\n    base = {\n\n        // define base element, for use in routing asset urls that are referenced\n        // in Ajax-requested markup\n        element: ( baseElement.length ? baseElement :\n            $( \"<base>\", { href: $.mobile.path.documentBase.hrefNoHash } ).prependTo( $( \"head\" ) ) ),\n\n        linkSelector: \"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]\",\n\n        // set the generated BASE element's href to a new page's base path\n        set: function( href ) {\n\n            // we should do nothing if the user wants to manage their url base\n            // manually\n            if ( !$.mobile.dynamicBaseEnabled ) {\n                return;\n            }\n\n            // we should use the base tag if we can manipulate it dynamically\n            if ( $.support.dynamicBaseTag ) {\n                base.element.attr( \"href\",\n                    $.mobile.path.makeUrlAbsolute( href, $.mobile.path.documentBase ) );\n            }\n        },\n\n        rewrite: function( href, page ) {\n            var newPath = $.mobile.path.get( href );\n\n            page.find( base.linkSelector ).each(function( i, link ) {\n                var thisAttr = $( link ).is( \"[href]\" ) ? \"href\" :\n                    $( link ).is( \"[src]\" ) ? \"src\" : \"action\",\n                theLocation = $.mobile.path.parseLocation(),\n                thisUrl = $( link ).attr( thisAttr );\n\n                // XXX_jblas: We need to fix this so that it removes the document\n                //            base URL, and then prepends with the new page URL.\n                // if full path exists and is same, chop it - helps IE out\n                thisUrl = thisUrl.replace( theLocation.protocol + theLocation.doubleSlash +\n                    theLocation.host + theLocation.pathname, \"\" );\n\n                if ( !/^(\\w+:|#|\\/)/.test( thisUrl ) ) {\n                    $( link ).attr( thisAttr, newPath + thisUrl );\n                }\n            });\n        },\n\n        // set the generated BASE element's href to a new page's base path\n        reset: function(/* href */) {\n            base.element.attr( \"href\", $.mobile.path.documentBase.hrefNoSearch );\n        }\n    };\n\n    $.mobile.base = base;\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n$.mobile.widgets = {};\n\nvar originalWidget = $.widget,\n\n    // Record the original, non-mobileinit-modified version of $.mobile.keepNative\n    // so we can later determine whether someone has modified $.mobile.keepNative\n    keepNativeFactoryDefault = $.mobile.keepNative;\n\n$.widget = (function( orig ) {\n    return function() {\n        var constructor = orig.apply( this, arguments ),\n            name = constructor.prototype.widgetName;\n\n        constructor.initSelector = ( ( constructor.prototype.initSelector !== undefined ) ?\n            constructor.prototype.initSelector : \":jqmData(role='\" + name + \"')\" );\n\n        $.mobile.widgets[ name ] = constructor;\n\n        return constructor;\n    };\n})( $.widget );\n\n// Make sure $.widget still has bridge and extend methods\n$.extend( $.widget, originalWidget );\n\n// For backcompat remove in 1.5\n$.mobile.document.on( \"create\", function( event ) {\n    $( event.target ).enhanceWithin();\n});\n\n$.widget( \"mobile.page\", {\n    options: {\n        theme: \"a\",\n        domCache: false,\n\n        // Deprecated in 1.4 remove in 1.5\n        keepNativeDefault: $.mobile.keepNative,\n\n        // Deprecated in 1.4 remove in 1.5\n        contentTheme: null,\n        enhanced: false\n    },\n\n    // DEPRECATED for > 1.4\n    // TODO remove at 1.5\n    _createWidget: function() {\n        $.Widget.prototype._createWidget.apply( this, arguments );\n        this._trigger( \"init\" );\n    },\n\n    _create: function() {\n        // If false is returned by the callbacks do not create the page\n        if ( this._trigger( \"beforecreate\" ) === false ) {\n            return false;\n        }\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( this.element, {\n            pagebeforehide: \"removeContainerBackground\",\n            pagebeforeshow: \"_handlePageBeforeShow\"\n        });\n\n        this.element.enhanceWithin();\n        // Dialog widget is deprecated in 1.4 remove this in 1.5\n        if ( $.mobile.getAttribute( this.element[0], \"role\" ) === \"dialog\" && $.mobile.dialog ) {\n            this.element.dialog();\n        }\n    },\n\n    _enhance: function () {\n        var attrPrefix = \"data-\" + $.mobile.ns,\n            self = this;\n\n        if ( this.options.role ) {\n            this.element.attr( \"data-\" + $.mobile.ns + \"role\", this.options.role );\n        }\n\n        this.element\n            .attr( \"tabindex\", \"0\" )\n            .addClass( \"ui-page ui-page-theme-\" + this.options.theme );\n\n        // Manipulation of content os Deprecated as of 1.4 remove in 1.5\n        this.element.find( \"[\" + attrPrefix + \"role='content']\" ).each( function() {\n            var $this = $( this ),\n                theme = this.getAttribute( attrPrefix + \"theme\" ) || undefined;\n                self.options.contentTheme = theme || self.options.contentTheme || ( self.options.dialog && self.options.theme ) || ( self.element.jqmData(\"role\") === \"dialog\" &&  self.options.theme );\n                $this.addClass( \"ui-content\" );\n                if ( self.options.contentTheme ) {\n                    $this.addClass( \"ui-body-\" + ( self.options.contentTheme ) );\n                }\n                // Add ARIA role\n                $this.attr( \"role\", \"main\" ).addClass( \"ui-content\" );\n        });\n    },\n\n    bindRemove: function( callback ) {\n        var page = this.element;\n\n        // when dom caching is not enabled or the page is embedded bind to remove the page on hide\n        if ( !page.data( \"mobile-page\" ).options.domCache &&\n            page.is( \":jqmData(external-page='true')\" ) ) {\n\n            // TODO use _on - that is, sort out why it doesn't work in this case\n            page.bind( \"pagehide.remove\", callback || function( e, data ) {\n\n                //check if this is a same page transition and if so don't remove the page\n                if( !data.samePage ){\n                    var $this = $( this ),\n                        prEvent = new $.Event( \"pageremove\" );\n\n                    $this.trigger( prEvent );\n\n                    if ( !prEvent.isDefaultPrevented() ) {\n                        $this.removeWithDependents();\n                    }\n                }\n            });\n        }\n    },\n\n    _setOptions: function( o ) {\n        if ( o.theme !== undefined ) {\n            this.element.removeClass( \"ui-page-theme-\" + this.options.theme ).addClass( \"ui-page-theme-\" + o.theme );\n        }\n\n        if ( o.contentTheme !== undefined ) {\n            this.element.find( \"[data-\" + $.mobile.ns + \"='content']\" ).removeClass( \"ui-body-\" + this.options.contentTheme )\n                .addClass( \"ui-body-\" + o.contentTheme );\n        }\n    },\n\n    _handlePageBeforeShow: function(/* e */) {\n        this.setContainerBackground();\n    },\n    // Deprecated in 1.4 remove in 1.5\n    removeContainerBackground: function() {\n        this.element.closest( \":mobile-pagecontainer\" ).pagecontainer({ \"theme\": \"none\" });\n    },\n    // Deprecated in 1.4 remove in 1.5\n    // set the page container background to the page theme\n    setContainerBackground: function( theme ) {\n        this.element.parent().pagecontainer( { \"theme\": theme || this.options.theme } );\n    },\n    // Deprecated in 1.4 remove in 1.5\n    keepNativeSelector: function() {\n        var options = this.options,\n            keepNative = $.trim( options.keepNative || \"\" ),\n            globalValue = $.trim( $.mobile.keepNative ),\n            optionValue = $.trim( options.keepNativeDefault ),\n\n            // Check if $.mobile.keepNative has changed from the factory default\n            newDefault = ( keepNativeFactoryDefault === globalValue ?\n                \"\" : globalValue ),\n\n            // If $.mobile.keepNative has not changed, use options.keepNativeDefault\n            oldDefault = ( newDefault === \"\" ? optionValue : \"\" );\n\n        // Concatenate keepNative selectors from all sources where the value has\n        // changed or, if nothing has changed, return the default\n        return ( ( keepNative ? [ keepNative ] : [] )\n            .concat( newDefault ? [ newDefault ] : [] )\n            .concat( oldDefault ? [ oldDefault ] : [] )\n            .join( \", \" ) );\n    }\n});\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.pagecontainer\", {\n        options: {\n            theme: \"a\"\n        },\n\n        initSelector: false,\n\n        _create: function() {\n            this._trigger( \"beforecreate\" );\n            this.setLastScrollEnabled = true;\n\n            this._on( this.window, {\n                // disable an scroll setting when a hashchange has been fired,\n                // this only works because the recording of the scroll position\n                // is delayed for 100ms after the browser might have changed the\n                // position because of the hashchange\n                navigate: \"_disableRecordScroll\",\n\n                // bind to scrollstop for the first page, \"pagechange\" won't be\n                // fired in that case\n                scrollstop: \"_delayedRecordScroll\"\n            });\n\n            // TODO consider moving the navigation handler OUT of widget into\n            //      some other object as glue between the navigate event and the\n            //      content widget load and change methods\n            this._on( this.window, { navigate: \"_filterNavigateEvents\" });\n\n            // TODO move from page* events to content* events\n            this._on({ pagechange: \"_afterContentChange\" });\n\n            // handle initial hashchange from chrome :(\n            this.window.one( \"navigate\", $.proxy(function() {\n                this.setLastScrollEnabled = true;\n            }, this));\n        },\n\n        _setOptions: function( options ) {\n            if ( options.theme !== undefined && options.theme !== \"none\" ) {\n                this.element.removeClass( \"ui-overlay-\" + this.options.theme )\n                    .addClass( \"ui-overlay-\" + options.theme );\n            } else if ( options.theme !== undefined ) {\n                this.element.removeClass( \"ui-overlay-\" + this.options.theme );\n            }\n\n            this._super( options );\n        },\n\n        _disableRecordScroll: function() {\n            this.setLastScrollEnabled = false;\n        },\n\n        _enableRecordScroll: function() {\n            this.setLastScrollEnabled = true;\n        },\n\n        // TODO consider the name here, since it's purpose specific\n        _afterContentChange: function() {\n            // once the page has changed, re-enable the scroll recording\n            this.setLastScrollEnabled = true;\n\n            // remove any binding that previously existed on the get scroll\n            // which may or may not be different than the scroll element\n            // determined for this page previously\n            this._off( this.window, \"scrollstop\" );\n\n            // determine and bind to the current scoll element which may be the\n            // window or in the case of touch overflow the element touch overflow\n            this._on( this.window, { scrollstop: \"_delayedRecordScroll\" });\n        },\n\n        _recordScroll: function() {\n            // this barrier prevents setting the scroll value based on\n            // the browser scrolling the window based on a hashchange\n            if ( !this.setLastScrollEnabled ) {\n                return;\n            }\n\n            var active = this._getActiveHistory(),\n                currentScroll, minScroll, defaultScroll;\n\n            if ( active ) {\n                currentScroll = this._getScroll();\n                minScroll = this._getMinScroll();\n                defaultScroll = this._getDefaultScroll();\n\n                // Set active page's lastScroll prop. If the location we're\n                // scrolling to is less than minScrollBack, let it go.\n                active.lastScroll = currentScroll < minScroll ? defaultScroll : currentScroll;\n            }\n        },\n\n        _delayedRecordScroll: function() {\n            setTimeout( $.proxy(this, \"_recordScroll\"), 100 );\n        },\n\n        _getScroll: function() {\n            return this.window.scrollTop();\n        },\n\n        _getMinScroll: function() {\n            return $.mobile.minScrollBack;\n        },\n\n        _getDefaultScroll: function() {\n            return $.mobile.defaultHomeScroll;\n        },\n\n        _filterNavigateEvents: function( e, data ) {\n            var url;\n\n            if ( e.originalEvent && e.originalEvent.isDefaultPrevented() ) {\n                return;\n            }\n\n            url = e.originalEvent.type.indexOf( \"hashchange\" ) > -1 ? data.state.hash : data.state.url;\n\n            if ( !url ) {\n                url = this._getHash();\n            }\n\n            if ( !url || url === \"#\" || url.indexOf( \"#\" + $.mobile.path.uiStateKey ) === 0 ) {\n                url = location.href;\n            }\n\n            this._handleNavigate( url, data.state );\n        },\n\n        _getHash: function() {\n            return $.mobile.path.parseLocation().hash;\n        },\n\n        // TODO active page should be managed by the container (ie, it should be a property)\n        getActivePage: function() {\n            return this.activePage;\n        },\n\n        // TODO the first page should be a property set during _create using the logic\n        //      that currently resides in init\n        _getInitialContent: function() {\n            return $.mobile.firstPage;\n        },\n\n        // TODO each content container should have a history object\n        _getHistory: function() {\n            return $.mobile.navigate.history;\n        },\n\n        _getActiveHistory: function() {\n            return this._getHistory().getActive();\n        },\n\n        // TODO the document base should be determined at creation\n        _getDocumentBase: function() {\n            return $.mobile.path.documentBase;\n        },\n\n        back: function() {\n            this.go( -1 );\n        },\n\n        forward: function() {\n            this.go( 1 );\n        },\n\n        go: function( steps ) {\n\n            //if hashlistening is enabled use native history method\n            if ( $.mobile.hashListeningEnabled ) {\n                window.history.go( steps );\n            } else {\n\n                //we are not listening to the hash so handle history internally\n                var activeIndex = $.mobile.navigate.history.activeIndex,\n                    index = activeIndex + parseInt( steps, 10 ),\n                    url = $.mobile.navigate.history.stack[ index ].url,\n                    direction = ( steps >= 1 )? \"forward\" : \"back\";\n\n                //update the history object\n                $.mobile.navigate.history.activeIndex = index;\n                $.mobile.navigate.history.previousIndex = activeIndex;\n\n                //change to the new page\n                this.change( url, { direction: direction, changeHash: false, fromHashChange: true } );\n            }\n        },\n\n        // TODO rename _handleDestination\n        _handleDestination: function( to ) {\n            var history;\n\n            // clean the hash for comparison if it's a url\n            if ( $.type(to) === \"string\" ) {\n                to = $.mobile.path.stripHash( to );\n            }\n\n            if ( to ) {\n                history = this._getHistory();\n\n                // At this point, 'to' can be one of 3 things, a cached page\n                // element from a history stack entry, an id, or site-relative /\n                // absolute URL. If 'to' is an id, we need to resolve it against\n                // the documentBase, not the location.href, since the hashchange\n                // could've been the result of a forward/backward navigation\n                // that crosses from an external page/dialog to an internal\n                // page/dialog.\n                //\n                // TODO move check to history object or path object?\n                to = !$.mobile.path.isPath( to ) ? ( $.mobile.path.makeUrlAbsolute( \"#\" + to, this._getDocumentBase() ) ) : to;\n            }\n            return to || this._getInitialContent();\n        },\n\n        _transitionFromHistory: function( direction, defaultTransition ) {\n            var history = this._getHistory(),\n                entry = ( direction === \"back\" ? history.getLast() : history.getActive() );\n\n            return ( entry && entry.transition ) || defaultTransition;\n        },\n\n        _handleDialog: function( changePageOptions, data ) {\n            var to, active, activeContent = this.getActivePage();\n\n            // If current active page is not a dialog skip the dialog and continue\n            // in the same direction\n            // Note: The dialog widget is deprecated as of 1.4.0 and will be removed in 1.5.0.\n            // Thus, as of 1.5.0 activeContent.data( \"mobile-dialog\" ) will always evaluate to\n            // falsy, so the second condition in the if-statement below can be removed altogether.\n            if ( activeContent && !activeContent.data( \"mobile-dialog\" ) ) {\n                // determine if we're heading forward or backward and continue\n                // accordingly past the current dialog\n                if ( data.direction === \"back\" ) {\n                    this.back();\n                } else {\n                    this.forward();\n                }\n\n                // prevent changePage call\n                return false;\n            } else {\n                // if the current active page is a dialog and we're navigating\n                // to a dialog use the dialog objected saved in the stack\n                to = data.pageUrl;\n                active = this._getActiveHistory();\n\n                // make sure to set the role, transition and reversal\n                // as most of this is lost by the domCache cleaning\n                $.extend( changePageOptions, {\n                    role: active.role,\n                    transition: this._transitionFromHistory(\n                        data.direction,\n                        changePageOptions.transition ),\n                    reverse: data.direction === \"back\"\n                });\n            }\n\n            return to;\n        },\n\n        _handleNavigate: function( url, data ) {\n            //find first page via hash\n            // TODO stripping the hash twice with handleUrl\n            var to = $.mobile.path.stripHash( url ), history = this._getHistory(),\n\n                // transition is false if it's the first page, undefined\n                // otherwise (and may be overridden by default)\n                transition = history.stack.length === 0 ? \"none\" :\n                    this._transitionFromHistory( data.direction ),\n\n                // default options for the changPage calls made after examining\n                // the current state of the page and the hash, NOTE that the\n                // transition is derived from the previous history entry\n                changePageOptions = {\n                    changeHash: false,\n                    fromHashChange: true,\n                    reverse: data.direction === \"back\"\n                };\n\n            $.extend( changePageOptions, data, {\n                transition: transition\n            });\n\n            // TODO move to _handleDestination ?\n            // If this isn't the first page, if the current url is a dialog hash\n            // key, and the initial destination isn't equal to the current target\n            // page, use the special dialog handling\n            if ( history.activeIndex > 0 &&\n                to.indexOf( $.mobile.dialogHashKey ) > -1 ) {\n\n                to = this._handleDialog( changePageOptions, data );\n\n                if ( to === false ) {\n                    return;\n                }\n            }\n\n            this._changeContent( this._handleDestination( to ), changePageOptions );\n        },\n\n        _changeContent: function( to, opts ) {\n            $.mobile.changePage( to, opts );\n        },\n\n        _getBase: function() {\n            return $.mobile.base;\n        },\n\n        _getNs: function() {\n            return $.mobile.ns;\n        },\n\n        _enhance: function( content, role ) {\n            // TODO consider supporting a custom callback, and passing in\n            // the settings which includes the role\n            return content.page({ role: role });\n        },\n\n        _include: function( page, settings ) {\n            // append to page and enhance\n            page.appendTo( this.element );\n\n            // use the page widget to enhance\n            this._enhance( page, settings.role );\n\n            // remove page on hide\n            page.page( \"bindRemove\" );\n        },\n\n        _find: function( absUrl ) {\n            // TODO consider supporting a custom callback\n            var fileUrl = this._createFileUrl( absUrl ),\n                dataUrl = this._createDataUrl( absUrl ),\n                page, initialContent = this._getInitialContent();\n\n            // Check to see if the page already exists in the DOM.\n            // NOTE do _not_ use the :jqmData pseudo selector because parenthesis\n            //      are a valid url char and it breaks on the first occurence\n            page = this.element\n                .children( \"[data-\" + this._getNs() +\n                    \"url='\" + $.mobile.path.hashToSelector( dataUrl ) + \"']\" );\n\n            // If we failed to find the page, check to see if the url is a\n            // reference to an embedded page. If so, it may have been dynamically\n            // injected by a developer, in which case it would be lacking a\n            // data-url attribute and in need of enhancement.\n            if ( page.length === 0 && dataUrl && !$.mobile.path.isPath( dataUrl ) ) {\n                page = this.element.children( $.mobile.path.hashToSelector(\"#\" + dataUrl) )\n                    .attr( \"data-\" + this._getNs() + \"url\", dataUrl )\n                    .jqmData( \"url\", dataUrl );\n            }\n\n            // If we failed to find a page in the DOM, check the URL to see if it\n            // refers to the first page in the application. Also check to make sure\n            // our cached-first-page is actually in the DOM. Some user deployed\n            // apps are pruning the first page from the DOM for various reasons.\n            // We check for this case here because we don't want a first-page with\n            // an id falling through to the non-existent embedded page error case.\n            if ( page.length === 0 &&\n                $.mobile.path.isFirstPageUrl( fileUrl ) &&\n                initialContent &&\n                initialContent.parent().length ) {\n                page = $( initialContent );\n            }\n\n            return page;\n        },\n\n        _getLoader: function() {\n            return $.mobile.loading();\n        },\n\n        _showLoading: function( delay, theme, msg, textonly ) {\n            // This configurable timeout allows cached pages a brief\n            // delay to load without showing a message\n            if ( this._loadMsg ) {\n                return;\n            }\n\n            this._loadMsg = setTimeout($.proxy(function() {\n                this._getLoader().loader( \"show\", theme, msg, textonly );\n                this._loadMsg = 0;\n            }, this), delay );\n        },\n\n        _hideLoading: function() {\n            // Stop message show timer\n            clearTimeout( this._loadMsg );\n            this._loadMsg = 0;\n\n            // Hide loading message\n            this._getLoader().loader( \"hide\" );\n        },\n\n        _showError: function() {\n            // make sure to remove the current loading message\n            this._hideLoading();\n\n            // show the error message\n            this._showLoading( 0, $.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true );\n\n            // hide the error message after a delay\n            // TODO configuration\n            setTimeout( $.proxy(this, \"_hideLoading\"), 1500 );\n        },\n\n        _parse: function( html, fileUrl ) {\n            // TODO consider allowing customization of this method. It's very JQM specific\n            var page, all = $( \"<div></div>\" );\n\n            //workaround to allow scripts to execute when included in page divs\n            all.get( 0 ).innerHTML = html;\n\n            page = all.find( \":jqmData(role='page'), :jqmData(role='dialog')\" ).first();\n\n            //if page elem couldn't be found, create one and insert the body element's contents\n            if ( !page.length ) {\n                page = $( \"<div data-\" + this._getNs() + \"role='page'>\" +\n                    ( html.split( /<\\/?body[^>]*>/gmi )[1] || \"\" ) +\n                    \"</div>\" );\n            }\n\n            // TODO tagging a page with external to make sure that embedded pages aren't\n            // removed by the various page handling code is bad. Having page handling code\n            // in many places is bad. Solutions post 1.0\n            page.attr( \"data-\" + this._getNs() + \"url\", this._createDataUrl( fileUrl ) )\n                .attr( \"data-\" + this._getNs() + \"external-page\", true );\n\n            return page;\n        },\n\n        _setLoadedTitle: function( page, html ) {\n            //page title regexp\n            var newPageTitle = html.match( /<title[^>]*>([^<]*)/ ) && RegExp.$1;\n\n            if ( newPageTitle && !page.jqmData(\"title\") ) {\n                newPageTitle = $( \"<div>\" + newPageTitle + \"</div>\" ).text();\n                page.jqmData( \"title\", newPageTitle );\n            }\n        },\n\n        _isRewritableBaseTag: function() {\n            return $.mobile.dynamicBaseEnabled && !$.support.dynamicBaseTag;\n        },\n\n        _createDataUrl: function( absoluteUrl ) {\n            return $.mobile.path.convertUrlToDataUrl( absoluteUrl );\n        },\n\n        _createFileUrl: function( absoluteUrl ) {\n            return $.mobile.path.getFilePath( absoluteUrl );\n        },\n\n        _triggerWithDeprecated: function( name, data, page ) {\n            var deprecatedEvent = $.Event( \"page\" + name ),\n                newEvent = $.Event( this.widgetName + name );\n\n            // DEPRECATED\n            // trigger the old deprecated event on the page if it's provided\n            ( page || this.element ).trigger( deprecatedEvent, data );\n\n            // use the widget trigger method for the new content* event\n            this._trigger( name, newEvent, data );\n\n            return {\n                deprecatedEvent: deprecatedEvent,\n                event: newEvent\n            };\n        },\n\n        // TODO it would be nice to split this up more but everything appears to be \"one off\"\n        //      or require ordering such that other bits are sprinkled in between parts that\n        //      could be abstracted out as a group\n        _loadSuccess: function( absUrl, triggerData, settings, deferred ) {\n            var fileUrl = this._createFileUrl( absUrl );\n\n            return $.proxy(function( html, textStatus, xhr ) {\n                //pre-parse html to check for a data-url,\n                //use it as the new fileUrl, base path, etc\n                var content,\n\n                    // TODO handle dialogs again\n                    pageElemRegex = new RegExp( \"(<[^>]+\\\\bdata-\" + this._getNs() + \"role=[\\\"']?page[\\\"']?[^>]*>)\" ),\n\n                    dataUrlRegex = new RegExp( \"\\\\bdata-\" + this._getNs() + \"url=[\\\"']?([^\\\"'>]*)[\\\"']?\" );\n\n                // data-url must be provided for the base tag so resource requests\n                // can be directed to the correct url. loading into a temprorary\n                // element makes these requests immediately\n                if ( pageElemRegex.test( html ) &&\n                    RegExp.$1 &&\n                    dataUrlRegex.test( RegExp.$1 ) &&\n                    RegExp.$1 ) {\n                    fileUrl = $.mobile.path.getFilePath( $(\"<div>\" + RegExp.$1 + \"</div>\").text() );\n\n                    // We specify that, if a data-url attribute is given on the page div, its value\n                    // must be given non-URL-encoded. However, in this part of the code, fileUrl is\n                    // assumed to be URL-encoded, so we URL-encode the retrieved value here\n                    fileUrl = this.window[ 0 ].encodeURIComponent( fileUrl );\n                }\n\n                //dont update the base tag if we are prefetching\n                if ( settings.prefetch === undefined ) {\n                    this._getBase().set( fileUrl );\n                }\n\n                content = this._parse( html, fileUrl );\n\n                this._setLoadedTitle( content, html );\n\n                // Add the content reference and xhr to our triggerData.\n                triggerData.xhr = xhr;\n                triggerData.textStatus = textStatus;\n\n                // DEPRECATED\n                triggerData.page = content;\n\n                triggerData.content = content;\n\n                triggerData.toPage = content;\n\n                // If the default behavior is prevented, stop here!\n                // Note that it is the responsibility of the listener/handler\n                // that called preventDefault(), to resolve/reject the\n                // deferred object within the triggerData.\n                if ( this._triggerWithDeprecated( \"load\", triggerData ).event.isDefaultPrevented() ) {\n                    return;\n                }\n\n                // rewrite src and href attrs to use a base url if the base tag won't work\n                if ( this._isRewritableBaseTag() && content ) {\n                    this._getBase().rewrite( fileUrl, content );\n                }\n\n                this._include( content, settings );\n\n                // Remove loading message.\n                if ( settings.showLoadMsg ) {\n                    this._hideLoading();\n                }\n\n                deferred.resolve( absUrl, settings, content );\n            }, this);\n        },\n\n        _loadDefaults: {\n            type: \"get\",\n            data: undefined,\n\n            // DEPRECATED\n            reloadPage: false,\n\n            reload: false,\n\n            // By default we rely on the role defined by the @data-role attribute.\n            role: undefined,\n\n            showLoadMsg: false,\n\n            // This delay allows loads that pull from browser cache to\n            // occur without showing the loading message.\n            loadMsgDelay: 50\n        },\n\n        load: function( url, options ) {\n            // This function uses deferred notifications to let callers\n            // know when the content is done loading, or if an error has occurred.\n            var deferred = ( options && options.deferred ) || $.Deferred(),\n\n                // Examining the option \"reloadPage\" passed by the user is deprecated as of 1.4.0\n                // and will be removed in 1.5.0.\n                // Copy option \"reloadPage\" to \"reload\", but only if option \"reload\" is not present\n                reloadOptionExtension =\n                    ( ( options && options.reload === undefined &&\n                        options.reloadPage !== undefined ) ?\n                            { reload: options.reloadPage } : {} ),\n\n                // The default load options with overrides specified by the caller.\n                settings = $.extend( {}, this._loadDefaults, options, reloadOptionExtension ),\n\n                // The DOM element for the content after it has been loaded.\n                content = null,\n\n                // The absolute version of the URL passed into the function. This\n                // version of the URL may contain dialog/subcontent params in it.\n                absUrl = $.mobile.path.makeUrlAbsolute( url, this._findBaseWithDefault() ),\n                fileUrl, dataUrl, pblEvent, triggerData;\n\n            // If the caller provided data, and we're using \"get\" request,\n            // append the data to the URL.\n            if ( settings.data && settings.type === \"get\" ) {\n                absUrl = $.mobile.path.addSearchParams( absUrl, settings.data );\n                settings.data = undefined;\n            }\n\n            // If the caller is using a \"post\" request, reload must be true\n            if ( settings.data && settings.type === \"post\" ) {\n                settings.reload = true;\n            }\n\n            // The absolute version of the URL minus any dialog/subcontent params.\n            // In otherwords the real URL of the content to be loaded.\n            fileUrl = this._createFileUrl( absUrl );\n\n            // The version of the Url actually stored in the data-url attribute of\n            // the content. For embedded content, it is just the id of the page. For\n            // content within the same domain as the document base, it is the site\n            // relative path. For cross-domain content (Phone Gap only) the entire\n            // absolute Url is used to load the content.\n            dataUrl = this._createDataUrl( absUrl );\n\n            content = this._find( absUrl );\n\n            // If it isn't a reference to the first content and refers to missing\n            // embedded content reject the deferred and return\n            if ( content.length === 0 &&\n                $.mobile.path.isEmbeddedPage(fileUrl) &&\n                !$.mobile.path.isFirstPageUrl(fileUrl) ) {\n                deferred.reject( absUrl, settings );\n                return deferred.promise();\n            }\n\n            // Reset base to the default document base\n            // TODO figure out why we doe this\n            this._getBase().reset();\n\n            // If the content we are interested in is already in the DOM,\n            // and the caller did not indicate that we should force a\n            // reload of the file, we are done. Resolve the deferrred so that\n            // users can bind to .done on the promise\n            if ( content.length && !settings.reload ) {\n                this._enhance( content, settings.role );\n                deferred.resolve( absUrl, settings, content );\n\n                //if we are reloading the content make sure we update\n                // the base if its not a prefetch\n                if ( !settings.prefetch ) {\n                    this._getBase().set(url);\n                }\n\n                return deferred.promise();\n            }\n\n            triggerData = {\n                url: url,\n                absUrl: absUrl,\n                toPage: url,\n                prevPage: options ? options.fromPage : undefined,\n                dataUrl: dataUrl,\n                deferred: deferred,\n                options: settings\n            };\n\n            // Let listeners know we're about to load content.\n            pblEvent = this._triggerWithDeprecated( \"beforeload\", triggerData );\n\n            // If the default behavior is prevented, stop here!\n            if ( pblEvent.deprecatedEvent.isDefaultPrevented() ||\n                pblEvent.event.isDefaultPrevented() ) {\n                return deferred.promise();\n            }\n\n            if ( settings.showLoadMsg ) {\n                this._showLoading( settings.loadMsgDelay );\n            }\n\n            // Reset base to the default document base.\n            // only reset if we are not prefetching\n            if ( settings.prefetch === undefined ) {\n                this._getBase().reset();\n            }\n\n            if ( !( $.mobile.allowCrossDomainPages ||\n                $.mobile.path.isSameDomain($.mobile.path.documentUrl, absUrl ) ) ) {\n                deferred.reject( absUrl, settings );\n                return deferred.promise();\n            }\n\n            // Load the new content.\n            $.ajax({\n                url: fileUrl,\n                type: settings.type,\n                data: settings.data,\n                contentType: settings.contentType,\n                dataType: \"html\",\n                success: this._loadSuccess( absUrl, triggerData, settings, deferred ),\n                error: this._loadError( absUrl, triggerData, settings, deferred )\n            });\n\n            return deferred.promise();\n        },\n\n        _loadError: function( absUrl, triggerData, settings, deferred ) {\n            return $.proxy(function( xhr, textStatus, errorThrown ) {\n                //set base back to current path\n                this._getBase().set( $.mobile.path.get() );\n\n                // Add error info to our triggerData.\n                triggerData.xhr = xhr;\n                triggerData.textStatus = textStatus;\n                triggerData.errorThrown = errorThrown;\n\n                // Let listeners know the page load failed.\n                var plfEvent = this._triggerWithDeprecated( \"loadfailed\", triggerData );\n\n                // If the default behavior is prevented, stop here!\n                // Note that it is the responsibility of the listener/handler\n                // that called preventDefault(), to resolve/reject the\n                // deferred object within the triggerData.\n                if ( plfEvent.deprecatedEvent.isDefaultPrevented() ||\n                    plfEvent.event.isDefaultPrevented() ) {\n                    return;\n                }\n\n                // Remove loading message.\n                if ( settings.showLoadMsg ) {\n                    this._showError();\n                }\n\n                deferred.reject( absUrl, settings );\n            }, this);\n        },\n\n        _getTransitionHandler: function( transition ) {\n            transition = $.mobile._maybeDegradeTransition( transition );\n\n            //find the transition handler for the specified transition. If there\n            //isn't one in our transitionHandlers dictionary, use the default one.\n            //call the handler immediately to kick-off the transition.\n            return $.mobile.transitionHandlers[ transition ] || $.mobile.defaultTransitionHandler;\n        },\n\n        // TODO move into transition handlers?\n        _triggerCssTransitionEvents: function( to, from, prefix ) {\n            var samePage = false;\n\n            prefix = prefix || \"\";\n\n            // TODO decide if these events should in fact be triggered on the container\n            if ( from ) {\n\n                //Check if this is a same page transition and tell the handler in page\n                if( to[0] === from[0] ){\n                    samePage = true;\n                }\n\n                //trigger before show/hide events\n                // TODO deprecate nextPage in favor of next\n                this._triggerWithDeprecated( prefix + \"hide\", {\n\n                    // Deprecated in 1.4 remove in 1.5\n                    nextPage: to,\n                    toPage: to,\n                    prevPage: from,\n                    samePage: samePage\n                }, from );\n            }\n\n            // TODO deprecate prevPage in favor of previous\n            this._triggerWithDeprecated( prefix + \"show\", {\n                prevPage: from || $( \"\" ),\n                toPage: to\n            }, to );\n        },\n\n        // TODO make private once change has been defined in the widget\n        _cssTransition: function( to, from, options ) {\n            var transition = options.transition,\n                reverse = options.reverse,\n                deferred = options.deferred,\n                TransitionHandler,\n                promise;\n\n            this._triggerCssTransitionEvents( to, from, \"before\" );\n\n            // TODO put this in a binding to events *outside* the widget\n            this._hideLoading();\n\n            TransitionHandler = this._getTransitionHandler( transition );\n\n            promise = ( new TransitionHandler( transition, reverse, to, from ) ).transition();\n\n            promise.done( $.proxy( function() {\n                this._triggerCssTransitionEvents( to, from );\n            }, this ));\n\n            // TODO temporary accomodation of argument deferred\n            promise.done(function() {\n                deferred.resolve.apply( deferred, arguments );\n            });\n        },\n\n        _releaseTransitionLock: function() {\n            //release transition lock so navigation is free again\n            isPageTransitioning = false;\n            if ( pageTransitionQueue.length > 0 ) {\n                $.mobile.changePage.apply( null, pageTransitionQueue.pop() );\n            }\n        },\n\n        _removeActiveLinkClass: function( force ) {\n            //clear out the active button state\n            $.mobile.removeActiveLinkClass( force );\n        },\n\n        _loadUrl: function( to, triggerData, settings ) {\n            // preserve the original target as the dataUrl value will be\n            // simplified eg, removing ui-state, and removing query params\n            // from the hash this is so that users who want to use query\n            // params have access to them in the event bindings for the page\n            // life cycle See issue #5085\n            settings.target = to;\n            settings.deferred = $.Deferred();\n\n            this.load( to, settings );\n\n            settings.deferred.done($.proxy(function( url, options, content ) {\n                isPageTransitioning = false;\n\n                // store the original absolute url so that it can be provided\n                // to events in the triggerData of the subsequent changePage call\n                options.absUrl = triggerData.absUrl;\n\n                this.transition( content, triggerData, options );\n            }, this));\n\n            settings.deferred.fail($.proxy(function(/* url, options */) {\n                this._removeActiveLinkClass( true );\n                this._releaseTransitionLock();\n                this._triggerWithDeprecated( \"changefailed\", triggerData );\n            }, this));\n        },\n\n        _triggerPageBeforeChange: function( to, triggerData, settings ) {\n            var returnEvents;\n\n            triggerData.prevPage = this.activePage;\n            $.extend( triggerData, {\n                toPage: to,\n                options: settings\n            });\n\n            // NOTE: preserve the original target as the dataUrl value will be\n            // simplified eg, removing ui-state, and removing query params from\n            // the hash this is so that users who want to use query params have\n            // access to them in the event bindings for the page life cycle\n            // See issue #5085\n            if ( $.type(to) === \"string\" ) {\n                // if the toPage is a string simply convert it\n                triggerData.absUrl = $.mobile.path.makeUrlAbsolute( to, this._findBaseWithDefault() );\n            } else {\n                // if the toPage is a jQuery object grab the absolute url stored\n                // in the loadPage callback where it exists\n                triggerData.absUrl = settings.absUrl;\n            }\n\n            // Let listeners know we're about to change the current page.\n            returnEvents = this._triggerWithDeprecated( \"beforechange\", triggerData );\n\n            // If the default behavior is prevented, stop here!\n            if ( returnEvents.event.isDefaultPrevented() ||\n                returnEvents.deprecatedEvent.isDefaultPrevented() ) {\n                return false;\n            }\n\n            return true;\n        },\n\n        change: function( to, options ) {\n            // If we are in the midst of a transition, queue the current request.\n            // We'll call changePage() once we're done with the current transition\n            // to service the request.\n            if ( isPageTransitioning ) {\n                pageTransitionQueue.unshift( arguments );\n                return;\n            }\n\n            var settings = $.extend( {}, $.mobile.changePage.defaults, options ),\n                triggerData = {};\n\n            // Make sure we have a fromPage.\n            settings.fromPage = settings.fromPage || this.activePage;\n\n            // if the page beforechange default is prevented return early\n            if ( !this._triggerPageBeforeChange(to, triggerData, settings) ) {\n                return;\n            }\n\n            // We allow \"pagebeforechange\" observers to modify the to in\n            // the trigger data to allow for redirects. Make sure our to is\n            // updated. We also need to re-evaluate whether it is a string,\n            // because an object can also be replaced by a string\n            to = triggerData.toPage;\n\n            // If the caller passed us a url, call loadPage()\n            // to make sure it is loaded into the DOM. We'll listen\n            // to the promise object it returns so we know when\n            // it is done loading or if an error ocurred.\n            if ( $.type(to) === \"string\" ) {\n                // Set the isPageTransitioning flag to prevent any requests from\n                // entering this method while we are in the midst of loading a page\n                // or transitioning.\n                isPageTransitioning = true;\n\n                this._loadUrl( to, triggerData, settings );\n            } else {\n                this.transition( to, triggerData, settings );\n            }\n        },\n\n        transition: function( toPage, triggerData, settings ) {\n            var fromPage, url, pageUrl, fileUrl,\n                active, activeIsInitialPage,\n                historyDir, pageTitle, isDialog,\n                alreadyThere, newPageTitle,\n                params,    cssTransitionDeferred,\n                beforeTransition;\n\n            // If we are in the midst of a transition, queue the current request.\n            // We'll call changePage() once we're done with the current transition\n            // to service the request.\n            if ( isPageTransitioning ) {\n                // make sure to only queue the to and settings values so the arguments\n                // work with a call to the change method\n                pageTransitionQueue.unshift( [toPage, settings] );\n                return;\n            }\n\n            // DEPRECATED - this call only, in favor of the before transition\n            // if the page beforechange default is prevented return early\n            if ( !this._triggerPageBeforeChange(toPage, triggerData, settings) ) {\n                return;\n            }\n\n            triggerData.prevPage = settings.fromPage;\n            // if the (content|page)beforetransition default is prevented return early\n            // Note, we have to check for both the deprecated and new events\n            beforeTransition = this._triggerWithDeprecated( \"beforetransition\", triggerData );\n            if (beforeTransition.deprecatedEvent.isDefaultPrevented() ||\n                beforeTransition.event.isDefaultPrevented() ) {\n                return;\n            }\n\n            // Set the isPageTransitioning flag to prevent any requests from\n            // entering this method while we are in the midst of loading a page\n            // or transitioning.\n            isPageTransitioning = true;\n\n            // If we are going to the first-page of the application, we need to make\n            // sure settings.dataUrl is set to the application document url. This allows\n            // us to avoid generating a document url with an id hash in the case where the\n            // first-page of the document has an id attribute specified.\n            if ( toPage[ 0 ] === $.mobile.firstPage[ 0 ] && !settings.dataUrl ) {\n                settings.dataUrl = $.mobile.path.documentUrl.hrefNoHash;\n            }\n\n            // The caller passed us a real page DOM element. Update our\n            // internal state and then trigger a transition to the page.\n            fromPage = settings.fromPage;\n            url = ( settings.dataUrl && $.mobile.path.convertUrlToDataUrl(settings.dataUrl) ) ||\n                toPage.jqmData( \"url\" );\n\n            // The pageUrl var is usually the same as url, except when url is obscured\n            // as a dialog url. pageUrl always contains the file path\n            pageUrl = url;\n            fileUrl = $.mobile.path.getFilePath( url );\n            active = $.mobile.navigate.history.getActive();\n            activeIsInitialPage = $.mobile.navigate.history.activeIndex === 0;\n            historyDir = 0;\n            pageTitle = document.title;\n            isDialog = ( settings.role === \"dialog\" ||\n                toPage.jqmData( \"role\" ) === \"dialog\" ) &&\n                toPage.jqmData( \"dialog\" ) !== true;\n\n            // By default, we prevent changePage requests when the fromPage and toPage\n            // are the same element, but folks that generate content\n            // manually/dynamically and reuse pages want to be able to transition to\n            // the same page. To allow this, they will need to change the default\n            // value of allowSamePageTransition to true, *OR*, pass it in as an\n            // option when they manually call changePage(). It should be noted that\n            // our default transition animations assume that the formPage and toPage\n            // are different elements, so they may behave unexpectedly. It is up to\n            // the developer that turns on the allowSamePageTransitiona option to\n            // either turn off transition animations, or make sure that an appropriate\n            // animation transition is used.\n            if ( fromPage && fromPage[0] === toPage[0] &&\n                !settings.allowSamePageTransition ) {\n\n                isPageTransitioning = false;\n                this._triggerWithDeprecated( \"transition\", triggerData );\n                this._triggerWithDeprecated( \"change\", triggerData );\n\n                // Even if there is no page change to be done, we should keep the\n                // urlHistory in sync with the hash changes\n                if ( settings.fromHashChange ) {\n                    $.mobile.navigate.history.direct({ url: url });\n                }\n\n                return;\n            }\n\n            // We need to make sure the page we are given has already been enhanced.\n            toPage.page({ role: settings.role });\n\n            // If the changePage request was sent from a hashChange event, check to\n            // see if the page is already within the urlHistory stack. If so, we'll\n            // assume the user hit the forward/back button and will try to match the\n            // transition accordingly.\n            if ( settings.fromHashChange ) {\n                historyDir = settings.direction === \"back\" ? -1 : 1;\n            }\n\n            // Kill the keyboard.\n            // XXX_jblas: We need to stop crawling the entire document to kill focus.\n            //            Instead, we should be tracking focus with a delegate()\n            //            handler so we already have the element in hand at this\n            //            point.\n            // Wrap this in a try/catch block since IE9 throw \"Unspecified error\" if\n            // document.activeElement is undefined when we are in an IFrame.\n            try {\n                if ( document.activeElement &&\n                    document.activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n                    $( document.activeElement ).blur();\n                } else {\n                    $( \"input:focus, textarea:focus, select:focus\" ).blur();\n                }\n            } catch( e ) {}\n\n            // Record whether we are at a place in history where a dialog used to be -\n            // if so, do not add a new history entry and do not change the hash either\n            alreadyThere = false;\n\n            // If we're displaying the page as a dialog, we don't want the url\n            // for the dialog content to be used in the hash. Instead, we want\n            // to append the dialogHashKey to the url of the current page.\n            if ( isDialog && active ) {\n                // on the initial page load active.url is undefined and in that case\n                // should be an empty string. Moving the undefined -> empty string back\n                // into urlHistory.addNew seemed imprudent given undefined better\n                // represents the url state\n\n                // If we are at a place in history that once belonged to a dialog, reuse\n                // this state without adding to urlHistory and without modifying the\n                // hash. However, if a dialog is already displayed at this point, and\n                // we're about to display another dialog, then we must add another hash\n                // and history entry on top so that one may navigate back to the\n                // original dialog\n                if ( active.url &&\n                    active.url.indexOf( $.mobile.dialogHashKey ) > -1 &&\n                    this.activePage &&\n                    !this.activePage.hasClass( \"ui-dialog\" ) &&\n                    $.mobile.navigate.history.activeIndex > 0 ) {\n\n                    settings.changeHash = false;\n                    alreadyThere = true;\n                }\n\n                // Normally, we tack on a dialog hash key, but if this is the location\n                // of a stale dialog, we reuse the URL from the entry\n                url = ( active.url || \"\" );\n\n                // account for absolute urls instead of just relative urls use as hashes\n                if ( !alreadyThere && url.indexOf(\"#\") > -1 ) {\n                    url += $.mobile.dialogHashKey;\n                } else {\n                    url += \"#\" + $.mobile.dialogHashKey;\n                }\n            }\n\n            // if title element wasn't found, try the page div data attr too\n            // If this is a deep-link or a reload ( active === undefined ) then just\n            // use pageTitle\n            newPageTitle = ( !active ) ? pageTitle : toPage.jqmData( \"title\" ) ||\n                toPage.children( \":jqmData(role='header')\" ).find( \".ui-title\" ).text();\n            if ( !!newPageTitle && pageTitle === document.title ) {\n                pageTitle = newPageTitle;\n            }\n            if ( !toPage.jqmData( \"title\" ) ) {\n                toPage.jqmData( \"title\", pageTitle );\n            }\n\n            // Make sure we have a transition defined.\n            settings.transition = settings.transition ||\n                ( ( historyDir && !activeIsInitialPage ) ? active.transition : undefined ) ||\n                ( isDialog ? $.mobile.defaultDialogTransition : $.mobile.defaultPageTransition );\n\n            //add page to history stack if it's not back or forward\n            if ( !historyDir && alreadyThere ) {\n                $.mobile.navigate.history.getActive().pageUrl = pageUrl;\n            }\n\n            // Set the location hash.\n            if ( url && !settings.fromHashChange ) {\n\n                // rebuilding the hash here since we loose it earlier on\n                // TODO preserve the originally passed in path\n                if ( !$.mobile.path.isPath( url ) && url.indexOf( \"#\" ) < 0 ) {\n                    url = \"#\" + url;\n                }\n\n                // TODO the property names here are just silly\n                params = {\n                    transition: settings.transition,\n                    title: pageTitle,\n                    pageUrl: pageUrl,\n                    role: settings.role\n                };\n\n                if ( settings.changeHash !== false && $.mobile.hashListeningEnabled ) {\n                    $.mobile.navigate( this.window[ 0 ].encodeURI( url ), params, true);\n                } else if ( toPage[ 0 ] !== $.mobile.firstPage[ 0 ] ) {\n                    $.mobile.navigate.history.add( url, params );\n                }\n            }\n\n            //set page title\n            document.title = pageTitle;\n\n            //set \"toPage\" as activePage deprecated in 1.4 remove in 1.5\n            $.mobile.activePage = toPage;\n\n            //new way to handle activePage\n            this.activePage = toPage;\n\n            // If we're navigating back in the URL history, set reverse accordingly.\n            settings.reverse = settings.reverse || historyDir < 0;\n\n            cssTransitionDeferred = $.Deferred();\n\n            this._cssTransition(toPage, fromPage, {\n                transition: settings.transition,\n                reverse: settings.reverse,\n                deferred: cssTransitionDeferred\n            });\n\n            cssTransitionDeferred.done($.proxy(function( name, reverse, $to, $from, alreadyFocused ) {\n                $.mobile.removeActiveLinkClass();\n\n                //if there's a duplicateCachedPage, remove it from the DOM now that it's hidden\n                if ( settings.duplicateCachedPage ) {\n                    settings.duplicateCachedPage.remove();\n                }\n\n                // despite visibility: hidden addresses issue #2965\n                // https://github.com/jquery/jquery-mobile/issues/2965\n                if ( !alreadyFocused ) {\n                    $.mobile.focusPage( toPage );\n                }\n\n                this._releaseTransitionLock();\n                this._triggerWithDeprecated( \"transition\", triggerData );\n                this._triggerWithDeprecated( \"change\", triggerData );\n            }, this));\n        },\n\n        // determine the current base url\n        _findBaseWithDefault: function() {\n            var closestBase = ( this.activePage &&\n            $.mobile.getClosestBaseUrl( this.activePage ) );\n        return closestBase || $.mobile.path.documentBase.hrefNoHash;\n        }\n    });\n\n    // The following handlers should be bound after mobileinit has been triggered\n    // the following deferred is resolved in the init file\n    $.mobile.navreadyDeferred = $.Deferred();\n\n    //these variables make all page containers use the same queue and only navigate one at a time\n    // queue to hold simultanious page transitions\n    var pageTransitionQueue = [],\n\n        // indicates whether or not page is in process of transitioning\n        isPageTransitioning = false;\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n        // resolved on domready\n    var domreadyDeferred = $.Deferred(),\n\n        // resolved and nulled on window.load()\n        loadDeferred = $.Deferred(),\n\n        // function that resolves the above deferred\n        pageIsFullyLoaded = function() {\n\n            // Resolve and null the deferred\n            loadDeferred.resolve();\n            loadDeferred = null;\n        },\n\n        documentUrl = $.mobile.path.documentUrl,\n\n        // used to track last vclicked element to make sure its value is added to form data\n        $lastVClicked = null;\n\n    /* Event Bindings - hashchange, submit, and click */\n    function findClosestLink( ele )    {\n        while ( ele ) {\n            // Look for the closest element with a nodeName of \"a\".\n            // Note that we are checking if we have a valid nodeName\n            // before attempting to access it. This is because the\n            // node we get called with could have originated from within\n            // an embedded SVG document where some symbol instance elements\n            // don't have nodeName defined on them, or strings are of type\n            // SVGAnimatedString.\n            if ( ( typeof ele.nodeName === \"string\" ) && ele.nodeName.toLowerCase() === \"a\" ) {\n                break;\n            }\n            ele = ele.parentNode;\n        }\n        return ele;\n    }\n\n    $.mobile.loadPage = function( url, opts ) {\n        var container;\n\n        opts = opts || {};\n        container = ( opts.pageContainer || $.mobile.pageContainer );\n\n        // create the deferred that will be supplied to loadPage callers\n        // and resolved by the content widget's load method\n        opts.deferred = $.Deferred();\n\n        // Preferring to allow exceptions for uninitialized opts.pageContainer\n        // widgets so we know if we need to force init here for users\n        container.pagecontainer( \"load\", url, opts );\n\n        // provide the deferred\n        return opts.deferred.promise();\n    };\n\n    //define vars for interal use\n\n    /* internal utility functions */\n\n    // NOTE Issue #4950 Android phonegap doesn't navigate back properly\n    //      when a full page refresh has taken place. It appears that hashchange\n    //      and replacestate history alterations work fine but we need to support\n    //      both forms of history traversal in our code that uses backward history\n    //      movement\n    $.mobile.back = function() {\n        var nav = window.navigator;\n\n        // if the setting is on and the navigator object is\n        // available use the phonegap navigation capability\n        if ( this.phonegapNavigationEnabled &&\n            nav &&\n            nav.app &&\n            nav.app.backHistory ) {\n            nav.app.backHistory();\n        } else {\n            $.mobile.pageContainer.pagecontainer( \"back\" );\n        }\n    };\n\n    // Direct focus to the page title, or otherwise first focusable element\n    $.mobile.focusPage = function ( page ) {\n        var autofocus = page.find( \"[autofocus]\" ),\n            pageTitle = page.find( \".ui-title:eq(0)\" );\n\n        if ( autofocus.length ) {\n            autofocus.focus();\n            return;\n        }\n\n        if ( pageTitle.length ) {\n            pageTitle.focus();\n        } else{\n            page.focus();\n        }\n    };\n\n    // No-op implementation of transition degradation\n    $.mobile._maybeDegradeTransition = $.mobile._maybeDegradeTransition || function( transition ) {\n        return transition;\n    };\n\n    // Exposed $.mobile methods\n\n    $.mobile.changePage = function( to, options ) {\n        $.mobile.pageContainer.pagecontainer( \"change\", to, options );\n    };\n\n    $.mobile.changePage.defaults = {\n        transition: undefined,\n        reverse: false,\n        changeHash: true,\n        fromHashChange: false,\n        role: undefined, // By default we rely on the role defined by the @data-role attribute.\n        duplicateCachedPage: undefined,\n        pageContainer: undefined,\n        showLoadMsg: true, //loading message shows by default when pages are being fetched during changePage\n        dataUrl: undefined,\n        fromPage: undefined,\n        allowSamePageTransition: false\n    };\n\n    $.mobile._registerInternalEvents = function() {\n        var getAjaxFormData = function( $form, calculateOnly ) {\n            var url, ret = true, formData, vclickedName, method;\n            if ( !$.mobile.ajaxEnabled ||\n                    // test that the form is, itself, ajax false\n                    $form.is( \":jqmData(ajax='false')\" ) ||\n                    // test that $.mobile.ignoreContentEnabled is set and\n                    // the form or one of it's parents is ajax=false\n                    !$form.jqmHijackable().length ||\n                    $form.attr( \"target\" ) ) {\n                return false;\n            }\n\n            url = ( $lastVClicked && $lastVClicked.attr( \"formaction\" ) ) ||\n                $form.attr( \"action\" );\n            method = ( $form.attr( \"method\" ) || \"get\" ).toLowerCase();\n\n            // If no action is specified, browsers default to using the\n            // URL of the document containing the form. Since we dynamically\n            // pull in pages from external documents, the form should submit\n            // to the URL for the source document of the page containing\n            // the form.\n            if ( !url ) {\n                // Get the @data-url for the page containing the form.\n                url = $.mobile.getClosestBaseUrl( $form );\n\n                // NOTE: If the method is \"get\", we need to strip off the query string\n                // because it will get replaced with the new form data. See issue #5710.\n                if ( method === \"get\" ) {\n                    url = $.mobile.path.parseUrl( url ).hrefNoSearch;\n                }\n\n                if ( url === $.mobile.path.documentBase.hrefNoHash ) {\n                    // The url we got back matches the document base,\n                    // which means the page must be an internal/embedded page,\n                    // so default to using the actual document url as a browser\n                    // would.\n                    url = documentUrl.hrefNoSearch;\n                }\n            }\n\n            url = $.mobile.path.makeUrlAbsolute(  url, $.mobile.getClosestBaseUrl( $form ) );\n\n            if ( ( $.mobile.path.isExternal( url ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, url ) ) ) {\n                return false;\n            }\n\n            if ( !calculateOnly ) {\n                formData = $form.serializeArray();\n\n                if ( $lastVClicked && $lastVClicked[ 0 ].form === $form[ 0 ] ) {\n                    vclickedName = $lastVClicked.attr( \"name\" );\n                    if ( vclickedName ) {\n                        // Make sure the last clicked element is included in the form\n                        $.each( formData, function( key, value ) {\n                            if ( value.name === vclickedName ) {\n                                // Unset vclickedName - we've found it in the serialized data already\n                                vclickedName = \"\";\n                                return false;\n                            }\n                        });\n                        if ( vclickedName ) {\n                            formData.push( { name: vclickedName, value: $lastVClicked.attr( \"value\" ) } );\n                        }\n                    }\n                }\n\n                ret = {\n                    url: url,\n                    options: {\n                        type:        method,\n                        data:        $.param( formData ),\n                        transition:    $form.jqmData( \"transition\" ),\n                        reverse:    $form.jqmData( \"direction\" ) === \"reverse\",\n                        reloadPage:    true\n                    }\n                };\n            }\n\n            return ret;\n        };\n\n        //bind to form submit events, handle with Ajax\n        $.mobile.document.delegate( \"form\", \"submit\", function( event ) {\n            var formData;\n\n            if ( !event.isDefaultPrevented() ) {\n                formData = getAjaxFormData( $( this ) );\n                if ( formData ) {\n                    $.mobile.changePage( formData.url, formData.options );\n                    event.preventDefault();\n                }\n            }\n        });\n\n        //add active state on vclick\n        $.mobile.document.bind( \"vclick\", function( event ) {\n            var $btn, btnEls, target = event.target, needClosest = false;\n            // if this isn't a left click we don't care. Its important to note\n            // that when the virtual event is generated it will create the which attr\n            if ( event.which > 1 || !$.mobile.linkBindingEnabled ) {\n                return;\n            }\n\n            // Record that this element was clicked, in case we need it for correct\n            // form submission during the \"submit\" handler above\n            $lastVClicked = $( target );\n\n            // Try to find a target element to which the active class will be applied\n            if ( $.data( target, \"mobile-button\" ) ) {\n                // If the form will not be submitted via AJAX, do not add active class\n                if ( !getAjaxFormData( $( target ).closest( \"form\" ), true ) ) {\n                    return;\n                }\n                // We will apply the active state to this button widget - the parent\n                // of the input that was clicked will have the associated data\n                if ( target.parentNode ) {\n                    target = target.parentNode;\n                }\n            } else {\n                target = findClosestLink( target );\n                if ( !( target && $.mobile.path.parseUrl( target.getAttribute( \"href\" ) || \"#\" ).hash !== \"#\" ) ) {\n                    return;\n                }\n\n                // TODO teach $.mobile.hijackable to operate on raw dom elements so the\n                // link wrapping can be avoided\n                if ( !$( target ).jqmHijackable().length ) {\n                    return;\n                }\n            }\n\n            // Avoid calling .closest by using the data set during .buttonMarkup()\n            // List items have the button data in the parent of the element clicked\n            if ( !!~target.className.indexOf( \"ui-link-inherit\" ) ) {\n                if ( target.parentNode ) {\n                    btnEls = $.data( target.parentNode, \"buttonElements\" );\n                }\n            // Otherwise, look for the data on the target itself\n            } else {\n                btnEls = $.data( target, \"buttonElements\" );\n            }\n            // If found, grab the button's outer element\n            if ( btnEls ) {\n                target = btnEls.outer;\n            } else {\n                needClosest = true;\n            }\n\n            $btn = $( target );\n            // If the outer element wasn't found by the our heuristics, use .closest()\n            if ( needClosest ) {\n                $btn = $btn.closest( \".ui-btn\" );\n            }\n\n            if ( $btn.length > 0 &&\n                !( $btn.hasClass( \"ui-state-disabled\" ||\n\n                    // DEPRECATED as of 1.4.0 - remove after 1.4.0 release\n                    // only ui-state-disabled should be present thereafter\n                    $btn.hasClass( \"ui-disabled\" ) ) ) ) {\n                $.mobile.removeActiveLinkClass( true );\n                $.mobile.activeClickedLink = $btn;\n                $.mobile.activeClickedLink.addClass( $.mobile.activeBtnClass );\n            }\n        });\n\n        // click routing - direct to HTTP or Ajax, accordingly\n        $.mobile.document.bind( \"click\", function( event ) {\n            if ( !$.mobile.linkBindingEnabled || event.isDefaultPrevented() ) {\n                return;\n            }\n\n            var link = findClosestLink( event.target ),\n                $link = $( link ),\n\n                //remove active link class if external (then it won't be there if you come back)\n                httpCleanup = function() {\n                    window.setTimeout(function() { $.mobile.removeActiveLinkClass( true ); }, 200 );\n                },\n                baseUrl, href,\n                useDefaultUrlHandling, isExternal,\n                transition, reverse, role;\n\n            // If a button was clicked, clean up the active class added by vclick above\n            if ( $.mobile.activeClickedLink &&\n                $.mobile.activeClickedLink[ 0 ] === event.target.parentNode ) {\n                httpCleanup();\n            }\n\n            // If there is no link associated with the click or its not a left\n            // click we want to ignore the click\n            // TODO teach $.mobile.hijackable to operate on raw dom elements so the link wrapping\n            // can be avoided\n            if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {\n                return;\n            }\n\n            //if there's a data-rel=back attr, go back in history\n            if ( $link.is( \":jqmData(rel='back')\" ) ) {\n                $.mobile.back();\n                return false;\n            }\n\n            baseUrl = $.mobile.getClosestBaseUrl( $link );\n\n            //get href, if defined, otherwise default to empty hash\n            href = $.mobile.path.makeUrlAbsolute( $link.attr( \"href\" ) || \"#\", baseUrl );\n\n            //if ajax is disabled, exit early\n            if ( !$.mobile.ajaxEnabled && !$.mobile.path.isEmbeddedPage( href ) ) {\n                httpCleanup();\n                //use default click handling\n                return;\n            }\n\n            // XXX_jblas: Ideally links to application pages should be specified as\n            //            an url to the application document with a hash that is either\n            //            the site relative path or id to the page. But some of the\n            //            internal code that dynamically generates sub-pages for nested\n            //            lists and select dialogs, just write a hash in the link they\n            //            create. This means the actual URL path is based on whatever\n            //            the current value of the base tag is at the time this code\n            //            is called.\n            if ( href.search( \"#\" ) !== -1 &&\n                !( $.mobile.path.isExternal( href ) && $.mobile.path.isAbsoluteUrl( href ) ) ) {\n\n                href = href.replace( /[^#]*#/, \"\" );\n                if ( !href ) {\n                    //link was an empty hash meant purely\n                    //for interaction, so we ignore it.\n                    event.preventDefault();\n                    return;\n                } else if ( $.mobile.path.isPath( href ) ) {\n                    //we have apath so make it the href we want to load.\n                    href = $.mobile.path.makeUrlAbsolute( href, baseUrl );\n                } else {\n                    //we have a simple id so use the documentUrl as its base.\n                    href = $.mobile.path.makeUrlAbsolute( \"#\" + href, documentUrl.hrefNoHash );\n                }\n            }\n\n            // Should we handle this link, or let the browser deal with it?\n            useDefaultUrlHandling = $link.is( \"[rel='external']\" ) || $link.is( \":jqmData(ajax='false')\" ) || $link.is( \"[target]\" );\n\n            // Some embedded browsers, like the web view in Phone Gap, allow cross-domain XHR\n            // requests if the document doing the request was loaded via the file:// protocol.\n            // This is usually to allow the application to \"phone home\" and fetch app specific\n            // data. We normally let the browser handle external/cross-domain urls, but if the\n            // allowCrossDomainPages option is true, we will allow cross-domain http/https\n            // requests to go through our page loading logic.\n\n            //check for protocol or rel and its not an embedded page\n            //TODO overlap in logic from isExternal, rel=external check should be\n            //     moved into more comprehensive isExternalLink\n            isExternal = useDefaultUrlHandling || ( $.mobile.path.isExternal( href ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, href ) );\n\n            if ( isExternal ) {\n                httpCleanup();\n                //use default click handling\n                return;\n            }\n\n            //use ajax\n            transition = $link.jqmData( \"transition\" );\n            reverse = $link.jqmData( \"direction\" ) === \"reverse\" ||\n                        // deprecated - remove by 1.0\n                        $link.jqmData( \"back\" );\n\n            //this may need to be more specific as we use data-rel more\n            role = $link.attr( \"data-\" + $.mobile.ns + \"rel\" ) || undefined;\n\n            $.mobile.changePage( href, { transition: transition, reverse: reverse, role: role, link: $link } );\n            event.preventDefault();\n        });\n\n        //prefetch pages when anchors with data-prefetch are encountered\n        $.mobile.document.delegate( \".ui-page\", \"pageshow.prefetch\", function() {\n            var urls = [];\n            $( this ).find( \"a:jqmData(prefetch)\" ).each(function() {\n                var $link = $( this ),\n                    url = $link.attr( \"href\" );\n\n                if ( url && $.inArray( url, urls ) === -1 ) {\n                    urls.push( url );\n\n                    $.mobile.loadPage( url, { role: $link.attr( \"data-\" + $.mobile.ns + \"rel\" ),prefetch: true } );\n                }\n            });\n        });\n\n        // TODO ensure that the navigate binding in the content widget happens at the right time\n        $.mobile.pageContainer.pagecontainer();\n\n        //set page min-heights to be device specific\n        $.mobile.document.bind( \"pageshow\", function() {\n\n            // We need to wait for window.load to make sure that styles have already been rendered,\n            // otherwise heights of external toolbars will have the wrong value\n            if ( loadDeferred ) {\n                loadDeferred.done( $.mobile.resetActivePageHeight );\n            } else {\n                $.mobile.resetActivePageHeight();\n            }\n        });\n        $.mobile.window.bind( \"throttledresize\", $.mobile.resetActivePageHeight );\n\n    };//navreadyDeferred done callback\n\n    $( function() { domreadyDeferred.resolve(); } );\n\n    // Account for the possibility that the load event has already fired\n    if ( document.readyState === \"complete\" ) {\n        pageIsFullyLoaded();\n    } else {\n        $.mobile.window.load( pageIsFullyLoaded );\n    }\n\n    $.when( domreadyDeferred, $.mobile.navreadyDeferred ).done( function() { $.mobile._registerInternalEvents(); } );\n})( jQuery );\n\n\n(function( $, window, undefined ) {\n\n    // TODO remove direct references to $.mobile and properties, we should\n    //      favor injection with params to the constructor\n    $.mobile.Transition = function() {\n        this.init.apply( this, arguments );\n    };\n\n    $.extend($.mobile.Transition.prototype, {\n        toPreClass: \" ui-page-pre-in\",\n\n        init: function( name, reverse, $to, $from ) {\n            $.extend(this, {\n                name: name,\n                reverse: reverse,\n                $to: $to,\n                $from: $from,\n                deferred: new $.Deferred()\n            });\n        },\n\n        cleanFrom: function() {\n            this.$from\n                .removeClass( $.mobile.activePageClass + \" out in reverse \" + this.name )\n                .height( \"\" );\n        },\n\n        // NOTE overridden by child object prototypes, noop'd here as defaults\n        beforeDoneIn: function() {},\n        beforeDoneOut: function() {},\n        beforeStartOut: function() {},\n\n        doneIn: function() {\n            this.beforeDoneIn();\n\n            this.$to.removeClass( \"out in reverse \" + this.name ).height( \"\" );\n\n            this.toggleViewportClass();\n\n            // In some browsers (iOS5), 3D transitions block the ability to scroll to the desired location during transition\n            // This ensures we jump to that spot after the fact, if we aren't there already.\n            if ( $.mobile.window.scrollTop() !== this.toScroll ) {\n                this.scrollPage();\n            }\n            if ( !this.sequential ) {\n                this.$to.addClass( $.mobile.activePageClass );\n            }\n            this.deferred.resolve( this.name, this.reverse, this.$to, this.$from, true );\n        },\n\n        doneOut: function( screenHeight, reverseClass, none, preventFocus ) {\n            this.beforeDoneOut();\n            this.startIn( screenHeight, reverseClass, none, preventFocus );\n        },\n\n        hideIn: function( callback ) {\n            // Prevent flickering in phonegap container: see comments at #4024 regarding iOS\n            this.$to.css( \"z-index\", -10 );\n            callback.call( this );\n            this.$to.css( \"z-index\", \"\" );\n        },\n\n        scrollPage: function() {\n            // By using scrollTo instead of silentScroll, we can keep things better in order\n            // Just to be precautios, disable scrollstart listening like silentScroll would\n            $.event.special.scrollstart.enabled = false;\n            //if we are hiding the url bar or the page was previously scrolled scroll to hide or return to position\n            if ( $.mobile.hideUrlBar || this.toScroll !== $.mobile.defaultHomeScroll ) {\n                window.scrollTo( 0, this.toScroll );\n            }\n\n            // reenable scrollstart listening like silentScroll would\n            setTimeout( function() {\n                $.event.special.scrollstart.enabled = true;\n            }, 150 );\n        },\n\n        startIn: function( screenHeight, reverseClass, none, preventFocus ) {\n            this.hideIn(function() {\n                this.$to.addClass( $.mobile.activePageClass + this.toPreClass );\n\n                // Send focus to page as it is now display: block\n                if ( !preventFocus ) {\n                    $.mobile.focusPage( this.$to );\n                }\n\n                // Set to page height\n                this.$to.height( screenHeight + this.toScroll );\n\n                if ( !none ) {\n                    this.scrollPage();\n                }\n            });\n\n            this.$to\n                .removeClass( this.toPreClass )\n                .addClass( this.name + \" in \" + reverseClass );\n\n            if ( !none ) {\n                this.$to.animationComplete( $.proxy(function() {\n                    this.doneIn();\n                }, this ));\n            } else {\n                this.doneIn();\n            }\n\n        },\n\n        startOut: function( screenHeight, reverseClass, none ) {\n            this.beforeStartOut( screenHeight, reverseClass, none );\n\n            // Set the from page's height and start it transitioning out\n            // Note: setting an explicit height helps eliminate tiling in the transitions\n            this.$from\n                .height( screenHeight + $.mobile.window.scrollTop() )\n                .addClass( this.name + \" out\" + reverseClass );\n        },\n\n        toggleViewportClass: function() {\n            $.mobile.pageContainer.toggleClass( \"ui-mobile-viewport-transitioning viewport-\" + this.name );\n        },\n\n        transition: function() {\n            // NOTE many of these could be calculated/recorded in the constructor, it's my\n            //      opinion that binding them as late as possible has value with regards to\n            //      better transitions with fewer bugs. Ie, it's not guaranteed that the\n            //      object will be created and transition will be run immediately after as\n            //      it is today. So we wait until transition is invoked to gather the following\n            var none,\n                reverseClass = this.reverse ? \" reverse\" : \"\",\n                screenHeight = $.mobile.getScreenHeight(),\n                maxTransitionOverride = $.mobile.maxTransitionWidth !== false &&\n                    $.mobile.window.width() > $.mobile.maxTransitionWidth;\n\n            this.toScroll = $.mobile.navigate.history.getActive().lastScroll || $.mobile.defaultHomeScroll;\n\n            none = !$.support.cssTransitions || !$.support.cssAnimations ||\n                maxTransitionOverride || !this.name || this.name === \"none\" ||\n                Math.max( $.mobile.window.scrollTop(), this.toScroll ) >\n                    $.mobile.getMaxScrollForTransition();\n\n            this.toggleViewportClass();\n\n            if ( this.$from && !none ) {\n                this.startOut( screenHeight, reverseClass, none );\n            } else {\n                this.doneOut( screenHeight, reverseClass, none, true );\n            }\n\n            return this.deferred.promise();\n        }\n    });\n})( jQuery, this );\n\n\n(function( $ ) {\n\n    $.mobile.SerialTransition = function() {\n        this.init.apply(this, arguments);\n    };\n\n    $.extend($.mobile.SerialTransition.prototype, $.mobile.Transition.prototype, {\n        sequential: true,\n\n        beforeDoneOut: function() {\n            if ( this.$from ) {\n                this.cleanFrom();\n            }\n        },\n\n        beforeStartOut: function( screenHeight, reverseClass, none ) {\n            this.$from.animationComplete($.proxy(function() {\n                this.doneOut( screenHeight, reverseClass, none );\n            }, this ));\n        }\n    });\n\n})( jQuery );\n\n\n(function( $ ) {\n\n    $.mobile.ConcurrentTransition = function() {\n        this.init.apply(this, arguments);\n    };\n\n    $.extend($.mobile.ConcurrentTransition.prototype, $.mobile.Transition.prototype, {\n        sequential: false,\n\n        beforeDoneIn: function() {\n            if ( this.$from ) {\n                this.cleanFrom();\n            }\n        },\n\n        beforeStartOut: function( screenHeight, reverseClass, none ) {\n            this.doneOut( screenHeight, reverseClass, none );\n        }\n    });\n\n})( jQuery );\n\n\n(function( $ ) {\n\n    // generate the handlers from the above\n    var defaultGetMaxScrollForTransition = function() {\n        return $.mobile.getScreenHeight() * 3;\n    };\n\n    //transition handler dictionary for 3rd party transitions\n    $.mobile.transitionHandlers = {\n        \"sequential\": $.mobile.SerialTransition,\n        \"simultaneous\": $.mobile.ConcurrentTransition\n    };\n\n    // Make our transition handler the public default.\n    $.mobile.defaultTransitionHandler = $.mobile.transitionHandlers.sequential;\n\n    $.mobile.transitionFallbacks = {};\n\n    // If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified\n    $.mobile._maybeDegradeTransition = function( transition ) {\n        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {\n            transition = $.mobile.transitionFallbacks[ transition ];\n        }\n\n        return transition;\n    };\n\n    // Set the getMaxScrollForTransition to default if no implementation was set by user\n    $.mobile.getMaxScrollForTransition = $.mobile.getMaxScrollForTransition || defaultGetMaxScrollForTransition;\n\n})( jQuery );\n\n/*\n* fallback transition for flip in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.flip = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for flow in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.flow = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for pop in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.pop = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slide in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n// Use the simultaneous transitions handler for slide transitions\n$.mobile.transitionHandlers.slide = $.mobile.transitionHandlers.simultaneous;\n\n// Set the slide transitions's fallback to \"fade\"\n$.mobile.transitionFallbacks.slide = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slidedown in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.slidedown = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slidefade in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n// Set the slide transitions's fallback to \"fade\"\n$.mobile.transitionFallbacks.slidefade = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slideup in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.slideup = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for turn in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.turn = \"fade\";\n\n})( jQuery, this );\n\n\n(function( $, undefined ) {\n\n$.mobile.degradeInputs = {\n    color: false,\n    date: false,\n    datetime: false,\n    \"datetime-local\": false,\n    email: false,\n    month: false,\n    number: false,\n    range: \"number\",\n    search: \"text\",\n    tel: false,\n    time: false,\n    url: false,\n    week: false\n};\n// Backcompat remove in 1.5\n$.mobile.page.prototype.options.degradeInputs = $.mobile.degradeInputs;\n\n// Auto self-init widgets\n$.mobile.degradeInputsWithin = function( target ) {\n\n    target = $( target );\n\n    // Degrade inputs to avoid poorly implemented native functionality\n    target.find( \"input\" ).not( $.mobile.page.prototype.keepNativeSelector() ).each(function() {\n        var element = $( this ),\n            type = this.getAttribute( \"type\" ),\n            optType = $.mobile.degradeInputs[ type ] || \"text\",\n            html, hasType, findstr, repstr;\n\n        if ( $.mobile.degradeInputs[ type ] ) {\n            html = $( \"<div>\" ).html( element.clone() ).html();\n            // In IE browsers, the type sometimes doesn't exist in the cloned markup, so we replace the closing tag instead\n            hasType = html.indexOf( \" type=\" ) > -1;\n            findstr = hasType ? /\\s+type=[\"']?\\w+['\"]?/ : /\\/?>/;\n            repstr = \" type=\\\"\" + optType + \"\\\" data-\" + $.mobile.ns + \"type=\\\"\" + type + \"\\\"\" + ( hasType ? \"\" : \">\" );\n\n            element.replaceWith( html.replace( findstr, repstr ) );\n        }\n    });\n\n};\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n\n$.widget( \"mobile.page\", $.mobile.page, {\n    options: {\n\n        // Accepts left, right and none\n        closeBtn: \"left\",\n        closeBtnText: \"Close\",\n        overlayTheme: \"a\",\n        corners: true,\n        dialog: false\n    },\n\n    _create: function() {\n        this._super();\n        if ( this.options.dialog ) {\n\n            $.extend( this, {\n                _inner: this.element.children(),\n                _headerCloseButton: null\n            });\n\n            if ( !this.options.enhanced ) {\n                this._setCloseBtn( this.options.closeBtn );\n            }\n        }\n    },\n\n    _enhance: function() {\n        this._super();\n\n        // Class the markup for dialog styling and wrap interior\n        if ( this.options.dialog ) {\n            this.element.addClass( \"ui-dialog\" )\n                .wrapInner( $( \"<div/>\", {\n\n                    // ARIA role\n                    \"role\" : \"dialog\",\n                    \"class\" : \"ui-dialog-contain ui-overlay-shadow\" +\n                        ( this.options.corners ? \" ui-corner-all\" : \"\" )\n                }));\n        }\n    },\n\n    _setOptions: function( options ) {\n        var closeButtonLocation, closeButtonText,\n            currentOpts = this.options;\n\n        if ( options.corners !== undefined ) {\n            this._inner.toggleClass( \"ui-corner-all\", !!options.corners );\n        }\n\n        if ( options.overlayTheme !== undefined ) {\n            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {\n                currentOpts.overlayTheme = options.overlayTheme;\n                this._handlePageBeforeShow();\n            }\n        }\n\n        if ( options.closeBtnText !== undefined ) {\n            closeButtonLocation = currentOpts.closeBtn;\n            closeButtonText = options.closeBtnText;\n        }\n\n        if ( options.closeBtn !== undefined ) {\n            closeButtonLocation = options.closeBtn;\n        }\n\n        if ( closeButtonLocation ) {\n            this._setCloseBtn( closeButtonLocation, closeButtonText );\n        }\n\n        this._super( options );\n    },\n\n    _handlePageBeforeShow: function () {\n        if ( this.options.overlayTheme && this.options.dialog ) {\n            this.removeContainerBackground();\n            this.setContainerBackground( this.options.overlayTheme );\n        } else {\n            this._super();\n        }\n    },\n\n    _setCloseBtn: function( location, text ) {\n        var dst,\n            btn = this._headerCloseButton;\n\n        // Sanitize value\n        location = \"left\" === location ? \"left\" : \"right\" === location ? \"right\" : \"none\";\n\n        if ( \"none\" === location ) {\n            if ( btn ) {\n                btn.remove();\n                btn = null;\n            }\n        } else if ( btn ) {\n            btn.removeClass( \"ui-btn-left ui-btn-right\" ).addClass( \"ui-btn-\" + location );\n            if ( text ) {\n                btn.text( text );\n            }\n        } else {\n            dst = this._inner.find( \":jqmData(role='header')\" ).first();\n            btn = $( \"<a></a>\", {\n                    \"href\": \"#\",\n                    \"class\": \"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-\" + location\n                })\n                .attr( \"data-\" + $.mobile.ns + \"rel\", \"back\" )\n                .text( text || this.options.closeBtnText || \"\" )\n                .prependTo( dst );\n        }\n\n        this._headerCloseButton = btn;\n    }\n});\n\n})( jQuery, this );\n\n(function( $, window, undefined ) {\n\n$.widget( \"mobile.dialog\", {\n    options: {\n\n        // Accepts left, right and none\n        closeBtn: \"left\",\n        closeBtnText: \"Close\",\n        overlayTheme: \"a\",\n        corners: true\n    },\n\n    // Override the theme set by the page plugin on pageshow\n    _handlePageBeforeShow: function() {\n        this._isCloseable = true;\n        if ( this.options.overlayTheme ) {\n            this.element\n                .page( \"removeContainerBackground\" )\n                .page( \"setContainerBackground\", this.options.overlayTheme );\n        }\n    },\n\n    _handlePageBeforeHide: function() {\n        this._isCloseable = false;\n    },\n\n    // click and submit events:\n    // - clicks and submits should use the closing transition that the dialog\n    //   opened with unless a data-transition is specified on the link/form\n    // - if the click was on the close button, or the link has a data-rel=\"back\"\n    //   it'll go back in history naturally\n    _handleVClickSubmit: function( event ) {\n        var attrs,\n            $target = $( event.target ).closest( event.type === \"vclick\" ? \"a\" : \"form\" );\n\n        if ( $target.length && !$target.jqmData( \"transition\" ) ) {\n            attrs = {};\n            attrs[ \"data-\" + $.mobile.ns + \"transition\" ] =\n                ( $.mobile.navigate.history.getActive() || {} )[ \"transition\" ] ||\n                $.mobile.defaultDialogTransition;\n            attrs[ \"data-\" + $.mobile.ns + \"direction\" ] = \"reverse\";\n            $target.attr( attrs );\n        }\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options;\n\n        // Class the markup for dialog styling and wrap interior\n        elem.addClass( \"ui-dialog\" )\n            .wrapInner( $( \"<div/>\", {\n\n                // ARIA role\n                \"role\" : \"dialog\",\n                \"class\" : \"ui-dialog-contain ui-overlay-shadow\" +\n                    ( !!opts.corners ? \" ui-corner-all\" : \"\" )\n            }));\n\n        $.extend( this, {\n            _isCloseable: false,\n            _inner: elem.children(),\n            _headerCloseButton: null\n        });\n\n        this._on( elem, {\n            vclick: \"_handleVClickSubmit\",\n            submit: \"_handleVClickSubmit\",\n            pagebeforeshow: \"_handlePageBeforeShow\",\n            pagebeforehide: \"_handlePageBeforeHide\"\n        });\n\n        this._setCloseBtn( opts.closeBtn );\n    },\n\n    _setOptions: function( options ) {\n        var closeButtonLocation, closeButtonText,\n            currentOpts = this.options;\n\n        if ( options.corners !== undefined ) {\n            this._inner.toggleClass( \"ui-corner-all\", !!options.corners );\n        }\n\n        if ( options.overlayTheme !== undefined ) {\n            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {\n                currentOpts.overlayTheme = options.overlayTheme;\n                this._handlePageBeforeShow();\n            }\n        }\n\n        if ( options.closeBtnText !== undefined ) {\n            closeButtonLocation = currentOpts.closeBtn;\n            closeButtonText = options.closeBtnText;\n        }\n\n        if ( options.closeBtn !== undefined ) {\n            closeButtonLocation = options.closeBtn;\n        }\n\n        if ( closeButtonLocation ) {\n            this._setCloseBtn( closeButtonLocation, closeButtonText );\n        }\n\n        this._super( options );\n    },\n\n    _setCloseBtn: function( location, text ) {\n        var dst,\n            btn = this._headerCloseButton;\n\n        // Sanitize value\n        location = \"left\" === location ? \"left\" : \"right\" === location ? \"right\" : \"none\";\n\n        if ( \"none\" === location ) {\n            if ( btn ) {\n                btn.remove();\n                btn = null;\n            }\n        } else if ( btn ) {\n            btn.removeClass( \"ui-btn-left ui-btn-right\" ).addClass( \"ui-btn-\" + location );\n            if ( text ) {\n                btn.text( text );\n            }\n        } else {\n            dst = this._inner.find( \":jqmData(role='header')\" ).first();\n            btn = $( \"<a></a>\", {\n                    \"role\": \"button\",\n                    \"href\": \"#\",\n                    \"class\": \"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-\" + location\n                })\n                .text( text || this.options.closeBtnText || \"\" )\n                .prependTo( dst );\n            this._on( btn, { click: \"close\" } );\n        }\n\n        this._headerCloseButton = btn;\n    },\n\n    // Close method goes back in history\n    close: function() {\n        var hist = $.mobile.navigate.history;\n\n        if ( this._isCloseable ) {\n            this._isCloseable = false;\n            // If the hash listening is enabled and there is at least one preceding history\n            // entry it's ok to go back. Initial pages with the dialog hash state are an example\n            // where the stack check is necessary\n            if ( $.mobile.hashListeningEnabled && hist.activeIndex > 0 ) {\n                $.mobile.back();\n            } else {\n                $.mobile.pageContainer.pagecontainer( \"back\" );\n            }\n        }\n    }\n});\n\n})( jQuery, this );\n\n(function( $, undefined ) {\n\nvar rInitialLetter = /([A-Z])/g,\n\n    // Construct iconpos class from iconpos value\n    iconposClass = function( iconpos ) {\n        return ( \"ui-btn-icon-\" + ( iconpos === null ? \"left\" : iconpos ) );\n    };\n\n$.widget( \"mobile.collapsible\", {\n    options: {\n        enhanced: false,\n        expandCueText: null,\n        collapseCueText: null,\n        collapsed: true,\n        heading: \"h1,h2,h3,h4,h5,h6,legend\",\n        collapsedIcon: null,\n        expandedIcon: null,\n        iconpos: null,\n        theme: null,\n        contentTheme: null,\n        inset: null,\n        corners: null,\n        mini: null\n    },\n\n    _create: function() {\n        var elem = this.element,\n            ui = {\n                accordion: elem\n                    .closest( \":jqmData(role='collapsible-set'),\" +\n                        \":jqmData(role='collapsibleset')\" +\n                        ( $.mobile.collapsibleset ? \", :mobile-collapsibleset\" :\n                            \"\" ) )\n                    .addClass( \"ui-collapsible-set\" )\n            };\n\n        this._ui = ui;\n        this._renderedOptions = this._getOptions( this.options );\n\n        if ( this.options.enhanced ) {\n            ui.heading = this.element.children( \".ui-collapsible-heading\" );\n            ui.content = ui.heading.next();\n            ui.anchor = ui.heading.children();\n            ui.status = ui.anchor.children( \".ui-collapsible-heading-status\" );\n        } else {\n            this._enhance( elem, ui );\n        }\n\n        this._on( ui.heading, {\n            \"tap\": function() {\n                ui.heading.find( \"a\" ).first().addClass( $.mobile.activeBtnClass );\n            },\n\n            \"click\": function( event ) {\n                this._handleExpandCollapse( !ui.heading.hasClass( \"ui-collapsible-heading-collapsed\" ) );\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n    },\n\n    // Adjust the keys inside options for inherited values\n    _getOptions: function( options ) {\n        var key,\n            accordion = this._ui.accordion,\n            accordionWidget = this._ui.accordionWidget;\n\n        // Copy options\n        options = $.extend( {}, options );\n\n        if ( accordion.length && !accordionWidget ) {\n            this._ui.accordionWidget =\n            accordionWidget = accordion.data( \"mobile-collapsibleset\" );\n        }\n\n        for ( key in options ) {\n\n            // Retrieve the option value first from the options object passed in and, if\n            // null, from the parent accordion or, if that's null too, or if there's no\n            // parent accordion, then from the defaults.\n            options[ key ] =\n                ( options[ key ] != null ) ? options[ key ] :\n                ( accordionWidget ) ? accordionWidget.options[ key ] :\n                accordion.length ? $.mobile.getAttribute( accordion[ 0 ],\n                    key.replace( rInitialLetter, \"-$1\" ).toLowerCase() ):\n                null;\n\n            if ( null == options[ key ] ) {\n                options[ key ] = $.mobile.collapsible.defaults[ key ];\n            }\n        }\n\n        return options;\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : prefix + value ) : \"\" );\n    },\n\n    _enhance: function( elem, ui ) {\n        var iconclass,\n            opts = this._renderedOptions,\n            contentThemeClass = this._themeClassFromOption( \"ui-body-\", opts.contentTheme );\n\n        elem.addClass( \"ui-collapsible \" +\n            ( opts.inset ? \"ui-collapsible-inset \" : \"\" ) +\n            ( opts.inset && opts.corners ? \"ui-corner-all \" : \"\" ) +\n            ( contentThemeClass ? \"ui-collapsible-themed-content \" : \"\" ) );\n        ui.originalHeading = elem.children( this.options.heading ).first(),\n        ui.content = elem\n            .wrapInner( \"<div \" +\n                \"class='ui-collapsible-content \" +\n                contentThemeClass + \"'></div>\" )\n            .children( \".ui-collapsible-content\" ),\n        ui.heading = ui.originalHeading;\n\n        // Replace collapsibleHeading if it's a legend\n        if ( ui.heading.is( \"legend\" ) ) {\n            ui.heading = $( \"<div role='heading'>\"+ ui.heading.html() +\"</div>\" );\n            ui.placeholder = $( \"<div><!-- placeholder for legend --></div>\" ).insertBefore( ui.originalHeading );\n            ui.originalHeading.remove();\n        }\n\n        iconclass = ( opts.collapsed ? ( opts.collapsedIcon ? \"ui-icon-\" + opts.collapsedIcon : \"\" ):\n            ( opts.expandedIcon ? \"ui-icon-\" + opts.expandedIcon : \"\" ) );\n\n        ui.status = $( \"<span class='ui-collapsible-heading-status'></span>\" );\n        ui.anchor = ui.heading\n            .detach()\n            //modify markup & attributes\n            .addClass( \"ui-collapsible-heading\" )\n            .append( ui.status )\n            .wrapInner( \"<a href='#' class='ui-collapsible-heading-toggle'></a>\" )\n            .find( \"a\" )\n                .first()\n                .addClass( \"ui-btn \" +\n                    ( iconclass ? iconclass + \" \" : \"\" ) +\n                    ( iconclass ? iconposClass( opts.iconpos ) +\n                        \" \" : \"\" ) +\n                    this._themeClassFromOption( \"ui-btn-\", opts.theme ) + \" \" +\n                    ( opts.mini ? \"ui-mini \" : \"\" ) );\n\n        //drop heading in before content\n        ui.heading.insertBefore( ui.content );\n\n        this._handleExpandCollapse( this.options.collapsed );\n\n        return ui;\n    },\n\n    refresh: function() {\n        this._applyOptions( this.options );\n        this._renderedOptions = this._getOptions( this.options );\n    },\n\n    _applyOptions: function( options ) {\n        var isCollapsed, newTheme, oldTheme, hasCorners, hasIcon,\n            elem = this.element,\n            currentOpts = this._renderedOptions,\n            ui = this._ui,\n            anchor = ui.anchor,\n            status = ui.status,\n            opts = this._getOptions( options );\n\n        // First and foremost we need to make sure the collapsible is in the proper\n        // state, in case somebody decided to change the collapsed option at the\n        // same time as another option\n        if ( options.collapsed !== undefined ) {\n            this._handleExpandCollapse( options.collapsed );\n        }\n\n        isCollapsed = elem.hasClass( \"ui-collapsible-collapsed\" );\n\n        // We only need to apply the cue text for the current state right away.\n        // The cue text for the alternate state will be stored in the options\n        // and applied the next time the collapsible's state is toggled\n        if ( isCollapsed ) {\n            if ( opts.expandCueText !== undefined ) {\n                status.text( opts.expandCueText );\n            }\n        } else {\n            if ( opts.collapseCueText !== undefined ) {\n                status.text( opts.collapseCueText );\n            }\n        }\n\n        // Update icon\n\n        // Is it supposed to have an icon?\n        hasIcon =\n\n            // If the collapsedIcon is being set, consult that\n            ( opts.collapsedIcon !== undefined ? opts.collapsedIcon !== false :\n\n                // Otherwise consult the existing option value\n                currentOpts.collapsedIcon !== false );\n\n\n        // If any icon-related options have changed, make sure the new icon\n        // state is reflected by first removing all icon-related classes\n        // reflecting the current state and then adding all icon-related\n        // classes for the new state\n        if ( !( opts.iconpos === undefined &&\n            opts.collapsedIcon === undefined &&\n            opts.expandedIcon === undefined ) ) {\n\n            // Remove all current icon-related classes\n            anchor.removeClass( [ iconposClass( currentOpts.iconpos ) ]\n                .concat( ( currentOpts.expandedIcon ?\n                    [ \"ui-icon-\" + currentOpts.expandedIcon ] : [] ) )\n                .concat( ( currentOpts.collapsedIcon ?\n                    [ \"ui-icon-\" + currentOpts.collapsedIcon ] : [] ) )\n                .join( \" \" ) );\n\n            // Add new classes if an icon is supposed to be present\n            if ( hasIcon ) {\n                anchor.addClass(\n                    [ iconposClass( opts.iconpos !== undefined ?\n                        opts.iconpos : currentOpts.iconpos ) ]\n                        .concat( isCollapsed ?\n                            [ \"ui-icon-\" + ( opts.collapsedIcon !== undefined ?\n                                opts.collapsedIcon :\n                                currentOpts.collapsedIcon ) ] :\n                            [ \"ui-icon-\" + ( opts.expandedIcon !== undefined ?\n                                opts.expandedIcon :\n                                currentOpts.expandedIcon ) ] )\n                        .join( \" \" ) );\n            }\n        }\n\n        if ( opts.theme !== undefined ) {\n            oldTheme = this._themeClassFromOption( \"ui-btn-\", currentOpts.theme );\n            newTheme = this._themeClassFromOption( \"ui-btn-\", opts.theme );\n            anchor.removeClass( oldTheme ).addClass( newTheme );\n        }\n\n        if ( opts.contentTheme !== undefined ) {\n            oldTheme = this._themeClassFromOption( \"ui-body-\",\n                currentOpts.contentTheme );\n            newTheme = this._themeClassFromOption( \"ui-body-\",\n                opts.contentTheme );\n            ui.content.removeClass( oldTheme ).addClass( newTheme );\n        }\n\n        if ( opts.inset !== undefined ) {\n            elem.toggleClass( \"ui-collapsible-inset\", opts.inset );\n            hasCorners = !!( opts.inset && ( opts.corners || currentOpts.corners ) );\n        }\n\n        if ( opts.corners !== undefined ) {\n            hasCorners = !!( opts.corners && ( opts.inset || currentOpts.inset ) );\n        }\n\n        if ( hasCorners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", hasCorners );\n        }\n\n        if ( opts.mini !== undefined ) {\n            anchor.toggleClass( \"ui-mini\", opts.mini );\n        }\n    },\n\n    _setOptions: function( options ) {\n        this._applyOptions( options );\n        this._super( options );\n        this._renderedOptions = this._getOptions( this.options );\n    },\n\n    _handleExpandCollapse: function( isCollapse ) {\n        var opts = this._renderedOptions,\n            ui = this._ui;\n\n        ui.status.text( isCollapse ? opts.expandCueText : opts.collapseCueText );\n        ui.heading\n            .toggleClass( \"ui-collapsible-heading-collapsed\", isCollapse )\n            .find( \"a\" ).first()\n            .toggleClass( \"ui-icon-\" + opts.expandedIcon, !isCollapse )\n\n            // logic or cause same icon for expanded/collapsed state would remove the ui-icon-class\n            .toggleClass( \"ui-icon-\" + opts.collapsedIcon, ( isCollapse || opts.expandedIcon === opts.collapsedIcon ) )\n            .removeClass( $.mobile.activeBtnClass );\n\n        this.element.toggleClass( \"ui-collapsible-collapsed\", isCollapse );\n        ui.content\n            .toggleClass( \"ui-collapsible-content-collapsed\", isCollapse )\n            .attr( \"aria-hidden\", isCollapse )\n            .trigger( \"updatelayout\" );\n        this.options.collapsed = isCollapse;\n        this._trigger( isCollapse ? \"collapse\" : \"expand\" );\n    },\n\n    expand: function() {\n        this._handleExpandCollapse( false );\n    },\n\n    collapse: function() {\n        this._handleExpandCollapse( true );\n    },\n\n    _destroy: function() {\n        var ui = this._ui,\n            opts = this.options;\n\n        if ( opts.enhanced ) {\n            return;\n        }\n\n        if ( ui.placeholder ) {\n            ui.originalHeading.insertBefore( ui.placeholder );\n            ui.placeholder.remove();\n            ui.heading.remove();\n        } else {\n            ui.status.remove();\n            ui.heading\n                .removeClass( \"ui-collapsible-heading ui-collapsible-heading-collapsed\" )\n                .children()\n                    .contents()\n                        .unwrap();\n        }\n\n        ui.anchor.contents().unwrap();\n        ui.content.contents().unwrap();\n        this.element\n            .removeClass( \"ui-collapsible ui-collapsible-collapsed \" +\n                \"ui-collapsible-themed-content ui-collapsible-inset ui-corner-all\" );\n    }\n});\n\n// Defaults to be used by all instances of collapsible if per-instance values\n// are unset or if nothing is specified by way of inheritance from an accordion.\n// Note that this hash does not contain options \"collapsed\" or \"heading\",\n// because those are not inheritable.\n$.mobile.collapsible.defaults = {\n    expandCueText: \" click to expand contents\",\n    collapseCueText: \" click to collapse contents\",\n    collapsedIcon: \"plus\",\n    contentTheme: \"inherit\",\n    expandedIcon: \"minus\",\n    iconpos: \"left\",\n    inset: true,\n    corners: true,\n    theme: \"inherit\",\n    mini: false\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar uiScreenHiddenRegex = /\\bui-screen-hidden\\b/;\nfunction noHiddenClass( elements ) {\n    var index,\n        length = elements.length,\n        result = [];\n\n    for ( index = 0; index < length; index++ ) {\n        if ( !elements[ index ].className.match( uiScreenHiddenRegex ) ) {\n            result.push( elements[ index ] );\n        }\n    }\n\n    return $( result );\n}\n\n$.mobile.behaviors.addFirstLastClasses = {\n    _getVisibles: function( $els, create ) {\n        var visibles;\n\n        if ( create ) {\n            visibles = noHiddenClass( $els );\n        } else {\n            visibles = $els.filter( \":visible\" );\n            if ( visibles.length === 0 ) {\n                visibles = noHiddenClass( $els );\n            }\n        }\n\n        return visibles;\n    },\n\n    _addFirstLastClasses: function( $els, $visibles, create ) {\n        $els.removeClass( \"ui-first-child ui-last-child\" );\n        $visibles.eq( 0 ).addClass( \"ui-first-child\" ).end().last().addClass( \"ui-last-child\" );\n        if ( !create ) {\n            this.element.trigger( \"updatelayout\" );\n        }\n    },\n\n    _removeFirstLastClasses: function( $els ) {\n        $els.removeClass( \"ui-first-child ui-last-child\" );\n    }\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar childCollapsiblesSelector = \":mobile-collapsible, \" + $.mobile.collapsible.initSelector;\n\n$.widget( \"mobile.collapsibleset\", $.extend( {\n\n    // The initSelector is deprecated as of 1.4.0. In 1.5.0 we will use\n    // :jqmData(role='collapsibleset') which will allow us to get rid of the line\n    // below altogether, because the autoinit will generate such an initSelector\n    initSelector: \":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')\",\n\n    options: $.extend( {\n        enhanced: false\n    }, $.mobile.collapsible.defaults ),\n\n    _handleCollapsibleExpand: function( event ) {\n        var closestCollapsible = $( event.target ).closest( \".ui-collapsible\" );\n\n        if ( closestCollapsible.parent().is( \":mobile-collapsibleset, :jqmData(role='collapsible-set')\" ) ) {\n            closestCollapsible\n                .siblings( \".ui-collapsible:not(.ui-collapsible-collapsed)\" )\n                .collapsible( \"collapse\" );\n        }\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options;\n\n        $.extend( this, {\n            _classes: \"\"\n        });\n\n        if ( !opts.enhanced ) {\n            elem.addClass( \"ui-collapsible-set \" +\n                this._themeClassFromOption( \"ui-group-theme-\", opts.theme ) + \" \" +\n                ( opts.corners && opts.inset ? \"ui-corner-all \" : \"\" ) );\n            this.element.find( $.mobile.collapsible.initSelector ).collapsible();\n        }\n\n        this._on( elem, { collapsibleexpand: \"_handleCollapsibleExpand\" } );\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : prefix + value ) : \"\" );\n    },\n\n    _init: function() {\n        this._refresh( true );\n\n        // Because the corners are handled by the collapsible itself and the default state is collapsed\n        // That was causing https://github.com/jquery/jquery-mobile/issues/4116\n        this.element\n            .children( childCollapsiblesSelector )\n            .filter( \":jqmData(collapsed='false')\" )\n            .collapsible( \"expand\" );\n    },\n\n    _setOptions: function( options ) {\n        var ret, hasCorners,\n            elem = this.element,\n            themeClass = this._themeClassFromOption( \"ui-group-theme-\", options.theme );\n\n        if ( themeClass ) {\n            elem\n                .removeClass( this._themeClassFromOption( \"ui-group-theme-\", this.options.theme ) )\n                .addClass( themeClass );\n        }\n\n        if ( options.inset !== undefined ) {\n            hasCorners = !!( options.inset && ( options.corners || this.options.corners ) );\n        }\n\n        if ( options.corners !== undefined ) {\n            hasCorners = !!( options.corners && ( options.inset || this.options.inset ) );\n        }\n\n        if ( hasCorners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", hasCorners );\n        }\n\n        ret = this._super( options );\n        this.element.children( \":mobile-collapsible\" ).collapsible( \"refresh\" );\n        return ret;\n    },\n\n    _destroy: function() {\n        var el = this.element;\n\n        this._removeFirstLastClasses( el.children( childCollapsiblesSelector ) );\n        el\n            .removeClass( \"ui-collapsible-set ui-corner-all \" +\n                this._themeClassFromOption( \"ui-group-theme-\", this.options.theme ) )\n            .children( \":mobile-collapsible\" )\n            .collapsible( \"destroy\" );\n    },\n\n    _refresh: function( create ) {\n        var collapsiblesInSet = this.element.children( childCollapsiblesSelector );\n\n        this.element.find( $.mobile.collapsible.initSelector ).not( \".ui-collapsible\" ).collapsible();\n\n        this._addFirstLastClasses( collapsiblesInSet, this._getVisibles( collapsiblesInSet, create ), create );\n    },\n\n    refresh: function() {\n        this._refresh( false );\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// Deprecated in 1.4\n$.fn.fieldcontain = function(/* options */) {\n    return this.addClass( \"ui-field-contain\" );\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.fn.grid = function( options ) {\n    return this.each(function() {\n\n        var $this = $( this ),\n            o = $.extend({\n                grid: null\n            }, options ),\n            $kids = $this.children(),\n            gridCols = { solo:1, a:2, b:3, c:4, d:5 },\n            grid = o.grid,\n            iterator,\n            letter;\n\n            if ( !grid ) {\n                if ( $kids.length <= 5 ) {\n                    for ( letter in gridCols ) {\n                        if ( gridCols[ letter ] === $kids.length ) {\n                            grid = letter;\n                        }\n                    }\n                } else {\n                    grid = \"a\";\n                    $this.addClass( \"ui-grid-duo\" );\n                }\n            }\n            iterator = gridCols[grid];\n\n        $this.addClass( \"ui-grid-\" + grid );\n\n        $kids.filter( \":nth-child(\" + iterator + \"n+1)\" ).addClass( \"ui-block-a\" );\n\n        if ( iterator > 1 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+2)\" ).addClass( \"ui-block-b\" );\n        }\n        if ( iterator > 2 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+3)\" ).addClass( \"ui-block-c\" );\n        }\n        if ( iterator > 3 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+4)\" ).addClass( \"ui-block-d\" );\n        }\n        if ( iterator > 4 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+5)\" ).addClass( \"ui-block-e\" );\n        }\n    });\n};\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.navbar\", {\n    options: {\n        iconpos: \"top\",\n        grid: null\n    },\n\n    _create: function() {\n\n        var $navbar = this.element,\n            $navbtns = $navbar.find( \"a, button\" ),\n            iconpos = $navbtns.filter( \":jqmData(icon)\" ).length ? this.options.iconpos : undefined;\n\n        $navbar.addClass( \"ui-navbar\" )\n            .attr( \"role\", \"navigation\" )\n            .find( \"ul\" )\n            .jqmEnhanceable()\n            .grid({ grid: this.options.grid });\n\n        $navbtns\n            .each( function() {\n                var icon = $.mobile.getAttribute( this, \"icon\" ),\n                    theme = $.mobile.getAttribute( this, \"theme\" ),\n                    classes = \"ui-btn\";\n\n                if ( theme ) {\n                    classes += \" ui-btn-\" + theme;\n                }\n                if ( icon ) {\n                    classes += \" ui-icon-\" + icon + \" ui-btn-icon-\" + iconpos;\n                }\n                $( this ).addClass( classes );\n            });\n\n        $navbar.delegate( \"a\", \"vclick\", function( /* event */ ) {\n            var activeBtn = $( this );\n\n            if ( !( activeBtn.hasClass( \"ui-state-disabled\" ) ||\n\n                // DEPRECATED as of 1.4.0 - remove after 1.4.0 release\n                // only ui-state-disabled should be present thereafter\n                activeBtn.hasClass( \"ui-disabled\" ) ||\n                activeBtn.hasClass( $.mobile.activeBtnClass ) ) ) {\n\n                $navbtns.removeClass( $.mobile.activeBtnClass );\n                activeBtn.addClass( $.mobile.activeBtnClass );\n\n                // The code below is a workaround to fix #1181\n                $( document ).one( \"pagehide\", function() {\n                    activeBtn.removeClass( $.mobile.activeBtnClass );\n                });\n            }\n        });\n\n        // Buttons in the navbar with ui-state-persist class should regain their active state before page show\n        $navbar.closest( \".ui-page\" ).bind( \"pagebeforeshow\", function() {\n            $navbtns.filter( \".ui-state-persist\" ).addClass( $.mobile.activeBtnClass );\n        });\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar getAttr = $.mobile.getAttribute;\n\n$.widget( \"mobile.listview\", $.extend( {\n\n    options: {\n        theme: null,\n        countTheme: null, /* Deprecated in 1.4 */\n        dividerTheme: null,\n        icon: \"carat-r\",\n        splitIcon: \"carat-r\",\n        splitTheme: null,\n        corners: true,\n        shadow: true,\n        inset: false\n    },\n\n    _create: function() {\n        var t = this,\n            listviewClasses = \"\";\n\n        listviewClasses += t.options.inset ? \" ui-listview-inset\" : \"\";\n\n        if ( !!t.options.inset ) {\n            listviewClasses += t.options.corners ? \" ui-corner-all\" : \"\";\n            listviewClasses += t.options.shadow ? \" ui-shadow\" : \"\";\n        }\n\n        // create listview markup\n        t.element.addClass( \" ui-listview\" + listviewClasses );\n\n        t.refresh( true );\n    },\n\n    // TODO: Remove in 1.5\n    _findFirstElementByTagName: function( ele, nextProp, lcName, ucName ) {\n        var dict = {};\n        dict[ lcName ] = dict[ ucName ] = true;\n        while ( ele ) {\n            if ( dict[ ele.nodeName ] ) {\n                return ele;\n            }\n            ele = ele[ nextProp ];\n        }\n        return null;\n    },\n    // TODO: Remove in 1.5\n    _addThumbClasses: function( containers ) {\n        var i, img, len = containers.length;\n        for ( i = 0; i < len; i++ ) {\n            img = $( this._findFirstElementByTagName( containers[ i ].firstChild, \"nextSibling\", \"img\", \"IMG\" ) );\n            if ( img.length ) {\n                $( this._findFirstElementByTagName( img[ 0 ].parentNode, \"parentNode\", \"li\", \"LI\" ) ).addClass( img.hasClass( \"ui-li-icon\" ) ? \"ui-li-has-icon\" : \"ui-li-has-thumb\" );\n            }\n        }\n    },\n\n    _getChildrenByTagName: function( ele, lcName, ucName ) {\n        var results = [],\n            dict = {};\n        dict[ lcName ] = dict[ ucName ] = true;\n        ele = ele.firstChild;\n        while ( ele ) {\n            if ( dict[ ele.nodeName ] ) {\n                results.push( ele );\n            }\n            ele = ele.nextSibling;\n        }\n        return $( results );\n    },\n\n    _beforeListviewRefresh: $.noop,\n    _afterListviewRefresh: $.noop,\n\n    refresh: function( create ) {\n        var buttonClass, pos, numli, item, itemClass, itemTheme, itemIcon, icon, a,\n            isDivider, startCount, newStartCount, value, last, splittheme, splitThemeClass, spliticon,\n            altButtonClass, dividerTheme, li,\n            o = this.options,\n            $list = this.element,\n            ol = !!$.nodeName( $list[ 0 ], \"ol\" ),\n            start = $list.attr( \"start\" ),\n            itemClassDict = {},\n            countBubbles = $list.find( \".ui-li-count\" ),\n            countTheme = getAttr( $list[ 0 ], \"counttheme\" ) || this.options.countTheme,\n            countThemeClass = countTheme ? \"ui-body-\" + countTheme : \"ui-body-inherit\";\n\n        if ( o.theme ) {\n            $list.addClass( \"ui-group-theme-\" + o.theme );\n        }\n\n        // Check if a start attribute has been set while taking a value of 0 into account\n        if ( ol && ( start || start === 0 ) ) {\n            startCount = parseInt( start, 10 ) - 1;\n            $list.css( \"counter-reset\", \"listnumbering \" + startCount );\n        }\n\n        this._beforeListviewRefresh();\n\n        li = this._getChildrenByTagName( $list[ 0 ], \"li\", \"LI\" );\n\n        for ( pos = 0, numli = li.length; pos < numli; pos++ ) {\n            item = li.eq( pos );\n            itemClass = \"\";\n\n            if ( create || item[ 0 ].className.search( /\\bui-li-static\\b|\\bui-li-divider\\b/ ) < 0 ) {\n                a = this._getChildrenByTagName( item[ 0 ], \"a\", \"A\" );\n                isDivider = ( getAttr( item[ 0 ], \"role\" ) === \"list-divider\" );\n                value = item.attr( \"value\" );\n                itemTheme = getAttr( item[ 0 ], \"theme\" );\n\n                if ( a.length && a[ 0 ].className.search( /\\bui-btn\\b/ ) < 0 && !isDivider ) {\n                    itemIcon = getAttr( item[ 0 ], \"icon\" );\n                    icon = ( itemIcon === false ) ? false : ( itemIcon || o.icon );\n\n                    // TODO: Remove in 1.5 together with links.js (links.js / .ui-link deprecated in 1.4)\n                    a.removeClass( \"ui-link\" );\n\n                    buttonClass = \"ui-btn\";\n\n                    if ( itemTheme ) {\n                        buttonClass += \" ui-btn-\" + itemTheme;\n                    }\n\n                    if ( a.length > 1 ) {\n                        itemClass = \"ui-li-has-alt\";\n\n                        last = a.last();\n                        splittheme = getAttr( last[ 0 ], \"theme\" ) || o.splitTheme || getAttr( item[ 0 ], \"theme\", true );\n                        splitThemeClass = splittheme ? \" ui-btn-\" + splittheme : \"\";\n                        spliticon = getAttr( last[ 0 ], \"icon\" ) || getAttr( item[ 0 ], \"icon\" ) || o.splitIcon;\n                        altButtonClass = \"ui-btn ui-btn-icon-notext ui-icon-\" + spliticon + splitThemeClass;\n\n                        last\n                            .attr( \"title\", $.trim( last.getEncodedText() ) )\n                            .addClass( altButtonClass )\n                            .empty();\n\n                        // Reduce to the first anchor, because only the first gets the buttonClass\n                        a = a.first();\n                    } else if ( icon ) {\n                        buttonClass += \" ui-btn-icon-right ui-icon-\" + icon;\n                    }\n\n                    // Apply buttonClass to the (first) anchor\n                    a.addClass( buttonClass );\n                } else if ( isDivider ) {\n                    dividerTheme = ( getAttr( item[ 0 ], \"theme\" ) || o.dividerTheme || o.theme );\n\n                    itemClass = \"ui-li-divider ui-bar-\" + ( dividerTheme ? dividerTheme : \"inherit\" );\n\n                    item.attr( \"role\", \"heading\" );\n                } else if ( a.length <= 0 ) {\n                    itemClass = \"ui-li-static ui-body-\" + ( itemTheme ? itemTheme : \"inherit\" );\n                }\n                if ( ol && value ) {\n                    newStartCount = parseInt( value , 10 ) - 1;\n\n                    item.css( \"counter-reset\", \"listnumbering \" + newStartCount );\n                }\n            }\n\n            // Instead of setting item class directly on the list item\n            // at this point in time, push the item into a dictionary\n            // that tells us what class to set on it so we can do this after this\n            // processing loop is finished.\n\n            if ( !itemClassDict[ itemClass ] ) {\n                itemClassDict[ itemClass ] = [];\n            }\n\n            itemClassDict[ itemClass ].push( item[ 0 ] );\n        }\n\n        // Set the appropriate listview item classes on each list item.\n        // The main reason we didn't do this\n        // in the for-loop above is because we can eliminate per-item function overhead\n        // by calling addClass() and children() once or twice afterwards. This\n        // can give us a significant boost on platforms like WP7.5.\n\n        for ( itemClass in itemClassDict ) {\n            $( itemClassDict[ itemClass ] ).addClass( itemClass );\n        }\n\n        countBubbles.each( function() {\n            $( this ).closest( \"li\" ).addClass( \"ui-li-has-count\" );\n        });\n        if ( countThemeClass ) {\n            countBubbles.not( \"[class*='ui-body-']\" ).addClass( countThemeClass );\n        }\n\n        // Deprecated in 1.4. From 1.5 you have to add class ui-li-has-thumb or ui-li-has-icon to the LI.\n        this._addThumbClasses( li );\n        this._addThumbClasses( li.find( \".ui-btn\" ) );\n\n        this._afterListviewRefresh();\n\n        this._addFirstLastClasses( li, this._getVisibles( li, create ), create );\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nfunction defaultAutodividersSelector( elt ) {\n    // look for the text in the given element\n    var text = $.trim( elt.text() ) || null;\n\n    if ( !text ) {\n        return null;\n    }\n\n    // create the text for the divider (first uppercased letter)\n    text = text.slice( 0, 1 ).toUpperCase();\n\n    return text;\n}\n\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        autodividers: false,\n        autodividersSelector: defaultAutodividersSelector\n    },\n\n    _beforeListviewRefresh: function() {\n        if ( this.options.autodividers ) {\n            this._replaceDividers();\n            this._superApply( arguments );\n        }\n    },\n\n    _replaceDividers: function() {\n        var i, lis, li, dividerText,\n            lastDividerText = null,\n            list = this.element,\n            divider;\n\n        list.children( \"li:jqmData(role='list-divider')\" ).remove();\n\n        lis = list.children( \"li\" );\n\n        for ( i = 0; i < lis.length ; i++ ) {\n            li = lis[ i ];\n            dividerText = this.options.autodividersSelector( $( li ) );\n\n            if ( dividerText && lastDividerText !== dividerText ) {\n                divider = document.createElement( \"li\" );\n                divider.appendChild( document.createTextNode( dividerText ) );\n                divider.setAttribute( \"data-\" + $.mobile.ns + \"role\", \"list-divider\" );\n                li.parentNode.insertBefore( divider, li );\n            }\n\n            lastDividerText = dividerText;\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar rdivider = /(^|\\s)ui-li-divider($|\\s)/,\n    rhidden = /(^|\\s)ui-screen-hidden($|\\s)/;\n\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        hideDividers: false\n    },\n\n    _afterListviewRefresh: function() {\n        var items, idx, item, hideDivider = true;\n\n        this._superApply( arguments );\n\n        if ( this.options.hideDividers ) {\n            items = this._getChildrenByTagName( this.element[ 0 ], \"li\", \"LI\" );\n            for ( idx = items.length - 1 ; idx > -1 ; idx-- ) {\n                item = items[ idx ];\n                if ( item.className.match( rdivider ) ) {\n                    if ( hideDivider ) {\n                        item.className = item.className + \" ui-screen-hidden\";\n                    }\n                    hideDivider = true;\n                } else {\n                    if ( !item.className.match( rhidden ) ) {\n                        hideDivider = false;\n                    }\n                }\n            }\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.nojs = function( target ) {\n    $( \":jqmData(role='nojs')\", target ).addClass( \"ui-nojs\" );\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.behaviors.formReset = {\n    _handleFormReset: function() {\n        this._on( this.element.closest( \"form\" ), {\n            reset: function() {\n                this._delay( \"_reset\" );\n            }\n        });\n    }\n};\n\n})( jQuery );\n\n/*\n* \"checkboxradio\" plugin\n*/\n\n(function( $, undefined ) {\n\nvar escapeId = $.mobile.path.hashToSelector;\n\n$.widget( \"mobile.checkboxradio\", $.extend( {\n\n    initSelector: \"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))\",\n\n    options: {\n        theme: \"inherit\",\n        mini: false,\n        wrapperClass: null,\n        enhanced: false,\n        iconpos: \"left\"\n\n    },\n    _create: function() {\n        var input = this.element,\n            o = this.options,\n            inheritAttr = function( input, dataAttr ) {\n                return input.jqmData( dataAttr ) ||\n                    input.closest( \"form, fieldset\" ).jqmData( dataAttr );\n            },\n            label = this.options.enhanced ?\n                {\n                    element: this.element.siblings( \"label\" ),\n                    isParent: false\n                } :\n                this._findLabel(),\n            inputtype = input[0].type,\n            checkedClass = \"ui-\" + inputtype + \"-on\",\n            uncheckedClass = \"ui-\" + inputtype + \"-off\";\n\n        if ( inputtype !== \"checkbox\" && inputtype !== \"radio\" ) {\n            return;\n        }\n\n        if ( this.element[0].disabled ) {\n            this.options.disabled = true;\n        }\n\n        o.iconpos = inheritAttr( input, \"iconpos\" ) ||\n            label.element.attr( \"data-\" + $.mobile.ns + \"iconpos\" ) || o.iconpos,\n\n        // Establish options\n        o.mini = inheritAttr( input, \"mini\" ) || o.mini;\n\n        // Expose for other methods\n        $.extend( this, {\n            input: input,\n            label: label.element,\n            labelIsParent: label.isParent,\n            inputtype: inputtype,\n            checkedClass: checkedClass,\n            uncheckedClass: uncheckedClass\n        });\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( label.element, {\n            vmouseover: \"_handleLabelVMouseOver\",\n            vclick: \"_handleLabelVClick\"\n        });\n\n        this._on( input, {\n            vmousedown: \"_cacheVals\",\n            vclick: \"_handleInputVClick\",\n            focus: \"_handleInputFocus\",\n            blur: \"_handleInputBlur\"\n        });\n\n        this._handleFormReset();\n        this.refresh();\n    },\n\n    _findLabel: function() {\n        var parentLabel, label, isParent,\n            input = this.element,\n            labelsList = input[ 0 ].labels;\n\n        if( labelsList && labelsList.length > 0 ) {\n            label = $( labelsList[ 0 ] );\n            isParent = $.contains( label[ 0 ], input[ 0 ] );\n        } else {\n            parentLabel = input.closest( \"label\" );\n            isParent = ( parentLabel.length > 0 );\n\n            // NOTE: Windows Phone could not find the label through a selector\n            // filter works though.\n            label = isParent ? parentLabel :\n                $( this.document[ 0 ].getElementsByTagName( \"label\" ) )\n                    .filter( \"[for='\" + escapeId( input[ 0 ].id ) + \"']\" )\n                    .first();\n        }\n\n        return {\n            element: label,\n            isParent: isParent\n        };\n    },\n\n    _enhance: function() {\n        this.label.addClass( \"ui-btn ui-corner-all\");\n\n        if ( this.labelIsParent ) {\n            this.input.add( this.label ).wrapAll( this._wrapper() );\n        } else {\n            //this.element.replaceWith( this.input.add( this.label ).wrapAll( this._wrapper() ) );\n            this.element.wrap( this._wrapper() );\n            this.element.parent().prepend( this.label );\n        }\n\n        // Wrap the input + label in a div\n\n        this._setOptions({\n            \"theme\": this.options.theme,\n            \"iconpos\": this.options.iconpos,\n            \"mini\": this.options.mini\n        });\n\n    },\n\n    _wrapper: function() {\n        return $( \"<div class='\"  +\n            ( this.options.wrapperClass ? this.options.wrapperClass : \"\" ) +\n            \" ui-\" + this.inputtype +\n            ( this.options.disabled ? \" ui-state-disabled\" : \"\" ) + \"' ></div>\" );\n    },\n\n    _handleInputFocus: function() {\n        this.label.addClass( $.mobile.focusClass );\n    },\n\n    _handleInputBlur: function() {\n        this.label.removeClass( $.mobile.focusClass );\n    },\n\n    _handleInputVClick: function() {\n        // Adds checked attribute to checked input when keyboard is used\n        this.element.prop( \"checked\", this.element.is( \":checked\" ) );\n        this._getInputSet().not( this.element ).prop( \"checked\", false );\n        this._updateAll( true );\n    },\n\n    _handleLabelVMouseOver: function( event ) {\n        if ( this.label.parent().hasClass( \"ui-state-disabled\" ) ) {\n            event.stopPropagation();\n        }\n    },\n\n    _handleLabelVClick: function( event ) {\n        var input = this.element;\n\n        if ( input.is( \":disabled\" ) ) {\n            event.preventDefault();\n            return;\n        }\n\n        this._cacheVals();\n\n        input.prop( \"checked\", this.inputtype === \"radio\" && true || !input.prop( \"checked\" ) );\n\n        // trigger click handler's bound directly to the input as a substitute for\n        // how label clicks behave normally in the browsers\n        // TODO: it would be nice to let the browser's handle the clicks and pass them\n        //       through to the associate input. we can swallow that click at the parent\n        //       wrapper element level\n        input.triggerHandler( \"click\" );\n\n        // Input set for common radio buttons will contain all the radio\n        // buttons, but will not for checkboxes. clearing the checked status\n        // of other radios ensures the active button state is applied properly\n        this._getInputSet().not( input ).prop( \"checked\", false );\n\n        this._updateAll();\n        return false;\n    },\n\n    _cacheVals: function() {\n        this._getInputSet().each( function() {\n            $( this ).attr(\"data-\" + $.mobile.ns + \"cacheVal\", this.checked );\n        });\n    },\n\n    // Returns those radio buttons that are supposed to be in the same group as\n    // this radio button. In the case of a checkbox or a radio lacking a name\n    // attribute, it returns this.element.\n    _getInputSet: function() {\n        var selector, formId,\n            radio = this.element[ 0 ],\n            name = radio.name,\n            form = radio.form,\n            doc = this.element.parents().last().get( 0 ),\n\n            // A radio is always a member of its own group\n            radios = this.element;\n\n        // Only start running selectors if this is an attached radio button with a name\n        if ( name && this.inputtype === \"radio\" && doc ) {\n            selector = \"input[type='radio'][name='\" + escapeId( name ) + \"']\";\n\n            // If we're inside a form\n            if ( form ) {\n                formId = form.getAttribute( \"id\" );\n\n                // If the form has an ID, collect radios scattered throught the document which\n                // nevertheless are part of the form by way of the value of their form attribute\n                if ( formId ) {\n                    radios = $( selector + \"[form='\" + escapeId( formId ) + \"']\", doc );\n                }\n\n                // Also add to those the radios in the form itself\n                radios = $( form ).find( selector ).filter( function() {\n\n                    // Some radios inside the form may belong to some other form by virtue of\n                    // having a form attribute defined on them, so we must filter them out here\n                    return ( this.form === form );\n                }).add( radios );\n\n            // If we're outside a form\n            } else {\n\n                // Collect all those radios which are also outside of a form and match our name\n                radios = $( selector, doc ).filter( function() {\n                    return !this.form;\n                });\n            }\n        }\n        return radios;\n    },\n\n    _updateAll: function( changeTriggered ) {\n        var self = this;\n\n        this._getInputSet().each( function() {\n            var $this = $( this );\n\n            if ( ( this.checked || self.inputtype === \"checkbox\" ) && !changeTriggered ) {\n                $this.trigger( \"change\" );\n            }\n        })\n        .checkboxradio( \"refresh\" );\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    // Is the widget supposed to display an icon?\n    _hasIcon: function() {\n        var controlgroup, controlgroupWidget,\n            controlgroupConstructor = $.mobile.controlgroup;\n\n        // If the controlgroup widget is defined ...\n        if ( controlgroupConstructor ) {\n            controlgroup = this.element.closest(\n                \":mobile-controlgroup,\" +\n                controlgroupConstructor.prototype.initSelector );\n\n            // ... and the checkbox is in a controlgroup ...\n            if ( controlgroup.length > 0 ) {\n\n                // ... look for a controlgroup widget instance, and ...\n                controlgroupWidget = $.data( controlgroup[ 0 ], \"mobile-controlgroup\" );\n\n                // ... if found, decide based on the option value, ...\n                return ( ( controlgroupWidget ? controlgroupWidget.options.type :\n\n                    // ... otherwise decide based on the \"type\" data attribute.\n                    controlgroup.attr( \"data-\" + $.mobile.ns + \"type\" ) ) !== \"horizontal\" );\n            }\n        }\n\n        // Normally, the widget displays an icon.\n        return true;\n    },\n\n    refresh: function() {\n        var isChecked = this.element[ 0 ].checked,\n            active = $.mobile.activeBtnClass,\n            iconposClass = \"ui-btn-icon-\" + this.options.iconpos,\n            addClasses = [],\n            removeClasses = [];\n\n        if ( this._hasIcon() ) {\n            removeClasses.push( active );\n            addClasses.push( iconposClass );\n        } else {\n            removeClasses.push( iconposClass );\n            ( isChecked ? addClasses : removeClasses ).push( active );\n        }\n\n        if ( isChecked ) {\n            addClasses.push( this.checkedClass );\n            removeClasses.push( this.uncheckedClass );\n        } else {\n            addClasses.push( this.uncheckedClass );\n            removeClasses.push( this.checkedClass );\n        }\n\n        this.widget().toggleClass( \"ui-state-disabled\", this.element.prop( \"disabled\" ) );\n\n        this.label\n            .addClass( addClasses.join( \" \" ) )\n            .removeClass( removeClasses.join( \" \" ) );\n    },\n\n    widget: function() {\n        return this.label.parent();\n    },\n\n    _setOptions: function( options ) {\n        var label = this.label,\n            currentOptions = this.options,\n            outer = this.widget(),\n            hasIcon = this._hasIcon();\n\n        if ( options.disabled !== undefined ) {\n            this.input.prop( \"disabled\", !!options.disabled );\n            outer.toggleClass( \"ui-state-disabled\", !!options.disabled );\n        }\n        if ( options.mini !== undefined ) {\n            outer.toggleClass( \"ui-mini\", !!options.mini );\n        }\n        if ( options.theme !== undefined ) {\n            label\n                .removeClass( \"ui-btn-\" + currentOptions.theme )\n                .addClass( \"ui-btn-\" + options.theme );\n        }\n        if ( options.wrapperClass !== undefined ) {\n            outer\n                .removeClass( currentOptions.wrapperClass )\n                .addClass( options.wrapperClass );\n        }\n        if ( options.iconpos !== undefined && hasIcon ) {\n            label.removeClass( \"ui-btn-icon-\" + currentOptions.iconpos ).addClass( \"ui-btn-icon-\" + options.iconpos );\n        } else if ( !hasIcon ) {\n            label.removeClass( \"ui-btn-icon-\" + currentOptions.iconpos );\n        }\n        this._super( options );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.button\", {\n\n    initSelector: \"input[type='button'], input[type='submit'], input[type='reset']\",\n\n    options: {\n        theme: null,\n        icon: null,\n        iconpos: \"left\",\n        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */\n        corners: true,\n        shadow: true,\n        inline: null,\n        mini: null,\n        wrapperClass: null,\n        enhanced: false\n    },\n\n    _create: function() {\n\n        if ( this.element.is( \":disabled\" ) ) {\n            this.options.disabled = true;\n        }\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        $.extend( this, {\n            wrapper: this.element.parent()\n        });\n\n        this._on( {\n            focus: function() {\n                this.widget().addClass( $.mobile.focusClass );\n            },\n\n            blur: function() {\n                this.widget().removeClass( $.mobile.focusClass );\n            }\n        });\n\n        this.refresh( true );\n    },\n\n    _enhance: function() {\n        this.element.wrap( this._button() );\n    },\n\n    _button: function() {\n        var options = this.options,\n            iconClasses = this._getIconClasses( this.options );\n\n        return $(\"<div class='ui-btn ui-input-btn\" +\n            ( options.wrapperClass ? \" \" + options.wrapperClass : \"\" ) +\n            ( options.theme ? \" ui-btn-\" + options.theme : \"\" ) +\n            ( options.corners ? \" ui-corner-all\" : \"\" ) +\n            ( options.shadow ? \" ui-shadow\" : \"\" ) +\n            ( options.inline ? \" ui-btn-inline\" : \"\" ) +\n            ( options.mini ? \" ui-mini\" : \"\" ) +\n            ( options.disabled ? \" ui-state-disabled\" : \"\" ) +\n            ( iconClasses ? ( \" \" + iconClasses ) : \"\" ) +\n            \"' >\" + this.element.val() + \"</div>\" );\n    },\n\n    widget: function() {\n        return this.wrapper;\n    },\n\n    _destroy: function() {\n            this.element.insertBefore( this.wrapper );\n            this.wrapper.remove();\n    },\n\n    _getIconClasses: function( options ) {\n        return ( options.icon ? ( \"ui-icon-\" + options.icon +\n            ( options.iconshadow ? \" ui-shadow-icon\" : \"\" ) + /* TODO: Deprecated in 1.4, remove in 1.5. */\n            \" ui-btn-icon-\" + options.iconpos ) : \"\" );\n    },\n\n    _setOptions: function( options ) {\n        var outer = this.widget();\n\n        if ( options.theme !== undefined ) {\n            outer\n                .removeClass( this.options.theme )\n                .addClass( \"ui-btn-\" + options.theme );\n        }\n        if ( options.corners !== undefined ) {\n            outer.toggleClass( \"ui-corner-all\", options.corners );\n        }\n        if ( options.shadow !== undefined ) {\n            outer.toggleClass( \"ui-shadow\", options.shadow );\n        }\n        if ( options.inline !== undefined ) {\n            outer.toggleClass( \"ui-btn-inline\", options.inline );\n        }\n        if ( options.mini !== undefined ) {\n            outer.toggleClass( \"ui-mini\", options.mini );\n        }\n        if ( options.disabled !== undefined ) {\n            this.element.prop( \"disabled\", options.disabled );\n            outer.toggleClass( \"ui-state-disabled\", options.disabled );\n        }\n\n        if ( options.icon !== undefined ||\n                options.iconshadow !== undefined || /* TODO: Deprecated in 1.4, remove in 1.5. */\n                options.iconpos !== undefined ) {\n            outer\n                .removeClass( this._getIconClasses( this.options ) )\n                .addClass( this._getIconClasses(\n                    $.extend( {}, this.options, options ) ) );\n        }\n\n        this._super( options );\n    },\n\n    refresh: function( create ) {\n        var originalElement,\n            isDisabled = this.element.prop( \"disabled\" );\n\n        if ( this.options.icon && this.options.iconpos === \"notext\" && this.element.attr( \"title\" ) ) {\n            this.element.attr( \"title\", this.element.val() );\n        }\n        if ( !create ) {\n            originalElement = this.element.detach();\n            $( this.wrapper ).text( this.element.val() ).append( originalElement );\n        }\n        if ( this.options.disabled !== isDisabled ) {\n            this._setOptions({ disabled: isDisabled });\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $ ) {\n    var    meta = $( \"meta[name=viewport]\" ),\n        initialContent = meta.attr( \"content\" ),\n        disabledZoom = initialContent + \",maximum-scale=1, user-scalable=no\",\n        enabledZoom = initialContent + \",maximum-scale=10, user-scalable=yes\",\n        disabledInitially = /(user-scalable[\\s]*=[\\s]*no)|(maximum-scale[\\s]*=[\\s]*1)[$,\\s]/.test( initialContent );\n\n    $.mobile.zoom = $.extend( {}, {\n        enabled: !disabledInitially,\n        locked: false,\n        disable: function( lock ) {\n            if ( !disabledInitially && !$.mobile.zoom.locked ) {\n                meta.attr( \"content\", disabledZoom );\n                $.mobile.zoom.enabled = false;\n                $.mobile.zoom.locked = lock || false;\n            }\n        },\n        enable: function( unlock ) {\n            if ( !disabledInitially && ( !$.mobile.zoom.locked || unlock === true ) ) {\n                meta.attr( \"content\", enabledZoom );\n                $.mobile.zoom.enabled = true;\n                $.mobile.zoom.locked = false;\n            }\n        },\n        restore: function() {\n            if ( !disabledInitially ) {\n                meta.attr( \"content\", initialContent );\n                $.mobile.zoom.enabled = true;\n            }\n        }\n    });\n\n}( jQuery ));\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.textinput\", {\n    initSelector: \"input[type='text'],\" +\n        \"input[type='search'],\" +\n        \":jqmData(type='search'),\" +\n        \"input[type='number'],\" +\n        \":jqmData(type='number'),\" +\n        \"input[type='password'],\" +\n        \"input[type='email'],\" +\n        \"input[type='url'],\" +\n        \"input[type='tel'],\" +\n        \"textarea,\" +\n        \"input[type='time'],\" +\n        \"input[type='date'],\" +\n        \"input[type='month'],\" +\n        \"input[type='week'],\" +\n        \"input[type='datetime'],\" +\n        \"input[type='datetime-local'],\" +\n        \"input[type='color'],\" +\n        \"input:not([type]),\" +\n        \"input[type='file']\",\n\n    options: {\n        theme: null,\n        corners: true,\n        mini: false,\n        // This option defaults to true on iOS devices.\n        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( \"AppleWebKit\" ) > -1,\n        wrapperClass: \"\",\n        enhanced: false\n    },\n\n    _create: function() {\n\n        var options = this.options,\n            isSearch = this.element.is( \"[type='search'], :jqmData(type='search')\" ),\n            isTextarea = this.element[ 0 ].tagName === \"TEXTAREA\",\n            isRange = this.element.is( \"[data-\" + ( $.mobile.ns || \"\" ) + \"type='range']\" ),\n            inputNeedsWrap = ( (this.element.is( \"input\" ) ||\n                this.element.is( \"[data-\" + ( $.mobile.ns || \"\" ) + \"type='search']\" ) ) &&\n                    !isRange );\n\n        if ( this.element.prop( \"disabled\" ) ) {\n            options.disabled = true;\n        }\n\n        $.extend( this, {\n            classes: this._classesFromOptions(),\n            isSearch: isSearch,\n            isTextarea: isTextarea,\n            isRange: isRange,\n            inputNeedsWrap: inputNeedsWrap\n        });\n\n        this._autoCorrect();\n\n        if ( !options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( {\n            \"focus\": \"_handleFocus\",\n            \"blur\": \"_handleBlur\"\n        });\n\n    },\n\n    refresh: function() {\n        this.setOptions({\n            \"disabled\" : this.element.is( \":disabled\" )\n        });\n    },\n\n    _enhance: function() {\n        var elementClasses = [];\n\n        if ( this.isTextarea ) {\n            elementClasses.push( \"ui-input-text\" );\n        }\n\n        if ( this.isTextarea || this.isRange ) {\n            elementClasses.push( \"ui-shadow-inset\" );\n        }\n\n        //\"search\" and \"text\" input widgets\n        if ( this.inputNeedsWrap ) {\n            this.element.wrap( this._wrap() );\n        } else {\n            elementClasses = elementClasses.concat( this.classes );\n        }\n\n        this.element.addClass( elementClasses.join( \" \" ) );\n    },\n\n    widget: function() {\n        return ( this.inputNeedsWrap ) ? this.element.parent() : this.element;\n    },\n\n    _classesFromOptions: function() {\n        var options = this.options,\n            classes = [];\n\n        classes.push( \"ui-body-\" + ( ( options.theme === null ) ? \"inherit\" : options.theme ) );\n        if ( options.corners ) {\n            classes.push( \"ui-corner-all\" );\n        }\n        if ( options.mini ) {\n            classes.push( \"ui-mini\" );\n        }\n        if ( options.disabled ) {\n            classes.push( \"ui-state-disabled\" );\n        }\n        if ( options.wrapperClass ) {\n            classes.push( options.wrapperClass );\n        }\n\n        return classes;\n    },\n\n    _wrap: function() {\n        return $( \"<div class='\" +\n            ( this.isSearch ? \"ui-input-search \" : \"ui-input-text \" ) +\n            this.classes.join( \" \" ) + \" \" +\n            \"ui-shadow-inset'></div>\" );\n    },\n\n    _autoCorrect: function() {\n        // XXX: Temporary workaround for issue 785 (Apple bug 8910589).\n        //      Turn off autocorrect and autocomplete on non-iOS 5 devices\n        //      since the popup they use can't be dismissed by the user. Note\n        //      that we test for the presence of the feature by looking for\n        //      the autocorrect property on the input element. We currently\n        //      have no test for iOS 5 or newer so we're temporarily using\n        //      the touchOverflow support flag for jQM 1.0. Yes, I feel dirty.\n        //      - jblas\n        if ( typeof this.element[0].autocorrect !== \"undefined\" &&\n            !$.support.touchOverflow ) {\n\n            // Set the attribute instead of the property just in case there\n            // is code that attempts to make modifications via HTML.\n            this.element[0].setAttribute( \"autocorrect\", \"off\" );\n            this.element[0].setAttribute( \"autocomplete\", \"off\" );\n        }\n    },\n\n    _handleBlur: function() {\n        this.widget().removeClass( $.mobile.focusClass );\n        if ( this.options.preventFocusZoom ) {\n            $.mobile.zoom.enable( true );\n        }\n    },\n\n    _handleFocus: function() {\n        // In many situations, iOS will zoom into the input upon tap, this\n        // prevents that from happening\n        if ( this.options.preventFocusZoom ) {\n            $.mobile.zoom.disable( true );\n        }\n        this.widget().addClass( $.mobile.focusClass );\n    },\n\n    _setOptions: function ( options ) {\n        var outer = this.widget();\n\n        this._super( options );\n\n        if ( !( options.disabled === undefined &&\n            options.mini === undefined &&\n            options.corners === undefined &&\n            options.theme === undefined &&\n            options.wrapperClass === undefined ) ) {\n\n            outer.removeClass( this.classes.join( \" \" ) );\n            this.classes = this._classesFromOptions();\n            outer.addClass( this.classes.join( \" \" ) );\n        }\n\n        if ( options.disabled !== undefined ) {\n            this.element.prop( \"disabled\", !!options.disabled );\n        }\n    },\n\n    _destroy: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n        if ( this.inputNeedsWrap ) {\n            this.element.unwrap();\n        }\n        this.element.removeClass( \"ui-input-text \" + this.classes.join( \" \" ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.slider\", $.extend( {\n    initSelector: \"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')\",\n\n    widgetEventPrefix: \"slide\",\n\n    options: {\n        theme: null,\n        trackTheme: null,\n        corners: true,\n        mini: false,\n        highlight: false\n    },\n\n    _create: function() {\n\n        // TODO: Each of these should have comments explain what they're for\n        var self = this,\n            control = this.element,\n            trackTheme = this.options.trackTheme || $.mobile.getAttribute( control[ 0 ], \"theme\" ),\n            trackThemeClass = trackTheme ? \" ui-bar-\" + trackTheme : \" ui-bar-inherit\",\n            cornerClass = ( this.options.corners || control.jqmData( \"corners\" ) ) ? \" ui-corner-all\" : \"\",\n            miniClass = ( this.options.mini || control.jqmData( \"mini\" ) ) ? \" ui-mini\" : \"\",\n            cType = control[ 0 ].nodeName.toLowerCase(),\n            isToggleSwitch = ( cType === \"select\" ),\n            isRangeslider = control.parent().is( \":jqmData(role='rangeslider')\" ),\n            selectClass = ( isToggleSwitch ) ? \"ui-slider-switch\" : \"\",\n            controlID = control.attr( \"id\" ),\n            $label = $( \"[for='\" + controlID + \"']\" ),\n            labelID = $label.attr( \"id\" ) || controlID + \"-label\",\n            min = !isToggleSwitch ? parseFloat( control.attr( \"min\" ) ) : 0,\n            max =  !isToggleSwitch ? parseFloat( control.attr( \"max\" ) ) : control.find( \"option\" ).length-1,\n            step = window.parseFloat( control.attr( \"step\" ) || 1 ),\n            domHandle = document.createElement( \"a\" ),\n            handle = $( domHandle ),\n            domSlider = document.createElement( \"div\" ),\n            slider = $( domSlider ),\n            valuebg = this.options.highlight && !isToggleSwitch ? (function() {\n                var bg = document.createElement( \"div\" );\n                bg.className = \"ui-slider-bg \" + $.mobile.activeBtnClass;\n                return $( bg ).prependTo( slider );\n            })() : false,\n            options,\n            wrapper,\n            j, length,\n            i, optionsCount, origTabIndex,\n            side, activeClass, sliderImg;\n\n        $label.attr( \"id\", labelID );\n        this.isToggleSwitch = isToggleSwitch;\n\n        domHandle.setAttribute( \"href\", \"#\" );\n        domSlider.setAttribute( \"role\", \"application\" );\n        domSlider.className = [ this.isToggleSwitch ? \"ui-slider ui-slider-track ui-shadow-inset \" : \"ui-slider-track ui-shadow-inset \", selectClass, trackThemeClass, cornerClass, miniClass ].join( \"\" );\n        domHandle.className = \"ui-slider-handle\";\n        domSlider.appendChild( domHandle );\n\n        handle.attr({\n            \"role\": \"slider\",\n            \"aria-valuemin\": min,\n            \"aria-valuemax\": max,\n            \"aria-valuenow\": this._value(),\n            \"aria-valuetext\": this._value(),\n            \"title\": this._value(),\n            \"aria-labelledby\": labelID\n        });\n\n        $.extend( this, {\n            slider: slider,\n            handle: handle,\n            control: control,\n            type: cType,\n            step: step,\n            max: max,\n            min: min,\n            valuebg: valuebg,\n            isRangeslider: isRangeslider,\n            dragging: false,\n            beforeStart: null,\n            userModified: false,\n            mouseMoved: false\n        });\n\n        if ( isToggleSwitch ) {\n            // TODO: restore original tabindex (if any) in a destroy method\n            origTabIndex = control.attr( \"tabindex\" );\n            if ( origTabIndex ) {\n                handle.attr( \"tabindex\", origTabIndex );\n            }\n            control.attr( \"tabindex\", \"-1\" ).focus(function() {\n                $( this ).blur();\n                handle.focus();\n            });\n\n            wrapper = document.createElement( \"div\" );\n            wrapper.className = \"ui-slider-inneroffset\";\n\n            for ( j = 0, length = domSlider.childNodes.length; j < length; j++ ) {\n                wrapper.appendChild( domSlider.childNodes[j] );\n            }\n\n            domSlider.appendChild( wrapper );\n\n            // slider.wrapInner( \"<div class='ui-slider-inneroffset'></div>\" );\n\n            // make the handle move with a smooth transition\n            handle.addClass( \"ui-slider-handle-snapping\" );\n\n            options = control.find( \"option\" );\n\n            for ( i = 0, optionsCount = options.length; i < optionsCount; i++ ) {\n                side = !i ? \"b\" : \"a\";\n                activeClass = !i ? \"\" : \" \" + $.mobile.activeBtnClass;\n                sliderImg = document.createElement( \"span\" );\n\n                sliderImg.className = [ \"ui-slider-label ui-slider-label-\", side, activeClass ].join( \"\" );\n                sliderImg.setAttribute( \"role\", \"img\" );\n                sliderImg.appendChild( document.createTextNode( options[i].innerHTML ) );\n                $( sliderImg ).prependTo( slider );\n            }\n\n            self._labels = $( \".ui-slider-label\", slider );\n\n        }\n\n        // monitor the input for updated values\n        control.addClass( isToggleSwitch ? \"ui-slider-switch\" : \"ui-slider-input\" );\n\n        this._on( control, {\n            \"change\": \"_controlChange\",\n            \"keyup\": \"_controlKeyup\",\n            \"blur\": \"_controlBlur\",\n            \"vmouseup\": \"_controlVMouseUp\"\n        });\n\n        slider.bind( \"vmousedown\", $.proxy( this._sliderVMouseDown, this ) )\n            .bind( \"vclick\", false );\n\n        // We have to instantiate a new function object for the unbind to work properly\n        // since the method itself is defined in the prototype (causing it to unbind everything)\n        this._on( document, { \"vmousemove\": \"_preventDocumentDrag\" });\n        this._on( slider.add( document ), { \"vmouseup\": \"_sliderVMouseUp\" });\n\n        slider.insertAfter( control );\n\n        // wrap in a div for styling purposes\n        if ( !isToggleSwitch && !isRangeslider ) {\n            wrapper = this.options.mini ? \"<div class='ui-slider ui-mini'>\" : \"<div class='ui-slider'>\";\n\n            control.add( slider ).wrapAll( wrapper );\n        }\n\n        // bind the handle event callbacks and set the context to the widget instance\n        this._on( this.handle, {\n            \"vmousedown\": \"_handleVMouseDown\",\n            \"keydown\": \"_handleKeydown\",\n            \"keyup\": \"_handleKeyup\"\n        });\n\n        this.handle.bind( \"vclick\", false );\n\n        this._handleFormReset();\n\n        this.refresh( undefined, undefined, true );\n    },\n\n    _setOptions: function( options ) {\n        if ( options.theme !== undefined ) {\n            this._setTheme( options.theme );\n        }\n\n        if ( options.trackTheme !== undefined ) {\n            this._setTrackTheme( options.trackTheme );\n        }\n\n        if ( options.corners !== undefined ) {\n            this._setCorners( options.corners );\n        }\n\n        if ( options.mini !== undefined ) {\n            this._setMini( options.mini );\n        }\n\n        if ( options.highlight !== undefined ) {\n            this._setHighlight( options.highlight );\n        }\n\n        if ( options.disabled !== undefined ) {\n            this._setDisabled( options.disabled );\n        }\n        this._super( options );\n    },\n\n    _controlChange: function( event ) {\n        // if the user dragged the handle, the \"change\" event was triggered from inside refresh(); don't call refresh() again\n        if ( this._trigger( \"controlchange\", event ) === false ) {\n            return false;\n        }\n        if ( !this.mouseMoved ) {\n            this.refresh( this._value(), true );\n        }\n    },\n\n    _controlKeyup: function(/* event */) { // necessary?\n        this.refresh( this._value(), true, true );\n    },\n\n    _controlBlur: function(/* event */) {\n        this.refresh( this._value(), true );\n    },\n\n    // it appears the clicking the up and down buttons in chrome on\n    // range/number inputs doesn't trigger a change until the field is\n    // blurred. Here we check thif the value has changed and refresh\n    _controlVMouseUp: function(/* event */) {\n        this._checkedRefresh();\n    },\n\n    // NOTE force focus on handle\n    _handleVMouseDown: function(/* event */) {\n        this.handle.focus();\n    },\n\n    _handleKeydown: function( event ) {\n        var index = this._value();\n        if ( this.options.disabled ) {\n            return;\n        }\n\n        // In all cases prevent the default and mark the handle as active\n        switch ( event.keyCode ) {\n            case $.mobile.keyCode.HOME:\n            case $.mobile.keyCode.END:\n            case $.mobile.keyCode.PAGE_UP:\n            case $.mobile.keyCode.PAGE_DOWN:\n            case $.mobile.keyCode.UP:\n            case $.mobile.keyCode.RIGHT:\n            case $.mobile.keyCode.DOWN:\n            case $.mobile.keyCode.LEFT:\n                event.preventDefault();\n\n                if ( !this._keySliding ) {\n                    this._keySliding = true;\n                    this.handle.addClass( \"ui-state-active\" ); /* TODO: We don't use this class for styling. Do we need to add it? */\n                }\n\n                break;\n        }\n\n        // move the slider according to the keypress\n        switch ( event.keyCode ) {\n            case $.mobile.keyCode.HOME:\n                this.refresh( this.min );\n                break;\n            case $.mobile.keyCode.END:\n                this.refresh( this.max );\n                break;\n            case $.mobile.keyCode.PAGE_UP:\n            case $.mobile.keyCode.UP:\n            case $.mobile.keyCode.RIGHT:\n                this.refresh( index + this.step );\n                break;\n            case $.mobile.keyCode.PAGE_DOWN:\n            case $.mobile.keyCode.DOWN:\n            case $.mobile.keyCode.LEFT:\n                this.refresh( index - this.step );\n                break;\n        }\n    }, // remove active mark\n\n    _handleKeyup: function(/* event */) {\n        if ( this._keySliding ) {\n            this._keySliding = false;\n            this.handle.removeClass( \"ui-state-active\" ); /* See comment above. */\n        }\n    },\n\n    _sliderVMouseDown: function( event ) {\n        // NOTE: we don't do this in refresh because we still want to\n        //       support programmatic alteration of disabled inputs\n        if ( this.options.disabled || !( event.which === 1 || event.which === 0 || event.which === undefined ) ) {\n            return false;\n        }\n        if ( this._trigger( \"beforestart\", event ) === false ) {\n            return false;\n        }\n        this.dragging = true;\n        this.userModified = false;\n        this.mouseMoved = false;\n\n        if ( this.isToggleSwitch ) {\n            this.beforeStart = this.element[0].selectedIndex;\n        }\n\n        this.refresh( event );\n        this._trigger( \"start\" );\n        return false;\n    },\n\n    _sliderVMouseUp: function() {\n        if ( this.dragging ) {\n            this.dragging = false;\n\n            if ( this.isToggleSwitch ) {\n                // make the handle move with a smooth transition\n                this.handle.addClass( \"ui-slider-handle-snapping\" );\n\n                if ( this.mouseMoved ) {\n                    // this is a drag, change the value only if user dragged enough\n                    if ( this.userModified ) {\n                        this.refresh( this.beforeStart === 0 ? 1 : 0 );\n                    } else {\n                        this.refresh( this.beforeStart );\n                    }\n                } else {\n                    // this is just a click, change the value\n                    this.refresh( this.beforeStart === 0 ? 1 : 0 );\n                }\n            }\n\n            this.mouseMoved = false;\n            this._trigger( \"stop\" );\n            return false;\n        }\n    },\n\n    _preventDocumentDrag: function( event ) {\n            // NOTE: we don't do this in refresh because we still want to\n            //       support programmatic alteration of disabled inputs\n            if ( this._trigger( \"drag\", event ) === false) {\n                return false;\n            }\n            if ( this.dragging && !this.options.disabled ) {\n\n                // this.mouseMoved must be updated before refresh() because it will be used in the control \"change\" event\n                this.mouseMoved = true;\n\n                if ( this.isToggleSwitch ) {\n                    // make the handle move in sync with the mouse\n                    this.handle.removeClass( \"ui-slider-handle-snapping\" );\n                }\n\n                this.refresh( event );\n\n                // only after refresh() you can calculate this.userModified\n                this.userModified = this.beforeStart !== this.element[0].selectedIndex;\n                return false;\n            }\n        },\n\n    _checkedRefresh: function() {\n        if ( this.value !== this._value() ) {\n            this.refresh( this._value() );\n        }\n    },\n\n    _value: function() {\n        return  this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat( this.element.val() ) ;\n    },\n\n    _reset: function() {\n        this.refresh( undefined, false, true );\n    },\n\n    refresh: function( val, isfromControl, preventInputUpdate ) {\n        // NOTE: we don't return here because we want to support programmatic\n        //       alteration of the input value, which should still update the slider\n\n        var self = this,\n            parentTheme = $.mobile.getAttribute( this.element[ 0 ], \"theme\" ),\n            theme = this.options.theme || parentTheme,\n            themeClass =  theme ? \" ui-btn-\" + theme : \"\",\n            trackTheme = this.options.trackTheme || parentTheme,\n            trackThemeClass = trackTheme ? \" ui-bar-\" + trackTheme : \" ui-bar-inherit\",\n            cornerClass = this.options.corners ? \" ui-corner-all\" : \"\",\n            miniClass = this.options.mini ? \" ui-mini\" : \"\",\n            left, width, data, tol,\n            pxStep, percent,\n            control, isInput, optionElements, min, max, step,\n            newval, valModStep, alignValue, percentPerStep,\n            handlePercent, aPercent, bPercent,\n            valueChanged;\n\n        self.slider[0].className = [ this.isToggleSwitch ? \"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset\" : \"ui-slider-track ui-shadow-inset\", trackThemeClass, cornerClass, miniClass ].join( \"\" );\n        if ( this.options.disabled || this.element.prop( \"disabled\" ) ) {\n            this.disable();\n        }\n\n        // set the stored value for comparison later\n        this.value = this._value();\n        if ( this.options.highlight && !this.isToggleSwitch && this.slider.find( \".ui-slider-bg\" ).length === 0 ) {\n            this.valuebg = (function() {\n                var bg = document.createElement( \"div\" );\n                bg.className = \"ui-slider-bg \" + $.mobile.activeBtnClass;\n                return $( bg ).prependTo( self.slider );\n            })();\n        }\n        this.handle.addClass( \"ui-btn\" + themeClass + \" ui-shadow\" );\n\n        control = this.element;\n        isInput = !this.isToggleSwitch;\n        optionElements = isInput ? [] : control.find( \"option\" );\n        min =  isInput ? parseFloat( control.attr( \"min\" ) ) : 0;\n        max = isInput ? parseFloat( control.attr( \"max\" ) ) : optionElements.length - 1;\n        step = ( isInput && parseFloat( control.attr( \"step\" ) ) > 0 ) ? parseFloat( control.attr( \"step\" ) ) : 1;\n\n        if ( typeof val === \"object\" ) {\n            data = val;\n            // a slight tolerance helped get to the ends of the slider\n            tol = 8;\n\n            left = this.slider.offset().left;\n            width = this.slider.width();\n            pxStep = width/((max-min)/step);\n            if ( !this.dragging ||\n                    data.pageX < left - tol ||\n                    data.pageX > left + width + tol ) {\n                return;\n            }\n            if ( pxStep > 1 ) {\n                percent = ( ( data.pageX - left ) / width ) * 100;\n            } else {\n                percent = Math.round( ( ( data.pageX - left ) / width ) * 100 );\n            }\n        } else {\n            if ( val == null ) {\n                val = isInput ? parseFloat( control.val() || 0 ) : control[0].selectedIndex;\n            }\n            percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;\n        }\n\n        if ( isNaN( percent ) ) {\n            return;\n        }\n\n        newval = ( percent / 100 ) * ( max - min ) + min;\n\n        //from jQuery UI slider, the following source will round to the nearest step\n        valModStep = ( newval - min ) % step;\n        alignValue = newval - valModStep;\n\n        if ( Math.abs( valModStep ) * 2 >= step ) {\n            alignValue += ( valModStep > 0 ) ? step : ( -step );\n        }\n\n        percentPerStep = 100/((max-min)/step);\n        // Since JavaScript has problems with large floats, round\n        // the final value to 5 digits after the decimal point (see jQueryUI: #4124)\n        newval = parseFloat( alignValue.toFixed(5) );\n\n        if ( typeof pxStep === \"undefined\" ) {\n            pxStep = width / ( (max-min) / step );\n        }\n        if ( pxStep > 1 && isInput ) {\n            percent = ( newval - min ) * percentPerStep * ( 1 / step );\n        }\n        if ( percent < 0 ) {\n            percent = 0;\n        }\n\n        if ( percent > 100 ) {\n            percent = 100;\n        }\n\n        if ( newval < min ) {\n            newval = min;\n        }\n\n        if ( newval > max ) {\n            newval = max;\n        }\n\n        this.handle.css( \"left\", percent + \"%\" );\n\n        this.handle[0].setAttribute( \"aria-valuenow\", isInput ? newval : optionElements.eq( newval ).attr( \"value\" ) );\n\n        this.handle[0].setAttribute( \"aria-valuetext\", isInput ? newval : optionElements.eq( newval ).getEncodedText() );\n\n        this.handle[0].setAttribute( \"title\", isInput ? newval : optionElements.eq( newval ).getEncodedText() );\n\n        if ( this.valuebg ) {\n            this.valuebg.css( \"width\", percent + \"%\" );\n        }\n\n        // drag the label widths\n        if ( this._labels ) {\n            handlePercent = this.handle.width() / this.slider.width() * 100;\n            aPercent = percent && handlePercent + ( 100 - handlePercent ) * percent / 100;\n            bPercent = percent === 100 ? 0 : Math.min( handlePercent + 100 - aPercent, 100 );\n\n            this._labels.each(function() {\n                var ab = $( this ).hasClass( \"ui-slider-label-a\" );\n                $( this ).width( ( ab ? aPercent : bPercent  ) + \"%\" );\n            });\n        }\n\n        if ( !preventInputUpdate ) {\n            valueChanged = false;\n\n            // update control\"s value\n            if ( isInput ) {\n                valueChanged = parseFloat( control.val() ) !== newval;\n                control.val( newval );\n            } else {\n                valueChanged = control[ 0 ].selectedIndex !== newval;\n                control[ 0 ].selectedIndex = newval;\n            }\n            if ( this._trigger( \"beforechange\", val ) === false) {\n                    return false;\n            }\n            if ( !isfromControl && valueChanged ) {\n                control.trigger( \"change\" );\n            }\n        }\n    },\n\n    _setHighlight: function( value ) {\n        value = !!value;\n        if ( value ) {\n            this.options.highlight = !!value;\n            this.refresh();\n        } else if ( this.valuebg ) {\n            this.valuebg.remove();\n            this.valuebg = false;\n        }\n    },\n\n    _setTheme: function( value ) {\n        this.handle\n            .removeClass( \"ui-btn-\" + this.options.theme )\n            .addClass( \"ui-btn-\" + value );\n\n        var currentTheme = this.options.theme ? this.options.theme : \"inherit\",\n            newTheme = value ? value : \"inherit\";\n\n        this.control\n            .removeClass( \"ui-body-\" + currentTheme )\n            .addClass( \"ui-body-\" + newTheme );\n    },\n\n    _setTrackTheme: function( value ) {\n        var currentTrackTheme = this.options.trackTheme ? this.options.trackTheme : \"inherit\",\n            newTrackTheme = value ? value : \"inherit\";\n\n        this.slider\n            .removeClass( \"ui-body-\" + currentTrackTheme )\n            .addClass( \"ui-body-\" + newTrackTheme );\n    },\n\n    _setMini: function( value ) {\n        value = !!value;\n        if ( !this.isToggleSwitch && !this.isRangeslider ) {\n            this.slider.parent().toggleClass( \"ui-mini\", value );\n            this.element.toggleClass( \"ui-mini\", value );\n        }\n        this.slider.toggleClass( \"ui-mini\", value );\n    },\n\n    _setCorners: function( value ) {\n        this.slider.toggleClass( \"ui-corner-all\", value );\n\n        if ( !this.isToggleSwitch ) {\n            this.control.toggleClass( \"ui-corner-all\", value );\n        }\n    },\n\n    _setDisabled: function( value ) {\n        value = !!value;\n        this.element.prop( \"disabled\", value );\n        this.slider\n            .toggleClass( \"ui-state-disabled\", value )\n            .attr( \"aria-disabled\", value );\n\n        this.element.toggleClass( \"ui-state-disabled\", value );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar popup;\n\nfunction getPopup() {\n    if ( !popup ) {\n        popup = $( \"<div></div>\", {\n            \"class\": \"ui-slider-popup ui-shadow ui-corner-all\"\n        });\n    }\n    return popup.clone();\n}\n\n$.widget( \"mobile.slider\", $.mobile.slider, {\n    options: {\n        popupEnabled: false,\n        showValue: false\n    },\n\n    _create: function() {\n        this._super();\n\n        $.extend( this, {\n            _currentValue: null,\n            _popup: null,\n            _popupVisible: false\n        });\n\n        this._setOption( \"popupEnabled\", this.options.popupEnabled );\n\n        this._on( this.handle, { \"vmousedown\" : \"_showPopup\" } );\n        this._on( this.slider.add( this.document ), { \"vmouseup\" : \"_hidePopup\" } );\n        this._refresh();\n    },\n\n    // position the popup centered 5px above the handle\n    _positionPopup: function() {\n        var dstOffset = this.handle.offset();\n\n        this._popup.offset( {\n            left: dstOffset.left + ( this.handle.width() - this._popup.width() ) / 2,\n            top: dstOffset.top - this._popup.outerHeight() - 5\n        });\n    },\n\n    _setOption: function( key, value ) {\n        this._super( key, value );\n\n        if ( key === \"showValue\" ) {\n            this.handle.html( value && !this.options.mini ? this._value() : \"\" );\n        } else if ( key === \"popupEnabled\" ) {\n            if ( value && !this._popup ) {\n                this._popup = getPopup()\n                    .addClass( \"ui-body-\" + ( this.options.theme || \"a\" ) )\n                    .hide()\n                    .insertBefore( this.element );\n            }\n        }\n    },\n\n    // show value on the handle and in popup\n    refresh: function() {\n        this._super.apply( this, arguments );\n        this._refresh();\n    },\n\n    _refresh: function() {\n        var o = this.options, newValue;\n\n        if ( o.popupEnabled ) {\n            // remove the title attribute from the handle (which is\n            // responsible for the annoying tooltip); NB we have\n            // to do it here as the jqm slider sets it every time\n            // the slider's value changes :(\n            this.handle.removeAttr( \"title\" );\n        }\n\n        newValue = this._value();\n        if ( newValue === this._currentValue ) {\n            return;\n        }\n        this._currentValue = newValue;\n\n        if ( o.popupEnabled && this._popup ) {\n            this._positionPopup();\n            this._popup.html( newValue );\n        }\n\n        if ( o.showValue && !this.options.mini ) {\n            this.handle.html( newValue );\n        }\n    },\n\n    _showPopup: function() {\n        if ( this.options.popupEnabled && !this._popupVisible ) {\n            this.handle.html( \"\" );\n            this._popup.show();\n            this._positionPopup();\n            this._popupVisible = true;\n        }\n    },\n\n    _hidePopup: function() {\n        var o = this.options;\n\n        if ( o.popupEnabled && this._popupVisible ) {\n            if ( o.showValue && !o.mini ) {\n                this.handle.html( this._value() );\n            }\n            this._popup.hide();\n            this._popupVisible = false;\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.flipswitch\", $.extend({\n\n    options: {\n        onText: \"On\",\n        offText: \"Off\",\n        theme: null,\n        enhanced: false,\n        wrapperClass: null,\n        corners: true,\n        mini: false\n    },\n\n    _create: function() {\n            if ( !this.options.enhanced ) {\n                this._enhance();\n            } else {\n                $.extend( this, {\n                    flipswitch: this.element.parent(),\n                    on: this.element.find( \".ui-flipswitch-on\" ).eq( 0 ),\n                    off: this.element.find( \".ui-flipswitch-off\" ).eq(0),\n                    type: this.element.get( 0 ).tagName\n                });\n            }\n\n            this._handleFormReset();\n\n            // Transfer tabindex to \"on\" element and make input unfocusable\n            this._originalTabIndex = this.element.attr( \"tabindex\" );\n            if ( this._originalTabIndex != null ) {\n                this.on.attr( \"tabindex\", this._originalTabIndex );\n            }\n            this.element.attr( \"tabindex\", \"-1\" );\n            this._on({\n                \"focus\" : \"_handleInputFocus\"\n            });\n\n            if ( this.element.is( \":disabled\" ) ) {\n                this._setOptions({\n                    \"disabled\": true\n                });\n            }\n\n            this._on( this.flipswitch, {\n                \"click\": \"_toggle\",\n                \"swipeleft\": \"_left\",\n                \"swiperight\": \"_right\"\n            });\n\n            this._on( this.on, {\n                \"keydown\": \"_keydown\"\n            });\n\n            this._on( {\n                \"change\": \"refresh\"\n            });\n    },\n\n    _handleInputFocus: function() {\n        this.on.focus();\n    },\n\n    widget: function() {\n        return this.flipswitch;\n    },\n\n    _left: function() {\n        this.flipswitch.removeClass( \"ui-flipswitch-active\" );\n        if ( this.type === \"SELECT\" ) {\n            this.element.get( 0 ).selectedIndex = 0;\n        } else {\n            this.element.prop( \"checked\", false );\n        }\n        this.element.trigger( \"change\" );\n    },\n\n    _right: function() {\n        this.flipswitch.addClass( \"ui-flipswitch-active\" );\n        if ( this.type === \"SELECT\" ) {\n            this.element.get( 0 ).selectedIndex = 1;\n        } else {\n            this.element.prop( \"checked\", true );\n        }\n        this.element.trigger( \"change\" );\n    },\n\n    _enhance: function() {\n        var flipswitch = $( \"<div>\" ),\n            options = this.options,\n            element = this.element,\n            theme = options.theme ? options.theme : \"inherit\",\n\n            // The \"on\" button is an anchor so it's focusable\n            on = $( \"<a></a>\", {\n                \"href\": \"#\"\n            }),\n            off = $( \"<span></span>\" ),\n            type = element.get( 0 ).tagName,\n            onText = ( type === \"INPUT\" ) ?\n                options.onText : element.find( \"option\" ).eq( 1 ).text(),\n            offText = ( type === \"INPUT\" ) ?\n                options.offText : element.find( \"option\" ).eq( 0 ).text();\n\n            on\n                .addClass( \"ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit\" )\n                .text( onText );\n            off\n                .addClass( \"ui-flipswitch-off\" )\n                .text( offText );\n\n            flipswitch\n                .addClass( \"ui-flipswitch ui-shadow-inset \" +\n                    \"ui-bar-\" + theme + \" \" +\n                    ( options.wrapperClass ? options.wrapperClass : \"\" ) + \" \" +\n                    ( ( element.is( \":checked\" ) ||\n                        element\n                            .find( \"option\" )\n                            .eq( 1 )\n                            .is( \":selected\" ) ) ? \"ui-flipswitch-active\" : \"\" ) +\n                    ( element.is(\":disabled\") ? \" ui-state-disabled\": \"\") +\n                    ( options.corners ? \" ui-corner-all\": \"\" ) +\n                    ( options.mini ? \" ui-mini\": \"\" ) )\n                .append( on, off );\n\n            element\n                .addClass( \"ui-flipswitch-input\" )\n                .after( flipswitch )\n                .appendTo( flipswitch );\n\n        $.extend( this, {\n            flipswitch: flipswitch,\n            on: on,\n            off: off,\n            type: type\n        });\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    refresh: function() {\n        var direction,\n            existingDirection = this.flipswitch.hasClass( \"ui-flipswitch-active\" ) ? \"_right\" : \"_left\";\n\n        if ( this.type === \"SELECT\" ) {\n            direction = ( this.element.get( 0 ).selectedIndex > 0 ) ? \"_right\": \"_left\";\n        } else {\n            direction = this.element.prop( \"checked\" ) ? \"_right\": \"_left\";\n        }\n\n        if ( direction !== existingDirection ) {\n            this[ direction ]();\n        }\n    },\n\n    _toggle: function() {\n        var direction = this.flipswitch.hasClass( \"ui-flipswitch-active\" ) ? \"_left\" : \"_right\";\n\n        this[ direction ]();\n    },\n\n    _keydown: function( e ) {\n        if ( e.which === $.mobile.keyCode.LEFT ) {\n            this._left();\n        } else if ( e.which === $.mobile.keyCode.RIGHT ) {\n            this._right();\n        } else if ( e.which === $.mobile.keyCode.SPACE ) {\n            this._toggle();\n            e.preventDefault();\n        }\n    },\n\n    _setOptions: function( options ) {\n        if ( options.theme !== undefined ) {\n            var currentTheme = options.theme ? options.theme : \"inherit\",\n                newTheme = options.theme ? options.theme : \"inherit\";\n\n            this.widget()\n                .removeClass( \"ui-bar-\" + currentTheme )\n                .addClass( \"ui-bar-\" + newTheme );\n        }\n        if ( options.onText !== undefined ) {\n            this.on.text( options.onText );\n        }\n        if ( options.offText !== undefined ) {\n            this.off.text( options.offText );\n        }\n        if ( options.disabled !== undefined ) {\n            this.widget().toggleClass( \"ui-state-disabled\", options.disabled );\n        }\n        if ( options.mini !== undefined ) {\n            this.widget().toggleClass( \"ui-mini\", options.mini );\n        }\n        if ( options.corners !== undefined ) {\n            this.widget().toggleClass( \"ui-corner-all\", options.corners );\n        }\n\n        this._super( options );\n    },\n\n    _destroy: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n        if ( this._originalTabIndex != null ) {\n            this.element.attr( \"tabindex\", this._originalTabIndex );\n        } else {\n            this.element.removeAttr( \"tabindex\" );\n        }\n        this.on.remove();\n        this.off.remove();\n        this.element.unwrap();\n        this.flipswitch.remove();\n        this.removeClass( \"ui-flipswitch-input\" );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n    $.widget( \"mobile.rangeslider\", $.extend( {\n\n        options: {\n            theme: null,\n            trackTheme: null,\n            corners: true,\n            mini: false,\n            highlight: true\n        },\n\n        _create: function() {\n            var $el = this.element,\n            elClass = this.options.mini ? \"ui-rangeslider ui-mini\" : \"ui-rangeslider\",\n            _inputFirst = $el.find( \"input\" ).first(),\n            _inputLast = $el.find( \"input\" ).last(),\n            _label = $el.find( \"label\" ).first(),\n            _sliderWidgetFirst = $.data( _inputFirst.get( 0 ), \"mobile-slider\" ) ||\n                $.data( _inputFirst.slider().get( 0 ), \"mobile-slider\" ),\n            _sliderWidgetLast = $.data( _inputLast.get(0), \"mobile-slider\" ) ||\n                $.data( _inputLast.slider().get( 0 ), \"mobile-slider\" ),\n            _sliderFirst = _sliderWidgetFirst.slider,\n            _sliderLast = _sliderWidgetLast.slider,\n            firstHandle = _sliderWidgetFirst.handle,\n            _sliders = $( \"<div class='ui-rangeslider-sliders' />\" ).appendTo( $el );\n\n            _inputFirst.addClass( \"ui-rangeslider-first\" );\n            _inputLast.addClass( \"ui-rangeslider-last\" );\n            $el.addClass( elClass );\n\n            _sliderFirst.appendTo( _sliders );\n            _sliderLast.appendTo( _sliders );\n            _label.insertBefore( $el );\n            firstHandle.prependTo( _sliderLast );\n\n            $.extend( this, {\n                _inputFirst: _inputFirst,\n                _inputLast: _inputLast,\n                _sliderFirst: _sliderFirst,\n                _sliderLast: _sliderLast,\n                _label: _label,\n                _targetVal: null,\n                _sliderTarget: false,\n                _sliders: _sliders,\n                _proxy: false\n            });\n\n            this.refresh();\n            this._on( this.element.find( \"input.ui-slider-input\" ), {\n                \"slidebeforestart\": \"_slidebeforestart\",\n                \"slidestop\": \"_slidestop\",\n                \"slidedrag\": \"_slidedrag\",\n                \"slidebeforechange\": \"_change\",\n                \"blur\": \"_change\",\n                \"keyup\": \"_change\"\n            });\n            this._on({\n                \"mousedown\":\"_change\"\n            });\n            this._on( this.element.closest( \"form\" ), {\n                \"reset\":\"_handleReset\"\n            });\n            this._on( firstHandle, {\n                \"vmousedown\": \"_dragFirstHandle\"\n            });\n        },\n        _handleReset: function() {\n            var self = this;\n            //we must wait for the stack to unwind before updateing other wise sliders will not have updated yet\n            setTimeout( function() {\n                self._updateHighlight();\n            },0);\n        },\n\n        _dragFirstHandle: function( event ) {\n            //if the first handle is dragged send the event to the first slider\n            $.data( this._inputFirst.get(0), \"mobile-slider\" ).dragging = true;\n            $.data( this._inputFirst.get(0), \"mobile-slider\" ).refresh( event );\n            $.data( this._inputFirst.get(0), \"mobile-slider\" )._trigger( \"start\" );\n            return false;\n        },\n\n        _slidedrag: function( event ) {\n            var first = $( event.target ).is( this._inputFirst ),\n                otherSlider = ( first ) ? this._inputLast : this._inputFirst;\n\n            this._sliderTarget = false;\n            //if the drag was initiated on an extreme and the other handle is focused send the events to\n            //the closest handle\n            if ( ( this._proxy === \"first\" && first ) || ( this._proxy === \"last\" && !first ) ) {\n                $.data( otherSlider.get(0), \"mobile-slider\" ).dragging = true;\n                $.data( otherSlider.get(0), \"mobile-slider\" ).refresh( event );\n                return false;\n            }\n        },\n\n        _slidestop: function( event ) {\n            var first = $( event.target ).is( this._inputFirst );\n\n            this._proxy = false;\n            //this stops dragging of the handle and brings the active track to the front\n            //this makes clicks on the track go the the last handle used\n            this.element.find( \"input\" ).trigger( \"vmouseup\" );\n            this._sliderFirst.css( \"z-index\", first ? 1 : \"\" );\n        },\n\n        _slidebeforestart: function( event ) {\n            this._sliderTarget = false;\n            //if the track is the target remember this and the original value\n            if ( $( event.originalEvent.target ).hasClass( \"ui-slider-track\" ) ) {\n                this._sliderTarget = true;\n                this._targetVal = $( event.target ).val();\n            }\n        },\n\n        _setOptions: function( options ) {\n            if ( options.theme !== undefined ) {\n                this._setTheme( options.theme );\n            }\n\n            if ( options.trackTheme !== undefined ) {\n                this._setTrackTheme( options.trackTheme );\n            }\n\n            if ( options.mini !== undefined ) {\n                this._setMini( options.mini );\n            }\n\n            if ( options.highlight !== undefined ) {\n                this._setHighlight( options.highlight );\n            }\n\n            if ( options.disabled !== undefined ) {\n                this._setDisabled( options.disabled );\n            }\n\n            this._super( options );\n            this.refresh();\n        },\n\n        refresh: function() {\n            var $el = this.element,\n                o = this.options;\n\n            if ( this._inputFirst.is( \":disabled\" ) || this._inputLast.is( \":disabled\" ) ) {\n                this.options.disabled = true;\n            }\n\n            $el.find( \"input\" ).slider({\n                theme: o.theme,\n                trackTheme: o.trackTheme,\n                disabled: o.disabled,\n                corners: o.corners,\n                mini: o.mini,\n                highlight: o.highlight\n            }).slider( \"refresh\" );\n            this._updateHighlight();\n        },\n\n        _change: function( event ) {\n            if ( event.type === \"keyup\" ) {\n                this._updateHighlight();\n                return false;\n            }\n\n            var self = this,\n                min = parseFloat( this._inputFirst.val(), 10 ),\n                max = parseFloat( this._inputLast.val(), 10 ),\n                first = $( event.target ).hasClass( \"ui-rangeslider-first\" ),\n                thisSlider = first ? this._inputFirst : this._inputLast,\n                otherSlider = first ? this._inputLast : this._inputFirst;\n\n            if ( ( this._inputFirst.val() > this._inputLast.val() && event.type === \"mousedown\" && !$(event.target).hasClass(\"ui-slider-handle\")) ) {\n                thisSlider.blur();\n            } else if ( event.type === \"mousedown\" ) {\n                return;\n            }\n            if ( min > max && !this._sliderTarget ) {\n                //this prevents min from being greater then max\n                thisSlider.val( first ? max: min ).slider( \"refresh\" );\n                this._trigger( \"normalize\" );\n            } else if ( min > max ) {\n                //this makes it so clicks on the target on either extreme go to the closest handle\n                thisSlider.val( this._targetVal ).slider( \"refresh\" );\n\n                //You must wait for the stack to unwind so first slider is updated before updating second\n                setTimeout( function() {\n                    otherSlider.val( first ? min: max ).slider( \"refresh\" );\n                    $.data( otherSlider.get(0), \"mobile-slider\" ).handle.focus();\n                    self._sliderFirst.css( \"z-index\", first ? \"\" : 1 );\n                    self._trigger( \"normalize\" );\n                }, 0 );\n                this._proxy = ( first ) ? \"first\" : \"last\";\n            }\n            //fixes issue where when both _sliders are at min they cannot be adjusted\n            if ( min === max ) {\n                $.data( thisSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", 1 );\n                $.data( otherSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", 0 );\n            } else {\n                $.data( otherSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", \"\" );\n                $.data( thisSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", \"\" );\n            }\n\n            this._updateHighlight();\n\n            if ( min >= max ) {\n                return false;\n            }\n        },\n\n        _updateHighlight: function() {\n            var min = parseInt( $.data( this._inputFirst.get(0), \"mobile-slider\" ).handle.get(0).style.left, 10 ),\n                max = parseInt( $.data( this._inputLast.get(0), \"mobile-slider\" ).handle.get(0).style.left, 10 ),\n                width = (max - min);\n\n            this.element.find( \".ui-slider-bg\" ).css({\n                \"margin-left\": min + \"%\",\n                \"width\": width + \"%\"\n            });\n        },\n\n        _setTheme: function( value ) {\n            this._inputFirst.slider( \"option\", \"theme\", value );\n            this._inputLast.slider( \"option\", \"theme\", value );\n        },\n\n        _setTrackTheme: function( value ) {\n            this._inputFirst.slider( \"option\", \"trackTheme\", value );\n            this._inputLast.slider( \"option\", \"trackTheme\", value );\n        },\n\n        _setMini: function( value ) {\n            this._inputFirst.slider( \"option\", \"mini\", value );\n            this._inputLast.slider( \"option\", \"mini\", value );\n            this.element.toggleClass( \"ui-mini\", !!value );\n        },\n\n        _setHighlight: function( value ) {\n            this._inputFirst.slider( \"option\", \"highlight\", value );\n            this._inputLast.slider( \"option\", \"highlight\", value );\n        },\n\n        _setDisabled: function( value ) {\n            this._inputFirst.prop( \"disabled\", value );\n            this._inputLast.prop( \"disabled\", value );\n        },\n\n        _destroy: function() {\n            this._label.prependTo( this.element );\n            this.element.removeClass( \"ui-rangeslider ui-mini\" );\n            this._inputFirst.after( this._sliderFirst );\n            this._inputLast.after( this._sliderLast );\n            this._sliders.remove();\n            this.element.find( \"input\" ).removeClass( \"ui-rangeslider-first ui-rangeslider-last\" ).slider( \"destroy\" );\n        }\n\n    }, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.textinput\", $.mobile.textinput, {\n        options: {\n            clearBtn: false,\n            clearBtnText: \"Clear text\"\n        },\n\n        _create: function() {\n            this._super();\n\n            if ( this.isSearch ) {\n                this.options.clearBtn = true;\n            }\n\n            if ( !!this.options.clearBtn && this.inputNeedsWrap ) {\n                this._addClearBtn();\n            }\n        },\n\n        clearButton: function() {\n            return $( \"<a href='#' tabindex='-1' aria-hidden='true' \" +\n                \"class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'>\" +\n                \"</a>\" )\n                    .attr( \"title\", this.options.clearBtnText )\n                    .text( this.options.clearBtnText );\n        },\n\n        _clearBtnClick: function( event ) {\n            this.element.val( \"\" )\n                    .focus()\n                    .trigger( \"change\" );\n\n            this._clearBtn.addClass( \"ui-input-clear-hidden\" );\n            event.preventDefault();\n        },\n\n        _addClearBtn: function() {\n\n            if ( !this.options.enhanced ) {\n                this._enhanceClear();\n            }\n\n            $.extend( this, {\n                _clearBtn: this.widget().find(\"a.ui-input-clear\")\n            });\n\n            this._bindClearEvents();\n\n            this._toggleClear();\n\n        },\n\n        _enhanceClear: function() {\n\n            this.clearButton().appendTo( this.widget() );\n            this.widget().addClass( \"ui-input-has-clear\" );\n\n        },\n\n        _bindClearEvents: function() {\n\n            this._on( this._clearBtn, {\n                \"click\": \"_clearBtnClick\"\n            });\n\n            this._on({\n                \"keyup\": \"_toggleClear\",\n                \"change\": \"_toggleClear\",\n                \"input\": \"_toggleClear\",\n                \"focus\": \"_toggleClear\",\n                \"blur\": \"_toggleClear\",\n                \"cut\": \"_toggleClear\",\n                \"paste\": \"_toggleClear\"\n\n            });\n\n        },\n\n        _unbindClear: function() {\n            this._off( this._clearBtn, \"click\");\n            this._off( this.element, \"keyup change input focus blur cut paste\" );\n        },\n\n        _setOptions: function( options ) {\n            this._super( options );\n\n            if ( options.clearBtn !== undefined &&\n                !this.element.is( \"textarea, :jqmData(type='range')\" ) ) {\n                if ( options.clearBtn ) {\n                    this._addClearBtn();\n                } else {\n                    this._destroyClear();\n                }\n            }\n\n            if ( options.clearBtnText !== undefined && this._clearBtn !== undefined ) {\n                this._clearBtn.text( options.clearBtnText )\n                    .attr(\"title\", options.clearBtnText);\n            }\n        },\n\n        _toggleClear: function() {\n            this._delay( \"_toggleClearClass\", 0 );\n        },\n\n        _toggleClearClass: function() {\n            this._clearBtn.toggleClass( \"ui-input-clear-hidden\", !this.element.val() );\n        },\n\n        _destroyClear: function() {\n            this.widget().removeClass( \"ui-input-has-clear\" );\n            this._unbindClear();\n            this._clearBtn.remove();\n        },\n\n        _destroy: function() {\n            this._super();\n            if ( this.options.clearBtn ) {\n                this._destroyClear();\n            }\n        }\n\n    });\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.textinput\", $.mobile.textinput, {\n        options: {\n            autogrow:true,\n            keyupTimeoutBuffer: 100\n        },\n\n        _create: function() {\n            this._super();\n\n            if ( this.options.autogrow && this.isTextarea ) {\n                this._autogrow();\n            }\n        },\n\n        _autogrow: function() {\n            this.element.addClass( \"ui-textinput-autogrow\" );\n\n            this._on({\n                \"keyup\": \"_timeout\",\n                \"change\": \"_timeout\",\n                \"input\": \"_timeout\",\n                \"paste\": \"_timeout\"\n            });\n\n            // Attach to the various you-have-become-visible notifications that the\n            // various framework elements emit.\n            // TODO: Remove all but the updatelayout handler once #6426 is fixed.\n            this._on( true, this.document, {\n\n                // TODO: Move to non-deprecated event\n                \"pageshow\": \"_handleShow\",\n                \"popupbeforeposition\": \"_handleShow\",\n                \"updatelayout\": \"_handleShow\",\n                \"panelopen\": \"_handleShow\"\n            });\n        },\n\n        // Synchronously fix the widget height if this widget's parents are such\n        // that they show/hide content at runtime. We still need to check whether\n        // the widget is actually visible in case it is contained inside multiple\n        // such containers. For example: panel contains collapsible contains\n        // autogrow textinput. The panel may emit \"panelopen\" indicating that its\n        // content has become visible, but the collapsible is still collapsed, so\n        // the autogrow textarea is still not visible.\n        _handleShow: function( event ) {\n            if ( $.contains( event.target, this.element[ 0 ] ) &&\n                this.element.is( \":visible\" ) ) {\n\n                if ( event.type !== \"popupbeforeposition\" ) {\n                    this.element\n                        .addClass( \"ui-textinput-autogrow-resize\" )\n                        .animationComplete(\n                            $.proxy( function() {\n                                this.element.removeClass( \"ui-textinput-autogrow-resize\" );\n                            }, this ),\n                        \"transition\" );\n                }\n                this._prepareHeightUpdate();\n            }\n        },\n\n        _unbindAutogrow: function() {\n            this.element.removeClass( \"ui-textinput-autogrow\" );\n            this._off( this.element, \"keyup change input paste\" );\n            this._off( this.document,\n                \"pageshow popupbeforeposition updatelayout panelopen\" );\n        },\n\n        keyupTimeout: null,\n\n        _prepareHeightUpdate: function( delay ) {\n            if ( this.keyupTimeout ) {\n                clearTimeout( this.keyupTimeout );\n            }\n            if ( delay === undefined ) {\n                this._updateHeight();\n            } else {\n                this.keyupTimeout = this._delay( \"_updateHeight\", delay );\n            }\n        },\n\n        _timeout: function() {\n            this._prepareHeightUpdate( this.options.keyupTimeoutBuffer );\n        },\n\n        _updateHeight: function() {\n            var paddingTop, paddingBottom, paddingHeight, scrollHeight, clientHeight,\n                borderTop, borderBottom, borderHeight, height,\n                scrollTop = this.window.scrollTop();\n            this.keyupTimeout = 0;\n\n            // IE8 textareas have the onpage property - others do not\n            if ( !( \"onpage\" in this.element[ 0 ] ) ) {\n                this.element.css({\n                    \"height\": 0,\n                    \"min-height\": 0,\n                    \"max-height\": 0\n                });\n            }\n\n            scrollHeight = this.element[ 0 ].scrollHeight;\n            clientHeight = this.element[ 0 ].clientHeight;\n            borderTop = parseFloat( this.element.css( \"border-top-width\" ) );\n            borderBottom = parseFloat( this.element.css( \"border-bottom-width\" ) );\n            borderHeight = borderTop + borderBottom;\n            height = scrollHeight + borderHeight + 15;\n\n            // Issue 6179: Padding is not included in scrollHeight and\n            // clientHeight by Firefox if no scrollbar is visible. Because\n            // textareas use the border-box box-sizing model, padding should be\n            // included in the new (assigned) height. Because the height is set\n            // to 0, clientHeight == 0 in Firefox. Therefore, we can use this to\n            // check if padding must be added.\n            if ( clientHeight === 0 ) {\n                paddingTop = parseFloat( this.element.css( \"padding-top\" ) );\n                paddingBottom = parseFloat( this.element.css( \"padding-bottom\" ) );\n                paddingHeight = paddingTop + paddingBottom;\n\n                height += paddingHeight;\n            }\n\n            this.element.css({\n                \"height\": height,\n                \"min-height\": \"\",\n                \"max-height\": \"\"\n            });\n\n            this.window.scrollTop( scrollTop );\n        },\n\n        refresh: function() {\n            if ( this.options.autogrow && this.isTextarea ) {\n                this._updateHeight();\n            }\n        },\n\n        _setOptions: function( options ) {\n\n            this._super( options );\n\n            if ( options.autogrow !== undefined && this.isTextarea ) {\n                if ( options.autogrow ) {\n                    this._autogrow();\n                } else {\n                    this._unbindAutogrow();\n                }\n            }\n        }\n\n    });\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.selectmenu\", $.extend( {\n    initSelector: \"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )\",\n\n    options: {\n        theme: null,\n        icon: \"carat-d\",\n        iconpos: \"right\",\n        inline: false,\n        corners: true,\n        shadow: true,\n        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */\n        overlayTheme: null,\n        dividerTheme: null,\n        hidePlaceholderMenuItems: true,\n        closeText: \"Close\",\n        nativeMenu: true,\n        // This option defaults to true on iOS devices.\n        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( \"AppleWebKit\" ) > -1,\n        mini: false\n    },\n\n    _button: function() {\n        return $( \"<div/>\" );\n    },\n\n    _setDisabled: function( value ) {\n        this.element.attr( \"disabled\", value );\n        this.button.attr( \"aria-disabled\", value );\n        return this._setOption( \"disabled\", value );\n    },\n\n    _focusButton : function() {\n        var self = this;\n\n        setTimeout( function() {\n            self.button.focus();\n        }, 40);\n    },\n\n    _selectOptions: function() {\n        return this.select.find( \"option\" );\n    },\n\n    // setup items that are generally necessary for select menu extension\n    _preExtension: function() {\n        var inline = this.options.inline || this.element.jqmData( \"inline\" ),\n            mini = this.options.mini || this.element.jqmData( \"mini\" ),\n            classes = \"\";\n        // TODO: Post 1.1--once we have time to test thoroughly--any classes manually applied to the original element should be carried over to the enhanced element, with an `-enhanced` suffix. See https://github.com/jquery/jquery-mobile/issues/3577\n        /* if ( $el[0].className.length ) {\n            classes = $el[0].className;\n        } */\n        if ( !!~this.element[0].className.indexOf( \"ui-btn-left\" ) ) {\n            classes = \" ui-btn-left\";\n        }\n\n        if (  !!~this.element[0].className.indexOf( \"ui-btn-right\" ) ) {\n            classes = \" ui-btn-right\";\n        }\n\n        if ( inline ) {\n            classes += \" ui-btn-inline\";\n        }\n        if ( mini ) {\n            classes += \" ui-mini\";\n        }\n\n        this.select = this.element.removeClass( \"ui-btn-left ui-btn-right\" ).wrap( \"<div class='ui-select\" + classes + \"'>\" );\n        this.selectId  = this.select.attr( \"id\" ) || ( \"select-\" + this.uuid );\n        this.buttonId = this.selectId + \"-button\";\n        this.label = $( \"label[for='\"+ this.selectId +\"']\" );\n        this.isMultiple = this.select[ 0 ].multiple;\n    },\n\n    _destroy: function() {\n        var wrapper = this.element.parents( \".ui-select\" );\n        if ( wrapper.length > 0 ) {\n            if ( wrapper.is( \".ui-btn-left, .ui-btn-right\" ) ) {\n                this.element.addClass( wrapper.hasClass( \"ui-btn-left\" ) ? \"ui-btn-left\" : \"ui-btn-right\" );\n            }\n            this.element.insertAfter( wrapper );\n            wrapper.remove();\n        }\n    },\n\n    _create: function() {\n        this._preExtension();\n\n        this.button = this._button();\n\n        var self = this,\n\n            options = this.options,\n\n            iconpos = options.icon ? ( options.iconpos || this.select.jqmData( \"iconpos\" ) ) : false,\n\n            button = this.button\n                .insertBefore( this.select )\n                .attr( \"id\", this.buttonId )\n                .addClass( \"ui-btn\" +\n                    ( options.icon ? ( \" ui-icon-\" + options.icon + \" ui-btn-icon-\" + iconpos +\n                    ( options.iconshadow ? \" ui-shadow-icon\" : \"\" ) ) :    \"\" ) + /* TODO: Remove in 1.5. */\n                    ( options.theme ? \" ui-btn-\" + options.theme : \"\" ) +\n                    ( options.corners ? \" ui-corner-all\" : \"\" ) +\n                    ( options.shadow ? \" ui-shadow\" : \"\" ) );\n\n        this.setButtonText();\n\n        // Opera does not properly support opacity on select elements\n        // In Mini, it hides the element, but not its text\n        // On the desktop,it seems to do the opposite\n        // for these reasons, using the nativeMenu option results in a full native select in Opera\n        if ( options.nativeMenu && window.opera && window.opera.version ) {\n            button.addClass( \"ui-select-nativeonly\" );\n        }\n\n        // Add counter for multi selects\n        if ( this.isMultiple ) {\n            this.buttonCount = $( \"<span>\" )\n                .addClass( \"ui-li-count ui-body-inherit\" )\n                .hide()\n                .appendTo( button.addClass( \"ui-li-has-count\" ) );\n        }\n\n        // Disable if specified\n        if ( options.disabled || this.element.attr( \"disabled\" )) {\n            this.disable();\n        }\n\n        // Events on native select\n        this.select.change(function() {\n            self.refresh();\n\n            if ( !!options.nativeMenu ) {\n                self._delay( function() {\n                    self.select.blur();\n                });\n            }\n        });\n\n        this._handleFormReset();\n\n        this._on( this.button, {\n            keydown: \"_handleKeydown\"\n        });\n\n        this.build();\n    },\n\n    build: function() {\n        var self = this;\n\n        this.select\n            .appendTo( self.button )\n            .bind( \"vmousedown\", function() {\n                // Add active class to button\n                self.button.addClass( $.mobile.activeBtnClass );\n            })\n            .bind( \"focus\", function() {\n                self.button.addClass( $.mobile.focusClass );\n            })\n            .bind( \"blur\", function() {\n                self.button.removeClass( $.mobile.focusClass );\n            })\n            .bind( \"focus vmouseover\", function() {\n                self.button.trigger( \"vmouseover\" );\n            })\n            .bind( \"vmousemove\", function() {\n                // Remove active class on scroll/touchmove\n                self.button.removeClass( $.mobile.activeBtnClass );\n            })\n            .bind( \"change blur vmouseout\", function() {\n                self.button.trigger( \"vmouseout\" )\n                    .removeClass( $.mobile.activeBtnClass );\n            });\n\n        // In many situations, iOS will zoom into the select upon tap, this prevents that from happening\n        self.button.bind( \"vmousedown\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.label.bind( \"click focus\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.select.bind( \"focus\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.button.bind( \"mouseup\", function() {\n            if ( self.options.preventFocusZoom ) {\n                setTimeout(function() {\n                    $.mobile.zoom.enable( true );\n                }, 0 );\n            }\n        });\n        self.select.bind( \"blur\", function() {\n            if ( self.options.preventFocusZoom ) {\n                $.mobile.zoom.enable( true );\n            }\n        });\n\n    },\n\n    selected: function() {\n        return this._selectOptions().filter( \":selected\" );\n    },\n\n    selectedIndices: function() {\n        var self = this;\n\n        return this.selected().map(function() {\n            return self._selectOptions().index( this );\n        }).get();\n    },\n\n    setButtonText: function() {\n        var self = this,\n            selected = this.selected(),\n            text = this.placeholder,\n            span = $( document.createElement( \"span\" ) );\n\n        this.button.children( \"span\" ).not( \".ui-li-count\" ).remove().end().end().prepend( (function() {\n            if ( selected.length ) {\n                text = selected.map(function() {\n                    return $( this ).text();\n                }).get().join( \", \" );\n            } else {\n                text = self.placeholder;\n            }\n\n            if ( text ) {\n                span.text( text );\n            } else {\n\n                // Set the contents to &nbsp; which we write as &#160; to be XHTML compliant - see gh-6699\n                span.html( \"&#160;\" );\n            }\n\n            // TODO possibly aggregate multiple select option classes\n            return span\n                .addClass( self.select.attr( \"class\" ) )\n                .addClass( selected.attr( \"class\" ) )\n                .removeClass( \"ui-screen-hidden\" );\n        })());\n    },\n\n    setButtonCount: function() {\n        var selected = this.selected();\n\n        // multiple count inside button\n        if ( this.isMultiple ) {\n            this.buttonCount[ selected.length > 1 ? \"show\" : \"hide\" ]().text( selected.length );\n        }\n    },\n\n    _handleKeydown: function( /* event */ ) {\n        this._delay( \"_refreshButton\" );\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    _refreshButton: function() {\n        this.setButtonText();\n        this.setButtonCount();\n    },\n\n    refresh: function() {\n        this._refreshButton();\n    },\n\n    // open and close preserved in native selects\n    // to simplify users code when looping over selects\n    open: $.noop,\n    close: $.noop,\n\n    disable: function() {\n        this._setDisabled( true );\n        this.button.addClass( \"ui-state-disabled\" );\n    },\n\n    enable: function() {\n        this._setDisabled( false );\n        this.button.removeClass( \"ui-state-disabled\" );\n    }\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.links = function( target ) {\n\n    //links within content areas, tests included with page\n    $( target )\n        .find( \"a\" )\n        .jqmEnhanceable()\n        .filter( \":jqmData(rel='popup')[href][href!='']\" )\n        .each( function() {\n            // Accessibility info for popups\n            var element = this,\n                idref = element.getAttribute( \"href\" ).substring( 1 );\n\n            if ( idref ) {\n                element.setAttribute( \"aria-haspopup\", true );\n                element.setAttribute( \"aria-owns\", idref );\n                element.setAttribute( \"aria-expanded\", false );\n            }\n        })\n        .end()\n        .not( \".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')\" )\n        .addClass( \"ui-link\" );\n\n};\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\nfunction fitSegmentInsideSegment( windowSize, segmentSize, offset, desired ) {\n    var returnValue = desired;\n\n    if ( windowSize < segmentSize ) {\n        // Center segment if it's bigger than the window\n        returnValue = offset + ( windowSize - segmentSize ) / 2;\n    } else {\n        // Otherwise center it at the desired coordinate while keeping it completely inside the window\n        returnValue = Math.min( Math.max( offset, desired - segmentSize / 2 ), offset + windowSize - segmentSize );\n    }\n\n    return returnValue;\n}\n\nfunction getWindowCoordinates( theWindow ) {\n    return {\n        x: theWindow.scrollLeft(),\n        y: theWindow.scrollTop(),\n        cx: ( theWindow[ 0 ].innerWidth || theWindow.width() ),\n        cy: ( theWindow[ 0 ].innerHeight || theWindow.height() )\n    };\n}\n\n$.widget( \"mobile.popup\", {\n    options: {\n        wrapperClass: null,\n        theme: null,\n        overlayTheme: null,\n        shadow: true,\n        corners: true,\n        transition: \"none\",\n        positionTo: \"origin\",\n        tolerance: null,\n        closeLinkSelector: \"a:jqmData(rel='back')\",\n        closeLinkEvents: \"click.popup\",\n        navigateEvents: \"navigate.popup\",\n        closeEvents: \"navigate.popup pagebeforechange.popup\",\n        dismissible: true,\n        enhanced: false,\n\n        // NOTE Windows Phone 7 has a scroll position caching issue that\n        //      requires us to disable popup history management by default\n        //      https://github.com/jquery/jquery-mobile/issues/4784\n        //\n        // NOTE this option is modified in _create!\n        history: !$.mobile.browser.oldIE\n    },\n\n    // When the user depresses the mouse/finger on an element inside the popup while the popup is\n    // open, we ignore resize events for a short while. This prevents #6961.\n    _handleDocumentVmousedown: function( theEvent ) {\n        if ( this._isOpen && $.contains( this._ui.container[ 0 ], theEvent.target ) ) {\n            this._ignoreResizeEvents();\n        }\n    },\n\n    _create: function() {\n        var theElement = this.element,\n            myId = theElement.attr( \"id\" ),\n            currentOptions = this.options;\n\n        // We need to adjust the history option to be false if there's no AJAX nav.\n        // We can't do it in the option declarations because those are run before\n        // it is determined whether there shall be AJAX nav.\n        currentOptions.history = currentOptions.history && $.mobile.ajaxEnabled && $.mobile.hashListeningEnabled;\n\n        this._on( this.document, {\n            \"vmousedown\": \"_handleDocumentVmousedown\"\n        });\n\n        // Define instance variables\n        $.extend( this, {\n            _scrollTop: 0,\n            _page: theElement.closest( \".ui-page\" ),\n            _ui: null,\n            _fallbackTransition: \"\",\n            _currentTransition: false,\n            _prerequisites: null,\n            _isOpen: false,\n            _tolerance: null,\n            _resizeData: null,\n            _ignoreResizeTo: 0,\n            _orientationchangeInProgress: false\n        });\n\n        if ( this._page.length === 0 ) {\n            this._page = $( \"body\" );\n        }\n\n        if ( currentOptions.enhanced ) {\n            this._ui = {\n                container: theElement.parent(),\n                screen: theElement.parent().prev(),\n                placeholder: $( this.document[ 0 ].getElementById( myId + \"-placeholder\" ) )\n            };\n        } else {\n            this._ui = this._enhance( theElement, myId );\n            this._applyTransition( currentOptions.transition );\n        }\n        this\n            ._setTolerance( currentOptions.tolerance )\n            ._ui.focusElement = this._ui.container;\n\n        // Event handlers\n        this._on( this._ui.screen, { \"vclick\": \"_eatEventAndClose\" } );\n        this._on( this.window, {\n            orientationchange: $.proxy( this, \"_handleWindowOrientationchange\" ),\n            resize: $.proxy( this, \"_handleWindowResize\" ),\n            keyup: $.proxy( this, \"_handleWindowKeyUp\" )\n        });\n        this._on( this.document, { \"focusin\": \"_handleDocumentFocusIn\" } );\n    },\n\n    _enhance: function( theElement, myId ) {\n        var currentOptions = this.options,\n            wrapperClass = currentOptions.wrapperClass,\n            ui = {\n                screen: $( \"<div class='ui-screen-hidden ui-popup-screen \" +\n                this._themeClassFromOption( \"ui-overlay-\", currentOptions.overlayTheme ) + \"'></div>\" ),\n                placeholder: $( \"<div style='display: none;'><!-- placeholder --></div>\" ),\n                container: $( \"<div class='ui-popup-container ui-popup-hidden ui-popup-truncate\" +\n                    ( wrapperClass ? ( \" \" + wrapperClass ) : \"\" ) + \"'></div>\" )\n            },\n            fragment = this.document[ 0 ].createDocumentFragment();\n\n        fragment.appendChild( ui.screen[ 0 ] );\n        fragment.appendChild( ui.container[ 0 ] );\n\n        if ( myId ) {\n            ui.screen.attr( \"id\", myId + \"-screen\" );\n            ui.container.attr( \"id\", myId + \"-popup\" );\n            ui.placeholder\n                .attr( \"id\", myId + \"-placeholder\" )\n                .html( \"<!-- placeholder for \" + myId + \" -->\" );\n        }\n\n        // Apply the proto\n        this._page[ 0 ].appendChild( fragment );\n        // Leave a placeholder where the element used to be\n        ui.placeholder.insertAfter( theElement );\n        theElement\n            .detach()\n            .addClass( \"ui-popup \" +\n                this._themeClassFromOption( \"ui-body-\", currentOptions.theme ) + \" \" +\n                ( currentOptions.shadow ? \"ui-overlay-shadow \" : \"\" ) +\n                ( currentOptions.corners ? \"ui-corner-all \" : \"\" ) )\n            .appendTo( ui.container );\n\n        return ui;\n    },\n\n    _eatEventAndClose: function( theEvent ) {\n        theEvent.preventDefault();\n        theEvent.stopImmediatePropagation();\n        if ( this.options.dismissible ) {\n            this.close();\n        }\n        return false;\n    },\n\n    // Make sure the screen covers the entire document - CSS is sometimes not\n    // enough to accomplish this.\n    _resizeScreen: function() {\n        var screen = this._ui.screen,\n            popupHeight = this._ui.container.outerHeight( true ),\n            screenHeight = screen.removeAttr( \"style\" ).height(),\n\n            // Subtracting 1 here is necessary for an obscure Andrdoid 4.0 bug where\n            // the browser hangs if the screen covers the entire document :/\n            documentHeight = this.document.height() - 1;\n\n        if ( screenHeight < documentHeight ) {\n            screen.height( documentHeight );\n        } else if ( popupHeight > screenHeight ) {\n            screen.height( popupHeight );\n        }\n    },\n\n    _handleWindowKeyUp: function( theEvent ) {\n        if ( this._isOpen && theEvent.keyCode === $.mobile.keyCode.ESCAPE ) {\n            return this._eatEventAndClose( theEvent );\n        }\n    },\n\n    _expectResizeEvent: function() {\n        var windowCoordinates = getWindowCoordinates( this.window );\n\n        if ( this._resizeData ) {\n            if ( windowCoordinates.x === this._resizeData.windowCoordinates.x &&\n                windowCoordinates.y === this._resizeData.windowCoordinates.y &&\n                windowCoordinates.cx === this._resizeData.windowCoordinates.cx &&\n                windowCoordinates.cy === this._resizeData.windowCoordinates.cy ) {\n                // timeout not refreshed\n                return false;\n            } else {\n                // clear existing timeout - it will be refreshed below\n                clearTimeout( this._resizeData.timeoutId );\n            }\n        }\n\n        this._resizeData = {\n            timeoutId: this._delay( \"_resizeTimeout\", 200 ),\n            windowCoordinates: windowCoordinates\n        };\n\n        return true;\n    },\n\n    _resizeTimeout: function() {\n        if ( this._isOpen ) {\n            if ( !this._expectResizeEvent() ) {\n                if ( this._ui.container.hasClass( \"ui-popup-hidden\" ) ) {\n                    // effectively rapid-open the popup while leaving the screen intact\n                    this._ui.container.removeClass( \"ui-popup-hidden ui-popup-truncate\" );\n                    this.reposition( { positionTo: \"window\" } );\n                    this._ignoreResizeEvents();\n                }\n\n                this._resizeScreen();\n                this._resizeData = null;\n                this._orientationchangeInProgress = false;\n            }\n        } else {\n            this._resizeData = null;\n            this._orientationchangeInProgress = false;\n        }\n    },\n\n    _stopIgnoringResizeEvents: function() {\n        this._ignoreResizeTo = 0;\n    },\n\n    _ignoreResizeEvents: function() {\n        if ( this._ignoreResizeTo ) {\n            clearTimeout( this._ignoreResizeTo );\n        }\n        this._ignoreResizeTo = this._delay( \"_stopIgnoringResizeEvents\", 1000 );\n    },\n\n    _handleWindowResize: function(/* theEvent */) {\n        if ( this._isOpen && this._ignoreResizeTo === 0 ) {\n            if ( ( this._expectResizeEvent() || this._orientationchangeInProgress ) &&\n                !this._ui.container.hasClass( \"ui-popup-hidden\" ) ) {\n                // effectively rapid-close the popup while leaving the screen intact\n                this._ui.container\n                    .addClass( \"ui-popup-hidden ui-popup-truncate\" )\n                    .removeAttr( \"style\" );\n            }\n        }\n    },\n\n    _handleWindowOrientationchange: function(/* theEvent */) {\n        if ( !this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0 ) {\n            this._expectResizeEvent();\n            this._orientationchangeInProgress = true;\n        }\n    },\n\n    // When the popup is open, attempting to focus on an element that is not a\n    // child of the popup will redirect focus to the popup\n    _handleDocumentFocusIn: function( theEvent ) {\n        var target,\n            targetElement = theEvent.target,\n            ui = this._ui;\n\n        if ( !this._isOpen ) {\n            return;\n        }\n\n        if ( targetElement !== ui.container[ 0 ] ) {\n            target = $( targetElement );\n            if ( !$.contains( ui.container[ 0 ], targetElement ) ) {\n                $( this.document[ 0 ].activeElement ).one( \"focus\", $.proxy( function() {\n                    this._safelyBlur( targetElement );\n                }, this ) );\n                ui.focusElement.focus();\n                theEvent.preventDefault();\n                theEvent.stopImmediatePropagation();\n                return false;\n            } else if ( ui.focusElement[ 0 ] === ui.container[ 0 ] ) {\n                ui.focusElement = target;\n            }\n        }\n\n        this._ignoreResizeEvents();\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : ( prefix + value ) ) : ( prefix + \"inherit\" ) );\n    },\n\n    _applyTransition: function( value ) {\n        if ( value ) {\n            this._ui.container.removeClass( this._fallbackTransition );\n            if ( value !== \"none\" ) {\n                this._fallbackTransition = $.mobile._maybeDegradeTransition( value );\n                if ( this._fallbackTransition === \"none\" ) {\n                    this._fallbackTransition = \"\";\n                }\n                this._ui.container.addClass( this._fallbackTransition );\n            }\n        }\n\n        return this;\n    },\n\n    _setOptions: function( newOptions ) {\n        var currentOptions = this.options,\n            theElement = this.element,\n            screen = this._ui.screen;\n\n        if ( newOptions.wrapperClass !== undefined ) {\n            this._ui.container\n                .removeClass( currentOptions.wrapperClass )\n                .addClass( newOptions.wrapperClass );\n        }\n\n        if ( newOptions.theme !== undefined ) {\n            theElement\n                .removeClass( this._themeClassFromOption( \"ui-body-\", currentOptions.theme ) )\n                .addClass( this._themeClassFromOption( \"ui-body-\", newOptions.theme ) );\n        }\n\n        if ( newOptions.overlayTheme !== undefined ) {\n            screen\n                .removeClass( this._themeClassFromOption( \"ui-overlay-\", currentOptions.overlayTheme ) )\n                .addClass( this._themeClassFromOption( \"ui-overlay-\", newOptions.overlayTheme ) );\n\n            if ( this._isOpen ) {\n                screen.addClass( \"in\" );\n            }\n        }\n\n        if ( newOptions.shadow !== undefined ) {\n            theElement.toggleClass( \"ui-overlay-shadow\", newOptions.shadow );\n        }\n\n        if ( newOptions.corners !== undefined ) {\n            theElement.toggleClass( \"ui-corner-all\", newOptions.corners );\n        }\n\n        if ( newOptions.transition !== undefined ) {\n            if ( !this._currentTransition ) {\n                this._applyTransition( newOptions.transition );\n            }\n        }\n\n        if ( newOptions.tolerance !== undefined ) {\n            this._setTolerance( newOptions.tolerance );\n        }\n\n        if ( newOptions.disabled !== undefined ) {\n            if ( newOptions.disabled ) {\n                this.close();\n            }\n        }\n\n        return this._super( newOptions );\n    },\n\n    _setTolerance: function( value ) {\n        var tol = { t: 30, r: 15, b: 30, l: 15 },\n            ar;\n\n        if ( value !== undefined ) {\n            ar = String( value ).split( \",\" );\n\n            $.each( ar, function( idx, val ) { ar[ idx ] = parseInt( val, 10 ); } );\n\n            switch( ar.length ) {\n                // All values are to be the same\n                case 1:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = tol.r = tol.b = tol.l = ar[ 0 ];\n                    }\n                    break;\n\n                // The first value denotes top/bottom tolerance, and the second value denotes left/right tolerance\n                case 2:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = tol.b = ar[ 0 ];\n                    }\n                    if ( !isNaN( ar[ 1 ] ) ) {\n                        tol.l = tol.r = ar[ 1 ];\n                    }\n                    break;\n\n                // The array contains values in the order top, right, bottom, left\n                case 4:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = ar[ 0 ];\n                    }\n                    if ( !isNaN( ar[ 1 ] ) ) {\n                        tol.r = ar[ 1 ];\n                    }\n                    if ( !isNaN( ar[ 2 ] ) ) {\n                        tol.b = ar[ 2 ];\n                    }\n                    if ( !isNaN( ar[ 3 ] ) ) {\n                        tol.l = ar[ 3 ];\n                    }\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        this._tolerance = tol;\n        return this;\n    },\n\n    _clampPopupWidth: function( infoOnly ) {\n        var menuSize,\n            windowCoordinates = getWindowCoordinates( this.window ),\n            // rectangle within which the popup must fit\n            rectangle = {\n                x: this._tolerance.l,\n                y: windowCoordinates.y + this._tolerance.t,\n                cx: windowCoordinates.cx - this._tolerance.l - this._tolerance.r,\n                cy: windowCoordinates.cy - this._tolerance.t - this._tolerance.b\n            };\n\n        if ( !infoOnly ) {\n            // Clamp the width of the menu before grabbing its size\n            this._ui.container.css( \"max-width\", rectangle.cx );\n        }\n\n        menuSize = {\n            cx: this._ui.container.outerWidth( true ),\n            cy: this._ui.container.outerHeight( true )\n        };\n\n        return { rc: rectangle, menuSize: menuSize };\n    },\n\n    _calculateFinalLocation: function( desired, clampInfo ) {\n        var returnValue,\n            rectangle = clampInfo.rc,\n            menuSize = clampInfo.menuSize;\n\n        // Center the menu over the desired coordinates, while not going outside\n        // the window tolerances. This will center wrt. the window if the popup is\n        // too large.\n        returnValue = {\n            left: fitSegmentInsideSegment( rectangle.cx, menuSize.cx, rectangle.x, desired.x ),\n            top: fitSegmentInsideSegment( rectangle.cy, menuSize.cy, rectangle.y, desired.y )\n        };\n\n        // Make sure the top of the menu is visible\n        returnValue.top = Math.max( 0, returnValue.top );\n\n        // If the height of the menu is smaller than the height of the document\n        // align the bottom with the bottom of the document\n\n        returnValue.top -= Math.min( returnValue.top,\n            Math.max( 0, returnValue.top + menuSize.cy - this.document.height() ) );\n\n        return returnValue;\n    },\n\n    // Try and center the overlay over the given coordinates\n    _placementCoords: function( desired ) {\n        return this._calculateFinalLocation( desired, this._clampPopupWidth() );\n    },\n\n    _createPrerequisites: function( screenPrerequisite, containerPrerequisite, whenDone ) {\n        var prerequisites,\n            self = this;\n\n        // It is important to maintain both the local variable prerequisites and\n        // self._prerequisites. The local variable remains in the closure of the\n        // functions which call the callbacks passed in. The comparison between the\n        // local variable and self._prerequisites is necessary, because once a\n        // function has been passed to .animationComplete() it will be called next\n        // time an animation completes, even if that's not the animation whose end\n        // the function was supposed to catch (for example, if an abort happens\n        // during the opening animation, the .animationComplete handler is not\n        // called for that animation anymore, but the handler remains attached, so\n        // it is called the next time the popup is opened - making it stale.\n        // Comparing the local variable prerequisites to the widget-level variable\n        // self._prerequisites ensures that callbacks triggered by a stale\n        // .animationComplete will be ignored.\n\n        prerequisites = {\n            screen: $.Deferred(),\n            container: $.Deferred()\n        };\n\n        prerequisites.screen.then( function() {\n            if ( prerequisites === self._prerequisites ) {\n                screenPrerequisite();\n            }\n        });\n\n        prerequisites.container.then( function() {\n            if ( prerequisites === self._prerequisites ) {\n                containerPrerequisite();\n            }\n        });\n\n        $.when( prerequisites.screen, prerequisites.container ).done( function() {\n            if ( prerequisites === self._prerequisites ) {\n                self._prerequisites = null;\n                whenDone();\n            }\n        });\n\n        self._prerequisites = prerequisites;\n    },\n\n    _animate: function( args ) {\n        // NOTE before removing the default animation of the screen\n        //      this had an animate callback that would resolve the deferred\n        //      now the deferred is resolved immediately\n        // TODO remove the dependency on the screen deferred\n        this._ui.screen\n            .removeClass( args.classToRemove )\n            .addClass( args.screenClassToAdd );\n\n        args.prerequisites.screen.resolve();\n\n        if ( args.transition && args.transition !== \"none\" ) {\n            if ( args.applyTransition ) {\n                this._applyTransition( args.transition );\n            }\n            if ( this._fallbackTransition ) {\n                this._ui.container\n                    .addClass( args.containerClassToAdd )\n                    .removeClass( args.classToRemove )\n                    .animationComplete( $.proxy( args.prerequisites.container, \"resolve\" ) );\n                return;\n            }\n        }\n        this._ui.container.removeClass( args.classToRemove );\n        args.prerequisites.container.resolve();\n    },\n\n    // The desired coordinates passed in will be returned untouched if no reference element can be identified via\n    // desiredPosition.positionTo. Nevertheless, this function ensures that its return value always contains valid\n    // x and y coordinates by specifying the center middle of the window if the coordinates are absent.\n    // options: { x: coordinate, y: coordinate, positionTo: string: \"origin\", \"window\", or jQuery selector\n    _desiredCoords: function( openOptions ) {\n        var offset,\n            dst = null,\n            windowCoordinates = getWindowCoordinates( this.window ),\n            x = openOptions.x,\n            y = openOptions.y,\n            pTo = openOptions.positionTo;\n\n        // Establish which element will serve as the reference\n        if ( pTo && pTo !== \"origin\" ) {\n            if ( pTo === \"window\" ) {\n                x = windowCoordinates.cx / 2 + windowCoordinates.x;\n                y = windowCoordinates.cy / 2 + windowCoordinates.y;\n            } else {\n                try {\n                    dst = $( pTo );\n                } catch( err ) {\n                    dst = null;\n                }\n                if ( dst ) {\n                    dst.filter( \":visible\" );\n                    if ( dst.length === 0 ) {\n                        dst = null;\n                    }\n                }\n            }\n        }\n\n        // If an element was found, center over it\n        if ( dst ) {\n            offset = dst.offset();\n            x = offset.left + dst.outerWidth() / 2;\n            y = offset.top + dst.outerHeight() / 2;\n        }\n\n        // Make sure x and y are valid numbers - center over the window\n        if ( $.type( x ) !== \"number\" || isNaN( x ) ) {\n            x = windowCoordinates.cx / 2 + windowCoordinates.x;\n        }\n        if ( $.type( y ) !== \"number\" || isNaN( y ) ) {\n            y = windowCoordinates.cy / 2 + windowCoordinates.y;\n        }\n\n        return { x: x, y: y };\n    },\n\n    _reposition: function( openOptions ) {\n        // We only care about position-related parameters for repositioning\n        openOptions = {\n            x: openOptions.x,\n            y: openOptions.y,\n            positionTo: openOptions.positionTo\n        };\n        this._trigger( \"beforeposition\", undefined, openOptions );\n        this._ui.container.offset( this._placementCoords( this._desiredCoords( openOptions ) ) );\n    },\n\n    reposition: function( openOptions ) {\n        if ( this._isOpen ) {\n            this._reposition( openOptions );\n        }\n    },\n\n    _safelyBlur: function( currentElement ){\n        if ( currentElement !== this.window[ 0 ] &&\n            currentElement.nodeName.toLowerCase() !== \"body\" ) {\n                $( currentElement ).blur();\n        }\n    },\n\n    _openPrerequisitesComplete: function() {\n        var id = this.element.attr( \"id\" ),\n            firstFocus = this._ui.container.find( \":focusable\" ).first();\n\n        this._ui.container.addClass( \"ui-popup-active\" );\n        this._isOpen = true;\n        this._resizeScreen();\n\n        // Check to see if currElement is not a child of the container.  If it's not, blur\n        if ( !$.contains( this._ui.container[ 0 ], this.document[ 0 ].activeElement ) ) {\n            this._safelyBlur( this.document[ 0 ].activeElement );\n        }\n        if ( firstFocus.length > 0 ) {\n            this._ui.focusElement = firstFocus;\n        }\n        this._ignoreResizeEvents();\n        if ( id ) {\n            this.document.find( \"[aria-haspopup='true'][aria-owns='\" +  id + \"']\" ).attr( \"aria-expanded\", true );\n        }\n        this._trigger( \"afteropen\" );\n    },\n\n    _open: function( options ) {\n        var openOptions = $.extend( {}, this.options, options ),\n            // TODO move blacklist to private method\n            androidBlacklist = ( function() {\n                var ua = navigator.userAgent,\n                    // Rendering engine is Webkit, and capture major version\n                    wkmatch = ua.match( /AppleWebKit\\/([0-9\\.]+)/ ),\n                    wkversion = !!wkmatch && wkmatch[ 1 ],\n                    androidmatch = ua.match( /Android (\\d+(?:\\.\\d+))/ ),\n                    andversion = !!androidmatch && androidmatch[ 1 ],\n                    chromematch = ua.indexOf( \"Chrome\" ) > -1;\n\n                // Platform is Android, WebKit version is greater than 534.13 ( Android 3.2.1 ) and not Chrome.\n                if ( androidmatch !== null && andversion === \"4.0\" && wkversion && wkversion > 534.13 && !chromematch ) {\n                    return true;\n                }\n                return false;\n            }());\n\n        // Count down to triggering \"popupafteropen\" - we have two prerequisites:\n        // 1. The popup window animation completes (container())\n        // 2. The screen opacity animation completes (screen())\n        this._createPrerequisites(\n            $.noop,\n            $.noop,\n            $.proxy( this, \"_openPrerequisitesComplete\" ) );\n\n        this._currentTransition = openOptions.transition;\n        this._applyTransition( openOptions.transition );\n\n        this._ui.screen.removeClass( \"ui-screen-hidden\" );\n        this._ui.container.removeClass( \"ui-popup-truncate\" );\n\n        // Give applications a chance to modify the contents of the container before it appears\n        this._reposition( openOptions );\n\n        this._ui.container.removeClass( \"ui-popup-hidden\" );\n\n        if ( this.options.overlayTheme && androidBlacklist ) {\n            /* TODO: The native browser on Android 4.0.X (\"Ice Cream Sandwich\") suffers from an issue where the popup overlay appears to be z-indexed above the popup itself when certain other styles exist on the same page -- namely, any element set to `position: fixed` and certain types of input. These issues are reminiscent of previously uncovered bugs in older versions of Android's native browser: https://github.com/scottjehl/Device-Bugs/issues/3\n            This fix closes the following bugs ( I use \"closes\" with reluctance, and stress that this issue should be revisited as soon as possible ):\n            https://github.com/jquery/jquery-mobile/issues/4816\n            https://github.com/jquery/jquery-mobile/issues/4844\n            https://github.com/jquery/jquery-mobile/issues/4874\n            */\n\n            // TODO sort out why this._page isn't working\n            this.element.closest( \".ui-page\" ).addClass( \"ui-popup-open\" );\n        }\n        this._animate({\n            additionalCondition: true,\n            transition: openOptions.transition,\n            classToRemove: \"\",\n            screenClassToAdd: \"in\",\n            containerClassToAdd: \"in\",\n            applyTransition: false,\n            prerequisites: this._prerequisites\n        });\n    },\n\n    _closePrerequisiteScreen: function() {\n        this._ui.screen\n            .removeClass( \"out\" )\n            .addClass( \"ui-screen-hidden\" );\n    },\n\n    _closePrerequisiteContainer: function() {\n        this._ui.container\n            .removeClass( \"reverse out\" )\n            .addClass( \"ui-popup-hidden ui-popup-truncate\" )\n            .removeAttr( \"style\" );\n    },\n\n    _closePrerequisitesDone: function() {\n        var container = this._ui.container,\n            id = this.element.attr( \"id\" );\n\n        // remove the global mutex for popups\n        $.mobile.popup.active = undefined;\n\n        // Blur elements inside the container, including the container\n        $( \":focus\", container[ 0 ] ).add( container[ 0 ] ).blur();\n\n        if ( id ) {\n            this.document.find( \"[aria-haspopup='true'][aria-owns='\" +  id + \"']\" ).attr( \"aria-expanded\", false );\n        }\n\n        // alert users that the popup is closed\n        this._trigger( \"afterclose\" );\n    },\n\n    _close: function( immediate ) {\n        this._ui.container.removeClass( \"ui-popup-active\" );\n        this._page.removeClass( \"ui-popup-open\" );\n\n        this._isOpen = false;\n\n        // Count down to triggering \"popupafterclose\" - we have two prerequisites:\n        // 1. The popup window reverse animation completes (container())\n        // 2. The screen opacity animation completes (screen())\n        this._createPrerequisites(\n            $.proxy( this, \"_closePrerequisiteScreen\" ),\n            $.proxy( this, \"_closePrerequisiteContainer\" ),\n            $.proxy( this, \"_closePrerequisitesDone\" ) );\n\n        this._animate( {\n            additionalCondition: this._ui.screen.hasClass( \"in\" ),\n            transition: ( immediate ? \"none\" : ( this._currentTransition ) ),\n            classToRemove: \"in\",\n            screenClassToAdd: \"out\",\n            containerClassToAdd: \"reverse out\",\n            applyTransition: true,\n            prerequisites: this._prerequisites\n        });\n    },\n\n    _unenhance: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n\n        // Put the element back to where the placeholder was and remove the \"ui-popup\" class\n        this._setOptions( { theme: $.mobile.popup.prototype.options.theme } );\n        this.element\n            // Cannot directly insertAfter() - we need to detach() first, because\n            // insertAfter() will do nothing if the payload div was not attached\n            // to the DOM at the time the widget was created, and so the payload\n            // will remain inside the container even after we call insertAfter().\n            // If that happens and we remove the container a few lines below, we\n            // will cause an infinite recursion - #5244\n            .detach()\n            .insertAfter( this._ui.placeholder )\n            .removeClass( \"ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit\" );\n        this._ui.screen.remove();\n        this._ui.container.remove();\n        this._ui.placeholder.remove();\n    },\n\n    _destroy: function() {\n        if ( $.mobile.popup.active === this ) {\n            this.element.one( \"popupafterclose\", $.proxy( this, \"_unenhance\" ) );\n            this.close();\n        } else {\n            this._unenhance();\n        }\n\n        return this;\n    },\n\n    _closePopup: function( theEvent, data ) {\n        var parsedDst, toUrl,\n            currentOptions = this.options,\n            immediate = false;\n\n        if ( ( theEvent && theEvent.isDefaultPrevented() ) || $.mobile.popup.active !== this ) {\n            return;\n        }\n\n        // restore location on screen\n        window.scrollTo( 0, this._scrollTop );\n\n        if ( theEvent && theEvent.type === \"pagebeforechange\" && data ) {\n            // Determine whether we need to rapid-close the popup, or whether we can\n            // take the time to run the closing transition\n            if ( typeof data.toPage === \"string\" ) {\n                parsedDst = data.toPage;\n            } else {\n                parsedDst = data.toPage.jqmData( \"url\" );\n            }\n            parsedDst = $.mobile.path.parseUrl( parsedDst );\n            toUrl = parsedDst.pathname + parsedDst.search + parsedDst.hash;\n\n            if ( this._myUrl !== $.mobile.path.makeUrlAbsolute( toUrl ) ) {\n                // Going to a different page - close immediately\n                immediate = true;\n            } else {\n                theEvent.preventDefault();\n            }\n        }\n\n        // remove nav bindings\n        this.window.off( currentOptions.closeEvents );\n        // unbind click handlers added when history is disabled\n        this.element.undelegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents );\n\n        this._close( immediate );\n    },\n\n    // any navigation event after a popup is opened should close the popup\n    // NOTE the pagebeforechange is bound to catch navigation events that don't\n    //      alter the url (eg, dialogs from popups)\n    _bindContainerClose: function() {\n        this.window\n            .on( this.options.closeEvents, $.proxy( this, \"_closePopup\" ) );\n    },\n\n    widget: function() {\n        return this._ui.container;\n    },\n\n    // TODO no clear deliniation of what should be here and\n    // what should be in _open. Seems to be \"visual\" vs \"history\" for now\n    open: function( options ) {\n        var url, hashkey, activePage, currentIsDialog, hasHash, urlHistory,\n            self = this,\n            currentOptions = this.options;\n\n        // make sure open is idempotent\n        if ( $.mobile.popup.active || currentOptions.disabled ) {\n            return this;\n        }\n\n        // set the global popup mutex\n        $.mobile.popup.active = this;\n        this._scrollTop = this.window.scrollTop();\n\n        // if history alteration is disabled close on navigate events\n        // and leave the url as is\n        if ( !( currentOptions.history ) ) {\n            self._open( options );\n            self._bindContainerClose();\n\n            // When histoy is disabled we have to grab the data-rel\n            // back link clicks so we can close the popup instead of\n            // relying on history to do it for us\n            self.element\n                .delegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents, function( theEvent ) {\n                    self.close();\n                    theEvent.preventDefault();\n                });\n\n            return this;\n        }\n\n        // cache some values for min/readability\n        urlHistory = $.mobile.navigate.history;\n        hashkey = $.mobile.dialogHashKey;\n        activePage = $.mobile.activePage;\n        currentIsDialog = ( activePage ? activePage.hasClass( \"ui-dialog\" ) : false );\n        this._myUrl = url = urlHistory.getActive().url;\n        hasHash = ( url.indexOf( hashkey ) > -1 ) && !currentIsDialog && ( urlHistory.activeIndex > 0 );\n\n        if ( hasHash ) {\n            self._open( options );\n            self._bindContainerClose();\n            return this;\n        }\n\n        // if the current url has no dialog hash key proceed as normal\n        // otherwise, if the page is a dialog simply tack on the hash key\n        if ( url.indexOf( hashkey ) === -1 && !currentIsDialog ) {\n            url = url + (url.indexOf( \"#\" ) > -1 ? hashkey : \"#\" + hashkey);\n        } else {\n            url = $.mobile.path.parseLocation().hash + hashkey;\n        }\n\n        // swallow the the initial navigation event, and bind for the next\n        this.window.one( \"beforenavigate\", function( theEvent ) {\n            theEvent.preventDefault();\n            self._open( options );\n            self._bindContainerClose();\n        });\n\n        this.urlAltered = true;\n        $.mobile.navigate( url, { role: \"dialog\" } );\n\n        return this;\n    },\n\n    close: function() {\n        // make sure close is idempotent\n        if ( $.mobile.popup.active !== this ) {\n            return this;\n        }\n\n        this._scrollTop = this.window.scrollTop();\n\n        if ( this.options.history && this.urlAltered ) {\n            $.mobile.back();\n            this.urlAltered = false;\n        } else {\n            // simulate the nav bindings having fired\n            this._closePopup();\n        }\n\n        return this;\n    }\n});\n\n// TODO this can be moved inside the widget\n$.mobile.popup.handleLink = function( $link ) {\n    var offset,\n        path = $.mobile.path,\n\n        // NOTE make sure to get only the hash from the href because ie7 (wp7)\n        //      returns the absolute href in this case ruining the element selection\n        popup = $( path.hashToSelector( path.parseUrl( $link.attr( \"href\" ) ).hash ) ).first();\n\n    if ( popup.length > 0 && popup.data( \"mobile-popup\" ) ) {\n        offset = $link.offset();\n        popup.popup( \"open\", {\n            x: offset.left + $link.outerWidth() / 2,\n            y: offset.top + $link.outerHeight() / 2,\n            transition: $link.jqmData( \"transition\" ),\n            positionTo: $link.jqmData( \"position-to\" )\n        });\n    }\n\n    //remove after delay\n    setTimeout( function() {\n        $link.removeClass( $.mobile.activeBtnClass );\n    }, 300 );\n};\n\n// TODO move inside _create\n$.mobile.document.on( \"pagebeforechange\", function( theEvent, data ) {\n    if ( data.options.role === \"popup\" ) {\n        $.mobile.popup.handleLink( data.options.link );\n        theEvent.preventDefault();\n    }\n});\n\n})( jQuery );\n\n/*\n* custom \"selectmenu\" plugin\n*/\n\n(function( $, undefined ) {\n\nvar unfocusableItemSelector = \".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')\",\n    goToAdjacentItem = function( item, target, direction ) {\n        var adjacent = item[ direction + \"All\" ]()\n            .not( unfocusableItemSelector )\n            .first();\n\n        // if there's a previous option, focus it\n        if ( adjacent.length ) {\n            target\n                .blur()\n                .attr( \"tabindex\", \"-1\" );\n\n            adjacent.find( \"a\" ).first().focus();\n        }\n    };\n\n$.widget( \"mobile.selectmenu\", $.mobile.selectmenu, {\n    _create: function() {\n        var o = this.options;\n\n        // Custom selects cannot exist inside popups, so revert the \"nativeMenu\"\n        // option to true if a parent is a popup\n        o.nativeMenu = o.nativeMenu || ( this.element.parents( \":jqmData(role='popup'),:mobile-popup\" ).length > 0 );\n\n        return this._super();\n    },\n\n    _handleSelectFocus: function() {\n        this.element.blur();\n        this.button.focus();\n    },\n\n    _handleKeydown: function( event ) {\n        this._super( event );\n        this._handleButtonVclickKeydown( event );\n    },\n\n    _handleButtonVclickKeydown: function( event ) {\n        if ( this.options.disabled || this.isOpen || this.options.nativeMenu ) {\n            return;\n        }\n\n        if (event.type === \"vclick\" ||\n                event.keyCode && (event.keyCode === $.mobile.keyCode.ENTER || event.keyCode === $.mobile.keyCode.SPACE)) {\n\n            this._decideFormat();\n            if ( this.menuType === \"overlay\" ) {\n                this.button.attr( \"href\", \"#\" + this.popupId ).attr( \"data-\" + ( $.mobile.ns || \"\" ) + \"rel\", \"popup\" );\n            } else {\n                this.button.attr( \"href\", \"#\" + this.dialogId ).attr( \"data-\" + ( $.mobile.ns || \"\" ) + \"rel\", \"dialog\" );\n            }\n            this.isOpen = true;\n            // Do not prevent default, so the navigation may have a chance to actually open the chosen format\n        }\n    },\n\n    _handleListFocus: function( e ) {\n        var params = ( e.type === \"focusin\" ) ?\n            { tabindex: \"0\", event: \"vmouseover\" }:\n            { tabindex: \"-1\", event: \"vmouseout\" };\n\n        $( e.target )\n            .attr( \"tabindex\", params.tabindex )\n            .trigger( params.event );\n    },\n\n    _handleListKeydown: function( event ) {\n        var target = $( event.target ),\n            li = target.closest( \"li\" );\n\n        // switch logic based on which key was pressed\n        switch ( event.keyCode ) {\n            // up or left arrow keys\n        case 38:\n            goToAdjacentItem( li, target, \"prev\" );\n            return false;\n            // down or right arrow keys\n        case 40:\n            goToAdjacentItem( li, target, \"next\" );\n            return false;\n            // If enter or space is pressed, trigger click\n        case 13:\n        case 32:\n            target.trigger( \"click\" );\n            return false;\n        }\n    },\n\n    _handleMenuPageHide: function() {\n\n        // After the dialog's done, we may want to trigger change if the value has actually changed\n        this._delayedTrigger();\n\n        // TODO centralize page removal binding / handling in the page plugin.\n        // Suggestion from @jblas to do refcounting\n        //\n        // TODO extremely confusing dependency on the open method where the pagehide.remove\n        // bindings are stripped to prevent the parent page from disappearing. The way\n        // we're keeping pages in the DOM right now sucks\n        //\n        // rebind the page remove that was unbound in the open function\n        // to allow for the parent page removal from actions other than the use\n        // of a dialog sized custom select\n        //\n        // doing this here provides for the back button on the custom select dialog\n        this.thisPage.page( \"bindRemove\" );\n    },\n\n    _handleHeaderCloseClick: function() {\n        if ( this.menuType === \"overlay\" ) {\n            this.close();\n            return false;\n        }\n    },\n\n    _handleListItemClick: function( event ) {\n        var listItem = $( event.target ).closest( \"li\" ),\n\n            // Index of option tag to be selected\n            oldIndex = this.select[ 0 ].selectedIndex,\n            newIndex = $.mobile.getAttribute( listItem, \"option-index\" ),\n            option = this._selectOptions().eq( newIndex )[ 0 ];\n\n        // Toggle selected status on the tag for multi selects\n        option.selected = this.isMultiple ? !option.selected : true;\n\n        // Toggle checkbox class for multiple selects\n        if ( this.isMultiple ) {\n            listItem.find( \"a\" )\n                .toggleClass( \"ui-checkbox-on\", option.selected )\n                .toggleClass( \"ui-checkbox-off\", !option.selected );\n        }\n\n        // If it's not a multiple select, trigger change after it has finished closing\n        if ( !this.isMultiple && oldIndex !== newIndex ) {\n            this._triggerChange = true;\n        }\n\n        // Trigger change if it's a multiple select\n        // Hide custom select for single selects only - otherwise focus clicked item\n        // We need to grab the clicked item the hard way, because the list may have been rebuilt\n        if ( this.isMultiple ) {\n            this.select.trigger( \"change\" );\n            this.list.find( \"li:not(.ui-li-divider)\" ).eq( newIndex )\n                .find( \"a\" ).first().focus();\n        }\n        else {\n            this.close();\n        }\n\n        event.preventDefault();\n    },\n\n    build: function() {\n        var selectId, popupId, dialogId, label, thisPage, isMultiple, menuId,\n            themeAttr, overlayTheme, overlayThemeAttr, dividerThemeAttr,\n            menuPage, listbox, list, header, headerTitle, menuPageContent,\n            menuPageClose, headerClose,\n            o = this.options;\n\n        if ( o.nativeMenu ) {\n            return this._super();\n        }\n\n        selectId = this.selectId;\n        popupId = selectId + \"-listbox\";\n        dialogId = selectId + \"-dialog\";\n        label = this.label;\n        thisPage = this.element.closest( \".ui-page\" );\n        isMultiple = this.element[ 0 ].multiple;\n        menuId = selectId + \"-menu\";\n        themeAttr = o.theme ? ( \" data-\" + $.mobile.ns + \"theme='\" + o.theme + \"'\" ) : \"\";\n        overlayTheme = o.overlayTheme || o.theme || null;\n        overlayThemeAttr = overlayTheme ? ( \" data-\" + $.mobile.ns +\n            \"overlay-theme='\" + overlayTheme + \"'\" ) : \"\";\n        dividerThemeAttr = ( o.dividerTheme && isMultiple ) ? ( \" data-\" + $.mobile.ns + \"divider-theme='\" + o.dividerTheme + \"'\" ) : \"\";\n        menuPage = $( \"<div data-\" + $.mobile.ns + \"role='dialog' class='ui-selectmenu' id='\" + dialogId + \"'\" + themeAttr + overlayThemeAttr + \">\" +\n            \"<div data-\" + $.mobile.ns + \"role='header'>\" +\n            \"<div class='ui-title'></div>\"+\n            \"</div>\"+\n            \"<div data-\" + $.mobile.ns + \"role='content'></div>\"+\n            \"</div>\" );\n        listbox = $( \"<div\" + themeAttr + overlayThemeAttr + \" id='\" + popupId +\n                \"' class='ui-selectmenu'></div>\" )\n            .insertAfter( this.select )\n            .popup();\n        list = $( \"<ul class='ui-selectmenu-list' id='\" + menuId + \"' role='listbox' aria-labelledby='\" + this.buttonId + \"'\" + themeAttr + dividerThemeAttr + \"></ul>\" ).appendTo( listbox );\n        header = $( \"<div class='ui-header ui-bar-\" + ( o.theme ? o.theme : \"inherit\" ) + \"'></div>\" ).prependTo( listbox );\n        headerTitle = $( \"<h1 class='ui-title'></h1>\" ).appendTo( header );\n\n        if ( this.isMultiple ) {\n            headerClose = $( \"<a>\", {\n                \"role\": \"button\",\n                \"text\": o.closeText,\n                \"href\": \"#\",\n                \"class\": \"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete\"\n            }).appendTo( header );\n        }\n\n        $.extend( this, {\n            selectId: selectId,\n            menuId: menuId,\n            popupId: popupId,\n            dialogId: dialogId,\n            thisPage: thisPage,\n            menuPage: menuPage,\n            label: label,\n            isMultiple: isMultiple,\n            theme: o.theme,\n            listbox: listbox,\n            list: list,\n            header: header,\n            headerTitle: headerTitle,\n            headerClose: headerClose,\n            menuPageContent: menuPageContent,\n            menuPageClose: menuPageClose,\n            placeholder: \"\"\n        });\n\n        // Create list from select, update state\n        this.refresh();\n\n        if ( this._origTabIndex === undefined ) {\n            // Map undefined to false, because this._origTabIndex === undefined\n            // indicates that we have not yet checked whether the select has\n            // originally had a tabindex attribute, whereas false indicates that\n            // we have checked the select for such an attribute, and have found\n            // none present.\n            this._origTabIndex = ( this.select[ 0 ].getAttribute( \"tabindex\" ) === null ) ? false : this.select.attr( \"tabindex\" );\n        }\n        this.select.attr( \"tabindex\", \"-1\" );\n        this._on( this.select, { focus : \"_handleSelectFocus\" } );\n\n        // Button events\n        this._on( this.button, {\n            vclick: \"_handleButtonVclickKeydown\"\n        });\n\n        // Events for list items\n        this.list.attr( \"role\", \"listbox\" );\n        this._on( this.list, {\n            \"focusin\": \"_handleListFocus\",\n            \"focusout\": \"_handleListFocus\",\n            \"keydown\": \"_handleListKeydown\",\n            \"click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)\": \"_handleListItemClick\"\n        });\n\n        // button refocus ensures proper height calculation\n        // by removing the inline style and ensuring page inclusion\n        this._on( this.menuPage, { pagehide: \"_handleMenuPageHide\" } );\n\n        // Events on the popup\n        this._on( this.listbox, { popupafterclose: \"_popupClosed\" } );\n\n        // Close button on small overlays\n        if ( this.isMultiple ) {\n            this._on( this.headerClose, { click: \"_handleHeaderCloseClick\" } );\n        }\n\n        return this;\n    },\n\n    _popupClosed: function() {\n        this.close();\n        this._delayedTrigger();\n    },\n\n    _delayedTrigger: function() {\n        if ( this._triggerChange ) {\n            this.element.trigger( \"change\" );\n        }\n        this._triggerChange = false;\n    },\n\n    _isRebuildRequired: function() {\n        var list = this.list.find( \"li\" ),\n            options = this._selectOptions().not( \".ui-screen-hidden\" );\n\n        // TODO exceedingly naive method to determine difference\n        // ignores value changes etc in favor of a forcedRebuild\n        // from the user in the refresh method\n        return options.text() !== list.text();\n    },\n\n    selected: function() {\n        return this._selectOptions().filter( \":selected:not( :jqmData(placeholder='true') )\" );\n    },\n\n    refresh: function( force ) {\n        var self, indices;\n\n        if ( this.options.nativeMenu ) {\n            return this._super( force );\n        }\n\n        self = this;\n        if ( force || this._isRebuildRequired() ) {\n            self._buildList();\n        }\n\n        indices = this.selectedIndices();\n\n        self.setButtonText();\n        self.setButtonCount();\n\n        self.list.find( \"li:not(.ui-li-divider)\" )\n            .find( \"a\" ).removeClass( $.mobile.activeBtnClass ).end()\n            .attr( \"aria-selected\", false )\n            .each(function( i ) {\n                var item = $( this );\n                if ( $.inArray( i, indices ) > -1 ) {\n\n                    // Aria selected attr\n                    item.attr( \"aria-selected\", true );\n\n                    // Multiple selects: add the \"on\" checkbox state to the icon\n                    if ( self.isMultiple ) {\n                        item.find( \"a\" ).removeClass( \"ui-checkbox-off\" ).addClass( \"ui-checkbox-on\" );\n                    } else {\n                        if ( item.hasClass( \"ui-screen-hidden\" ) ) {\n                            item.next().find( \"a\" ).addClass( $.mobile.activeBtnClass );\n                        } else {\n                            item.find( \"a\" ).addClass( $.mobile.activeBtnClass );\n                        }\n                    }\n                } else if ( self.isMultiple ) {\n                    item.find( \"a\" ).removeClass( \"ui-checkbox-on\" ).addClass( \"ui-checkbox-off\" );\n                }\n            });\n    },\n\n    close: function() {\n        if ( this.options.disabled || !this.isOpen ) {\n            return;\n        }\n\n        var self = this;\n\n        if ( self.menuType === \"page\" ) {\n            self.menuPage.dialog( \"close\" );\n            self.list.appendTo( self.listbox );\n        } else {\n            self.listbox.popup( \"close\" );\n        }\n\n        self._focusButton();\n        // allow the dialog to be closed again\n        self.isOpen = false;\n    },\n\n    open: function() {\n        this.button.click();\n    },\n\n    _focusMenuItem: function() {\n        var selector = this.list.find( \"a.\" + $.mobile.activeBtnClass );\n        if ( selector.length === 0 ) {\n            selector = this.list.find( \"li:not(\" + unfocusableItemSelector + \") a.ui-btn\" );\n        }\n        selector.first().focus();\n    },\n\n    _decideFormat: function() {\n        var self = this,\n            $window = this.window,\n            selfListParent = self.list.parent(),\n            menuHeight = selfListParent.outerHeight(),\n            scrollTop = $window.scrollTop(),\n            btnOffset = self.button.offset().top,\n            screenHeight = $window.height();\n\n        if ( menuHeight > screenHeight - 80 || !$.support.scrollTop ) {\n\n            self.menuPage.appendTo( $.mobile.pageContainer ).page();\n            self.menuPageContent = self.menuPage.find( \".ui-content\" );\n            self.menuPageClose = self.menuPage.find( \".ui-header a\" );\n\n            // prevent the parent page from being removed from the DOM,\n            // otherwise the results of selecting a list item in the dialog\n            // fall into a black hole\n            self.thisPage.unbind( \"pagehide.remove\" );\n\n            //for WebOS/Opera Mini (set lastscroll using button offset)\n            if ( scrollTop === 0 && btnOffset > screenHeight ) {\n                self.thisPage.one( \"pagehide\", function() {\n                    $( this ).jqmData( \"lastScroll\", btnOffset );\n                });\n            }\n\n            self.menuPage.one( {\n                pageshow: $.proxy( this, \"_focusMenuItem\" ),\n                pagehide: $.proxy( this, \"close\" )\n            });\n\n            self.menuType = \"page\";\n            self.menuPageContent.append( self.list );\n            self.menuPage\n                .find( \"div .ui-title\" )\n                    .text( self.label.getEncodedText() || self.placeholder );\n        } else {\n            self.menuType = \"overlay\";\n\n            self.listbox.one( { popupafteropen: $.proxy( this, \"_focusMenuItem\" ) } );\n        }\n    },\n\n    _buildList: function() {\n        var self = this,\n            o = this.options,\n            placeholder = this.placeholder,\n            needPlaceholder = true,\n            dataIcon = \"false\",\n            $options, numOptions, select,\n            dataPrefix = \"data-\" + $.mobile.ns,\n            dataIndexAttr = dataPrefix + \"option-index\",\n            dataIconAttr = dataPrefix + \"icon\",\n            dataRoleAttr = dataPrefix + \"role\",\n            dataPlaceholderAttr = dataPrefix + \"placeholder\",\n            fragment = document.createDocumentFragment(),\n            isPlaceholderItem = false,\n            optGroup,\n            i,\n            option, $option, parent, text, anchor, classes,\n            optLabel, divider, item;\n\n        self.list.empty().filter( \".ui-listview\" ).listview( \"destroy\" );\n        $options = this._selectOptions();\n        numOptions = $options.length;\n        select = this.select[ 0 ];\n\n        for ( i = 0; i < numOptions;i++, isPlaceholderItem = false) {\n            option = $options[i];\n            $option = $( option );\n\n            // Do not create options based on ui-screen-hidden select options\n            if ( $option.hasClass( \"ui-screen-hidden\" ) ) {\n                continue;\n            }\n\n            parent = option.parentNode;\n            classes = [];\n\n            // Although using .text() here raises the risk that, when we later paste this into the\n            // list item we end up pasting possibly malicious things like <script> tags, that risk\n            // only arises if we do something like $( \"<li><a href='#'>\" + text + \"</a></li>\" ). We\n            // don't do that. We do document.createTextNode( text ) instead, which guarantees that\n            // whatever we paste in will end up as text, with characters like <, > and & escaped.\n            text = $option.text();\n            anchor = document.createElement( \"a\" );\n            anchor.setAttribute( \"href\", \"#\" );\n            anchor.appendChild( document.createTextNode( text ) );\n\n            // Are we inside an optgroup?\n            if ( parent !== select && parent.nodeName.toLowerCase() === \"optgroup\" ) {\n                optLabel = parent.getAttribute( \"label\" );\n                if ( optLabel !== optGroup ) {\n                    divider = document.createElement( \"li\" );\n                    divider.setAttribute( dataRoleAttr, \"list-divider\" );\n                    divider.setAttribute( \"role\", \"option\" );\n                    divider.setAttribute( \"tabindex\", \"-1\" );\n                    divider.appendChild( document.createTextNode( optLabel ) );\n                    fragment.appendChild( divider );\n                    optGroup = optLabel;\n                }\n            }\n\n            if ( needPlaceholder && ( !option.getAttribute( \"value\" ) || text.length === 0 || $option.jqmData( \"placeholder\" ) ) ) {\n                needPlaceholder = false;\n                isPlaceholderItem = true;\n\n                // If we have identified a placeholder, record the fact that it was\n                // us who have added the placeholder to the option and mark it\n                // retroactively in the select as well\n                if ( null === option.getAttribute( dataPlaceholderAttr ) ) {\n                    this._removePlaceholderAttr = true;\n                }\n                option.setAttribute( dataPlaceholderAttr, true );\n                if ( o.hidePlaceholderMenuItems ) {\n                    classes.push( \"ui-screen-hidden\" );\n                }\n                if ( placeholder !== text ) {\n                    placeholder = self.placeholder = text;\n                }\n            }\n\n            item = document.createElement( \"li\" );\n            if ( option.disabled ) {\n                classes.push( \"ui-state-disabled\" );\n                item.setAttribute( \"aria-disabled\", true );\n            }\n            item.setAttribute( dataIndexAttr, i );\n            item.setAttribute( dataIconAttr, dataIcon );\n            if ( isPlaceholderItem ) {\n                item.setAttribute( dataPlaceholderAttr, true );\n            }\n            item.className = classes.join( \" \" );\n            item.setAttribute( \"role\", \"option\" );\n            anchor.setAttribute( \"tabindex\", \"-1\" );\n            if ( this.isMultiple ) {\n                $( anchor ).addClass( \"ui-btn ui-checkbox-off ui-btn-icon-right\" );\n            }\n\n            item.appendChild( anchor );\n            fragment.appendChild( item );\n        }\n\n        self.list[0].appendChild( fragment );\n\n        // Hide header if it's not a multiselect and there's no placeholder\n        if ( !this.isMultiple && !placeholder.length ) {\n            this.header.addClass( \"ui-screen-hidden\" );\n        } else {\n            this.headerTitle.text( this.placeholder );\n        }\n\n        // Now populated, create listview\n        self.list.listview();\n    },\n\n    _button: function() {\n        return this.options.nativeMenu ?\n            this._super() :\n            $( \"<a>\", {\n                \"href\": \"#\",\n                \"role\": \"button\",\n                // TODO value is undefined at creation\n                \"id\": this.buttonId,\n                \"aria-haspopup\": \"true\",\n\n                // TODO value is undefined at creation\n                \"aria-owns\": this.menuId\n            });\n    },\n\n    _destroy: function() {\n\n        if ( !this.options.nativeMenu ) {\n            this.close();\n\n            // Restore the tabindex attribute to its original value\n            if ( this._origTabIndex !== undefined ) {\n                if ( this._origTabIndex !== false ) {\n                    this.select.attr( \"tabindex\", this._origTabIndex );\n                } else {\n                    this.select.removeAttr( \"tabindex\" );\n                }\n            }\n\n            // Remove the placeholder attribute if we were the ones to add it\n            if ( this._removePlaceholderAttr ) {\n                this._selectOptions().removeAttr( \"data-\" + $.mobile.ns + \"placeholder\" );\n            }\n\n            // Remove the popup\n            this.listbox.remove();\n\n            // Remove the dialog\n            this.menuPage.remove();\n        }\n\n        // Chain up\n        this._super();\n    }\n});\n\n})( jQuery );\n\n\n// buttonMarkup is deprecated as of 1.4.0 and will be removed in 1.5.0.\n\n(function( $, undefined ) {\n\n// General policy: Do not access data-* attributes except during enhancement.\n// In all other cases we determine the state of the button exclusively from its\n// className. That's why optionsToClasses expects a full complement of options,\n// and the jQuery plugin completes the set of options from the default values.\n\n// Map classes to buttonMarkup boolean options - used in classNameToOptions()\nvar reverseBoolOptionMap = {\n        \"ui-shadow\" : \"shadow\",\n        \"ui-corner-all\" : \"corners\",\n        \"ui-btn-inline\" : \"inline\",\n        \"ui-shadow-icon\" : \"iconshadow\", /* TODO: Remove in 1.5 */\n        \"ui-mini\" : \"mini\"\n    },\n    getAttrFixed = function() {\n        var ret = $.mobile.getAttribute.apply( this, arguments );\n\n        return ( ret == null ? undefined : ret );\n    },\n    capitalLettersRE = /[A-Z]/g;\n\n// optionsToClasses:\n// @options: A complete set of options to convert to class names.\n// @existingClasses: extra classes to add to the result\n//\n// Converts @options to buttonMarkup classes and returns the result as an array\n// that can be converted to an element's className with .join( \" \" ). All\n// possible options must be set inside @options. Use $.fn.buttonMarkup.defaults\n// to get a complete set and use $.extend to override your choice of options\n// from that set.\nfunction optionsToClasses( options, existingClasses ) {\n    var classes = existingClasses ? existingClasses : [];\n\n    // Add classes to the array - first ui-btn\n    classes.push( \"ui-btn\" );\n\n    // If there is a theme\n    if ( options.theme ) {\n        classes.push( \"ui-btn-\" + options.theme );\n    }\n\n    // If there's an icon, add the icon-related classes\n    if ( options.icon ) {\n        classes = classes.concat([\n            \"ui-icon-\" + options.icon,\n            \"ui-btn-icon-\" + options.iconpos\n        ]);\n        if ( options.iconshadow ) {\n            classes.push( \"ui-shadow-icon\" ); /* TODO: Remove in 1.5 */\n        }\n    }\n\n    // Add the appropriate class for each boolean option\n    if ( options.inline ) {\n        classes.push( \"ui-btn-inline\" );\n    }\n    if ( options.shadow ) {\n        classes.push( \"ui-shadow\" );\n    }\n    if ( options.corners ) {\n        classes.push( \"ui-corner-all\" );\n    }\n    if ( options.mini ) {\n        classes.push( \"ui-mini\" );\n    }\n\n    // Create a string from the array and return it\n    return classes;\n}\n\n// classNameToOptions:\n// @classes: A string containing a .className-style space-separated class list\n//\n// Loops over @classes and calculates an options object based on the\n// buttonMarkup-related classes it finds. It records unrecognized classes in an\n// array.\n//\n// Returns: An object containing the following items:\n//\n// \"options\": buttonMarkup options found to be present because of the\n// presence/absence of corresponding classes\n//\n// \"unknownClasses\": a string containing all the non-buttonMarkup-related\n// classes found in @classes\n//\n// \"alreadyEnhanced\": A boolean indicating whether the ui-btn class was among\n// those found to be present\nfunction classNameToOptions( classes ) {\n    var idx, map, unknownClass,\n        alreadyEnhanced = false,\n        noIcon = true,\n        o = {\n            icon: \"\",\n            inline: false,\n            shadow: false,\n            corners: false,\n            iconshadow: false,\n            mini: false\n        },\n        unknownClasses = [];\n\n    classes = classes.split( \" \" );\n\n    // Loop over the classes\n    for ( idx = 0 ; idx < classes.length ; idx++ ) {\n\n        // Assume it's an unrecognized class\n        unknownClass = true;\n\n        // Recognize boolean options from the presence of classes\n        map = reverseBoolOptionMap[ classes[ idx ] ];\n        if ( map !== undefined ) {\n            unknownClass = false;\n            o[ map ] = true;\n\n        // Recognize the presence of an icon and establish the icon position\n        } else if ( classes[ idx ].indexOf( \"ui-btn-icon-\" ) === 0 ) {\n            unknownClass = false;\n            noIcon = false;\n            o.iconpos = classes[ idx ].substring( 12 );\n\n        // Establish which icon is present\n        } else if ( classes[ idx ].indexOf( \"ui-icon-\" ) === 0 ) {\n            unknownClass = false;\n            o.icon = classes[ idx ].substring( 8 );\n\n        // Establish the theme - this recognizes one-letter theme swatch names\n        } else if ( classes[ idx ].indexOf( \"ui-btn-\" ) === 0 && classes[ idx ].length === 8 ) {\n            unknownClass = false;\n            o.theme = classes[ idx ].substring( 7 );\n\n        // Recognize that this element has already been buttonMarkup-enhanced\n        } else if ( classes[ idx ] === \"ui-btn\" ) {\n            unknownClass = false;\n            alreadyEnhanced = true;\n        }\n\n        // If this class has not been recognized, add it to the list\n        if ( unknownClass ) {\n            unknownClasses.push( classes[ idx ] );\n        }\n    }\n\n    // If a \"ui-btn-icon-*\" icon position class is absent there cannot be an icon\n    if ( noIcon ) {\n        o.icon = \"\";\n    }\n\n    return {\n        options: o,\n        unknownClasses: unknownClasses,\n        alreadyEnhanced: alreadyEnhanced\n    };\n}\n\nfunction camelCase2Hyphenated( c ) {\n    return \"-\" + c.toLowerCase();\n}\n\n// $.fn.buttonMarkup:\n// DOM: gets/sets .className\n//\n// @options: options to apply to the elements in the jQuery object\n// @overwriteClasses: boolean indicating whether to honour existing classes\n//\n// Calculates the classes to apply to the elements in the jQuery object based on\n// the options passed in. If @overwriteClasses is true, it sets the className\n// property of each element in the jQuery object to the buttonMarkup classes\n// it calculates based on the options passed in.\n//\n// If you wish to preserve any classes that are already present on the elements\n// inside the jQuery object, including buttonMarkup-related classes that were\n// added by a previous call to $.fn.buttonMarkup() or during page enhancement\n// then you should omit @overwriteClasses or set it to false.\n$.fn.buttonMarkup = function( options, overwriteClasses ) {\n    var idx, data, el, retrievedOptions, optionKey,\n        defaults = $.fn.buttonMarkup.defaults;\n\n    for ( idx = 0 ; idx < this.length ; idx++ ) {\n        el = this[ idx ];\n        data = overwriteClasses ?\n\n            // Assume this element is not enhanced and ignore its classes\n            { alreadyEnhanced: false, unknownClasses: [] } :\n\n            // Otherwise analyze existing classes to establish existing options and\n            // classes\n            classNameToOptions( el.className );\n\n        retrievedOptions = $.extend( {},\n\n            // If the element already has the class ui-btn, then we assume that\n            // it has passed through buttonMarkup before - otherwise, the options\n            // returned by classNameToOptions do not correctly reflect the state of\n            // the element\n            ( data.alreadyEnhanced ? data.options : {} ),\n\n            // Finally, apply the options passed in\n            options );\n\n        // If this is the first call on this element, retrieve remaining options\n        // from the data-attributes\n        if ( !data.alreadyEnhanced ) {\n            for ( optionKey in defaults ) {\n                if ( retrievedOptions[ optionKey ] === undefined ) {\n                    retrievedOptions[ optionKey ] = getAttrFixed( el,\n                        optionKey.replace( capitalLettersRE, camelCase2Hyphenated )\n                    );\n                }\n            }\n        }\n\n        el.className = optionsToClasses(\n\n            // Merge all the options and apply them as classes\n            $.extend( {},\n\n                // The defaults form the basis\n                defaults,\n\n                // Add the computed options\n                retrievedOptions\n            ),\n\n            // ... and re-apply any unrecognized classes that were found\n            data.unknownClasses ).join( \" \" );\n        if ( el.tagName.toLowerCase() !== \"button\" ) {\n            el.setAttribute( \"role\", \"button\" );\n        }\n    }\n\n    return this;\n};\n\n// buttonMarkup defaults. This must be a complete set, i.e., a value must be\n// given here for all recognized options\n$.fn.buttonMarkup.defaults = {\n    icon: \"\",\n    iconpos: \"left\",\n    theme: null,\n    inline: false,\n    shadow: true,\n    corners: true,\n    iconshadow: false, /* TODO: Remove in 1.5. Option deprecated in 1.4. */\n    mini: false\n};\n\n$.extend( $.fn.buttonMarkup, {\n    initSelector: \"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)\"\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.controlgroup\", $.extend( {\n    options: {\n        enhanced: false,\n        theme: null,\n        shadow: false,\n        corners: true,\n        excludeInvisible: true,\n        type: \"vertical\",\n        mini: false\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options,\n            keepNative = $.mobile.page.prototype.keepNativeSelector();\n\n        // Run buttonmarkup\n        if ( $.fn.buttonMarkup ) {\n            this.element\n                .find( $.fn.buttonMarkup.initSelector )\n                .not( keepNative )\n                .buttonMarkup();\n        }\n        // Enhance child widgets\n        $.each( this._childWidgets, $.proxy( function( number, widgetName ) {\n            if ( $.mobile[ widgetName ] ) {\n                this.element\n                    .find( $.mobile[ widgetName ].initSelector )\n                    .not( keepNative )[ widgetName ]();\n            }\n        }, this ));\n\n        $.extend( this, {\n            _ui: null,\n            _initialRefresh: true\n        });\n\n        if ( opts.enhanced ) {\n            this._ui = {\n                groupLegend: elem.children( \".ui-controlgroup-label\" ).children(),\n                childWrapper: elem.children( \".ui-controlgroup-controls\" )\n            };\n        } else {\n            this._ui = this._enhance();\n        }\n\n    },\n\n    _childWidgets: [ \"checkboxradio\", \"selectmenu\", \"button\" ],\n\n    _themeClassFromOption: function( value ) {\n        return ( value ? ( value === \"none\" ? \"\" : \"ui-group-theme-\" + value ) : \"\" );\n    },\n\n    _enhance: function() {\n        var elem = this.element,\n            opts = this.options,\n            ui = {\n                groupLegend: elem.children( \"legend\" ),\n                childWrapper: elem\n                    .addClass( \"ui-controlgroup \" +\n                        \"ui-controlgroup-\" +\n                            ( opts.type === \"horizontal\" ? \"horizontal\" : \"vertical\" ) + \" \" +\n                        this._themeClassFromOption( opts.theme ) + \" \" +\n                        ( opts.corners ? \"ui-corner-all \" : \"\" ) +\n                        ( opts.mini ? \"ui-mini \" : \"\" ) )\n                    .wrapInner( \"<div \" +\n                        \"class='ui-controlgroup-controls \" +\n                            ( opts.shadow === true ? \"ui-shadow\" : \"\" ) + \"'></div>\" )\n                    .children()\n            };\n\n        if ( ui.groupLegend.length > 0 ) {\n            $( \"<div role='heading' class='ui-controlgroup-label'></div>\" )\n                .append( ui.groupLegend )\n                .prependTo( elem );\n        }\n\n        return ui;\n    },\n\n    _init: function() {\n        this.refresh();\n    },\n\n    _setOptions: function( options ) {\n        var callRefresh, returnValue,\n            elem = this.element;\n\n        // Must have one of horizontal or vertical\n        if ( options.type !== undefined ) {\n            elem\n                .removeClass( \"ui-controlgroup-horizontal ui-controlgroup-vertical\" )\n                .addClass( \"ui-controlgroup-\" + ( options.type === \"horizontal\" ? \"horizontal\" : \"vertical\" ) );\n            callRefresh = true;\n        }\n\n        if ( options.theme !== undefined ) {\n            elem\n                .removeClass( this._themeClassFromOption( this.options.theme ) )\n                .addClass( this._themeClassFromOption( options.theme ) );\n        }\n\n        if ( options.corners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", options.corners );\n        }\n\n        if ( options.mini !== undefined ) {\n            elem.toggleClass( \"ui-mini\", options.mini );\n        }\n\n        if ( options.shadow !== undefined ) {\n            this._ui.childWrapper.toggleClass( \"ui-shadow\", options.shadow );\n        }\n\n        if ( options.excludeInvisible !== undefined ) {\n            this.options.excludeInvisible = options.excludeInvisible;\n            callRefresh = true;\n        }\n\n        returnValue = this._super( options );\n\n        if ( callRefresh ) {\n            this.refresh();\n        }\n\n        return returnValue;\n    },\n\n    container: function() {\n        return this._ui.childWrapper;\n    },\n\n    refresh: function() {\n        var $el = this.container(),\n            els = $el.find( \".ui-btn\" ).not( \".ui-slider-handle\" ),\n            create = this._initialRefresh;\n        if ( $.mobile.checkboxradio ) {\n            $el.find( \":mobile-checkboxradio\" ).checkboxradio( \"refresh\" );\n        }\n        this._addFirstLastClasses( els,\n            this.options.excludeInvisible ? this._getVisibles( els, create ) : els,\n            create );\n        this._initialRefresh = false;\n    },\n\n    // Caveat: If the legend is not the first child of the controlgroup at enhance\n    // time, it will be after _destroy().\n    _destroy: function() {\n        var ui, buttons,\n            opts = this.options;\n\n        if ( opts.enhanced ) {\n            return this;\n        }\n\n        ui = this._ui;\n        buttons = this.element\n            .removeClass( \"ui-controlgroup \" +\n                \"ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini \" +\n                this._themeClassFromOption( opts.theme ) )\n            .find( \".ui-btn\" )\n            .not( \".ui-slider-handle\" );\n\n        this._removeFirstLastClasses( buttons );\n\n        ui.groupLegend.unwrap();\n        ui.childWrapper.children().unwrap();\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})(jQuery);\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.toolbar\", {\n        initSelector: \":jqmData(role='footer'), :jqmData(role='header')\",\n\n        options: {\n            theme: null,\n            addBackBtn: false,\n            backBtnTheme: null,\n            backBtnText: \"Back\"\n        },\n\n        _create: function() {\n            var leftbtn, rightbtn,\n                role =  this.element.is( \":jqmData(role='header')\" ) ? \"header\" : \"footer\",\n                page = this.element.closest( \".ui-page\" );\n            if ( page.length === 0 ) {\n                page = false;\n                this._on( this.document, {\n                    \"pageshow\": \"refresh\"\n                });\n            }\n            $.extend( this, {\n                role: role,\n                page: page,\n                leftbtn: leftbtn,\n                rightbtn: rightbtn\n            });\n            this.element.attr( \"role\", role === \"header\" ? \"banner\" : \"contentinfo\" ).addClass( \"ui-\" + role );\n            this.refresh();\n            this._setOptions( this.options );\n        },\n        _setOptions: function( o ) {\n            if ( o.addBackBtn !== undefined ) {\n                this._updateBackButton();\n            }\n            if ( o.backBtnTheme != null ) {\n                this.element\n                    .find( \".ui-toolbar-back-btn\" )\n                    .addClass( \"ui-btn ui-btn-\" + o.backBtnTheme );\n            }\n            if ( o.backBtnText !== undefined ) {\n                this.element.find( \".ui-toolbar-back-btn .ui-btn-text\" ).text( o.backBtnText );\n            }\n            if ( o.theme !== undefined ) {\n                var currentTheme = this.options.theme ? this.options.theme : \"inherit\",\n                    newTheme = o.theme ? o.theme : \"inherit\";\n\n                this.element.removeClass( \"ui-bar-\" + currentTheme ).addClass( \"ui-bar-\" + newTheme );\n            }\n\n            this._super( o );\n        },\n        refresh: function() {\n            if ( this.role === \"header\" ) {\n                this._addHeaderButtonClasses();\n            }\n            if ( !this.page ) {\n                this._setRelative();\n                if ( this.role === \"footer\" ) {\n                    this.element.appendTo( \"body\" );\n                } else if ( this.role === \"header\" ) {\n                    this._updateBackButton();\n                }\n            }\n            this._addHeadingClasses();\n            this._btnMarkup();\n        },\n\n        //we only want this to run on non fixed toolbars so make it easy to override\n        _setRelative: function() {\n            $( \"[data-\"+ $.mobile.ns + \"role='page']\" ).css({ \"position\": \"relative\" });\n        },\n\n        // Deprecated in 1.4. As from 1.5 button classes have to be present in the markup.\n        _btnMarkup: function() {\n            this.element\n                .children( \"a\" )\n                .filter( \":not([data-\" + $.mobile.ns + \"role='none'])\" )\n                .attr( \"data-\" + $.mobile.ns + \"role\", \"button\" );\n            this.element.trigger( \"create\" );\n        },\n        // Deprecated in 1.4. As from 1.5 ui-btn-left/right classes have to be present in the markup.\n        _addHeaderButtonClasses: function() {\n            var headerAnchors = this.element.children( \"a, button\" );\n\n            // Do not mistake a back button for a left toolbar button\n            this.leftbtn = headerAnchors.hasClass( \"ui-btn-left\" ) &&\n                !headerAnchors.hasClass( \"ui-toolbar-back-btn\" );\n\n            this.rightbtn = headerAnchors.hasClass( \"ui-btn-right\" );\n\n            // Filter out right buttons and back buttons\n            this.leftbtn = this.leftbtn ||\n                headerAnchors.eq( 0 )\n                    .not( \".ui-btn-right,.ui-toolbar-back-btn\" )\n                    .addClass( \"ui-btn-left\" )\n                    .length;\n\n            this.rightbtn = this.rightbtn || headerAnchors.eq( 1 ).addClass( \"ui-btn-right\" ).length;\n        },\n        _updateBackButton: function() {\n            var backButton,\n                options = this.options,\n                theme = options.backBtnTheme || options.theme;\n\n            // Retrieve the back button or create a new, empty one\n            backButton = this._backButton = ( this._backButton || {} );\n\n            // We add a back button only if the option to do so is on\n            if ( this.options.addBackBtn &&\n\n                    // This must also be a header toolbar\n                    this.role === \"header\" &&\n\n                    // There must be multiple pages in the DOM\n                    $( \".ui-page\" ).length > 1 &&\n                    ( this.page ?\n\n                        // If the toolbar is internal the page's URL must differ from the hash\n                        ( this.page[ 0 ].getAttribute( \"data-\" + $.mobile.ns + \"url\" ) !==\n                            $.mobile.path.stripHash( location.hash ) ) :\n\n                        // Otherwise, if the toolbar is external there must be at least one\n                        // history item to which one can go back\n                        ( $.mobile.navigate && $.mobile.navigate.history &&\n                            $.mobile.navigate.history.activeIndex > 0 ) ) &&\n\n                    // The toolbar does not have a left button\n                    !this.leftbtn ) {\n\n                // Skip back button creation if one is already present\n                if ( !backButton.attached ) {\n                    this.backButton = backButton.element = ( backButton.element ||\n                        $( \"<a role='button' href='javascript:void(0);' \" +\n                            \"class='ui-btn ui-corner-all ui-shadow ui-btn-left \" +\n                                ( theme ? \"ui-btn-\" + theme + \" \" : \"\" ) +\n                                \"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' \" +\n                            \"data-\" + $.mobile.ns + \"rel='back'>\" + options.backBtnText +\n                            \"</a>\" ) )\n                            .prependTo( this.element );\n                    backButton.attached = true;\n                }\n\n            // If we are not adding a back button, then remove the one present, if any\n            } else if ( backButton.element ) {\n                backButton.element.detach();\n                backButton.attached = false;\n            }\n        },\n        _addHeadingClasses: function() {\n            this.element.children( \"h1, h2, h3, h4, h5, h6\" )\n                .addClass( \"ui-title\" )\n                // Regardless of h element number in src, it becomes h1 for the enhanced page\n                .attr({\n                    \"role\": \"heading\",\n                    \"aria-level\": \"1\"\n                });\n        },\n        _destroy: function() {\n            var currentTheme;\n\n            this.element.children( \"h1, h2, h3, h4, h5, h6\" )\n                .removeClass( \"ui-title\" )\n                .removeAttr( \"role\" )\n                .removeAttr( \"aria-level\" );\n\n            if ( this.role === \"header\" ) {\n                this.element.children( \"a, button\" )\n                    .removeClass( \"ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all\" );\n                if ( this.backButton) {\n                    this.backButton.remove();\n                }\n            }\n\n            currentTheme = this.options.theme ? this.options.theme : \"inherit\";\n            this.element.removeClass( \"ui-bar-\" + currentTheme );\n\n            this.element.removeClass( \"ui-\" + this.role ).removeAttr( \"role\" );\n        }\n    });\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.toolbar\", $.mobile.toolbar, {\n        options: {\n            position:null,\n            visibleOnPageShow: true,\n            disablePageZoom: true,\n            transition: \"slide\", //can be none, fade, slide (slide maps to slideup or slidedown)\n            fullscreen: false,\n            tapToggle: true,\n            tapToggleBlacklist: \"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open\",\n            hideDuringFocus: \"input, textarea, select\",\n            updatePagePadding: true,\n            trackPersistentToolbars: true,\n\n            // Browser detection! Weeee, here we go...\n            // Unfortunately, position:fixed is costly, not to mention probably impossible, to feature-detect accurately.\n            // Some tests exist, but they currently return false results in critical devices and browsers, which could lead to a broken experience.\n            // Testing fixed positioning is also pretty obtrusive to page load, requiring injected elements and scrolling the window\n            // The following function serves to rule out some popular browsers with known fixed-positioning issues\n            // This is a plugin option like any other, so feel free to improve or overwrite it\n            supportBlacklist: function() {\n                return !$.support.fixedPosition;\n            }\n        },\n\n        _create: function() {\n            this._super();\n            this.pagecontainer = $( \":mobile-pagecontainer\" );\n            if ( this.options.position === \"fixed\" && !this.options.supportBlacklist() ) {\n                this._makeFixed();\n            }\n        },\n\n        _makeFixed: function() {\n            this.element.addClass( \"ui-\"+ this.role +\"-fixed\" );\n            this.updatePagePadding();\n            this._addTransitionClass();\n            this._bindPageEvents();\n            this._bindToggleHandlers();\n        },\n\n        _setOptions: function( o ) {\n            if ( o.position === \"fixed\" && this.options.position !== \"fixed\" ) {\n                this._makeFixed();\n            }\n            if ( this.options.position === \"fixed\" && !this.options.supportBlacklist() ) {\n                var $page = ( !!this.page )? this.page: ( $(\".ui-page-active\").length > 0 )? $(\".ui-page-active\"): $(\".ui-page\").eq(0);\n\n                if ( o.fullscreen !== undefined) {\n                    if ( o.fullscreen ) {\n                        this.element.addClass( \"ui-\"+ this.role +\"-fullscreen\" );\n                        $page.addClass( \"ui-page-\" + this.role + \"-fullscreen\" );\n                    }\n                    // If not fullscreen, add class to page to set top or bottom padding\n                    else {\n                        this.element.removeClass( \"ui-\"+ this.role +\"-fullscreen\" );\n                        $page.removeClass( \"ui-page-\" + this.role + \"-fullscreen\" ).addClass( \"ui-page-\" + this.role+ \"-fixed\" );\n                    }\n                }\n            }\n            this._super(o);\n        },\n\n        _addTransitionClass: function() {\n            var tclass = this.options.transition;\n\n            if ( tclass && tclass !== \"none\" ) {\n                // use appropriate slide for header or footer\n                if ( tclass === \"slide\" ) {\n                    tclass = this.element.hasClass( \"ui-header\" ) ? \"slidedown\" : \"slideup\";\n                }\n\n                this.element.addClass( tclass );\n            }\n        },\n\n        _bindPageEvents: function() {\n            var page = ( !!this.page )? this.element.closest( \".ui-page\" ): this.document;\n            //page event bindings\n            // Fixed toolbars require page zoom to be disabled, otherwise usability issues crop up\n            // This method is meant to disable zoom while a fixed-positioned toolbar page is visible\n            this._on( page , {\n                \"pagebeforeshow\": \"_handlePageBeforeShow\",\n                \"webkitAnimationStart\":\"_handleAnimationStart\",\n                \"animationstart\":\"_handleAnimationStart\",\n                \"updatelayout\": \"_handleAnimationStart\",\n                \"pageshow\": \"_handlePageShow\",\n                \"pagebeforehide\": \"_handlePageBeforeHide\"\n            });\n        },\n\n        _handlePageBeforeShow: function( ) {\n            var o = this.options;\n            if ( o.disablePageZoom ) {\n                $.mobile.zoom.disable( true );\n            }\n            if ( !o.visibleOnPageShow ) {\n                this.hide( true );\n            }\n        },\n\n        _handleAnimationStart: function() {\n            if ( this.options.updatePagePadding ) {\n                this.updatePagePadding( ( !!this.page )? this.page: \".ui-page-active\" );\n            }\n        },\n\n        _handlePageShow: function() {\n            this.updatePagePadding( ( !!this.page )? this.page: \".ui-page-active\" );\n            if ( this.options.updatePagePadding ) {\n                this._on( this.window, { \"throttledresize\": \"updatePagePadding\" } );\n            }\n        },\n\n        _handlePageBeforeHide: function( e, ui ) {\n            var o = this.options,\n                thisFooter, thisHeader, nextFooter, nextHeader;\n\n            if ( o.disablePageZoom ) {\n                $.mobile.zoom.enable( true );\n            }\n            if ( o.updatePagePadding ) {\n                this._off( this.window, \"throttledresize\" );\n            }\n\n            if ( o.trackPersistentToolbars ) {\n                thisFooter = $( \".ui-footer-fixed:jqmData(id)\", this.page );\n                thisHeader = $( \".ui-header-fixed:jqmData(id)\", this.page );\n                nextFooter = thisFooter.length && ui.nextPage && $( \".ui-footer-fixed:jqmData(id='\" + thisFooter.jqmData( \"id\" ) + \"')\", ui.nextPage ) || $();\n                nextHeader = thisHeader.length && ui.nextPage && $( \".ui-header-fixed:jqmData(id='\" + thisHeader.jqmData( \"id\" ) + \"')\", ui.nextPage ) || $();\n\n                if ( nextFooter.length || nextHeader.length ) {\n\n                    nextFooter.add( nextHeader ).appendTo( $.mobile.pageContainer );\n\n                    ui.nextPage.one( \"pageshow\", function() {\n                        nextHeader.prependTo( this );\n                        nextFooter.appendTo( this );\n                    });\n                }\n            }\n        },\n\n        _visible: true,\n\n        // This will set the content element's top or bottom padding equal to the toolbar's height\n        updatePagePadding: function( tbPage ) {\n            var $el = this.element,\n                header = ( this.role ===\"header\" ),\n                pos = parseFloat( $el.css( header ? \"top\" : \"bottom\" ) );\n\n            // This behavior only applies to \"fixed\", not \"fullscreen\"\n            if ( this.options.fullscreen ) { return; }\n            // tbPage argument can be a Page object or an event, if coming from throttled resize.\n            tbPage = ( tbPage && tbPage.type === undefined && tbPage ) || this.page || $el.closest( \".ui-page\" );\n            tbPage = ( !!this.page )? this.page: \".ui-page-active\";\n            $( tbPage ).css( \"padding-\" + ( header ? \"top\" : \"bottom\" ), $el.outerHeight() + pos );\n        },\n\n        _useTransition: function( notransition ) {\n            var $win = this.window,\n                $el = this.element,\n                scroll = $win.scrollTop(),\n                elHeight = $el.height(),\n                pHeight = ( !!this.page )? $el.closest( \".ui-page\" ).height():$(\".ui-page-active\").height(),\n                viewportHeight = $.mobile.getScreenHeight();\n\n            return !notransition &&\n                ( this.options.transition && this.options.transition !== \"none\" &&\n                (\n                    ( this.role === \"header\" && !this.options.fullscreen && scroll > elHeight ) ||\n                    ( this.role === \"footer\" && !this.options.fullscreen && scroll + viewportHeight < pHeight - elHeight )\n                ) || this.options.fullscreen\n                );\n        },\n\n        show: function( notransition ) {\n            var hideClass = \"ui-fixed-hidden\",\n                $el = this.element;\n\n            if ( this._useTransition( notransition ) ) {\n                $el\n                    .removeClass( \"out \" + hideClass )\n                    .addClass( \"in\" )\n                    .animationComplete(function () {\n                        $el.removeClass( \"in\" );\n                    });\n            }\n            else {\n                $el.removeClass( hideClass );\n            }\n            this._visible = true;\n        },\n\n        hide: function( notransition ) {\n            var hideClass = \"ui-fixed-hidden\",\n                $el = this.element,\n                // if it's a slide transition, our new transitions need the reverse class as well to slide outward\n                outclass = \"out\" + ( this.options.transition === \"slide\" ? \" reverse\" : \"\" );\n\n            if ( this._useTransition( notransition ) ) {\n                $el\n                    .addClass( outclass )\n                    .removeClass( \"in\" )\n                    .animationComplete(function() {\n                        $el.addClass( hideClass ).removeClass( outclass );\n                    });\n            }\n            else {\n                $el.addClass( hideClass ).removeClass( outclass );\n            }\n            this._visible = false;\n        },\n\n        toggle: function() {\n            this[ this._visible ? \"hide\" : \"show\" ]();\n        },\n\n        _bindToggleHandlers: function() {\n            var self = this,\n                o = self.options,\n                delayShow, delayHide,\n                isVisible = true,\n                page = ( !!this.page )? this.page: $(\".ui-page\");\n\n            // tap toggle\n            page\n                .bind( \"vclick\", function( e ) {\n                    if ( o.tapToggle && !$( e.target ).closest( o.tapToggleBlacklist ).length ) {\n                        self.toggle();\n                    }\n                })\n                .bind( \"focusin focusout\", function( e ) {\n                    //this hides the toolbars on a keyboard pop to give more screen room and prevent ios bug which\n                    //positions fixed toolbars in the middle of the screen on pop if the input is near the top or\n                    //bottom of the screen addresses issues #4410 Footer navbar moves up when clicking on a textbox in an Android environment\n                    //and issue #4113 Header and footer change their position after keyboard popup - iOS\n                    //and issue #4410 Footer navbar moves up when clicking on a textbox in an Android environment\n                    if ( screen.width < 1025 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( \".ui-header-fixed, .ui-footer-fixed\" ).length ) {\n                        //Fix for issue #4724 Moving through form in Mobile Safari with \"Next\" and \"Previous\" system\n                        //controls causes fixed position, tap-toggle false Header to reveal itself\n                        // isVisible instead of self._visible because the focusin and focusout events fire twice at the same time\n                        // Also use a delay for hiding the toolbars because on Android native browser focusin is direclty followed\n                        // by a focusout when a native selects opens and the other way around when it closes.\n                        if ( e.type === \"focusout\" && !isVisible ) {\n                            isVisible = true;\n                            //wait for the stack to unwind and see if we have jumped to another input\n                            clearTimeout( delayHide );\n                            delayShow = setTimeout( function() {\n                                self.show();\n                            }, 0 );\n                        } else if ( e.type === \"focusin\" && !!isVisible ) {\n                            //if we have jumped to another input clear the time out to cancel the show.\n                            clearTimeout( delayShow );\n                            isVisible = false;\n                            delayHide = setTimeout( function() {\n                                self.hide();\n                            }, 0 );\n                        }\n                    }\n                });\n        },\n\n        _setRelative: function() {\n            if( this.options.position !== \"fixed\" ){\n                $( \"[data-\"+ $.mobile.ns + \"role='page']\" ).css({ \"position\": \"relative\" });\n            }\n        },\n\n        _destroy: function() {\n            var pageClasses, toolbarClasses, hasFixed, header, hasFullscreen,\n                page = this.pagecontainer.pagecontainer( \"getActivePage\" );\n\n            this._super();\n            if ( this.options.position === \"fixed\" ) {\n                hasFixed = $(  \"body>.ui-\" + this.role + \"-fixed\" )\n                            .add( page.find( \".ui-\" + this.options.role + \"-fixed\" ) )\n                            .not( this.element ).length > 0;\n                hasFullscreen = $(  \"body>.ui-\" + this.role + \"-fixed\" )\n                            .add( page.find( \".ui-\" + this.options.role + \"-fullscreen\" ) )\n                            .not( this.element ).length > 0;\n                toolbarClasses =  \"ui-header-fixed ui-footer-fixed ui-header-fullscreen in out\" +\n                    \" ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden\";\n                this.element.removeClass( toolbarClasses );\n                if ( !hasFullscreen ) {\n                    pageClasses = \"ui-page-\" + this.role + \"-fullscreen\";\n                }\n                if ( !hasFixed ) {\n                    header = this.role === \"header\";\n                    pageClasses += \" ui-page-\" + this.role + \"-fixed\";\n                    page.css( \"padding-\" + ( header ? \"top\" : \"bottom\" ), \"\" );\n                }\n                page.removeClass( pageClasses );\n            }\n        }\n\n    });\n})( jQuery );\n\n(function( $, undefined ) {\n    $.widget( \"mobile.toolbar\", $.mobile.toolbar, {\n\n        _makeFixed: function() {\n            this._super();\n            this._workarounds();\n        },\n\n        //check the browser and version and run needed workarounds\n        _workarounds: function() {\n            var ua = navigator.userAgent,\n            platform = navigator.platform,\n            // Rendering engine is Webkit, and capture major version\n            wkmatch = ua.match( /AppleWebKit\\/([0-9]+)/ ),\n            wkversion = !!wkmatch && wkmatch[ 1 ],\n            os = null,\n            self = this;\n            //set the os we are working in if it dosent match one with workarounds return\n            if ( platform.indexOf( \"iPhone\" ) > -1 || platform.indexOf( \"iPad\" ) > -1  || platform.indexOf( \"iPod\" ) > -1 ) {\n                os = \"ios\";\n            } else if ( ua.indexOf( \"Android\" ) > -1 ) {\n                os = \"android\";\n            } else {\n                return;\n            }\n            //check os version if it dosent match one with workarounds return\n            if ( os === \"ios\" ) {\n                //iOS  workarounds\n                self._bindScrollWorkaround();\n            } else if ( os === \"android\" && wkversion && wkversion < 534 ) {\n                //Android 2.3 run all Android 2.3 workaround\n                self._bindScrollWorkaround();\n                self._bindListThumbWorkaround();\n            } else {\n                return;\n            }\n        },\n\n        //Utility class for checking header and footer positions relative to viewport\n        _viewportOffset: function() {\n            var $el = this.element,\n                header = $el.hasClass( \"ui-header\" ),\n                offset = Math.abs( $el.offset().top - this.window.scrollTop() );\n            if ( !header ) {\n                offset = Math.round( offset - this.window.height() + $el.outerHeight() ) - 60;\n            }\n            return offset;\n        },\n\n        //bind events for _triggerRedraw() function\n        _bindScrollWorkaround: function() {\n            var self = this;\n            //bind to scrollstop and check if the toolbars are correctly positioned\n            this._on( this.window, { scrollstop: function() {\n                var viewportOffset = self._viewportOffset();\n                //check if the header is visible and if its in the right place\n                if ( viewportOffset > 2 && self._visible ) {\n                    self._triggerRedraw();\n                }\n            }});\n        },\n\n        //this addresses issue #4250 Persistent footer instability in v1.1 with long select lists in Android 2.3.3\n        //and issue #3748 Android 2.x: Page transitions broken when fixed toolbars used\n        //the absolutely positioned thumbnail in a list view causes problems with fixed position buttons above in a nav bar\n        //setting the li's to -webkit-transform:translate3d(0,0,0); solves this problem to avoide potential issues in other\n        //platforms we scope this with the class ui-android-2x-fix\n        _bindListThumbWorkaround: function() {\n            this.element.closest( \".ui-page\" ).addClass( \"ui-android-2x-fixed\" );\n        },\n        //this addresses issues #4337 Fixed header problem after scrolling content on iOS and Android\n        //and device bugs project issue #1 Form elements can lose click hit area in position: fixed containers.\n        //this also addresses not on fixed toolbars page in docs\n        //adding 1px of padding to the bottom then removing it causes a \"redraw\"\n        //which positions the toolbars correctly (they will always be visually correct)\n        _triggerRedraw: function() {\n            var paddingBottom = parseFloat( $( \".ui-page-active\" ).css( \"padding-bottom\" ) );\n            //trigger page redraw to fix incorrectly positioned fixed elements\n            $( \".ui-page-active\" ).css( \"padding-bottom\", ( paddingBottom + 1 ) + \"px\" );\n            //if the padding is reset with out a timeout the reposition will not occure.\n            //this is independant of JQM the browser seems to need the time to react.\n            setTimeout( function() {\n                $( \".ui-page-active\" ).css( \"padding-bottom\", paddingBottom + \"px\" );\n            }, 0 );\n        },\n\n        destroy: function() {\n            this._super();\n            //Remove the class we added to the page previously in android 2.x\n            this.element.closest( \".ui-page-active\" ).removeClass( \"ui-android-2x-fix\" );\n        }\n    });\n\n})( jQuery );\n\n\n( function( $, undefined ) {\n\nvar ieHack = ( $.mobile.browser.oldIE && $.mobile.browser.oldIE <= 8 ),\n    uiTemplate = $(\n        \"<div class='ui-popup-arrow-guide'></div>\" +\n        \"<div class='ui-popup-arrow-container\" + ( ieHack ? \" ie\" : \"\" ) + \"'>\" +\n            \"<div class='ui-popup-arrow'></div>\" +\n        \"</div>\"\n    );\n\nfunction getArrow() {\n    var clone = uiTemplate.clone(),\n        gd = clone.eq( 0 ),\n        ct = clone.eq( 1 ),\n        ar = ct.children();\n\n    return { arEls: ct.add( gd ), gd: gd, ct: ct, ar: ar };\n}\n\n$.widget( \"mobile.popup\", $.mobile.popup, {\n    options: {\n\n        arrow: \"\"\n    },\n\n    _create: function() {\n        var ar,\n            ret = this._super();\n\n        if ( this.options.arrow ) {\n            this._ui.arrow = ar = this._addArrow();\n        }\n\n        return ret;\n    },\n\n    _addArrow: function() {\n        var theme,\n            opts = this.options,\n            ar = getArrow();\n\n        theme = this._themeClassFromOption( \"ui-body-\", opts.theme );\n        ar.ar.addClass( theme + ( opts.shadow ? \" ui-overlay-shadow\" : \"\" ) );\n        ar.arEls.hide().appendTo( this.element );\n\n        return ar;\n    },\n\n    _unenhance: function() {\n        var ar = this._ui.arrow;\n\n        if ( ar ) {\n            ar.arEls.remove();\n        }\n\n        return this._super();\n    },\n\n    // Pretend to show an arrow described by @p and @dir and calculate the\n    // distance from the desired point. If a best-distance is passed in, return\n    // the minimum of the one passed in and the one calculated.\n    _tryAnArrow: function( p, dir, desired, s, best ) {\n        var result, r, diff, desiredForArrow = {}, tip = {};\n\n        // If the arrow has no wiggle room along the edge of the popup, it cannot\n        // be displayed along the requested edge without it sticking out.\n        if ( s.arFull[ p.dimKey ] > s.guideDims[ p.dimKey ] ) {\n            return best;\n        }\n\n        desiredForArrow[ p.fst ] = desired[ p.fst ] +\n            ( s.arHalf[ p.oDimKey ] + s.menuHalf[ p.oDimKey ] ) * p.offsetFactor -\n            s.contentBox[ p.fst ] + ( s.clampInfo.menuSize[ p.oDimKey ] - s.contentBox[ p.oDimKey ] ) * p.arrowOffsetFactor;\n        desiredForArrow[ p.snd ] = desired[ p.snd ];\n\n        result = s.result || this._calculateFinalLocation( desiredForArrow, s.clampInfo );\n        r = { x: result.left, y: result.top };\n\n        tip[ p.fst ] = r[ p.fst ] + s.contentBox[ p.fst ] + p.tipOffset;\n        tip[ p.snd ] = Math.max( result[ p.prop ] + s.guideOffset[ p.prop ] + s.arHalf[ p.dimKey ],\n            Math.min( result[ p.prop ] + s.guideOffset[ p.prop ] + s.guideDims[ p.dimKey ] - s.arHalf[ p.dimKey ],\n                desired[ p.snd ] ) );\n\n        diff = Math.abs( desired.x - tip.x ) + Math.abs( desired.y - tip.y );\n        if ( !best || diff < best.diff ) {\n            // Convert tip offset to coordinates inside the popup\n            tip[ p.snd ] -= s.arHalf[ p.dimKey ] + result[ p.prop ] + s.contentBox[ p.snd ];\n            best = { dir: dir, diff: diff, result: result, posProp: p.prop, posVal: tip[ p.snd ] };\n        }\n\n        return best;\n    },\n\n    _getPlacementState: function( clamp ) {\n        var offset, gdOffset,\n            ar = this._ui.arrow,\n            state = {\n                clampInfo: this._clampPopupWidth( !clamp ),\n                arFull: { cx: ar.ct.width(), cy: ar.ct.height() },\n                guideDims: { cx: ar.gd.width(), cy: ar.gd.height() },\n                guideOffset: ar.gd.offset()\n            };\n\n        offset = this.element.offset();\n\n        ar.gd.css( { left: 0, top: 0, right: 0, bottom: 0 } );\n        gdOffset = ar.gd.offset();\n        state.contentBox = {\n            x: gdOffset.left - offset.left,\n            y: gdOffset.top - offset.top,\n            cx: ar.gd.width(),\n            cy: ar.gd.height()\n        };\n        ar.gd.removeAttr( \"style\" );\n\n        // The arrow box moves between guideOffset and guideOffset + guideDims - arFull\n        state.guideOffset = { left: state.guideOffset.left - offset.left, top: state.guideOffset.top - offset.top };\n        state.arHalf = { cx: state.arFull.cx / 2, cy: state.arFull.cy / 2 };\n        state.menuHalf = { cx: state.clampInfo.menuSize.cx / 2, cy: state.clampInfo.menuSize.cy / 2 };\n\n        return state;\n    },\n\n    _placementCoords: function( desired ) {\n        var state, best, params, elOffset, bgRef,\n            optionValue = this.options.arrow,\n            ar = this._ui.arrow;\n\n        if ( !ar ) {\n            return this._super( desired );\n        }\n\n        ar.arEls.show();\n\n        bgRef = {};\n        state = this._getPlacementState( true );\n        params = {\n            \"l\": { fst: \"x\", snd: \"y\", prop: \"top\", dimKey: \"cy\", oDimKey: \"cx\", offsetFactor: 1, tipOffset:  -state.arHalf.cx, arrowOffsetFactor: 0 },\n            \"r\": { fst: \"x\", snd: \"y\", prop: \"top\", dimKey: \"cy\", oDimKey: \"cx\", offsetFactor: -1, tipOffset: state.arHalf.cx + state.contentBox.cx, arrowOffsetFactor: 1 },\n            \"b\": { fst: \"y\", snd: \"x\", prop: \"left\", dimKey: \"cx\", oDimKey: \"cy\", offsetFactor: -1, tipOffset: state.arHalf.cy + state.contentBox.cy, arrowOffsetFactor: 1 },\n            \"t\": { fst: \"y\", snd: \"x\", prop: \"left\", dimKey: \"cx\", oDimKey: \"cy\", offsetFactor: 1, tipOffset: -state.arHalf.cy, arrowOffsetFactor: 0 }\n        };\n\n        // Try each side specified in the options to see on which one the arrow\n        // should be placed such that the distance between the tip of the arrow and\n        // the desired coordinates is the shortest.\n        $.each( ( optionValue === true ? \"l,t,r,b\" : optionValue ).split( \",\" ),\n            $.proxy( function( key, value ) {\n                best = this._tryAnArrow( params[ value ], value, desired, state, best );\n            }, this ) );\n\n        // Could not place the arrow along any of the edges - behave as if showing\n        // the arrow was turned off.\n        if ( !best ) {\n            ar.arEls.hide();\n            return this._super( desired );\n        }\n\n        // Move the arrow into place\n        ar.ct\n            .removeClass( \"ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b\" )\n            .addClass( \"ui-popup-arrow-\" + best.dir )\n            .removeAttr( \"style\" ).css( best.posProp, best.posVal )\n            .show();\n\n        // Do not move/size the background div on IE, because we use the arrow div for background as well.\n        if ( !ieHack ) {\n            elOffset = this.element.offset();\n            bgRef[ params[ best.dir ].fst ] = ar.ct.offset();\n            bgRef[ params[ best.dir ].snd ] = {\n                left: elOffset.left + state.contentBox.x,\n                top: elOffset.top + state.contentBox.y\n            };\n        }\n\n        return best.result;\n    },\n\n    _setOptions: function( opts ) {\n        var newTheme,\n            oldTheme = this.options.theme,\n            ar = this._ui.arrow,\n            ret = this._super( opts );\n\n        if ( opts.arrow !== undefined ) {\n            if ( !ar && opts.arrow ) {\n                this._ui.arrow = this._addArrow();\n\n                // Important to return here so we don't set the same options all over\n                // again below.\n                return;\n            } else if ( ar && !opts.arrow ) {\n                ar.arEls.remove();\n                this._ui.arrow = null;\n            }\n        }\n\n        // Reassign with potentially new arrow\n        ar = this._ui.arrow;\n\n        if ( ar ) {\n            if ( opts.theme !== undefined ) {\n                oldTheme = this._themeClassFromOption( \"ui-body-\", oldTheme );\n                newTheme = this._themeClassFromOption( \"ui-body-\", opts.theme );\n                ar.ar.removeClass( oldTheme ).addClass( newTheme );\n            }\n\n            if ( opts.shadow !== undefined ) {\n                ar.ar.toggleClass( \"ui-overlay-shadow\", opts.shadow );\n            }\n        }\n\n        return ret;\n    },\n\n    _destroy: function() {\n        var ar = this._ui.arrow;\n\n        if ( ar ) {\n            ar.arEls.remove();\n        }\n\n        return this._super();\n    }\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.panel\", {\n    options: {\n        classes: {\n            panel: \"ui-panel\",\n            panelOpen: \"ui-panel-open\",\n            panelClosed: \"ui-panel-closed\",\n            panelFixed: \"ui-panel-fixed\",\n            panelInner: \"ui-panel-inner\",\n            modal: \"ui-panel-dismiss\",\n            modalOpen: \"ui-panel-dismiss-open\",\n            pageContainer: \"ui-panel-page-container\",\n            pageWrapper: \"ui-panel-wrapper\",\n            pageFixedToolbar: \"ui-panel-fixed-toolbar\",\n            pageContentPrefix: \"ui-panel-page-content\", /* Used for wrapper and fixed toolbars position, display and open classes. */\n            animate: \"ui-panel-animate\"\n        },\n        animate: true,\n        theme: null,\n        position: \"left\",\n        dismissible: true,\n        display: \"reveal\", //accepts reveal, push, overlay\n        swipeClose: true,\n        positionFixed: false\n    },\n\n    _closeLink: null,\n    _parentPage: null,\n    _page: null,\n    _modal: null,\n    _panelInner: null,\n    _wrapper: null,\n    _fixedToolbars: null,\n\n    _create: function() {\n        var el = this.element,\n            parentPage = el.closest( \".ui-page, :jqmData(role='page')\" );\n\n        // expose some private props to other methods\n        $.extend( this, {\n            _closeLink: el.find( \":jqmData(rel='close')\" ),\n            _parentPage: ( parentPage.length > 0 ) ? parentPage : false,\n            _openedPage: null,\n            _page: this._getPage,\n            _panelInner: this._getPanelInner(),\n            _fixedToolbars: this._getFixedToolbars\n        });\n        if ( this.options.display !== \"overlay\" ){\n            this._getWrapper();\n        }\n        this._addPanelClasses();\n\n        // if animating, add the class to do so\n        if ( $.support.cssTransform3d && !!this.options.animate ) {\n            this.element.addClass( this.options.classes.animate );\n        }\n\n        this._bindUpdateLayout();\n        this._bindCloseEvents();\n        this._bindLinkListeners();\n        this._bindPageEvents();\n\n        if ( !!this.options.dismissible ) {\n            this._createModal();\n        }\n\n        this._bindSwipeEvents();\n    },\n\n    _getPanelInner: function() {\n        var panelInner = this.element.find( \".\" + this.options.classes.panelInner );\n\n        if ( panelInner.length === 0 ) {\n            panelInner = this.element.children().wrapAll( \"<div class='\" + this.options.classes.panelInner + \"' />\" ).parent();\n        }\n\n        return panelInner;\n    },\n\n    _createModal: function() {\n        var self = this,\n            target = self._parentPage ? self._parentPage.parent() : self.element.parent();\n\n        self._modal = $( \"<div class='\" + self.options.classes.modal + \"'></div>\" )\n            .on( \"mousedown\", function() {\n                self.close();\n            })\n            .appendTo( target );\n    },\n\n    _getPage: function() {\n        var page = this._openedPage || this._parentPage || $( \".\" + $.mobile.activePageClass );\n\n        return page;\n    },\n\n    _getWrapper: function() {\n        var wrapper = this._page().find( \".\" + this.options.classes.pageWrapper );\n        if ( wrapper.length === 0 ) {\n            wrapper = this._page().children( \".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)\" )\n                .wrapAll( \"<div class='\" + this.options.classes.pageWrapper + \"'></div>\" )\n                .parent();\n        }\n\n        this._wrapper = wrapper;\n    },\n\n    _getFixedToolbars: function() {\n        var extFixedToolbars = $( \"body\" ).children( \".ui-header-fixed, .ui-footer-fixed\" ),\n            intFixedToolbars = this._page().find( \".ui-header-fixed, .ui-footer-fixed\" ),\n            fixedToolbars = extFixedToolbars.add( intFixedToolbars ).addClass( this.options.classes.pageFixedToolbar );\n\n        return fixedToolbars;\n    },\n\n    _getPosDisplayClasses: function( prefix ) {\n        return prefix + \"-position-\" + this.options.position + \" \" + prefix + \"-display-\" + this.options.display;\n    },\n\n    _getPanelClasses: function() {\n        var panelClasses = this.options.classes.panel +\n            \" \" + this._getPosDisplayClasses( this.options.classes.panel ) +\n            \" \" + this.options.classes.panelClosed +\n            \" \" + \"ui-body-\" + ( this.options.theme ? this.options.theme : \"inherit\" );\n\n        if ( !!this.options.positionFixed ) {\n            panelClasses += \" \" + this.options.classes.panelFixed;\n        }\n\n        return panelClasses;\n    },\n\n    _addPanelClasses: function() {\n        this.element.addClass( this._getPanelClasses() );\n    },\n\n    _handleCloseClick: function( event ) {\n        if ( !event.isDefaultPrevented() ) {\n            this.close();\n        }\n    },\n\n    _bindCloseEvents: function() {\n        this._on( this._closeLink, {\n            \"click\": \"_handleCloseClick\"\n        });\n\n        this._on({\n            \"click a:jqmData(ajax='false')\": \"_handleCloseClick\"\n        });\n    },\n\n    _positionPanel: function( scrollToTop ) {\n        var self = this,\n            panelInnerHeight = self._panelInner.outerHeight(),\n            expand = panelInnerHeight > $.mobile.getScreenHeight();\n\n        if ( expand || !self.options.positionFixed ) {\n            if ( expand ) {\n                self._unfixPanel();\n                $.mobile.resetActivePageHeight( panelInnerHeight );\n            }\n            if ( scrollToTop ) {\n                this.window[ 0 ].scrollTo( 0, $.mobile.defaultHomeScroll );\n            }\n        } else {\n            self._fixPanel();\n        }\n    },\n\n    _bindFixListener: function() {\n        this._on( $( window ), { \"throttledresize\": \"_positionPanel\" });\n    },\n\n    _unbindFixListener: function() {\n        this._off( $( window ), \"throttledresize\" );\n    },\n\n    _unfixPanel: function() {\n        if ( !!this.options.positionFixed && $.support.fixedPosition ) {\n            this.element.removeClass( this.options.classes.panelFixed );\n        }\n    },\n\n    _fixPanel: function() {\n        if ( !!this.options.positionFixed && $.support.fixedPosition ) {\n            this.element.addClass( this.options.classes.panelFixed );\n        }\n    },\n\n    _bindUpdateLayout: function() {\n        var self = this;\n\n        self.element.on( \"updatelayout\", function(/* e */) {\n            if ( self._open ) {\n                self._positionPanel();\n            }\n        });\n    },\n\n    _bindLinkListeners: function() {\n        this._on( \"body\", {\n            \"click a\": \"_handleClick\"\n        });\n\n    },\n\n    _handleClick: function( e ) {\n        var link,\n            panelId = this.element.attr( \"id\" );\n\n        if ( e.currentTarget.href.split( \"#\" )[ 1 ] === panelId && panelId !== undefined ) {\n\n            e.preventDefault();\n            link = $( e.target );\n            if ( link.hasClass( \"ui-btn\" ) ) {\n                link.addClass( $.mobile.activeBtnClass );\n                this.element.one( \"panelopen panelclose\", function() {\n                    link.removeClass( $.mobile.activeBtnClass );\n                });\n            }\n            this.toggle();\n        }\n    },\n\n    _bindSwipeEvents: function() {\n        var self = this,\n            area = self._modal ? self.element.add( self._modal ) : self.element;\n\n        // on swipe, close the panel\n        if ( !!self.options.swipeClose ) {\n            if ( self.options.position === \"left\" ) {\n                area.on( \"swipeleft.panel\", function(/* e */) {\n                    self.close();\n                });\n            } else {\n                area.on( \"swiperight.panel\", function(/* e */) {\n                    self.close();\n                });\n            }\n        }\n    },\n\n    _bindPageEvents: function() {\n        var self = this;\n\n        this.document\n            // Close the panel if another panel on the page opens\n            .on( \"panelbeforeopen\", function( e ) {\n                if ( self._open && e.target !== self.element[ 0 ] ) {\n                    self.close();\n                }\n            })\n            // On escape, close? might need to have a target check too...\n            .on( \"keyup.panel\", function( e ) {\n                if ( e.keyCode === 27 && self._open ) {\n                    self.close();\n                }\n            });\n        if ( !this._parentPage && this.options.display !== \"overlay\" ) {\n            this._on( this.document, {\n                \"pageshow\": function() {\n                    this._openedPage = null;\n                    this._getWrapper();\n                }\n            });\n        }\n        // Clean up open panels after page hide\n        if ( self._parentPage ) {\n            this.document.on( \"pagehide\", \":jqmData(role='page')\", function() {\n                if ( self._open ) {\n                    self.close( true );\n                }\n            });\n        } else {\n            this.document.on( \"pagebeforehide\", function() {\n                if ( self._open ) {\n                    self.close( true );\n                }\n            });\n        }\n    },\n\n    // state storage of open or closed\n    _open: false,\n    _pageContentOpenClasses: null,\n    _modalOpenClasses: null,\n\n    open: function( immediate ) {\n        if ( !this._open ) {\n            var self = this,\n                o = self.options,\n\n                _openPanel = function() {\n                    self._off( self.document , \"panelclose\" );\n                    self._page().jqmData( \"panel\", \"open\" );\n\n                    if ( $.support.cssTransform3d && !!o.animate && o.display !== \"overlay\" ) {\n                        self._wrapper.addClass( o.classes.animate );\n                        self._fixedToolbars().addClass( o.classes.animate );\n                    }\n\n                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {\n                        ( self._wrapper || self.element )\n                            .animationComplete( complete, \"transition\" );\n                    } else {\n                        setTimeout( complete, 0 );\n                    }\n\n                    if ( o.theme && o.display !== \"overlay\" ) {\n                        self._page().parent()\n                            .addClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                    }\n\n                    self.element\n                        .removeClass( o.classes.panelClosed )\n                        .addClass( o.classes.panelOpen );\n\n                    self._positionPanel( true );\n\n                    self._pageContentOpenClasses = self._getPosDisplayClasses( o.classes.pageContentPrefix );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._page().parent().addClass( o.classes.pageContainer );\n                        self._wrapper.addClass( self._pageContentOpenClasses );\n                        self._fixedToolbars().addClass( self._pageContentOpenClasses );\n                    }\n\n                    self._modalOpenClasses = self._getPosDisplayClasses( o.classes.modal ) + \" \" + o.classes.modalOpen;\n                    if ( self._modal ) {\n                        self._modal\n                            .addClass( self._modalOpenClasses )\n                            .height( Math.max( self._modal.height(), self.document.height() ) );\n                    }\n                },\n                complete = function() {\n\n                    // Bail if the panel was closed before the opening animation has completed\n                    if ( !self._open ) {\n                        return;\n                    }\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._wrapper.addClass( o.classes.pageContentPrefix + \"-open\" );\n                        self._fixedToolbars().addClass( o.classes.pageContentPrefix + \"-open\" );\n                    }\n\n                    self._bindFixListener();\n\n                    self._trigger( \"open\" );\n\n                    self._openedPage = self._page();\n                };\n\n            self._trigger( \"beforeopen\" );\n\n            if ( self._page().jqmData( \"panel\" ) === \"open\" ) {\n                self._on( self.document, {\n                    \"panelclose\": _openPanel\n                });\n            } else {\n                _openPanel();\n            }\n\n            self._open = true;\n        }\n    },\n\n    close: function( immediate ) {\n        if ( this._open ) {\n            var self = this,\n                o = this.options,\n\n                _closePanel = function() {\n\n                    self.element.removeClass( o.classes.panelOpen );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._wrapper.removeClass( self._pageContentOpenClasses );\n                        self._fixedToolbars().removeClass( self._pageContentOpenClasses );\n                    }\n\n                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {\n                        ( self._wrapper || self.element )\n                            .animationComplete( complete, \"transition\" );\n                    } else {\n                        setTimeout( complete, 0 );\n                    }\n\n                    if ( self._modal ) {\n                        self._modal\n                            .removeClass( self._modalOpenClasses )\n                            .height( \"\" );\n                    }\n                },\n                complete = function() {\n                    if ( o.theme && o.display !== \"overlay\" ) {\n                        self._page().parent().removeClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                    }\n\n                    self.element.addClass( o.classes.panelClosed );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._page().parent().removeClass( o.classes.pageContainer );\n                        self._wrapper.removeClass( o.classes.pageContentPrefix + \"-open\" );\n                        self._fixedToolbars().removeClass( o.classes.pageContentPrefix + \"-open\" );\n                    }\n\n                    if ( $.support.cssTransform3d && !!o.animate && o.display !== \"overlay\" ) {\n                        self._wrapper.removeClass( o.classes.animate );\n                        self._fixedToolbars().removeClass( o.classes.animate );\n                    }\n\n                    self._fixPanel();\n                    self._unbindFixListener();\n                    $.mobile.resetActivePageHeight();\n\n                    self._page().jqmRemoveData( \"panel\" );\n\n                    self._trigger( \"close\" );\n\n                    self._openedPage = null;\n                };\n\n            self._trigger( \"beforeclose\" );\n\n            _closePanel();\n\n            self._open = false;\n        }\n    },\n\n    toggle: function() {\n        this[ this._open ? \"close\" : \"open\" ]();\n    },\n\n    _destroy: function() {\n        var otherPanels,\n        o = this.options,\n        multiplePanels = ( $( \"body > :mobile-panel\" ).length + $.mobile.activePage.find( \":mobile-panel\" ).length ) > 1;\n\n        if ( o.display !== \"overlay\" ) {\n\n            //  remove the wrapper if not in use by another panel\n            otherPanels = $( \"body > :mobile-panel\" ).add( $.mobile.activePage.find( \":mobile-panel\" ) );\n            if ( otherPanels.not( \".ui-panel-display-overlay\" ).not( this.element ).length === 0 ) {\n                this._wrapper.children().unwrap();\n            }\n\n            if ( this._open ) {\n\n                this._fixedToolbars().removeClass( o.classes.pageContentPrefix + \"-open\" );\n\n                if ( $.support.cssTransform3d && !!o.animate ) {\n                    this._fixedToolbars().removeClass( o.classes.animate );\n                }\n\n                this._page().parent().removeClass( o.classes.pageContainer );\n\n                if ( o.theme ) {\n                    this._page().parent().removeClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                }\n            }\n        }\n\n        if ( !multiplePanels ) {\n\n            this.document.off( \"panelopen panelclose\" );\n\n        }\n\n        if ( this._open ) {\n            this._page().jqmRemoveData( \"panel\" );\n        }\n\n        this._panelInner.children().unwrap();\n\n        this.element\n            .removeClass( [ this._getPanelClasses(), o.classes.panelOpen, o.classes.animate ].join( \" \" ) )\n            .off( \"swipeleft.panel swiperight.panel\" )\n            .off( \"panelbeforeopen\" )\n            .off( \"panelhide\" )\n            .off( \"keyup.panel\" )\n            .off( \"updatelayout\" );\n\n        if ( this._modal ) {\n            this._modal.remove();\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", {\n    options: {\n        classes: {\n            table: \"ui-table\"\n        },\n        enhanced: false\n    },\n\n    _create: function() {\n        if ( !this.options.enhanced ) {\n            this.element.addClass( this.options.classes.table );\n        }\n\n        // extend here, assign on refresh > _setHeaders\n        $.extend( this, {\n\n            // Expose headers and allHeaders properties on the widget\n            // headers references the THs within the first TR in the table\n            headers: undefined,\n\n            // allHeaders references headers, plus all THs in the thead, which may\n            // include several rows, or not\n            allHeaders: undefined\n        });\n\n        this._refresh( true );\n    },\n\n    _setHeaders: function() {\n        var trs = this.element.find( \"thead tr\" );\n\n        this.headers = this.element.find( \"tr:eq(0)\" ).children();\n        this.allHeaders = this.headers.add( trs.children() );\n    },\n\n    refresh: function() {\n        this._refresh();\n    },\n\n    rebuild: $.noop,\n\n    _refresh: function( /* create */ ) {\n        var table = this.element,\n            trs = table.find( \"thead tr\" );\n\n        // updating headers on refresh (fixes #5880)\n        this._setHeaders();\n\n        // Iterate over the trs\n        trs.each( function() {\n            var columnCount = 0;\n\n            // Iterate over the children of the tr\n            $( this ).children().each( function() {\n                var span = parseInt( this.getAttribute( \"colspan\" ), 10 ),\n                    selector = \":nth-child(\" + ( columnCount + 1 ) + \")\",\n                    j;\n\n                this.setAttribute( \"data-\" + $.mobile.ns + \"colstart\", columnCount + 1 );\n\n                if ( span ) {\n                    for( j = 0; j < span - 1; j++ ) {\n                        columnCount++;\n                        selector += \", :nth-child(\" + ( columnCount + 1 ) + \")\";\n                    }\n                }\n\n                // Store \"cells\" data on header as a reference to all cells in the\n                // same column as this TH\n                $( this ).jqmData( \"cells\", table.find( \"tr\" ).not( trs.eq( 0 ) ).not( this ).children( selector ) );\n\n                columnCount++;\n            });\n        });\n    }\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", $.mobile.table, {\n    options: {\n        mode: \"columntoggle\",\n        columnBtnTheme: null,\n        columnPopupTheme: null,\n        columnBtnText: \"Columns...\",\n        classes: $.extend( $.mobile.table.prototype.options.classes, {\n            popup: \"ui-table-columntoggle-popup\",\n            columnBtn: \"ui-table-columntoggle-btn\",\n            priorityPrefix: \"ui-table-priority-\",\n            columnToggleTable: \"ui-table-columntoggle\"\n        })\n    },\n\n    _create: function() {\n        this._super();\n\n        if ( this.options.mode !== \"columntoggle\" ) {\n            return;\n        }\n\n        $.extend( this, {\n            _menu: null\n        });\n\n        if ( this.options.enhanced ) {\n            this._menu = $( this.document[ 0 ].getElementById( this._id() + \"-popup\" ) ).children().first();\n            this._addToggles( this._menu, true );\n        } else {\n            this._menu = this._enhanceColToggle();\n            this.element.addClass( this.options.classes.columnToggleTable );\n        }\n\n        this._setupEvents();\n\n        this._setToggleState();\n    },\n\n    _id: function() {\n        return ( this.element.attr( \"id\" ) || ( this.widgetName + this.uuid ) );\n    },\n\n    _setupEvents: function() {\n        //NOTE: inputs are bound in bindToggles,\n        // so it can be called on refresh, too\n\n        // update column toggles on resize\n        this._on( this.window, {\n            throttledresize: \"_setToggleState\"\n        });\n        this._on( this._menu, {\n            \"change input\": \"_menuInputChange\"\n        });\n    },\n\n    _addToggles: function( menu, keep ) {\n        var inputs,\n            checkboxIndex = 0,\n            opts = this.options,\n            container = menu.controlgroup( \"container\" );\n\n        // allow update of menu on refresh (fixes #5880)\n        if ( keep ) {\n            inputs = menu.find( \"input\" );\n        } else {\n            container.empty();\n        }\n\n        // create the hide/show toggles\n        this.headers.not( \"td\" ).each( function() {\n            var input, cells,\n                header = $( this ),\n                priority = $.mobile.getAttribute( this, \"priority\" );\n\n            if ( priority ) {\n                cells = header.add( header.jqmData( \"cells\" ) );\n                cells.addClass( opts.classes.priorityPrefix + priority );\n\n                // Make sure the (new?) checkbox is associated with its header via .jqmData() and\n                // that, vice versa, the header is also associated with the checkbox\n                input = ( keep ? inputs.eq( checkboxIndex++ ) :\n                    $(\"<label><input type='checkbox' checked />\" +\n                        ( header.children( \"abbr\" ).first().attr( \"title\" ) ||\n                            header.text() ) +\n                        \"</label>\" )\n                        .appendTo( container )\n                        .children( 0 )\n                        .checkboxradio( {\n                            theme: opts.columnPopupTheme\n                        }) )\n\n                        // Associate the header with the checkbox\n                        .jqmData( \"header\", header )\n                        .jqmData( \"cells\", cells );\n\n                // Associate the checkbox with the header\n                header.jqmData( \"input\", input );\n            }\n        });\n\n        // set bindings here\n        if ( !keep ) {\n            menu.controlgroup( \"refresh\" );\n        }\n    },\n\n    _menuInputChange: function( evt ) {\n        var input = $( evt.target ),\n            checked = input[ 0 ].checked;\n\n        input.jqmData( \"cells\" )\n            .toggleClass( \"ui-table-cell-hidden\", !checked )\n            .toggleClass( \"ui-table-cell-visible\", checked );\n    },\n\n    _unlockCells: function( cells ) {\n        // allow hide/show via CSS only = remove all toggle-locks\n        cells.removeClass( \"ui-table-cell-hidden ui-table-cell-visible\");\n    },\n\n    _enhanceColToggle: function() {\n        var id , menuButton, popup, menu,\n            table = this.element,\n            opts = this.options,\n            ns = $.mobile.ns,\n            fragment = this.document[ 0 ].createDocumentFragment();\n\n        id = this._id() + \"-popup\";\n        menuButton = $( \"<a href='#\" + id + \"' \" +\n            \"class='\" + opts.classes.columnBtn + \" ui-btn \" +\n            \"ui-btn-\" + ( opts.columnBtnTheme || \"a\" ) +\n            \" ui-corner-all ui-shadow ui-mini' \" +\n            \"data-\" + ns + \"rel='popup'>\" + opts.columnBtnText + \"</a>\" );\n        popup = $( \"<div class='\" + opts.classes.popup + \"' id='\" + id + \"'></div>\" );\n        menu = $( \"<fieldset></fieldset>\" ).controlgroup();\n\n        // set extension here, send \"false\" to trigger build/rebuild\n        this._addToggles( menu, false );\n\n        menu.appendTo( popup );\n\n        fragment.appendChild( popup[ 0 ] );\n        fragment.appendChild( menuButton[ 0 ] );\n        table.before( fragment );\n\n        popup.popup();\n\n        return menu;\n    },\n\n    rebuild: function() {\n        this._super();\n\n        if ( this.options.mode === \"columntoggle\" ) {\n            // NOTE: rebuild passes \"false\", while refresh passes \"undefined\"\n            // both refresh the table, but inside addToggles, !false will be true,\n            // so a rebuild call can be indentified\n            this._refresh( false );\n        }\n    },\n\n    _refresh: function( create ) {\n        var headers, hiddenColumns, index;\n\n        // Calling _super() here updates this.headers\n        this._super( create );\n\n        if ( !create && this.options.mode === \"columntoggle\" ) {\n            headers = this.headers;\n            hiddenColumns = [];\n\n            // Find the index of the column header associated with each old checkbox among the\n            // post-refresh headers and, if the header is still there, make sure the corresponding\n            // column will be hidden if the pre-refresh checkbox indicates that the column is\n            // hidden by recording its index in the array of hidden columns.\n            this._menu.find( \"input\" ).each( function() {\n                var input = $( this ),\n                    header = input.jqmData( \"header\" ),\n                    index = headers.index( header[ 0 ] );\n\n                if ( index > -1 && !input.prop( \"checked\" ) ) {\n\n                    // The column header associated with /this/ checkbox is still present in the\n                    // post-refresh table and the checkbox is not checked, so the column associated\n                    // with this column header is currently hidden. Let's record that.\n                    hiddenColumns.push( index );\n                }\n            });\n\n            // columns not being replaced must be cleared from input toggle-locks\n            this._unlockCells( this.element.find( \".ui-table-cell-hidden, \" +\n                \".ui-table-cell-visible\" ) );\n\n            // update columntoggles and cells\n            this._addToggles( this._menu, create );\n\n            // At this point all columns are visible, so uncheck the checkboxes that correspond to\n            // those columns we've found to be hidden\n            for ( index = hiddenColumns.length - 1 ; index > -1 ; index-- ) {\n                headers.eq( hiddenColumns[ index ] ).jqmData( \"input\" )\n                    .prop( \"checked\", false )\n                    .checkboxradio( \"refresh\" )\n                    .trigger( \"change\" );\n            }\n        }\n    },\n\n    _setToggleState: function() {\n        this._menu.find( \"input\" ).each( function() {\n            var checkbox = $( this );\n\n            this.checked = checkbox.jqmData( \"cells\" ).eq( 0 ).css( \"display\" ) === \"table-cell\";\n            checkbox.checkboxradio( \"refresh\" );\n        });\n    },\n\n    _destroy: function() {\n        this._super();\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", $.mobile.table, {\n    options: {\n        mode: \"reflow\",\n        classes: $.extend( $.mobile.table.prototype.options.classes, {\n            reflowTable: \"ui-table-reflow\",\n            cellLabels: \"ui-table-cell-label\"\n        })\n    },\n\n    _create: function() {\n        this._super();\n\n        // If it's not reflow mode, return here.\n        if ( this.options.mode !== \"reflow\" ) {\n            return;\n        }\n\n        if ( !this.options.enhanced ) {\n            this.element.addClass( this.options.classes.reflowTable );\n\n            this._updateReflow();\n        }\n    },\n\n    rebuild: function() {\n        this._super();\n\n        if ( this.options.mode === \"reflow\" ) {\n            this._refresh( false );\n        }\n    },\n\n    _refresh: function( create ) {\n        this._super( create );\n        if ( !create && this.options.mode === \"reflow\" ) {\n            this._updateReflow( );\n        }\n    },\n\n    _updateReflow: function() {\n        var table = this,\n            opts = this.options;\n\n        // get headers in reverse order so that top-level headers are appended last\n        $( table.allHeaders.get().reverse() ).each( function() {\n            var cells = $( this ).jqmData( \"cells\" ),\n                colstart = $.mobile.getAttribute( this, \"colstart\" ),\n                hierarchyClass = cells.not( this ).filter( \"thead th\" ).length && \" ui-table-cell-label-top\",\n                contents = $( this ).clone().contents(),\n                iteration, filter;\n\n                if ( contents.length > 0  ) {\n\n                    if ( hierarchyClass ) {\n                        iteration = parseInt( this.getAttribute( \"colspan\" ), 10 );\n                        filter = \"\";\n\n                        if ( iteration ) {\n                            filter = \"td:nth-child(\"+ iteration +\"n + \" + ( colstart ) +\")\";\n                        }\n\n                        table._addLabels( cells.filter( filter ),\n                            opts.classes.cellLabels + hierarchyClass, contents );\n                    } else {\n                        table._addLabels( cells, opts.classes.cellLabels, contents );\n                    }\n\n                }\n        });\n    },\n\n    _addLabels: function( cells, label, contents ) {\n        if ( contents.length === 1 && contents[ 0 ].nodeName.toLowerCase() === \"abbr\" ) {\n            contents = contents.eq( 0 ).attr( \"title\" );\n        }\n        // .not fixes #6006\n        cells\n            .not( \":has(b.\" + label + \")\" )\n                .prepend( $( \"<b class='\" + label + \"'></b>\" ).append( contents ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// TODO rename filterCallback/deprecate and default to the item itself as the first argument\nvar defaultFilterCallback = function( index, searchValue ) {\n    return ( ( \"\" + ( $.mobile.getAttribute( this, \"filtertext\" ) || $( this ).text() ) )\n        .toLowerCase().indexOf( searchValue ) === -1 );\n};\n\n$.widget( \"mobile.filterable\", {\n\n    initSelector: \":jqmData(filter='true')\",\n\n    options: {\n        filterReveal: false,\n        filterCallback: defaultFilterCallback,\n        enhanced: false,\n        input: null,\n        children: \"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio\"\n    },\n\n    _create: function() {\n        var opts = this.options;\n\n        $.extend( this, {\n            _search: null,\n            _timer: 0\n        });\n\n        this._setInput( opts.input );\n        if ( !opts.enhanced ) {\n            this._filterItems( ( ( this._search && this._search.val() ) || \"\" ).toLowerCase() );\n        }\n    },\n\n    _onKeyUp: function() {\n        var val, lastval,\n            search = this._search;\n\n        if ( search ) {\n            val = search.val().toLowerCase(),\n            lastval = $.mobile.getAttribute( search[ 0 ], \"lastval\" ) + \"\";\n\n            if ( lastval && lastval === val ) {\n                // Execute the handler only once per value change\n                return;\n            }\n\n            if ( this._timer ) {\n                window.clearTimeout( this._timer );\n                this._timer = 0;\n            }\n\n            this._timer = this._delay( function() {\n                if ( this._trigger( \"beforefilter\", null, { input: search } ) === false ) {\n                    return false;\n                }\n\n                // Change val as lastval for next execution\n                search[ 0 ].setAttribute( \"data-\" + $.mobile.ns + \"lastval\", val );\n\n                this._filterItems( val );\n                this._timer = 0;\n            }, 250 );\n        }\n    },\n\n    _getFilterableItems: function() {\n        var elem = this.element,\n            children = this.options.children,\n            items = !children ? { length: 0 }:\n                $.isFunction( children ) ? children():\n                children.nodeName ? $( children ):\n                children.jquery ? children:\n                this.element.find( children );\n\n        if ( items.length === 0 ) {\n            items = elem.children();\n        }\n\n        return items;\n    },\n\n    _filterItems: function( val ) {\n        var idx, callback, length, dst,\n            show = [],\n            hide = [],\n            opts = this.options,\n            filterItems = this._getFilterableItems();\n\n        if ( val != null ) {\n            callback = opts.filterCallback || defaultFilterCallback;\n            length = filterItems.length;\n\n            // Partition the items into those to be hidden and those to be shown\n            for ( idx = 0 ; idx < length ; idx++ ) {\n                dst = ( callback.call( filterItems[ idx ], idx, val ) ) ? hide : show;\n                dst.push( filterItems[ idx ] );\n            }\n        }\n\n        // If nothing is hidden, then the decision whether to hide or show the items\n        // is based on the \"filterReveal\" option.\n        if ( hide.length === 0 ) {\n            filterItems[ ( opts.filterReveal && val.length === 0 ) ?\n                \"addClass\" : \"removeClass\" ]( \"ui-screen-hidden\" );\n        } else {\n            $( hide ).addClass( \"ui-screen-hidden\" );\n            $( show ).removeClass( \"ui-screen-hidden\" );\n        }\n\n        this._refreshChildWidget();\n\n        this._trigger( \"filter\", null, {\n            items: filterItems\n        });\n    },\n\n    // The Default implementation of _refreshChildWidget attempts to call\n    // refresh on collapsibleset, controlgroup, selectmenu, or listview\n    _refreshChildWidget: function() {\n        var widget, idx,\n            recognizedWidgets = [ \"collapsibleset\", \"selectmenu\", \"controlgroup\", \"listview\" ];\n\n        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {\n            widget = recognizedWidgets[ idx ];\n            if ( $.mobile[ widget ] ) {\n                widget = this.element.data( \"mobile-\" + widget );\n                if ( widget && $.isFunction( widget.refresh ) ) {\n                    widget.refresh();\n                }\n            }\n        }\n    },\n\n    // TODO: When the input is not internal, do not even store it in this._search\n    _setInput: function ( selector ) {\n        var search = this._search;\n\n        // Stop a pending filter operation\n        if ( this._timer ) {\n            window.clearTimeout( this._timer );\n            this._timer = 0;\n        }\n\n        if ( search ) {\n            this._off( search, \"keyup change input\" );\n            search = null;\n        }\n\n        if ( selector ) {\n            search = selector.jquery ? selector:\n                selector.nodeName ? $( selector ):\n                this.document.find( selector );\n\n            this._on( search, {\n                keydown: \"_onKeyDown\",\n                keypress: \"_onKeyPress\",\n                keyup: \"_onKeyUp\",\n                change: \"_onKeyUp\",\n                input: \"_onKeyUp\"\n            });\n        }\n\n        this._search = search;\n    },\n\n    // Prevent form submission\n    _onKeyDown: function( event ) {\n        if ( event.keyCode === $.ui.keyCode.ENTER ) {\n            event.preventDefault();\n            this._preventKeyPress = true;\n        }\n    },\n\n    _onKeyPress: function( event ) {\n        if ( this._preventKeyPress ) {\n            event.preventDefault();\n            this._preventKeyPress = false;\n        }\n    },\n\n    _setOptions: function( options ) {\n        var refilter = !( ( options.filterReveal === undefined ) &&\n                ( options.filterCallback === undefined ) &&\n                ( options.children === undefined ) );\n\n        this._super( options );\n\n        if ( options.input !== undefined ) {\n            this._setInput( options.input );\n            refilter = true;\n        }\n\n        if ( refilter ) {\n            this.refresh();\n        }\n    },\n\n    _destroy: function() {\n        var opts = this.options,\n            items = this._getFilterableItems();\n\n        if ( opts.enhanced ) {\n            items.toggleClass( \"ui-screen-hidden\", opts.filterReveal );\n        } else {\n            items.removeClass( \"ui-screen-hidden\" );\n        }\n    },\n\n    refresh: function() {\n        if ( this._timer ) {\n            window.clearTimeout( this._timer );\n            this._timer = 0;\n        }\n        this._filterItems( ( ( this._search && this._search.val() ) || \"\" ).toLowerCase() );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// Create a function that will replace the _setOptions function of a widget,\n// and will pass the options on to the input of the filterable.\nvar replaceSetOptions = function( self, orig ) {\n        return function( options ) {\n            orig.call( this, options );\n            self._syncTextInputOptions( options );\n        };\n    },\n    rDividerListItem = /(^|\\s)ui-li-divider(\\s|$)/,\n    origDefaultFilterCallback = $.mobile.filterable.prototype.options.filterCallback;\n\n// Override the default filter callback with one that does not hide list dividers\n$.mobile.filterable.prototype.options.filterCallback = function( index, searchValue ) {\n    return !this.className.match( rDividerListItem ) &&\n        origDefaultFilterCallback.call( this, index, searchValue );\n};\n\n$.widget( \"mobile.filterable\", $.mobile.filterable, {\n    options: {\n        filterPlaceholder: \"Filter items...\",\n        filterTheme: null\n    },\n\n    _create: function() {\n        var idx, widgetName,\n            elem = this.element,\n            recognizedWidgets = [ \"collapsibleset\", \"selectmenu\", \"controlgroup\", \"listview\" ],\n            createHandlers = {};\n\n        this._super();\n\n        $.extend( this, {\n            _widget: null\n        });\n\n        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {\n            widgetName = recognizedWidgets[ idx ];\n            if ( $.mobile[ widgetName ] ) {\n                if ( this._setWidget( elem.data( \"mobile-\" + widgetName ) ) ) {\n                    break;\n                } else {\n                    createHandlers[ widgetName + \"create\" ] = \"_handleCreate\";\n                }\n            }\n        }\n\n        if ( !this._widget ) {\n            this._on( elem, createHandlers );\n        }\n    },\n\n    _handleCreate: function( evt ) {\n        this._setWidget( this.element.data( \"mobile-\" + evt.type.substring( 0, evt.type.length - 6 ) ) );\n    },\n\n    _trigger: function( type, event, data ) {\n        if ( this._widget && this._widget.widgetFullName === \"mobile-listview\" &&\n            type === \"beforefilter\" ) {\n\n            // Also trigger listviewbeforefilter if this widget is also a listview\n            this._widget._trigger( \"beforefilter\", event, data );\n        }\n\n        // Passing back the response enables calling preventDefault()\n        return this._super( type, event, data );\n    },\n\n    _setWidget: function( widget ) {\n        if ( !this._widget && widget ) {\n            this._widget = widget;\n            this._widget._setOptions = replaceSetOptions( this, this._widget._setOptions );\n        }\n\n        if ( !!this._widget ) {\n            this._syncTextInputOptions( this._widget.options );\n            if ( this._widget.widgetName === \"listview\" ) {\n                this._widget.options.hideDividers = true;\n                this._widget.element.listview( \"refresh\" );\n            }\n        }\n\n        return !!this._widget;\n    },\n\n    _isSearchInternal: function() {\n        return ( this._search && this._search.jqmData( \"ui-filterable-\" + this.uuid + \"-internal\" ) );\n    },\n\n    _setInput: function( selector ) {\n        var opts = this.options,\n            updatePlaceholder = true,\n            textinputOpts = {};\n\n        if ( !selector ) {\n            if ( this._isSearchInternal() ) {\n\n                // Ignore the call to set a new input if the selector goes to falsy and\n                // the current textinput is already of the internally generated variety.\n                return;\n            } else {\n\n                // Generating a new textinput widget. No need to set the placeholder\n                // further down the function.\n                updatePlaceholder = false;\n                selector = $( \"<input \" +\n                    \"data-\" + $.mobile.ns + \"type='search' \" +\n                    \"placeholder='\" + opts.filterPlaceholder + \"'></input>\" )\n                    .jqmData( \"ui-filterable-\" + this.uuid + \"-internal\", true );\n                $( \"<form class='ui-filterable'></form>\" )\n                    .append( selector )\n                    .submit( function( evt ) {\n                        evt.preventDefault();\n                        selector.blur();\n                    })\n                    .insertBefore( this.element );\n                if ( $.mobile.textinput ) {\n                    if ( this.options.filterTheme != null ) {\n                        textinputOpts[ \"theme\" ] = opts.filterTheme;\n                    }\n\n                    selector.textinput( textinputOpts );\n                }\n            }\n        }\n\n        this._super( selector );\n\n        if ( this._isSearchInternal() && updatePlaceholder ) {\n            this._search.attr( \"placeholder\", this.options.filterPlaceholder );\n        }\n    },\n\n    _setOptions: function( options ) {\n        var ret = this._super( options );\n\n        // Need to set the filterPlaceholder after having established the search input\n        if ( options.filterPlaceholder !== undefined ) {\n            if ( this._isSearchInternal() ) {\n                this._search.attr( \"placeholder\", options.filterPlaceholder );\n            }\n        }\n\n        if ( options.filterTheme !== undefined && this._search && $.mobile.textinput ) {\n            this._search.textinput( \"option\", \"theme\", options.filterTheme );\n        }\n\n        return ret;\n    },\n\n    // The listview implementation accompanying this filterable backcompat layer will call\n    // filterable.refresh() after it's done refreshing the listview to make sure the filterable\n    // filters out any new items added. However, when the listview refresh has been initiated by\n    // the filterable itself, then such filtering has already taken place, and calling the\n    // filterable's refresh() method will cause an infinite recursion. We stop this by setting a\n    // flag that will cause the filterable's refresh() method to short-circuit.\n    _refreshChildWidget: function() {\n        this._refreshingChildWidget = true;\n        this._superApply( arguments );\n        this._refreshingChildWidget = false;\n    },\n\n    refresh: function() {\n        if ( !this._refreshingChildWidget ) {\n            this._superApply( arguments );\n        }\n    },\n\n    _destroy: function() {\n        if ( this._isSearchInternal() ) {\n            this._search.remove();\n        }\n        this._super();\n    },\n\n    _syncTextInputOptions: function( options ) {\n        var idx,\n            textinputOptions = {};\n\n        // We only sync options if the filterable's textinput is of the internally\n        // generated variety, rather than one specified by the user.\n        if ( this._isSearchInternal() && $.mobile.textinput ) {\n\n            // Apply only the options understood by textinput\n            for ( idx in $.mobile.textinput.prototype.options ) {\n                if ( options[ idx ] !== undefined ) {\n                    if ( idx === \"theme\" && this.options.filterTheme != null ) {\n                        textinputOptions[ idx ] = this.options.filterTheme;\n                    } else {\n                        textinputOptions[ idx ] = options[ idx ];\n                    }\n                }\n            }\n            this._search.textinput( \"option\", textinputOptions );\n        }\n    }\n});\n\n// Instantiate a filterable on a listview that has the data-filter=\"true\" attribute\n// This is not necessary for static content, because the auto-enhance takes care of instantiating\n// the filterable upon encountering data-filter=\"true\". However, because of 1.3.x it is expected\n// that a listview with data-filter=\"true\" will be filterable even if you just instantiate a\n// listview on it. The extension below ensures that this continues to happen in 1.4.x.\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        filter: false\n    },\n    _create: function() {\n        if ( this.options.filter === true &&\n                !this.element.data( \"mobile-filterable\" ) ) {\n            this.element.filterable();\n        }\n        return this._super();\n    },\n\n    refresh: function() {\n        var filterable;\n\n        this._superApply( arguments );\n\n        if ( this.options.filter === true ) {\n            filterable = this.element.data( \"mobile-filterable\" );\n\n            if ( filterable ) {\n                filterable.refresh();\n            }\n        }\n    }\n});\n\n})( jQuery );\n\n/*!\n * jQuery UI Tabs fadf2b312a05040436451c64bbfaf4814bc62c56\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tabs/\n *\n * Depends:\n *    jquery.ui.core.js\n *    jquery.ui.widget.js\n */\n(function( $, undefined ) {\n\nvar tabId = 0,\n    rhash = /#.*$/;\n\nfunction getNextTabId() {\n    return ++tabId;\n}\n\nfunction isLocal( anchor ) {\n    return anchor.hash.length > 1 &&\n        decodeURIComponent( anchor.href.replace( rhash, \"\" ) ) ===\n            decodeURIComponent( location.href.replace( rhash, \"\" ) );\n}\n\n$.widget( \"ui.tabs\", {\n    version: \"fadf2b312a05040436451c64bbfaf4814bc62c56\",\n    delay: 300,\n    options: {\n        active: null,\n        collapsible: false,\n        event: \"click\",\n        heightStyle: \"content\",\n        hide: null,\n        show: null,\n\n        // callbacks\n        activate: null,\n        beforeActivate: null,\n        beforeLoad: null,\n        load: null\n    },\n\n    _create: function() {\n        var that = this,\n            options = this.options;\n\n        this.running = false;\n\n        this.element\n            .addClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all\" )\n            .toggleClass( \"ui-tabs-collapsible\", options.collapsible )\n            // Prevent users from focusing disabled tabs via click\n            .delegate( \".ui-tabs-nav > li\", \"mousedown\" + this.eventNamespace, function( event ) {\n                if ( $( this ).is( \".ui-state-disabled\" ) ) {\n                    event.preventDefault();\n                }\n            })\n            // support: IE <9\n            // Preventing the default action in mousedown doesn't prevent IE\n            // from focusing the element, so if the anchor gets focused, blur.\n            // We don't have to worry about focusing the previously focused\n            // element since clicking on a non-focusable element should focus\n            // the body anyway.\n            .delegate( \".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function() {\n                if ( $( this ).closest( \"li\" ).is( \".ui-state-disabled\" ) ) {\n                    this.blur();\n                }\n            });\n\n        this._processTabs();\n        options.active = this._initialActive();\n\n        // Take disabling tabs via class attribute from HTML\n        // into account and update option properly.\n        if ( $.isArray( options.disabled ) ) {\n            options.disabled = $.unique( options.disabled.concat(\n                $.map( this.tabs.filter( \".ui-state-disabled\" ), function( li ) {\n                    return that.tabs.index( li );\n                })\n            ) ).sort();\n        }\n\n        // check for length avoids error when initializing empty list\n        if ( this.options.active !== false && this.anchors.length ) {\n            this.active = this._findActive( options.active );\n        } else {\n            this.active = $();\n        }\n\n        this._refresh();\n\n        if ( this.active.length ) {\n            this.load( options.active );\n        }\n    },\n\n    _initialActive: function() {\n        var active = this.options.active,\n            collapsible = this.options.collapsible,\n            locationHash = location.hash.substring( 1 );\n\n        if ( active === null ) {\n            // check the fragment identifier in the URL\n            if ( locationHash ) {\n                this.tabs.each(function( i, tab ) {\n                    if ( $( tab ).attr( \"aria-controls\" ) === locationHash ) {\n                        active = i;\n                        return false;\n                    }\n                });\n            }\n\n            // check for a tab marked active via a class\n            if ( active === null ) {\n                active = this.tabs.index( this.tabs.filter( \".ui-tabs-active\" ) );\n            }\n\n            // no active tab, set to false\n            if ( active === null || active === -1 ) {\n                active = this.tabs.length ? 0 : false;\n            }\n        }\n\n        // handle numbers: negative, out of range\n        if ( active !== false ) {\n            active = this.tabs.index( this.tabs.eq( active ) );\n            if ( active === -1 ) {\n                active = collapsible ? false : 0;\n            }\n        }\n\n        // don't allow collapsible: false and active: false\n        if ( !collapsible && active === false && this.anchors.length ) {\n            active = 0;\n        }\n\n        return active;\n    },\n\n    _getCreateEventData: function() {\n        return {\n            tab: this.active,\n            panel: !this.active.length ? $() : this._getPanelForTab( this.active )\n        };\n    },\n\n    _tabKeydown: function( event ) {\n        var focusedTab = $( this.document[0].activeElement ).closest( \"li\" ),\n            selectedIndex = this.tabs.index( focusedTab ),\n            goingForward = true;\n\n        if ( this._handlePageNav( event ) ) {\n            return;\n        }\n\n        switch ( event.keyCode ) {\n            case $.ui.keyCode.RIGHT:\n            case $.ui.keyCode.DOWN:\n                selectedIndex++;\n                break;\n            case $.ui.keyCode.UP:\n            case $.ui.keyCode.LEFT:\n                goingForward = false;\n                selectedIndex--;\n                break;\n            case $.ui.keyCode.END:\n                selectedIndex = this.anchors.length - 1;\n                break;\n            case $.ui.keyCode.HOME:\n                selectedIndex = 0;\n                break;\n            case $.ui.keyCode.SPACE:\n                // Activate only, no collapsing\n                event.preventDefault();\n                clearTimeout( this.activating );\n                this._activate( selectedIndex );\n                return;\n            case $.ui.keyCode.ENTER:\n                // Toggle (cancel delayed activation, allow collapsing)\n                event.preventDefault();\n                clearTimeout( this.activating );\n                // Determine if we should collapse or activate\n                this._activate( selectedIndex === this.options.active ? false : selectedIndex );\n                return;\n            default:\n                return;\n        }\n\n        // Focus the appropriate tab, based on which key was pressed\n        event.preventDefault();\n        clearTimeout( this.activating );\n        selectedIndex = this._focusNextTab( selectedIndex, goingForward );\n\n        // Navigating with control key will prevent automatic activation\n        if ( !event.ctrlKey ) {\n            // Update aria-selected immediately so that AT think the tab is already selected.\n            // Otherwise AT may confuse the user by stating that they need to activate the tab,\n            // but the tab will already be activated by the time the announcement finishes.\n            focusedTab.attr( \"aria-selected\", \"false\" );\n            this.tabs.eq( selectedIndex ).attr( \"aria-selected\", \"true\" );\n\n            this.activating = this._delay(function() {\n                this.option( \"active\", selectedIndex );\n            }, this.delay );\n        }\n    },\n\n    _panelKeydown: function( event ) {\n        if ( this._handlePageNav( event ) ) {\n            return;\n        }\n\n        // Ctrl+up moves focus to the current tab\n        if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {\n            event.preventDefault();\n            this.active.focus();\n        }\n    },\n\n    // Alt+page up/down moves focus to the previous/next tab (and activates)\n    _handlePageNav: function( event ) {\n        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {\n            this._activate( this._focusNextTab( this.options.active - 1, false ) );\n            return true;\n        }\n        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {\n            this._activate( this._focusNextTab( this.options.active + 1, true ) );\n            return true;\n        }\n    },\n\n    _findNextTab: function( index, goingForward ) {\n        var lastTabIndex = this.tabs.length - 1;\n\n        function constrain() {\n            if ( index > lastTabIndex ) {\n                index = 0;\n            }\n            if ( index < 0 ) {\n                index = lastTabIndex;\n            }\n            return index;\n        }\n\n        while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {\n            index = goingForward ? index + 1 : index - 1;\n        }\n\n        return index;\n    },\n\n    _focusNextTab: function( index, goingForward ) {\n        index = this._findNextTab( index, goingForward );\n        this.tabs.eq( index ).focus();\n        return index;\n    },\n\n    _setOption: function( key, value ) {\n        if ( key === \"active\" ) {\n            // _activate() will handle invalid values and update this.options\n            this._activate( value );\n            return;\n        }\n\n        if ( key === \"disabled\" ) {\n            // don't use the widget factory's disabled handling\n            this._setupDisabled( value );\n            return;\n        }\n\n        this._super( key, value);\n\n        if ( key === \"collapsible\" ) {\n            this.element.toggleClass( \"ui-tabs-collapsible\", value );\n            // Setting collapsible: false while collapsed; open first panel\n            if ( !value && this.options.active === false ) {\n                this._activate( 0 );\n            }\n        }\n\n        if ( key === \"event\" ) {\n            this._setupEvents( value );\n        }\n\n        if ( key === \"heightStyle\" ) {\n            this._setupHeightStyle( value );\n        }\n    },\n\n    _tabId: function( tab ) {\n        return tab.attr( \"aria-controls\" ) || \"ui-tabs-\" + getNextTabId();\n    },\n\n    _sanitizeSelector: function( hash ) {\n        return hash ? hash.replace( /[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\" ) : \"\";\n    },\n\n    refresh: function() {\n        var options = this.options,\n            lis = this.tablist.children( \":has(a[href])\" );\n\n        // get disabled tabs from class attribute from HTML\n        // this will get converted to a boolean if needed in _refresh()\n        options.disabled = $.map( lis.filter( \".ui-state-disabled\" ), function( tab ) {\n            return lis.index( tab );\n        });\n\n        this._processTabs();\n\n        // was collapsed or no tabs\n        if ( options.active === false || !this.anchors.length ) {\n            options.active = false;\n            this.active = $();\n        // was active, but active tab is gone\n        } else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {\n            // all remaining tabs are disabled\n            if ( this.tabs.length === options.disabled.length ) {\n                options.active = false;\n                this.active = $();\n            // activate previous tab\n            } else {\n                this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );\n            }\n        // was active, active tab still exists\n        } else {\n            // make sure active index is correct\n            options.active = this.tabs.index( this.active );\n        }\n\n        this._refresh();\n    },\n\n    _refresh: function() {\n        this._setupDisabled( this.options.disabled );\n        this._setupEvents( this.options.event );\n        this._setupHeightStyle( this.options.heightStyle );\n\n        this.tabs.not( this.active ).attr({\n            \"aria-selected\": \"false\",\n            tabIndex: -1\n        });\n        this.panels.not( this._getPanelForTab( this.active ) )\n            .hide()\n            .attr({\n                \"aria-expanded\": \"false\",\n                \"aria-hidden\": \"true\"\n            });\n\n        // Make sure one tab is in the tab order\n        if ( !this.active.length ) {\n            this.tabs.eq( 0 ).attr( \"tabIndex\", 0 );\n        } else {\n            this.active\n                .addClass( \"ui-tabs-active ui-state-active\" )\n                .attr({\n                    \"aria-selected\": \"true\",\n                    tabIndex: 0\n                });\n            this._getPanelForTab( this.active )\n                .show()\n                .attr({\n                    \"aria-expanded\": \"true\",\n                    \"aria-hidden\": \"false\"\n                });\n        }\n    },\n\n    _processTabs: function() {\n        var that = this;\n\n        this.tablist = this._getList()\n            .addClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n            .attr( \"role\", \"tablist\" );\n\n        this.tabs = this.tablist.find( \"> li:has(a[href])\" )\n            .addClass( \"ui-state-default ui-corner-top\" )\n            .attr({\n                role: \"tab\",\n                tabIndex: -1\n            });\n\n        this.anchors = this.tabs.map(function() {\n                return $( \"a\", this )[ 0 ];\n            })\n            .addClass( \"ui-tabs-anchor\" )\n            .attr({\n                role: \"presentation\",\n                tabIndex: -1\n            });\n\n        this.panels = $();\n\n        this.anchors.each(function( i, anchor ) {\n            var selector, panel, panelId,\n                anchorId = $( anchor ).uniqueId().attr( \"id\" ),\n                tab = $( anchor ).closest( \"li\" ),\n                originalAriaControls = tab.attr( \"aria-controls\" );\n\n            // inline tab\n            if ( isLocal( anchor ) ) {\n                selector = anchor.hash;\n                panel = that.element.find( that._sanitizeSelector( selector ) );\n            // remote tab\n            } else {\n                panelId = that._tabId( tab );\n                selector = \"#\" + panelId;\n                panel = that.element.find( selector );\n                if ( !panel.length ) {\n                    panel = that._createPanel( panelId );\n                    panel.insertAfter( that.panels[ i - 1 ] || that.tablist );\n                }\n                panel.attr( \"aria-live\", \"polite\" );\n            }\n\n            if ( panel.length) {\n                that.panels = that.panels.add( panel );\n            }\n            if ( originalAriaControls ) {\n                tab.data( \"ui-tabs-aria-controls\", originalAriaControls );\n            }\n            tab.attr({\n                \"aria-controls\": selector.substring( 1 ),\n                \"aria-labelledby\": anchorId\n            });\n            panel.attr( \"aria-labelledby\", anchorId );\n        });\n\n        this.panels\n            .addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n            .attr( \"role\", \"tabpanel\" );\n    },\n\n    // allow overriding how to find the list for rare usage scenarios (#7715)\n    _getList: function() {\n        return this.element.find( \"ol,ul\" ).eq( 0 );\n    },\n\n    _createPanel: function( id ) {\n        return $( \"<div>\" )\n            .attr( \"id\", id )\n            .addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n            .data( \"ui-tabs-destroy\", true );\n    },\n\n    _setupDisabled: function( disabled ) {\n        if ( $.isArray( disabled ) ) {\n            if ( !disabled.length ) {\n                disabled = false;\n            } else if ( disabled.length === this.anchors.length ) {\n                disabled = true;\n            }\n        }\n\n        // disable tabs\n        for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {\n            if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {\n                $( li )\n                    .addClass( \"ui-state-disabled\" )\n                    .attr( \"aria-disabled\", \"true\" );\n            } else {\n                $( li )\n                    .removeClass( \"ui-state-disabled\" )\n                    .removeAttr( \"aria-disabled\" );\n            }\n        }\n\n        this.options.disabled = disabled;\n    },\n\n    _setupEvents: function( event ) {\n        var events = {\n            click: function( event ) {\n                event.preventDefault();\n            }\n        };\n        if ( event ) {\n            $.each( event.split(\" \"), function( index, eventName ) {\n                events[ eventName ] = \"_eventHandler\";\n            });\n        }\n\n        this._off( this.anchors.add( this.tabs ).add( this.panels ) );\n        this._on( this.anchors, events );\n        this._on( this.tabs, { keydown: \"_tabKeydown\" } );\n        this._on( this.panels, { keydown: \"_panelKeydown\" } );\n\n        this._focusable( this.tabs );\n        this._hoverable( this.tabs );\n    },\n\n    _setupHeightStyle: function( heightStyle ) {\n        var maxHeight,\n            parent = this.element.parent();\n\n        if ( heightStyle === \"fill\" ) {\n            maxHeight = parent.height();\n            maxHeight -= this.element.outerHeight() - this.element.height();\n\n            this.element.siblings( \":visible\" ).each(function() {\n                var elem = $( this ),\n                    position = elem.css( \"position\" );\n\n                if ( position === \"absolute\" || position === \"fixed\" ) {\n                    return;\n                }\n                maxHeight -= elem.outerHeight( true );\n            });\n\n            this.element.children().not( this.panels ).each(function() {\n                maxHeight -= $( this ).outerHeight( true );\n            });\n\n            this.panels.each(function() {\n                $( this ).height( Math.max( 0, maxHeight -\n                    $( this ).innerHeight() + $( this ).height() ) );\n            })\n            .css( \"overflow\", \"auto\" );\n        } else if ( heightStyle === \"auto\" ) {\n            maxHeight = 0;\n            this.panels.each(function() {\n                maxHeight = Math.max( maxHeight, $( this ).height( \"\" ).height() );\n            }).height( maxHeight );\n        }\n    },\n\n    _eventHandler: function( event ) {\n        var options = this.options,\n            active = this.active,\n            anchor = $( event.currentTarget ),\n            tab = anchor.closest( \"li\" ),\n            clickedIsActive = tab[ 0 ] === active[ 0 ],\n            collapsing = clickedIsActive && options.collapsible,\n            toShow = collapsing ? $() : this._getPanelForTab( tab ),\n            toHide = !active.length ? $() : this._getPanelForTab( active ),\n            eventData = {\n                oldTab: active,\n                oldPanel: toHide,\n                newTab: collapsing ? $() : tab,\n                newPanel: toShow\n            };\n\n        event.preventDefault();\n\n        if ( tab.hasClass( \"ui-state-disabled\" ) ||\n                // tab is already loading\n                tab.hasClass( \"ui-tabs-loading\" ) ||\n                // can't switch durning an animation\n                this.running ||\n                // click on active header, but not collapsible\n                ( clickedIsActive && !options.collapsible ) ||\n                // allow canceling activation\n                ( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n            return;\n        }\n\n        options.active = collapsing ? false : this.tabs.index( tab );\n\n        this.active = clickedIsActive ? $() : tab;\n        if ( this.xhr ) {\n            this.xhr.abort();\n        }\n\n        if ( !toHide.length && !toShow.length ) {\n            $.error( \"jQuery UI Tabs: Mismatching fragment identifier.\" );\n        }\n\n        if ( toShow.length ) {\n            this.load( this.tabs.index( tab ), event );\n        }\n        this._toggle( event, eventData );\n    },\n\n    // handles show/hide for selecting tabs\n    _toggle: function( event, eventData ) {\n        var that = this,\n            toShow = eventData.newPanel,\n            toHide = eventData.oldPanel;\n\n        this.running = true;\n\n        function complete() {\n            that.running = false;\n            that._trigger( \"activate\", event, eventData );\n        }\n\n        function show() {\n            eventData.newTab.closest( \"li\" ).addClass( \"ui-tabs-active ui-state-active\" );\n\n            if ( toShow.length && that.options.show ) {\n                that._show( toShow, that.options.show, complete );\n            } else {\n                toShow.show();\n                complete();\n            }\n        }\n\n        // start out by hiding, then showing, then completing\n        if ( toHide.length && this.options.hide ) {\n            this._hide( toHide, this.options.hide, function() {\n                eventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n                show();\n            });\n        } else {\n            eventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n            toHide.hide();\n            show();\n        }\n\n        toHide.attr({\n            \"aria-expanded\": \"false\",\n            \"aria-hidden\": \"true\"\n        });\n        eventData.oldTab.attr( \"aria-selected\", \"false\" );\n        // If we're switching tabs, remove the old tab from the tab order.\n        // If we're opening from collapsed state, remove the previous tab from the tab order.\n        // If we're collapsing, then keep the collapsing tab in the tab order.\n        if ( toShow.length && toHide.length ) {\n            eventData.oldTab.attr( \"tabIndex\", -1 );\n        } else if ( toShow.length ) {\n            this.tabs.filter(function() {\n                return $( this ).attr( \"tabIndex\" ) === 0;\n            })\n            .attr( \"tabIndex\", -1 );\n        }\n\n        toShow.attr({\n            \"aria-expanded\": \"true\",\n            \"aria-hidden\": \"false\"\n        });\n        eventData.newTab.attr({\n            \"aria-selected\": \"true\",\n            tabIndex: 0\n        });\n    },\n\n    _activate: function( index ) {\n        var anchor,\n            active = this._findActive( index );\n\n        // trying to activate the already active panel\n        if ( active[ 0 ] === this.active[ 0 ] ) {\n            return;\n        }\n\n        // trying to collapse, simulate a click on the current active header\n        if ( !active.length ) {\n            active = this.active;\n        }\n\n        anchor = active.find( \".ui-tabs-anchor\" )[ 0 ];\n        this._eventHandler({\n            target: anchor,\n            currentTarget: anchor,\n            preventDefault: $.noop\n        });\n    },\n\n    _findActive: function( index ) {\n        return index === false ? $() : this.tabs.eq( index );\n    },\n\n    _getIndex: function( index ) {\n        // meta-function to give users option to provide a href string instead of a numerical index.\n        if ( typeof index === \"string\" ) {\n            index = this.anchors.index( this.anchors.filter( \"[href$='\" + index + \"']\" ) );\n        }\n\n        return index;\n    },\n\n    _destroy: function() {\n        if ( this.xhr ) {\n            this.xhr.abort();\n        }\n\n        this.element.removeClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\" );\n\n        this.tablist\n            .removeClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n            .removeAttr( \"role\" );\n\n        this.anchors\n            .removeClass( \"ui-tabs-anchor\" )\n            .removeAttr( \"role\" )\n            .removeAttr( \"tabIndex\" )\n            .removeUniqueId();\n\n        this.tabs.add( this.panels ).each(function() {\n            if ( $.data( this, \"ui-tabs-destroy\" ) ) {\n                $( this ).remove();\n            } else {\n                $( this )\n                    .removeClass( \"ui-state-default ui-state-active ui-state-disabled \" +\n                        \"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\" )\n                    .removeAttr( \"tabIndex\" )\n                    .removeAttr( \"aria-live\" )\n                    .removeAttr( \"aria-busy\" )\n                    .removeAttr( \"aria-selected\" )\n                    .removeAttr( \"aria-labelledby\" )\n                    .removeAttr( \"aria-hidden\" )\n                    .removeAttr( \"aria-expanded\" )\n                    .removeAttr( \"role\" );\n            }\n        });\n\n        this.tabs.each(function() {\n            var li = $( this ),\n                prev = li.data( \"ui-tabs-aria-controls\" );\n            if ( prev ) {\n                li\n                    .attr( \"aria-controls\", prev )\n                    .removeData( \"ui-tabs-aria-controls\" );\n            } else {\n                li.removeAttr( \"aria-controls\" );\n            }\n        });\n\n        this.panels.show();\n\n        if ( this.options.heightStyle !== \"content\" ) {\n            this.panels.css( \"height\", \"\" );\n        }\n    },\n\n    enable: function( index ) {\n        var disabled = this.options.disabled;\n        if ( disabled === false ) {\n            return;\n        }\n\n        if ( index === undefined ) {\n            disabled = false;\n        } else {\n            index = this._getIndex( index );\n            if ( $.isArray( disabled ) ) {\n                disabled = $.map( disabled, function( num ) {\n                    return num !== index ? num : null;\n                });\n            } else {\n                disabled = $.map( this.tabs, function( li, num ) {\n                    return num !== index ? num : null;\n                });\n            }\n        }\n        this._setupDisabled( disabled );\n    },\n\n    disable: function( index ) {\n        var disabled = this.options.disabled;\n        if ( disabled === true ) {\n            return;\n        }\n\n        if ( index === undefined ) {\n            disabled = true;\n        } else {\n            index = this._getIndex( index );\n            if ( $.inArray( index, disabled ) !== -1 ) {\n                return;\n            }\n            if ( $.isArray( disabled ) ) {\n                disabled = $.merge( [ index ], disabled ).sort();\n            } else {\n                disabled = [ index ];\n            }\n        }\n        this._setupDisabled( disabled );\n    },\n\n    load: function( index, event ) {\n        index = this._getIndex( index );\n        var that = this,\n            tab = this.tabs.eq( index ),\n            anchor = tab.find( \".ui-tabs-anchor\" ),\n            panel = this._getPanelForTab( tab ),\n            eventData = {\n                tab: tab,\n                panel: panel\n            };\n\n        // not remote\n        if ( isLocal( anchor[ 0 ] ) ) {\n            return;\n        }\n\n        this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );\n\n        // support: jQuery <1.8\n        // jQuery <1.8 returns false if the request is canceled in beforeSend,\n        // but as of 1.8, $.ajax() always returns a jqXHR object.\n        if ( this.xhr && this.xhr.statusText !== \"canceled\" ) {\n            tab.addClass( \"ui-tabs-loading\" );\n            panel.attr( \"aria-busy\", \"true\" );\n\n            this.xhr\n                .success(function( response ) {\n                    // support: jQuery <1.8\n                    // http://bugs.jquery.com/ticket/11778\n                    setTimeout(function() {\n                        panel.html( response );\n                        that._trigger( \"load\", event, eventData );\n                    }, 1 );\n                })\n                .complete(function( jqXHR, status ) {\n                    // support: jQuery <1.8\n                    // http://bugs.jquery.com/ticket/11778\n                    setTimeout(function() {\n                        if ( status === \"abort\" ) {\n                            that.panels.stop( false, true );\n                        }\n\n                        tab.removeClass( \"ui-tabs-loading\" );\n                        panel.removeAttr( \"aria-busy\" );\n\n                        if ( jqXHR === that.xhr ) {\n                            delete that.xhr;\n                        }\n                    }, 1 );\n                });\n        }\n    },\n\n    _ajaxSettings: function( anchor, event, eventData ) {\n        var that = this;\n        return {\n            url: anchor.attr( \"href\" ),\n            beforeSend: function( jqXHR, settings ) {\n                return that._trigger( \"beforeLoad\", event,\n                    $.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );\n            }\n        };\n    },\n\n    _getPanelForTab: function( tab ) {\n        var id = $( tab ).attr( \"aria-controls\" );\n        return this.element.find( this._sanitizeSelector( \"#\" + id ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n})( jQuery );\n\n(function( $, window ) {\n\n    $.mobile.iosorientationfixEnabled = true;\n\n    // This fix addresses an iOS bug, so return early if the UA claims it's something else.\n    var ua = navigator.userAgent,\n        zoom,\n        evt, x, y, z, aig;\n    if ( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test( ua ) && ua.indexOf( \"AppleWebKit\" ) > -1 ) ) {\n        $.mobile.iosorientationfixEnabled = false;\n        return;\n    }\n\n    zoom = $.mobile.zoom;\n\n    function checkTilt( e ) {\n        evt = e.originalEvent;\n        aig = evt.accelerationIncludingGravity;\n\n        x = Math.abs( aig.x );\n        y = Math.abs( aig.y );\n        z = Math.abs( aig.z );\n\n        // If portrait orientation and in one of the danger zones\n        if ( !window.orientation && ( x > 7 || ( ( z > 6 && y < 8 || z < 8 && y > 6 ) && x > 5 ) ) ) {\n                if ( zoom.enabled ) {\n                    zoom.disable();\n                }\n        }    else if ( !zoom.enabled ) {\n                zoom.enable();\n        }\n    }\n\n    $.mobile.document.on( \"mobileinit\", function() {\n        if ( $.mobile.iosorientationfixEnabled ) {\n            $.mobile.window\n                .bind( \"orientationchange.iosorientationfix\", zoom.enable )\n                .bind( \"devicemotion.iosorientationfix\", checkTilt );\n        }\n    });\n\n}( jQuery, this ));\n\n(function( $, window, undefined ) {\n    var    $html = $( \"html\" ),\n        $window = $.mobile.window;\n\n    //remove initial build class (only present on first pageshow)\n    function hideRenderingClass() {\n        $html.removeClass( \"ui-mobile-rendering\" );\n    }\n\n    // trigger mobileinit event - useful hook for configuring $.mobile settings before they're used\n    $( window.document ).trigger( \"mobileinit\" );\n\n    // support conditions\n    // if device support condition(s) aren't met, leave things as they are -> a basic, usable experience,\n    // otherwise, proceed with the enhancements\n    if ( !$.mobile.gradeA() ) {\n        return;\n    }\n\n    // override ajaxEnabled on platforms that have known conflicts with hash history updates\n    // or generally work better browsing in regular http for full page refreshes (BB5, Opera Mini)\n    if ( $.mobile.ajaxBlacklist ) {\n        $.mobile.ajaxEnabled = false;\n    }\n\n    // Add mobile, initial load \"rendering\" classes to docEl\n    $html.addClass( \"ui-mobile ui-mobile-rendering\" );\n\n    // This is a fallback. If anything goes wrong (JS errors, etc), or events don't fire,\n    // this ensures the rendering class is removed after 5 seconds, so content is visible and accessible\n    setTimeout( hideRenderingClass, 5000 );\n\n    $.extend( $.mobile, {\n        // find and enhance the pages in the dom and transition to the first page.\n        initializePage: function() {\n            // find present pages\n            var path = $.mobile.path,\n                $pages = $( \":jqmData(role='page'), :jqmData(role='dialog')\" ),\n                hash = path.stripHash( path.stripQueryParams(path.parseLocation().hash) ),\n                theLocation = $.mobile.path.parseLocation(),\n                hashPage = hash ? document.getElementById( hash ) : undefined;\n\n            // if no pages are found, create one with body's inner html\n            if ( !$pages.length ) {\n                $pages = $( \"body\" ).wrapInner( \"<div data-\" + $.mobile.ns + \"role='page'></div>\" ).children( 0 );\n            }\n\n            // add dialogs, set data-url attrs\n            $pages.each(function() {\n                var $this = $( this );\n\n                // unless the data url is already set set it to the pathname\n                if ( !$this[ 0 ].getAttribute( \"data-\" + $.mobile.ns + \"url\" ) ) {\n                    $this.attr( \"data-\" + $.mobile.ns + \"url\", $this.attr( \"id\" ) ||\n                        path.convertUrlToDataUrl( theLocation.pathname + theLocation.search ) );\n                }\n            });\n\n            // define first page in dom case one backs out to the directory root (not always the first page visited, but defined as fallback)\n            $.mobile.firstPage = $pages.first();\n\n            // define page container\n            $.mobile.pageContainer = $.mobile.firstPage\n                .parent()\n                .addClass( \"ui-mobile-viewport\" )\n                .pagecontainer();\n\n            // initialize navigation events now, after mobileinit has occurred and the page container\n            // has been created but before the rest of the library is alerted to that fact\n            $.mobile.navreadyDeferred.resolve();\n\n            // alert listeners that the pagecontainer has been determined for binding\n            // to events triggered on it\n            $window.trigger( \"pagecontainercreate\" );\n\n            // cue page loading message\n            $.mobile.loading( \"show\" );\n\n            //remove initial build class (only present on first pageshow)\n            hideRenderingClass();\n\n            // if hashchange listening is disabled, there's no hash deeplink,\n            // the hash is not valid (contains more than one # or does not start with #)\n            // or there is no page with that hash, change to the first page in the DOM\n            // Remember, however, that the hash can also be a path!\n            if ( ! ( $.mobile.hashListeningEnabled &&\n                $.mobile.path.isHashValid( location.hash ) &&\n                ( $( hashPage ).is( \":jqmData(role='page')\" ) ||\n                    $.mobile.path.isPath( hash ) ||\n                    hash === $.mobile.dialogHashKey ) ) ) {\n\n                // make sure to set initial popstate state if it exists\n                // so that navigation back to the initial page works properly\n                if ( $.event.special.navigate.isPushStateEnabled() ) {\n                    $.mobile.navigate.navigator.squash( path.parseLocation().href );\n                }\n\n                $.mobile.changePage( $.mobile.firstPage, {\n                    transition: \"none\",\n                    reverse: true,\n                    changeHash: false,\n                    fromHashChange: true\n                });\n            } else {\n                // trigger hashchange or navigate to squash and record the correct\n                // history entry for an initial hash path\n                if ( !$.event.special.navigate.isPushStateEnabled() ) {\n                    $window.trigger( \"hashchange\", [true] );\n                } else {\n                    // TODO figure out how to simplify this interaction with the initial history entry\n                    // at the bottom js/navigate/navigate.js\n                    $.mobile.navigate.history.stack = [];\n                    $.mobile.navigate( $.mobile.path.isPath( location.hash ) ? location.hash : location.href );\n                }\n            }\n        }\n    });\n\n    $(function() {\n        //Run inlineSVG support test\n        $.support.inlineSVG();\n\n        // check which scrollTop value should be used by scrolling to 1 immediately at domready\n        // then check what the scroll top is. Android will report 0... others 1\n        // note that this initial scroll won't hide the address bar. It's just for the check.\n\n        // hide iOS browser chrome on load if hideUrlBar is true this is to try and do it as soon as possible\n        if ( $.mobile.hideUrlBar ) {\n            window.scrollTo( 0, 1 );\n        }\n\n        // if defaultHomeScroll hasn't been set yet, see if scrollTop is 1\n        // it should be 1 in most browsers, but android treats 1 as 0 (for hiding addr bar)\n        // so if it's 1, use 0 from now on\n        $.mobile.defaultHomeScroll = ( !$.support.scrollTop || $.mobile.window.scrollTop() === 1 ) ? 0 : 1;\n\n        //dom-ready inits\n        if ( $.mobile.autoInitializePage ) {\n            $.mobile.initializePage();\n        }\n\n        // window load event\n        // hide iOS browser chrome on load if hideUrlBar is true this is as fall back incase we were too early before\n        if ( $.mobile.hideUrlBar ) {\n            $window.load( $.mobile.silentScroll );\n        }\n\n        if ( !$.support.cssPointerEvents ) {\n            // IE and Opera don't support CSS pointer-events: none that we use to disable link-based buttons\n            // by adding the 'ui-disabled' class to them. Using a JavaScript workaround for those browser.\n            // https://github.com/jquery/jquery-mobile/issues/3558\n\n            // DEPRECATED as of 1.4.0 - remove ui-disabled after 1.4.0 release\n            // only ui-state-disabled should be present thereafter\n            $.mobile.document.delegate( \".ui-state-disabled,.ui-disabled\", \"vclick\",\n                function( e ) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            );\n        }\n    });\n}( jQuery, this ));\n\n\n}));\n\n}.call(window));\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return factory(root.CDP || (root.CDP = {})); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.Framework = CDP.Framework || {};\n/* tslint:disable:max-line-length */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * platform \n         * [] https://w3g.jp/blog/tools/js_browser_sniffing\n         */\n        Framework.Platform = (function () {\n            var ua = navigator.userAgent.toLowerCase();\n            var majorVersion = function (browser) {\n                var version = ua.match(new RegExp(\"(\" + browser + \")( |/)([0-9]+)\"));\n                if (!version || version.length < 4) {\n                    return 0;\n                }\n                return parseInt(version[3], 10);\n            };\n            return {\n                ltIE6: typeof window.addEventListener === \"undefined\" && typeof document.documentElement.style.maxHeight === \"undefined\",\n                ltIE7: typeof window.addEventListener === \"undefined\" && typeof document.querySelectorAll === \"undefined\",\n                ltIE8: typeof window.addEventListener === \"undefined\" && typeof document.getElementsByClassName === \"undefined\",\n                ltIE9: document.uniqueID && typeof window.matchMedia === \"undefined\",\n                gtIE10: document.uniqueID && window.matchMedia,\n                Trident: document.uniqueID,\n                Gecko: \"MozAppearance\" in document.documentElement.style,\n                Presto: CDP.global.opera,\n                Blink: CDP.global.chrome,\n                Webkit: typeof CDP.global.chrome === \"undefined\" && \"WebkitAppearance\" in document.documentElement.style,\n                Touch: typeof CDP.global.ontouchstart !== \"undefined\",\n                Mobile: typeof CDP.global.orientation !== \"undefined\",\n                ltAd4_4: typeof CDP.global.orientation !== \"undefined\" && (typeof CDP.global.EventSource === \"undefined\" || 30 > majorVersion(\"chrome\")),\n                Pointer: CDP.global.navigator.pointerEnabled,\n                MSPoniter: CDP.global.navigator.msPointerEnabled,\n                Android: (ua.indexOf(\"android\") !== -1),\n                iOS: (ua.indexOf(\"iphone\") !== -1 || ua.indexOf(\"ipad\") !== -1 || ua.indexOf(\"ipod\") !== -1),\n            };\n        })();\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n/* tslint:disable:typedef */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * vclick patch\n         */\n        var _vclickPatch = function () {\n            var jquery_on = $.fn.on, jquery_off = $.fn.off;\n            var custom_on = function (types, selector, data, fn, /*INTERNAL*/ one) {\n                if (typeof types === \"string\") {\n                    types = types.replace(/vclick/g, \"click\");\n                }\n                return _.bind(jquery_on, this)(types, selector, data, fn, one);\n            };\n            var custom_off = function (types, selector, fn) {\n                if (typeof types === \"string\") {\n                    types = types.replace(/vclick/g, \"click\");\n                }\n                return _.bind(jquery_off, this)(types, selector, fn);\n            };\n            // replace functions.\n            $.fn.on = custom_on;\n            $.fn.off = custom_off;\n        };\n        //___________________________________________________________________________________________________________________//\n        /**\n         * @class Patch\n         * @brief patch class for jqm framework.\n         *       [review] vclick \n         */\n        var Patch = (function () {\n            function Patch() {\n            }\n            ///////////////////////////////////////////////////////////////////////\n            // public static methods\n            /**\n             * \\~english\n             * Apply patch.\n             *\n             * \\~japanese\n             * \n             */\n            Patch.apply = function () {\n                if (!Patch.isSupportedVclick()) {\n                    _vclickPatch();\n                    Patch.s_vclickEvent = \"click\";\n                }\n            };\n            /**\n             * \\~english\n             * if \"vclick\" event is unsupported, returns false. ex: Android 4.4 (Kitkat)\n             *\n             * \\~japanese\n             * \"vclick\" event  platform (KitKat)  false \n             * jQM  version up \n             */\n            Patch.isSupportedVclick = function () {\n                // for Android 4.4+ (Kitkat )\n                if (Framework.Platform.Android && !Framework.Platform.ltAd4_4) {\n                    return false;\n                }\n                return true;\n            };\n            Patch.s_vclickEvent = \"vclick\";\n            return Patch;\n        }());\n        Framework.Patch = Patch;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * @enum Orientation\n         */\n        var Orientation;\n        (function (Orientation) {\n            Orientation[Orientation[\"PORTRAIT\"] = 0] = \"PORTRAIT\";\n            Orientation[Orientation[\"LANDSCAPE\"] = 1] = \"LANDSCAPE\";\n        })(Orientation = Framework.Orientation || (Framework.Orientation = {}));\n        /**\n         * \\~english\n         * Get Orientation enum code\n         *\n         * @return {Number} Orientation Code.\n         *\n         * \\~japanese\n         * Orientation \n         *\n         * @return {Number} Orientation Code.\n         */\n        function getOrientation() {\n            var $window = $(window);\n            return ($window.width() < $window.height()) ? Orientation.PORTRAIT : Orientation.LANDSCAPE;\n        }\n        Framework.getOrientation = getOrientation;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n\n\n\n\n/* tslint:disable:max-line-length no-string-literal */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        var Promise = CDP.Promise;\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        /**\n         * \\~english\n         * Convert path to URL.\n         * If the path starts from \"/\", the function translate the path as child folder of \"web root\".\n         * Otherwise, it interprets as relative path from current page.\n         * [Note] This behavior go along with jQM, NOT with require.toUrl().\n         *\n         * @param path {String} [in] path string\n         *\n         * \\~japanese\n         * path  URL \n         * \"/\"  web root URL\n         * jQM require.toUrl() \n         *\n         * @param path {String} [in] \n         */\n        function toUrl(path) {\n            if (null != path[0] && \"/\" === path[0]) {\n                return CDP.webRoot + path.slice(1);\n            }\n            else {\n                return $.mobile.path.makeUrlAbsolute(path, getCurrentDocumentUrl());\n            }\n        }\n        Framework.toUrl = toUrl;\n        /**\n         * \\~english\n         * Get current document url.\n         *\n         * @private\n         *\n         * \\~japanese\n         *  URL \n         *\n         * @private\n         */\n        function getCurrentDocumentUrl() {\n            var $activePage = $(\"body\").pagecontainer(\"getActivePage\");\n            if (null == $activePage) {\n                return $.mobile.path.documentBase.hrefNoHash;\n            }\n            var url = $.mobile.activePage.closest(\".ui-page\").jqmData(\"url\"), base = $.mobile.path.documentBase.hrefNoHash;\n            if (!url || !$.mobile.path.isPath(url)) {\n                url = base;\n            }\n            return $.mobile.path.makeUrlAbsolute(url, base);\n        }\n        /**\n         * \\~english\n         * Default \"before route change\" handler.\n         *\n         * @private\n         *\n         * \\~japanese\n         *  \"before route change\" \n         *\n         * @private\n         */\n        var _beforeRouteChange = function () {\n            return Promise.resolve();\n        };\n        // default \"before route change\" hanndler\n        var _defaultBeforeRouteChange = _beforeRouteChange;\n        /**\n         * \\~english\n         * Setup \"before route change\" handler.\n         *\n         * @param  {Function} handler function.\n         * @return {Function} old handler function.\n         *\n         * \\~japanese\n         * \"before route change\" \n         *\n         * @param  {Function} handler .\n         * @return {Function}  handler.\n         */\n        function setBeforeRouteChangeHandler(handler) {\n            if (null == handler) {\n                return _beforeRouteChange;\n            }\n            else {\n                var oldHandler = _beforeRouteChange;\n                _beforeRouteChange = handler;\n                return oldHandler;\n            }\n        }\n        Framework.setBeforeRouteChangeHandler = setBeforeRouteChangeHandler;\n        //___________________________________________________________________________________________________________________//\n        /**\n         * \\~english\n         * @class Router\n         * @brief Router class for adjusting jQueryMobile functions and Backbone.Router functions.\n         *        Even if Backbone.Router does not start routing, natigate() method works good with jQM framework.\n         *\n         * \\~japanese\n         * @class Router\n         * @brief jQueryMobile  Backbone.Router  Router \n         *        navigate()  jQM \n         */\n        var Router = (function () {\n            function Router() {\n            }\n            ///////////////////////////////////////////////////////////////////////\n            // public static methods\n            /**\n             * \\~english\n             * for initialize Router. this function is called in framework.\n             *\n             * @return {Boolean} true: succeeded / false: failed.\n             *\n             * \\~japanese\n             * \n             * \n             *\n             * @param  options {Object} [in] \n             * @return {Boolean} \n             */\n            Router.initialize = function (options) {\n                var $body = $(\"body\");\n                if (!!Router.s_router) {\n                    console.warn(\"logic error. initialize call twice.\");\n                    return false;\n                }\n                Router.s_initOptions = $.extend({}, Router.s_defaultInitOptions, options);\n                // Backbone.Router route \n                Router.s_loadUrl = _.bind(Backbone.history.loadUrl, Backbone.history);\n                Backbone.history.loadUrl = Router.customLoadUrl;\n                Router.s_router = new Backbone.Router();\n                Router.s_router.on(\"route\", Router.onRouteSucceeded);\n                // Backbone.Router $.mobile.back() []\n                if (!$.mobile.hashListeningEnabled) {\n                    Router.s_back = _.bind($.mobile.back, $.mobile);\n                    $.mobile.back = Router.customJqmBack;\n                }\n                // changePage \n                if (null == $.mobile.changePage) {\n                    $.mobile.changePage = function (to, options) {\n                        $body.pagecontainer(\"change\", to, options);\n                    };\n                }\n                Router.bindEvents();\n                // Framework \n                Framework.setupEventHandlers();\n                return true;\n            };\n            /**\n             * \\~english\n             * Register to Router.\n             *\n             * @param route    {String}   [in] route string, it can be regular expression.\n             * @param page     {String}   [in] page template path.\n             * @param top      {Boolean}  [in] set \"true\" if application's top view. (optional)\n             * @param callback {Function} [in] callback for custom page transition. If you don't want to trigger jQM.changePage(), return true by this callback. (optional)\n             * @return {Router} Router instance.\n             *\n             * \\~japanese\n             * \n             *\n             * @param route    {String}   [in]  / \n             * @param page     {String}   [in] page template path. \n             * @param top      {Boolean}  [in] Top  true  ()\n             * @param callback {Function} [in]  true  changePage  ()\n             * @return {Router}  method chain any cast \n             */\n            Router.register = function (route, page, top, callback) {\n                if (top === void 0) { top = false; }\n                // Backbone.Router  history \n                var restart = Router.stop();\n                var name = route + page;\n                var context = {\n                    route: route,\n                    regexp: Router.s_router._routeToRegExp(route),\n                    page: page,\n                    top: top,\n                    callback: callback || function () { return false; }\n                };\n                if (Router.pushContext(name, context)) {\n                    Router.s_router.route(route, name, function () { });\n                }\n                if (restart) {\n                    // \n                    Router.start({ silent: true });\n                }\n                return Router;\n            };\n            /**\n             * \\~english\n             * Start listening hash change.\n             * It should be called after register().\n             *\n             * @param options {Object} [in] options object for Backbone.History.\n             *\n             * \\~japanese\n             * \n             * \n             *\n             * @param options {Object} [in] Backbone.History \n             */\n            Router.start = function (options) {\n                if ($.mobile.hashListeningEnabled) {\n                    console.log(\"setting error. confict: $.mobile.hashListeningEnabled = true, cannot start.\");\n                    return false;\n                }\n                return Backbone.history.start(options);\n            };\n            /**\n             * \\~english\n             * Stop listening hash change.\n             *\n             * @return {Boolean} previous status.\n             *\n             * \\~japanese\n             * \n             *\n             * @return {Boolean} \n             */\n            Router.stop = function () {\n                var prevState = Backbone.History.started;\n                Backbone.history.stop();\n                return prevState;\n            };\n            /**\n             * \\~english\n             * Check routing status.\n             *\n             * @return {Boolean} true: routing / false: not routing\n             *\n             * \\~japanese\n             * \n             *\n             * @return {Boolean} true:  / false: \n             */\n            Router.isRouting = function () {\n                return Backbone.History.started;\n            };\n            /**\n             * \\~english\n             * URL navigation.\n             *\n             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)\n             * @param transition {String}          [in] set a transition string (optional)\n             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)\n             *\n             * \\~japanese\n             * URL\n             *\n             * @param url        {String}          [in]  URL  (//)\n             * @param transition {String}          [in] transition  effect  ()\n             * @param reverse    {Boolean}         [in] transition  direction  true:reverse/false: ()\n             * @param options    {NavigateOptions} [in] Backbone.Router.navigate()  ()\n             */\n            Router.navigate = function (url, transition, reverse, options) {\n                if (!!Router.s_lastNavigateInfo.inNavigation) {\n                    //  Navigation \n                    console.log(\"Router.navigate() called in navigation proc.\");\n                    return;\n                }\n                else if (Router.initFirstPageIfNeeded(url)) {\n                    return;\n                }\n                var navOptions = $.extend({}, Router.s_defaultNavigateOptions, options);\n                // . Sub Flow .\n                var notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;\n                Router.s_lastNavigateInfo = {\n                    url: url,\n                    transition: transition,\n                    reverse: reverse,\n                    backDestination: navOptions.backDestination,\n                    noHashChange: navOptions.noHashChange,\n                    intent: navOptions.intent || {},\n                    positiveNavigate: true,\n                    calledBeforeRouteChange: true,\n                    inNavigation: true,\n                };\n                // \n                notifyBeforeRouteChange()\n                    .fail(function () {\n                    // beforeRouteChange() error \n                    console.error(\"before route change call, failed.\");\n                })\n                    .always(function () {\n                    if (Router.isRouting() && !Router.s_lastNavigateInfo.noHashChange) {\n                        if (navOptions.subFlow) {\n                            switch (navOptions.subFlow.operation) {\n                                case \"begin\":\n                                    Router.startSubFlow(navOptions.subFlow);\n                                    break;\n                                case \"end\":\n                                    Router.finishSubFlow(navOptions);\n                                    return; // navigation \n                                default:\n                                    console.warn(\"unknown subFlow.operation. operation: \" + navOptions.subFlow.operation);\n                                    break;\n                            }\n                        }\n                        Router.s_router.navigate(url, navOptions);\n                    }\n                    else {\n                        if (navOptions.subFlow) {\n                            console.warn(\"subFlow only supported under routing and hash change condition.\");\n                        }\n                        (function () {\n                            var fragment = Backbone.history.getFragment(url);\n                            var context;\n                            if (Router.s_lastNavigateInfo.noHashChange) {\n                                // noHashChange \n                                context = _.find(Router.s_rootContexts, function (context) {\n                                    return context.regexp.test(fragment);\n                                });\n                            }\n                            else {\n                                // Backbone.Router \n                                context = _.findWhere(Router.s_rootContexts, { route: fragment });\n                            }\n                            if (context) {\n                                url = context.page;\n                            }\n                        })();\n                        Router.changePage(url);\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Navigate from Top Page.\n             * If SubFlow set up, the param is cleared.\n             *\n             * @param to         {String|PageStack|PageStack[]} [in] set a navigate URL or PageStackOptions object or array.\n             * @param transition {String}                       [in] set a transition string (optional)\n             * @param reverse    {Boolean}                      [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             * @param options    {NavigateOptions}              [in] set a options object for Backbone.Router.navigate(). (optional)\n             *\n             * \\~japanese\n             * \n             * SubFlow \n             *\n             * @param to         {String|PageStack|PageStack[]} [in]  URL / PageStackOptions /\n             * @param transition {String}                       [in] transition  effect  ()\n             * @param reverse    {Boolean}                      [in] transition  direction  true:reverse/false: ()\n             * @param options    {NavigateOptions}              [in] Backbone.Router.navigate()  ()\n             */\n            Router.navigateFromTop = function (to, transition, reverse, options) {\n                var stack = Router.getJqmHistory().stack;\n                var currentPage = stack[Router.getJqmHistory().activeIndex];\n                var _transition = transition || currentPage.transition;\n                var _reverse = (null != reverse) ? reverse : true;\n                var destStacks = (function () {\n                    if (!to) {\n                        return null;\n                    }\n                    else if (\"string\" === typeof to) {\n                        return [{ route: to }];\n                    }\n                    else if (to instanceof Array) {\n                        return to;\n                    }\n                    else {\n                        return [to];\n                    }\n                })();\n                //  SubFlow \n                stack.forEach(function (value) {\n                    delete value[Router.SUBFLOW_PARAM];\n                });\n                //  SubFlow \n                stack[0][Router.SUBFLOW_PARAM] = {\n                    operation: \"begin\",\n                    destBase: stack[0].hash,\n                    destStacks: destStacks,\n                    additionalDistance: 0,\n                };\n                Router.navigate(null, _transition, _reverse, $.extend({}, options, {\n                    subFlow: {\n                        operation: \"end\",\n                    }\n                }));\n            };\n            /**\n             * \\~english\n             * Back to previous history.\n             * It's same as browser back button's behaviour.\n             * [Note] If set the jQM: data-rel=\"back\", work as well.\n             *\n             * \\~japanese\n             * \n             * \n             * jQM: data-rel=\"back\" \n             */\n            Router.back = function () {\n                if (!!Router.s_lastNavigateInfo.inNavigation) {\n                    //  Navigation \n                    console.log(\"Router.back() called in navigation proc.\");\n                    return;\n                }\n                else if (Router.isTopPage()) {\n                    // Top \n                    var app = navigator.app || {};\n                    if (!!app.exitApp) {\n                        app.exitApp(); // note: never exit on iOS\n                        return;\n                    }\n                }\n                Router.s_lastNavigateInfo = {\n                    inNavigation: true,\n                    calledBeforeRouteChange: true,\n                };\n                // \n                _beforeRouteChange()\n                    .then(function () {\n                    $.mobile.back();\n                })\n                    .fail(function () {\n                    console.error(\"before route change call, failed.\");\n                    Router.s_lastNavigateInfo = {};\n                });\n            };\n            /**\n             * \\~english\n             * Store Intent object.\n             *\n             * \\~japanese\n             * Intent \n             */\n            Router.pushIntent = function (intent) {\n                Router.s_lastIntent = $.extend(true, Router.s_lastIntent, intent);\n            };\n            /**\n             * \\~english\n             * Get Intent object.\n             *\n             * \\~japanese\n             * Intent \n             */\n            Router.popIntent = function () {\n                var intent = Router.s_lastIntent;\n                Router.s_lastIntent = {};\n                return intent;\n            };\n            /**\n             * \\~english\n             * Get query parameters.\n             *\n             * \\~japanese\n             * query parameter \n             *  (pagebeforecreate  pagechange)\n             */\n            Router.getQueryParameters = function () {\n                if (Router.s_lastNavigateInfo.intent && Router.s_lastNavigateInfo.intent.params) {\n                    return Router.s_lastNavigateInfo.intent.params[\"queryParams\"];\n                }\n                else {\n                    return null;\n                }\n            };\n            /**\n             * \\~english\n             * Begin sub flow transaction.\n             *\n             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)\n             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)\n             * @param transition {String}          [in] set a transition string (optional)\n             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             *\n             * \\~japanese\n             * sub flow .\n             * navigate()  \n             *\n             * @param url        {String}          [in]  URL  (//)\n             * @param options    {NavigateOptions} [in] Backbone.Router.navigate()  ()\n             * @param transition {String}          [in] transition  effect  ()\n             * @param reverse    {Boolean}         [in] transition  direction  true:reverse/false: ()\n             */\n            Router.beginSubFlow = function (url, options, transition, reverse) {\n                var opt = $.extend({}, options);\n                opt.subFlow = opt.subFlow || { operation: \"begin\" };\n                if (\"begin\" !== opt.subFlow.operation) {\n                    console.error(\"logic error. invalid subflow operation. [operation: \" + opt.subFlow.operation + \"]\");\n                    return;\n                }\n                Router.navigate(url, transition, reverse, opt);\n            };\n            /**\n             * \\~english\n             * Commit sub flow transaction.\n             *\n             * @param transition {String}  [in] set a transition string (optional)\n             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             *\n             * \\~japanese\n             * sub flow .\n             * navigate()  \n             *\n             * @param transition {String}  [in] transition  effect  ()\n             * @param reverse    {Boolean} [in] transition  direction  true:reverse/false: ()\n             */\n            Router.commitSubFlow = function (transition, reverse) {\n                Router.navigate(null, transition, reverse, {\n                    subFlow: {\n                        operation: \"end\",\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Cancel sub flow transaction.\n             *\n             * @param transition {String}  [in] set a transition string (optional)\n             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse[default] / false:nomal (optional)\n             *\n             * \\~japanese\n             * sub flow .\n             * navigate()  \n             *\n             * @param transition {String}  [in] transition  effect  ()\n             * @param reverse    {Boolean} [in] transition  direction  true:reverse[]/false: ()\n             */\n            Router.cancelSubFlow = function (transition, reverse) {\n                // \n                var baseInfo = Router.detectSubFlowBaseInfo();\n                baseInfo.subFlowParam.additionalDistance = 0;\n                Router.navigate(null, transition, (null != reverse) ? reverse : true, {\n                    subFlow: {\n                        operation: \"end\",\n                        destStacks: null,\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Check in sub flow.\n             *\n             * \\~japanese\n             * sub flow \n             */\n            Router.isInSubFlow = function () {\n                var stack = Router.getJqmHistory().stack;\n                var has = _.some(stack, function (value) {\n                    return !!value[Router.SUBFLOW_PARAM];\n                });\n                return has;\n            };\n            /**\n             * \\~english\n             * Check from hash changed navigation.\n             *\n             * \\~japanese\n             * Hash  Navigate \n             * \"pagechange\" \n             */\n            Router.fromHashChanged = function () {\n                // positiveNavigate = false \n                return Router.s_lastNavigateInfo.inNavigation && (null == Router.s_lastNavigateInfo.positiveNavigate);\n            };\n            Router.registerPageStack = function (pageStack, withNavigate, options) {\n                var newStacks = [];\n                var failed = false;\n                pageStack = (pageStack instanceof Array) ? pageStack : [pageStack];\n                withNavigate = (null == withNavigate) ? false : withNavigate;\n                (function () {\n                    var makeStack = function (info) {\n                        var url;\n                        var stack;\n                        var fragment = Backbone.history.getFragment(info.route);\n                        var context = _.find(Router.s_rootContexts, function (context) {\n                            return context.regexp.test(fragment);\n                        });\n                        if (!context) {\n                            console.warn(\"route is not registered. route: \" + info.route);\n                            return null;\n                        }\n                        else {\n                            url = Router.pathToJqmDataUrl(context.page);\n                        }\n                        stack = {\n                            route: info.route,\n                            pageUrl: url,\n                            title: info.title,\n                            transition: info.transition,\n                            url: url,\n                        };\n                        return stack;\n                    };\n                    for (var i = 0, n = pageStack.length; i < n; i++) {\n                        var stack = makeStack(pageStack[i]);\n                        if (!stack) {\n                            failed = true;\n                            break;\n                        }\n                        else {\n                            newStacks.push(stack);\n                        }\n                    }\n                })();\n                if (failed) {\n                    return false;\n                }\n                (function () {\n                    // Router \n                    var restart = Router.stop();\n                    var silentLength = newStacks.length - 1;\n                    var finalIndex = newStacks.length - 1;\n                    Router.getJqmHistory().clearForward();\n                    for (var i = 0, n = silentLength; i < n; i++) {\n                        location.hash = newStacks[i].route;\n                        Router.getJqmHistory().stack.push(newStacks[i]);\n                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;\n                    }\n                    // final stack with navigate\n                    if (withNavigate) {\n                        var transition = (function () {\n                            if (null != Router.s_lastNavigateInfo.transition) {\n                                return Router.s_lastNavigateInfo.transition;\n                            }\n                            else {\n                                return newStacks[finalIndex].transition;\n                            }\n                        })();\n                        var reverse = (function () {\n                            if (null != Router.s_lastNavigateInfo.reverse) {\n                                return Router.s_lastNavigateInfo.reverse;\n                            }\n                            else {\n                                return false;\n                            }\n                        })();\n                        restart = false;\n                        Router.start({ silent: true });\n                        Router.navigate(newStacks[finalIndex].route, transition, reverse, options);\n                    }\n                    else {\n                        location.hash = newStacks[finalIndex].route;\n                        Router.getJqmHistory().stack.push(newStacks[finalIndex]);\n                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;\n                    }\n                    // Router \n                    if (restart) {\n                        Router.start({ silent: true });\n                    }\n                })();\n                return true;\n            };\n            /**\n             * \\~english\n             * Get jQM's history object\n             *\n             * \\~japanese\n             * jQM  History \n             *\n             */\n            Router.getJqmHistory = function () {\n                return $.mobile.navigate.history;\n            };\n            ///////////////////////////////////////////////////////////////////////\n            // private static methods\n            /**\n             * \\~english\n             * Override: Backbone.History.loadUrl().\n             *\n             * @private\n             *\n             * \\~japanese\n             * Backbone.History.loadUrl() \n             *\n             * @private\n             */\n            Router.customLoadUrl = function (fragment) {\n                var handled = Router.s_loadUrl(fragment);\n                if (!handled) {\n                    Router.onRouteFailed(fragment);\n                }\n                return handled;\n            };\n            /**\n             * \\~english\n             * Override: $.mobile.back().\n             *\n             * fail safe processing.\n             *  If using Backbone's Router,\n             *  this class unuses history object of jQuery Mobile 1.4,\n             *  and standardize as browser back button's behaviour. (jQM 1.3 comparable)\n             *\n             * @private\n             *\n             * \\~japanese\n             * $.mobile.back() \n             *\n             * [TBD] fail safe \n             *  Backbone  Router \n             *  jQuery Mobile 1.4  History \n             *  1.3 []\n             *\n             * @private\n             */\n            Router.customJqmBack = function () {\n                if (Router.isRouting()) {\n                    history.back();\n                }\n                else {\n                    // jQM \n                    Router.s_back();\n                }\n            };\n            /**\n             * \\~english\n             * Bind events.\n             *\n             * @private\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             */\n            Router.bindEvents = function () {\n                $(document)\n                    .one(\"pagechange\", function () {\n                    if (Router.s_initOptions.anchorVclick) {\n                        // anchor vclick\n                        $(document).on(\"vclick\", \"[href]\", function (event) {\n                            Router.onAnchorVclicked(event);\n                        });\n                    }\n                })\n                    .on(\"pagebeforeshow\", function (event) {\n                    // \"data-back-dst\"  page \n                    if (null != Router.s_lastNavigateInfo.backDestination) {\n                        var active = Router.getJqmHistory().getActive();\n                        active[Router.BACK_DESTINATION_URL] = Router.s_lastNavigateInfo.backDestination;\n                    }\n                })\n                    .on(\"pageshow\", function (event) {\n                    var active = Router.getJqmHistory().getActive();\n                    if (active[Router.SUBFLOW_PARAM]) {\n                        delete active[Router.SUBFLOW_PARAM];\n                    }\n                })\n                    .on(\"pagechange pagecontainerloadfailed\", function (event) {\n                    Router.s_lastNavigateInfo = {};\n                });\n                // back key assign\n                CDP.setBackButtonHandler(Router.back);\n            };\n            /**\n             * \\~english\n             * Store the RootContext.\n             *\n             * @private\n             * @param name    {String}       [in] name of route\n             * @param context {RouteContext} [in] context object\n             * @return true: succeeded / false: already registered\n             *\n             * \\~japanese\n             * RootContext \n             *\n             * @private\n             * @param name    {String}       [in] route \n             * @param context {RouteContext} [in] context \n             * @return true:  / false: \n             */\n            Router.pushContext = function (name, context) {\n                if (!!Router.s_rootContexts[name]) {\n                    console.log(\"logic error. route is already registered. name: \" + name);\n                    return false;\n                }\n                Router.s_rootContexts[name] = context;\n                return true;\n            };\n            /**\n             * \\~english\n             * Check if $.mobile.initializePage() is called or not, and call it if needed.\n             *\n             * @private\n             * @param url {String}  [in] set a navigate URL. (relative path / absolute path / fragment)\n             *\n             * \\~japanese\n             * $.mobile.initializePage() \n             *\n             * @private\n             * @param url {String} [in]  URL  (//)\n             */\n            Router.initFirstPageIfNeeded = function (url) {\n                if (!$.mobile.autoInitializePage) {\n                    $(document).one(\"pagebeforechange\", function (event, data) {\n                        data.toPage = Framework.toUrl(url);\n                    });\n                    $.mobile.initializePage();\n                    $.mobile.autoInitializePage = true;\n                    return true;\n                }\n                return false;\n            };\n            /**\n             * \\~english\n             * Check for current page is top.\n             *\n             * @private\n             * @return true: top page / false: not top page\n             *\n             * \\~japanese\n             *  top \n             *\n             * @private\n             * @return true: top  / false: top \n             */\n            Router.isTopPage = function () {\n                var fragment = Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash);\n                var context = _.find(Router.s_rootContexts, function (context) {\n                    return context.regexp.test(fragment);\n                });\n                return (null == context) ? false : context.top;\n            };\n            /**\n             * \\~english\n             * Called when anchor received \"vclick\" event.\n             *\n             * @private\n             * @return true: need default processing / false: need custom processing\n             *\n             * \\~japanese\n             * anchor  vclick \n             *\n             * @private\n             * @return true: default  / false: \n             */\n            Router.onAnchorVclicked = function (event) {\n                if (Router.isJustBeforeVclicked()) {\n                    event.preventDefault();\n                    return false;\n                }\n                return Router.followAnchor(event);\n            };\n            /**\n             * \\~english\n             * Anchor processing.\n             *\n             * @private\n             *\n             * \\~japanese\n             * anchor \n             *\n             * @private\n             */\n            Router.followAnchor = function (event) {\n                var $target = $(event.currentTarget);\n                var url = $target.jqmData(\"href\") || $target.attr(\"href\");\n                var transition = $target.jqmData(\"transition\");\n                var direction = $target.jqmData(\"direction\");\n                var backDst = $target.attr(Router.DATA_BACK_DESTINATION);\n                var noHashChange = $target.attr(Router.DATA_NO_HASH_CHANGE) ?\n                    $target.attr(Router.DATA_NO_HASH_CHANGE) === \"true\" : false;\n                var noHrefHandle = $target.attr(Router.DATA_NO_VCLICK_HANDLE) ?\n                    $target.attr(Router.DATA_NO_VCLICK_HANDLE) === \"true\" : false;\n                /*\n                 * - \n                 * - jQM \n                 * \n                 */\n                if (noHrefHandle || Router.needDefaultOperation(url)) {\n                    return true;\n                }\n                // custom behavier\n                event.preventDefault();\n                if (Router.isBackButtonClicked(event)) {\n                    Router.back();\n                }\n                else {\n                    Router.navigate(url, transition, !!direction, { noHashChange: noHashChange, backDestination: backDst });\n                }\n                return false;\n            };\n            /**\n             * \\~english\n             * Check default processing needed.\n             *\n             * @private\n             * @param  url {String} [in] url string\n             * @return true: need default processing / false: need not\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             * @param  url {String} [in] url \n             * @return true:  / false: \n             */\n            Router.needDefaultOperation = function (url) {\n                if (!url || (\"#\" === url)) {\n                    return true;\n                }\n                else if (\"#\" === url[0]) {\n                    return !Router.canResolveRoute(url);\n                }\n                else {\n                    return false;\n                }\n            };\n            /**\n             * \\~english\n             * Check status of Backbone.Router if they can resolve route.\n             *\n             * @private\n             * @param  url {String} [in] url \n             * @return true: can resolve / false: can not\n             *\n             * \\~japanese\n             * Backbone.Router  route \n             *\n             * @private\n             * @param  url {String} [in] url \n             * @return true:  / false: \n             */\n            Router.canResolveRoute = function (url) {\n                var fragment = Backbone.history.getFragment(url);\n                return _.any(Backbone.history.handlers, function (handler) {\n                    if (handler.route.test(fragment)) {\n                        return true;\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Check \"vclick\" fired at the last minute.\n             *\n             * @private\n             *\n             * \\~japanese\n             *  vclick \n             *\n             * @private\n             */\n            Router.isJustBeforeVclicked = function () {\n                var isBefore = (Date.now() - Router.s_lastClickedTime) < Router.DELAY_TIME * 2;\n                Router.s_lastClickedTime = Date.now();\n                return isBefore;\n            };\n            /**\n             * \\~english\n             * Check back button clicked.\n             *\n             * @private\n             *\n             * \\~japanese\n             * Back Button \n             *\n             * @private\n             */\n            Router.isBackButtonClicked = function (event) {\n                if ($(event.currentTarget).jqmData(\"rel\") === \"back\") {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            };\n            /**\n             * \\~english\n             * It called on succeed routing triggered by changing hash.\n             *\n             * @private\n             * @param name {String} [in] name of route\n             * @param args {Array}  [in] array of paramter\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             * @param name {String} [in] route page \n             * @param args {Array}  [in] \n             */\n            Router.onRouteSucceeded = function (name) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                var context = Router.s_rootContexts[name];\n                if (!!context) {\n                    var intent = { params: { queryParams: args } };\n                    Router.s_lastNavigateInfo.inNavigation = true;\n                    if (null != Router.s_lastNavigateInfo.intent) {\n                        intent.params = $.extend({}, intent.params, Router.s_lastNavigateInfo.intent.params || {});\n                    }\n                    Router.s_lastNavigateInfo.intent = $.extend({}, Router.s_lastNavigateInfo.intent, intent);\n                    var handled = context.callback(args);\n                    if (!handled) {\n                        Router.changePage(context.page);\n                    }\n                }\n            };\n            /**\n             * \\~english\n             * It called on failed routing triggered by changing hash.\n             *\n             * @private\n             * @param name {String} [in] name of route\n             * @param args {Array}  [in] array of paramter\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             * @param name {String} [in] route page \n             * @param args {Array}  [in] \n             */\n            Router.onRouteFailed = function (fragment) {\n                Router.s_lastNavigateInfo.inNavigation = true;\n                if (null == fragment) {\n                    fragment = Backbone.history.getFragment();\n                }\n                // route \n                if (Router.s_lastNavigateInfo.positiveNavigate) {\n                    var context = Router.s_rootContexts[fragment];\n                    if (null == context) {\n                        context = {\n                            route: fragment,\n                            regexp: Router.s_router._routeToRegExp(fragment),\n                            page: Router.s_lastNavigateInfo.url,\n                            top: false,\n                            callback: null,\n                        };\n                        Router.pushContext(fragment, context);\n                    }\n                }\n                // fragment  path \n                var path = fragment;\n                if (null != Router.s_rootContexts[fragment]) {\n                    path = Router.s_rootContexts[fragment].page;\n                }\n                Router.changePage(path);\n            };\n            /**\n             * \\~english\n             * This function just calls jQuery Mobile's navigation method.\n             *\n             * @private\n             * @param path {String} [in] to page path\n             *\n             * \\~japanese\n             * jQuery Mobile \n             *\n             * @private\n             * @param path {String} [in] \n             */\n            Router.changePage = function (path) {\n                var notifyBeforeRouteChange;\n                // data-rel=\"back\", , H/W Back Key \n                if (!Router.s_lastNavigateInfo.positiveNavigate) {\n                    if (Router.s_lastNavigateInfo.inAdditionalBack) {\n                        Router.s_lastNavigateInfo.inAdditionalBack = false;\n                    }\n                    else {\n                        Router.decideDirection(path);\n                        // \n                        var additional = Router.detectAdditionalBackDistance();\n                        if (0 < additional) {\n                            // 2 hash change .\n                            Router.s_lastNavigateInfo.inAdditionalBack = true;\n                            Router.getJqmHistory().activeIndex -= additional;\n                            history.go(-additional);\n                            return;\n                        }\n                    }\n                    //  subflow param \n                    var subFlowInfo = Router.detectSubFlowBaseInfo();\n                    if (subFlowInfo.isCurrent) {\n                        delete subFlowInfo.stack[Router.SUBFLOW_PARAM];\n                    }\n                }\n                else {\n                    //  previousIndex \n                    Router.getJqmHistory().previousIndex = Router.getJqmHistory().activeIndex;\n                }\n                // . .\n                notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;\n                notifyBeforeRouteChange()\n                    .then(function () {\n                    // \n                    if (Router.s_lastNavigateInfo.intent) {\n                        Router.pushIntent(Router.s_lastNavigateInfo.intent);\n                    }\n                    Router.treatUrlHistory();\n                    $.mobile.changePage(Framework.toUrl(path), {\n                        showLoadMsg: false,\n                        allowSamePageTransition: true,\n                        transition: Router.s_lastNavigateInfo.transition || \"none\",\n                        reverse: Router.s_lastNavigateInfo.reverse,\n                        fromHashChange: !Router.s_lastNavigateInfo.positiveNavigate,\n                        changeHash: !Router.s_lastNavigateInfo.noHashChange,\n                    });\n                })\n                    .fail(function () {\n                    console.error(\"before route change call, failed.\");\n                    Router.s_lastNavigateInfo = {};\n                });\n            };\n            /**\n             * \\~english\n             * Decide direction parameter.\n             * It's as same as jQM internal implement. (imperfection)\n             *\n             * @private\n             * @param path {String} [in] to page path\n             *\n             * \\~japanese\n             * direction \n             * jQM  ()\n             *\n             * @private\n             * @param path {String} [in] \n             */\n            Router.decideDirection = function (path) {\n                var url = $.mobile.path.convertUrlToDataUrl(Framework.toUrl(path));\n                if (null == Router.s_lastNavigateInfo.transition) {\n                    Router.s_lastNavigateInfo.transition = Router.getJqmHistory().getActive().transition;\n                }\n                Router.getJqmHistory().direct({\n                    url: url,\n                    present: function (newPage, direction) {\n                        switch (direction) {\n                            case \"back\":\n                                if (null == Router.s_lastNavigateInfo.reverse) {\n                                    Router.s_lastNavigateInfo.reverse = true;\n                                }\n                                break;\n                            case \"forward\":\n                                if (null == Router.s_lastNavigateInfo.transition) {\n                                    Router.s_lastNavigateInfo.transition = newPage.transition;\n                                }\n                                break;\n                            default:\n                                console.log(\"unknown direction: \" + direction);\n                                break;\n                        }\n                    },\n                    missing: function () {\n                        //  URL \n                        if (1 === Router.getJqmHistory().activeIndex) {\n                            Router.getJqmHistory().previousIndex = 1;\n                            Router.getJqmHistory().activeIndex = 0;\n                            if (null == Router.s_lastNavigateInfo.reverse) {\n                                Router.s_lastNavigateInfo.reverse = true;\n                            }\n                        }\n                        else if (0 !== Router.getJqmHistory().activeIndex) {\n                            console.log(\"unknown direction.\");\n                        }\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Return additional back distance count when back destination set.\n             * (const function)\n             *\n             * @private\n             * @return {Number} count of additiona back distance.\n             *\n             * \\~japanese\n             *  Back \n             * ( Router )\n             *\n             * @private\n             * @return {String}  Back .\n             */\n            Router.detectAdditionalBackDistance = function () {\n                var stack = Router.getJqmHistory().stack;\n                var historyActiveIndex = Router.getJqmHistory().activeIndex; // decideDirection()  Router.getJqmHistory().direct() history  activeIndex \n                var previousIndex = Router.getJqmHistory().previousIndex; // []\n                var i, backDst, distance, fragment, context, jqmDataUrl;\n                // check \"operation\". [] clearForward() \n                if (!Router.s_lastNavigateInfo.reverse || null == previousIndex || !stack[previousIndex]) {\n                    return 0;\n                }\n                // \"backDst exists\". []\n                backDst = stack[previousIndex][Router.BACK_DESTINATION_URL];\n                if ((null == backDst)) {\n                    return 0;\n                }\n                fragment = Backbone.history.getFragment(backDst);\n                // \n                if (\"\" === fragment) {\n                    return historyActiveIndex;\n                }\n                // rootContext  path \n                context = _.find(Router.s_rootContexts, function (context) {\n                    return context.regexp.test(fragment);\n                });\n                if (null == context) {\n                    console.warn(\"back destination is not registered. back-dst: \" + backDst);\n                    return 0;\n                }\n                // dataUrl  jQM History \n                jqmDataUrl = Router.pathToJqmDataUrl(context.page);\n                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {\n                    if (jqmDataUrl === stack[i].pageUrl) {\n                        break;\n                    }\n                }\n                if (i < 0) {\n                    console.warn(\"back destination does not exist in history. back-dst: \" + backDst);\n                    return 0;\n                }\n                return distance;\n            };\n            /**\n             * \\~english\n             * Start sub flow\n             * Attach SubFlowParam to jqm history stack object.\n             *\n             * @param subFlowParam {SubFlowParam} [in] Sub Flow parameter\n             *\n             * \\~japanese\n             * Sub Flow \n             * SubFlowParam  jqm history stack \n             *\n             * @param subFlowParam {SubFlowParam} [in] Sub Flow \n             */\n            Router.startSubFlow = function (subFlowParam) {\n                var active = Router.getJqmHistory().getActive();\n                var param = subFlowParam;\n                if (subFlowParam.destBase) {\n                    (function () {\n                        var distance = 0;\n                        var fragment = Backbone.history.getFragment(subFlowParam.destBase);\n                        var context = _.find(Router.s_rootContexts, function (context) {\n                            return context.regexp.test(fragment);\n                        });\n                        if (null == context) {\n                            console.warn(\"base destination is not registered. destBase: \" + subFlowParam.destBase);\n                            return;\n                        }\n                        // dataUrl  jQM History \n                        var jqmDataUrl = Router.pathToJqmDataUrl(context.page);\n                        var stack = Router.getJqmHistory().stack;\n                        for (var i = Router.getJqmHistory().activeIndex; 0 <= i; i--, distance++) {\n                            if (jqmDataUrl === stack[i].pageUrl) {\n                                param.additionalDistance = distance;\n                                break;\n                            }\n                        }\n                    })();\n                }\n                else {\n                    param.destBase = location.hash;\n                    param.additionalDistance = 0;\n                }\n                active[Router.SUBFLOW_PARAM] = param;\n            };\n            /**\n             * \\~english\n             * End sub flow\n             * navigate and delete SubFlowParam from jqm history stack object.\n             *\n             * @param navOptions {NavigateOptions} [in] Sub Flow parameter\n             *\n             * \\~japanese\n             * Sub Flow \n             *  SubFlowParam  jqm history stack \n             *\n             * @param navOptions {NavigateOptions} [in] Sub Flow \n             */\n            Router.finishSubFlow = function (options) {\n                var navOptions = $.extend(true, {}, options);\n                var baseInfo = Router.detectSubFlowBaseInfo();\n                // \"end\" \n                var param = $.extend({}, baseInfo.subFlowParam, navOptions.subFlow);\n                var distance = baseInfo.distance;\n                var stack = baseInfo.stack;\n                var retry = 0;\n                var NAVIGATE_INTERVAL = 100;\n                var MAX_RETRY_COUNT = 10;\n                // hash  navigate \n                var _navigate = function () {\n                    if (MAX_RETRY_COUNT <= retry) {\n                        console.error(\"reached navigate max retry count.\");\n                        Router.s_lastNavigateInfo = {};\n                    }\n                    else if (param.destBase !== location.hash) {\n                        retry++;\n                        setTimeout(_navigate, NAVIGATE_INTERVAL);\n                    }\n                    else {\n                        Router.s_lastNavigateInfo.inNavigation = false;\n                        Router.registerPageStack(param.destStacks, true, navOptions);\n                    }\n                };\n                if (stack) {\n                    delete stack[Router.SUBFLOW_PARAM];\n                    Router.getJqmHistory().activeIndex -= distance;\n                    Router.getJqmHistory().clearForward();\n                    if (param.destStacks) {\n                        Router.stop();\n                        // iOS  index.html  history.go(0) .\n                        // , .\n                        if (0 !== distance) {\n                            history.go(-distance);\n                        }\n                        delete navOptions.subFlow; // subFlow \n                        setTimeout(_navigate, 0);\n                    }\n                    else {\n                        Router.s_lastNavigateInfo.positiveNavigate = false;\n                        history.go(-distance);\n                    }\n                }\n                else {\n                    console.warn(\"subFlow begin status does not exist in history.\");\n                    Router.s_lastNavigateInfo = {};\n                }\n            };\n            /**\n             * \\~english\n             * Return destination Sub Flow information.\n             * (const function)\n             *\n             * @private\n             * @return {Object} sub flow info.\n             *\n             * \\~japanese\n             * Sub Flow \n             * ( Router )\n             *\n             * @private\n             * @return {Object} Sub Flow .\n             */\n            Router.detectSubFlowBaseInfo = function () {\n                var stack = Router.getJqmHistory().stack;\n                var historyActiveIndex = Router.getJqmHistory().activeIndex;\n                var i, distance;\n                var param = {};\n                var target;\n                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {\n                    if (stack[i][Router.SUBFLOW_PARAM]) {\n                        target = stack[i];\n                        param = stack[i][Router.SUBFLOW_PARAM];\n                        break;\n                    }\n                }\n                if (null == param.additionalDistance) {\n                    param.additionalDistance = 0;\n                }\n                return {\n                    stack: target,\n                    subFlowParam: param,\n                    distance: distance + param.additionalDistance,\n                    isCurrent: (function () {\n                        if (target && 0 === distance) {\n                            return true;\n                        }\n                        else {\n                            return false;\n                        }\n                    })(),\n                };\n            };\n            /**\n             * \\~english\n             * Convert path to jQM dataUrl.\n             *\n             * @private\n             * @return {String} jQM data url.\n             *\n             * \\~japanese\n             *  jQM dataUrl \n             *\n             * @private\n             * @return {String} jQM data url.\n             */\n            Router.pathToJqmDataUrl = function (path) {\n                var url = Framework.toUrl(path);\n                var dataUrl = $.mobile.path.convertUrlToDataUrl(url);\n                return dataUrl;\n            };\n            /**\n             * \\~english\n             * Update jQM urlHistory by window.history object.\n             * To be natural browsing history behavior, application needs to update jQM urlHistory\n             * when clicking back or next button of browser. (imperfection for decideDirection())\n             *\n             * @private\n             *\n             * \\~japanese\n             *  jQM urlHistory \n             * []/[]jQM urlHistory (decideDirection() )\n             *\n             * @private\n             */\n            Router.treatUrlHistory = function () {\n                if (Router.s_lastNavigateInfo.positiveNavigate || history.length < Router.getJqmHistory().stack.length) {\n                    Router.getJqmHistory().clearForward();\n                }\n            };\n            Router.s_initOptions = {};\n            Router.s_router = null;\n            Router.s_rootContexts = {};\n            Router.s_lastNavigateInfo = {};\n            Router.s_lastClickedTime = null;\n            Router.s_lastIntent = {};\n            Router.s_loadUrl = null;\n            Router.s_back = null;\n            Router.DELAY_TIME = 200; // TBD: \n            Router.DATA_BACK_DESTINATION = \"data-back-dst\";\n            Router.DATA_NO_HASH_CHANGE = \"data-no-hash-change\";\n            Router.DATA_NO_VCLICK_HANDLE = \"data-no-vclick-handle\";\n            Router.BACK_DESTINATION_URL = \"backDstUrl\";\n            Router.SUBFLOW_PARAM = \"subFlowParam\";\n            Router.s_defaultInitOptions = {\n                anchorVclick: true,\n            };\n            Router.s_defaultNavigateOptions = {\n                trigger: true,\n                replace: false,\n                intent: null,\n            };\n            return Router;\n        }());\n        Framework.Router = Router;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n\n\n\n/* tslint:disable:max-line-length forin no-bitwise */\nvar CDP;\n(function (CDP) {\n    var Promise = CDP.Promise;\n    /**\n     * \\~english\n     * The function returned Promise waits until PhoneGap is ready.\n     * [Note] emulate when PC enviroment.\n     *\n     * \\~japanese\n     * PhoneGap \n     * PC \n     */\n    function waitForDeviceReady() {\n        return new Promise(function (resolve) {\n            if (!CDP.Framework.Platform.Mobile) {\n                setTimeout(function () {\n                    resolve();\n                }, 100);\n            }\n            else {\n                if (null == CDP.global.cordova || null == CDP.global.cordova.exec) {\n                    $(document).one(\"deviceready\", function () {\n                        resolve();\n                    });\n                }\n                else {\n                    resolve();\n                }\n            }\n        });\n    }\n    CDP.waitForDeviceReady = waitForDeviceReady;\n    var _defaultBackButtonHandler = null;\n    /**\n     * \\~english\n     * Setup H/W Back key handler.\n     *\n     * @param  {Function} handler function.\n     * @return {Function} old handler function.\n     *\n     * \\~japanese\n     *\n     * @param  {Function} handler .\n     * @return {Function}  handler.\n     */\n    function setBackButtonHandler(handler) {\n        var oldHandler = _defaultBackButtonHandler;\n        _defaultBackButtonHandler = handler;\n        return oldHandler;\n    }\n    CDP.setBackButtonHandler = setBackButtonHandler;\n    // back key handler implement.\n    (function () {\n        waitForDeviceReady()\n            .then(function () {\n            $(document).on(\"backbutton\", function (event) {\n                if (_defaultBackButtonHandler) {\n                    _defaultBackButtonHandler(event);\n                }\n            });\n        });\n    })();\n    //___________________________________________________________________________________________________________________//\n    var Framework;\n    (function (Framework) {\n        var TAG = \"[CDP.Framework] \";\n        var _dfInitialize = $.Deferred();\n        var _activePage = null;\n        var _orientationListenerHolder = {};\n        var _lastOrientation = null;\n        /**\n         * \\~english\n         * Initialization function of Framework.\n         *\n         * \\~japanese\n         * Framework \n         *\n         * @param options {FrameworkOptions} [in] options object.\n         */\n        function initialize(options) {\n            if (\"pending\" !== _dfInitialize.state()) {\n                return _dfInitialize.promise();\n            }\n            var config = getConfig(options);\n            // CDP \n            // console  jQuery  WinRT \n            CDP.initialize({\n                success: function () {\n                    // Framework  Patch \n                    if (config.applyPatch) {\n                        Framework.Patch.apply();\n                    }\n                    // jQuery \n                    config.jquery();\n                    // jQuery Mobile \n                    $(document).on(\"mobileinit\", function () {\n                        // config \n                        config.jquerymobile();\n                        // cdp.i18n \n                        CDP.initializeI18N(config.i18n)\n                            .always(function (info) {\n                            // i18next . info  array .\n                            $(document)\n                                .one(\"pagebeforechange\", function (event, data) {\n                                data.options.showLoadMsg = false;\n                            })\n                                .on(\"pagebeforecreate\", function (event) {\n                                // i18nexthtml fragment\n                                $(event.target).localize();\n                            });\n                            // Router \n                            if (Framework.Router.initialize({ anchorVclick: config.anchorVclick, })) {\n                                _dfInitialize.resolve();\n                            }\n                            else {\n                                console.error(TAG + \"error. CDP.Framework.Router.initialize() failed.\");\n                                _dfInitialize.reject();\n                                _dfInitialize = $.Deferred();\n                            }\n                        });\n                    });\n                    {\n                        // jquery 3+\n                        var jqueryMajor = ~~$.fn.jquery.split(\".\")[0];\n                        if (3 <= jqueryMajor) {\n                            if (4 <= jqueryMajor) {\n                                console.warn(TAG + \"jquery-migrate for 3.0.0+ in use.\");\n                            }\n                            new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(4)]; (function () {\n                                new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(0)];}).catch(__webpack_require__.oe);\n                            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);\n                        }\n                        else {\n                            new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(0)];}).catch(__webpack_require__.oe);\n                        }\n                    }\n                },\n                fail: function (error) {\n                    console.error(TAG + \"error. CDP.initialize() failed.\");\n                    _dfInitialize.reject();\n                    _dfInitialize = $.Deferred();\n                },\n            });\n            return _dfInitialize.promise();\n        }\n        Framework.initialize = initialize;\n        /**\n         * \\~english\n         * Check for initialization status.\n         *\n         * @return {Boolean} true: initialized / false: uninitialized\n         *\n         * \\~japanese\n         * \n         *\n         * @return {Boolean} true:  / false: \n         */\n        function isInitialized() {\n            return \"resolved\" === _dfInitialize.state();\n        }\n        Framework.isInitialized = isInitialized;\n        /**\n         * \\~english\n         * Wait for initialization status.\n         *\n         * @return {IPromiseBase<void>}\n         *\n         * \\~japanese\n         * \n         *\n         * @return {IPromiseBase<void>}\n         */\n        function waitForInitialize() {\n            return _dfInitialize.promise();\n        }\n        Framework.waitForInitialize = waitForInitialize;\n        /**\n         * \\~english\n         * Register IOrientationChangedListener to framework.\n         *\n         * @param key      {String}                      [in] ID key\n         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance\n         *\n         * \\~japanese\n         * IOrientationChangedListener  Framework \n         *\n         * @param key      {String}                      [in] ID key\n         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance\n         */\n        function registerOrientationChangedListener(key, listener) {\n            _orientationListenerHolder[key] = listener;\n        }\n        Framework.registerOrientationChangedListener = registerOrientationChangedListener;\n        /**\n         * \\~english\n         * Unregister IOrientationChangedListener from framework.\n         *\n         * @param key {String} [in] ID key\n         *\n         * \\~japanese\n         * IOrientationChangedListener  Framework \n         *\n         * @param key {String} [in] ID key\n         */\n        function unregisterOrientationChangedListener(key) {\n            delete _orientationListenerHolder[key];\n        }\n        Framework.unregisterOrientationChangedListener = unregisterOrientationChangedListener;\n        /**\n         * \\~english\n         * Setup event handlers when after router initialized.\n         *\n         * @private\n         *\n         * \\~japanese\n         * . Router  Framework .\n         *\n         * @private\n         */\n        function setupEventHandlers() {\n            (function () {\n                var oldBackButtonHandler = CDP.setBackButtonHandler(null);\n                var baseBackButtonHandler = function (event) {\n                    if (_activePage && _activePage.onHardwareBackButton(event)) {\n                        // \n                        return;\n                    }\n                    else {\n                        oldBackButtonHandler(event);\n                    }\n                };\n                CDP.setBackButtonHandler(baseBackButtonHandler);\n            })();\n            (function () {\n                var oldRouteChangeHandler = CDP.Framework.setBeforeRouteChangeHandler(null);\n                var baseRouteChangeHandler = function () {\n                    if (_activePage) {\n                        return _activePage.onBeforeRouteChange();\n                    }\n                    else {\n                        return oldRouteChangeHandler();\n                    }\n                };\n                CDP.Framework.setBeforeRouteChangeHandler(baseRouteChangeHandler);\n            })();\n        }\n        Framework.setupEventHandlers = setupEventHandlers;\n        /**\n         * \\~english\n         * Setup active IPage instance.\n         *\n         * @private\n         * @param page {IPage} [in] IPage instance.\n         *\n         * \\~japanese\n         * active Page . Framework .\n         *\n         * @private\n         * @param page {IPage} [in] IPage instance.\n         */\n        function setActivePage(page) {\n            _activePage = page;\n            if (_activePage) {\n                _lastOrientation = Framework.getOrientation();\n            }\n        }\n        Framework.setActivePage = setActivePage;\n        /**\n         * \\~english\n         * Reterns framework default click event string.\n         *\n         * @private\n         *\n         * \\~japanese\n         * Framework \n         *\n         * @private\n         * @return {String} \"vclick\" / \"click\"\n         */\n        function getDefaultClickEvent() {\n            return Framework.Patch.s_vclickEvent;\n        }\n        Framework.getDefaultClickEvent = getDefaultClickEvent;\n        /**\n         * \\~english\n         * Get Config object.\n         *\n         * @private\n         * @return {FrameworkOptions} Config object.\n         *\n         * \\~japanese\n         * Config object \n         *\n         * @private\n         * @return {FrameworkOptions} Config object.\n         */\n        function getConfig(options) {\n            var defConfig = {\n                // for fail safe, default settings.\n                jquery: function () {\n                    $.support.cors = true;\n                    $.ajaxSetup({ cache: false });\n                    $.migrateMute = true;\n                },\n                jquerymobile: function () {\n                    $.mobile.allowCrossDomainPages = true;\n                    $.mobile.defaultPageTransition = \"none\";\n                    $.mobile.hashListeningEnabled = false;\n                    $.mobile.pushStateEnabled = false;\n                },\n                i18n: {},\n                applyPatch: true,\n                anchorVclick: true,\n            };\n            return $.extend({}, defConfig, CDP.Config, options);\n        }\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        // resize handler\n        $(window).on(\"resize\", function (event) {\n            var newOrientation = Framework.getOrientation();\n            if (_lastOrientation !== newOrientation) {\n                for (var key in _orientationListenerHolder) {\n                    _orientationListenerHolder[key].onOrientationChanged(newOrientation);\n                }\n                if (_activePage) {\n                    _activePage.onOrientationChanged(newOrientation);\n                }\n                _lastOrientation = newOrientation;\n            }\n        });\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        var Promise = CDP.Promise;\n        /**\n         * \\~english\n         * @class Page\n         * @brief Base class of all page unit.\n         *\n         * \\~japanese\n         * @class Page\n         * @brief \n         */\n        var Page = (function () {\n            //////////////////////////////////////////\n            // public methods\n            /**\n             * \\~english\n             * constructor\n             *\n             * @param _url    {String}               [in] page's URL\n             * @param _id     {String}               [in] page's ID\n             * @param options {PageConstructOptions} [in] options\n             *\n             * \\~japanese\n             * constructor\n             *\n             * @param _url    {String}               [in]  URL\n             * @param _id     {String}               [in]  ID\n             * @param options {PageConstructOptions} [in] \n             */\n            function Page(_url, _id, options) {\n                this._url = _url;\n                this._id = _id;\n                this.setup(options);\n            }\n            Object.defineProperty(Page.prototype, \"active\", {\n                //////////////////////////////////////////\n                // public accessor\n                get: function () { return !!this._$page && this._$page.hasClass(\"ui-page-active\"); },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"url\", {\n                get: function () { return this._url; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"id\", {\n                get: function () { return this._id; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$page\", {\n                get: function () { return this._$page; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$header\", {\n                get: function () { return this._$header; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$footer\", {\n                get: function () { return this._$footer; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"intent\", {\n                get: function () { return this._intent; },\n                set: function (newIntent) { this._intent = newIntent; this._intent._update = true; },\n                enumerable: true,\n                configurable: true\n            });\n            //////////////////////////////////////////\n            // public Event Handler\n            //! Orientation \n            Page.prototype.onOrientationChanged = function (newOrientation) {\n                if (this._owner) {\n                    this._owner.onOrientationChanged(newOrientation);\n                }\n            };\n            //! H/W Back Button \n            Page.prototype.onHardwareBackButton = function (event) {\n                if (this._owner) {\n                    return this._owner.onHardwareBackButton(event);\n                }\n                else {\n                    return false;\n                }\n            };\n            //! Router \"before route change\" \n            Page.prototype.onBeforeRouteChange = function () {\n                if (this._owner) {\n                    return this._owner.onBeforeRouteChange();\n                }\n                else {\n                    return Promise.resolve();\n                }\n            };\n            //! \n            Page.prototype.onCommand = function (event, kind) {\n                if (this._owner) {\n                    return this._owner.onCommand(event, kind);\n                }\n                else {\n                    return false;\n                }\n            };\n            //!  OnPageInit() \n            Page.prototype.onInitialize = function (event) {\n                if (this._owner) {\n                    this._owner.onInitialize(event);\n                }\n            };\n            //! jQM event: \"pagebeforecreate\" \n            Page.prototype.onPageBeforeCreate = function (event) {\n                if (this._owner) {\n                    this._owner.onPageBeforeCreate(event);\n                }\n            };\n            //! jQM event: \"pagecreate\" (:\"pageinit\") \n            Page.prototype.onPageInit = function (event) {\n                if (this._owner) {\n                    this._owner.onPageInit(event);\n                }\n            };\n            //! jQM event: \"pagebeforeshow\" \n            Page.prototype.onPageBeforeShow = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageBeforeShow(event, data);\n                }\n            };\n            //! jQM event: \"pagecontainershow\" (:\"pageshow\") \n            Page.prototype.onPageShow = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageShow(event, data);\n                }\n            };\n            //! jQM event: \"pagebeforehide\" \n            Page.prototype.onPageBeforeHide = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageBeforeHide(event, data);\n                }\n            };\n            //! jQM event: \"pagecontainerhide\" (:\"pagehide\") \n            Page.prototype.onPageHide = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageHide(event, data);\n                }\n            };\n            //! jQM event: \"pageremove\" \n            Page.prototype.onPageRemove = function (event) {\n                if (this._owner) {\n                    this._owner.onPageRemove(event);\n                }\n            };\n            //////////////////////////////////////////\n            // private methods\n            //! mixin \n            Page.prototype.setup = function (options) {\n                var _this = this;\n                // mixin destination \n                this._initialized = false;\n                this._intent = null;\n                // \n                var selector = \"#\" + this._id;\n                $(document)\n                    .off(\"pagebeforecreate\", selector)\n                    .on(\"pagebeforecreate\", selector, function (event) {\n                    _this._$page = $(selector).first();\n                    _this._$header = _this._$page.children(\":jqmData(role=header)\").first();\n                    _this._$footer = _this._$page.children(\":jqmData(role=footer)\").first();\n                    _this._$page\n                        .on(\"pagecreate\", function (event) {\n                        _this.pageInit(event);\n                    })\n                        .on(\"pagebeforeshow\", function (event, data) {\n                        _this.pageBeforeShow(event, data);\n                    })\n                        .on(\"pageshow\", function (event, data) {\n                        _this.pageShow(event, data);\n                    })\n                        .on(\"pagebeforehide\", function (event, data) {\n                        _this.pageBeforeHide(event, data);\n                    })\n                        .on(\"pagehide\", function (event, data) {\n                        _this.pageHide(event, data);\n                    })\n                        .on(\"pageremove\", function (event) {\n                        _this.pageRemove(event);\n                    });\n                    _this.pageBeforeCreate(event);\n                });\n                options = options || {};\n                // owner \n                this._owner = options.owner;\n                // intent \n                this._keepIntent = options.keepIntent;\n                // Router \n                if (null == options.route) {\n                    options.route = this._id;\n                }\n                Framework.Router.register(options.route, this._url, options.top, options.callback);\n            };\n            //! PageTransitionDirection \n            Page.prototype.getDirection = function () {\n                var activeIndex = Framework.Router.getJqmHistory().activeIndex;\n                var prevIndex = Framework.Router.getJqmHistory().previousIndex;\n                if (null == activeIndex || null == prevIndex) {\n                    return \"unknown\";\n                }\n                else if (prevIndex === activeIndex) {\n                    return \"same\";\n                }\n                else if (activeIndex < prevIndex) {\n                    return \"back\";\n                }\n                else {\n                    return \"forward\";\n                }\n            };\n            Page.prototype.pageBeforeCreate = function (event) {\n                this.onPageBeforeCreate(event);\n            };\n            Page.prototype.pageInit = function (event) {\n                if (!this._initialized) {\n                    this.onInitialize(event);\n                    this._initialized = true;\n                }\n                this.onPageInit(event);\n            };\n            Page.prototype.pageBeforeShow = function (event, data) {\n                Framework.setActivePage(this);\n                this._intent = Framework.Router.popIntent();\n                this.onPageBeforeShow(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageShow = function (event, data) {\n                this.onPageShow(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageBeforeHide = function (event, data) {\n                this.onPageBeforeHide(event, $.extend(data, { direction: this.getDirection() }));\n                if (null != this._intent && (this._keepIntent || this._intent._update)) {\n                    delete this._intent._update;\n                    Framework.Router.pushIntent(this._intent);\n                }\n                else if (Framework.Router.fromHashChanged() && Framework.Router.isInSubFlow()) {\n                    Framework.Router.pushIntent(this._intent);\n                }\n                this._intent = null;\n                Framework.setActivePage(null);\n            };\n            Page.prototype.pageHide = function (event, data) {\n                this.onPageHide(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageRemove = function (event) {\n                this.onPageRemove(event);\n                this._$page.off();\n                this._$page = null;\n                this._$header.off();\n                this._$header = null;\n                this._$footer.off();\n                this._$footer = null;\n            };\n            return Page;\n        }());\n        Framework.Page = Page;\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        /*\n         * jQM1.4 duplicate  \"pageshow\", \"pagehide\" \n         * http://jquerymobile.com/upgrade-guide/1.4/#navigation\n         *\n         * \n         * Forum \n         * https://github.com/jquery/jquery-mobile/issues/6865\n         *\n         * [] \n         *  - (1.4+) http://jqmtricks.wordpress.com/2014/03/26/jquery-mobile-page-events/\n         *  - (~1.3) http://dev.screw-axis.com/doc/jquery_mobile/resources/cheatsheet/\n         *\n         * \n         *\n         * \"pagehide\" \n         * DOM onPageHide() \n         *\n         * \n         * onPageBeforeHide()  post  onPageHide() ()\n         *\n         * 2015/03/25 :\n         * . jQM1.6 \n         *  jQM1.4  plugin  cdp.framework.jqm \n         *  https://github.com/arschmitz/jquery-mobile-onpage\n         *\n         * \n         * https://github.com/jquery/jquery-mobile/issues/7283#issuecomment-40746622\n         */\n        /*\n            // bind \"pagecontainershow\", and \"pagecontainerhide\".\n            (() => {\n                let $body: any = $(\"body\");\n                $(document)\n                    .on(\"pagecontainershow\", (event: JQueryEventObject, data: ShowEventData) => {\n                        if (0 < data.prevPage.length) {\n                            // \"pagecontainershow\"  \"pagecontainerhide\"  DOM \n                            let $prevpage = $(\"#\" + data.prevPage[0].id);\n                            $prevpage.trigger(\"_pagehide\", data);\n                        }\n                        // \"pagecontainershow\"  \"pageshow\" \n                        let pageId = $body.pagecontainer(\"getActivePage\").prop(\"id\");\n                        let $page = $(\"#\" + pageId);\n                        $page.trigger(\"_pageshow\", data);\n                    })\n                    .on(\"pagecontainerhide\", (event: JQueryEventObject, data: HideEventData) => {\n                        // \"pagecontainerhide\"  DOM page \n                        //let pageId = $body.pagecontainer('getActivePage').prop(\"id\");\n                        //let $page = $(\"#\" + pageId);\n                        //$page.trigger(\"_pagehide\", data);\n                    })\n                    .on(\"pagecontainertransition\", (event: JQueryEventObject, data: any) => {\n                        // \"pagecontainertransition\"  toPage \n                    })\n                ;\n            })();\n        */\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\nreturn CDP.Framework; }));\n\n}.call(window));\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n * jQuery Migrate - v3.0.1-hotfix - 2017-01-11\n * Copyright jQuery Foundation and other contributors\n */\n; (function (factory) {\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {\n            return factory($, window);\n        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof module === \"object\" && module.exports) {\n        // Node/CommonJS\n        // eslint-disable-next-line no-undef\n        module.exports = factory(require(\"jquery\"), window);\n    } else {\n        // Browser globals\n        factory(jQuery, window);\n    }\n})(function (jQuery, window) {\n    \"use strict\";\n\n    jQuery.migrateVersion = \"3.0.1-hotfix\"; // with hotfix\n\n    /* exported migrateWarn, migrateWarnFunc, migrateWarnProp */\n\n    (function () {\n\n        // Support: IE9 only\n        // IE9 only creates console object when dev tools are first opened\n        // Also, avoid Function#bind here to simplify PhantomJS usage\n        var log = window.console && window.console.log &&\n            function () {\n                window.console.log.apply(window.console, arguments);\n            },\n            rbadVersions = /^[12]\\./;\n\n        if (!log) {\n            return;\n        }\n\n        // Need jQuery 3.0.0+ and no older Migrate loaded\n        if (!jQuery || rbadVersions.test(jQuery.fn.jquery)) {\n            log(\"JQMIGRATE: jQuery 3.0.0+ REQUIRED\");\n        }\n        if (jQuery.migrateWarnings) {\n            log(\"JQMIGRATE: Migrate plugin loaded multiple times\");\n        }\n\n        // Show a message on the console so devs know we're active\n        if (!jQuery.migrateMute) {\n            log(\"JQMIGRATE: Migrate is installed\" +\n                (jQuery.migrateMute ? \"\" : \" with logging active\") +\n                \", version \" + jQuery.migrateVersion);\n        }\n    })();\n\n    var warnedAbout = {};\n\n    // List of warnings already given; public read only\n    jQuery.migrateWarnings = [];\n\n    // Set to false to disable traces that appear with warnings\n    if (jQuery.migrateTrace === undefined) {\n        jQuery.migrateTrace = true;\n    }\n\n    // Forget any warnings we've already given; public\n    jQuery.migrateReset = function () {\n        warnedAbout = {};\n        jQuery.migrateWarnings.length = 0;\n    };\n\n    function migrateWarn(msg) {\n        var console = window.console;\n        if (!warnedAbout[msg]) {\n            warnedAbout[msg] = true;\n            jQuery.migrateWarnings.push(msg);\n            if (console && console.warn && !jQuery.migrateMute) {\n                console.warn(\"JQMIGRATE: \" + msg);\n                if (jQuery.migrateTrace && console.trace) {\n                    console.trace();\n                }\n            }\n        }\n    }\n\n    function migrateWarnProp(obj, prop, value, msg) {\n        Object.defineProperty(obj, prop, {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                migrateWarn(msg);\n                return value;\n            },\n            set: function (newValue) {\n                migrateWarn(msg);\n                value = newValue;\n            }\n        });\n    }\n\n    function migrateWarnFunc(obj, prop, newFunc, msg) {\n        obj[prop] = function () {\n            migrateWarn(msg);\n            return newFunc.apply(this, arguments);\n        };\n    }\n\n    if (window.document.compatMode === \"BackCompat\") {\n        // JQuery has never supported or tested Quirks Mode\n        migrateWarn(\"jQuery is not compatible with Quirks Mode\");\n    }\n\n\n    var oldInit = jQuery.fn.init,\n        oldIsNumeric = jQuery.isNumeric,\n        oldFind = jQuery.find,\n        rattrHashTest = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/,\n        rattrHashGlob = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/g;\n\n    jQuery.fn.init = function (arg1) {\n        var args = Array.prototype.slice.call(arguments);\n\n        if (typeof arg1 === \"string\" && arg1 === \"#\") {\n            // JQuery( \"#\" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0\n            migrateWarn(\"jQuery( '#' ) is not a valid selector\");\n            args[0] = [];\n        }\n\n        return oldInit.apply(this, args);\n    };\n    jQuery.fn.init.prototype = jQuery.fn;\n\n    jQuery.find = function (selector) {\n        var args = Array.prototype.slice.call(arguments);\n\n        // Support: PhantomJS 1.x\n        // String#match fails to match when used with a //g RegExp, only on some strings\n        if (typeof selector === \"string\" && rattrHashTest.test(selector)) {\n            // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0\n            // First see if qS thinks it's a valid selector, if so avoid a false positive\n            try {\n                window.document.querySelector(selector);\n            } catch (err1) {\n                // Didn't *look* valid to qSA, warn and try quoting what we think is the value\n                selector = selector.replace(rattrHashGlob, function (_, attr, op, value) {\n                    return \"[\" + attr + op + \"\\\"\" + value + \"\\\"]\";\n                });\n\n                // If the regexp *may* have created an invalid selector, don't update it\n                // Note that there may be false alarms if selector uses jQuery extensions\n                try {\n                    window.document.querySelector(selector);\n                    migrateWarn(\"Attribute selector with '#' must be quoted: \" + args[0]);\n                    args[0] = selector;\n                } catch (err2) {\n                    migrateWarn(\"Attribute selector with '#' was not fixed: \" + args[0]);\n                }\n            }\n        }\n\n        return oldFind.apply(this, args);\n    };\n\n    // Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)\n    var findProp;\n    for (findProp in oldFind) {\n        if (Object.prototype.hasOwnProperty.call(oldFind, findProp)) {\n            jQuery.find[findProp] = oldFind[findProp];\n        }\n    }\n\n    // The number of elements contained in the matched element set\n    jQuery.fn.size = function () {\n        migrateWarn(\"jQuery.fn.size() is deprecated and removed; use the .length property\");\n        return this.length;\n    };\n\n    jQuery.parseJSON = function () {\n        migrateWarn(\"jQuery.parseJSON is deprecated; use JSON.parse\");\n        return JSON.parse.apply(null, arguments);\n    };\n\n    jQuery.isNumeric = function (val) {\n        // The jQuery 2.2.3 implementation of isNumeric\n        function isNumeric2(obj) {\n            var realStringObj = obj && obj.toString();\n            return !jQuery.isArray(obj) && (realStringObj - parseFloat(realStringObj) + 1) >= 0;\n        }\n\n        var newValue = oldIsNumeric(val),\n            oldValue = isNumeric2(val);\n\n        if (newValue !== oldValue) {\n            migrateWarn(\"jQuery.isNumeric() should not be called on constructed objects\");\n        }\n\n        return oldValue;\n    };\n\n    migrateWarnFunc(jQuery, \"unique\", jQuery.uniqueSort,\n        \"jQuery.unique is deprecated; use jQuery.uniqueSort\");\n\n    // Now jQuery.expr.pseudos is the standard incantation\n    migrateWarnProp(jQuery.expr, \"filters\", jQuery.expr.pseudos,\n        \"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos\");\n    migrateWarnProp(jQuery.expr, \":\", jQuery.expr.pseudos,\n        \"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos\");\n\n\n    var oldAjax = jQuery.ajax;\n\n    jQuery.ajax = function () {\n        var jQXHR = oldAjax.apply(this, arguments);\n\n        // Be sure we got a jQXHR (e.g., not sync)\n        if (jQXHR.promise) {\n            migrateWarnFunc(jQXHR, \"success\", jQXHR.done,\n                \"jQXHR.success is deprecated and removed\");\n            migrateWarnFunc(jQXHR, \"error\", jQXHR.fail,\n                \"jQXHR.error is deprecated and removed\");\n            migrateWarnFunc(jQXHR, \"complete\", jQXHR.always,\n                \"jQXHR.complete is deprecated and removed\");\n        }\n\n        return jQXHR;\n    };\n\n\n    var oldRemoveAttr = jQuery.fn.removeAttr,\n        oldToggleClass = jQuery.fn.toggleClass,\n        rmatchNonSpace = /\\S+/g;\n\n    jQuery.fn.removeAttr = function (name) {\n        var self = this;\n\n        jQuery.each(name.match(rmatchNonSpace), function (i, attr) {\n            if (jQuery.expr.match.bool.test(attr)) {\n                migrateWarn(\"jQuery.fn.removeAttr no longer sets boolean properties: \" + attr);\n                self.prop(attr, false);\n            }\n        });\n\n        return oldRemoveAttr.apply(this, arguments);\n    };\n\n    jQuery.fn.toggleClass = function (state) {\n        // Only deprecating no-args or single boolean arg\n        if (state !== undefined && typeof state !== \"boolean\") {\n            return oldToggleClass.apply(this, arguments);\n        }\n\n        migrateWarn(\"jQuery.fn.toggleClass( boolean ) is deprecated\");\n\n        // Toggle entire class name of each element\n        return this.each(function () {\n            var className = this.getAttribute && this.getAttribute(\"class\") || \"\";\n\n            if (className) {\n                jQuery.data(this, \"__className__\", className);\n            }\n\n            // If the element has a class name or if we're passed `false`,\n            // then remove the whole classname (if there was one, the above saved it).\n            // Otherwise bring back whatever was previously saved (if anything),\n            // falling back to the empty string if nothing was stored.\n            if (this.setAttribute) {\n                this.setAttribute(\"class\",\n                    className || state === false ?\n                    \"\" :\n                    jQuery.data(this, \"__className__\") || \"\"\n                );\n            }\n        });\n    };\n\n\n    var internalSwapCall = false;\n\n    // If this version of jQuery has .swap(), don't false-alarm on internal uses\n    if (jQuery.swap) {\n        jQuery.each([\"height\", \"width\", \"reliableMarginRight\"], function (_, name) {\n            var oldHook = jQuery.cssHooks[name] && jQuery.cssHooks[name].get;\n\n            if (oldHook) {\n                jQuery.cssHooks[name].get = function () {\n                    var ret;\n\n                    internalSwapCall = true;\n                    ret = oldHook.apply(this, arguments);\n                    internalSwapCall = false;\n                    return ret;\n                };\n            }\n        });\n    }\n\n    jQuery.swap = function (elem, options, callback, args) {\n        var ret, name,\n            old = {};\n\n        if (!internalSwapCall) {\n            migrateWarn(\"jQuery.swap() is undocumented and deprecated\");\n        }\n\n        // Remember the old values, and insert the new ones\n        for (name in options) {\n            old[name] = elem.style[name];\n            elem.style[name] = options[name];\n        }\n\n        ret = callback.apply(elem, args || []);\n\n        // Revert the old values\n        for (name in options) {\n            elem.style[name] = old[name];\n        }\n\n        return ret;\n    };\n\n    var oldData = jQuery.data;\n\n    jQuery.data = function (elem, name, value) {\n        var curData;\n\n        // Name can be an object, and each entry in the object is meant to be set as data\n        if (name && typeof name === \"object\" && arguments.length === 2) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            var sameKeys = {};\n            for (var key in name) {\n                if (key !== jQuery.camelCase(key)) {\n                    migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + key);\n                    curData[key] = name[key];\n                } else {\n                    sameKeys[key] = name[key];\n                }\n            }\n\n            oldData.call(this, elem, sameKeys);\n\n            return name;\n        }\n\n        // If the name is transformed, look for the un-transformed name in the data object\n        if (name && typeof name === \"string\" && name !== jQuery.camelCase(name)) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            if (curData && name in curData) {\n                migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + name);\n                if (arguments.length > 2) {\n                    curData[name] = value;\n                }\n                return curData[name];\n            }\n        }\n\n        return oldData.apply(this, arguments);\n    };\n\n    var oldTweenRun = jQuery.Tween.prototype.run;\n\n    jQuery.Tween.prototype.run = function () {\n        if (jQuery.easing[this.easing].length > 1) {\n            migrateWarn(\n                \"easing function \" +\n                \"\\\"jQuery.easing.\" + this.easing.toString() +\n                \"\\\" should use only first argument\"\n            );\n\n            var oldEasing = jQuery.easing[this.easing];\n            jQuery.easing[this.easing] = function (percent) {\n                return oldEasing.call(jQuery.easing, percent, percent, 0, 1, 1);\n            }.bind(this);\n        }\n\n        oldTweenRun.apply(this, arguments);\n    };\n\n    jQuery.fx.interval = jQuery.fx.interval || 13;\n\n    // Support: IE9, Android <=4.4\n    // Avoid false positives on browsers that lack rAF\n    if (window.requestAnimationFrame) {\n        migrateWarnProp(jQuery.fx, \"interval\", jQuery.fx.interval,\n            \"jQuery.fx.interval is deprecated\");\n    }\n\n    var oldLoad = jQuery.fn.load,\n        oldEventAdd = jQuery.event.add,\n        originalFix = jQuery.event.fix;\n\n    jQuery.event.props = [];\n    jQuery.event.fixHooks = {};\n\n    migrateWarnProp(jQuery.event.props, \"concat\", jQuery.event.props.concat,\n        \"jQuery.event.props.concat() is deprecated and removed\");\n\n    jQuery.event.fix = function (originalEvent) {\n        var event,\n            type = originalEvent.type,\n            fixHook = this.fixHooks[type],\n            props = jQuery.event.props;\n\n        if (props.length) {\n            migrateWarn(\"jQuery.event.props are deprecated and removed: \" + props.join());\n            while (props.length) {\n                jQuery.event.addProp(props.pop());\n            }\n        }\n\n        if (fixHook && !fixHook._migrated_) {\n            fixHook._migrated_ = true;\n            migrateWarn(\"jQuery.event.fixHooks are deprecated and removed: \" + type);\n            if ((props = fixHook.props) && props.length) {\n                while (props.length) {\n                    jQuery.event.addProp(props.pop());\n                }\n            }\n        }\n\n        event = originalFix.call(this, originalEvent);\n\n        return fixHook && fixHook.filter ? fixHook.filter(event, originalEvent) : event;\n    };\n\n    jQuery.event.add = function (elem, types) {\n        // This misses the multiple-types case but that seems awfully rare\n        if (elem === window && types === \"load\" && window.document.readyState === \"complete\") {\n            migrateWarn(\"jQuery(window).on('load'...) called after load event occurred\");\n        }\n        return oldEventAdd.apply(this, arguments);\n    };\n\n    jQuery.each([\"load\", \"unload\", \"error\"], function (_, name) {\n\n        jQuery.fn[name] = function () {\n            var args = Array.prototype.slice.call(arguments, 0);\n\n            // If this is an ajax load() the first arg should be the string URL;\n            // technically this could also be the \"Anything\" arg of the event .load()\n            // which just goes to show why this dumb signature has been deprecated!\n            // jQuery custom builds that exclude the Ajax module justifiably die here.\n            if (name === \"load\" && typeof args[0] === \"string\") {\n                return oldLoad.apply(this, args);\n            }\n\n            migrateWarn(\"jQuery.fn.\" + name + \"() is deprecated\");\n\n            args.splice(0, 0, name);\n            if (arguments.length) {\n                return this.on.apply(this, args);\n            }\n\n            // Use .triggerHandler here because:\n            // - load and unload events don't need to bubble, only applied to window or image\n            // - error event should not bubble to window, although it does pre-1.7\n            // See http://bugs.jquery.com/ticket/11820\n            this.triggerHandler.apply(this, args);\n            return this;\n        };\n\n    });\n\n    // Trigger \"ready\" event only once, on document ready\n    jQuery(function () {\n        jQuery(window.document).triggerHandler(\"ready\");\n    });\n\n    jQuery.event.special.ready = {\n        setup: function () {\n            if (this === window.document) {\n                migrateWarn(\"'ready' event is deprecated\");\n            }\n        }\n    };\n\n    jQuery.fn.extend({\n        bind: function (types, data, fn) {\n            migrateWarn(\"jQuery.fn.bind() is deprecated\");\n            return this.on(types, null, data, fn);\n        },\n        unbind: function (types, fn) {\n            migrateWarn(\"jQuery.fn.unbind() is deprecated\");\n            return this.off(types, null, fn);\n        },\n        delegate: function (selector, types, data, fn) {\n            migrateWarn(\"jQuery.fn.delegate() is deprecated\");\n            return this.on(types, selector, data, fn);\n        },\n        undelegate: function (selector, types, fn) {\n            migrateWarn(\"jQuery.fn.undelegate() is deprecated\");\n            return arguments.length === 1 ?\n                this.off(selector, \"**\") :\n                this.off(types, selector || \"**\", fn);\n        }\n    });\n\n\n    var oldOffset = jQuery.fn.offset;\n\n    jQuery.fn.offset = function () {\n        var docElem,\n            elem = this[0],\n            origin = { top: 0, left: 0 };\n\n        if (!elem || !elem.nodeType) {\n            migrateWarn(\"jQuery.fn.offset() requires a valid DOM element\");\n            return origin;\n        }\n\n        docElem = (elem.ownerDocument || window.document).documentElement;\n        if (!jQuery.contains(docElem, elem)) {\n            migrateWarn(\"jQuery.fn.offset() requires an element connected to a document\");\n            return origin;\n        }\n\n        return oldOffset.apply(this, arguments);\n    };\n\n\n    var oldParam = jQuery.param;\n\n    jQuery.param = function (data, traditional) {\n        var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\n        if (traditional === undefined && ajaxTraditional) {\n            migrateWarn(\"jQuery.param() no longer uses jQuery.ajaxSettings.traditional\");\n            traditional = ajaxTraditional;\n        }\n\n        return oldParam.call(this, data, traditional);\n    };\n\n    var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\n\n    jQuery.fn.andSelf = function () {\n        migrateWarn(\"jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()\");\n        return oldSelf.apply(this, arguments);\n    };\n\n\n    var oldDeferred = jQuery.Deferred,\n        tuples = [\n            // Action, add listener, callbacks, .then handlers, final state\n            [\"resolve\", \"done\", jQuery.Callbacks(\"once memory\"),\n                jQuery.Callbacks(\"once memory\"), \"resolved\"],\n            [\"reject\", \"fail\", jQuery.Callbacks(\"once memory\"),\n                jQuery.Callbacks(\"once memory\"), \"rejected\"],\n            [\"notify\", \"progress\", jQuery.Callbacks(\"memory\"),\n                jQuery.Callbacks(\"memory\")]\n        ];\n\n    jQuery.Deferred = function (func) {\n        var deferred = oldDeferred(),\n            promise = deferred.promise();\n\n        deferred.pipe = promise.pipe = function ( /* fnDone, fnFail, fnProgress */) {\n            var fns = arguments;\n\n            migrateWarn(\"deferred.pipe() is deprecated\");\n\n            return jQuery.Deferred(function (newDefer) {\n                jQuery.each(tuples, function (i, tuple) {\n                    var fn = jQuery.isFunction(fns[i]) && fns[i];\n\n                    // Deferred.done(function() { bind to newDefer or newDefer.resolve })\n                    // deferred.fail(function() { bind to newDefer or newDefer.reject })\n                    // deferred.progress(function() { bind to newDefer or newDefer.notify })\n                    deferred[tuple[1]](function () {\n                        var returned = fn && fn.apply(this, arguments);\n                        if (returned && jQuery.isFunction(returned.promise)) {\n                            returned.promise()\n                                .done(newDefer.resolve)\n                                .fail(newDefer.reject)\n                                .progress(newDefer.notify);\n                        } else {\n                            newDefer[tuple[0] + \"With\"](\n                                this === promise ? newDefer.promise() : this,\n                                fn ? [returned] : arguments\n                            );\n                        }\n                    });\n                });\n                fns = null;\n            }).promise();\n\n        };\n\n        if (func) {\n            func.call(deferred, deferred);\n        }\n\n        return deferred;\n    };\n\n\n    return jQuery;\n});\n\n}.call(window));\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA0NTRjMzk5YjVjY2Q5ZWMyNjc1NiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5Lm1vYmlsZS5qcyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL1BsYXRmb3JtLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGF0Y2gudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9PcmllbnRhdGlvbi50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0ludGVyZmFjZXMudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Sb3V0ZXIudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Db3JlQVBJLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGFnZS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5pMThuXCIsXCJjb21tb25qczJcIjpcImNkcC5pMThuXCIsXCJhbWRcIjpcImNkcC5pMThuXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbC8ge1wicm9vdFwiOlwiQmFja2JvbmVcIixcImNvbW1vbmpzXCI6XCJiYWNrYm9uZVwiLFwiY29tbW9uanMyXCI6XCJiYWNrYm9uZVwiLFwiYW1kXCI6XCJiYWNrYm9uZVwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5LW1pZ3JhdGUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsLyB7XCJyb290XCI6XCJqUXVlcnlcIixcImNvbW1vbmpzXCI6XCJqcXVlcnlcIixcImNvbW1vbmpzMlwiOlwianF1ZXJ5XCIsXCJhbWRcIjpcImpxdWVyeVwifSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7O0FDN0RBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFBQTtBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7Ozs7OztBQU1BO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5QkFBeUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEUsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJCQUEyQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCOztBQUUvQjtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7O0FBSUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsV0FBVyxFQUFFO0FBQ2xGLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHVDQUF1QztBQUN2Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOzs7O0FBSUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBLGVBQWUsWUFBWTtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZDQUE2QyxTQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxlQUFlO0FBQ2Y7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFlBQVksOEJBQThCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLHFCQUFxQjtBQUMxRixLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdFQUFnRSx5REFBeUQ7QUFDekgsbUVBQW1FLHlEQUF5RDtBQUM1SDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7QUFLRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOENBQThDOztBQUUvRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGlFQUFpRSxrQkFBa0I7QUFDbkYsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyx1Q0FBdUM7QUFDL0UsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvQ0FBb0M7O0FBRS9EO0FBQ0EsYUFBYSxvQ0FBb0M7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIscUNBQXFDO0FBQ2hFLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLGdFQUFnRTtBQUN2RjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQyxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZCQUE2QixLQUFLOztBQUUxQztBQUNBLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFdBQVc7QUFDbEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixzQkFBc0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsMkRBQTJEO0FBQ2xGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtB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O0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLGdEQUFnRDtBQUNuRSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUMsYUFBYTtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsV0FBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSw4Q0FBOEMsa0JBQWtCO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHVDQUF1QztBQUM5RCxxQ0FBcUMsZ0NBQWdDOztBQUVyRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLDRGQUE0RjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLHVDQUF1QztBQUN2QztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtDQUErQztBQUMvQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsMEJBQTBCLDhCQUE4QjtBQUN4RCwrQ0FBK0MsNEJBQTRCO0FBQzNFO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUosaUNBQWlDLHlCQUF5QjtBQUMxRCxzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLGdDQUFnQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsc0NBQXNDO0FBQ2xFLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxhQUFhLDZCQUE2QjtBQUMxQzs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxpQ0FBaUMsRUFBRTs7QUFFeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixnREFBZ0Q7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkJBQTJCLGlCQUFpQjs7QUFFNUM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLElBQUkscUNBQXFDO0FBQ3pDLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrQkFBK0I7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSw0QkFBNEIsa0NBQWtDOztBQUU5RDtBQUNBLDJCQUEyQixrQ0FBa0M7O0FBRTdEO0FBQ0E7QUFDQSxnQ0FBZ0MsbUNBQW1DO0FBQ25FOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsc0JBQXNCLG9EQUFvRDtBQUMxRTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBLGdCQUFnQix1QkFBdUI7O0FBRXZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQixvQkFBb0I7QUFDcEM7QUFDQTs7QUFFQTtBQUNBLElBQUksNkNBQTZDOztBQUVqRDtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qzs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0Esb0RBQW9ELHlCQUF5QjtBQUM3RSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkRBQTJEOztBQUUzRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUNBQXlDO0FBQ3JFO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSwwQkFBMEIsc0NBQXNDO0FBQ2hFLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtDQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdEQUFnRCxhQUFhLEVBQUU7QUFDL0QsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IseUJBQXlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRCwwQkFBMEIsMkJBQTJCOztBQUVyRDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0NBQXdDO0FBQ3hEO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOzs7QUFHTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlELHVDQUF1QztBQUN4RixpREFBaUQsc0NBQXNDO0FBQ3ZGLHFEQUFxRCxzQ0FBc0M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQSxhQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBLENBQUM7O0FBRUQsQ0FBQyxlOzs7Ozs7QUMxbEJELCtDIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiY2RwLmkxOG5cIiksIHJlcXVpcmUoXCJiYWNrYm9uZVwiKSwgcmVxdWlyZShcImpxdWVyeVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJjZHAuaTE4blwiLCBcImJhY2tib25lXCIsIFwianF1ZXJ5XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkNEUFwiXSA9IGZhY3RvcnkocmVxdWlyZShcImNkcC5pMThuXCIpLCByZXF1aXJlKFwiYmFja2JvbmVcIiksIHJlcXVpcmUoXCJqcXVlcnlcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkNEUFwiXSA9IGZhY3Rvcnkocm9vdFtcIkNEUFwiXSwgcm9vdFtcIkJhY2tib25lXCJdLCByb290W1wialF1ZXJ5XCJdKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNDU0YzM5OWI1Y2NkOWVjMjY3NTYiLCIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG4oZnVuY3Rpb24oKSB7XG5cbi8qIVxyXG4qIGpRdWVyeSBNb2JpbGUgMS40LjVcclxuKiBHaXQgSEVBRCBoYXNoOiA2OGU1NWU3OGIyOTI2MzRkMzk5MWM3OTVmMDZmNWUzN2E1MTJkZWNjIDw+IERhdGU6IEZyaSBPY3QgMzEgMjAxNCAxNzozMzozMCBVVENcclxuKiBodHRwOi8vanF1ZXJ5bW9iaWxlLmNvbVxyXG4qXHJcbiogQ29weXJpZ2h0IDIwMTAsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyY29udHJpYnV0b3JzXHJcbiogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4qIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuKlxyXG4qL1xyXG5cclxuXHJcbihmdW5jdGlvbiAoIHJvb3QsIGRvYywgZmFjdG9yeSApIHtcclxuXHRpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xyXG5cdFx0Ly8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxyXG5cdFx0ZGVmaW5lKCBbIFwianF1ZXJ5XCIgXSwgZnVuY3Rpb24gKCAkICkge1xyXG5cdFx0XHRmYWN0b3J5KCAkLCByb290LCBkb2MgKTtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlO1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG5cdFx0ZmFjdG9yeSggcm9vdC5qUXVlcnksIHJvb3QsIGRvYyApO1xyXG5cdH1cclxufSggdGhpcywgZG9jdW1lbnQsIGZ1bmN0aW9uICggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XHJcbihmdW5jdGlvbiggJCApIHtcclxuXHQkLm1vYmlsZSA9IHt9O1xyXG59KCBqUXVlcnkgKSk7XHJcblxyXG4vKiFcclxuICogalF1ZXJ5IFVJIENvcmUgYzBhYjcxMDU2YjkzNjYyN2U4YTc4MjFmMDNjMDQ0YWVjNjI4MGE0MFxyXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqXHJcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvXHJcbiAqL1xyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1dWlkID0gMCxcclxuXHRydW5pcXVlSWQgPSAvXnVpLWlkLVxcZCskLztcclxuXHJcbi8vICQudWkgbWlnaHQgZXhpc3QgZnJvbSBjb21wb25lbnRzIHdpdGggbm8gZGVwZW5kZW5jaWVzLCBlLmcuLCAkLnVpLnBvc2l0aW9uXHJcbiQudWkgPSAkLnVpIHx8IHt9O1xyXG5cclxuJC5leHRlbmQoICQudWksIHtcclxuXHR2ZXJzaW9uOiBcImMwYWI3MTA1NmI5MzY2MjdlOGE3ODIxZjAzYzA0NGFlYzYyODBhNDBcIixcclxuXHJcblx0a2V5Q29kZToge1xyXG5cdFx0QkFDS1NQQUNFOiA4LFxyXG5cdFx0Q09NTUE6IDE4OCxcclxuXHRcdERFTEVURTogNDYsXHJcblx0XHRET1dOOiA0MCxcclxuXHRcdEVORDogMzUsXHJcblx0XHRFTlRFUjogMTMsXHJcblx0XHRFU0NBUEU6IDI3LFxyXG5cdFx0SE9NRTogMzYsXHJcblx0XHRMRUZUOiAzNyxcclxuXHRcdFBBR0VfRE9XTjogMzQsXHJcblx0XHRQQUdFX1VQOiAzMyxcclxuXHRcdFBFUklPRDogMTkwLFxyXG5cdFx0UklHSFQ6IDM5LFxyXG5cdFx0U1BBQ0U6IDMyLFxyXG5cdFx0VEFCOiA5LFxyXG5cdFx0VVA6IDM4XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIHBsdWdpbnNcclxuJC5mbi5leHRlbmQoe1xyXG5cdGZvY3VzOiAoZnVuY3Rpb24oIG9yaWcgKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGRlbGF5LCBmbiApIHtcclxuXHRcdFx0cmV0dXJuIHR5cGVvZiBkZWxheSA9PT0gXCJudW1iZXJcIiA/XHJcblx0XHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0JCggZWxlbSApLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdGlmICggZm4gKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm4uY2FsbCggZWxlbSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCBkZWxheSApO1xyXG5cdFx0XHRcdH0pIDpcclxuXHRcdFx0XHRvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdH07XHJcblx0fSkoICQuZm4uZm9jdXMgKSxcclxuXHJcblx0c2Nyb2xsUGFyZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzY3JvbGxQYXJlbnQ7XHJcblx0XHRpZiAoKCQudWkuaWUgJiYgKC8oc3RhdGljfHJlbGF0aXZlKS8pLnRlc3QodGhpcy5jc3MoXCJwb3NpdGlvblwiKSkpIHx8ICgvYWJzb2x1dGUvKS50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpKSB7XHJcblx0XHRcdHNjcm9sbFBhcmVudCA9IHRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gKC8ocmVsYXRpdmV8YWJzb2x1dGV8Zml4ZWQpLykudGVzdCgkLmNzcyh0aGlzLFwicG9zaXRpb25cIikpICYmICgvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcyxcIm92ZXJmbG93XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy15XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy14XCIpKTtcclxuXHRcdFx0fSkuZXEoMCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICgvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcyxcIm92ZXJmbG93XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy15XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy14XCIpKTtcclxuXHRcdFx0fSkuZXEoMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuICggL2ZpeGVkLyApLnRlc3QoIHRoaXMuY3NzKCBcInBvc2l0aW9uXCIpICkgfHwgIXNjcm9sbFBhcmVudC5sZW5ndGggPyAkKCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApIDogc2Nyb2xsUGFyZW50O1xyXG5cdH0sXHJcblxyXG5cdHVuaXF1ZUlkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggIXRoaXMuaWQgKSB7XHJcblx0XHRcdFx0dGhpcy5pZCA9IFwidWktaWQtXCIgKyAoKyt1dWlkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0cmVtb3ZlVW5pcXVlSWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBydW5pcXVlSWQudGVzdCggdGhpcy5pZCApICkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmVBdHRyKCBcImlkXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIHNlbGVjdG9yc1xyXG5mdW5jdGlvbiBmb2N1c2FibGUoIGVsZW1lbnQsIGlzVGFiSW5kZXhOb3ROYU4gKSB7XHJcblx0dmFyIG1hcCwgbWFwTmFtZSwgaW1nLFxyXG5cdFx0bm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKCBcImFyZWFcIiA9PT0gbm9kZU5hbWUgKSB7XHJcblx0XHRtYXAgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0XHRtYXBOYW1lID0gbWFwLm5hbWU7XHJcblx0XHRpZiAoICFlbGVtZW50LmhyZWYgfHwgIW1hcE5hbWUgfHwgbWFwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwibWFwXCIgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGltZyA9ICQoIFwiaW1nW3VzZW1hcD0jXCIgKyBtYXBOYW1lICsgXCJdXCIgKVswXTtcclxuXHRcdHJldHVybiAhIWltZyAmJiB2aXNpYmxlKCBpbWcgKTtcclxuXHR9XHJcblx0cmV0dXJuICggL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KCBub2RlTmFtZSApID9cclxuXHRcdCFlbGVtZW50LmRpc2FibGVkIDpcclxuXHRcdFwiYVwiID09PSBub2RlTmFtZSA/XHJcblx0XHRcdGVsZW1lbnQuaHJlZiB8fCBpc1RhYkluZGV4Tm90TmFOIDpcclxuXHRcdFx0aXNUYWJJbmRleE5vdE5hTikgJiZcclxuXHRcdC8vIHRoZSBlbGVtZW50IGFuZCBhbGwgb2YgaXRzIGFuY2VzdG9ycyBtdXN0IGJlIHZpc2libGVcclxuXHRcdHZpc2libGUoIGVsZW1lbnQgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdmlzaWJsZSggZWxlbWVudCApIHtcclxuXHRyZXR1cm4gJC5leHByLmZpbHRlcnMudmlzaWJsZSggZWxlbWVudCApICYmXHJcblx0XHQhJCggZWxlbWVudCApLnBhcmVudHMoKS5hZGRCYWNrKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5jc3MoIHRoaXMsIFwidmlzaWJpbGl0eVwiICkgPT09IFwiaGlkZGVuXCI7XHJcblx0XHR9KS5sZW5ndGg7XHJcbn1cclxuXHJcbiQuZXh0ZW5kKCAkLmV4cHJbIFwiOlwiIF0sIHtcclxuXHRkYXRhOiAkLmV4cHIuY3JlYXRlUHNldWRvID9cclxuXHRcdCQuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24oIGRhdGFOYW1lICkge1xyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XHJcblx0XHRcdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBkYXRhTmFtZSApO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSkgOlxyXG5cdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBpLCBtYXRjaCApIHtcclxuXHRcdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBtYXRjaFsgMyBdICk7XHJcblx0XHR9LFxyXG5cclxuXHRmb2N1c2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0cmV0dXJuIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzTmFOKCAkLmF0dHIoIGVsZW1lbnQsIFwidGFiaW5kZXhcIiApICkgKTtcclxuXHR9LFxyXG5cclxuXHR0YWJiYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR2YXIgdGFiSW5kZXggPSAkLmF0dHIoIGVsZW1lbnQsIFwidGFiaW5kZXhcIiApLFxyXG5cdFx0XHRpc1RhYkluZGV4TmFOID0gaXNOYU4oIHRhYkluZGV4ICk7XHJcblx0XHRyZXR1cm4gKCBpc1RhYkluZGV4TmFOIHx8IHRhYkluZGV4ID49IDAgKSAmJiBmb2N1c2FibGUoIGVsZW1lbnQsICFpc1RhYkluZGV4TmFOICk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcbmlmICggISQoIFwiPGE+XCIgKS5vdXRlcldpZHRoKCAxICkuanF1ZXJ5ICkge1xyXG5cdCQuZWFjaCggWyBcIldpZHRoXCIsIFwiSGVpZ2h0XCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XHJcblx0XHR2YXIgc2lkZSA9IG5hbWUgPT09IFwiV2lkdGhcIiA/IFsgXCJMZWZ0XCIsIFwiUmlnaHRcIiBdIDogWyBcIlRvcFwiLCBcIkJvdHRvbVwiIF0sXHJcblx0XHRcdHR5cGUgPSBuYW1lLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdG9yaWcgPSB7XHJcblx0XHRcdFx0aW5uZXJXaWR0aDogJC5mbi5pbm5lcldpZHRoLFxyXG5cdFx0XHRcdGlubmVySGVpZ2h0OiAkLmZuLmlubmVySGVpZ2h0LFxyXG5cdFx0XHRcdG91dGVyV2lkdGg6ICQuZm4ub3V0ZXJXaWR0aCxcclxuXHRcdFx0XHRvdXRlckhlaWdodDogJC5mbi5vdXRlckhlaWdodFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZHVjZSggZWxlbSwgc2l6ZSwgYm9yZGVyLCBtYXJnaW4gKSB7XHJcblx0XHRcdCQuZWFjaCggc2lkZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyB0aGlzICkgKSB8fCAwO1xyXG5cdFx0XHRcdGlmICggYm9yZGVyICkge1xyXG5cdFx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJib3JkZXJcIiArIHRoaXMgKyBcIldpZHRoXCIgKSApIHx8IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggbWFyZ2luICkge1xyXG5cdFx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJtYXJnaW5cIiArIHRoaXMgKSApIHx8IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHNpemU7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5mblsgXCJpbm5lclwiICsgbmFtZSBdID0gZnVuY3Rpb24oIHNpemUgKSB7XHJcblx0XHRcdGlmICggc2l6ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHJldHVybiBvcmlnWyBcImlubmVyXCIgKyBuYW1lIF0uY2FsbCggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5jc3MoIHR5cGUsIHJlZHVjZSggdGhpcywgc2l6ZSApICsgXCJweFwiICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmZuWyBcIm91dGVyXCIgKyBuYW1lXSA9IGZ1bmN0aW9uKCBzaXplLCBtYXJnaW4gKSB7XHJcblx0XHRcdGlmICggdHlwZW9mIHNpemUgIT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG9yaWdbIFwib3V0ZXJcIiArIG5hbWUgXS5jYWxsKCB0aGlzLCBzaXplICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcykuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUsIHRydWUsIG1hcmdpbiApICsgXCJweFwiICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHR9KTtcclxufVxyXG5cclxuLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuaWYgKCAhJC5mbi5hZGRCYWNrICkge1xyXG5cdCQuZm4uYWRkQmFjayA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcclxuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XHJcblx0XHRcdHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoIHNlbGVjdG9yIClcclxuXHRcdCk7XHJcblx0fTtcclxufVxyXG5cclxuLy8gc3VwcG9ydDogalF1ZXJ5IDEuNi4xLCAxLjYuMiAoaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTQxMylcclxuaWYgKCAkKCBcIjxhPlwiICkuZGF0YSggXCJhLWJcIiwgXCJhXCIgKS5yZW1vdmVEYXRhKCBcImEtYlwiICkuZGF0YSggXCJhLWJcIiApICkge1xyXG5cdCQuZm4ucmVtb3ZlRGF0YSA9IChmdW5jdGlvbiggcmVtb3ZlRGF0YSApIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbigga2V5ICkge1xyXG5cdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlbW92ZURhdGEuY2FsbCggdGhpcywgJC5jYW1lbENhc2UoIGtleSApICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlbW92ZURhdGEuY2FsbCggdGhpcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKCAkLmZuLnJlbW92ZURhdGEgKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIGRlcHJlY2F0ZWRcclxuJC51aS5pZSA9ICEhL21zaWUgW1xcdy5dKy8uZXhlYyggbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpICk7XHJcblxyXG4kLnN1cHBvcnQuc2VsZWN0c3RhcnQgPSBcIm9uc2VsZWN0c3RhcnRcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcbiQuZm4uZXh0ZW5kKHtcclxuXHRkaXNhYmxlU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmJpbmQoICggJC5zdXBwb3J0LnNlbGVjdHN0YXJ0ID8gXCJzZWxlY3RzdGFydFwiIDogXCJtb3VzZWRvd25cIiApICtcclxuXHRcdFx0XCIudWktZGlzYWJsZVNlbGVjdGlvblwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLnVuYmluZCggXCIudWktZGlzYWJsZVNlbGVjdGlvblwiICk7XHJcblx0fSxcclxuXHJcblx0ekluZGV4OiBmdW5jdGlvbiggekluZGV4ICkge1xyXG5cdFx0aWYgKCB6SW5kZXggIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY3NzKCBcInpJbmRleFwiLCB6SW5kZXggKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xyXG5cdFx0XHR2YXIgZWxlbSA9ICQoIHRoaXNbIDAgXSApLCBwb3NpdGlvbiwgdmFsdWU7XHJcblx0XHRcdHdoaWxlICggZWxlbS5sZW5ndGggJiYgZWxlbVsgMCBdICE9PSBkb2N1bWVudCApIHtcclxuXHRcdFx0XHQvLyBJZ25vcmUgei1pbmRleCBpZiBwb3NpdGlvbiBpcyBzZXQgdG8gYSB2YWx1ZSB3aGVyZSB6LWluZGV4IGlzIGlnbm9yZWQgYnkgdGhlIGJyb3dzZXJcclxuXHRcdFx0XHQvLyBUaGlzIG1ha2VzIGJlaGF2aW9yIG9mIHRoaXMgZnVuY3Rpb24gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnNcclxuXHRcdFx0XHQvLyBXZWJLaXQgYWx3YXlzIHJldHVybnMgYXV0byBpZiB0aGUgZWxlbWVudCBpcyBwb3NpdGlvbmVkXHJcblx0XHRcdFx0cG9zaXRpb24gPSBlbGVtLmNzcyggXCJwb3NpdGlvblwiICk7XHJcblx0XHRcdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcInJlbGF0aXZlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHRcdC8vIElFIHJldHVybnMgMCB3aGVuIHpJbmRleCBpcyBub3Qgc3BlY2lmaWVkXHJcblx0XHRcdFx0XHQvLyBvdGhlciBicm93c2VycyByZXR1cm4gYSBzdHJpbmdcclxuXHRcdFx0XHRcdC8vIHdlIGlnbm9yZSB0aGUgY2FzZSBvZiBuZXN0ZWQgZWxlbWVudHMgd2l0aCBhbiBleHBsaWNpdCB2YWx1ZSBvZiAwXHJcblx0XHRcdFx0XHQvLyA8ZGl2IHN0eWxlPVwiei1pbmRleDogLTEwO1wiPjxkaXYgc3R5bGU9XCJ6LWluZGV4OiAwO1wiPjwvZGl2PjwvZGl2PlxyXG5cdFx0XHRcdFx0dmFsdWUgPSBwYXJzZUludCggZWxlbS5jc3MoIFwiekluZGV4XCIgKSwgMTAgKTtcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCB2YWx1ZSApICYmIHZhbHVlICE9PSAwICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsZW0gPSBlbGVtLnBhcmVudCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIDA7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vICQudWkucGx1Z2luIGlzIGRlcHJlY2F0ZWQuIFVzZSAkLndpZGdldCgpIGV4dGVuc2lvbnMgaW5zdGVhZC5cclxuJC51aS5wbHVnaW4gPSB7XHJcblx0YWRkOiBmdW5jdGlvbiggbW9kdWxlLCBvcHRpb24sIHNldCApIHtcclxuXHRcdHZhciBpLFxyXG5cdFx0XHRwcm90byA9ICQudWlbIG1vZHVsZSBdLnByb3RvdHlwZTtcclxuXHRcdGZvciAoIGkgaW4gc2V0ICkge1xyXG5cdFx0XHRwcm90by5wbHVnaW5zWyBpIF0gPSBwcm90by5wbHVnaW5zWyBpIF0gfHwgW107XHJcblx0XHRcdHByb3RvLnBsdWdpbnNbIGkgXS5wdXNoKCBbIG9wdGlvbiwgc2V0WyBpIF0gXSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0Y2FsbDogZnVuY3Rpb24oIGluc3RhbmNlLCBuYW1lLCBhcmdzLCBhbGxvd0Rpc2Nvbm5lY3RlZCApIHtcclxuXHRcdHZhciBpLFxyXG5cdFx0XHRzZXQgPSBpbnN0YW5jZS5wbHVnaW5zWyBuYW1lIF07XHJcblxyXG5cdFx0aWYgKCAhc2V0ICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhYWxsb3dEaXNjb25uZWN0ZWQgJiYgKCAhaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUgfHwgaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUubm9kZVR5cGUgPT09IDExICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0aWYgKCBpbnN0YW5jZS5vcHRpb25zWyBzZXRbIGkgXVsgMCBdIF0gKSB7XHJcblx0XHRcdFx0c2V0WyBpIF1bIDEgXS5hcHBseSggaW5zdGFuY2UuZWxlbWVudCwgYXJncyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcblx0Ly8gU3VidHJhY3QgdGhlIGhlaWdodCBvZiBleHRlcm5hbCB0b29sYmFycyBmcm9tIHRoZSBwYWdlIGhlaWdodCwgaWYgdGhlIHBhZ2UgZG9lcyBub3QgaGF2ZVxyXG5cdC8vIGludGVybmFsIHRvb2xiYXJzIG9mIHRoZSBzYW1lIHR5cGUuIFdlIHRha2UgY2FyZSB0byB1c2UgdGhlIHdpZGdldCBvcHRpb25zIGlmIHdlIGZpbmQgYVxyXG5cdC8vIHdpZGdldCBpbnN0YW5jZSBhbmQgdGhlIGVsZW1lbnQncyBkYXRhLWF0dHJpYnV0ZXMgb3RoZXJ3aXNlLlxyXG5cdHZhciBjb21wZW5zYXRlVG9vbGJhcnMgPSBmdW5jdGlvbiggcGFnZSwgZGVzaXJlZEhlaWdodCApIHtcclxuXHRcdHZhciBwYWdlUGFyZW50ID0gcGFnZS5wYXJlbnQoKSxcclxuXHRcdFx0dG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQgPSBbXSxcclxuXHJcblx0XHRcdC8vIFdlIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGZpbHRlciBmaXhlZCB0b29sYmFycyB3aXRoIG9wdGlvbiB1cGRhdGVQYWdlUGFkZGluZyBzZXQgdG9cclxuXHRcdFx0Ly8gdHJ1ZSAod2hpY2ggaXMgdGhlIGRlZmF1bHQpIGZyb20gb3VyIGhlaWdodCBzdWJ0cmFjdGlvbiwgYmVjYXVzZSBmaXhlZCB0b29sYmFycyB3aXRoXHJcblx0XHRcdC8vIG9wdGlvbiB1cGRhdGVQYWdlUGFkZGluZyBzZXQgdG8gdHJ1ZSBjb21wZW5zYXRlIGZvciB0aGVpciBwcmVzZW5jZSBieSBhZGRpbmcgcGFkZGluZ1xyXG5cdFx0XHQvLyB0byB0aGUgYWN0aXZlIHBhZ2UuIFdlIHdhbnQgdG8gYXZvaWQgZG91YmxlLWNvdW50aW5nIGJ5IGFsc28gc3VidHJhY3RpbmcgdGhlaXJcclxuXHRcdFx0Ly8gaGVpZ2h0IGZyb20gdGhlIGRlc2lyZWQgcGFnZSBoZWlnaHQuXHJcblx0XHRcdG5vUGFkZGVycyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB0aGVFbGVtZW50ID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0d2lkZ2V0T3B0aW9ucyA9ICQubW9iaWxlLnRvb2xiYXIgJiYgdGhlRWxlbWVudC5kYXRhKCBcIm1vYmlsZS10b29sYmFyXCIgKSA/XHJcblx0XHRcdFx0XHRcdHRoZUVsZW1lbnQudG9vbGJhciggXCJvcHRpb25cIiApIDoge1xyXG5cdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiB0aGVFbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJwb3NpdGlvblwiICksXHJcblx0XHRcdFx0XHRcdFx0dXBkYXRlUGFnZVBhZGRpbmc6ICggdGhlRWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArXHJcblx0XHRcdFx0XHRcdFx0XHRcInVwZGF0ZS1wYWdlLXBhZGRpbmdcIiApICE9PSBmYWxzZSApXHJcblx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHJldHVybiAhKCB3aWRnZXRPcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiZcclxuXHRcdFx0XHRcdHdpZGdldE9wdGlvbnMudXBkYXRlUGFnZVBhZGRpbmcgPT09IHRydWUgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXh0ZXJuYWxIZWFkZXJzID0gcGFnZVBhcmVudC5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmlsdGVyKCBub1BhZGRlcnMgKSxcclxuXHRcdFx0aW50ZXJuYWxIZWFkZXJzID0gcGFnZS5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICksXHJcblx0XHRcdGV4dGVybmFsRm9vdGVycyA9IHBhZ2VQYXJlbnQuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0nZm9vdGVyJylcIiApLmZpbHRlciggbm9QYWRkZXJzICksXHJcblx0XHRcdGludGVybmFsRm9vdGVycyA9IHBhZ2UuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0nZm9vdGVyJylcIiApO1xyXG5cclxuXHRcdC8vIElmIHdlIGhhdmUgbm8gaW50ZXJuYWwgaGVhZGVycywgYnV0IHdlIGRvIGhhdmUgZXh0ZXJuYWwgaGVhZGVycywgdGhlbiB0aGVpciBoZWlnaHRcclxuXHRcdC8vIHJlZHVjZXMgdGhlIHBhZ2UgaGVpZ2h0XHJcblx0XHRpZiAoIGludGVybmFsSGVhZGVycy5sZW5ndGggPT09IDAgJiYgZXh0ZXJuYWxIZWFkZXJzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0ID0gdG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQuY29uY2F0KCBleHRlcm5hbEhlYWRlcnMudG9BcnJheSgpICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgd2UgaGF2ZSBubyBpbnRlcm5hbCBmb290ZXJzLCBidXQgd2UgZG8gaGF2ZSBleHRlcm5hbCBmb290ZXJzLCB0aGVuIHRoZWlyIGhlaWdodFxyXG5cdFx0Ly8gcmVkdWNlcyB0aGUgcGFnZSBoZWlnaHRcclxuXHRcdGlmICggaW50ZXJuYWxGb290ZXJzLmxlbmd0aCA9PT0gMCAmJiBleHRlcm5hbEZvb3RlcnMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0dG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQgPSB0b29sYmFyc0FmZmVjdGluZ0hlaWdodC5jb25jYXQoIGV4dGVybmFsRm9vdGVycy50b0FycmF5KCkgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmVhY2goIHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0LCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkge1xyXG5cdFx0XHRkZXNpcmVkSGVpZ2h0IC09ICQoIHZhbHVlICkub3V0ZXJIZWlnaHQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEhlaWdodCBtdXN0IGJlIGF0IGxlYXN0IHplcm9cclxuXHRcdHJldHVybiBNYXRoLm1heCggMCwgZGVzaXJlZEhlaWdodCApO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cdFx0Ly8gZGVmaW5lIHRoZSB3aW5kb3cgYW5kIHRoZSBkb2N1bWVudCBvYmplY3RzXHJcblx0XHR3aW5kb3c6ICQoIHdpbmRvdyApLFxyXG5cdFx0ZG9jdW1lbnQ6ICQoIGRvY3VtZW50ICksXHJcblxyXG5cdFx0Ly8gVE9ETzogUmVtb3ZlIGFuZCB1c2UgJC51aS5rZXlDb2RlIGRpcmVjdGx5XHJcblx0XHRrZXlDb2RlOiAkLnVpLmtleUNvZGUsXHJcblxyXG5cdFx0Ly8gUGxhY2UgdG8gc3RvcmUgdmFyaW91cyB3aWRnZXQgZXh0ZW5zaW9uc1xyXG5cdFx0YmVoYXZpb3JzOiB7fSxcclxuXHJcblx0XHQvLyBTY3JvbGwgcGFnZSB2ZXJ0aWNhbGx5OiBzY3JvbGwgdG8gMCB0byBoaWRlIGlPUyBhZGRyZXNzIGJhciwgb3IgcGFzcyBhIFkgdmFsdWVcclxuXHRcdHNpbGVudFNjcm9sbDogZnVuY3Rpb24oIHlwb3MgKSB7XHJcblx0XHRcdGlmICggJC50eXBlKCB5cG9zICkgIT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdFx0eXBvcyA9ICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBwcmV2ZW50IHNjcm9sbHN0YXJ0IGFuZCBzY3JvbGxzdG9wIGV2ZW50c1xyXG5cdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIHlwb3MgKTtcclxuXHRcdFx0XHQkLm1vYmlsZS5kb2N1bWVudC50cmlnZ2VyKCBcInNpbGVudHNjcm9sbFwiLCB7IHg6IDAsIHk6IHlwb3MgfSk7XHJcblx0XHRcdH0sIDIwICk7XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fSwgMTUwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldENsb3Nlc3RCYXNlVXJsOiBmdW5jdGlvbiggZWxlIClcdHtcclxuXHRcdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwYWdlIGFuZCBleHRyYWN0IG91dCBpdHMgdXJsLlxyXG5cdFx0XHR2YXIgdXJsID0gJCggZWxlICkuY2xvc2VzdCggXCIudWktcGFnZVwiICkuanFtRGF0YSggXCJ1cmxcIiApLFxyXG5cdFx0XHRcdGJhc2UgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG5cclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuZHluYW1pY0Jhc2VFbmFibGVkIHx8ICF1cmwgfHwgISQubW9iaWxlLnBhdGguaXNQYXRoKCB1cmwgKSApIHtcclxuXHRcdFx0XHR1cmwgPSBiYXNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHVybCwgYmFzZSApO1xyXG5cdFx0fSxcclxuXHRcdHJlbW92ZUFjdGl2ZUxpbmtDbGFzczogZnVuY3Rpb24oIGZvcmNlUmVtb3ZhbCApIHtcclxuXHRcdFx0aWYgKCAhISQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rICYmXHJcblx0XHRcdFx0KCAhJC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsuY2xvc2VzdCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKS5sZW5ndGggfHxcclxuXHRcdFx0XHRcdGZvcmNlUmVtb3ZhbCApICkge1xyXG5cclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluay5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayA9IG51bGw7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIERFUFJFQ0FURUQgaW4gMS40XHJcblx0XHQvLyBGaW5kIHRoZSBjbG9zZXN0IHBhcmVudCB3aXRoIGEgdGhlbWUgY2xhc3Mgb24gaXQuIE5vdGUgdGhhdFxyXG5cdFx0Ly8gd2UgYXJlIG5vdCB1c2luZyAkLmZuLmNsb3Nlc3QoKSBvbiBwdXJwb3NlIGhlcmUgYmVjYXVzZSB0aGlzXHJcblx0XHQvLyBtZXRob2QgZ2V0cyBjYWxsZWQgcXVpdGUgYSBiaXQgYW5kIHdlIG5lZWQgaXQgdG8gYmUgYXMgZmFzdFxyXG5cdFx0Ly8gYXMgcG9zc2libGUuXHJcblx0XHRnZXRJbmhlcml0ZWRUaGVtZTogZnVuY3Rpb24oIGVsLCBkZWZhdWx0VGhlbWUgKSB7XHJcblx0XHRcdHZhciBlID0gZWxbIDAgXSxcclxuXHRcdFx0XHRsdHIgPSBcIlwiLFxyXG5cdFx0XHRcdHJlID0gL3VpLShiYXJ8Ym9keXxvdmVybGF5KS0oW2Etel0pXFxiLyxcclxuXHRcdFx0XHRjLCBtO1xyXG5cdFx0XHR3aGlsZSAoIGUgKSB7XHJcblx0XHRcdFx0YyA9IGUuY2xhc3NOYW1lIHx8IFwiXCI7XHJcblx0XHRcdFx0aWYgKCBjICYmICggbSA9IHJlLmV4ZWMoIGMgKSApICYmICggbHRyID0gbVsgMiBdICkgKSB7XHJcblx0XHRcdFx0XHQvLyBXZSBmb3VuZCBhIHBhcmVudCB3aXRoIGEgdGhlbWUgY2xhc3NcclxuXHRcdFx0XHRcdC8vIG9uIGl0IHNvIGJhaWwgZnJvbSB0aGlzIGxvb3AuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGUgPSBlLnBhcmVudE5vZGU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gUmV0dXJuIHRoZSB0aGVtZSBsZXR0ZXIgd2UgZm91bmQsIGlmIG5vbmUsIHJldHVybiB0aGVcclxuXHRcdFx0Ly8gc3BlY2lmaWVkIGRlZmF1bHQuXHJcblx0XHRcdHJldHVybiBsdHIgfHwgZGVmYXVsdFRoZW1lIHx8IFwiYVwiO1xyXG5cdFx0fSxcclxuXHJcblx0XHRlbmhhbmNlYWJsZTogZnVuY3Rpb24oIGVsZW1lbnRzICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyggZWxlbWVudHMsIFwiZW5oYW5jZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpamFja2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50cyApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoIGVsZW1lbnRzLCBcImFqYXhcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXZlUGFyZW50czogZnVuY3Rpb24oIGVsZW1lbnRzLCBhdHRyICkge1xyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5pZ25vcmVDb250ZW50RW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZWxlbWVudHM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBjb3VudCA9IGVsZW1lbnRzLmxlbmd0aCxcclxuXHRcdFx0XHQkbmV3U2V0ID0gJCgpLFxyXG5cdFx0XHRcdGUsICRlbGVtZW50LCBleGNsdWRlZCxcclxuXHRcdFx0XHRpLCBjO1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBjb3VudDsgaSsrICkge1xyXG5cdFx0XHRcdCRlbGVtZW50ID0gZWxlbWVudHMuZXEoIGkgKTtcclxuXHRcdFx0XHRleGNsdWRlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdGUgPSBlbGVtZW50c1sgaSBdO1xyXG5cclxuXHRcdFx0XHR3aGlsZSAoIGUgKSB7XHJcblx0XHRcdFx0XHRjID0gZS5nZXRBdHRyaWJ1dGUgPyBlLmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBhdHRyICkgOiBcIlwiO1xyXG5cclxuXHRcdFx0XHRcdGlmICggYyA9PT0gXCJmYWxzZVwiICkge1xyXG5cdFx0XHRcdFx0XHRleGNsdWRlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGUgPSBlLnBhcmVudE5vZGU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICFleGNsdWRlZCApIHtcclxuXHRcdFx0XHRcdCRuZXdTZXQgPSAkbmV3U2V0LmFkZCggJGVsZW1lbnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAkbmV3U2V0O1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRTY3JlZW5IZWlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBOYXRpdmUgaW5uZXJIZWlnaHQgcmV0dXJucyBtb3JlIGFjY3VyYXRlIHZhbHVlIGZvciB0aGlzIGFjcm9zcyBwbGF0Zm9ybXMsXHJcblx0XHRcdC8vIGpRdWVyeSB2ZXJzaW9uIGlzIGhlcmUgYXMgYSBub3JtYWxpemVkIGZhbGxiYWNrIGZvciBwbGF0Zm9ybXMgbGlrZSBTeW1iaWFuXHJcblx0XHRcdHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgJC5tb2JpbGUud2luZG93LmhlaWdodCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3NpbXBseSBzZXQgdGhlIGFjdGl2ZSBwYWdlJ3MgbWluaW11bSBoZWlnaHQgdG8gc2NyZWVuIGhlaWdodCwgZGVwZW5kaW5nIG9uIG9yaWVudGF0aW9uXHJcblx0XHRyZXNldEFjdGl2ZVBhZ2VIZWlnaHQ6IGZ1bmN0aW9uKCBoZWlnaHQgKSB7XHJcblx0XHRcdHZhciBwYWdlID0gJCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKSxcclxuXHRcdFx0XHRwYWdlSGVpZ2h0ID0gcGFnZS5oZWlnaHQoKSxcclxuXHRcdFx0XHRwYWdlT3V0ZXJIZWlnaHQgPSBwYWdlLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblxyXG5cdFx0XHRoZWlnaHQgPSBjb21wZW5zYXRlVG9vbGJhcnMoIHBhZ2UsXHJcblx0XHRcdFx0KCB0eXBlb2YgaGVpZ2h0ID09PSBcIm51bWJlclwiICkgPyBoZWlnaHQgOiAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSApO1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIGFueSBwcmV2aW91cyBtaW4taGVpZ2h0IHNldHRpbmdcclxuXHRcdFx0cGFnZS5jc3MoIFwibWluLWhlaWdodFwiLCBcIlwiICk7XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIG1pbmltdW0gaGVpZ2h0IG9ubHkgaWYgdGhlIGhlaWdodCBhcyBkZXRlcm1pbmVkIGJ5IENTUyBpcyBpbnN1ZmZpY2llbnRcclxuXHRcdFx0aWYgKCBwYWdlLmhlaWdodCgpIDwgaGVpZ2h0ICkge1xyXG5cdFx0XHRcdHBhZ2UuY3NzKCBcIm1pbi1oZWlnaHRcIiwgaGVpZ2h0IC0gKCBwYWdlT3V0ZXJIZWlnaHQgLSBwYWdlSGVpZ2h0ICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRsb2FkaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCB0byB0aGlzIGZ1bmN0aW9uLCBpbnN0YW50aWF0ZSBhIGxvYWRlciB3aWRnZXRcclxuXHRcdFx0dmFyIGxvYWRlciA9IHRoaXMubG9hZGluZy5fd2lkZ2V0IHx8ICQoICQubW9iaWxlLmxvYWRlci5wcm90b3R5cGUuZGVmYXVsdEh0bWwgKS5sb2FkZXIoKSxcclxuXHJcblx0XHRcdFx0Ly8gQ2FsbCB0aGUgYXBwcm9wcmlhdGUgbWV0aG9kIG9uIHRoZSBsb2FkZXJcclxuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IGxvYWRlci5sb2FkZXIuYXBwbHkoIGxvYWRlciwgYXJndW1lbnRzICk7XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIGxvYWRlciBpcyByZXRhaW5lZCBmb3IgZnV0dXJlIGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24uXHJcblx0XHRcdHRoaXMubG9hZGluZy5fd2lkZ2V0ID0gbG9hZGVyO1xyXG5cclxuXHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkLmFkZERlcGVuZGVudHMgPSBmdW5jdGlvbiggZWxlbSwgbmV3RGVwZW5kZW50cyApIHtcclxuXHRcdHZhciAkZWxlbSA9ICQoIGVsZW0gKSxcclxuXHRcdFx0ZGVwZW5kZW50cyA9ICRlbGVtLmpxbURhdGEoIFwiZGVwZW5kZW50c1wiICkgfHwgJCgpO1xyXG5cclxuXHRcdCRlbGVtLmpxbURhdGEoIFwiZGVwZW5kZW50c1wiLCAkKCBkZXBlbmRlbnRzICkuYWRkKCBuZXdEZXBlbmRlbnRzICkgKTtcclxuXHR9O1xyXG5cclxuXHQvLyBwbHVnaW5zXHJcblx0JC5mbi5leHRlbmQoe1xyXG5cdFx0cmVtb3ZlV2l0aERlcGVuZGVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkLnJlbW92ZVdpdGhEZXBlbmRlbnRzKCB0aGlzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEVuaGFuY2UgY2hpbGQgZWxlbWVudHNcclxuXHRcdGVuaGFuY2VXaXRoaW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaW5kZXgsXHJcblx0XHRcdFx0d2lkZ2V0RWxlbWVudHMgPSB7fSxcclxuXHRcdFx0XHRrZWVwTmF0aXZlID0gJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yKCksXHJcblx0XHRcdFx0dGhhdCA9IHRoaXM7XHJcblxyXG5cdFx0XHQvLyBBZGQgbm8ganMgY2xhc3MgdG8gZWxlbWVudHNcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5ub2pzICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLm5vanMoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQmluZCBsaW5rcyBmb3IgYWpheCBuYXZcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5saW5rcyApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5saW5rcyggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBEZWdyYWRlIGlucHV0cyBmb3Igc3R5bGVpbmdcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzV2l0aGluICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmRlZ3JhZGVJbnB1dHNXaXRoaW4oIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUnVuIGJ1dHRvbm1hcmt1cFxyXG5cdFx0XHRpZiAoICQuZm4uYnV0dG9uTWFya3VwICkge1xyXG5cdFx0XHRcdHRoaXMuZmluZCggJC5mbi5idXR0b25NYXJrdXAuaW5pdFNlbGVjdG9yICkubm90KCBrZWVwTmF0aXZlIClcclxuXHRcdFx0XHQuanFtRW5oYW5jZWFibGUoKS5idXR0b25NYXJrdXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQWRkIGNsYXNzZXMgZm9yIGZpZWxkQ29udGFpblxyXG5cdFx0XHRpZiAoICQuZm4uZmllbGRjb250YWluICkge1xyXG5cdFx0XHRcdHRoaXMuZmluZCggXCI6anFtRGF0YShyb2xlPSdmaWVsZGNvbnRhaW4nKVwiICkubm90KCBrZWVwTmF0aXZlIClcclxuXHRcdFx0XHQuanFtRW5oYW5jZWFibGUoKS5maWVsZGNvbnRhaW4oKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRW5oYW5jZSB3aWRnZXRzXHJcblx0XHRcdCQuZWFjaCggJC5tb2JpbGUud2lkZ2V0cywgZnVuY3Rpb24oIG5hbWUsIGNvbnN0cnVjdG9yICkge1xyXG5cclxuXHRcdFx0XHQvLyBJZiBpbml0U2VsZWN0b3Igbm90IGZhbHNlIGZpbmQgZWxlbWVudHNcclxuXHRcdFx0XHRpZiAoIGNvbnN0cnVjdG9yLmluaXRTZWxlY3RvciApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBGaWx0ZXIgZWxlbWVudHMgdGhhdCBzaG91bGQgbm90IGJlIGVuaGFuY2VkIGJhc2VkIG9uIHBhcmVudHNcclxuXHRcdFx0XHRcdHZhciBlbGVtZW50cyA9ICQubW9iaWxlLmVuaGFuY2VhYmxlKCB0aGF0LmZpbmQoIGNvbnN0cnVjdG9yLmluaXRTZWxlY3RvciApICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gSWYgYW55IG1hdGNoaW5nIGVsZW1lbnRzIHJlbWFpbiBmaWx0ZXIgb25lcyB3aXRoIGtlZXBOYXRpdmVTZWxlY3RvclxyXG5cdFx0XHRcdFx0aWYgKCBlbGVtZW50cy5sZW5ndGggPiAwICkge1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yIGlzIGRlcHJlY2F0ZWQgdGhpcyBpcyBqdXN0IGZvciBiYWNrY29tcGF0XHJcblx0XHRcdFx0XHRcdC8vIFN3aXRjaCB0byAkLm1vYmlsZS5rZWVwTmF0aXZlIGluIDEuNSB3aGljaCBpcyBqdXN0IGEgdmFsdWUgbm90IGEgZnVuY3Rpb25cclxuXHRcdFx0XHRcdFx0ZWxlbWVudHMgPSBlbGVtZW50cy5ub3QoIGtlZXBOYXRpdmUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBFbmhhbmNlIHdoYXRldmVyIGlzIGxlZnRcclxuXHRcdFx0XHRcdGlmICggZWxlbWVudHMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0XHRcdFx0d2lkZ2V0RWxlbWVudHNbIGNvbnN0cnVjdG9yLnByb3RvdHlwZS53aWRnZXROYW1lIF0gPSBlbGVtZW50cztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Zm9yICggaW5kZXggaW4gd2lkZ2V0RWxlbWVudHMgKSB7XHJcblx0XHRcdFx0d2lkZ2V0RWxlbWVudHNbIGluZGV4IF1bIGluZGV4IF0oKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZERlcGVuZGVudHM6IGZ1bmN0aW9uKCBuZXdEZXBlbmRlbnRzICkge1xyXG5cdFx0XHQkLmFkZERlcGVuZGVudHMoIHRoaXMsIG5ld0RlcGVuZGVudHMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gbm90ZSB0aGF0IHRoaXMgaGVscGVyIGRvZXNuJ3QgYXR0ZW1wdCB0byBoYW5kbGUgdGhlIGNhbGxiYWNrXHJcblx0XHQvLyBvciBzZXR0aW5nIG9mIGFuIGh0bWwgZWxlbWVudCdzIHRleHQsIGl0cyBvbmx5IHB1cnBvc2UgaXNcclxuXHRcdC8vIHRvIHJldHVybiB0aGUgaHRtbCBlbmNvZGVkIHZlcnNpb24gb2YgdGhlIHRleHQgaW4gYWxsIGNhc2VzLiAodGh1cyB0aGUgbmFtZSlcclxuXHRcdGdldEVuY29kZWRUZXh0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQoIFwiPGE+XCIgKS50ZXh0KCB0aGlzLnRleHQoKSApLmh0bWwoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gZmx1ZW50IGhlbHBlciBmdW5jdGlvbiBmb3IgdGhlIG1vYmlsZSBuYW1lc3BhY2VkIGVxdWl2YWxlbnRcclxuXHRcdGpxbUVuaGFuY2VhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmVuaGFuY2VhYmxlKCB0aGlzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGpxbUhpamFja2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuaGlqYWNrYWJsZSggdGhpcyApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkLnJlbW92ZVdpdGhEZXBlbmRlbnRzID0gZnVuY3Rpb24oIG5hdGl2ZUVsZW1lbnQgKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9ICQoIG5hdGl2ZUVsZW1lbnQgKTtcclxuXHJcblx0XHQoIGVsZW1lbnQuanFtRGF0YSggXCJkZXBlbmRlbnRzXCIgKSB8fCAkKCkgKS5yZW1vdmUoKTtcclxuXHRcdGVsZW1lbnQucmVtb3ZlKCk7XHJcblx0fTtcclxuXHQkLmFkZERlcGVuZGVudHMgPSBmdW5jdGlvbiggbmF0aXZlRWxlbWVudCwgbmV3RGVwZW5kZW50cyApIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCggbmF0aXZlRWxlbWVudCApLFxyXG5cdFx0XHRkZXBlbmRlbnRzID0gZWxlbWVudC5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiApIHx8ICQoKTtcclxuXHJcblx0XHRlbGVtZW50LmpxbURhdGEoIFwiZGVwZW5kZW50c1wiLCAkKCBkZXBlbmRlbnRzICkuYWRkKCBuZXdEZXBlbmRlbnRzICkgKTtcclxuXHR9O1xyXG5cclxuXHQkLmZpbmQubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBzZXQgKSB7XHJcblx0XHRyZXR1cm4gJC5maW5kKCBleHByLCBudWxsLCBudWxsLCBzZXQgKTtcclxuXHR9O1xyXG5cclxuXHQkLmZpbmQubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIG5vZGUsIGV4cHIgKSB7XHJcblx0XHRyZXR1cm4gJC5maW5kKCBleHByLCBudWxsLCBudWxsLCBbIG5vZGUgXSApLmxlbmd0aCA+IDA7XHJcblx0fTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblxyXG5cdFx0Ly8gVmVyc2lvbiBvZiB0aGUgalF1ZXJ5IE1vYmlsZSBGcmFtZXdvcmtcclxuXHRcdHZlcnNpb246IFwiMS40LjVcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gRGVmaW5lIHRoZSB1cmwgcGFyYW1ldGVyIHVzZWQgZm9yIHJlZmVyZW5jaW5nIHdpZGdldC1nZW5lcmF0ZWQgc3ViLXBhZ2VzLlxyXG5cdFx0Ly8gVHJhbnNsYXRlcyB0byBleGFtcGxlLmh0bWwmdWktcGFnZT1zdWJwYWdlSWRlbnRpZmllclxyXG5cdFx0Ly8gaGFzaCBzZWdtZW50IGJlZm9yZSAmdWktcGFnZT0gaXMgdXNlZCB0byBtYWtlIEFqYXggcmVxdWVzdFxyXG5cdFx0c3ViUGFnZVVybEtleTogXCJ1aS1wYWdlXCIsXHJcblxyXG5cdFx0aGlkZVVybEJhcjogdHJ1ZSxcclxuXHJcblx0XHQvLyBLZWVwbmF0aXZlIFNlbGVjdG9yXHJcblx0XHRrZWVwTmF0aXZlOiBcIjpqcW1EYXRhKHJvbGU9J25vbmUnKSwgOmpxbURhdGEocm9sZT0nbm9qcycpXCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gQ2xhc3MgYXNzaWduZWQgdG8gcGFnZSBjdXJyZW50bHkgaW4gdmlldywgYW5kIGR1cmluZyB0cmFuc2l0aW9uc1xyXG5cdFx0YWN0aXZlUGFnZUNsYXNzOiBcInVpLXBhZ2UtYWN0aXZlXCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gQ2xhc3MgdXNlZCBmb3IgXCJhY3RpdmVcIiBidXR0b24gc3RhdGUsIGZyb20gQ1NTIGZyYW1ld29ya1xyXG5cdFx0YWN0aXZlQnRuQ2xhc3M6IFwidWktYnRuLWFjdGl2ZVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIENsYXNzIHVzZWQgZm9yIFwiZm9jdXNcIiBmb3JtIGVsZW1lbnQgc3RhdGUsIGZyb20gQ1NTIGZyYW1ld29ya1xyXG5cdFx0Zm9jdXNDbGFzczogXCJ1aS1mb2N1c1wiLFxyXG5cclxuXHRcdC8vIEF1dG9tYXRpY2FsbHkgaGFuZGxlIGNsaWNrcyBhbmQgZm9ybSBzdWJtaXNzaW9ucyB0aHJvdWdoIEFqYXgsIHdoZW4gc2FtZS1kb21haW5cclxuXHRcdGFqYXhFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIEF1dG9tYXRpY2FsbHkgbG9hZCBhbmQgc2hvdyBwYWdlcyBiYXNlZCBvbiBsb2NhdGlvbi5oYXNoXHJcblx0XHRoYXNoTGlzdGVuaW5nRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBkaXNhYmxlIHRvIHByZXZlbnQganF1ZXJ5IGZyb20gYm90aGVyaW5nIHdpdGggbGlua3NcclxuXHRcdGxpbmtCaW5kaW5nRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBTZXQgZGVmYXVsdCBwYWdlIHRyYW5zaXRpb24gLSAnbm9uZScgZm9yIG5vIHRyYW5zaXRpb25zXHJcblx0XHRkZWZhdWx0UGFnZVRyYW5zaXRpb246IFwiZmFkZVwiLFxyXG5cclxuXHRcdC8vIFNldCBtYXhpbXVtIHdpbmRvdyB3aWR0aCBmb3IgdHJhbnNpdGlvbnMgdG8gYXBwbHkgLSAnZmFsc2UnIGZvciBubyBsaW1pdFxyXG5cdFx0bWF4VHJhbnNpdGlvbldpZHRoOiBmYWxzZSxcclxuXHJcblx0XHQvLyBNaW5pbXVtIHNjcm9sbCBkaXN0YW5jZSB0aGF0IHdpbGwgYmUgcmVtZW1iZXJlZCB3aGVuIHJldHVybmluZyB0byBhIHBhZ2VcclxuXHRcdC8vIERlcHJlY2F0ZWQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0bWluU2Nyb2xsQmFjazogMCxcclxuXHJcblx0XHQvLyBTZXQgZGVmYXVsdCBkaWFsb2cgdHJhbnNpdGlvbiAtICdub25lJyBmb3Igbm8gdHJhbnNpdGlvbnNcclxuXHRcdGRlZmF1bHREaWFsb2dUcmFuc2l0aW9uOiBcInBvcFwiLFxyXG5cclxuXHRcdC8vIEVycm9yIHJlc3BvbnNlIG1lc3NhZ2UgLSBhcHBlYXJzIHdoZW4gYW4gQWpheCBwYWdlIHJlcXVlc3QgZmFpbHNcclxuXHRcdHBhZ2VMb2FkRXJyb3JNZXNzYWdlOiBcIkVycm9yIExvYWRpbmcgUGFnZVwiLFxyXG5cclxuXHRcdC8vIEZvciBlcnJvciBtZXNzYWdlcywgd2hpY2ggdGhlbWUgZG9lcyB0aGUgYm94IHVzZT9cclxuXHRcdHBhZ2VMb2FkRXJyb3JNZXNzYWdlVGhlbWU6IFwiYVwiLFxyXG5cclxuXHRcdC8vIHJlcGxhY2UgY2FsbHMgdG8gd2luZG93Lmhpc3RvcnkuYmFjayB3aXRoIHBob25lZ2FwcyBuYXZpZ2F0aW9uIGhlbHBlclxyXG5cdFx0Ly8gd2hlcmUgaXQgaXMgcHJvdmlkZWQgb24gdGhlIHdpbmRvdyBvYmplY3RcclxuXHRcdHBob25lZ2FwTmF2aWdhdGlvbkVuYWJsZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vYXV0b21hdGljYWxseSBpbml0aWFsaXplIHRoZSBET00gd2hlbiBpdCdzIHJlYWR5XHJcblx0XHRhdXRvSW5pdGlhbGl6ZVBhZ2U6IHRydWUsXHJcblxyXG5cdFx0cHVzaFN0YXRlRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBhbGxvd3MgdXNlcnMgdG8gb3B0IGluIHRvIGlnbm9yaW5nIGNvbnRlbnQgYnkgbWFya2luZyBhIHBhcmVudCBlbGVtZW50IGFzXHJcblx0XHQvLyBkYXRhLWlnbm9yZWRcclxuXHRcdGlnbm9yZUNvbnRlbnRFbmFibGVkOiBmYWxzZSxcclxuXHJcblx0XHRidXR0b25NYXJrdXA6IHtcclxuXHRcdFx0aG92ZXJEZWxheTogMjAwXHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGRpc2FibGUgdGhlIGFsdGVyYXRpb24gb2YgdGhlIGR5bmFtaWMgYmFzZSB0YWcgb3IgbGlua3MgaW4gdGhlIGNhc2VcclxuXHRcdC8vIHRoYXQgYSBkeW5hbWljIGJhc2UgdGFnIGlzbid0IHN1cHBvcnRlZFxyXG5cdFx0ZHluYW1pY0Jhc2VFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIGRlZmF1bHQgdGhlIHByb3BlcnR5IHRvIHJlbW92ZSBkZXBlbmRlbmN5IG9uIGFzc2lnbm1lbnQgaW4gaW5pdCBtb2R1bGVcclxuXHRcdHBhZ2VDb250YWluZXI6ICQoKSxcclxuXHJcblx0XHQvL2VuYWJsZSBjcm9zcy1kb21haW4gcGFnZSBzdXBwb3J0XHJcblx0XHRhbGxvd0Nyb3NzRG9tYWluUGFnZXM6IGZhbHNlLFxyXG5cclxuXHRcdGRpYWxvZ0hhc2hLZXk6IFwiJnVpLXN0YXRlPWRpYWxvZ1wiXHJcblx0fSk7XHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgVUkgV2lkZ2V0IGMwYWI3MTA1NmI5MzY2MjdlOGE3ODIxZjAzYzA0NGFlYzYyODBhNDBcclxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKlxyXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9qUXVlcnkud2lkZ2V0L1xyXG4gKi9cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdXVpZCA9IDAsXHJcblx0c2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsXHJcblx0X2NsZWFuRGF0YSA9ICQuY2xlYW5EYXRhO1xyXG4kLmNsZWFuRGF0YSA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcclxuXHRmb3IgKCB2YXIgaSA9IDAsIGVsZW07IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdCQoIGVsZW0gKS50cmlnZ2VySGFuZGxlciggXCJyZW1vdmVcIiApO1xyXG5cdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvODIzNVxyXG5cdFx0fSBjYXRjaCggZSApIHt9XHJcblx0fVxyXG5cdF9jbGVhbkRhdGEoIGVsZW1zICk7XHJcbn07XHJcblxyXG4kLndpZGdldCA9IGZ1bmN0aW9uKCBuYW1lLCBiYXNlLCBwcm90b3R5cGUgKSB7XHJcblx0dmFyIGZ1bGxOYW1lLCBleGlzdGluZ0NvbnN0cnVjdG9yLCBjb25zdHJ1Y3RvciwgYmFzZVByb3RvdHlwZSxcclxuXHRcdC8vIHByb3hpZWRQcm90b3R5cGUgYWxsb3dzIHRoZSBwcm92aWRlZCBwcm90b3R5cGUgdG8gcmVtYWluIHVubW9kaWZpZWRcclxuXHRcdC8vIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgYXMgYSBtaXhpbiBmb3IgbXVsdGlwbGUgd2lkZ2V0cyAoIzg4NzYpXHJcblx0XHRwcm94aWVkUHJvdG90eXBlID0ge30sXHJcblx0XHRuYW1lc3BhY2UgPSBuYW1lLnNwbGl0KCBcIi5cIiApWyAwIF07XHJcblxyXG5cdG5hbWUgPSBuYW1lLnNwbGl0KCBcIi5cIiApWyAxIF07XHJcblx0ZnVsbE5hbWUgPSBuYW1lc3BhY2UgKyBcIi1cIiArIG5hbWU7XHJcblxyXG5cdGlmICggIXByb3RvdHlwZSApIHtcclxuXHRcdHByb3RvdHlwZSA9IGJhc2U7XHJcblx0XHRiYXNlID0gJC5XaWRnZXQ7XHJcblx0fVxyXG5cclxuXHQvLyBjcmVhdGUgc2VsZWN0b3IgZm9yIHBsdWdpblxyXG5cdCQuZXhwclsgXCI6XCIgXVsgZnVsbE5hbWUudG9Mb3dlckNhc2UoKSBdID0gZnVuY3Rpb24oIGVsZW0gKSB7XHJcblx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIGZ1bGxOYW1lICk7XHJcblx0fTtcclxuXHJcblx0JFsgbmFtZXNwYWNlIF0gPSAkWyBuYW1lc3BhY2UgXSB8fCB7fTtcclxuXHRleGlzdGluZ0NvbnN0cnVjdG9yID0gJFsgbmFtZXNwYWNlIF1bIG5hbWUgXTtcclxuXHRjb25zdHJ1Y3RvciA9ICRbIG5hbWVzcGFjZSBdWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHtcclxuXHRcdC8vIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBcIm5ld1wiIGtleXdvcmRcclxuXHRcdGlmICggIXRoaXMuX2NyZWF0ZVdpZGdldCApIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBjb25zdHJ1Y3Rvciggb3B0aW9ucywgZWxlbWVudCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBpbml0aWFsaXppbmcgZm9yIHNpbXBsZSBpbmhlcml0YW5jZVxyXG5cdFx0Ly8gbXVzdCB1c2UgXCJuZXdcIiBrZXl3b3JkICh0aGUgY29kZSBhYm92ZSBhbHdheXMgcGFzc2VzIGFyZ3MpXHJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMuX2NyZWF0ZVdpZGdldCggb3B0aW9ucywgZWxlbWVudCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0Ly8gZXh0ZW5kIHdpdGggdGhlIGV4aXN0aW5nIGNvbnN0cnVjdG9yIHRvIGNhcnJ5IG92ZXIgYW55IHN0YXRpYyBwcm9wZXJ0aWVzXHJcblx0JC5leHRlbmQoIGNvbnN0cnVjdG9yLCBleGlzdGluZ0NvbnN0cnVjdG9yLCB7XHJcblx0XHR2ZXJzaW9uOiBwcm90b3R5cGUudmVyc2lvbixcclxuXHRcdC8vIGNvcHkgdGhlIG9iamVjdCB1c2VkIHRvIGNyZWF0ZSB0aGUgcHJvdG90eXBlIGluIGNhc2Ugd2UgbmVlZCB0b1xyXG5cdFx0Ly8gcmVkZWZpbmUgdGhlIHdpZGdldCBsYXRlclxyXG5cdFx0X3Byb3RvOiAkLmV4dGVuZCgge30sIHByb3RvdHlwZSApLFxyXG5cdFx0Ly8gdHJhY2sgd2lkZ2V0cyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIHdpZGdldCBpbiBjYXNlIHRoaXMgd2lkZ2V0IGlzXHJcblx0XHQvLyByZWRlZmluZWQgYWZ0ZXIgYSB3aWRnZXQgaW5oZXJpdHMgZnJvbSBpdFxyXG5cdFx0X2NoaWxkQ29uc3RydWN0b3JzOiBbXVxyXG5cdH0pO1xyXG5cclxuXHRiYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTtcclxuXHQvLyB3ZSBuZWVkIHRvIG1ha2UgdGhlIG9wdGlvbnMgaGFzaCBhIHByb3BlcnR5IGRpcmVjdGx5IG9uIHRoZSBuZXcgaW5zdGFuY2VcclxuXHQvLyBvdGhlcndpc2Ugd2UnbGwgbW9kaWZ5IHRoZSBvcHRpb25zIGhhc2ggb24gdGhlIHByb3RvdHlwZSB0aGF0IHdlJ3JlXHJcblx0Ly8gaW5oZXJpdGluZyBmcm9tXHJcblx0YmFzZVByb3RvdHlwZS5vcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgYmFzZVByb3RvdHlwZS5vcHRpb25zICk7XHJcblx0JC5lYWNoKCBwcm90b3R5cGUsIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcclxuXHRcdGlmICggISQuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcclxuXHRcdFx0cHJveGllZFByb3RvdHlwZVsgcHJvcCBdID0gdmFsdWU7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHByb3hpZWRQcm90b3R5cGVbIHByb3AgXSA9IChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIF9zdXBlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJhc2UucHJvdG90eXBlWyBwcm9wIF0uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0X3N1cGVyQXBwbHkgPSBmdW5jdGlvbiggYXJncyApIHtcclxuXHRcdFx0XHRcdHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmdzICk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBfX3N1cGVyID0gdGhpcy5fc3VwZXIsXHJcblx0XHRcdFx0XHRfX3N1cGVyQXBwbHkgPSB0aGlzLl9zdXBlckFwcGx5LFxyXG5cdFx0XHRcdFx0cmV0dXJuVmFsdWU7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3N1cGVyID0gX3N1cGVyO1xyXG5cdFx0XHRcdHRoaXMuX3N1cGVyQXBwbHkgPSBfc3VwZXJBcHBseTtcclxuXHJcblx0XHRcdFx0cmV0dXJuVmFsdWUgPSB2YWx1ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3N1cGVyID0gX19zdXBlcjtcclxuXHRcdFx0XHR0aGlzLl9zdXBlckFwcGx5ID0gX19zdXBlckFwcGx5O1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0XHRcdH07XHJcblx0XHR9KSgpO1xyXG5cdH0pO1xyXG5cdGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9ICQud2lkZ2V0LmV4dGVuZCggYmFzZVByb3RvdHlwZSwge1xyXG5cdFx0Ly8gVE9ETzogcmVtb3ZlIHN1cHBvcnQgZm9yIHdpZGdldEV2ZW50UHJlZml4XHJcblx0XHQvLyBhbHdheXMgdXNlIHRoZSBuYW1lICsgYSBjb2xvbiBhcyB0aGUgcHJlZml4LCBlLmcuLCBkcmFnZ2FibGU6c3RhcnRcclxuXHRcdC8vIGRvbid0IHByZWZpeCBmb3Igd2lkZ2V0cyB0aGF0IGFyZW4ndCBET00tYmFzZWRcclxuXHRcdHdpZGdldEV2ZW50UHJlZml4OiBleGlzdGluZ0NvbnN0cnVjdG9yID8gKGJhc2VQcm90b3R5cGUud2lkZ2V0RXZlbnRQcmVmaXggfHwgbmFtZSkgOiBuYW1lXHJcblx0fSwgcHJveGllZFByb3RvdHlwZSwge1xyXG5cdFx0Y29uc3RydWN0b3I6IGNvbnN0cnVjdG9yLFxyXG5cdFx0bmFtZXNwYWNlOiBuYW1lc3BhY2UsXHJcblx0XHR3aWRnZXROYW1lOiBuYW1lLFxyXG5cdFx0d2lkZ2V0RnVsbE5hbWU6IGZ1bGxOYW1lXHJcblx0fSk7XHJcblxyXG5cdC8vIElmIHRoaXMgd2lkZ2V0IGlzIGJlaW5nIHJlZGVmaW5lZCB0aGVuIHdlIG5lZWQgdG8gZmluZCBhbGwgd2lkZ2V0cyB0aGF0XHJcblx0Ly8gYXJlIGluaGVyaXRpbmcgZnJvbSBpdCBhbmQgcmVkZWZpbmUgYWxsIG9mIHRoZW0gc28gdGhhdCB0aGV5IGluaGVyaXQgZnJvbVxyXG5cdC8vIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGlzIHdpZGdldC4gV2UncmUgZXNzZW50aWFsbHkgdHJ5aW5nIHRvIHJlcGxhY2Ugb25lXHJcblx0Ly8gbGV2ZWwgaW4gdGhlIHByb3RvdHlwZSBjaGFpbi5cclxuXHRpZiAoIGV4aXN0aW5nQ29uc3RydWN0b3IgKSB7XHJcblx0XHQkLmVhY2goIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzLCBmdW5jdGlvbiggaSwgY2hpbGQgKSB7XHJcblx0XHRcdHZhciBjaGlsZFByb3RvdHlwZSA9IGNoaWxkLnByb3RvdHlwZTtcclxuXHJcblx0XHRcdC8vIHJlZGVmaW5lIHRoZSBjaGlsZCB3aWRnZXQgdXNpbmcgdGhlIHNhbWUgcHJvdG90eXBlIHRoYXQgd2FzXHJcblx0XHRcdC8vIG9yaWdpbmFsbHkgdXNlZCwgYnV0IGluaGVyaXQgZnJvbSB0aGUgbmV3IHZlcnNpb24gb2YgdGhlIGJhc2VcclxuXHRcdFx0JC53aWRnZXQoIGNoaWxkUHJvdG90eXBlLm5hbWVzcGFjZSArIFwiLlwiICsgY2hpbGRQcm90b3R5cGUud2lkZ2V0TmFtZSwgY29uc3RydWN0b3IsIGNoaWxkLl9wcm90byApO1xyXG5cdFx0fSk7XHJcblx0XHQvLyByZW1vdmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2hpbGQgY29uc3RydWN0b3JzIGZyb20gdGhlIG9sZCBjb25zdHJ1Y3RvclxyXG5cdFx0Ly8gc28gdGhlIG9sZCBjaGlsZCBjb25zdHJ1Y3RvcnMgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkXHJcblx0XHRkZWxldGUgZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnM7XHJcblx0fSBlbHNlIHtcclxuXHRcdGJhc2UuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2goIGNvbnN0cnVjdG9yICk7XHJcblx0fVxyXG5cclxuXHQkLndpZGdldC5icmlkZ2UoIG5hbWUsIGNvbnN0cnVjdG9yICk7XHJcblxyXG5cdHJldHVybiBjb25zdHJ1Y3RvcjtcclxufTtcclxuXHJcbiQud2lkZ2V0LmV4dGVuZCA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblx0dmFyIGlucHV0ID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXHJcblx0XHRpbnB1dEluZGV4ID0gMCxcclxuXHRcdGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxyXG5cdFx0a2V5LFxyXG5cdFx0dmFsdWU7XHJcblx0Zm9yICggOyBpbnB1dEluZGV4IDwgaW5wdXRMZW5ndGg7IGlucHV0SW5kZXgrKyApIHtcclxuXHRcdGZvciAoIGtleSBpbiBpbnB1dFsgaW5wdXRJbmRleCBdICkge1xyXG5cdFx0XHR2YWx1ZSA9IGlucHV0WyBpbnB1dEluZGV4IF1bIGtleSBdO1xyXG5cdFx0XHRpZiAoIGlucHV0WyBpbnB1dEluZGV4IF0uaGFzT3duUHJvcGVydHkoIGtleSApICYmIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0Ly8gQ2xvbmUgb2JqZWN0c1xyXG5cdFx0XHRcdGlmICggJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApICkge1xyXG5cdFx0XHRcdFx0dGFyZ2V0WyBrZXkgXSA9ICQuaXNQbGFpbk9iamVjdCggdGFyZ2V0WyBrZXkgXSApID9cclxuXHRcdFx0XHRcdFx0JC53aWRnZXQuZXh0ZW5kKCB7fSwgdGFyZ2V0WyBrZXkgXSwgdmFsdWUgKSA6XHJcblx0XHRcdFx0XHRcdC8vIERvbid0IGV4dGVuZCBzdHJpbmdzLCBhcnJheXMsIGV0Yy4gd2l0aCBvYmplY3RzXHJcblx0XHRcdFx0XHRcdCQud2lkZ2V0LmV4dGVuZCgge30sIHZhbHVlICk7XHJcblx0XHRcdFx0Ly8gQ29weSBldmVyeXRoaW5nIGVsc2UgYnkgcmVmZXJlbmNlXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRhcmdldFsga2V5IF0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIHRhcmdldDtcclxufTtcclxuXHJcbiQud2lkZ2V0LmJyaWRnZSA9IGZ1bmN0aW9uKCBuYW1lLCBvYmplY3QgKSB7XHJcblx0dmFyIGZ1bGxOYW1lID0gb2JqZWN0LnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZSB8fCBuYW1lO1xyXG5cdCQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGlzTWV0aG9kQ2FsbCA9IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiLFxyXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXHJcblx0XHRcdHJldHVyblZhbHVlID0gdGhpcztcclxuXHJcblx0XHQvLyBhbGxvdyBtdWx0aXBsZSBoYXNoZXMgdG8gYmUgcGFzc2VkIG9uIGluaXRcclxuXHRcdG9wdGlvbnMgPSAhaXNNZXRob2RDYWxsICYmIGFyZ3MubGVuZ3RoID9cclxuXHRcdFx0JC53aWRnZXQuZXh0ZW5kLmFwcGx5KCBudWxsLCBbIG9wdGlvbnMgXS5jb25jYXQoYXJncykgKSA6XHJcblx0XHRcdG9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBpc01ldGhvZENhbGwgKSB7XHJcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgbWV0aG9kVmFsdWUsXHJcblx0XHRcdFx0XHRpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgZnVsbE5hbWUgKTtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnMgPT09IFwiaW5zdGFuY2VcIiApIHtcclxuXHRcdFx0XHRcdHJldHVyblZhbHVlID0gaW5zdGFuY2U7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggIWluc3RhbmNlICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICQuZXJyb3IoIFwiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiBcIiArIG5hbWUgKyBcIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgXCIgK1xyXG5cdFx0XHRcdFx0XHRcImF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnXCIgKyBvcHRpb25zICsgXCInXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCAhJC5pc0Z1bmN0aW9uKCBpbnN0YW5jZVtvcHRpb25zXSApIHx8IG9wdGlvbnMuY2hhckF0KCAwICkgPT09IFwiX1wiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICQuZXJyb3IoIFwibm8gc3VjaCBtZXRob2QgJ1wiICsgb3B0aW9ucyArIFwiJyBmb3IgXCIgKyBuYW1lICsgXCIgd2lkZ2V0IGluc3RhbmNlXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bWV0aG9kVmFsdWUgPSBpbnN0YW5jZVsgb3B0aW9ucyBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApO1xyXG5cdFx0XHRcdGlmICggbWV0aG9kVmFsdWUgIT09IGluc3RhbmNlICYmIG1ldGhvZFZhbHVlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZSA9IG1ldGhvZFZhbHVlICYmIG1ldGhvZFZhbHVlLmpxdWVyeSA/XHJcblx0XHRcdFx0XHRcdHJldHVyblZhbHVlLnB1c2hTdGFjayggbWV0aG9kVmFsdWUuZ2V0KCkgKSA6XHJcblx0XHRcdFx0XHRcdG1ldGhvZFZhbHVlO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xyXG5cdFx0XHRcdGlmICggaW5zdGFuY2UgKSB7XHJcblx0XHRcdFx0XHRpbnN0YW5jZS5vcHRpb24oIG9wdGlvbnMgfHwge30gKS5faW5pdCgpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lLCBuZXcgb2JqZWN0KCBvcHRpb25zLCB0aGlzICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHR9O1xyXG59O1xyXG5cclxuJC5XaWRnZXQgPSBmdW5jdGlvbiggLyogb3B0aW9ucywgZWxlbWVudCAqLyApIHt9O1xyXG4kLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnMgPSBbXTtcclxuXHJcbiQuV2lkZ2V0LnByb3RvdHlwZSA9IHtcclxuXHR3aWRnZXROYW1lOiBcIndpZGdldFwiLFxyXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcIlwiLFxyXG5cdGRlZmF1bHRFbGVtZW50OiBcIjxkaXY+XCIsXHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZGlzYWJsZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vIGNhbGxiYWNrc1xyXG5cdFx0Y3JlYXRlOiBudWxsXHJcblx0fSxcclxuXHRfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHtcclxuXHRcdGVsZW1lbnQgPSAkKCBlbGVtZW50IHx8IHRoaXMuZGVmYXVsdEVsZW1lbnQgfHwgdGhpcyApWyAwIF07XHJcblx0XHR0aGlzLmVsZW1lbnQgPSAkKCBlbGVtZW50ICk7XHJcblx0XHR0aGlzLnV1aWQgPSB1dWlkKys7XHJcblx0XHR0aGlzLmV2ZW50TmFtZXNwYWNlID0gXCIuXCIgKyB0aGlzLndpZGdldE5hbWUgKyB0aGlzLnV1aWQ7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LFxyXG5cdFx0XHR0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSxcclxuXHRcdFx0b3B0aW9ucyApO1xyXG5cclxuXHRcdHRoaXMuYmluZGluZ3MgPSAkKCk7XHJcblx0XHR0aGlzLmhvdmVyYWJsZSA9ICQoKTtcclxuXHRcdHRoaXMuZm9jdXNhYmxlID0gJCgpO1xyXG5cclxuXHRcdGlmICggZWxlbWVudCAhPT0gdGhpcyApIHtcclxuXHRcdFx0JC5kYXRhKCBlbGVtZW50LCB0aGlzLndpZGdldEZ1bGxOYW1lLCB0aGlzICk7XHJcblx0XHRcdHRoaXMuX29uKCB0cnVlLCB0aGlzLmVsZW1lbnQsIHtcclxuXHRcdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGlmICggZXZlbnQudGFyZ2V0ID09PSBlbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRlc3Ryb3koKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50ID0gJCggZWxlbWVudC5zdHlsZSA/XHJcblx0XHRcdFx0Ly8gZWxlbWVudCB3aXRoaW4gdGhlIGRvY3VtZW50XHJcblx0XHRcdFx0ZWxlbWVudC5vd25lckRvY3VtZW50IDpcclxuXHRcdFx0XHQvLyBlbGVtZW50IGlzIHdpbmRvdyBvciBkb2N1bWVudFxyXG5cdFx0XHRcdGVsZW1lbnQuZG9jdW1lbnQgfHwgZWxlbWVudCApO1xyXG5cdFx0XHR0aGlzLndpbmRvdyA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uZGVmYXVsdFZpZXcgfHwgdGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jcmVhdGUoKTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiY3JlYXRlXCIsIG51bGwsIHRoaXMuX2dldENyZWF0ZUV2ZW50RGF0YSgpICk7XHJcblx0XHR0aGlzLl9pbml0KCk7XHJcblx0fSxcclxuXHRfZ2V0Q3JlYXRlT3B0aW9uczogJC5ub29wLFxyXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6ICQubm9vcCxcclxuXHRfY3JlYXRlOiAkLm5vb3AsXHJcblx0X2luaXQ6ICQubm9vcCxcclxuXHJcblx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9kZXN0cm95KCk7XHJcblx0XHQvLyB3ZSBjYW4gcHJvYmFibHkgcmVtb3ZlIHRoZSB1bmJpbmQgY2FsbHMgaW4gMi4wXHJcblx0XHQvLyBhbGwgZXZlbnQgYmluZGluZ3Mgc2hvdWxkIGdvIHRocm91Z2ggdGhpcy5fb24oKVxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxyXG5cdFx0XHQucmVtb3ZlRGF0YSggdGhpcy53aWRnZXRGdWxsTmFtZSApXHJcblx0XHRcdC8vIHN1cHBvcnQ6IGpxdWVyeSA8MS42LjNcclxuXHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTQxM1xyXG5cdFx0XHQucmVtb3ZlRGF0YSggJC5jYW1lbENhc2UoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKSApO1xyXG5cdFx0dGhpcy53aWRnZXQoKVxyXG5cdFx0XHQudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKFxyXG5cdFx0XHRcdHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZCBcIiArXHJcblx0XHRcdFx0XCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblxyXG5cdFx0Ly8gY2xlYW4gdXAgZXZlbnRzIGFuZCBzdGF0ZXNcclxuXHRcdHRoaXMuYmluZGluZ3MudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlICk7XHJcblx0XHR0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHR0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0fSxcclxuXHRfZGVzdHJveTogJC5ub29wLFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudDtcclxuXHR9LFxyXG5cclxuXHRvcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSBrZXksXHJcblx0XHRcdHBhcnRzLFxyXG5cdFx0XHRjdXJPcHRpb24sXHJcblx0XHRcdGk7XHJcblxyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHQvLyBkb24ndCByZXR1cm4gYSByZWZlcmVuY2UgdG8gdGhlIGludGVybmFsIGhhc2hcclxuXHRcdFx0cmV0dXJuICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0Ly8gaGFuZGxlIG5lc3RlZCBrZXlzLCBlLmcuLCBcImZvby5iYXJcIiA9PiB7IGZvbzogeyBiYXI6IF9fXyB9IH1cclxuXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG5cdFx0XHRwYXJ0cyA9IGtleS5zcGxpdCggXCIuXCIgKTtcclxuXHRcdFx0a2V5ID0gcGFydHMuc2hpZnQoKTtcclxuXHRcdFx0aWYgKCBwYXJ0cy5sZW5ndGggKSB7XHJcblx0XHRcdFx0Y3VyT3B0aW9uID0gb3B0aW9uc1sga2V5IF0gPSAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnNbIGtleSBdICk7XHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKysgKSB7XHJcblx0XHRcdFx0XHRjdXJPcHRpb25bIHBhcnRzWyBpIF0gXSA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdIHx8IHt9O1xyXG5cdFx0XHRcdFx0Y3VyT3B0aW9uID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGtleSA9IHBhcnRzLnBvcCgpO1xyXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHVybiBjdXJPcHRpb25bIGtleSBdID09PSB1bmRlZmluZWQgPyBudWxsIDogY3VyT3B0aW9uWyBrZXkgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y3VyT3B0aW9uWyBrZXkgXSA9IHZhbHVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLm9wdGlvbnNbIGtleSBdID09PSB1bmRlZmluZWQgPyBudWxsIDogdGhpcy5vcHRpb25zWyBrZXkgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NldE9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBrZXk7XHJcblxyXG5cdFx0Zm9yICgga2V5IGluIG9wdGlvbnMgKSB7XHJcblx0XHRcdHRoaXMuX3NldE9wdGlvbigga2V5LCBvcHRpb25zWyBrZXkgXSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHR0aGlzLm9wdGlvbnNbIGtleSBdID0gdmFsdWU7XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKVxyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggdGhpcy53aWRnZXRGdWxsTmFtZSArIFwiLWRpc2FibGVkXCIsICEhdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0XHR0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IGZhbHNlIH0pO1xyXG5cdH0sXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiB0cnVlIH0pO1xyXG5cdH0sXHJcblxyXG5cdF9vbjogZnVuY3Rpb24oIHN1cHByZXNzRGlzYWJsZWRDaGVjaywgZWxlbWVudCwgaGFuZGxlcnMgKSB7XHJcblx0XHR2YXIgZGVsZWdhdGVFbGVtZW50LFxyXG5cdFx0XHRpbnN0YW5jZSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gbm8gc3VwcHJlc3NEaXNhYmxlZENoZWNrIGZsYWcsIHNodWZmbGUgYXJndW1lbnRzXHJcblx0XHRpZiAoIHR5cGVvZiBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgIT09IFwiYm9vbGVhblwiICkge1xyXG5cdFx0XHRoYW5kbGVycyA9IGVsZW1lbnQ7XHJcblx0XHRcdGVsZW1lbnQgPSBzdXBwcmVzc0Rpc2FibGVkQ2hlY2s7XHJcblx0XHRcdHN1cHByZXNzRGlzYWJsZWRDaGVjayA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG5vIGVsZW1lbnQgYXJndW1lbnQsIHNodWZmbGUgYW5kIHVzZSB0aGlzLmVsZW1lbnRcclxuXHRcdGlmICggIWhhbmRsZXJzICkge1xyXG5cdFx0XHRoYW5kbGVycyA9IGVsZW1lbnQ7XHJcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcblx0XHRcdGRlbGVnYXRlRWxlbWVudCA9IHRoaXMud2lkZ2V0KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBhY2NlcHQgc2VsZWN0b3JzLCBET00gZWxlbWVudHNcclxuXHRcdFx0ZWxlbWVudCA9IGRlbGVnYXRlRWxlbWVudCA9ICQoIGVsZW1lbnQgKTtcclxuXHRcdFx0dGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuYWRkKCBlbGVtZW50ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5lYWNoKCBoYW5kbGVycywgZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVyICkge1xyXG5cdFx0XHRmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XHJcblx0XHRcdFx0Ly8gYWxsb3cgd2lkZ2V0cyB0byBjdXN0b21pemUgdGhlIGRpc2FibGVkIGhhbmRsaW5nXHJcblx0XHRcdFx0Ly8gLSBkaXNhYmxlZCBhcyBhbiBhcnJheSBpbnN0ZWFkIG9mIGJvb2xlYW5cclxuXHRcdFx0XHQvLyAtIGRpc2FibGVkIGNsYXNzIGFzIG1ldGhvZCBmb3IgZGlzYWJsaW5nIGluZGl2aWR1YWwgcGFydHNcclxuXHRcdFx0XHRpZiAoICFzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgJiZcclxuXHRcdFx0XHRcdFx0KCBpbnN0YW5jZS5vcHRpb25zLmRpc2FibGVkID09PSB0cnVlIHx8XHJcblx0XHRcdFx0XHRcdFx0JCggdGhpcyApLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gXCJzdHJpbmdcIiA/IGluc3RhbmNlWyBoYW5kbGVyIF0gOiBoYW5kbGVyIClcclxuXHRcdFx0XHRcdC5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBjb3B5IHRoZSBndWlkIHNvIGRpcmVjdCB1bmJpbmRpbmcgd29ya3NcclxuXHRcdFx0aWYgKCB0eXBlb2YgaGFuZGxlciAhPT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHRoYW5kbGVyUHJveHkuZ3VpZCA9IGhhbmRsZXIuZ3VpZCA9XHJcblx0XHRcdFx0XHRoYW5kbGVyLmd1aWQgfHwgaGFuZGxlclByb3h5Lmd1aWQgfHwgJC5ndWlkKys7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBtYXRjaCA9IGV2ZW50Lm1hdGNoKCAvXihcXHcrKVxccyooLiopJC8gKSxcclxuXHRcdFx0XHRldmVudE5hbWUgPSBtYXRjaFsxXSArIGluc3RhbmNlLmV2ZW50TmFtZXNwYWNlLFxyXG5cdFx0XHRcdHNlbGVjdG9yID0gbWF0Y2hbMl07XHJcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XHJcblx0XHRcdFx0ZGVsZWdhdGVFbGVtZW50LmRlbGVnYXRlKCBzZWxlY3RvciwgZXZlbnROYW1lLCBoYW5kbGVyUHJveHkgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRlbGVtZW50LmJpbmQoIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9vZmY6IGZ1bmN0aW9uKCBlbGVtZW50LCBldmVudE5hbWUgKSB7XHJcblx0XHRldmVudE5hbWUgPSAoZXZlbnROYW1lIHx8IFwiXCIpLnNwbGl0KCBcIiBcIiApLmpvaW4oIHRoaXMuZXZlbnROYW1lc3BhY2UgKyBcIiBcIiApICsgdGhpcy5ldmVudE5hbWVzcGFjZTtcclxuXHRcdGVsZW1lbnQudW5iaW5kKCBldmVudE5hbWUgKS51bmRlbGVnYXRlKCBldmVudE5hbWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZGVsYXk6IGZ1bmN0aW9uKCBoYW5kbGVyLCBkZWxheSApIHtcclxuXHRcdGZ1bmN0aW9uIGhhbmRsZXJQcm94eSgpIHtcclxuXHRcdFx0cmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09IFwic3RyaW5nXCIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApXHJcblx0XHRcdFx0LmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7XHJcblx0XHR9XHJcblx0XHR2YXIgaW5zdGFuY2UgPSB0aGlzO1xyXG5cdFx0cmV0dXJuIHNldFRpbWVvdXQoIGhhbmRsZXJQcm94eSwgZGVsYXkgfHwgMCApO1xyXG5cdH0sXHJcblxyXG5cdF9ob3ZlcmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dGhpcy5ob3ZlcmFibGUgPSB0aGlzLmhvdmVyYWJsZS5hZGQoIGVsZW1lbnQgKTtcclxuXHRcdHRoaXMuX29uKCBlbGVtZW50LCB7XHJcblx0XHRcdG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRtb3VzZWxlYXZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR0aGlzLmZvY3VzYWJsZSA9IHRoaXMuZm9jdXNhYmxlLmFkZCggZWxlbWVudCApO1xyXG5cdFx0dGhpcy5fb24oIGVsZW1lbnQsIHtcclxuXHRcdFx0Zm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGZvY3Vzb3V0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHtcclxuXHRcdHZhciBwcm9wLCBvcmlnLFxyXG5cdFx0XHRjYWxsYmFjayA9IHRoaXMub3B0aW9uc1sgdHlwZSBdO1xyXG5cclxuXHRcdGRhdGEgPSBkYXRhIHx8IHt9O1xyXG5cdFx0ZXZlbnQgPSAkLkV2ZW50KCBldmVudCApO1xyXG5cdFx0ZXZlbnQudHlwZSA9ICggdHlwZSA9PT0gdGhpcy53aWRnZXRFdmVudFByZWZpeCA/XHJcblx0XHRcdHR5cGUgOlxyXG5cdFx0XHR0aGlzLndpZGdldEV2ZW50UHJlZml4ICsgdHlwZSApLnRvTG93ZXJDYXNlKCk7XHJcblx0XHQvLyB0aGUgb3JpZ2luYWwgZXZlbnQgbWF5IGNvbWUgZnJvbSBhbnkgZWxlbWVudFxyXG5cdFx0Ly8gc28gd2UgbmVlZCB0byByZXNldCB0aGUgdGFyZ2V0IG9uIHRoZSBuZXcgZXZlbnRcclxuXHRcdGV2ZW50LnRhcmdldCA9IHRoaXMuZWxlbWVudFsgMCBdO1xyXG5cclxuXHRcdC8vIGNvcHkgb3JpZ2luYWwgZXZlbnQgcHJvcGVydGllcyBvdmVyIHRvIHRoZSBuZXcgZXZlbnRcclxuXHRcdG9yaWcgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cdFx0aWYgKCBvcmlnICkge1xyXG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XHJcblx0XHRcdFx0aWYgKCAhKCBwcm9wIGluIGV2ZW50ICkgKSB7XHJcblx0XHRcdFx0XHRldmVudFsgcHJvcCBdID0gb3JpZ1sgcHJvcCBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBldmVudCwgZGF0YSApO1xyXG5cdFx0cmV0dXJuICEoICQuaXNGdW5jdGlvbiggY2FsbGJhY2sgKSAmJlxyXG5cdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcy5lbGVtZW50WzBdLCBbIGV2ZW50IF0uY29uY2F0KCBkYXRhICkgKSA9PT0gZmFsc2UgfHxcclxuXHRcdFx0ZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKTtcclxuXHR9XHJcbn07XHJcblxyXG4kLmVhY2goIHsgc2hvdzogXCJmYWRlSW5cIiwgaGlkZTogXCJmYWRlT3V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgZGVmYXVsdEVmZmVjdCApIHtcclxuXHQkLldpZGdldC5wcm90b3R5cGVbIFwiX1wiICsgbWV0aG9kIF0gPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucywgY2FsbGJhY2sgKSB7XHJcblx0XHRpZiAoIHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRvcHRpb25zID0geyBlZmZlY3Q6IG9wdGlvbnMgfTtcclxuXHRcdH1cclxuXHRcdHZhciBoYXNPcHRpb25zLFxyXG5cdFx0XHRlZmZlY3ROYW1lID0gIW9wdGlvbnMgP1xyXG5cdFx0XHRcdG1ldGhvZCA6XHJcblx0XHRcdFx0b3B0aW9ucyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIiA/XHJcblx0XHRcdFx0XHRkZWZhdWx0RWZmZWN0IDpcclxuXHRcdFx0XHRcdG9wdGlvbnMuZWZmZWN0IHx8IGRlZmF1bHRFZmZlY3Q7XHJcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdG9wdGlvbnMgPSB7IGR1cmF0aW9uOiBvcHRpb25zIH07XHJcblx0XHR9XHJcblx0XHRoYXNPcHRpb25zID0gISQuaXNFbXB0eU9iamVjdCggb3B0aW9ucyApO1xyXG5cdFx0b3B0aW9ucy5jb21wbGV0ZSA9IGNhbGxiYWNrO1xyXG5cdFx0aWYgKCBvcHRpb25zLmRlbGF5ICkge1xyXG5cdFx0XHRlbGVtZW50LmRlbGF5KCBvcHRpb25zLmRlbGF5ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGhhc09wdGlvbnMgJiYgJC5lZmZlY3RzICYmICQuZWZmZWN0cy5lZmZlY3RbIGVmZmVjdE5hbWUgXSApIHtcclxuXHRcdFx0ZWxlbWVudFsgbWV0aG9kIF0oIG9wdGlvbnMgKTtcclxuXHRcdH0gZWxzZSBpZiAoIGVmZmVjdE5hbWUgIT09IG1ldGhvZCAmJiBlbGVtZW50WyBlZmZlY3ROYW1lIF0gKSB7XHJcblx0XHRcdGVsZW1lbnRbIGVmZmVjdE5hbWUgXSggb3B0aW9ucy5kdXJhdGlvbiwgb3B0aW9ucy5lYXNpbmcsIGNhbGxiYWNrICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbGVtZW50LnF1ZXVlKGZ1bmN0aW9uKCBuZXh0ICkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKVsgbWV0aG9kIF0oKTtcclxuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xyXG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCggZWxlbWVudFsgMCBdICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG5leHQoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdHZhciBuc05vcm1hbGl6ZURpY3QgPSB7fSxcclxuXHRcdG9sZEZpbmQgPSAkLmZpbmQsXHJcblx0XHRyYnJhY2UgPSAvKD86XFx7W1xcc1xcU10qXFx9fFxcW1tcXHNcXFNdKlxcXSkkLyxcclxuXHRcdGpxbURhdGFSRSA9IC86anFtRGF0YVxcKChbXildKilcXCkvZztcclxuXHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblxyXG5cdFx0Ly8gTmFtZXNwYWNlIHVzZWQgZnJhbWV3b3JrLXdpZGUgZm9yIGRhdGEtYXR0cnMuIERlZmF1bHQgaXMgbm8gbmFtZXNwYWNlXHJcblxyXG5cdFx0bnM6IFwiXCIsXHJcblxyXG5cdFx0Ly8gUmV0cmlldmUgYW4gYXR0cmlidXRlIGZyb20gYW4gZWxlbWVudCBhbmQgcGVyZm9ybSBzb21lIG1hc3NhZ2luZyBvZiB0aGUgdmFsdWVcclxuXHJcblx0XHRnZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uKCBlbGVtZW50LCBrZXkgKSB7XHJcblx0XHRcdHZhciBkYXRhO1xyXG5cclxuXHRcdFx0ZWxlbWVudCA9IGVsZW1lbnQuanF1ZXJ5ID8gZWxlbWVudFswXSA6IGVsZW1lbnQ7XHJcblxyXG5cdFx0XHRpZiAoIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgKSB7XHJcblx0XHRcdFx0ZGF0YSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIGtleSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb3BpZWQgZnJvbSBjb3JlJ3Mgc3JjL2RhdGEuanM6ZGF0YUF0dHIoKVxyXG5cdFx0XHQvLyBDb252ZXJ0IGZyb20gYSBzdHJpbmcgdG8gYSBwcm9wZXIgZGF0YSB0eXBlXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XHJcblx0XHRcdFx0XHRkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XHJcblx0XHRcdFx0XHRkYXRhID09PSBcIm51bGxcIiA/IG51bGwgOlxyXG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcclxuXHRcdFx0XHRcdCtkYXRhICsgXCJcIiA9PT0gZGF0YSA/ICtkYXRhIDpcclxuXHRcdFx0XHRcdHJicmFjZS50ZXN0KCBkYXRhICkgPyBKU09OLnBhcnNlKCBkYXRhICkgOlxyXG5cdFx0XHRcdFx0ZGF0YTtcclxuXHRcdFx0fSBjYXRjaCggZXJyICkge31cclxuXHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBFeHBvc2Ugb3VyIGNhY2hlIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxyXG5cdFx0bnNOb3JtYWxpemVEaWN0OiBuc05vcm1hbGl6ZURpY3QsXHJcblxyXG5cdFx0Ly8gVGFrZSBhIGRhdGEgYXR0cmlidXRlIHByb3BlcnR5LCBwcmVwZW5kIHRoZSBuYW1lc3BhY2VcclxuXHRcdC8vIGFuZCB0aGVuIGNhbWVsIGNhc2UgdGhlIGF0dHJpYnV0ZSBzdHJpbmcuIEFkZCB0aGUgcmVzdWx0XHJcblx0XHQvLyB0byBvdXIgbnNOb3JtYWxpemVEaWN0IHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gdGhpcyBhZ2Fpbi5cclxuXHRcdG5zTm9ybWFsaXplOiBmdW5jdGlvbiggcHJvcCApIHtcclxuXHRcdFx0cmV0dXJuIG5zTm9ybWFsaXplRGljdFsgcHJvcCBdIHx8XHJcblx0XHRcdFx0KCBuc05vcm1hbGl6ZURpY3RbIHByb3AgXSA9ICQuY2FtZWxDYXNlKCAkLm1vYmlsZS5ucyArIHByb3AgKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBGaW5kIHRoZSBjbG9zZXN0IGphdmFzY3JpcHQgcGFnZSBlbGVtZW50IHRvIGdhdGhlciBzZXR0aW5ncyBkYXRhIGpzcGVyZiB0ZXN0XHJcblx0XHQvLyBodHRwOi8vanNwZXJmLmNvbS9zaW5nbGUtY29tcGxleC1zZWxlY3Rvci12cy1tYW55LWNvbXBsZXgtc2VsZWN0b3JzL2VkaXRcclxuXHRcdC8vIHBvc3NpYmx5IG5haXZlLCBidXQgaXQgc2hvd3MgdGhhdCB0aGUgcGFyc2luZyBvdmVyaGVhZCBmb3IgKmp1c3QqIHRoZSBwYWdlIHNlbGVjdG9yIHZzXHJcblx0XHQvLyB0aGUgcGFnZSBhbmQgZGlhbG9nIHNlbGVjdG9yIGlzIG5lZ2xpZ2FibGUuIFRoaXMgY291bGQgcHJvYmFibHkgYmUgc3BlZWQgdXAgYnlcclxuXHRcdC8vIGRvaW5nIGEgc2ltaWxhciBwYXJlbnQgbm9kZSB0cmF2ZXJzYWwgdG8gdGhlIG9uZSBmb3VuZCBpbiB0aGUgaW5oZXJpdGVkIHRoZW1lIGNvZGUgYWJvdmVcclxuXHRcdGNsb3Nlc3RQYWdlRGF0YTogZnVuY3Rpb24oICR0YXJnZXQgKSB7XHJcblx0XHRcdHJldHVybiAkdGFyZ2V0XHJcblx0XHRcdFx0LmNsb3Nlc3QoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpLCA6anFtRGF0YShyb2xlPSdkaWFsb2cnKVwiIClcclxuXHRcdFx0XHQuZGF0YSggXCJtb2JpbGUtcGFnZVwiICk7XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxuXHQvLyBNb2JpbGUgdmVyc2lvbiBvZiBkYXRhIGFuZCByZW1vdmVEYXRhIGFuZCBoYXNEYXRhIG1ldGhvZHNcclxuXHQvLyBlbnN1cmVzIGFsbCBkYXRhIGlzIHNldCBhbmQgcmV0cmlldmVkIHVzaW5nIGpRdWVyeSBNb2JpbGUncyBkYXRhIG5hbWVzcGFjZVxyXG5cdCQuZm4uanFtRGF0YSA9IGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcclxuXHRcdHZhciByZXN1bHQ7XHJcblx0XHRpZiAoIHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0XHRpZiAoIHByb3AgKSB7XHJcblx0XHRcdFx0cHJvcCA9ICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHVuZGVmaW5lZCBpcyBwZXJtaXR0ZWQgYXMgYW4gZXhwbGljaXQgaW5wdXQgZm9yIHRoZSBzZWNvbmQgcGFyYW1cclxuXHRcdFx0Ly8gaW4gdGhpcyBjYXNlIGl0IHJldHVybnMgdGhlIHZhbHVlIGFuZCBkb2VzIG5vdCBzZXQgaXQgdG8gdW5kZWZpbmVkXHJcblx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA8IDIgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRyZXN1bHQgPSB0aGlzLmRhdGEoIHByb3AgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXN1bHQgPSB0aGlzLmRhdGEoIHByb3AsIHZhbHVlICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fTtcclxuXHJcblx0JC5qcW1EYXRhID0gZnVuY3Rpb24oIGVsZW0sIHByb3AsIHZhbHVlICkge1xyXG5cdFx0dmFyIHJlc3VsdDtcclxuXHRcdGlmICggdHlwZW9mIHByb3AgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdHJlc3VsdCA9ICQuZGF0YSggZWxlbSwgcHJvcCA/ICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICkgOiBwcm9wLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9O1xyXG5cclxuXHQkLmZuLmpxbVJlbW92ZURhdGEgPSBmdW5jdGlvbiggcHJvcCApIHtcclxuXHRcdHJldHVybiB0aGlzLnJlbW92ZURhdGEoICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICkgKTtcclxuXHR9O1xyXG5cclxuXHQkLmpxbVJlbW92ZURhdGEgPSBmdW5jdGlvbiggZWxlbSwgcHJvcCApIHtcclxuXHRcdHJldHVybiAkLnJlbW92ZURhdGEoIGVsZW0sICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICkgKTtcclxuXHR9O1xyXG5cclxuXHQkLmZpbmQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJldCwgZXh0cmEgKSB7XHJcblx0XHRpZiAoIHNlbGVjdG9yLmluZGV4T2YoIFwiOmpxbURhdGFcIiApID4gLTEgKSB7XHJcblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgganFtRGF0YVJFLCBcIltkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcIiQxXVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9sZEZpbmQuY2FsbCggdGhpcywgc2VsZWN0b3IsIGNvbnRleHQsIHJldCwgZXh0cmEgKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCggJC5maW5kLCBvbGRGaW5kICk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciByY2FwaXRhbHMgPSAvW0EtWl0vZyxcclxuXHRyZXBsYWNlRnVuY3Rpb24gPSBmdW5jdGlvbiggYyApIHtcclxuXHRcdHJldHVybiBcIi1cIiArIGMudG9Mb3dlckNhc2UoKTtcclxuXHR9O1xyXG5cclxuJC5leHRlbmQoICQuV2lkZ2V0LnByb3RvdHlwZSwge1xyXG5cdF9nZXRDcmVhdGVPcHRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb24sIHZhbHVlLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50WyAwIF0sXHJcblx0XHRcdG9wdGlvbnMgPSB7fTtcclxuXHJcblx0XHQvL1xyXG5cdFx0aWYgKCAhJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBlbGVtLCBcImRlZmF1bHRzXCIgKSApIHtcclxuXHRcdFx0Zm9yICggb3B0aW9uIGluIHRoaXMub3B0aW9ucyApIHtcclxuXHRcdFx0XHR2YWx1ZSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggZWxlbSwgb3B0aW9uLnJlcGxhY2UoIHJjYXBpdGFscywgcmVwbGFjZUZ1bmN0aW9uICkgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdFx0b3B0aW9uc1sgb3B0aW9uIF0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb3B0aW9ucztcclxuXHR9XHJcbn0pO1xyXG5cclxuLy9UT0RPOiBSZW1vdmUgaW4gMS41IGZvciBiYWNrY29tcGF0IG9ubHlcclxuJC5tb2JpbGUud2lkZ2V0ID0gJC5XaWRnZXQ7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cdC8vIFRPRE8gbW92ZSBsb2FkZXIgY2xhc3MgZG93biBpbnRvIHRoZSB3aWRnZXQgc2V0dGluZ3NcclxuXHR2YXIgbG9hZGVyQ2xhc3MgPSBcInVpLWxvYWRlclwiLCAkaHRtbCA9ICQoIFwiaHRtbFwiICk7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS5sb2FkZXJcIiwge1xyXG5cdFx0Ly8gTk9URSBpZiB0aGUgZ2xvYmFsIGNvbmZpZyBzZXR0aW5ncyBhcmUgZGVmaW5lZCB0aGV5IHdpbGwgb3ZlcnJpZGUgdGhlc2VcclxuXHRcdC8vICAgICAgb3B0aW9uc1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHQvLyB0aGUgdGhlbWUgZm9yIHRoZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0dGhlbWU6IFwiYVwiLFxyXG5cclxuXHRcdFx0Ly8gd2hldGhlciB0aGUgdGV4dCBpbiB0aGUgbG9hZGluZyBtZXNzYWdlIGlzIHNob3duXHJcblx0XHRcdHRleHRWaXNpYmxlOiBmYWxzZSxcclxuXHJcblx0XHRcdC8vIGN1c3RvbSBodG1sIGZvciB0aGUgaW5uZXIgY29udGVudCBvZiB0aGUgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdGh0bWw6IFwiXCIsXHJcblxyXG5cdFx0XHQvLyB0aGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgcG9wdXAgaXMgc2hvd25cclxuXHRcdFx0dGV4dDogXCJsb2FkaW5nXCJcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGVmYXVsdEh0bWw6IFwiPGRpdiBjbGFzcz0nXCIgKyBsb2FkZXJDbGFzcyArIFwiJz5cIiArXHJcblx0XHRcdFwiPHNwYW4gY2xhc3M9J3VpLWljb24tbG9hZGluZyc+PC9zcGFuPlwiICtcclxuXHRcdFx0XCI8aDE+PC9oMT5cIiArXHJcblx0XHRcdFwiPC9kaXY+XCIsXHJcblxyXG5cdFx0Ly8gRm9yIG5vbi1maXhlZCBzdXBwb3J0aW4gYnJvd3NlcnMuIFBvc2l0aW9uIGF0IHkgY2VudGVyIChpZiBzY3JvbGxUb3Agc3VwcG9ydGVkKSwgYWJvdmUgdGhlIGFjdGl2ZUJ0biAoaWYgZGVmaW5lZCksIG9yIGp1c3QgMTAwcHggZnJvbSB0b3BcclxuXHRcdGZha2VGaXhMb2FkZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgYWN0aXZlQnRuID0gJCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApLmZpcnN0KCk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuY3NzKHtcclxuXHRcdFx0XHRcdHRvcDogJC5zdXBwb3J0LnNjcm9sbFRvcCAmJiB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKSArIHRoaXMud2luZG93LmhlaWdodCgpIC8gMiB8fFxyXG5cdFx0XHRcdFx0XHRhY3RpdmVCdG4ubGVuZ3RoICYmIGFjdGl2ZUJ0bi5vZmZzZXQoKS50b3AgfHwgMTAwXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGNoZWNrIHBvc2l0aW9uIG9mIGxvYWRlciB0byBzZWUgaWYgaXQgYXBwZWFycyB0byBiZSBcImZpeGVkXCIgdG8gY2VudGVyXHJcblx0XHQvLyBpZiBub3QsIHVzZSBhYnMgcG9zaXRpb25pbmdcclxuXHRcdGNoZWNrTG9hZGVyUG9zaXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgb2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpLFxyXG5cdFx0XHRcdHNjcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRcdHNjcmVlbkhlaWdodCA9ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpO1xyXG5cclxuXHRcdFx0aWYgKCBvZmZzZXQudG9wIDwgc2Nyb2xsVG9wIHx8ICggb2Zmc2V0LnRvcCAtIHNjcm9sbFRvcCApID4gc2NyZWVuSGVpZ2h0ICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1sb2FkZXItZmFrZWZpeFwiICk7XHJcblx0XHRcdFx0dGhpcy5mYWtlRml4TG9hZGVyKCk7XHJcblx0XHRcdFx0dGhpcy53aW5kb3dcclxuXHRcdFx0XHRcdC51bmJpbmQoIFwic2Nyb2xsXCIsIHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbiApXHJcblx0XHRcdFx0XHQuYmluZCggXCJzY3JvbGxcIiwgJC5wcm94eSggdGhpcy5mYWtlRml4TG9hZGVyLCB0aGlzICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRyZXNldEh0bWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaHRtbCggJCggdGhpcy5kZWZhdWx0SHRtbCApLmh0bWwoKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUdXJuIG9uL29mZiBwYWdlIGxvYWRpbmcgbWVzc2FnZS4gVGhlbWUgZG91YmxlcyBhcyBhbiBvYmplY3QgYXJndW1lbnRcclxuXHRcdC8vIHdpdGggdGhlIGZvbGxvd2luZyBzaGFwZTogeyB0aGVtZTogJycsIHRleHQ6ICcnLCBodG1sOiAnJywgdGV4dFZpc2libGU6ICcnIH1cclxuXHRcdC8vIE5PVEUgdGhhdCB0aGUgJC5tb2JpbGUubG9hZGluZyogc2V0dGluZ3MgYW5kIHBhcmFtcyBwYXN0IHRoZSBmaXJzdCBhcmUgZGVwcmVjYXRlZFxyXG5cdFx0Ly8gVE9ETyBzd2VldCBqZXN1cyB3ZSBuZWVkIHRvIGJyZWFrIHNvbWUgb2YgdGhpcyBvdXRcclxuXHRcdHNob3c6IGZ1bmN0aW9uKCB0aGVtZSwgbXNnVGV4dCwgdGV4dG9ubHkgKSB7XHJcblx0XHRcdHZhciB0ZXh0VmlzaWJsZSwgbWVzc2FnZSwgbG9hZFNldHRpbmdzO1xyXG5cclxuXHRcdFx0dGhpcy5yZXNldEh0bWwoKTtcclxuXHJcblx0XHRcdC8vIHVzZSB0aGUgcHJvdG90eXBlIG9wdGlvbnMgc28gdGhhdCBwZW9wbGUgY2FuIHNldCB0aGVtIGdsb2JhbGx5IGF0XHJcblx0XHRcdC8vIG1vYmlsZSBpbml0LiBDb25zaXN0ZW5jeSwgaXQncyB3aGF0J3MgZm9yIGRpbm5lclxyXG5cdFx0XHRpZiAoICQudHlwZSggdGhlbWUgKSA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0XHRsb2FkU2V0dGluZ3MgPSAkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgdGhlbWUgKTtcclxuXHJcblx0XHRcdFx0dGhlbWUgPSBsb2FkU2V0dGluZ3MudGhlbWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bG9hZFNldHRpbmdzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdFx0XHQvLyBoZXJlIHdlIHByZWZlciB0aGUgdGhlbWUgdmFsdWUgcGFzc2VkIGFzIGEgc3RyaW5nIGFyZ3VtZW50LCB0aGVuXHJcblx0XHRcdFx0Ly8gd2UgcHJlZmVyIHRoZSBnbG9iYWwgb3B0aW9uIGJlY2F1c2Ugd2UgY2FuJ3QgdXNlIHVuZGVmaW5lZCBkZWZhdWx0XHJcblx0XHRcdFx0Ly8gcHJvdG90eXBlIG9wdGlvbnMsIHRoZW4gdGhlIHByb3RvdHlwZSBvcHRpb25cclxuXHRcdFx0XHR0aGVtZSA9IHRoZW1lIHx8IGxvYWRTZXR0aW5ncy50aGVtZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gc2V0IHRoZSBtZXNzYWdlIHRleHQsIHByZWZlciB0aGUgcGFyYW0sIHRoZW4gdGhlIHNldHRpbmdzIG9iamVjdFxyXG5cdFx0XHQvLyB0aGVuIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHRtZXNzYWdlID0gbXNnVGV4dCB8fCAoIGxvYWRTZXR0aW5ncy50ZXh0ID09PSBmYWxzZSA/IFwiXCIgOiBsb2FkU2V0dGluZ3MudGV4dCApO1xyXG5cclxuXHRcdFx0Ly8gcHJlcGFyZSB0aGUgZG9tXHJcblx0XHRcdCRodG1sLmFkZENsYXNzKCBcInVpLWxvYWRpbmdcIiApO1xyXG5cclxuXHRcdFx0dGV4dFZpc2libGUgPSBsb2FkU2V0dGluZ3MudGV4dFZpc2libGU7XHJcblxyXG5cdFx0XHQvLyBhZGQgdGhlIHByb3BlciBjc3MgZ2l2ZW4gdGhlIG9wdGlvbnMgKHRoZW1lLCB0ZXh0LCBldGMpXHJcblx0XHRcdC8vIEZvcmNlIHRleHQgdmlzaWJpbGl0eSBpZiB0aGUgc2Vjb25kIGFyZ3VtZW50IHdhcyBzdXBwbGllZCwgb3JcclxuXHRcdFx0Ly8gaWYgdGhlIHRleHQgd2FzIGV4cGxpY2l0bHkgc2V0IGluIHRoZSBvYmplY3QgYXJnc1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0cihcImNsYXNzXCIsIGxvYWRlckNsYXNzICtcclxuXHRcdFx0XHRcIiB1aS1jb3JuZXItYWxsIHVpLWJvZHktXCIgKyB0aGVtZSArXHJcblx0XHRcdFx0XCIgdWktbG9hZGVyLVwiICsgKCB0ZXh0VmlzaWJsZSB8fCBtc2dUZXh0IHx8IHRoZW1lLnRleHQgPyBcInZlcmJvc2VcIiA6IFwiZGVmYXVsdFwiICkgK1xyXG5cdFx0XHRcdCggbG9hZFNldHRpbmdzLnRleHRvbmx5IHx8IHRleHRvbmx5ID8gXCIgdWktbG9hZGVyLXRleHRvbmx5XCIgOiBcIlwiICkgKTtcclxuXHJcblx0XHRcdC8vIFRPRE8gdmVyaWZ5IHRoYXQganF1ZXJ5LmZuLmh0bWwgaXMgb2sgdG8gdXNlIGluIGJvdGggY2FzZXMgaGVyZVxyXG5cdFx0XHQvLyAgICAgIHRoaXMgbWlnaHQgYmUgb3Zlcmx5IGRlZmVuc2l2ZSBpbiBwcmV2ZW50aW5nIHVua25vd2luZyB4c3NcclxuXHRcdFx0Ly8gaWYgdGhlIGh0bWwgYXR0cmlidXRlIGlzIGRlZmluZWQgb24gdGhlIGxvYWRpbmcgc2V0dGluZ3MsIHVzZSB0aGF0XHJcblx0XHRcdC8vIG90aGVyd2lzZSB1c2UgdGhlIGZhbGxiYWNrcyBmcm9tIGFib3ZlXHJcblx0XHRcdGlmICggbG9hZFNldHRpbmdzLmh0bWwgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50Lmh0bWwoIGxvYWRTZXR0aW5ncy5odG1sICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiaDFcIiApLnRleHQoIG1lc3NhZ2UgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIHBhZ2Vjb250YWluZXIgd2lkZ2V0IGhhcyBiZWVuIGRlZmluZWQgd2UgbWF5IHVzZSB0aGUgOm1vYmlsZS1wYWdlY29udGFpbmVyXHJcblx0XHRcdC8vIGFuZCBhdHRhY2ggdG8gdGhlIGVsZW1lbnQgb24gd2hpY2ggdGhlIHBhZ2Vjb250YWluZXIgd2lkZ2V0IGhhcyBiZWVuIGRlZmluZWQuIElmIG5vdCxcclxuXHRcdFx0Ly8gd2UgYXR0YWNoIHRvIHRoZSBib2R5LlxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXBwZW5kVG8oICQubW9iaWxlLnBhZ2Vjb250YWluZXIgP1xyXG5cdFx0XHRcdCQoIFwiOm1vYmlsZS1wYWdlY29udGFpbmVyXCIgKSA6ICQoIFwiYm9keVwiICkgKTtcclxuXHJcblx0XHRcdC8vIGNoZWNrIHRoYXQgdGhlIGxvYWRlciBpcyB2aXNpYmxlXHJcblx0XHRcdHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbigpO1xyXG5cclxuXHRcdFx0Ly8gb24gc2Nyb2xsIGNoZWNrIHRoZSBsb2FkZXIgcG9zaXRpb25cclxuXHRcdFx0dGhpcy53aW5kb3cuYmluZCggXCJzY3JvbGxcIiwgJC5wcm94eSggdGhpcy5jaGVja0xvYWRlclBvc2l0aW9uLCB0aGlzICkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCRodG1sLnJlbW92ZUNsYXNzKCBcInVpLWxvYWRpbmdcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudGV4dCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktbG9hZGVyLWZha2VmaXhcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLndpbmRvdy51bmJpbmQoIFwic2Nyb2xsXCIsIHRoaXMuZmFrZUZpeExvYWRlciApO1xyXG5cdFx0XHR0aGlzLndpbmRvdy51bmJpbmQoIFwic2Nyb2xsXCIsIHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoalF1ZXJ5LCB0aGlzKTtcclxuXHJcblxyXG4vKiFcclxuICogalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnQgLSB2MS4zIC0gNy8yMS8yMDEwXHJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UtcGx1Z2luL1xyXG4gKiBcclxuICogQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuXHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXHJcbiAqL1xyXG5cclxuLy8gU2NyaXB0OiBqUXVlcnkgaGFzaGNoYW5nZSBldmVudFxyXG4vL1xyXG4vLyAqVmVyc2lvbjogMS4zLCBMYXN0IHVwZGF0ZWQ6IDcvMjEvMjAxMCpcclxuLy8gXHJcbi8vIFByb2plY3QgSG9tZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UtcGx1Z2luL1xyXG4vLyBHaXRIdWIgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvXHJcbi8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS1oYXNoY2hhbmdlLmpzXHJcbi8vIChNaW5pZmllZCkgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS1oYXNoY2hhbmdlLm1pbi5qcyAoMC44a2IgZ3ppcHBlZClcclxuLy8gXHJcbi8vIEFib3V0OiBMaWNlbnNlXHJcbi8vIFxyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW4sXHJcbi8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4vLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXHJcbi8vIFxyXG4vLyBBYm91dDogRXhhbXBsZXNcclxuLy8gXHJcbi8vIFRoZXNlIHdvcmtpbmcgZXhhbXBsZXMsIGNvbXBsZXRlIHdpdGggZnVsbHkgY29tbWVudGVkIGNvZGUsIGlsbHVzdHJhdGUgYSBmZXdcclxuLy8gd2F5cyBpbiB3aGljaCB0aGlzIHBsdWdpbiBjYW4gYmUgdXNlZC5cclxuLy8gXHJcbi8vIGhhc2hjaGFuZ2UgZXZlbnQgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvaGFzaGNoYW5nZS9cclxuLy8gZG9jdW1lbnQuZG9tYWluIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2RvY3VtZW50X2RvbWFpbi9cclxuLy8gXHJcbi8vIEFib3V0OiBTdXBwb3J0IGFuZCBUZXN0aW5nXHJcbi8vIFxyXG4vLyBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHZlcnNpb24gb3IgdmVyc2lvbnMgb2YgalF1ZXJ5IHRoaXMgcGx1Z2luIGhhcyBiZWVuXHJcbi8vIHRlc3RlZCB3aXRoLCB3aGF0IGJyb3dzZXJzIGl0IGhhcyBiZWVuIHRlc3RlZCBpbiwgYW5kIHdoZXJlIHRoZSB1bml0IHRlc3RzXHJcbi8vIHJlc2lkZSAoc28geW91IGNhbiB0ZXN0IGl0IHlvdXJzZWxmKS5cclxuLy8gXHJcbi8vIGpRdWVyeSBWZXJzaW9ucyAtIDEuMi42LCAxLjMuMiwgMS40LjEsIDEuNC4yXHJcbi8vIEJyb3dzZXJzIFRlc3RlZCAtIEludGVybmV0IEV4cGxvcmVyIDYtOCwgRmlyZWZveCAyLTQsIENocm9tZSA1LTYsIFNhZmFyaSAzLjItNSxcclxuLy8gICAgICAgICAgICAgICAgICAgT3BlcmEgOS42LTEwLjYwLCBpUGhvbmUgMy4xLCBBbmRyb2lkIDEuNi0yLjIsIEJsYWNrQmVycnkgNC42LTUuXHJcbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS91bml0L1xyXG4vLyBcclxuLy8gQWJvdXQ6IEtub3duIGlzc3Vlc1xyXG4vLyBcclxuLy8gV2hpbGUgdGhpcyBqUXVlcnkgaGFzaGNoYW5nZSBldmVudCBpbXBsZW1lbnRhdGlvbiBpcyBxdWl0ZSBzdGFibGUgYW5kXHJcbi8vIHJvYnVzdCwgdGhlcmUgYXJlIGEgZmV3IHVuZm9ydHVuYXRlIGJyb3dzZXIgYnVncyBzdXJyb3VuZGluZyBleHBlY3RlZFxyXG4vLyBoYXNoY2hhbmdlIGV2ZW50LWJhc2VkIGJlaGF2aW9ycywgaW5kZXBlbmRlbnQgb2YgYW55IEphdmFTY3JpcHRcclxuLy8gd2luZG93Lm9uaGFzaGNoYW5nZSBhYnN0cmFjdGlvbi4gU2VlIHRoZSBmb2xsb3dpbmcgZXhhbXBsZXMgZm9yIG1vcmVcclxuLy8gaW5mb3JtYXRpb246XHJcbi8vIFxyXG4vLyBDaHJvbWU6IEJhY2sgQnV0dG9uIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1jaHJvbWUtYmFjay1idXR0b24vXHJcbi8vIEZpcmVmb3g6IFJlbW90ZSBYTUxIdHRwUmVxdWVzdCAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctZmlyZWZveC1yZW1vdGUteGhyL1xyXG4vLyBXZWJLaXQ6IEJhY2sgQnV0dG9uIGluIGFuIElmcmFtZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctd2Via2l0LWhhc2gtaWZyYW1lL1xyXG4vLyBTYWZhcmk6IEJhY2sgQnV0dG9uIGZyb20gYSBkaWZmZXJlbnQgZG9tYWluIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1zYWZhcmktYmFjay1mcm9tLWRpZmYtZG9tYWluL1xyXG4vLyBcclxuLy8gQWxzbyBub3RlIHRoYXQgc2hvdWxkIGEgYnJvd3NlciBuYXRpdmVseSBzdXBwb3J0IHRoZSB3aW5kb3cub25oYXNoY2hhbmdlIFxyXG4vLyBldmVudCwgYnV0IG5vdCByZXBvcnQgdGhhdCBpdCBkb2VzLCB0aGUgZmFsbGJhY2sgcG9sbGluZyBsb29wIHdpbGwgYmUgdXNlZC5cclxuLy8gXHJcbi8vIEFib3V0OiBSZWxlYXNlIEhpc3RvcnlcclxuLy8gXHJcbi8vIDEuMyAgIC0gKDcvMjEvMjAxMCkgUmVvcmdhbml6ZWQgSUU2LzcgSWZyYW1lIGNvZGUgdG8gbWFrZSBpdCBtb3JlXHJcbi8vICAgICAgICAgXCJyZW1vdmFibGVcIiBmb3IgbW9iaWxlLW9ubHkgZGV2ZWxvcG1lbnQuIEFkZGVkIElFNi83IGRvY3VtZW50LnRpdGxlXHJcbi8vICAgICAgICAgc3VwcG9ydC4gQXR0ZW1wdGVkIHRvIG1ha2UgSWZyYW1lIGFzIGhpZGRlbiBhcyBwb3NzaWJsZSBieSB1c2luZ1xyXG4vLyAgICAgICAgIHRlY2huaXF1ZXMgZnJvbSBodHRwOi8vd3d3LnBhY2llbGxvZ3JvdXAuY29tL2Jsb2cvP3A9NjA0LiBBZGRlZCBcclxuLy8gICAgICAgICBzdXBwb3J0IGZvciB0aGUgXCJzaG9ydGN1dFwiIGZvcm1hdCAkKHdpbmRvdykuaGFzaGNoYW5nZSggZm4gKSBhbmRcclxuLy8gICAgICAgICAkKHdpbmRvdykuaGFzaGNoYW5nZSgpIGxpa2UgalF1ZXJ5IHByb3ZpZGVzIGZvciBidWlsdC1pbiBldmVudHMuXHJcbi8vICAgICAgICAgUmVuYW1lZCBqUXVlcnkuaGFzaGNoYW5nZURlbGF5IHRvIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kZWxheT4gYW5kXHJcbi8vICAgICAgICAgbG93ZXJlZCBpdHMgZGVmYXVsdCB2YWx1ZSB0byA1MC4gQWRkZWQgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpbj5cclxuLy8gICAgICAgICBhbmQgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyYz4gcHJvcGVydGllcyBwbHVzIGRvY3VtZW50LWRvbWFpbi5odG1sXHJcbi8vICAgICAgICAgZmlsZSB0byBhZGRyZXNzIGFjY2VzcyBkZW5pZWQgaXNzdWVzIHdoZW4gc2V0dGluZyBkb2N1bWVudC5kb21haW4gaW5cclxuLy8gICAgICAgICBJRTYvNy5cclxuLy8gMS4yICAgLSAoMi8xMS8yMDEwKSBGaXhlZCBhIGJ1ZyB3aGVyZSBjb21pbmcgYmFjayB0byBhIHBhZ2UgdXNpbmcgdGhpcyBwbHVnaW5cclxuLy8gICAgICAgICBmcm9tIGEgcGFnZSBvbiBhbm90aGVyIGRvbWFpbiB3b3VsZCBjYXVzZSBhbiBlcnJvciBpbiBTYWZhcmkgNC4gQWxzbyxcclxuLy8gICAgICAgICBJRTYvNyBJZnJhbWUgaXMgbm93IGluc2VydGVkIGFmdGVyIHRoZSBib2R5ICh0aGlzIGFjdHVhbGx5IHdvcmtzKSxcclxuLy8gICAgICAgICB3aGljaCBwcmV2ZW50cyB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZyB3aGVuIHRoZSBldmVudCBpcyBmaXJzdCBib3VuZC5cclxuLy8gICAgICAgICBFdmVudCBjYW4gYWxzbyBub3cgYmUgYm91bmQgYmVmb3JlIERPTSByZWFkeSwgYnV0IGl0IHdvbid0IGJlIHVzYWJsZVxyXG4vLyAgICAgICAgIGJlZm9yZSB0aGVuIGluIElFNi83LlxyXG4vLyAxLjEgICAtICgxLzIxLzIwMTApIEluY29ycG9yYXRlZCBkb2N1bWVudC5kb2N1bWVudE1vZGUgdGVzdCB0byBmaXggSUU4IGJ1Z1xyXG4vLyAgICAgICAgIHdoZXJlIGJyb3dzZXIgdmVyc2lvbiBpcyBpbmNvcnJlY3RseSByZXBvcnRlZCBhcyA4LjAsIGRlc3BpdGVcclxuLy8gICAgICAgICBpbmNsdXNpb24gb2YgdGhlIFgtVUEtQ29tcGF0aWJsZSBJRT1FbXVsYXRlSUU3IG1ldGEgdGFnLlxyXG4vLyAxLjAgICAtICgxLzkvMjAxMCkgSW5pdGlhbCBSZWxlYXNlLiBCcm9rZSBvdXQgdGhlIGpRdWVyeSBCQlEgZXZlbnQuc3BlY2lhbFxyXG4vLyAgICAgICAgIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZnVuY3Rpb25hbGl0eSBpbnRvIGEgc2VwYXJhdGUgcGx1Z2luIGZvciB1c2Vyc1xyXG4vLyAgICAgICAgIHdobyB3YW50IGp1c3QgdGhlIGJhc2ljIGV2ZW50ICYgYmFjayBidXR0b24gc3VwcG9ydCwgd2l0aG91dCBhbGwgdGhlXHJcbi8vICAgICAgICAgZXh0cmEgYXdlc29tZW5lc3MgdGhhdCBCQlEgcHJvdmlkZXMuIFRoaXMgcGx1Z2luIHdpbGwgYmUgaW5jbHVkZWQgYXNcclxuLy8gICAgICAgICBwYXJ0IG9mIGpRdWVyeSBCQlEsIGJ1dCBhbHNvIGJlIGF2YWlsYWJsZSBzZXBhcmF0ZWx5LlxyXG5cclxuKGZ1bmN0aW9uKCQsd2luZG93LHVuZGVmaW5lZCl7XHJcbiAgJyQ6bm9tdW5nZSc7IC8vIFVzZWQgYnkgWVVJIGNvbXByZXNzb3IuXHJcbiAgXHJcbiAgLy8gUmV1c2VkIHN0cmluZy5cclxuICB2YXIgc3RyX2hhc2hjaGFuZ2UgPSAnaGFzaGNoYW5nZScsXHJcbiAgICBcclxuICAgIC8vIE1ldGhvZCAvIG9iamVjdCByZWZlcmVuY2VzLlxyXG4gICAgZG9jID0gZG9jdW1lbnQsXHJcbiAgICBmYWtlX29uaGFzaGNoYW5nZSxcclxuICAgIHNwZWNpYWwgPSAkLmV2ZW50LnNwZWNpYWwsXHJcbiAgICBcclxuICAgIC8vIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCB3aW5kb3cub25oYXNoY2hhbmdlPyBOb3RlIHRoYXQgSUU4IHJ1bm5pbmcgaW5cclxuICAgIC8vIElFNyBjb21wYXRpYmlsaXR5IG1vZGUgcmVwb3J0cyB0cnVlIGZvciAnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3csIGV2ZW5cclxuICAgIC8vIHRob3VnaCB0aGUgZXZlbnQgaXNuJ3Qgc3VwcG9ydGVkLCBzbyBhbHNvIHRlc3QgZG9jdW1lbnQuZG9jdW1lbnRNb2RlLlxyXG4gICAgZG9jX21vZGUgPSBkb2MuZG9jdW1lbnRNb2RlLFxyXG4gICAgc3VwcG9ydHNfb25oYXNoY2hhbmdlID0gJ29uJyArIHN0cl9oYXNoY2hhbmdlIGluIHdpbmRvdyAmJiAoIGRvY19tb2RlID09PSB1bmRlZmluZWQgfHwgZG9jX21vZGUgPiA3ICk7XHJcbiAgXHJcbiAgLy8gR2V0IGxvY2F0aW9uLmhhc2ggKG9yIHdoYXQgeW91J2QgZXhwZWN0IGxvY2F0aW9uLmhhc2ggdG8gYmUpIHNhbnMgYW55XHJcbiAgLy8gbGVhZGluZyAjLiBUaGFua3MgZm9yIG1ha2luZyB0aGlzIG5lY2Vzc2FyeSwgRmlyZWZveCFcclxuICBmdW5jdGlvbiBnZXRfZnJhZ21lbnQoIHVybCApIHtcclxuICAgIHVybCA9IHVybCB8fCBsb2NhdGlvbi5ocmVmO1xyXG4gICAgcmV0dXJuICcjJyArIHVybC5yZXBsYWNlKCAvXlteI10qIz8oLiopJC8sICckMScgKTtcclxuICB9O1xyXG4gIFxyXG4gIC8vIE1ldGhvZDogalF1ZXJ5LmZuLmhhc2hjaGFuZ2VcclxuICAvLyBcclxuICAvLyBCaW5kIGEgaGFuZGxlciB0byB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBvciB0cmlnZ2VyIGFsbCBib3VuZFxyXG4gIC8vIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgaGFuZGxlcnMuIFRoaXMgYmVoYXZpb3IgaXMgY29uc2lzdGVudCB3aXRoXHJcbiAgLy8galF1ZXJ5J3MgYnVpbHQtaW4gZXZlbnQgaGFuZGxlcnMuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2U6XHJcbiAgLy8gXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCBbIGhhbmRsZXIgXSApO1xyXG4gIC8vIFxyXG4gIC8vIEFyZ3VtZW50czpcclxuICAvLyBcclxuICAvLyAgaGFuZGxlciAtIChGdW5jdGlvbikgT3B0aW9uYWwgaGFuZGxlciB0byBiZSBib3VuZCB0byB0aGUgaGFzaGNoYW5nZVxyXG4gIC8vICAgIGV2ZW50LiBUaGlzIGlzIGEgXCJzaG9ydGN1dFwiIGZvciB0aGUgbW9yZSB2ZXJib3NlIGZvcm06XHJcbiAgLy8gICAgalF1ZXJ5KHdpbmRvdykuYmluZCggJ2hhc2hjaGFuZ2UnLCBoYW5kbGVyICkuIElmIGhhbmRsZXIgaXMgb21pdHRlZCxcclxuICAvLyAgICBhbGwgYm91bmQgd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBoYW5kbGVycyB3aWxsIGJlIHRyaWdnZXJlZC4gVGhpc1xyXG4gIC8vICAgIGlzIGEgc2hvcnRjdXQgZm9yIHRoZSBtb3JlIHZlcmJvc2VcclxuICAvLyAgICBqUXVlcnkod2luZG93KS50cmlnZ2VyKCAnaGFzaGNoYW5nZScgKS4gVGhlc2UgZm9ybXMgYXJlIGRlc2NyaWJlZCBpblxyXG4gIC8vICAgIHRoZSA8aGFzaGNoYW5nZSBldmVudD4gc2VjdGlvbi5cclxuICAvLyBcclxuICAvLyBSZXR1cm5zOlxyXG4gIC8vIFxyXG4gIC8vICAoalF1ZXJ5KSBUaGUgaW5pdGlhbCBqUXVlcnkgY29sbGVjdGlvbiBvZiBlbGVtZW50cy5cclxuICBcclxuICAvLyBBbGxvdyB0aGUgXCJzaG9ydGN1dFwiIGZvcm1hdCAkKGVsZW0pLmhhc2hjaGFuZ2UoIGZuICkgZm9yIGJpbmRpbmcgYW5kXHJcbiAgLy8gJChlbGVtKS5oYXNoY2hhbmdlKCkgZm9yIHRyaWdnZXJpbmcsIGxpa2UgalF1ZXJ5IGRvZXMgZm9yIGJ1aWx0LWluIGV2ZW50cy5cclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdID0gZnVuY3Rpb24oIGZuICkge1xyXG4gICAgcmV0dXJuIGZuID8gdGhpcy5iaW5kKCBzdHJfaGFzaGNoYW5nZSwgZm4gKSA6IHRoaXMudHJpZ2dlciggc3RyX2hhc2hjaGFuZ2UgKTtcclxuICB9O1xyXG4gIFxyXG4gIC8vIFByb3BlcnR5OiBqUXVlcnkuZm4uaGFzaGNoYW5nZS5kZWxheVxyXG4gIC8vIFxyXG4gIC8vIFRoZSBudW1lcmljIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpIGF0IHdoaWNoIHRoZSA8aGFzaGNoYW5nZSBldmVudD5cclxuICAvLyBwb2xsaW5nIGxvb3AgZXhlY3V0ZXMuIERlZmF1bHRzIHRvIDUwLlxyXG4gIFxyXG4gIC8vIFByb3BlcnR5OiBqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW5cclxuICAvLyBcclxuICAvLyBJZiB5b3UncmUgc2V0dGluZyBkb2N1bWVudC5kb21haW4gaW4geW91ciBKYXZhU2NyaXB0LCBhbmQgeW91IHdhbnQgaGFzaFxyXG4gIC8vIGhpc3RvcnkgdG8gd29yayBpbiBJRTYvNywgbm90IG9ubHkgbXVzdCB0aGlzIHByb3BlcnR5IGJlIHNldCwgYnV0IHlvdSBtdXN0XHJcbiAgLy8gYWxzbyBzZXQgZG9jdW1lbnQuZG9tYWluIEJFRk9SRSBqUXVlcnkgaXMgbG9hZGVkIGludG8gdGhlIHBhZ2UuIFRoaXNcclxuICAvLyBwcm9wZXJ0eSBpcyBvbmx5IGFwcGxpY2FibGUgaWYgeW91IGFyZSBzdXBwb3J0aW5nIElFNi83IChvciBJRTggb3BlcmF0aW5nXHJcbiAgLy8gaW4gXCJJRTcgY29tcGF0aWJpbGl0eVwiIG1vZGUpLlxyXG4gIC8vIFxyXG4gIC8vIEluIGFkZGl0aW9uLCB0aGUgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyYz4gcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gdGhlXHJcbiAgLy8gcGF0aCBvZiB0aGUgaW5jbHVkZWQgXCJkb2N1bWVudC1kb21haW4uaHRtbFwiIGZpbGUsIHdoaWNoIGNhbiBiZSByZW5hbWVkIG9yXHJcbiAgLy8gbW9kaWZpZWQgaWYgbmVjZXNzYXJ5IChub3RlIHRoYXQgdGhlIGRvY3VtZW50LmRvbWFpbiBzcGVjaWZpZWQgbXVzdCBiZSB0aGVcclxuICAvLyBzYW1lIGluIGJvdGggeW91ciBtYWluIEphdmFTY3JpcHQgYXMgd2VsbCBhcyBpbiB0aGlzIGZpbGUpLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlOlxyXG4gIC8vIFxyXG4gIC8vIGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjtcclxuICBcclxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjXHJcbiAgLy8gXHJcbiAgLy8gSWYsIGZvciBzb21lIHJlYXNvbiwgeW91IG5lZWQgdG8gc3BlY2lmeSBhbiBJZnJhbWUgc3JjIGZpbGUgKGZvciBleGFtcGxlLFxyXG4gIC8vIHdoZW4gc2V0dGluZyBkb2N1bWVudC5kb21haW4gYXMgaW4gPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpbj4pLCB5b3UgY2FuXHJcbiAgLy8gZG8gc28gdXNpbmcgdGhpcyBwcm9wZXJ0eS4gTm90ZSB0aGF0IHdoZW4gdXNpbmcgdGhpcyBwcm9wZXJ0eSwgaGlzdG9yeVxyXG4gIC8vIHdvbid0IGJlIHJlY29yZGVkIGluIElFNi83IHVudGlsIHRoZSBJZnJhbWUgc3JjIGZpbGUgbG9hZHMuIFRoaXMgcHJvcGVydHlcclxuICAvLyBpcyBvbmx5IGFwcGxpY2FibGUgaWYgeW91IGFyZSBzdXBwb3J0aW5nIElFNi83IChvciBJRTggb3BlcmF0aW5nIGluIFwiSUU3XHJcbiAgLy8gY29tcGF0aWJpbGl0eVwiIG1vZGUpLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlOlxyXG4gIC8vIFxyXG4gIC8vIGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyYyA9ICdwYXRoL3RvL2ZpbGUuaHRtbCc7XHJcbiAgXHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kZWxheSA9IDUwO1xyXG4gIC8qXHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kb21haW4gPSBudWxsO1xyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uc3JjID0gbnVsbDtcclxuICAqL1xyXG4gIFxyXG4gIC8vIEV2ZW50OiBoYXNoY2hhbmdlIGV2ZW50XHJcbiAgLy8gXHJcbiAgLy8gRmlyZWQgd2hlbiBsb2NhdGlvbi5oYXNoIGNoYW5nZXMuIEluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBpdCwgdGhlIG5hdGl2ZVxyXG4gIC8vIEhUTUw1IHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgaXMgdXNlZCwgb3RoZXJ3aXNlIGEgcG9sbGluZyBsb29wIGlzXHJcbiAgLy8gaW5pdGlhbGl6ZWQsIHJ1bm5pbmcgZXZlcnkgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRlbGF5PiBtaWxsaXNlY29uZHMgdG9cclxuICAvLyBzZWUgaWYgdGhlIGhhc2ggaGFzIGNoYW5nZWQuIEluIElFNi83IChhbmQgSUU4IG9wZXJhdGluZyBpbiBcIklFN1xyXG4gIC8vIGNvbXBhdGliaWxpdHlcIiBtb2RlKSwgYSBoaWRkZW4gSWZyYW1lIGlzIGNyZWF0ZWQgdG8gYWxsb3cgdGhlIGJhY2sgYnV0dG9uXHJcbiAgLy8gYW5kIGhhc2gtYmFzZWQgaGlzdG9yeSB0byB3b3JrLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlIGFzIGRlc2NyaWJlZCBpbiA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2U+OlxyXG4gIC8vIFxyXG4gIC8vID4gLy8gQmluZCBhbiBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSggZnVuY3Rpb24oZSkge1xyXG4gIC8vID4gICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgLy8gPiAgIC4uLlxyXG4gIC8vID4gfSk7XHJcbiAgLy8gPiBcclxuICAvLyA+IC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCk7XHJcbiAgLy8gXHJcbiAgLy8gQSBtb3JlIHZlcmJvc2UgdXNhZ2UgdGhhdCBhbGxvd3MgZm9yIGV2ZW50IG5hbWVzcGFjaW5nOlxyXG4gIC8vIFxyXG4gIC8vID4gLy8gQmluZCBhbiBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuYmluZCggJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgLy8gPiAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcclxuICAvLyA+ICAgLi4uXHJcbiAgLy8gPiB9KTtcclxuICAvLyA+IFxyXG4gIC8vID4gLy8gTWFudWFsbHkgdHJpZ2dlciB0aGUgZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApO1xyXG4gIC8vIFxyXG4gIC8vIEFkZGl0aW9uYWwgTm90ZXM6XHJcbiAgLy8gXHJcbiAgLy8gKiBUaGUgcG9sbGluZyBsb29wIGFuZCBJZnJhbWUgYXJlIG5vdCBjcmVhdGVkIHVudGlsIGF0IGxlYXN0IG9uZSBoYW5kbGVyXHJcbiAgLy8gICBpcyBhY3R1YWxseSBib3VuZCB0byB0aGUgJ2hhc2hjaGFuZ2UnIGV2ZW50LlxyXG4gIC8vICogSWYgeW91IG5lZWQgdGhlIGJvdW5kIGhhbmRsZXIocykgdG8gZXhlY3V0ZSBpbW1lZGlhdGVseSwgaW4gY2FzZXMgd2hlcmVcclxuICAvLyAgIGEgbG9jYXRpb24uaGFzaCBleGlzdHMgb24gcGFnZSBsb2FkLCB2aWEgYm9va21hcmsgb3IgcGFnZSByZWZyZXNoIGZvclxyXG4gIC8vICAgZXhhbXBsZSwgdXNlIGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoKSBvciB0aGUgbW9yZSB2ZXJib3NlIFxyXG4gIC8vICAgalF1ZXJ5KHdpbmRvdykudHJpZ2dlciggJ2hhc2hjaGFuZ2UnICkuXHJcbiAgLy8gKiBUaGUgZXZlbnQgY2FuIGJlIGJvdW5kIGJlZm9yZSBET00gcmVhZHksIGJ1dCBzaW5jZSBpdCB3b24ndCBiZSB1c2FibGVcclxuICAvLyAgIGJlZm9yZSB0aGVuIGluIElFNi83IChkdWUgdG8gdGhlIG5lY2Vzc2FyeSBJZnJhbWUpLCByZWNvbW1lbmRlZCB1c2FnZSBpc1xyXG4gIC8vICAgdG8gYmluZCBpdCBpbnNpZGUgYSBET00gcmVhZHkgaGFuZGxlci5cclxuICBcclxuICAvLyBPdmVycmlkZSBleGlzdGluZyAkLmV2ZW50LnNwZWNpYWwuaGFzaGNoYW5nZSBtZXRob2RzIChhbGxvd2luZyB0aGlzIHBsdWdpblxyXG4gIC8vIHRvIGJlIGRlZmluZWQgYWZ0ZXIgalF1ZXJ5IEJCUSBpbiBCQlEncyBzb3VyY2UgY29kZSkuXHJcbiAgc3BlY2lhbFsgc3RyX2hhc2hjaGFuZ2UgXSA9ICQuZXh0ZW5kKCBzcGVjaWFsWyBzdHJfaGFzaGNoYW5nZSBdLCB7XHJcbiAgICBcclxuICAgIC8vIENhbGxlZCBvbmx5IHdoZW4gdGhlIGZpcnN0ICdoYXNoY2hhbmdlJyBldmVudCBpcyBib3VuZCB0byB3aW5kb3cuXHJcbiAgICBzZXR1cDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIElmIHdpbmRvdy5vbmhhc2hjaGFuZ2UgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LCB0aGVyZSdzIG5vdGhpbmcgdG8gZG8uLlxyXG4gICAgICBpZiAoIHN1cHBvcnRzX29uaGFzaGNoYW5nZSApIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBPdGhlcndpc2UsIHdlIG5lZWQgdG8gY3JlYXRlIG91ciBvd24uIEFuZCB3ZSBkb24ndCB3YW50IHRvIGNhbGwgdGhpc1xyXG4gICAgICAvLyB1bnRpbCB0aGUgdXNlciBiaW5kcyB0byB0aGUgZXZlbnQsIGp1c3QgaW4gY2FzZSB0aGV5IG5ldmVyIGRvLCBzaW5jZSBpdFxyXG4gICAgICAvLyB3aWxsIGNyZWF0ZSBhIHBvbGxpbmcgbG9vcCBhbmQgcG9zc2libHkgZXZlbiBhIGhpZGRlbiBJZnJhbWUuXHJcbiAgICAgICQoIGZha2Vfb25oYXNoY2hhbmdlLnN0YXJ0ICk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBDYWxsZWQgb25seSB3aGVuIHRoZSBsYXN0ICdoYXNoY2hhbmdlJyBldmVudCBpcyB1bmJvdW5kIGZyb20gd2luZG93LlxyXG4gICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBJZiB3aW5kb3cub25oYXNoY2hhbmdlIGlzIHN1cHBvcnRlZCBuYXRpdmVseSwgdGhlcmUncyBub3RoaW5nIHRvIGRvLi5cclxuICAgICAgaWYgKCBzdXBwb3J0c19vbmhhc2hjaGFuZ2UgKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICBcclxuICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBuZWVkIHRvIHN0b3Agb3VycyAoaWYgcG9zc2libGUpLlxyXG4gICAgICAkKCBmYWtlX29uaGFzaGNoYW5nZS5zdG9wICk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9KTtcclxuICBcclxuICAvLyBmYWtlX29uaGFzaGNoYW5nZSBkb2VzIGFsbCB0aGUgd29yayBvZiB0cmlnZ2VyaW5nIHRoZSB3aW5kb3cub25oYXNoY2hhbmdlXHJcbiAgLy8gZXZlbnQgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdCwgaW5jbHVkaW5nIGNyZWF0aW5nIGFcclxuICAvLyBwb2xsaW5nIGxvb3AgdG8gd2F0Y2ggZm9yIGhhc2ggY2hhbmdlcyBhbmQgaW4gSUUgNi83IGNyZWF0aW5nIGEgaGlkZGVuXHJcbiAgLy8gSWZyYW1lIHRvIGVuYWJsZSBiYWNrIGFuZCBmb3J3YXJkLlxyXG4gIGZha2Vfb25oYXNoY2hhbmdlID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHt9LFxyXG4gICAgICB0aW1lb3V0X2lkLFxyXG4gICAgICBcclxuICAgICAgLy8gUmVtZW1iZXIgdGhlIGluaXRpYWwgaGFzaCBzbyBpdCBkb2Vzbid0IGdldCB0cmlnZ2VyZWQgaW1tZWRpYXRlbHkuXHJcbiAgICAgIGxhc3RfaGFzaCA9IGdldF9mcmFnbWVudCgpLFxyXG4gICAgICBcclxuICAgICAgZm5fcmV0dmFsID0gZnVuY3Rpb24odmFsKXsgcmV0dXJuIHZhbDsgfSxcclxuICAgICAgaGlzdG9yeV9zZXQgPSBmbl9yZXR2YWwsXHJcbiAgICAgIGhpc3RvcnlfZ2V0ID0gZm5fcmV0dmFsO1xyXG4gICAgXHJcbiAgICAvLyBTdGFydCB0aGUgcG9sbGluZyBsb29wLlxyXG4gICAgc2VsZi5zdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aW1lb3V0X2lkIHx8IHBvbGwoKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFN0b3AgdGhlIHBvbGxpbmcgbG9vcC5cclxuICAgIHNlbGYuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aW1lb3V0X2lkICYmIGNsZWFyVGltZW91dCggdGltZW91dF9pZCApO1xyXG4gICAgICB0aW1lb3V0X2lkID0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gVGhpcyBwb2xsaW5nIGxvb3AgY2hlY2tzIGV2ZXJ5ICQuZm4uaGFzaGNoYW5nZS5kZWxheSBtaWxsaXNlY29uZHMgdG8gc2VlXHJcbiAgICAvLyBpZiBsb2NhdGlvbi5oYXNoIGhhcyBjaGFuZ2VkLCBhbmQgdHJpZ2dlcnMgdGhlICdoYXNoY2hhbmdlJyBldmVudCBvblxyXG4gICAgLy8gd2luZG93IHdoZW4gbmVjZXNzYXJ5LlxyXG4gICAgZnVuY3Rpb24gcG9sbCgpIHtcclxuICAgICAgdmFyIGhhc2ggPSBnZXRfZnJhZ21lbnQoKSxcclxuICAgICAgICBoaXN0b3J5X2hhc2ggPSBoaXN0b3J5X2dldCggbGFzdF9oYXNoICk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIGhhc2ggIT09IGxhc3RfaGFzaCApIHtcclxuICAgICAgICBoaXN0b3J5X3NldCggbGFzdF9oYXNoID0gaGFzaCwgaGlzdG9yeV9oYXNoICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCh3aW5kb3cpLnRyaWdnZXIoIHN0cl9oYXNoY2hhbmdlICk7XHJcbiAgICAgICAgXHJcbiAgICAgIH0gZWxzZSBpZiAoIGhpc3RvcnlfaGFzaCAhPT0gbGFzdF9oYXNoICkge1xyXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoIC8jLiovLCAnJyApICsgaGlzdG9yeV9oYXNoO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aW1lb3V0X2lkID0gc2V0VGltZW91dCggcG9sbCwgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kZWxheSApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2XHJcbiAgICAvLyB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2IFJFTU9WRSBJRiBOT1QgU1VQUE9SVElORyBJRTYvNy84IHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZcclxuICAgIC8vIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dlxyXG4gICAgd2luZG93LmF0dGFjaEV2ZW50ICYmICF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc3VwcG9ydHNfb25oYXNoY2hhbmdlICYmIChmdW5jdGlvbigpe1xyXG4gICAgICAvLyBOb3Qgb25seSBkbyBJRTYvNyBuZWVkIHRoZSBcIm1hZ2ljYWxcIiBJZnJhbWUgdHJlYXRtZW50LCBidXQgc28gZG9lcyBJRThcclxuICAgICAgLy8gd2hlbiBydW5uaW5nIGluIFwiSUU3IGNvbXBhdGliaWxpdHlcIiBtb2RlLlxyXG4gICAgICBcclxuICAgICAgdmFyIGlmcmFtZSxcclxuICAgICAgICBpZnJhbWVfc3JjO1xyXG4gICAgICBcclxuICAgICAgLy8gV2hlbiB0aGUgZXZlbnQgaXMgYm91bmQgYW5kIHBvbGxpbmcgc3RhcnRzIGluIElFIDYvNywgY3JlYXRlIGEgaGlkZGVuXHJcbiAgICAgIC8vIElmcmFtZSBmb3IgaGlzdG9yeSBoYW5kbGluZy5cclxuICAgICAgc2VsZi5zdGFydCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCAhaWZyYW1lICkge1xyXG4gICAgICAgICAgaWZyYW1lX3NyYyA9ICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uc3JjO1xyXG4gICAgICAgICAgaWZyYW1lX3NyYyA9IGlmcmFtZV9zcmMgJiYgaWZyYW1lX3NyYyArIGdldF9mcmFnbWVudCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDcmVhdGUgaGlkZGVuIElmcmFtZS4gQXR0ZW1wdCB0byBtYWtlIElmcmFtZSBhcyBoaWRkZW4gYXMgcG9zc2libGVcclxuICAgICAgICAgIC8vIGJ5IHVzaW5nIHRlY2huaXF1ZXMgZnJvbSBodHRwOi8vd3d3LnBhY2llbGxvZ3JvdXAuY29tL2Jsb2cvP3A9NjA0LlxyXG4gICAgICAgICAgaWZyYW1lID0gJCgnPGlmcmFtZSB0YWJpbmRleD1cIi0xXCIgdGl0bGU9XCJlbXB0eVwiLz4nKS5oaWRlKClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFdoZW4gSWZyYW1lIGhhcyBjb21wbGV0ZWx5IGxvYWRlZCwgaW5pdGlhbGl6ZSB0aGUgaGlzdG9yeSBhbmRcclxuICAgICAgICAgICAgLy8gc3RhcnQgcG9sbGluZy5cclxuICAgICAgICAgICAgLm9uZSggJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIGlmcmFtZV9zcmMgfHwgaGlzdG9yeV9zZXQoIGdldF9mcmFnbWVudCgpICk7XHJcbiAgICAgICAgICAgICAgcG9sbCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBJZnJhbWUgc3JjIGlmIHNwZWNpZmllZCwgb3RoZXJ3aXNlIG5vdGhpbmcuXHJcbiAgICAgICAgICAgIC5hdHRyKCAnc3JjJywgaWZyYW1lX3NyYyB8fCAnamF2YXNjcmlwdDowJyApXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBcHBlbmQgSWZyYW1lIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGJvZHkgdG8gcHJldmVudCB1bm5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAvLyBpbml0aWFsIHBhZ2Ugc2Nyb2xsaW5nICh5ZXMsIHRoaXMgd29ya3MpLlxyXG4gICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIoICdib2R5JyApWzBdLmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFdoZW5ldmVyIGBkb2N1bWVudC50aXRsZWAgY2hhbmdlcywgdXBkYXRlIHRoZSBJZnJhbWUncyB0aXRsZSB0b1xyXG4gICAgICAgICAgLy8gcHJldHRpZnkgdGhlIGJhY2svbmV4dCBoaXN0b3J5IG1lbnUgZW50cmllcy4gU2luY2UgSUUgc29tZXRpbWVzXHJcbiAgICAgICAgICAvLyBlcnJvcnMgd2l0aCBcIlVuc3BlY2lmaWVkIGVycm9yXCIgdGhlIHZlcnkgZmlyc3QgdGltZSB0aGlzIGlzIHNldFxyXG4gICAgICAgICAgLy8gKHllcywgdmVyeSB1c2VmdWwpIHdyYXAgdGhpcyB3aXRoIGEgdHJ5L2NhdGNoIGJsb2NrLlxyXG4gICAgICAgICAgZG9jLm9ucHJvcGVydHljaGFuZ2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGlmICggZXZlbnQucHJvcGVydHlOYW1lID09PSAndGl0bGUnICkge1xyXG4gICAgICAgICAgICAgICAgaWZyYW1lLmRvY3VtZW50LnRpdGxlID0gZG9jLnRpdGxlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaChlKSB7fVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIE92ZXJyaWRlIHRoZSBcInN0b3BcIiBtZXRob2Qgc2luY2UgYW4gSUU2LzcgSWZyYW1lIHdhcyBjcmVhdGVkLiBFdmVuXHJcbiAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBsb25nZXIgYW55IGJvdW5kIGV2ZW50IGhhbmRsZXJzLCB0aGUgcG9sbGluZyBsb29wXHJcbiAgICAgIC8vIGlzIHN0aWxsIG5lY2Vzc2FyeSBmb3IgYmFjay9uZXh0IHRvIHdvcmsgYXQgYWxsIVxyXG4gICAgICBzZWxmLnN0b3AgPSBmbl9yZXR2YWw7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgaGlzdG9yeSBieSBsb29raW5nIGF0IHRoZSBoaWRkZW4gSWZyYW1lJ3MgbG9jYXRpb24uaGFzaC5cclxuICAgICAgaGlzdG9yeV9nZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZ2V0X2ZyYWdtZW50KCBpZnJhbWUubG9jYXRpb24uaHJlZiApO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgLy8gU2V0IGEgbmV3IGhpc3RvcnkgaXRlbSBieSBvcGVuaW5nIGFuZCB0aGVuIGNsb3NpbmcgdGhlIElmcmFtZVxyXG4gICAgICAvLyBkb2N1bWVudCwgKnRoZW4qIHNldHRpbmcgaXRzIGxvY2F0aW9uLmhhc2guIElmIGRvY3VtZW50LmRvbWFpbiBoYXNcclxuICAgICAgLy8gYmVlbiBzZXQsIHVwZGF0ZSB0aGF0IGFzIHdlbGwuXHJcbiAgICAgIGhpc3Rvcnlfc2V0ID0gZnVuY3Rpb24oIGhhc2gsIGhpc3RvcnlfaGFzaCApIHtcclxuICAgICAgICB2YXIgaWZyYW1lX2RvYyA9IGlmcmFtZS5kb2N1bWVudCxcclxuICAgICAgICAgIGRvbWFpbiA9ICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZG9tYWluO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICggaGFzaCAhPT0gaGlzdG9yeV9oYXNoICkge1xyXG4gICAgICAgICAgLy8gVXBkYXRlIElmcmFtZSB3aXRoIGFueSBpbml0aWFsIGBkb2N1bWVudC50aXRsZWAgdGhhdCBtaWdodCBiZSBzZXQuXHJcbiAgICAgICAgICBpZnJhbWVfZG9jLnRpdGxlID0gZG9jLnRpdGxlO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBPcGVuaW5nIHRoZSBJZnJhbWUncyBkb2N1bWVudCBhZnRlciBpdCBoYXMgYmVlbiBjbG9zZWQgaXMgd2hhdFxyXG4gICAgICAgICAgLy8gYWN0dWFsbHkgYWRkcyBhIGhpc3RvcnkgZW50cnkuXHJcbiAgICAgICAgICBpZnJhbWVfZG9jLm9wZW4oKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU2V0IGRvY3VtZW50LmRvbWFpbiBmb3IgdGhlIElmcmFtZSBkb2N1bWVudCBhcyB3ZWxsLCBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgICBkb21haW4gJiYgaWZyYW1lX2RvYy53cml0ZSggJ1xceDNjc2NyaXB0PmRvY3VtZW50LmRvbWFpbj1cIicgKyBkb21haW4gKyAnXCJcXHgzYy9zY3JpcHQ+JyApO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZnJhbWVfZG9jLmNsb3NlKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgSWZyYW1lJ3MgaGFzaCwgZm9yIGdyZWF0IGp1c3RpY2UuXHJcbiAgICAgICAgICBpZnJhbWUubG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgIH0pKCk7XHJcbiAgICAvLyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cclxuICAgIC8vIF5eXl5eXl5eXl5eXl5eXl5eXl4gUkVNT1ZFIElGIE5PVCBTVVBQT1JUSU5HIElFNi83LzggXl5eXl5eXl5eXl5eXl5eXl5eXlxyXG4gICAgLy8gXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXHJcbiAgICBcclxuICAgIHJldHVybiBzZWxmO1xyXG4gIH0pKCk7XHJcbiAgXHJcbn0pKGpRdWVyeSx0aGlzKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0LyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMuIER1YWwgTUlUL0JTRCBsaWNlbnNlICovXHJcblx0d2luZG93Lm1hdGNoTWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYSB8fCAoZnVuY3Rpb24oIGRvYywgdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdHZhciBib29sLFxyXG5cdFx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudCxcclxuXHRcdFx0cmVmTm9kZSA9IGRvY0VsZW0uZmlyc3RFbGVtZW50Q2hpbGQgfHwgZG9jRWxlbS5maXJzdENoaWxkLFxyXG5cdFx0XHQvLyBmYWtlQm9keSByZXF1aXJlZCBmb3IgPEZGNCB3aGVuIGV4ZWN1dGVkIGluIDxoZWFkPlxyXG5cdFx0XHRmYWtlQm9keSA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImJvZHlcIiApLFxyXG5cdFx0XHRkaXYgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cclxuXHRcdGRpdi5pZCA9IFwibXEtdGVzdC0xXCI7XHJcblx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7dG9wOi0xMDBlbVwiO1xyXG5cdFx0ZmFrZUJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xyXG5cdFx0ZmFrZUJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcblx0XHRyZXR1cm4gZnVuY3Rpb24ocSl7XHJcblxyXG5cdFx0XHRkaXYuaW5uZXJIVE1MID0gXCImc2h5OzxzdHlsZSBtZWRpYT1cXFwiXCIgKyBxICsgXCJcXFwiPiAjbXEtdGVzdC0xIHsgd2lkdGg6IDQycHg7IH08L3N0eWxlPlwiO1xyXG5cclxuXHRcdFx0ZG9jRWxlbS5pbnNlcnRCZWZvcmUoIGZha2VCb2R5LCByZWZOb2RlICk7XHJcblx0XHRcdGJvb2wgPSBkaXYub2Zmc2V0V2lkdGggPT09IDQyO1xyXG5cdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBmYWtlQm9keSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRtYXRjaGVzOiBib29sLFxyXG5cdFx0XHRcdG1lZGlhOiBxXHJcblx0XHRcdH07XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSggZG9jdW1lbnQgKSk7XHJcblxyXG5cdC8vICQubW9iaWxlLm1lZGlhIHVzZXMgbWF0Y2hNZWRpYSB0byByZXR1cm4gYSBib29sZWFuLlxyXG5cdCQubW9iaWxlLm1lZGlhID0gZnVuY3Rpb24oIHEgKSB7XHJcblx0XHRyZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoIHEgKS5tYXRjaGVzO1xyXG5cdH07XHJcblxyXG59KShqUXVlcnkpO1xyXG5cclxuXHQoZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHRcdHZhciBzdXBwb3J0ID0ge1xyXG5cdFx0XHR0b3VjaDogXCJvbnRvdWNoZW5kXCIgaW4gZG9jdW1lbnRcclxuXHRcdH07XHJcblxyXG5cdFx0JC5tb2JpbGUuc3VwcG9ydCA9ICQubW9iaWxlLnN1cHBvcnQgfHwge307XHJcblx0XHQkLmV4dGVuZCggJC5zdXBwb3J0LCBzdXBwb3J0ICk7XHJcblx0XHQkLmV4dGVuZCggJC5tb2JpbGUuc3VwcG9ydCwgc3VwcG9ydCApO1xyXG5cdH0oIGpRdWVyeSApKTtcclxuXHJcblx0KGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0XHQkLmV4dGVuZCggJC5zdXBwb3J0LCB7XHJcblx0XHRcdG9yaWVudGF0aW9uOiBcIm9yaWVudGF0aW9uXCIgaW4gd2luZG93ICYmIFwib25vcmllbnRhdGlvbmNoYW5nZVwiIGluIHdpbmRvd1xyXG5cdFx0fSk7XHJcblx0fSggalF1ZXJ5ICkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyB0aHggTW9kZXJuaXpyXHJcbmZ1bmN0aW9uIHByb3BFeGlzdHMoIHByb3AgKSB7XHJcblx0dmFyIHVjX3Byb3AgPSBwcm9wLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnN1YnN0ciggMSApLFxyXG5cdFx0cHJvcHMgPSAoIHByb3AgKyBcIiBcIiArIHZlbmRvcnMuam9pbiggdWNfcHJvcCArIFwiIFwiICkgKyB1Y19wcm9wICkuc3BsaXQoIFwiIFwiICksXHJcblx0XHR2O1xyXG5cclxuXHRmb3IgKCB2IGluIHByb3BzICkge1xyXG5cdFx0aWYgKCBmYkNTU1sgcHJvcHNbIHYgXSBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxudmFyIGZha2VCb2R5ID0gJCggXCI8Ym9keT5cIiApLnByZXBlbmRUbyggXCJodG1sXCIgKSxcclxuXHRmYkNTUyA9IGZha2VCb2R5WyAwIF0uc3R5bGUsXHJcblx0dmVuZG9ycyA9IFsgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJPXCIgXSxcclxuXHR3ZWJvcyA9IFwicGFsbUdldFJlc291cmNlXCIgaW4gd2luZG93LCAvL29ubHkgdXNlZCB0byBydWxlIG91dCBzY3JvbGxUb3BcclxuXHRvcGVyYW1pbmkgPSB3aW5kb3cub3BlcmFtaW5pICYmICh7fSkudG9TdHJpbmcuY2FsbCggd2luZG93Lm9wZXJhbWluaSApID09PSBcIltvYmplY3QgT3BlcmFNaW5pXVwiLFxyXG5cdGJiID0gd2luZG93LmJsYWNrYmVycnkgJiYgIXByb3BFeGlzdHMoIFwiLXdlYmtpdC10cmFuc2Zvcm1cIiApLCAvL29ubHkgdXNlZCB0byBydWxlIG91dCBib3ggc2hhZG93LCBhcyBpdCdzIGZpbGxlZCBvcGFxdWUgb24gQkIgNSBhbmQgbG93ZXJcclxuXHRub2tpYUxURTdfMztcclxuXHJcbi8vIGlubGluZSBTVkcgc3VwcG9ydCB0ZXN0XHJcbmZ1bmN0aW9uIGlubGluZVNWRygpIHtcclxuXHQvLyBUaGFua3MgTW9kZXJuaXpyICYgRXJpayBEYWhsc3Ryb21cclxuXHR2YXIgdyA9IHdpbmRvdyxcclxuXHRcdHN2ZyA9ICEhdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgJiYgISF3LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyggXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiICkuY3JlYXRlU1ZHUmVjdCAmJiAhKCB3Lm9wZXJhICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJDaHJvbWVcIiApID09PSAtMSApLFxyXG5cdFx0c3VwcG9ydCA9IGZ1bmN0aW9uKCBkYXRhICkge1xyXG5cdFx0XHRpZiAoICEoIGRhdGEgJiYgc3ZnICkgKSB7XHJcblx0XHRcdFx0JCggXCJodG1sXCIgKS5hZGRDbGFzcyggXCJ1aS1ub3N2Z1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRpbWcgPSBuZXcgdy5JbWFnZSgpO1xyXG5cclxuXHRpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0c3VwcG9ydCggZmFsc2UgKTtcclxuXHR9O1xyXG5cdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHN1cHBvcnQoIGltZy53aWR0aCA9PT0gMSAmJiBpbWcuaGVpZ2h0ID09PSAxICk7XHJcblx0fTtcclxuXHRpbWcuc3JjID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3l3QUFBQUFBUUFCQUFBQ0FVd0FPdz09XCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybTNkVGVzdCgpIHtcclxuXHR2YXIgbXFQcm9wID0gXCJ0cmFuc2Zvcm0tM2RcIixcclxuXHRcdC8vIEJlY2F1c2UgdGhlIGB0cmFuc2xhdGUzZGAgdGVzdCBiZWxvdyB0aHJvd3MgZmFsc2UgcG9zaXRpdmVzIGluIEFuZHJvaWQ6XHJcblx0XHRyZXQgPSAkLm1vYmlsZS5tZWRpYSggXCIoLVwiICsgdmVuZG9ycy5qb2luKCBcIi1cIiArIG1xUHJvcCArIFwiKSwoLVwiICkgKyBcIi1cIiArIG1xUHJvcCArIFwiKSwoXCIgKyBtcVByb3AgKyBcIilcIiApLFxyXG5cdFx0ZWwsIHRyYW5zZm9ybXMsIHQ7XHJcblxyXG5cdGlmICggcmV0ICkge1xyXG5cdFx0cmV0dXJuICEhcmV0O1xyXG5cdH1cclxuXHJcblx0ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0dHJhbnNmb3JtcyA9IHtcclxuXHRcdC8vIFdl4oCZcmUgb21pdHRpbmcgT3BlcmEgZm9yIHRoZSB0aW1lIGJlaW5nOyBNUyB1c2VzIHVucHJlZml4ZWQuXHJcblx0XHRcIk1velRyYW5zZm9ybVwiOiBcIi1tb3otdHJhbnNmb3JtXCIsXHJcblx0XHRcInRyYW5zZm9ybVwiOiBcInRyYW5zZm9ybVwiXHJcblx0fTtcclxuXHJcblx0ZmFrZUJvZHkuYXBwZW5kKCBlbCApO1xyXG5cclxuXHRmb3IgKCB0IGluIHRyYW5zZm9ybXMgKSB7XHJcblx0XHRpZiAoIGVsLnN0eWxlWyB0IF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWwuc3R5bGVbIHQgXSA9IFwidHJhbnNsYXRlM2QoIDEwMHB4LCAxcHgsIDFweCApXCI7XHJcblx0XHRcdHJldCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbCApLmdldFByb3BlcnR5VmFsdWUoIHRyYW5zZm9ybXNbIHQgXSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gKCAhIXJldCAmJiByZXQgIT09IFwibm9uZVwiICk7XHJcbn1cclxuXHJcbi8vIFRlc3QgZm9yIGR5bmFtaWMtdXBkYXRpbmcgYmFzZSB0YWcgc3VwcG9ydCAoIGFsbG93cyB1cyB0byBhdm9pZCBocmVmLHNyYyBhdHRyIHJld3JpdGluZyApXHJcbmZ1bmN0aW9uIGJhc2VUYWdUZXN0KCkge1xyXG5cdHZhciBmYXV4QmFzZSA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lICsgXCJ1aS1kaXIvXCIsXHJcblx0XHRiYXNlID0gJCggXCJoZWFkIGJhc2VcIiApLFxyXG5cdFx0ZmF1eEVsZSA9IG51bGwsXHJcblx0XHRocmVmID0gXCJcIixcclxuXHRcdGxpbmssIHJlYmFzZTtcclxuXHJcblx0aWYgKCAhYmFzZS5sZW5ndGggKSB7XHJcblx0XHRiYXNlID0gZmF1eEVsZSA9ICQoIFwiPGJhc2U+XCIsIHsgXCJocmVmXCI6IGZhdXhCYXNlIH0pLmFwcGVuZFRvKCBcImhlYWRcIiApO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRocmVmID0gYmFzZS5hdHRyKCBcImhyZWZcIiApO1xyXG5cdH1cclxuXHJcblx0bGluayA9ICQoIFwiPGEgaHJlZj0ndGVzdHVybCcgLz5cIiApLnByZXBlbmRUbyggZmFrZUJvZHkgKTtcclxuXHRyZWJhc2UgPSBsaW5rWyAwIF0uaHJlZjtcclxuXHRiYXNlWyAwIF0uaHJlZiA9IGhyZWYgfHwgbG9jYXRpb24ucGF0aG5hbWU7XHJcblxyXG5cdGlmICggZmF1eEVsZSApIHtcclxuXHRcdGZhdXhFbGUucmVtb3ZlKCk7XHJcblx0fVxyXG5cdHJldHVybiByZWJhc2UuaW5kZXhPZiggZmF1eEJhc2UgKSA9PT0gMDtcclxufVxyXG5cclxuLy8gVGhhbmtzIE1vZGVybml6clxyXG5mdW5jdGlvbiBjc3NQb2ludGVyRXZlbnRzVGVzdCgpIHtcclxuXHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwieFwiICksXHJcblx0XHRkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRnZXRDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUsXHJcblx0XHRzdXBwb3J0cztcclxuXHJcblx0aWYgKCAhKCBcInBvaW50ZXJFdmVudHNcIiBpbiBlbGVtZW50LnN0eWxlICkgKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcImF1dG9cIjtcclxuXHRlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcInhcIjtcclxuXHRkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGVsZW1lbnQgKTtcclxuXHRzdXBwb3J0cyA9IGdldENvbXB1dGVkU3R5bGUgJiZcclxuXHRnZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50LCBcIlwiICkucG9pbnRlckV2ZW50cyA9PT0gXCJhdXRvXCI7XHJcblx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBlbGVtZW50ICk7XHJcblx0cmV0dXJuICEhc3VwcG9ydHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJvdW5kaW5nUmVjdCgpIHtcclxuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdHJldHVybiB0eXBlb2YgZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gXCJ1bmRlZmluZWRcIjtcclxufVxyXG5cclxuLy8gbm9uLVVBLWJhc2VkIElFIHZlcnNpb24gY2hlY2sgYnkgSmFtZXMgUGFkb2xzZXksIG1vZGlmaWVkIGJ5IGpkYWx0b24gLSBmcm9tIGh0dHA6Ly9naXN0LmdpdGh1Yi5jb20vNTI3NjgzXHJcbi8vIGFsbG93cyBmb3IgaW5jbHVzaW9uIG9mIElFIDYrLCBpbmNsdWRpbmcgV2luZG93cyBNb2JpbGUgN1xyXG4kLmV4dGVuZCggJC5tb2JpbGUsIHsgYnJvd3Nlcjoge30gfSApO1xyXG4kLm1vYmlsZS5icm93c2VyLm9sZElFID0gKGZ1bmN0aW9uKCkge1xyXG5cdHZhciB2ID0gMyxcclxuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcclxuXHRcdGEgPSBkaXYuYWxsIHx8IFtdO1xyXG5cclxuXHRkbyB7XHJcblx0XHRkaXYuaW5uZXJIVE1MID0gXCI8IS0tW2lmIGd0IElFIFwiICsgKCArK3YgKSArIFwiXT48YnI+PCFbZW5kaWZdLS0+XCI7XHJcblx0fSB3aGlsZSggYVswXSApO1xyXG5cclxuXHRyZXR1cm4gdiA+IDQgPyB2IDogIXY7XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBmaXhlZFBvc2l0aW9uKCkge1xyXG5cdHZhciB3ID0gd2luZG93LFxyXG5cdFx0dWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0cGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0sXHJcblx0XHQvLyBSZW5kZXJpbmcgZW5naW5lIGlzIFdlYmtpdCwgYW5kIGNhcHR1cmUgbWFqb3IgdmVyc2lvblxyXG5cdFx0d2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOV0rKS8gKSxcclxuXHRcdHdrdmVyc2lvbiA9ICEhd2ttYXRjaCAmJiB3a21hdGNoWyAxIF0sXHJcblx0XHRmZm1hdGNoID0gdWEubWF0Y2goIC9GZW5uZWNcXC8oWzAtOV0rKS8gKSxcclxuXHRcdGZmdmVyc2lvbiA9ICEhZmZtYXRjaCAmJiBmZm1hdGNoWyAxIF0sXHJcblx0XHRvcGVyYW1tb2JpbGVtYXRjaCA9IHVhLm1hdGNoKCAvT3BlcmEgTW9iaVxcLyhbMC05XSspLyApLFxyXG5cdFx0b212ZXJzaW9uID0gISFvcGVyYW1tb2JpbGVtYXRjaCAmJiBvcGVyYW1tb2JpbGVtYXRjaFsgMSBdO1xyXG5cclxuXHRpZiAoXHJcblx0XHQvLyBpT1MgNC4zIGFuZCBvbGRlciA6IFBsYXRmb3JtIGlzIGlQaG9uZS9QYWQvVG91Y2ggYW5kIFdlYmtpdCB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1MzQgKGlvczUpXHJcblx0XHQoICggcGxhdGZvcm0uaW5kZXhPZiggXCJpUGhvbmVcIiApID4gLTEgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUGFkXCIgKSA+IC0xICB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQb2RcIiApID4gLTEgKSAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0ICkgfHxcclxuXHRcdC8vIE9wZXJhIE1pbmlcclxuXHRcdCggdy5vcGVyYW1pbmkgJiYgKHt9KS50b1N0cmluZy5jYWxsKCB3Lm9wZXJhbWluaSApID09PSBcIltvYmplY3QgT3BlcmFNaW5pXVwiICkgfHxcclxuXHRcdCggb3BlcmFtbW9iaWxlbWF0Y2ggJiYgb212ZXJzaW9uIDwgNzQ1OCApXHR8fFxyXG5cdFx0Ly9BbmRyb2lkIGx0ZSAyLjE6IFBsYXRmb3JtIGlzIEFuZHJvaWQgYW5kIFdlYmtpdCB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1MzMgKEFuZHJvaWQgMi4yKVxyXG5cdFx0KCB1YS5pbmRleE9mKCBcIkFuZHJvaWRcIiApID4gLTEgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzMyApIHx8XHJcblx0XHQvLyBGaXJlZm94IE1vYmlsZSBiZWZvcmUgNi4wIC1cclxuXHRcdCggZmZ2ZXJzaW9uICYmIGZmdmVyc2lvbiA8IDYgKSB8fFxyXG5cdFx0Ly8gV2ViT1MgbGVzcyB0aGFuIDNcclxuXHRcdCggXCJwYWxtR2V0UmVzb3VyY2VcIiBpbiB3aW5kb3cgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCApXHR8fFxyXG5cdFx0Ly8gTWVlR29cclxuXHRcdCggdWEuaW5kZXhPZiggXCJNZWVHb1wiICkgPiAtMSAmJiB1YS5pbmRleE9mKCBcIk5va2lhQnJvd3Nlci84LjUuMFwiICkgPiAtMSApICkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbiQuZXh0ZW5kKCAkLnN1cHBvcnQsIHtcclxuXHQvLyBOb3RlLCBDaHJvbWUgZm9yIGlPUyBoYXMgYW4gZXh0cmVtZWx5IHF1aXJreSBpbXBsZW1lbnRhdGlvbiBvZiBwb3BzdGF0ZS5cclxuXHQvLyBXZSd2ZSBjaG9zZW4gdG8gdGFrZSB0aGUgc2hvcnRlc3QgcGF0aCB0byBhIGJ1ZyBmaXggaGVyZSBmb3IgaXNzdWUgIzU0MjZcclxuXHQvLyBTZWUgdGhlIGZvbGxvd2luZyBsaW5rIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVnZXggY2hvc2VuXHJcblx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vY2hyb21lL21vYmlsZS9kb2NzL3VzZXItYWdlbnQjY2hyb21lX2Zvcl9pb3NfdXNlci1hZ2VudFxyXG5cdHB1c2hTdGF0ZTogXCJwdXNoU3RhdGVcIiBpbiBoaXN0b3J5ICYmXHJcblx0XHRcInJlcGxhY2VTdGF0ZVwiIGluIGhpc3RvcnkgJiZcclxuXHRcdC8vIFdoZW4gcnVubmluZyBpbnNpZGUgYSBGRiBpZnJhbWUsIGNhbGxpbmcgcmVwbGFjZVN0YXRlIGNhdXNlcyBhbiBlcnJvclxyXG5cdFx0ISggd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJGaXJlZm94XCIgKSA+PSAwICYmIHdpbmRvdy50b3AgIT09IHdpbmRvdyApICYmXHJcblx0XHQoIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvQ3JpT1MvKSA9PT0gLTEgKSxcclxuXHJcblx0bWVkaWFxdWVyeTogJC5tb2JpbGUubWVkaWEoIFwib25seSBhbGxcIiApLFxyXG5cdGNzc1BzZXVkb0VsZW1lbnQ6ICEhcHJvcEV4aXN0cyggXCJjb250ZW50XCIgKSxcclxuXHR0b3VjaE92ZXJmbG93OiAhIXByb3BFeGlzdHMoIFwib3ZlcmZsb3dTY3JvbGxpbmdcIiApLFxyXG5cdGNzc1RyYW5zZm9ybTNkOiB0cmFuc2Zvcm0zZFRlc3QoKSxcclxuXHRib3hTaGFkb3c6ICEhcHJvcEV4aXN0cyggXCJib3hTaGFkb3dcIiApICYmICFiYixcclxuXHRmaXhlZFBvc2l0aW9uOiBmaXhlZFBvc2l0aW9uKCksXHJcblx0c2Nyb2xsVG9wOiAoXCJwYWdlWE9mZnNldFwiIGluIHdpbmRvdyB8fFxyXG5cdFx0XCJzY3JvbGxUb3BcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHxcclxuXHRcdFwic2Nyb2xsVG9wXCIgaW4gZmFrZUJvZHlbIDAgXSkgJiYgIXdlYm9zICYmICFvcGVyYW1pbmksXHJcblxyXG5cdGR5bmFtaWNCYXNlVGFnOiBiYXNlVGFnVGVzdCgpLFxyXG5cdGNzc1BvaW50ZXJFdmVudHM6IGNzc1BvaW50ZXJFdmVudHNUZXN0KCksXHJcblx0Ym91bmRpbmdSZWN0OiBib3VuZGluZ1JlY3QoKSxcclxuXHRpbmxpbmVTVkc6IGlubGluZVNWR1xyXG59KTtcclxuXHJcbmZha2VCb2R5LnJlbW92ZSgpO1xyXG5cclxuLy8gJC5tb2JpbGUuYWpheEJsYWNrbGlzdCBpcyB1c2VkIHRvIG92ZXJyaWRlIGFqYXhFbmFibGVkIG9uIHBsYXRmb3JtcyB0aGF0IGhhdmUga25vd24gY29uZmxpY3RzIHdpdGggaGFzaCBoaXN0b3J5IHVwZGF0ZXMgKEJCNSwgU3ltYmlhbilcclxuLy8gb3IgdGhhdCBnZW5lcmFsbHkgd29yayBiZXR0ZXIgYnJvd3NpbmcgaW4gcmVndWxhciBodHRwIGZvciBmdWxsIHBhZ2UgcmVmcmVzaGVzIChPcGVyYSBNaW5pKVxyXG4vLyBOb3RlOiBUaGlzIGRldGVjdGlvbiBiZWxvdyBpcyB1c2VkIGFzIGEgbGFzdCByZXNvcnQuXHJcbi8vIFdlIHJlY29tbWVuZCBvbmx5IHVzaW5nIHRoZXNlIGRldGVjdGlvbiBtZXRob2RzIHdoZW4gYWxsIG90aGVyIG1vcmUgcmVsaWFibGUvZm9yd2FyZC1sb29raW5nIGFwcHJvYWNoZXMgYXJlIG5vdCBwb3NzaWJsZVxyXG5ub2tpYUxURTdfMyA9IChmdW5jdGlvbigpIHtcclxuXHJcblx0dmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XHJcblxyXG5cdC8vVGhlIGZvbGxvd2luZyBpcyBhbiBhdHRlbXB0IHRvIG1hdGNoIE5va2lhIGJyb3dzZXJzIHRoYXQgYXJlIHJ1bm5pbmcgU3ltYmlhbi9zNjAsIHdpdGggd2Via2l0LCB2ZXJzaW9uIDcuMyBvciBvbGRlclxyXG5cdHJldHVybiB1YS5pbmRleE9mKCBcIk5va2lhXCIgKSA+IC0xICYmXHJcblx0XHRcdCggdWEuaW5kZXhPZiggXCJTeW1iaWFuLzNcIiApID4gLTEgfHwgdWEuaW5kZXhPZiggXCJTZXJpZXM2MC81XCIgKSA+IC0xICkgJiZcclxuXHRcdFx0dWEuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSAmJlxyXG5cdFx0XHR1YS5tYXRjaCggLyhCcm93c2VyTkd8Tm9raWFCcm93c2VyKVxcLzdcXC5bMC0zXS8gKTtcclxufSkoKTtcclxuXHJcbi8vIFN1cHBvcnQgY29uZGl0aW9ucyB0aGF0IG11c3QgYmUgbWV0IGluIG9yZGVyIHRvIHByb2NlZWRcclxuLy8gZGVmYXVsdCBlbmhhbmNlZCBxdWFsaWZpY2F0aW9ucyBhcmUgbWVkaWEgcXVlcnkgc3VwcG9ydCBPUiBJRSA3K1xyXG5cclxuJC5tb2JpbGUuZ3JhZGVBID0gZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuICggKCAkLnN1cHBvcnQubWVkaWFxdWVyeSAmJiAkLnN1cHBvcnQuY3NzUHNldWRvRWxlbWVudCApIHx8ICQubW9iaWxlLmJyb3dzZXIub2xkSUUgJiYgJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSA+PSA4ICkgJiYgKCAkLnN1cHBvcnQuYm91bmRpbmdSZWN0IHx8ICQuZm4uanF1ZXJ5Lm1hdGNoKC8xXFwuWzAtNytdXFwuWzAtOStdPy8pICE9PSBudWxsICk7XHJcbn07XHJcblxyXG4kLm1vYmlsZS5hamF4QmxhY2tsaXN0ID1cclxuXHRcdFx0Ly8gQmxhY2tCZXJyeSBicm93c2VycywgcHJlLXdlYmtpdFxyXG5cdFx0XHR3aW5kb3cuYmxhY2tiZXJyeSAmJiAhd2luZG93LldlYktpdFBvaW50IHx8XHJcblx0XHRcdC8vIE9wZXJhIE1pbmlcclxuXHRcdFx0b3BlcmFtaW5pIHx8XHJcblx0XHRcdC8vIFN5bWJpYW4gd2Via2l0cyBwcmUgNy4zXHJcblx0XHRcdG5va2lhTFRFN18zO1xyXG5cclxuLy8gTGFzdGx5LCB0aGlzIHdvcmthcm91bmQgaXMgdGhlIG9ubHkgd2F5IHdlJ3ZlIGZvdW5kIHNvIGZhciB0byBnZXQgcHJlIDcuMyBTeW1iaWFuIHdlYmtpdCBkZXZpY2VzXHJcbi8vIHRvIHJlbmRlciB0aGUgc3R5bGVzaGVldHMgd2hlbiB0aGV5J3JlIHJlZmVyZW5jZWQgYmVmb3JlIHRoaXMgc2NyaXB0LCBhcyB3ZSdkIHJlY29tbWVuZCBkb2luZy5cclxuLy8gVGhpcyBzaW1wbHkgcmVhcHBlbmRzIHRoZSBDU1MgaW4gcGxhY2UsIHdoaWNoIGZvciBzb21lIHJlYXNvbiBtYWtlcyBpdCBhcHBseVxyXG5pZiAoIG5va2lhTFRFN18zICkge1xyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHQkKCBcImhlYWQgbGlua1tyZWw9J3N0eWxlc2hlZXQnXVwiICkuYXR0ciggXCJyZWxcIiwgXCJhbHRlcm5hdGUgc3R5bGVzaGVldFwiICkuYXR0ciggXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIgKTtcclxuXHR9KTtcclxufVxyXG5cclxuLy8gRm9yIHJ1bGluZyBvdXQgc2hhZG93cyB2aWEgY3NzXHJcbmlmICggISQuc3VwcG9ydC5ib3hTaGFkb3cgKSB7XHJcblx0JCggXCJodG1sXCIgKS5hZGRDbGFzcyggXCJ1aS1ub2JveHNoYWRvd1wiICk7XHJcbn1cclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgJHdpbiA9ICQubW9iaWxlLndpbmRvdywgc2VsZixcclxuXHRcdGR1bW15Rm5Ub0luaXROYXZpZ2F0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0fTtcclxuXHJcblx0JC5ldmVudC5zcGVjaWFsLmJlZm9yZW5hdmlnYXRlID0ge1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkd2luLm9uKCBcIm5hdmlnYXRlXCIsIGR1bW15Rm5Ub0luaXROYXZpZ2F0ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCR3aW4ub2ZmKCBcIm5hdmlnYXRlXCIsIGR1bW15Rm5Ub0luaXROYXZpZ2F0ZSApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZSA9IHNlbGYgPSB7XHJcblx0XHRib3VuZDogZmFsc2UsXHJcblxyXG5cdFx0cHVzaFN0YXRlRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHRvcmlnaW5hbEV2ZW50TmFtZTogdW5kZWZpbmVkLFxyXG5cclxuXHRcdC8vIElmIHB1c2hzdGF0ZSBzdXBwb3J0IGlzIHByZXNlbnQgYW5kIHB1c2ggc3RhdGUgc3VwcG9ydCBpcyBkZWZpbmVkIHRvXHJcblx0XHQvLyBiZSB0cnVlIG9uIHRoZSBtb2JpbGUgbmFtZXNwYWNlLlxyXG5cdFx0aXNQdXNoU3RhdGVFbmFibGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQuc3VwcG9ydC5wdXNoU3RhdGUgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wdXNoU3RhdGVFbmFibGVkID09PSB0cnVlICYmXHJcblx0XHRcdFx0dGhpcy5pc0hhc2hDaGFuZ2VFbmFibGVkKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vICEhIGFzc3VtZXMgbW9iaWxlIG5hbWVzcGFjZSBpcyBwcmVzZW50XHJcblx0XHRpc0hhc2hDaGFuZ2VFbmFibGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkID09PSB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGEgbG90IG9mIGR1cGxpY2F0aW9uIGJldHdlZW4gcG9wc3RhdGUgYW5kIGhhc2hjaGFuZ2VcclxuXHRcdHBvcHN0YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBuZXdFdmVudCA9IG5ldyAkLkV2ZW50KCBcIm5hdmlnYXRlXCIgKSxcclxuXHRcdFx0XHRiZWZvcmVOYXZpZ2F0ZSA9IG5ldyAkLkV2ZW50KCBcImJlZm9yZW5hdmlnYXRlXCIgKSxcclxuXHRcdFx0XHRzdGF0ZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgfHwge307XHJcblxyXG5cdFx0XHRiZWZvcmVOYXZpZ2F0ZS5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblx0XHRcdCR3aW4udHJpZ2dlciggYmVmb3JlTmF2aWdhdGUgKTtcclxuXHJcblx0XHRcdGlmICggYmVmb3JlTmF2aWdhdGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50Lmhpc3RvcnlTdGF0ZSApIHtcclxuXHRcdFx0XHQkLmV4dGVuZChzdGF0ZSwgZXZlbnQuaGlzdG9yeVN0YXRlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBvcmlnaW5hbCBldmVudCBpcyB0cmFja2VkIGZvciB0aGUgZW5kXHJcblx0XHRcdC8vIHVzZXIgdG8gaW5zcGVjdCBpbmNhc2UgdGhleSB3YW50IHRvIGRvIHNvbWV0aGluZyBzcGVjaWFsXHJcblx0XHRcdG5ld0V2ZW50Lm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHJcblx0XHRcdC8vIE5PVEUgd2UgbGV0IHRoZSBjdXJyZW50IHN0YWNrIHVud2luZCBiZWNhdXNlIGFueSBhc3NpZ25tZW50IHRvXHJcblx0XHRcdC8vICAgICAgbG9jYXRpb24uaGFzaCB3aWxsIHN0b3AgdGhlIHdvcmxkIGFuZCBydW4gdGhpcyBldmVudCBoYW5kbGVyLiBCeVxyXG5cdFx0XHQvLyAgICAgIGRvaW5nIHRoaXMgd2UgY3JlYXRlIGEgc2ltaWxhciBiZWhhdmlvciB0byBoYXNoY2hhbmdlIG9uIGhhc2hcclxuXHRcdFx0Ly8gICAgICBhc3NpZ25tZW50XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JHdpbi50cmlnZ2VyKCBuZXdFdmVudCwge1xyXG5cdFx0XHRcdFx0c3RhdGU6IHN0YXRlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0sIDApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXNoY2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgLyosIGRhdGEgKi8gKSB7XHJcblx0XHRcdHZhciBuZXdFdmVudCA9IG5ldyAkLkV2ZW50KCBcIm5hdmlnYXRlXCIgKSxcclxuXHRcdFx0XHRiZWZvcmVOYXZpZ2F0ZSA9IG5ldyAkLkV2ZW50KCBcImJlZm9yZW5hdmlnYXRlXCIgKTtcclxuXHJcblx0XHRcdGJlZm9yZU5hdmlnYXRlLm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHRcdFx0JHdpbi50cmlnZ2VyKCBiZWZvcmVOYXZpZ2F0ZSApO1xyXG5cclxuXHRcdFx0aWYgKCBiZWZvcmVOYXZpZ2F0ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgb3JpZ2luYWwgZXZlbnQgaXMgdHJhY2tlZCBmb3IgdGhlIGVuZFxyXG5cdFx0XHQvLyB1c2VyIHRvIGluc3BlY3QgaW5jYXNlIHRoZXkgd2FudCB0byBkbyBzb21ldGhpbmcgc3BlY2lhbFxyXG5cdFx0XHRuZXdFdmVudC5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblxyXG5cdFx0XHQvLyBUcmlnZ2VyIHRoZSBoYXNoY2hhbmdlIHdpdGggc3RhdGUgcHJvdmlkZWQgYnkgdGhlIHVzZXJcclxuXHRcdFx0Ly8gdGhhdCBhbHRlcmVkIHRoZSBoYXNoXHJcblx0XHRcdCR3aW4udHJpZ2dlciggbmV3RXZlbnQsIHtcclxuXHRcdFx0XHQvLyBVc2VycyB0aGF0IHdhbnQgdG8gZnVsbHkgbm9ybWFsaXplIHRoZSB0d28gZXZlbnRzXHJcblx0XHRcdFx0Ly8gd2lsbCBuZWVkIHRvIGRvIGhpc3RvcnkgbWFuYWdlbWVudCBkb3duIHRoZSBzdGFjayBhbmRcclxuXHRcdFx0XHQvLyBhZGQgdGhlIHN0YXRlIHRvIHRoZSBldmVudCBiZWZvcmUgdGhpcyBiaW5kaW5nIGlzIGZpcmVkXHJcblx0XHRcdFx0Ly8gVE9ETyBjb25zaWRlciBhbGxvd2luZyBmb3IgdGhlIGV4cGxpY2l0IGFkZGl0aW9uIG9mIGNhbGxiYWNrc1xyXG5cdFx0XHRcdC8vICAgICAgdG8gYmUgZmlyZWQgYmVmb3JlIHRoaXMgdmFsdWUgaXMgc2V0IHRvIGF2b2lkIGV2ZW50IHRpbWluZyBpc3N1ZXNcclxuXHRcdFx0XHRzdGF0ZTogZXZlbnQuaGFzaGNoYW5nZVN0YXRlIHx8IHt9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIFdlIHJlYWxseSBvbmx5IHdhbnQgdG8gc2V0IHRoaXMgdXAgb25jZVxyXG5cdFx0Ly8gICAgICBidXQgSSdtIG5vdCBjbGVhciBpZiB0aGVyZSdzIGEgYmV0ZXIgd2F5IHRvIGFjaGlldmVcclxuXHRcdC8vICAgICAgdGhpcyB3aXRoIHRoZSBqUXVlcnkgc3BlY2lhbCBldmVudCBzdHJ1Y3R1cmVcclxuXHRcdHNldHVwOiBmdW5jdGlvbiggLyogZGF0YSwgbmFtZXNwYWNlcyAqLyApIHtcclxuXHRcdFx0aWYgKCBzZWxmLmJvdW5kICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5ib3VuZCA9IHRydWU7XHJcblxyXG5cdFx0XHRpZiAoIHNlbGYuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0c2VsZi5vcmlnaW5hbEV2ZW50TmFtZSA9IFwicG9wc3RhdGVcIjtcclxuXHRcdFx0XHQkd2luLmJpbmQoIFwicG9wc3RhdGUubmF2aWdhdGVcIiwgc2VsZi5wb3BzdGF0ZSApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBzZWxmLmlzSGFzaENoYW5nZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRzZWxmLm9yaWdpbmFsRXZlbnROYW1lID0gXCJoYXNoY2hhbmdlXCI7XHJcblx0XHRcdFx0JHdpbi5iaW5kKCBcImhhc2hjaGFuZ2UubmF2aWdhdGVcIiwgc2VsZi5oYXNoY2hhbmdlICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdFx0dmFyIHBhdGgsICRiYXNlLCBkaWFsb2dIYXNoS2V5ID0gXCImdWktc3RhdGU9ZGlhbG9nXCI7XHJcblxyXG5cdFx0JC5tb2JpbGUucGF0aCA9IHBhdGggPSB7XHJcblx0XHRcdHVpU3RhdGVLZXk6IFwiJnVpLXN0YXRlXCIsXHJcblxyXG5cdFx0XHQvLyBUaGlzIHNjYXJ5IGxvb2tpbmcgcmVndWxhciBleHByZXNzaW9uIHBhcnNlcyBhbiBhYnNvbHV0ZSBVUkwgb3IgaXRzIHJlbGF0aXZlXHJcblx0XHRcdC8vIHZhcmlhbnRzIChwcm90b2NvbCwgc2l0ZSwgZG9jdW1lbnQsIHF1ZXJ5LCBhbmQgaGFzaCksIGludG8gdGhlIHZhcmlvdXNcclxuXHRcdFx0Ly8gY29tcG9uZW50cyAocHJvdG9jb2wsIGhvc3QsIHBhdGgsIHF1ZXJ5LCBmcmFnbWVudCwgZXRjIHRoYXQgbWFrZSB1cCB0aGVcclxuXHRcdFx0Ly8gVVJMIGFzIHdlbGwgYXMgc29tZSBvdGhlciBjb21tb25seSB1c2VkIHN1Yi1wYXJ0cy4gV2hlbiB1c2VkIHdpdGggUmVnRXhwLmV4ZWMoKVxyXG5cdFx0XHQvLyBvciBTdHJpbmcubWF0Y2gsIGl0IHBhcnNlcyB0aGUgVVJMIGludG8gYSByZXN1bHRzIGFycmF5IHRoYXQgbG9va3MgbGlrZSB0aGlzOlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyAgICAgWzBdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwL21haWwvaW5ib3g/bXNnPTEyMzQmdHlwZT11bnJlYWQjbXNnLWNvbnRlbnRcclxuXHRcdFx0Ly8gICAgIFsxXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MC9tYWlsL2luYm94P21zZz0xMjM0JnR5cGU9dW5yZWFkXHJcblx0XHRcdC8vICAgICBbMl06IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODAvbWFpbC9pbmJveFxyXG5cdFx0XHQvLyAgICAgWzNdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwXHJcblx0XHRcdC8vICAgICBbNF06IGh0dHA6XHJcblx0XHRcdC8vICAgICBbNV06IC8vXHJcblx0XHRcdC8vICAgICBbNl06IGpibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MFxyXG5cdFx0XHQvLyAgICAgWzddOiBqYmxhczpwYXNzd29yZFxyXG5cdFx0XHQvLyAgICAgWzhdOiBqYmxhc1xyXG5cdFx0XHQvLyAgICAgWzldOiBwYXNzd29yZFxyXG5cdFx0XHQvLyAgICBbMTBdOiBteWNvbXBhbnkuY29tOjgwODBcclxuXHRcdFx0Ly8gICAgWzExXTogbXljb21wYW55LmNvbVxyXG5cdFx0XHQvLyAgICBbMTJdOiA4MDgwXHJcblx0XHRcdC8vICAgIFsxM106IC9tYWlsL2luYm94XHJcblx0XHRcdC8vICAgIFsxNF06IC9tYWlsL1xyXG5cdFx0XHQvLyAgICBbMTVdOiBpbmJveFxyXG5cdFx0XHQvLyAgICBbMTZdOiA/bXNnPTEyMzQmdHlwZT11bnJlYWRcclxuXHRcdFx0Ly8gICAgWzE3XTogI21zZy1jb250ZW50XHJcblx0XHRcdC8vXHJcblx0XHRcdHVybFBhcnNlUkU6IC9eXFxzKigoKChbXjpcXC8jXFw/XSs6KT8oPzooXFwvXFwvKSgoPzooKFteOkBcXC8jXFw/XSspKD86XFw6KFteOkBcXC8jXFw/XSspKT8pQCk/KChbXjpcXC8jXFw/XFxdXFxbXSt8XFxbW15cXC9cXF1AIz9dK1xcXSkoPzpcXDooWzAtOV0rKSk/KSk/KT8pPygoXFwvPyg/OlteXFwvXFw/I10rXFwvKykqKShbXlxcPyNdKikpKT8oXFw/W14jXSspPykoIy4qKT8vLFxyXG5cclxuXHRcdFx0Ly8gQWJzdHJhY3Rpb24gdG8gYWRkcmVzcyB4c3MgKElzc3VlICM0Nzg3KSBieSByZW1vdmluZyB0aGUgYXV0aG9yaXR5IGluXHJcblx0XHRcdC8vIGJyb3dzZXJzIHRoYXQgYXV0by1kZWNvZGUgaXQuIEFsbCByZWZlcmVuY2VzIHRvIGxvY2F0aW9uLmhyZWYgc2hvdWxkIGJlXHJcblx0XHRcdC8vIHJlcGxhY2VkIHdpdGggYSBjYWxsIHRvIHRoaXMgbWV0aG9kIHNvIHRoYXQgaXQgY2FuIGJlIGRlYWx0IHdpdGggcHJvcGVybHkgaGVyZVxyXG5cdFx0XHRnZXRMb2NhdGlvbjogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHR2YXIgcGFyc2VkVXJsID0gdGhpcy5wYXJzZVVybCggdXJsIHx8IGxvY2F0aW9uLmhyZWYgKSxcclxuXHRcdFx0XHRcdHVyaSA9IHVybCA/IHBhcnNlZFVybCA6IGxvY2F0aW9uLFxyXG5cclxuXHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB0byBwYXJzZSB0aGUgdXJsIG9yIHRoZSBsb2NhdGlvbiBvYmplY3QgZm9yIHRoZSBoYXNoIGJlY2F1c2UgdXNpbmdcclxuXHRcdFx0XHRcdC8vIGxvY2F0aW9uLmhhc2ggaXMgYXV0b2RlY29kZWQgaW4gZmlyZWZveCwgdGhlIHJlc3Qgb2YgdGhlIHVybCBzaG91bGQgYmUgZnJvbVxyXG5cdFx0XHRcdFx0Ly8gdGhlIG9iamVjdCAobG9jYXRpb24gdW5sZXNzIHdlJ3JlIHRlc3RpbmcpIHRvIGF2b2lkIHRoZSBpbmNsdXNpb24gb2YgdGhlXHJcblx0XHRcdFx0XHQvLyBhdXRob3JpdHlcclxuXHRcdFx0XHRcdGhhc2ggPSBwYXJzZWRVcmwuaGFzaDtcclxuXHJcblx0XHRcdFx0Ly8gbWltaWMgdGhlIGJyb3dzZXIgd2l0aCBhbiBlbXB0eSBzdHJpbmcgd2hlbiB0aGUgaGFzaCBpcyBlbXB0eVxyXG5cdFx0XHRcdGhhc2ggPSBoYXNoID09PSBcIiNcIiA/IFwiXCIgOiBoYXNoO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gdXJpLnByb3RvY29sICtcclxuXHRcdFx0XHRcdHBhcnNlZFVybC5kb3VibGVTbGFzaCArXHJcblx0XHRcdFx0XHR1cmkuaG9zdCArXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlIHBhdGhuYW1lIG11c3Qgc3RhcnQgd2l0aCBhIHNsYXNoIGlmIHRoZXJlJ3MgYSBwcm90b2NvbCwgYmVjYXVzZSB5b3VcclxuXHRcdFx0XHRcdC8vIGNhbid0IGhhdmUgYSBwcm90b2NvbCBmb2xsb3dlZCBieSBhIHJlbGF0aXZlIHBhdGguIEFsc28sIGl0J3MgaW1wb3NzaWJsZSB0b1xyXG5cdFx0XHRcdFx0Ly8gY2FsY3VsYXRlIGFic29sdXRlIFVSTHMgZnJvbSByZWxhdGl2ZSBvbmVzIGlmIHRoZSBhYnNvbHV0ZSBvbmUgZG9lc24ndCBoYXZlXHJcblx0XHRcdFx0XHQvLyBhIGxlYWRpbmcgXCIvXCIuXHJcblx0XHRcdFx0XHQoICggdXJpLnByb3RvY29sICE9PSBcIlwiICYmIHVyaS5wYXRobmFtZS5zdWJzdHJpbmcoIDAsIDEgKSAhPT0gXCIvXCIgKSA/XHJcblx0XHRcdFx0XHRcdFwiL1wiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdHVyaS5wYXRobmFtZSArXHJcblx0XHRcdFx0XHR1cmkuc2VhcmNoICtcclxuXHRcdFx0XHRcdGhhc2g7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgdXJsXHJcblx0XHRcdGdldERvY3VtZW50VXJsOiBmdW5jdGlvbiggYXNQYXJzZWRPYmplY3QgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGFzUGFyc2VkT2JqZWN0ID8gJC5leHRlbmQoIHt9LCBwYXRoLmRvY3VtZW50VXJsICkgOiBwYXRoLmRvY3VtZW50VXJsLmhyZWY7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRwYXJzZUxvY2F0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5wYXJzZVVybCggdGhpcy5nZXRMb2NhdGlvbigpICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1BhcnNlIGEgVVJMIGludG8gYSBzdHJ1Y3R1cmUgdGhhdCBhbGxvd3MgZWFzeSBhY2Nlc3MgdG9cclxuXHRcdFx0Ly9hbGwgb2YgdGhlIFVSTCBjb21wb25lbnRzIGJ5IG5hbWUuXHJcblx0XHRcdHBhcnNlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdC8vIElmIHdlJ3JlIHBhc3NlZCBhbiBvYmplY3QsIHdlJ2xsIGFzc3VtZSB0aGF0IGl0IGlzXHJcblx0XHRcdFx0Ly8gYSBwYXJzZWQgdXJsIG9iamVjdCBhbmQganVzdCByZXR1cm4gaXQgYmFjayB0byB0aGUgY2FsbGVyLlxyXG5cdFx0XHRcdGlmICggJC50eXBlKCB1cmwgKSA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiB1cmw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgbWF0Y2hlcyA9IHBhdGgudXJsUGFyc2VSRS5leGVjKCB1cmwgfHwgXCJcIiApIHx8IFtdO1xyXG5cclxuXHRcdFx0XHRcdC8vIENyZWF0ZSBhbiBvYmplY3QgdGhhdCBhbGxvd3MgdGhlIGNhbGxlciB0byBhY2Nlc3MgdGhlIHN1Yi1tYXRjaGVzXHJcblx0XHRcdFx0XHQvLyBieSBuYW1lLiBOb3RlIHRoYXQgSUUgcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaW5zdGVhZCBvZiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHQvLyBsaWtlIGFsbCBvdGhlciBicm93c2VycyBkbywgc28gd2Ugbm9ybWFsaXplIGV2ZXJ5dGhpbmcgc28gaXRzIGNvbnNpc3RlbnRcclxuXHRcdFx0XHRcdC8vIG5vIG1hdHRlciB3aGF0IGJyb3dzZXIgd2UncmUgcnVubmluZyBvbi5cclxuXHRcdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdGhyZWY6ICAgICAgICAgbWF0Y2hlc1sgIDAgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRocmVmTm9IYXNoOiAgIG1hdGNoZXNbICAxIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aHJlZk5vU2VhcmNoOiBtYXRjaGVzWyAgMiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGRvbWFpbjogICAgICAgbWF0Y2hlc1sgIDMgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwcm90b2NvbDogICAgIG1hdGNoZXNbICA0IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZG91YmxlU2xhc2g6ICBtYXRjaGVzWyAgNSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGF1dGhvcml0eTogICAgbWF0Y2hlc1sgIDYgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHR1c2VybmFtZTogICAgIG1hdGNoZXNbICA4IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cGFzc3dvcmQ6ICAgICBtYXRjaGVzWyAgOSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhvc3Q6ICAgICAgICAgbWF0Y2hlc1sgMTAgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRob3N0bmFtZTogICAgIG1hdGNoZXNbIDExIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cG9ydDogICAgICAgICBtYXRjaGVzWyAxMiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHBhdGhuYW1lOiAgICAgbWF0Y2hlc1sgMTMgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRkaXJlY3Rvcnk6ICAgIG1hdGNoZXNbIDE0IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZmlsZW5hbWU6ICAgICBtYXRjaGVzWyAxNSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHNlYXJjaDogICAgICAgbWF0Y2hlc1sgMTYgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRoYXNoOiAgICAgICAgIG1hdGNoZXNbIDE3IF0gfHwgXCJcIlxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vVHVybiByZWxQYXRoIGludG8gYW4gYXNib2x1dGUgcGF0aC4gYWJzUGF0aCBpc1xyXG5cdFx0XHQvL2FuIG9wdGlvbmFsIGFic29sdXRlIHBhdGggd2hpY2ggZGVzY3JpYmVzIHdoYXRcclxuXHRcdFx0Ly9yZWxQYXRoIGlzIHJlbGF0aXZlIHRvLlxyXG5cdFx0XHRtYWtlUGF0aEFic29sdXRlOiBmdW5jdGlvbiggcmVsUGF0aCwgYWJzUGF0aCApIHtcclxuXHRcdFx0XHR2YXIgYWJzU3RhY2ssXHJcblx0XHRcdFx0XHRyZWxTdGFjayxcclxuXHRcdFx0XHRcdGksIGQ7XHJcblxyXG5cdFx0XHRcdGlmICggcmVsUGF0aCAmJiByZWxQYXRoLmNoYXJBdCggMCApID09PSBcIi9cIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiByZWxQYXRoO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmVsUGF0aCA9IHJlbFBhdGggfHwgXCJcIjtcclxuXHRcdFx0XHRhYnNQYXRoID0gYWJzUGF0aCA/IGFic1BhdGgucmVwbGFjZSggL15cXC98KFxcL1teXFwvXSp8W15cXC9dKykkL2csIFwiXCIgKSA6IFwiXCI7XHJcblxyXG5cdFx0XHRcdGFic1N0YWNrID0gYWJzUGF0aCA/IGFic1BhdGguc3BsaXQoIFwiL1wiICkgOiBbXTtcclxuXHRcdFx0XHRyZWxTdGFjayA9IHJlbFBhdGguc3BsaXQoIFwiL1wiICk7XHJcblxyXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgcmVsU3RhY2subGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0XHRkID0gcmVsU3RhY2tbIGkgXTtcclxuXHRcdFx0XHRcdHN3aXRjaCAoIGQgKSB7XHJcblx0XHRcdFx0XHRcdGNhc2UgXCIuXCI6XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgXCIuLlwiOlxyXG5cdFx0XHRcdFx0XHRcdGlmICggYWJzU3RhY2subGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YWJzU3RhY2sucG9wKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0XHRcdGFic1N0YWNrLnB1c2goIGQgKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIFwiL1wiICsgYWJzU3RhY2suam9pbiggXCIvXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUmV0dXJucyB0cnVlIGlmIGJvdGggdXJscyBoYXZlIHRoZSBzYW1lIGRvbWFpbi5cclxuXHRcdFx0aXNTYW1lRG9tYWluOiBmdW5jdGlvbiggYWJzVXJsMSwgYWJzVXJsMiApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5wYXJzZVVybCggYWJzVXJsMSApLmRvbWFpbi50b0xvd2VyQ2FzZSgpID09PVxyXG5cdFx0XHRcdFx0cGF0aC5wYXJzZVVybCggYWJzVXJsMiApLmRvbWFpbi50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9SZXR1cm5zIHRydWUgZm9yIGFueSByZWxhdGl2ZSB2YXJpYW50LlxyXG5cdFx0XHRpc1JlbGF0aXZlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdC8vIEFsbCByZWxhdGl2ZSBVcmwgdmFyaWFudHMgaGF2ZSBvbmUgdGhpbmcgaW4gY29tbW9uLCBubyBwcm90b2NvbC5cclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5wYXJzZVVybCggdXJsICkucHJvdG9jb2wgPT09IFwiXCI7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1JldHVybnMgdHJ1ZSBmb3IgYW4gYWJzb2x1dGUgdXJsLlxyXG5cdFx0XHRpc0Fic29sdXRlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlVXJsKCB1cmwgKS5wcm90b2NvbCAhPT0gXCJcIjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vVHVybiB0aGUgc3BlY2lmaWVkIHJlYWx0aXZlIFVSTCBpbnRvIGFuIGFic29sdXRlIG9uZS4gVGhpcyBmdW5jdGlvblxyXG5cdFx0XHQvL2NhbiBoYW5kbGUgYWxsIHJlbGF0aXZlIHZhcmlhbnRzIChwcm90b2NvbCwgc2l0ZSwgZG9jdW1lbnQsIHF1ZXJ5LCBmcmFnbWVudCkuXHJcblx0XHRcdG1ha2VVcmxBYnNvbHV0ZTogZnVuY3Rpb24oIHJlbFVybCwgYWJzVXJsICkge1xyXG5cdFx0XHRcdGlmICggIXBhdGguaXNSZWxhdGl2ZVVybCggcmVsVXJsICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVsVXJsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCBhYnNVcmwgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdGFic1VybCA9IHRoaXMuZG9jdW1lbnRCYXNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIHJlbE9iaiA9IHBhdGgucGFyc2VVcmwoIHJlbFVybCApLFxyXG5cdFx0XHRcdFx0YWJzT2JqID0gcGF0aC5wYXJzZVVybCggYWJzVXJsICksXHJcblx0XHRcdFx0XHRwcm90b2NvbCA9IHJlbE9iai5wcm90b2NvbCB8fCBhYnNPYmoucHJvdG9jb2wsXHJcblx0XHRcdFx0XHRkb3VibGVTbGFzaCA9IHJlbE9iai5wcm90b2NvbCA/IHJlbE9iai5kb3VibGVTbGFzaCA6ICggcmVsT2JqLmRvdWJsZVNsYXNoIHx8IGFic09iai5kb3VibGVTbGFzaCApLFxyXG5cdFx0XHRcdFx0YXV0aG9yaXR5ID0gcmVsT2JqLmF1dGhvcml0eSB8fCBhYnNPYmouYXV0aG9yaXR5LFxyXG5cdFx0XHRcdFx0aGFzUGF0aCA9IHJlbE9iai5wYXRobmFtZSAhPT0gXCJcIixcclxuXHRcdFx0XHRcdHBhdGhuYW1lID0gcGF0aC5tYWtlUGF0aEFic29sdXRlKCByZWxPYmoucGF0aG5hbWUgfHwgYWJzT2JqLmZpbGVuYW1lLCBhYnNPYmoucGF0aG5hbWUgKSxcclxuXHRcdFx0XHRcdHNlYXJjaCA9IHJlbE9iai5zZWFyY2ggfHwgKCAhaGFzUGF0aCAmJiBhYnNPYmouc2VhcmNoICkgfHwgXCJcIixcclxuXHRcdFx0XHRcdGhhc2ggPSByZWxPYmouaGFzaDtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHByb3RvY29sICsgZG91YmxlU2xhc2ggKyBhdXRob3JpdHkgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL0FkZCBzZWFyY2ggKGFrYSBxdWVyeSkgcGFyYW1zIHRvIHRoZSBzcGVjaWZpZWQgdXJsLlxyXG5cdFx0XHRhZGRTZWFyY2hQYXJhbXM6IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcyApIHtcclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHVybCApLFxyXG5cdFx0XHRcdFx0cCA9ICggdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApID8gJC5wYXJhbSggcGFyYW1zICkgOiBwYXJhbXMsXHJcblx0XHRcdFx0XHRzID0gdS5zZWFyY2ggfHwgXCI/XCI7XHJcblx0XHRcdFx0cmV0dXJuIHUuaHJlZk5vU2VhcmNoICsgcyArICggcy5jaGFyQXQoIHMubGVuZ3RoIC0gMSApICE9PSBcIj9cIiA/IFwiJlwiIDogXCJcIiApICsgcCArICggdS5oYXNoIHx8IFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGNvbnZlcnRVcmxUb0RhdGFVcmw6IGZ1bmN0aW9uKCBhYnNVcmwgKSB7XHJcblx0XHRcdFx0dmFyIHJlc3VsdCA9IGFic1VybCxcclxuXHRcdFx0XHRcdHUgPSBwYXRoLnBhcnNlVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBwYXRoLmlzRW1iZWRkZWRQYWdlKCB1ICkgKSB7XHJcblx0XHRcdFx0XHQvLyBGb3IgZW1iZWRkZWQgcGFnZXMsIHJlbW92ZSB0aGUgZGlhbG9nIGhhc2gga2V5IGFzIGluIGdldEZpbGVQYXRoKCksXHJcblx0XHRcdFx0XHQvLyBhbmQgcmVtb3ZlIG90aGVyd2lzZSB0aGUgRGF0YSBVcmwgd29uJ3QgbWF0Y2ggdGhlIGlkIG9mIHRoZSBlbWJlZGRlZCBQYWdlLlxyXG5cdFx0XHRcdFx0cmVzdWx0ID0gdS5oYXNoXHJcblx0XHRcdFx0XHRcdC5zcGxpdCggZGlhbG9nSGFzaEtleSApWzBdXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlKCAvXiMvLCBcIlwiIClcclxuXHRcdFx0XHRcdFx0LnJlcGxhY2UoIC9cXD8uKiQvLCBcIlwiICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggcGF0aC5pc1NhbWVEb21haW4oIHUsIHRoaXMuZG9jdW1lbnRCYXNlICkgKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQgPSB1LmhyZWZOb0hhc2gucmVwbGFjZSggdGhpcy5kb2N1bWVudEJhc2UuZG9tYWluLCBcIlwiICkuc3BsaXQoIGRpYWxvZ0hhc2hLZXkgKVswXTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiB3aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KCByZXN1bHQgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vZ2V0IHBhdGggZnJvbSBjdXJyZW50IGhhc2gsIG9yIGZyb20gYSBmaWxlIHBhdGhcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbiggbmV3UGF0aCApIHtcclxuXHRcdFx0XHRpZiAoIG5ld1BhdGggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdG5ld1BhdGggPSBwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5zdHJpcEhhc2goIG5ld1BhdGggKS5yZXBsYWNlKCAvW15cXC9dKlxcLlteXFwvKl0rJC8sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vc2V0IGxvY2F0aW9uIGhhc2ggdG8gcGF0aFxyXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBwYXRoICkge1xyXG5cdFx0XHRcdGxvY2F0aW9uLmhhc2ggPSBwYXRoO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly90ZXN0IGlmIGEgZ2l2ZW4gdXJsIChzdHJpbmcpIGlzIGEgcGF0aFxyXG5cdFx0XHQvL05PVEUgbWlnaHQgYmUgZXhjZXB0aW9uYWxseSBuYWl2ZVxyXG5cdFx0XHRpc1BhdGg6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuICggL1xcLy8gKS50ZXN0KCB1cmwgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vcmV0dXJuIGEgdXJsIHBhdGggd2l0aCB0aGUgd2luZG93J3MgbG9jYXRpb24gcHJvdG9jb2wvaG9zdG5hbWUvcGF0aG5hbWUgcmVtb3ZlZFxyXG5cdFx0XHRjbGVhbjogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gdXJsLnJlcGxhY2UoIHRoaXMuZG9jdW1lbnRCYXNlLmRvbWFpbiwgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9qdXN0IHJldHVybiB0aGUgdXJsIHdpdGhvdXQgYW4gaW5pdGlhbCAjXHJcblx0XHRcdHN0cmlwSGFzaDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gdXJsLnJlcGxhY2UoIC9eIy8sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdHN0cmlwUXVlcnlQYXJhbXM6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHVybC5yZXBsYWNlKCAvXFw/LiokLywgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9yZW1vdmUgdGhlIHByZWNlZGluZyBoYXNoLCBhbnkgcXVlcnkgcGFyYW1zLCBhbmQgZGlhbG9nIG5vdGF0aW9uc1xyXG5cdFx0XHRjbGVhbkhhc2g6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnN0cmlwSGFzaCggaGFzaC5yZXBsYWNlKCAvXFw/LiokLywgXCJcIiApLnJlcGxhY2UoIGRpYWxvZ0hhc2hLZXksIFwiXCIgKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aXNIYXNoVmFsaWQ6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHJldHVybiAoIC9eI1teI10rJC8gKS50ZXN0KCBoYXNoICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL2NoZWNrIHdoZXRoZXIgYSB1cmwgaXMgcmVmZXJlbmNpbmcgdGhlIHNhbWUgZG9tYWluLCBvciBhbiBleHRlcm5hbCBkb21haW4gb3IgZGlmZmVyZW50IHByb3RvY29sXHJcblx0XHRcdC8vY291bGQgYmUgbWFpbHRvLCBldGNcclxuXHRcdFx0aXNFeHRlcm5hbDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHVybCApO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gISEoIHUucHJvdG9jb2wgJiZcclxuXHRcdFx0XHRcdCggdS5kb21haW4udG9Mb3dlckNhc2UoKSAhPT0gdGhpcy5kb2N1bWVudFVybC5kb21haW4udG9Mb3dlckNhc2UoKSApICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRoYXNQcm90b2NvbDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gKCAvXig6P1xcdys6KS8gKS50ZXN0KCB1cmwgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGlzRW1iZWRkZWRQYWdlOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggdXJsICk7XHJcblxyXG5cdFx0XHRcdC8vaWYgdGhlIHBhdGggaXMgYWJzb2x1dGUsIHRoZW4gd2UgbmVlZCB0byBjb21wYXJlIHRoZSB1cmwgYWdhaW5zdFxyXG5cdFx0XHRcdC8vYm90aCB0aGUgdGhpcy5kb2N1bWVudFVybCBhbmQgdGhlIGRvY3VtZW50QmFzZS4gVGhlIG1haW4gcmVhc29uIGZvciB0aGlzXHJcblx0XHRcdFx0Ly9pcyB0aGF0IGxpbmtzIGVtYmVkZGVkIHdpdGhpbiBleHRlcm5hbCBkb2N1bWVudHMgd2lsbCByZWZlciB0byB0aGVcclxuXHRcdFx0XHQvL2FwcGxpY2F0aW9uIGRvY3VtZW50LCB3aGVyZWFzIGxpbmtzIGVtYmVkZGVkIHdpdGhpbiB0aGUgYXBwbGljYXRpb25cclxuXHRcdFx0XHQvL2RvY3VtZW50IHdpbGwgYmUgcmVzb2x2ZWQgYWdhaW5zdCB0aGUgZG9jdW1lbnQgYmFzZS5cclxuXHRcdFx0XHRpZiAoIHUucHJvdG9jb2wgIT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gKCAhdGhpcy5pc1BhdGgodS5oYXNoKSAmJiB1Lmhhc2ggJiYgKCB1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCB8fCAoIHRoaXMuZG9jdW1lbnRCYXNlRGlmZmVycyAmJiB1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggKSApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAoIC9eIy8gKS50ZXN0KCB1LmhyZWYgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdHNxdWFzaDogZnVuY3Rpb24oIHVybCwgcmVzb2x1dGlvblVybCApIHtcclxuXHRcdFx0XHR2YXIgaHJlZiwgY2xlYW5lZFVybCwgc2VhcmNoLCBzdGF0ZUluZGV4LCBkb2NVcmwsXHJcblx0XHRcdFx0XHRpc1BhdGggPSB0aGlzLmlzUGF0aCggdXJsICksXHJcblx0XHRcdFx0XHR1cmkgPSB0aGlzLnBhcnNlVXJsKCB1cmwgKSxcclxuXHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggPSB1cmkuaGFzaCxcclxuXHRcdFx0XHRcdHVpU3RhdGUgPSBcIlwiO1xyXG5cclxuXHRcdFx0XHQvLyBwcm9kdWNlIGEgdXJsIGFnYWluc3Qgd2hpY2ggd2UgY2FuIHJlc29sdmUgdGhlIHByb3ZpZGVkIHBhdGhcclxuXHRcdFx0XHRpZiAoICFyZXNvbHV0aW9uVXJsICkge1xyXG5cdFx0XHRcdFx0aWYgKCBpc1BhdGggKSB7XHJcblx0XHRcdFx0XHRcdHJlc29sdXRpb25VcmwgPSBwYXRoLmdldExvY2F0aW9uKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRkb2NVcmwgPSBwYXRoLmdldERvY3VtZW50VXJsKCB0cnVlICk7XHJcblx0XHRcdFx0XHRcdGlmICggcGF0aC5pc1BhdGgoIGRvY1VybC5oYXNoICkgKSB7XHJcblx0XHRcdFx0XHRcdFx0cmVzb2x1dGlvblVybCA9IHBhdGguc3F1YXNoKCBkb2NVcmwuaHJlZiApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHJlc29sdXRpb25VcmwgPSBkb2NVcmwuaHJlZjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIHVybCBpcyBhbnl0aGluZyBidXQgYSBzaW1wbGUgc3RyaW5nLCByZW1vdmUgYW55IHByZWNlZGluZyBoYXNoXHJcblx0XHRcdFx0Ly8gZWcgI2Zvby9iYXIgLT4gZm9vL2JhclxyXG5cdFx0XHRcdC8vICAgICNmb28gLT4gI2Zvb1xyXG5cdFx0XHRcdGNsZWFuZWRVcmwgPSBpc1BhdGggPyBwYXRoLnN0cmlwSGFzaCggdXJsICkgOiB1cmw7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSB1cmwgaXMgYSBmdWxsIHVybCB3aXRoIGEgaGFzaCBjaGVjayBpZiB0aGUgcGFyc2VkIGhhc2ggaXMgYSBwYXRoXHJcblx0XHRcdFx0Ly8gaWYgaXQgaXMsIHN0cmlwIHRoZSAjLCBhbmQgdXNlIGl0IG90aGVyd2lzZSBjb250aW51ZSB3aXRob3V0IGNoYW5nZVxyXG5cdFx0XHRcdGNsZWFuZWRVcmwgPSBwYXRoLmlzUGF0aCggdXJpLmhhc2ggKSA/IHBhdGguc3RyaXBIYXNoKCB1cmkuaGFzaCApIDogY2xlYW5lZFVybDtcclxuXHJcblx0XHRcdFx0Ly8gU3BsaXQgdGhlIFVJIFN0YXRlIGtleXMgb2ZmIHRoZSBocmVmXHJcblx0XHRcdFx0c3RhdGVJbmRleCA9IGNsZWFuZWRVcmwuaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICk7XHJcblxyXG5cdFx0XHRcdC8vIHN0b3JlIHRoZSB1aSBzdGF0ZSBrZXlzIGZvciB1c2VcclxuXHRcdFx0XHRpZiAoIHN0YXRlSW5kZXggPiAtMSApIHtcclxuXHRcdFx0XHRcdHVpU3RhdGUgPSBjbGVhbmVkVXJsLnNsaWNlKCBzdGF0ZUluZGV4ICk7XHJcblx0XHRcdFx0XHRjbGVhbmVkVXJsID0gY2xlYW5lZFVybC5zbGljZSggMCwgc3RhdGVJbmRleCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gbWFrZSB0aGUgY2xlYW5lZFVybCBhYnNvbHV0ZSByZWxhdGl2ZSB0byB0aGUgcmVzb2x1dGlvbiB1cmxcclxuXHRcdFx0XHRocmVmID0gcGF0aC5tYWtlVXJsQWJzb2x1dGUoIGNsZWFuZWRVcmwsIHJlc29sdXRpb25VcmwgKTtcclxuXHJcblx0XHRcdFx0Ly8gZ3JhYiB0aGUgc2VhcmNoIGZyb20gdGhlIHJlc29sdmVkIHVybCBzaW5jZSBwYXJzaW5nIGZyb21cclxuXHRcdFx0XHQvLyB0aGUgcGFzc2VkIHVybCBtYXkgbm90IHlpZWxkIHRoZSBjb3JyZWN0IHJlc3VsdFxyXG5cdFx0XHRcdHNlYXJjaCA9IHRoaXMucGFyc2VVcmwoIGhyZWYgKS5zZWFyY2g7XHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gYWxsIHRoaXMgY3JhcCBpcyB0ZXJyaWJsZSwgY2xlYW4gaXQgdXBcclxuXHRcdFx0XHRpZiAoIGlzUGF0aCApIHtcclxuXHRcdFx0XHRcdC8vIHJlamVjdCB0aGUgaGFzaCBpZiBpdCdzIGEgcGF0aCBvciBpdCdzIGp1c3QgYSBkaWFsb2cga2V5XHJcblx0XHRcdFx0XHRpZiAoIHBhdGguaXNQYXRoKCBwcmVzZXJ2ZWRIYXNoICkgfHwgcHJlc2VydmVkSGFzaC5yZXBsYWNlKFwiI1wiLCBcIlwiKS5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKSA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoID0gXCJcIjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBBcHBlbmQgdGhlIFVJIFN0YXRlIGtleXMgd2hlcmUgaXQgZXhpc3RzIGFuZCBpdCdzIGJlZW4gcmVtb3ZlZFxyXG5cdFx0XHRcdFx0Ly8gZnJvbSB0aGUgdXJsXHJcblx0XHRcdFx0XHRpZiAoIHVpU3RhdGUgJiYgcHJlc2VydmVkSGFzaC5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaCArPSB1aVN0YXRlO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IHBvdW5kIGlzIG9uIHRoZSBmcm9udCBvZiB0aGUgaGFzaFxyXG5cdFx0XHRcdFx0aWYgKCBwcmVzZXJ2ZWRIYXNoLmluZGV4T2YoIFwiI1wiICkgPT09IC0xICYmIHByZXNlcnZlZEhhc2ggIT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggPSBcIiNcIiArIHByZXNlcnZlZEhhc2g7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gcmVjb25zdHJ1Y3QgZWFjaCBvZiB0aGUgcGllY2VzIHdpdGggdGhlIG5ldyBzZWFyY2ggc3RyaW5nIGFuZCBoYXNoXHJcblx0XHRcdFx0XHRocmVmID0gcGF0aC5wYXJzZVVybCggaHJlZiApO1xyXG5cdFx0XHRcdFx0aHJlZiA9IGhyZWYucHJvdG9jb2wgKyBocmVmLmRvdWJsZVNsYXNoICsgaHJlZi5ob3N0ICsgaHJlZi5wYXRobmFtZSArIHNlYXJjaCArXHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2g7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGhyZWYgKz0gaHJlZi5pbmRleE9mKCBcIiNcIiApID4gLTEgPyB1aVN0YXRlIDogXCIjXCIgKyB1aVN0YXRlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGhyZWY7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRpc1ByZXNlcnZhYmxlSGFzaDogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0cmV0dXJuIGhhc2gucmVwbGFjZSggXCIjXCIsIFwiXCIgKS5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKSA9PT0gMDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIEVzY2FwZSB3ZWlyZCBjaGFyYWN0ZXJzIGluIHRoZSBoYXNoIGlmIGl0IGlzIHRvIGJlIHVzZWQgYXMgYSBzZWxlY3RvclxyXG5cdFx0XHRoYXNoVG9TZWxlY3RvcjogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0dmFyIGhhc0hhc2ggPSAoIGhhc2guc3Vic3RyaW5nKCAwLCAxICkgPT09IFwiI1wiICk7XHJcblx0XHRcdFx0aWYgKCBoYXNIYXNoICkge1xyXG5cdFx0XHRcdFx0aGFzaCA9IGhhc2guc3Vic3RyaW5nKCAxICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAoIGhhc0hhc2ggPyBcIiNcIiA6IFwiXCIgKSArIGhhc2gucmVwbGFjZSggLyhbIVwiIyQlJicoKSorLC4vOjs8PT4/QFtcXF1eYHt8fX5dKS9nLCBcIlxcXFwkMVwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyByZXR1cm4gdGhlIHN1YnN0cmluZyBvZiBhIGZpbGVwYXRoIGJlZm9yZSB0aGUgZGlhbG9nSGFzaEtleSwgZm9yIG1ha2luZyBhIHNlcnZlclxyXG5cdFx0XHQvLyByZXF1ZXN0XHJcblx0XHRcdGdldEZpbGVQYXRoOiBmdW5jdGlvbiggcGF0aCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aCAmJiBwYXRoLnNwbGl0KCBkaWFsb2dIYXNoS2V5IClbMF07XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgc3BlY2lmaWVkIHVybCByZWZlcnMgdG8gdGhlIGZpcnN0IHBhZ2UgaW4gdGhlIG1haW5cclxuXHRcdFx0Ly8gYXBwbGljYXRpb24gZG9jdW1lbnQuXHJcblx0XHRcdGlzRmlyc3RQYWdlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdC8vIFdlIG9ubHkgZGVhbCB3aXRoIGFic29sdXRlIHBhdGhzLlxyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggcGF0aC5tYWtlVXJsQWJzb2x1dGUoIHVybCwgdGhpcy5kb2N1bWVudEJhc2UgKSApLFxyXG5cclxuXHRcdFx0XHRcdC8vIERvZXMgdGhlIHVybCBoYXZlIHRoZSBzYW1lIHBhdGggYXMgdGhlIGRvY3VtZW50P1xyXG5cdFx0XHRcdFx0c2FtZVBhdGggPSB1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCB8fFxyXG5cdFx0XHRcdFx0XHQoIHRoaXMuZG9jdW1lbnRCYXNlRGlmZmVycyAmJlxyXG5cdFx0XHRcdFx0XHRcdHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCApLFxyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgZmlyc3QgcGFnZSBlbGVtZW50LlxyXG5cdFx0XHRcdFx0ZnAgPSAkLm1vYmlsZS5maXJzdFBhZ2UsXHJcblxyXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBpZCBvZiB0aGUgZmlyc3QgcGFnZSBlbGVtZW50IGlmIGl0IGhhcyBvbmUuXHJcblx0XHRcdFx0XHRmcElkID0gZnAgJiYgZnBbMF0gPyBmcFswXS5pZCA6IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdFx0Ly8gVGhlIHVybCByZWZlcnMgdG8gdGhlIGZpcnN0IHBhZ2UgaWYgdGhlIHBhdGggbWF0Y2hlcyB0aGUgZG9jdW1lbnQgYW5kXHJcblx0XHRcdFx0Ly8gaXQgZWl0aGVyIGhhcyBubyBoYXNoIHZhbHVlLCBvciB0aGUgaGFzaCBpcyBleGFjdGx5IGVxdWFsIHRvIHRoZSBpZFxyXG5cdFx0XHRcdC8vIG9mIHRoZSBmaXJzdCBwYWdlIGVsZW1lbnQuXHJcblx0XHRcdFx0cmV0dXJuIHNhbWVQYXRoICYmXHJcblx0XHRcdFx0XHQoICF1Lmhhc2ggfHxcclxuXHRcdFx0XHRcdFx0dS5oYXNoID09PSBcIiNcIiB8fFxyXG5cdFx0XHRcdFx0XHQoIGZwSWQgJiYgdS5oYXNoLnJlcGxhY2UoIC9eIy8sIFwiXCIgKSA9PT0gZnBJZCApICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyBTb21lIGVtYmVkZGVkIGJyb3dzZXJzLCBsaWtlIHRoZSB3ZWIgdmlldyBpbiBQaG9uZSBHYXAsIGFsbG93XHJcblx0XHRcdC8vIGNyb3NzLWRvbWFpbiBYSFIgcmVxdWVzdHMgaWYgdGhlIGRvY3VtZW50IGRvaW5nIHRoZSByZXF1ZXN0IHdhcyBsb2FkZWRcclxuXHRcdFx0Ly8gdmlhIHRoZSBmaWxlOi8vIHByb3RvY29sLiBUaGlzIGlzIHVzdWFsbHkgdG8gYWxsb3cgdGhlIGFwcGxpY2F0aW9uIHRvXHJcblx0XHRcdC8vIFwicGhvbmUgaG9tZVwiIGFuZCBmZXRjaCBhcHAgc3BlY2lmaWMgZGF0YS4gV2Ugbm9ybWFsbHkgbGV0IHRoZSBicm93c2VyXHJcblx0XHRcdC8vIGhhbmRsZSBleHRlcm5hbC9jcm9zcy1kb21haW4gdXJscywgYnV0IGlmIHRoZSBhbGxvd0Nyb3NzRG9tYWluUGFnZXNcclxuXHRcdFx0Ly8gb3B0aW9uIGlzIHRydWUsIHdlIHdpbGwgYWxsb3cgY3Jvc3MtZG9tYWluIGh0dHAvaHR0cHMgcmVxdWVzdHMgdG8gZ29cclxuXHRcdFx0Ly8gdGhyb3VnaCBvdXIgcGFnZSBsb2FkaW5nIGxvZ2ljLlxyXG5cdFx0XHRpc1Blcm1pdHRlZENyb3NzRG9tYWluUmVxdWVzdDogZnVuY3Rpb24oIGRvY1VybCwgcmVxVXJsICkge1xyXG5cdFx0XHRcdHJldHVybiAkLm1vYmlsZS5hbGxvd0Nyb3NzRG9tYWluUGFnZXMgJiZcclxuXHRcdFx0XHRcdChkb2NVcmwucHJvdG9jb2wgPT09IFwiZmlsZTpcIiB8fCBkb2NVcmwucHJvdG9jb2wgPT09IFwiY29udGVudDpcIikgJiZcclxuXHRcdFx0XHRcdHJlcVVybC5zZWFyY2goIC9eaHR0cHM/Oi8gKSAhPT0gLTE7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0cGF0aC5kb2N1bWVudFVybCA9IHBhdGgucGFyc2VMb2NhdGlvbigpO1xyXG5cclxuXHRcdCRiYXNlID0gJCggXCJoZWFkXCIgKS5maW5kKCBcImJhc2VcIiApO1xyXG5cclxuXHRcdHBhdGguZG9jdW1lbnRCYXNlID0gJGJhc2UubGVuZ3RoID9cclxuXHRcdFx0cGF0aC5wYXJzZVVybCggcGF0aC5tYWtlVXJsQWJzb2x1dGUoICRiYXNlLmF0dHIoIFwiaHJlZlwiICksIHBhdGguZG9jdW1lbnRVcmwuaHJlZiApICkgOlxyXG5cdFx0XHRwYXRoLmRvY3VtZW50VXJsO1xyXG5cclxuXHRcdHBhdGguZG9jdW1lbnRCYXNlRGlmZmVycyA9IChwYXRoLmRvY3VtZW50VXJsLmhyZWZOb0hhc2ggIT09IHBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2gpO1xyXG5cclxuXHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBiYXNlIHVybFxyXG5cdFx0cGF0aC5nZXREb2N1bWVudEJhc2UgPSBmdW5jdGlvbiggYXNQYXJzZWRPYmplY3QgKSB7XHJcblx0XHRcdHJldHVybiBhc1BhcnNlZE9iamVjdCA/ICQuZXh0ZW5kKCB7fSwgcGF0aC5kb2N1bWVudEJhc2UgKSA6IHBhdGguZG9jdW1lbnRCYXNlLmhyZWY7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgaW4gMS41LjBcclxuXHRcdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cclxuXHRcdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IHVybFxyXG5cdFx0XHRnZXREb2N1bWVudFVybDogcGF0aC5nZXREb2N1bWVudFVybCxcclxuXHJcblx0XHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBiYXNlIHVybFxyXG5cdFx0XHRnZXREb2N1bWVudEJhc2U6IHBhdGguZ2V0RG9jdW1lbnRCYXNlXHJcblx0XHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQkLm1vYmlsZS5IaXN0b3J5ID0gZnVuY3Rpb24oIHN0YWNrLCBpbmRleCApIHtcclxuXHRcdHRoaXMuc3RhY2sgPSBzdGFjayB8fCBbXTtcclxuXHRcdHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleCB8fCAwO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLkhpc3RvcnkucHJvdG90eXBlLCB7XHJcblx0XHRnZXRBY3RpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5hY3RpdmVJbmRleCBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRMYXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMucHJldmlvdXNJbmRleCBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXROZXh0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMuYWN0aXZlSW5kZXggKyAxIF07XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldFByZXY6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5hY3RpdmVJbmRleCAtIDEgXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gYWRkTmV3IGlzIHVzZWQgd2hlbmV2ZXIgYSBuZXcgcGFnZSBpcyBhZGRlZFxyXG5cdFx0YWRkOiBmdW5jdGlvbiggdXJsLCBkYXRhICkge1xyXG5cdFx0XHRkYXRhID0gZGF0YSB8fCB7fTtcclxuXHJcblx0XHRcdC8vaWYgdGhlcmUncyBmb3J3YXJkIGhpc3RvcnksIHdpcGUgaXRcclxuXHRcdFx0aWYgKCB0aGlzLmdldE5leHQoKSApIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFyRm9yd2FyZCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgaGFzaCBpcyBpbmNsdWRlZCBpbiB0aGUgZGF0YSBtYWtlIHN1cmUgdGhlIHNoYXBlXHJcblx0XHRcdC8vIGlzIGNvbnNpc3RlbnQgZm9yIGNvbXBhcmlzb25cclxuXHRcdFx0aWYgKCBkYXRhLmhhc2ggJiYgZGF0YS5oYXNoLmluZGV4T2YoIFwiI1wiICkgPT09IC0xKSB7XHJcblx0XHRcdFx0ZGF0YS5oYXNoID0gXCIjXCIgKyBkYXRhLmhhc2g7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRhdGEudXJsID0gdXJsO1xyXG5cdFx0XHR0aGlzLnN0YWNrLnB1c2goIGRhdGEgKTtcclxuXHRcdFx0dGhpcy5hY3RpdmVJbmRleCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly93aXBlIHVybHMgYWhlYWQgb2YgYWN0aXZlIGluZGV4XHJcblx0XHRjbGVhckZvcndhcmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnN0YWNrID0gdGhpcy5zdGFjay5zbGljZSggMCwgdGhpcy5hY3RpdmVJbmRleCArIDEgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZmluZDogZnVuY3Rpb24oIHVybCwgc3RhY2ssIGVhcmx5UmV0dXJuICkge1xyXG5cdFx0XHRzdGFjayA9IHN0YWNrIHx8IHRoaXMuc3RhY2s7XHJcblxyXG5cdFx0XHR2YXIgZW50cnksIGksIGxlbmd0aCA9IHN0YWNrLmxlbmd0aCwgaW5kZXg7XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRcdGVudHJ5ID0gc3RhY2tbaV07XHJcblxyXG5cdFx0XHRcdGlmICggZGVjb2RlVVJJQ29tcG9uZW50KHVybCkgPT09IGRlY29kZVVSSUNvbXBvbmVudChlbnRyeS51cmwpIHx8XHJcblx0XHRcdFx0XHRkZWNvZGVVUklDb21wb25lbnQodXJsKSA9PT0gZGVjb2RlVVJJQ29tcG9uZW50KGVudHJ5Lmhhc2gpICkge1xyXG5cdFx0XHRcdFx0aW5kZXggPSBpO1xyXG5cclxuXHRcdFx0XHRcdGlmICggZWFybHlSZXR1cm4gKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xvc2VzdDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0dmFyIGNsb3Nlc3QsIGEgPSB0aGlzLmFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0Ly8gRmlyc3QsIHRha2UgdGhlIHNsaWNlIG9mIHRoZSBoaXN0b3J5IHN0YWNrIGJlZm9yZSB0aGUgY3VycmVudCBpbmRleCBhbmQgc2VhcmNoXHJcblx0XHRcdC8vIGZvciBhIHVybCBtYXRjaC4gSWYgb25lIGlzIGZvdW5kLCB3ZSdsbCBhdm9pZCBhdm9pZCBsb29raW5nIHRocm91Z2ggZm9yd2FyZCBoaXN0b3J5XHJcblx0XHRcdC8vIE5PVEUgdGhlIHByZWZlcmVuY2UgZm9yIGJhY2t3YXJkIGhpc3RvcnkgbW92ZW1lbnQgaXMgZHJpdmVuIGJ5IHRoZSBmYWN0IHRoYXRcclxuXHRcdFx0Ly8gICAgICBtb3N0IG1vYmlsZSBicm93c2VycyBvbmx5IGhhdmUgYSBkZWRpY2F0ZWQgYmFjayBidXR0b24sIGFuZCB1c2VycyByYXJlbHkgdXNlXHJcblx0XHRcdC8vICAgICAgdGhlIGZvcndhcmQgYnV0dG9uIGluIGRlc2t0b3AgYnJvd3NlciBhbnlob3dcclxuXHRcdFx0Y2xvc2VzdCA9IHRoaXMuZmluZCggdXJsLCB0aGlzLnN0YWNrLnNsaWNlKDAsIGEpICk7XHJcblxyXG5cdFx0XHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbiBiYWNrd2FyZCBoaXN0b3J5IGNoZWNrIGZvcndhcmQuIFRoZSBgdHJ1ZWBcclxuXHRcdFx0Ly8gdmFsdWUgcGFzc2VkIGFzIHRoZSB0aGlyZCBwYXJhbWV0ZXIgY2F1c2VzIHRoZSBmaW5kIG1ldGhvZCB0byBicmVha1xyXG5cdFx0XHQvLyBvbiB0aGUgZmlyc3QgbWF0Y2ggaW4gdGhlIGZvcndhcmQgaGlzdG9yeSBzbGljZS4gVGhlIHN0YXJ0aW5nIGluZGV4XHJcblx0XHRcdC8vIG9mIHRoZSBzbGljZSBtdXN0IHRoZW4gYmUgYWRkZWQgdG8gdGhlIHJlc3VsdCB0byBnZXQgdGhlIGVsZW1lbnQgaW5kZXhcclxuXHRcdFx0Ly8gaW4gdGhlIG9yaWdpbmFsIGhpc3Rvcnkgc3RhY2sgOiggOihcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gVE9ETyB0aGlzIGlzIGh5cGVyIGNvbmZ1c2luZyBhbmQgc2hvdWxkIGJlIGNsZWFuZWQgdXAgKHVnaCBzbyBiYWQpXHJcblx0XHRcdGlmICggY2xvc2VzdCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGNsb3Nlc3QgPSB0aGlzLmZpbmQoIHVybCwgdGhpcy5zdGFjay5zbGljZShhKSwgdHJ1ZSApO1xyXG5cdFx0XHRcdGNsb3Nlc3QgPSBjbG9zZXN0ID09PSB1bmRlZmluZWQgPyBjbG9zZXN0IDogY2xvc2VzdCArIGE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBjbG9zZXN0O1xyXG5cdFx0fSxcclxuXHJcblx0XHRkaXJlY3Q6IGZ1bmN0aW9uKCBvcHRzICkge1xyXG5cdFx0XHR2YXIgbmV3QWN0aXZlSW5kZXggPSB0aGlzLmNsb3Nlc3QoIG9wdHMudXJsICksIGEgPSB0aGlzLmFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0Ly8gc2F2ZSBuZXcgcGFnZSBpbmRleCwgbnVsbCBjaGVjayB0byBwcmV2ZW50IGZhbHNleSAwIHJlc3VsdFxyXG5cdFx0XHQvLyByZWNvcmQgdGhlIHByZXZpb3VzIGluZGV4IGZvciByZWZlcmVuY2VcclxuXHRcdFx0aWYgKCBuZXdBY3RpdmVJbmRleCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlSW5kZXggPSBuZXdBY3RpdmVJbmRleDtcclxuXHRcdFx0XHR0aGlzLnByZXZpb3VzSW5kZXggPSBhO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpbnZva2UgY2FsbGJhY2tzIHdoZXJlIGFwcHJvcHJpYXRlXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIFRPRE8gdGhpcyBpcyBhbHNvIGNvbnZvbHV0ZWQgYW5kIGNvbmZ1c2luZ1xyXG5cdFx0XHRpZiAoIG5ld0FjdGl2ZUluZGV4IDwgYSApIHtcclxuXHRcdFx0XHQoIG9wdHMucHJlc2VudCB8fCBvcHRzLmJhY2sgfHwgJC5ub29wICkoIHRoaXMuZ2V0QWN0aXZlKCksIFwiYmFja1wiICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG5ld0FjdGl2ZUluZGV4ID4gYSApIHtcclxuXHRcdFx0XHQoIG9wdHMucHJlc2VudCB8fCBvcHRzLmZvcndhcmQgfHwgJC5ub29wICkoIHRoaXMuZ2V0QWN0aXZlKCksIFwiZm9yd2FyZFwiICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG5ld0FjdGl2ZUluZGV4ID09PSB1bmRlZmluZWQgJiYgb3B0cy5taXNzaW5nICkge1xyXG5cdFx0XHRcdG9wdHMubWlzc2luZyggdGhpcy5nZXRBY3RpdmUoKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0dmFyIHBhdGggPSAkLm1vYmlsZS5wYXRoLFxyXG5cdFx0aW5pdGlhbEhyZWYgPSBsb2NhdGlvbi5ocmVmO1xyXG5cclxuXHQkLm1vYmlsZS5OYXZpZ2F0b3IgPSBmdW5jdGlvbiggaGlzdG9yeSApIHtcclxuXHRcdHRoaXMuaGlzdG9yeSA9IGhpc3Rvcnk7XHJcblx0XHR0aGlzLmlnbm9yZUluaXRpYWxIYXNoQ2hhbmdlID0gdHJ1ZTtcclxuXHJcblx0XHQkLm1vYmlsZS53aW5kb3cuYmluZCh7XHJcblx0XHRcdFwicG9wc3RhdGUuaGlzdG9yeVwiOiAkLnByb3h5KCB0aGlzLnBvcHN0YXRlLCB0aGlzICksXHJcblx0XHRcdFwiaGFzaGNoYW5nZS5oaXN0b3J5XCI6ICQucHJveHkoIHRoaXMuaGFzaGNoYW5nZSwgdGhpcyApXHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5OYXZpZ2F0b3IucHJvdG90eXBlLCB7XHJcblx0XHRzcXVhc2g6IGZ1bmN0aW9uKCB1cmwsIGRhdGEgKSB7XHJcblx0XHRcdHZhciBzdGF0ZSwgaHJlZiwgaGFzaCA9IHBhdGguaXNQYXRoKHVybCkgPyBwYXRoLnN0cmlwSGFzaCh1cmwpIDogdXJsO1xyXG5cclxuXHRcdFx0aHJlZiA9IHBhdGguc3F1YXNoKCB1cmwgKTtcclxuXHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byBwcm92aWRlIHRoaXMgaW5mb3JtYXRpb24gd2hlbiBpdCBpc24ndCBleHBsaWNpdGx5IHNldCBpbiB0aGVcclxuXHRcdFx0Ly8gZGF0YSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIHRvIHRoZSBzcXVhc2ggbWV0aG9kXHJcblx0XHRcdHN0YXRlID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdGhhc2g6IGhhc2gsXHJcblx0XHRcdFx0dXJsOiBocmVmXHJcblx0XHRcdH0sIGRhdGEpO1xyXG5cclxuXHRcdFx0Ly8gcmVwbGFjZSB0aGUgY3VycmVudCB1cmwgd2l0aCB0aGUgbmV3IGhyZWYgYW5kIHN0b3JlIHRoZSBzdGF0ZVxyXG5cdFx0XHQvLyBOb3RlIHRoYXQgaW4gc29tZSBjYXNlcyB3ZSBtaWdodCBiZSByZXBsYWNpbmcgYW4gdXJsIHdpdGggdGhlXHJcblx0XHRcdC8vIHNhbWUgdXJsLiBXZSBkbyB0aGlzIGFueXdheXMgYmVjYXVzZSB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0XHJcblx0XHRcdC8vIGFsbCBvZiBvdXIgaGlzdG9yeSBlbnRyaWVzIGhhdmUgYSBzdGF0ZSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoXHJcblx0XHRcdC8vIHRoZW0uIFRoaXMgYWxsb3dzIHVzIHRvIHdvcmsgYXJvdW5kIHRoZSBjYXNlIHdoZXJlICQubW9iaWxlLmJhY2soKVxyXG5cdFx0XHQvLyBpcyBjYWxsZWQgdG8gdHJhbnNpdGlvbiBmcm9tIGFuIGV4dGVybmFsIHBhZ2UgdG8gYW4gZW1iZWRkZWQgcGFnZS5cclxuXHRcdFx0Ly8gSW4gdGhhdCBwYXJ0aWN1bGFyIGNhc2UsIGEgaGFzaGNoYW5nZSBldmVudCBpcyAqTk9UKiBnZW5lcmF0ZWQgYnkgdGhlIGJyb3dzZXIuXHJcblx0XHRcdC8vIEVuc3VyaW5nIGVhY2ggaGlzdG9yeSBlbnRyeSBoYXMgYSBzdGF0ZSBvYmplY3QgbWVhbnMgdGhhdCBvblBvcFN0YXRlKClcclxuXHRcdFx0Ly8gd2lsbCBhbHdheXMgdHJpZ2dlciBvdXIgaGFzaGNoYW5nZSBjYWxsYmFjayBldmVuIHdoZW4gYSBoYXNoY2hhbmdlIGV2ZW50XHJcblx0XHRcdC8vIGlzIG5vdCBmaXJlZC5cclxuXHRcdFx0d2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKCBzdGF0ZSwgc3RhdGUudGl0bGUgfHwgZG9jdW1lbnQudGl0bGUsIGhyZWYgKTtcclxuXHJcblx0XHRcdHJldHVybiBzdGF0ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGFzaDogZnVuY3Rpb24oIHVybCwgaHJlZiApIHtcclxuXHRcdFx0dmFyIHBhcnNlZCwgbG9jLCBoYXNoLCByZXNvbHZlZDtcclxuXHJcblx0XHRcdC8vIEdyYWIgdGhlIGhhc2ggZm9yIHJlY29yZGluZy4gSWYgdGhlIHBhc3NlZCB1cmwgaXMgYSBwYXRoXHJcblx0XHRcdC8vIHdlIHVzZWQgdGhlIHBhcnNlZCB2ZXJzaW9uIG9mIHRoZSBzcXVhc2hlZCB1cmwgdG8gcmVjb25zdHJ1Y3QsXHJcblx0XHRcdC8vIG90aGVyd2lzZSB3ZSBhc3N1bWUgaXQncyBhIGhhc2ggYW5kIHN0b3JlIGl0IGRpcmVjdGx5XHJcblx0XHRcdHBhcnNlZCA9IHBhdGgucGFyc2VVcmwoIHVybCApO1xyXG5cdFx0XHRsb2MgPSBwYXRoLnBhcnNlTG9jYXRpb24oKTtcclxuXHJcblx0XHRcdGlmICggbG9jLnBhdGhuYW1lICsgbG9jLnNlYXJjaCA9PT0gcGFyc2VkLnBhdGhuYW1lICsgcGFyc2VkLnNlYXJjaCApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgcGF0aG5hbWUgYW5kIHNlYXJjaCBvZiB0aGUgcGFzc2VkIHVybCBpcyBpZGVudGljYWwgdG8gdGhlIGN1cnJlbnQgbG9jXHJcblx0XHRcdFx0Ly8gdGhlbiB3ZSBtdXN0IHVzZSB0aGUgaGFzaC4gT3RoZXJ3aXNlIHRoZXJlIHdpbGwgYmUgbm8gZXZlbnRcclxuXHRcdFx0XHQvLyBlZywgdXJsID0gXCIvZm9vL2Jhcj9iYXojYmFuZ1wiLCBsb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vZXhhbXBsZS5jb20vZm9vL2Jhcj9iYXpcIlxyXG5cdFx0XHRcdGhhc2ggPSBwYXJzZWQuaGFzaCA/IHBhcnNlZC5oYXNoIDogcGFyc2VkLnBhdGhuYW1lICsgcGFyc2VkLnNlYXJjaDtcclxuXHRcdFx0fSBlbHNlIGlmICggcGF0aC5pc1BhdGgodXJsKSApIHtcclxuXHRcdFx0XHRyZXNvbHZlZCA9IHBhdGgucGFyc2VVcmwoIGhyZWYgKTtcclxuXHRcdFx0XHQvLyBJZiB0aGUgcGFzc2VkIHVybCBpcyBhIHBhdGgsIG1ha2UgaXQgZG9tYWluIHJlbGF0aXZlIGFuZCByZW1vdmUgYW55IHRyYWlsaW5nIGhhc2hcclxuXHRcdFx0XHRoYXNoID0gcmVzb2x2ZWQucGF0aG5hbWUgKyByZXNvbHZlZC5zZWFyY2ggKyAocGF0aC5pc1ByZXNlcnZhYmxlSGFzaCggcmVzb2x2ZWQuaGFzaCApPyByZXNvbHZlZC5oYXNoLnJlcGxhY2UoIFwiI1wiLCBcIlwiICkgOiBcIlwiKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRoYXNoID0gdXJsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gaGFzaDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyByZWNvbnNpZGVyIG5hbWVcclxuXHRcdGdvOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBub0V2ZW50cyApIHtcclxuXHRcdFx0dmFyIHN0YXRlLCBocmVmLCBoYXNoLCBwb3BzdGF0ZUV2ZW50LFxyXG5cdFx0XHRcdGlzUG9wU3RhdGVFdmVudCA9ICQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKTtcclxuXHJcblx0XHRcdC8vIEdldCB0aGUgdXJsIGFzIGl0IHdvdWxkIGxvb2sgc3F1YXNoZWQgb24gdG8gdGhlIGN1cnJlbnQgcmVzb2x1dGlvbiB1cmxcclxuXHRcdFx0aHJlZiA9IHBhdGguc3F1YXNoKCB1cmwgKTtcclxuXHJcblx0XHRcdC8vIHNvcnQgb3V0IHdoYXQgdGhlIGhhc2ggc291bGQgYmUgZnJvbSB0aGUgdXJsXHJcblx0XHRcdGhhc2ggPSB0aGlzLmhhc2goIHVybCwgaHJlZiApO1xyXG5cclxuXHRcdFx0Ly8gSGVyZSB3ZSBwcmV2ZW50IHRoZSBuZXh0IGhhc2ggY2hhbmdlIG9yIHBvcHN0YXRlIGV2ZW50IGZyb20gZG9pbmcgYW55XHJcblx0XHRcdC8vIGhpc3RvcnkgbWFuYWdlbWVudC4gSW4gdGhlIGNhc2Ugb2YgaGFzaGNoYW5nZSB3ZSBkb24ndCBzd2FsbG93IGl0XHJcblx0XHRcdC8vIGlmIHRoZXJlIHdpbGwgYmUgbm8gaGFzaGNoYW5nZSBmaXJlZCAoc2luY2UgdGhhdCB3b24ndCByZXNldCB0aGUgdmFsdWUpXHJcblx0XHRcdC8vIGFuZCB3aWxsIHN3YWxsb3cgdGhlIGZvbGxvd2luZyBoYXNoY2hhbmdlXHJcblx0XHRcdGlmICggbm9FdmVudHMgJiYgaGFzaCAhPT0gcGF0aC5zdHJpcEhhc2gocGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaCkgKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2ZW50TmV4dEhhc2hDaGFuZ2UgPSBub0V2ZW50cztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSU1QT1JUQU5UIGluIHRoZSBjYXNlIHdoZXJlIHBvcHN0YXRlIGlzIHN1cHBvcnRlZCB0aGUgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWRcclxuXHRcdFx0Ly8gICAgICBkaXJlY3RseSwgc3RvcHBpbmcgZnVydGhlciBleGVjdXRpb24gLSBpZSwgaW50ZXJ1cHRpbmcgdGhlIGZsb3cgb2YgdGhpc1xyXG5cdFx0XHQvLyAgICAgIG1ldGhvZCBjYWxsIHRvIGZpcmUgYmluZGluZ3MgYXQgdGhpcyBleHByZXNzaW9uLiBCZWxvdyB0aGUgbmF2aWdhdGUgbWV0aG9kXHJcblx0XHRcdC8vICAgICAgdGhlcmUgaXMgYSBiaW5kaW5nIHRvIGNhdGNoIHRoaXMgZXZlbnQgYW5kIHN0b3AgaXRzIHByb3BhZ2F0aW9uLlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyAgICAgIFdlIHRoZW4gdHJpZ2dlciBhIG5ldyBwb3BzdGF0ZSBldmVudCBvbiB0aGUgd2luZG93IHdpdGggYSBudWxsIHN0YXRlXHJcblx0XHRcdC8vICAgICAgc28gdGhhdCB0aGUgbmF2aWdhdGUgZXZlbnRzIGNhbiBjb25jbHVkZSB0aGVpciB3b3JrIHByb3Blcmx5XHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIGlmIHRoZSB1cmwgaXMgYSBwYXRoIHdlIHdhbnQgdG8gcHJlc2VydmUgdGhlIHF1ZXJ5IHBhcmFtcyB0aGF0IGFyZSBhdmFpbGFibGUgb25cclxuXHRcdFx0Ly8gdGhlIGN1cnJlbnQgdXJsLlxyXG5cdFx0XHR0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgPSB0cnVlO1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcblxyXG5cdFx0XHQvLyBJZiBwb3BzdGF0ZSBpcyBlbmFibGVkIGFuZCB0aGUgYnJvd3NlciB0cmlnZ2VycyBgcG9wc3RhdGVgIGV2ZW50cyB3aGVuIHRoZSBoYXNoXHJcblx0XHRcdC8vIGlzIHNldCAodGhpcyBvZnRlbiBoYXBwZW5zIGltbWVkaWF0ZWx5IGluIGJyb3dzZXJzIGxpa2UgQ2hyb21lKSwgdGhlbiB0aGVcclxuXHRcdFx0Ly8gdGhpcyBmbGFnIHdpbGwgYmUgc2V0IHRvIGZhbHNlIGFscmVhZHkuIElmIGl0J3MgYSBicm93c2VyIHRoYXQgZG9lcyBub3QgdHJpZ2dlclxyXG5cdFx0XHQvLyBhIGBwb3BzdGF0ZWAgb24gaGFzaCBhc3NpZ25lbWVudCBvciBgcmVwbGFjZVN0YXRlYCB0aGVuIHdlIG5lZWQgYXZvaWQgdGhlIGJyYW5jaFxyXG5cdFx0XHQvLyB0aGF0IHN3YWxsb3dzIHRoZSBldmVudCBjcmVhdGVkIGJ5IHRoZSBwb3BzdGF0ZSBnZW5lcmF0ZWQgYnkgdGhlIGhhc2ggYXNzaWdubWVudFxyXG5cdFx0XHQvLyBBdCB0aGUgdGltZSBvZiB0aGlzIHdyaXRpbmcgdGhpcyBoYXBwZW5zIHdpdGggT3BlcmEgMTIgYW5kIHNvbWUgdmVyc2lvbiBvZiBJRVxyXG5cdFx0XHR0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdHN0YXRlID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdHVybDogaHJlZixcclxuXHRcdFx0XHRoYXNoOiBoYXNoLFxyXG5cdFx0XHRcdHRpdGxlOiBkb2N1bWVudC50aXRsZVxyXG5cdFx0XHR9LCBkYXRhKTtcclxuXHJcblx0XHRcdGlmICggaXNQb3BTdGF0ZUV2ZW50ICkge1xyXG5cdFx0XHRcdHBvcHN0YXRlRXZlbnQgPSBuZXcgJC5FdmVudCggXCJwb3BzdGF0ZVwiICk7XHJcblx0XHRcdFx0cG9wc3RhdGVFdmVudC5vcmlnaW5hbEV2ZW50ID0ge1xyXG5cdFx0XHRcdFx0dHlwZTogXCJwb3BzdGF0ZVwiLFxyXG5cdFx0XHRcdFx0c3RhdGU6IG51bGxcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR0aGlzLnNxdWFzaCggdXJsLCBzdGF0ZSApO1xyXG5cclxuXHRcdFx0XHQvLyBUcmlnZ2VyIGEgbmV3IGZhdXggcG9wc3RhdGUgZXZlbnQgdG8gcmVwbGFjZSB0aGUgb25lIHRoYXQgd2VcclxuXHRcdFx0XHQvLyBjYXVnaHQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSBoYXNoIHNldHRpbmcgYWJvdmUuXHJcblx0XHRcdFx0aWYgKCAhbm9FdmVudHMgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmlnbm9yZVBvcFN0YXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdCQubW9iaWxlLndpbmRvdy50cmlnZ2VyKCBwb3BzdGF0ZUV2ZW50ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyByZWNvcmQgdGhlIGhpc3RvcnkgZW50cnkgc28gdGhhdCB0aGUgaW5mb3JtYXRpb24gY2FuIGJlIGluY2x1ZGVkXHJcblx0XHRcdC8vIGluIGhhc2hjaGFuZ2UgZXZlbnQgZHJpdmVuIG5hdmlnYXRlIGV2ZW50cyBpbiBhIHNpbWlsYXIgZmFzaGlvbiB0b1xyXG5cdFx0XHQvLyB0aGUgc3RhdGUgdGhhdCdzIHByb3ZpZGVkIGJ5IHBvcHN0YXRlXHJcblx0XHRcdHRoaXMuaGlzdG9yeS5hZGQoIHN0YXRlLnVybCwgc3RhdGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVGhpcyBiaW5kaW5nIGlzIGludGVuZGVkIHRvIGNhdGNoIHRoZSBwb3BzdGF0ZSBldmVudHMgdGhhdCBhcmUgZmlyZWRcclxuXHRcdC8vIHdoZW4gZXhlY3V0aW9uIG9mIHRoZSBgJC5uYXZpZ2F0ZWAgbWV0aG9kIHN0b3BzIGF0IHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdXJsO1xyXG5cdFx0Ly8gYW5kIGNvbXBsZXRlbHkgcHJldmVudCB0aGVtIGZyb20gcHJvcGFnYXRpbmcuIFRoZSBwb3BzdGF0ZSBldmVudCB3aWxsIHRoZW4gYmVcclxuXHRcdC8vIHJldHJpZ2dlcmVkIGFmdGVyIGV4ZWN1dGlvbiByZXN1bWVzXHJcblx0XHQvL1xyXG5cdFx0Ly8gVE9ETyBncmFiIHRoZSBvcmlnaW5hbCBldmVudCBoZXJlIGFuZCB1c2UgaXQgZm9yIHRoZSBzeW50aGV0aWMgZXZlbnQgaW4gdGhlXHJcblx0XHQvLyAgICAgIHNlY29uZCBoYWxmIG9mIHRoZSBuYXZpZ2F0ZSBleGVjdXRpb24gdGhhdCB3aWxsIGZvbGxvdyB0aGlzIGJpbmRpbmdcclxuXHRcdHBvcHN0YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBoYXNoLCBzdGF0ZTtcclxuXHJcblx0XHRcdC8vIFBhcnRseSB0byBzdXBwb3J0IG91ciB0ZXN0IHN1aXRlIHdoaWNoIG1hbnVhbGx5IGFsdGVycyB0aGUgc3VwcG9ydFxyXG5cdFx0XHQvLyB2YWx1ZSB0byB0ZXN0IGhhc2hjaGFuZ2UuIFBhcnRseSB0byBwcmV2ZW50IGFsbCBhcm91bmQgd2VpcmRuZXNzXHJcblx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIHBvcHN0YXRlIHRyaWdnZXJlZCBieSB0aGUgYWN0dWFsIGFsdGVyYXRpb24gb2YgdGhlIGhhc2hcclxuXHRcdFx0Ly8gcHJldmVudCBpdCBjb21wbGV0ZWx5LiBIaXN0b3J5IGlzIHRyYWNrZWQgbWFudWFsbHlcclxuXHRcdFx0aWYgKCB0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlID0gZmFsc2U7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGlzIGlzIHRoZSBwb3BzdGF0ZSB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGByZXBsYWNlU3RhdGVgIGNhbGwgaW4gdGhlIGdvXHJcblx0XHRcdC8vIG1ldGhvZCwgdGhlbiBzaW1wbHkgaWdub3JlIGl0LiBUaGUgaGlzdG9yeSBlbnRyeSBoYXMgYWxyZWFkeSBiZWVuIGNhcHR1cmVkXHJcblx0XHRcdGlmICggdGhpcy5pZ25vcmVQb3BTdGF0ZSApIHtcclxuXHRcdFx0XHR0aGlzLmlnbm9yZVBvcFN0YXRlID0gZmFsc2U7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBubyBzdGF0ZSwgYW5kIHRoZSBoaXN0b3J5IHN0YWNrIGxlbmd0aCBpcyBvbmUgd2VyZVxyXG5cdFx0XHQvLyBwcm9iYWJseSBnZXR0aW5nIHRoZSBwYWdlIGxvYWQgcG9wc3RhdGUgZmlyZWQgYnkgYnJvd3NlcnMgbGlrZSBjaHJvbWVcclxuXHRcdFx0Ly8gYXZvaWQgaXQgYW5kIHNldCB0aGUgb25lIHRpbWUgZmxhZyB0byBmYWxzZS5cclxuXHRcdFx0Ly8gVE9ETzogRG8gd2UgcmVhbGx5IG5lZWQgYWxsIHRoZXNlIGNvbmRpdGlvbnM/IENvbXBhcmluZyBsb2NhdGlvbiBocmVmc1xyXG5cdFx0XHQvLyBzaG91bGQgYmUgc3VmZmljaWVudC5cclxuXHRcdFx0aWYgKCAhZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSAmJlxyXG5cdFx0XHRcdHRoaXMuaGlzdG9yeS5zdGFjay5sZW5ndGggPT09IDEgJiZcclxuXHRcdFx0XHR0aGlzLmlnbm9yZUluaXRpYWxIYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdHRoaXMuaWdub3JlSW5pdGlhbEhhc2hDaGFuZ2UgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0aWYgKCBsb2NhdGlvbi5ocmVmID09PSBpbml0aWFsSHJlZiApIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBhY2NvdW50IGZvciBkaXJlY3QgbWFuaXB1bGF0aW9uIG9mIHRoZSBoYXNoLiBUaGF0IGlzLCB3ZSB3aWxsIHJlY2VpdmUgYSBwb3BzdGF0ZVxyXG5cdFx0XHQvLyB3aGVuIHRoZSBoYXNoIGlzIGNoYW5nZWQgYnkgYXNzaWdubWVudCwgYW5kIGl0IHdvbid0IGhhdmUgYSBzdGF0ZSBhc3NvY2lhdGVkLiBXZVxyXG5cdFx0XHQvLyB0aGVuIG5lZWQgdG8gc3F1YXNoIHRoZSBoYXNoLiBTZWUgYmVsb3cgZm9yIGhhbmRsaW5nIG9mIGhhc2ggYXNzaWdubWVudCB0aGF0XHJcblx0XHRcdC8vIG1hdGNoZXMgYW4gZXhpc3RpbmcgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHQvLyBUT0RPIGl0IG1pZ2h0IGJlIGJldHRlciB0byBvbmx5IGFkZCB0byB0aGUgaGlzdG9yeSBzdGFja1xyXG5cdFx0XHQvLyAgICAgIHdoZW4gdGhlIGhhc2ggaXMgYWRqYWNlbnQgdG8gdGhlIGFjdGl2ZSBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdGhhc2ggPSBwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cdFx0XHRpZiAoICFldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlICYmIGhhc2ggKSB7XHJcblx0XHRcdFx0Ly8gc3F1YXNoIHRoZSBoYXNoIHRoYXQncyBiZWVuIGFzc2lnbmVkIG9uIHRoZSBVUkwgd2l0aCByZXBsYWNlU3RhdGVcclxuXHRcdFx0XHQvLyBhbHNvIGdyYWIgdGhlIHJlc3VsdGluZyBzdGF0ZSBvYmplY3QgZm9yIHN0b3JhZ2VcclxuXHRcdFx0XHRzdGF0ZSA9IHRoaXMuc3F1YXNoKCBoYXNoICk7XHJcblxyXG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgbmV3IGhhc2ggYXMgYW4gYWRkaXRpb25hbCBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0Ly8gdG8gbWF0Y2ggdGhlIGJyb3dzZXIncyB0cmVhdG1lbnQgb2YgaGFzaCBhc3NpZ25tZW50XHJcblx0XHRcdFx0dGhpcy5oaXN0b3J5LmFkZCggc3RhdGUudXJsLCBzdGF0ZSApO1xyXG5cclxuXHRcdFx0XHQvLyBwYXNzIHRoZSBuZXdseSBjcmVhdGVkIHN0YXRlIGluZm9ybWF0aW9uXHJcblx0XHRcdFx0Ly8gYWxvbmcgd2l0aCB0aGUgZXZlbnRcclxuXHRcdFx0XHRldmVudC5oaXN0b3J5U3RhdGUgPSBzdGF0ZTtcclxuXHJcblx0XHRcdFx0Ly8gZG8gbm90IGFsdGVyIGhpc3RvcnksIHdlJ3ZlIGFkZGVkIGEgbmV3IGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHQvLyBzbyB3ZSBrbm93IHdoZXJlIHdlIGFyZVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgYWxsIGVsc2UgZmFpbHMgdGhpcyBpcyBhIHBvcHN0YXRlIHRoYXQgY29tZXMgZnJvbSB0aGUgYmFjayBvciBmb3J3YXJkIGJ1dHRvbnNcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCB0aGUgc3RhdGUgb2Ygb3VyIGhpc3Rvcnkgc3RhY2sgcHJvcGVybHksIGFuZCByZWNvcmQgdGhlIGRpcmVjdGlvbmFsaXR5XHJcblx0XHRcdHRoaXMuaGlzdG9yeS5kaXJlY3Qoe1xyXG5cdFx0XHRcdHVybDogKGV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgfHwge30pLnVybCB8fCBoYXNoLFxyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHRoZSB1cmwgaXMgZWl0aGVyIGZvcndhcmQgb3IgYmFja3dhcmQgaW4gaGlzdG9yeSBpbmNsdWRlIHRoZSBlbnRyeVxyXG5cdFx0XHRcdC8vIGFzIGRhdGEgb24gdGhlIGV2ZW50IG9iamVjdCBmb3IgbWVyZ2luZyBhcyBkYXRhIGluIHRoZSBuYXZpZ2F0ZSBldmVudFxyXG5cdFx0XHRcdHByZXNlbnQ6IGZ1bmN0aW9uKCBoaXN0b3J5RW50cnksIGRpcmVjdGlvbiApIHtcclxuXHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHRvIHBhc3MgZG93biBhcyB0aGUgbmF2aWdhdGUgZXZlbnQgZGF0YVxyXG5cdFx0XHRcdFx0ZXZlbnQuaGlzdG9yeVN0YXRlID0gJC5leHRlbmQoe30sIGhpc3RvcnlFbnRyeSk7XHJcblx0XHRcdFx0XHRldmVudC5oaXN0b3J5U3RhdGUuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIE5PVEUgbXVzdCBiaW5kIGJlZm9yZSBgbmF2aWdhdGVgIHNwZWNpYWwgZXZlbnQgaGFzaGNoYW5nZSBiaW5kaW5nIG90aGVyd2lzZSB0aGVcclxuXHRcdC8vICAgICAgbmF2aWdhdGlvbiBkYXRhIHdvbid0IGJlIGF0dGFjaGVkIHRvIHRoZSBoYXNoY2hhbmdlIGV2ZW50IGluIHRpbWUgZm9yIHRob3NlXHJcblx0XHQvLyAgICAgIGJpbmRpbmdzIHRvIGF0dGFjaCBpdCB0byB0aGUgYG5hdmlnYXRlYCBzcGVjaWFsIGV2ZW50XHJcblx0XHQvLyBUT0RPIGFkZCBhIGNoZWNrIGhlcmUgdGhhdCBgaGFzaGNoYW5nZS5uYXZpZ2F0ZWAgaXMgYm91bmQgYWxyZWFkeSBvdGhlcndpc2UgaXQnc1xyXG5cdFx0Ly8gICAgICBicm9rZW4gKGV4Y2VwdGlvbj8pXHJcblx0XHRoYXNoY2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBoaXN0b3J5LCBoYXNoO1xyXG5cclxuXHRcdFx0Ly8gSWYgaGFzaGNoYW5nZSBsaXN0ZW5pbmcgaXMgZXhwbGljaXRseSBkaXNhYmxlZCBvciBwdXNoc3RhdGUgaXMgc3VwcG9ydGVkXHJcblx0XHRcdC8vIGF2b2lkIG1ha2luZyB1c2Ugb2YgdGhlIGhhc2hjaGFuZ2UgaGFuZGxlci5cclxuXHRcdFx0aWYgKCEkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpIHx8XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gT24gb2NjYXNpb24gZXhwbGljaXRseSB3YW50IHRvIHByZXZlbnQgdGhlIG5leHQgaGFzaCBmcm9tIHByb3BvZ2F0aW5nIGJlY2F1c2Ugd2Ugb25seVxyXG5cdFx0XHQvLyB3aXRoIHRvIGFsdGVyIHRoZSB1cmwgdG8gcmVwcmVzZW50IHRoZSBuZXcgc3RhdGUgZG8gc28gaGVyZVxyXG5cdFx0XHRpZiAoIHRoaXMucHJldmVudE5leHRIYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdHRoaXMucHJldmVudE5leHRIYXNoQ2hhbmdlID0gZmFsc2U7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRoaXN0b3J5ID0gdGhpcy5oaXN0b3J5O1xyXG5cdFx0XHRoYXNoID0gcGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgYSBoYXNoY2hhbmdlIGNhdXNlZCBieSB0aGUgYmFjayBvciBmb3J3YXJkIGJ1dHRvblxyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IHRoZSBzdGF0ZSBvZiBvdXIgaGlzdG9yeSBzdGFjayBwcm9wZXJseVxyXG5cdFx0XHR0aGlzLmhpc3RvcnkuZGlyZWN0KHtcclxuXHRcdFx0XHR1cmw6IGhhc2gsXHJcblxyXG5cdFx0XHRcdC8vIFdoZW4gdGhlIHVybCBpcyBlaXRoZXIgZm9yd2FyZCBvciBiYWNrd2FyZCBpbiBoaXN0b3J5IGluY2x1ZGUgdGhlIGVudHJ5XHJcblx0XHRcdFx0Ly8gYXMgZGF0YSBvbiB0aGUgZXZlbnQgb2JqZWN0IGZvciBtZXJnaW5nIGFzIGRhdGEgaW4gdGhlIG5hdmlnYXRlIGV2ZW50XHJcblx0XHRcdFx0cHJlc2VudDogZnVuY3Rpb24oIGhpc3RvcnlFbnRyeSwgZGlyZWN0aW9uICkge1xyXG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QgdG8gcGFzcyBkb3duIGFzIHRoZSBuYXZpZ2F0ZSBldmVudCBkYXRhXHJcblx0XHRcdFx0XHRldmVudC5oYXNoY2hhbmdlU3RhdGUgPSAkLmV4dGVuZCh7fSwgaGlzdG9yeUVudHJ5KTtcclxuXHRcdFx0XHRcdGV2ZW50Lmhhc2hjaGFuZ2VTdGF0ZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcblx0XHRcdFx0fSxcclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB3ZSBkb24ndCBmaW5kIGEgaGFzaCBpbiBvdXIgaGlzdG9yeSBjbGVhcmx5IHdlJ3JlIGFpbWluZyB0byBnbyB0aGVyZVxyXG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgZW50cnkgYXMgbmV3IGZvciBmdXR1cmUgdHJhdmVyc2FsXHJcblx0XHRcdFx0Ly9cclxuXHRcdFx0XHQvLyBOT1RFIGl0J3Mgbm90IGVudGlyZWx5IGNsZWFyIHRoYXQgdGhpcyBpcyB0aGUgcmlnaHQgdGhpbmcgdG8gZG8gZ2l2ZW4gdGhhdCB3ZVxyXG5cdFx0XHRcdC8vICAgICAgY2FuJ3Qga25vdyB0aGUgdXNlcnMgaW50ZW50aW9uLiBJdCBtaWdodCBiZSBiZXR0ZXIgdG8gZXhwbGljaXRseSBfbm90X1xyXG5cdFx0XHRcdC8vICAgICAgc3VwcG9ydCBsb2NhdGlvbi5oYXNoIGFzc2lnbm1lbnQgaW4gcHJlZmVyZW5jZSB0byAkLm5hdmlnYXRlIGNhbGxzXHJcblx0XHRcdFx0Ly8gVE9ETyBmaXJzdCBhcmcgdG8gYWRkIHNob3VsZCBiZSB0aGUgaHJlZiwgYnV0IGl0IGNhdXNlcyBpc3N1ZXMgaW4gaWRlbnRpZnlpbmdcclxuXHRcdFx0XHQvLyAgICAgIGVtYmVkZWQgcGFnZXNcclxuXHRcdFx0XHRtaXNzaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGhpc3RvcnkuYWRkKCBoYXNoLCB7XHJcblx0XHRcdFx0XHRcdGhhc2g6IGhhc2gsXHJcblx0XHRcdFx0XHRcdHRpdGxlOiBkb2N1bWVudC50aXRsZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQvLyBUT0RPIGNvbnNpZGVyIHF1ZXVlaW5nIG5hdmlnYXRpb24gYWN0aXZpdHkgdW50aWwgcHJldmlvdXMgYWN0aXZpdGllcyBoYXZlIGNvbXBsZXRlZFxyXG5cdC8vICAgICAgc28gdGhhdCBlbmQgdXNlcnMgZG9uJ3QgaGF2ZSB0byB0aGluayBhYm91dCBpdC4gUHVudGluZyBmb3Igbm93XHJcblx0Ly8gVE9ETyAhISBtb3ZlIHRoZSBldmVudCBiaW5kaW5ncyBpbnRvIGNhbGxiYWNrcyBvbiB0aGUgbmF2aWdhdGUgZXZlbnRcclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIG5vRXZlbnRzICkge1xyXG5cdFx0JC5tb2JpbGUubmF2aWdhdGUubmF2aWdhdG9yLmdvKCB1cmwsIGRhdGEsIG5vRXZlbnRzICk7XHJcblx0fTtcclxuXHJcblx0Ly8gZXhwb3NlIHRoZSBoaXN0b3J5IG9uIHRoZSBuYXZpZ2F0ZSBtZXRob2QgaW4gYW50aWNpcGF0aW9uIG9mIGZ1bGwgaW50ZWdyYXRpb24gd2l0aFxyXG5cdC8vIGV4aXN0aW5nIG5hdmlnYXRpb24gZnVuY3Rpb25hbHR5IHRoYXQgaXMgdGlnaHRseSBjb3VwbGVkIHRvIHRoZSBoaXN0b3J5IGluZm9ybWF0aW9uXHJcblx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeSA9IG5ldyAkLm1vYmlsZS5IaXN0b3J5KCk7XHJcblxyXG5cdC8vIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBuYXZpZ2F0b3IgZm9yIHVzZSB3aXRoaW4gdGhlICQubmF2aWdhdGUgbWV0aG9kXHJcblx0JC5tb2JpbGUubmF2aWdhdGUubmF2aWdhdG9yID0gbmV3ICQubW9iaWxlLk5hdmlnYXRvciggJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeSApO1xyXG5cclxuXHR2YXIgbG9jID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCk7XHJcblx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hZGQoIGxvYy5ocmVmLCB7aGFzaDogbG9jLmhhc2h9ICk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgcHJvcHMgPSB7XHJcblx0XHRcdFwiYW5pbWF0aW9uXCI6IHt9LFxyXG5cdFx0XHRcInRyYW5zaXRpb25cIjoge31cclxuXHRcdH0sXHJcblx0XHR0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICksXHJcblx0XHR2ZW5kb3JQcmVmaXhlcyA9IFsgXCJcIiwgXCJ3ZWJraXQtXCIsIFwibW96LVwiLCBcIm8tXCIgXTtcclxuXHJcblx0JC5lYWNoKCBbIFwiYW5pbWF0aW9uXCIsIFwidHJhbnNpdGlvblwiIF0sIGZ1bmN0aW9uKCBpLCB0ZXN0ICkge1xyXG5cclxuXHRcdC8vIEdldCBjb3JyZWN0IG5hbWUgZm9yIHRlc3RcclxuXHRcdHZhciB0ZXN0TmFtZSA9ICggaSA9PT0gMCApID8gdGVzdCArIFwiLVwiICsgXCJuYW1lXCIgOiB0ZXN0O1xyXG5cclxuXHRcdCQuZWFjaCggdmVuZG9yUHJlZml4ZXMsIGZ1bmN0aW9uKCBqLCBwcmVmaXggKSB7XHJcblx0XHRcdGlmICggdGVzdEVsZW1lbnQuc3R5bGVbICQuY2FtZWxDYXNlKCBwcmVmaXggKyB0ZXN0TmFtZSApIF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHQgcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdID0gcHJlZml4O1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2V0IGV2ZW50IGFuZCBkdXJhdGlvbiBuYW1lcyBmb3IgbGF0ZXIgdXNlXHJcblx0XHRwcm9wc1sgdGVzdCBdWyBcImR1cmF0aW9uXCIgXSA9XHJcblx0XHRcdCQuY2FtZWxDYXNlKCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gKyB0ZXN0ICsgXCItXCIgKyBcImR1cmF0aW9uXCIgKTtcclxuXHRcdHByb3BzWyB0ZXN0IF1bIFwiZXZlbnRcIiBdID1cclxuXHRcdFx0JC5jYW1lbENhc2UoIHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSArIHRlc3QgKyBcIi1cIiArIFwiZW5kXCIgKTtcclxuXHJcblx0XHQvLyBBbGwgbG93ZXIgY2FzZSBpZiBub3QgYSB2ZW5kb3IgcHJvcFxyXG5cdFx0aWYgKCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gPT09IFwiXCIgKSB7XHJcblx0XHRcdHByb3BzWyB0ZXN0IF1bIFwiZXZlbnRcIiBdID0gcHJvcHNbIHRlc3QgXVsgXCJldmVudFwiIF0udG9Mb3dlckNhc2UoKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gSWYgYSB2YWxpZCBwcmVmaXggd2FzIGZvdW5kIHRoZW4gdGhlIGl0IGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxyXG5cdCQuc3VwcG9ydC5jc3NUcmFuc2l0aW9ucyA9ICggcHJvcHNbIFwidHJhbnNpdGlvblwiIF1bIFwicHJlZml4XCIgXSAhPT0gdW5kZWZpbmVkICk7XHJcblx0JC5zdXBwb3J0LmNzc0FuaW1hdGlvbnMgPSAoIHByb3BzWyBcImFuaW1hdGlvblwiIF1bIFwicHJlZml4XCIgXSAhPT0gdW5kZWZpbmVkICk7XHJcblxyXG5cdC8vIFJlbW92ZSB0aGUgdGVzdEVsZW1lbnRcclxuXHQkKCB0ZXN0RWxlbWVudCApLnJlbW92ZSgpO1xyXG5cclxuXHQvLyBBbmltYXRpb24gY29tcGxldGUgY2FsbGJhY2tcclxuXHQkLmZuLmFuaW1hdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oIGNhbGxiYWNrLCB0eXBlLCBmYWxsYmFja1RpbWUgKSB7XHJcblx0XHR2YXIgdGltZXIsIGR1cmF0aW9uLFxyXG5cdFx0XHR0aGF0ID0gdGhpcyxcclxuXHRcdFx0ZXZlbnRCaW5kaW5nID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdC8vIENsZWFyIHRoZSB0aW1lciBzbyB3ZSBkb24ndCBjYWxsIGNhbGxiYWNrIHR3aWNlXHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lciApO1xyXG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0YW5pbWF0aW9uVHlwZSA9ICggIXR5cGUgfHwgdHlwZSA9PT0gXCJhbmltYXRpb25cIiApID8gXCJhbmltYXRpb25cIiA6IFwidHJhbnNpdGlvblwiO1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSBzZWxlY3RlZCB0eXBlIGlzIHN1cHBvcnRlZCBieSBicm93c2VyXHJcblx0XHRpZiAoICggJC5zdXBwb3J0LmNzc1RyYW5zaXRpb25zICYmIGFuaW1hdGlvblR5cGUgPT09IFwidHJhbnNpdGlvblwiICkgfHxcclxuXHRcdFx0KCAkLnN1cHBvcnQuY3NzQW5pbWF0aW9ucyAmJiBhbmltYXRpb25UeXBlID09PSBcImFuaW1hdGlvblwiICkgKSB7XHJcblxyXG5cdFx0XHQvLyBJZiBhIGZhbGxiYWNrIHRpbWUgd2FzIG5vdCBwYXNzZWQgc2V0IG9uZVxyXG5cdFx0XHRpZiAoIGZhbGxiYWNrVGltZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIHdhcyBub3QgYm91bmQgdG8gZG9jdW1lbnQgYmVmb3JlIGNoZWNraW5nIC5jc3NcclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5jb250ZXh0ICE9PSBkb2N1bWVudCApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBQYXJzZSB0aGUgZHVycmF0aW9uIHNpbmNlIGl0cyBpbiBzZWNvbmQgbXVsdGlwbGUgYnkgMTAwMCBmb3IgbWlsbGlzZWNvbmRzXHJcblx0XHRcdFx0XHQvLyBNdWx0aXBseSBieSAzIHRvIG1ha2Ugc3VyZSB3ZSBnaXZlIHRoZSBhbmltYXRpb24gcGxlbnR5IG9mIHRpbWUuXHJcblx0XHRcdFx0XHRkdXJhdGlvbiA9IHBhcnNlRmxvYXQoXHJcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5jc3MoIHByb3BzWyBhbmltYXRpb25UeXBlIF0uZHVyYXRpb24gKVxyXG5cdFx0XHRcdFx0KSAqIDMwMDA7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBJZiB3ZSBjb3VsZCBub3QgcmVhZCBhIGR1cmF0aW9uIHVzZSB0aGUgZGVmYXVsdFxyXG5cdFx0XHRcdGlmICggZHVyYXRpb24gPT09IDAgfHwgZHVyYXRpb24gPT09IHVuZGVmaW5lZCB8fCBpc05hTiggZHVyYXRpb24gKSApIHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uID0gJC5mbi5hbmltYXRpb25Db21wbGV0ZS5kZWZhdWx0RHVyYXRpb247XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXRzIHVwIHRoZSBmYWxsYmFjayBpZiBldmVudCBuZXZlciBjb21lc1xyXG5cdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoYXQgKS5vZmYoIHByb3BzWyBhbmltYXRpb25UeXBlIF0uZXZlbnQsIGV2ZW50QmluZGluZyApO1xyXG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGF0ICk7XHJcblx0XHRcdH0sIGR1cmF0aW9uICk7XHJcblxyXG5cdFx0XHQvLyBCaW5kIHRoZSBldmVudFxyXG5cdFx0XHRyZXR1cm4gJCggdGhpcyApLm9uZSggcHJvcHNbIGFuaW1hdGlvblR5cGUgXS5ldmVudCwgZXZlbnRCaW5kaW5nICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0Ly8gQ1NTIGFuaW1hdGlvbiAvIHRyYW5zaXRpb25zIG5vdCBzdXBwb3J0ZWRcclxuXHRcdFx0Ly8gRGVmZXIgZXhlY3V0aW9uIGZvciBjb25zaXN0ZW5jeSBiZXR3ZWVuIHdlYmtpdC9ub24gd2Via2l0XHJcblx0XHRcdHNldFRpbWVvdXQoICQucHJveHkoIGNhbGxiYWNrLCB0aGlzICksIDAgKTtcclxuXHRcdFx0cmV0dXJuICQoIHRoaXMgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBbGxvdyBkZWZhdWx0IGNhbGxiYWNrIHRvIGJlIGNvbmZpZ3VyZWQgb24gbW9iaWxlSW5pdFxyXG5cdCQuZm4uYW5pbWF0aW9uQ29tcGxldGUuZGVmYXVsdER1cmF0aW9uID0gMTAwMDtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuLy8gVGhpcyBwbHVnaW4gaXMgYW4gZXhwZXJpbWVudCBmb3IgYWJzdHJhY3RpbmcgYXdheSB0aGUgdG91Y2ggYW5kIG1vdXNlXHJcbi8vIGV2ZW50cyBzbyB0aGF0IGRldmVsb3BlcnMgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCB3aGljaCBtZXRob2Qgb2YgaW5wdXRcclxuLy8gdGhlIGRldmljZSB0aGVpciBkb2N1bWVudCBpcyBsb2FkZWQgb24gc3VwcG9ydHMuXHJcbi8vXHJcbi8vIFRoZSBpZGVhIGhlcmUgaXMgdG8gYWxsb3cgdGhlIGRldmVsb3BlciB0byByZWdpc3RlciBsaXN0ZW5lcnMgZm9yIHRoZVxyXG4vLyBiYXNpYyBtb3VzZSBldmVudHMsIHN1Y2ggYXMgbW91c2Vkb3duLCBtb3VzZW1vdmUsIG1vdXNldXAsIGFuZCBjbGljayxcclxuLy8gYW5kIHRoZSBwbHVnaW4gd2lsbCB0YWtlIGNhcmUgb2YgcmVnaXN0ZXJpbmcgdGhlIGNvcnJlY3QgbGlzdGVuZXJzXHJcbi8vIGJlaGluZCB0aGUgc2NlbmVzIHRvIGludm9rZSB0aGUgbGlzdGVuZXIgYXQgdGhlIGZhc3Rlc3QgcG9zc2libGUgdGltZVxyXG4vLyBmb3IgdGhhdCBkZXZpY2UsIHdoaWxlIHN0aWxsIHJldGFpbmluZyB0aGUgb3JkZXIgb2YgZXZlbnQgZmlyaW5nIGluXHJcbi8vIHRoZSB0cmFkaXRpb25hbCBtb3VzZSBlbnZpcm9ubWVudCwgc2hvdWxkIG11bHRpcGxlIGhhbmRsZXJzIGJlIHJlZ2lzdGVyZWRcclxuLy8gb24gdGhlIHNhbWUgZWxlbWVudCBmb3IgZGlmZmVyZW50IGV2ZW50cy5cclxuLy9cclxuLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiBleHBvc2VzIHRoZSBmb2xsb3dpbmcgdmlydHVhbCBldmVudHMgdG8galF1ZXJ5IGJpbmQgbWV0aG9kczpcclxuLy8gXCJ2bW91c2VvdmVyIHZtb3VzZWRvd24gdm1vdXNlbW92ZSB2bW91c2V1cCB2Y2xpY2sgdm1vdXNlb3V0IHZtb3VzZWNhbmNlbFwiXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBkYXRhUHJvcGVydHlOYW1lID0gXCJ2aXJ0dWFsTW91c2VCaW5kaW5nc1wiLFxyXG5cdHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lID0gXCJ2aXJ0dWFsVG91Y2hJRFwiLFxyXG5cdHZpcnR1YWxFdmVudE5hbWVzID0gXCJ2bW91c2VvdmVyIHZtb3VzZWRvd24gdm1vdXNlbW92ZSB2bW91c2V1cCB2Y2xpY2sgdm1vdXNlb3V0IHZtb3VzZWNhbmNlbFwiLnNwbGl0KCBcIiBcIiApLFxyXG5cdHRvdWNoRXZlbnRQcm9wcyA9IFwiY2xpZW50WCBjbGllbnRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWVwiLnNwbGl0KCBcIiBcIiApLFxyXG5cdG1vdXNlSG9va1Byb3BzID0gJC5ldmVudC5tb3VzZUhvb2tzID8gJC5ldmVudC5tb3VzZUhvb2tzLnByb3BzIDogW10sXHJcblx0bW91c2VFdmVudFByb3BzID0gJC5ldmVudC5wcm9wcy5jb25jYXQoIG1vdXNlSG9va1Byb3BzICksXHJcblx0YWN0aXZlRG9jSGFuZGxlcnMgPSB7fSxcclxuXHRyZXNldFRpbWVySUQgPSAwLFxyXG5cdHN0YXJ0WCA9IDAsXHJcblx0c3RhcnRZID0gMCxcclxuXHRkaWRTY3JvbGwgPSBmYWxzZSxcclxuXHRjbGlja0Jsb2NrTGlzdCA9IFtdLFxyXG5cdGJsb2NrTW91c2VUcmlnZ2VycyA9IGZhbHNlLFxyXG5cdGJsb2NrVG91Y2hUcmlnZ2VycyA9IGZhbHNlLFxyXG5cdGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCA9IFwiYWRkRXZlbnRMaXN0ZW5lclwiIGluIGRvY3VtZW50LFxyXG5cdCRkb2N1bWVudCA9ICQoIGRvY3VtZW50ICksXHJcblx0bmV4dFRvdWNoSUQgPSAxLFxyXG5cdGxhc3RUb3VjaElEID0gMCwgdGhyZXNob2xkLFxyXG5cdGk7XHJcblxyXG4kLnZtb3VzZSA9IHtcclxuXHRtb3ZlRGlzdGFuY2VUaHJlc2hvbGQ6IDEwLFxyXG5cdGNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ6IDEwLFxyXG5cdHJlc2V0VGltZXJEdXJhdGlvbjogMTUwMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkge1xyXG5cclxuXHR3aGlsZSAoIGV2ZW50ICYmIHR5cGVvZiBldmVudC5vcmlnaW5hbEV2ZW50ICE9PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0ZXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cdH1cclxuXHRyZXR1cm4gZXZlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVZpcnR1YWxFdmVudCggZXZlbnQsIGV2ZW50VHlwZSApIHtcclxuXHJcblx0dmFyIHQgPSBldmVudC50eXBlLFxyXG5cdFx0b2UsIHByb3BzLCBuZSwgcHJvcCwgY3QsIHRvdWNoLCBpLCBqLCBsZW47XHJcblxyXG5cdGV2ZW50ID0gJC5FdmVudCggZXZlbnQgKTtcclxuXHRldmVudC50eXBlID0gZXZlbnRUeXBlO1xyXG5cclxuXHRvZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblx0cHJvcHMgPSAkLmV2ZW50LnByb3BzO1xyXG5cclxuXHQvLyBhZGRyZXNzZXMgc2VwYXJhdGlvbiBvZiAkLmV2ZW50LnByb3BzIGluIHRvICQuZXZlbnQubW91c2VIb29rLnByb3BzIGFuZCBJc3N1ZSAzMjgwXHJcblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8zMjgwXHJcblx0aWYgKCB0LnNlYXJjaCggL14obW91c2V8Y2xpY2spLyApID4gLTEgKSB7XHJcblx0XHRwcm9wcyA9IG1vdXNlRXZlbnRQcm9wcztcclxuXHR9XHJcblxyXG5cdC8vIGNvcHkgb3JpZ2luYWwgZXZlbnQgcHJvcGVydGllcyBvdmVyIHRvIHRoZSBuZXcgZXZlbnRcclxuXHQvLyB0aGlzIHdvdWxkIGhhcHBlbiBpZiB3ZSBjb3VsZCBjYWxsICQuZXZlbnQuZml4IGluc3RlYWQgb2YgJC5FdmVudFxyXG5cdC8vIGJ1dCB3ZSBkb24ndCBoYXZlIGEgd2F5IHRvIGZvcmNlIGFuIGV2ZW50IHRvIGJlIGZpeGVkIG11bHRpcGxlIHRpbWVzXHJcblx0aWYgKCBvZSApIHtcclxuXHRcdGZvciAoIGkgPSBwcm9wcy5sZW5ndGgsIHByb3A7IGk7ICkge1xyXG5cdFx0XHRwcm9wID0gcHJvcHNbIC0taSBdO1xyXG5cdFx0XHRldmVudFsgcHJvcCBdID0gb2VbIHByb3AgXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIG1ha2Ugc3VyZSB0aGF0IGlmIHRoZSBtb3VzZSBhbmQgY2xpY2sgdmlydHVhbCBldmVudHMgYXJlIGdlbmVyYXRlZFxyXG5cdC8vIHdpdGhvdXQgYSAud2hpY2ggb25lIGlzIGRlZmluZWRcclxuXHRpZiAoIHQuc2VhcmNoKC9tb3VzZShkb3dufHVwKXxjbGljay8pID4gLTEgJiYgIWV2ZW50LndoaWNoICkge1xyXG5cdFx0ZXZlbnQud2hpY2ggPSAxO1xyXG5cdH1cclxuXHJcblx0aWYgKCB0LnNlYXJjaCgvXnRvdWNoLykgIT09IC0xICkge1xyXG5cdFx0bmUgPSBnZXROYXRpdmVFdmVudCggb2UgKTtcclxuXHRcdHQgPSBuZS50b3VjaGVzO1xyXG5cdFx0Y3QgPSBuZS5jaGFuZ2VkVG91Y2hlcztcclxuXHRcdHRvdWNoID0gKCB0ICYmIHQubGVuZ3RoICkgPyB0WzBdIDogKCAoIGN0ICYmIGN0Lmxlbmd0aCApID8gY3RbIDAgXSA6IHVuZGVmaW5lZCApO1xyXG5cclxuXHRcdGlmICggdG91Y2ggKSB7XHJcblx0XHRcdGZvciAoIGogPSAwLCBsZW4gPSB0b3VjaEV2ZW50UHJvcHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuXHRcdFx0XHRwcm9wID0gdG91Y2hFdmVudFByb3BzWyBqIF07XHJcblx0XHRcdFx0ZXZlbnRbIHByb3AgXSA9IHRvdWNoWyBwcm9wIF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBldmVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZWxlbWVudCApIHtcclxuXHJcblx0dmFyIGZsYWdzID0ge30sXHJcblx0XHRiLCBrO1xyXG5cclxuXHR3aGlsZSAoIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0YiA9ICQuZGF0YSggZWxlbWVudCwgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cclxuXHRcdGZvciAoICBrIGluIGIgKSB7XHJcblx0XHRcdGlmICggYlsgayBdICkge1xyXG5cdFx0XHRcdGZsYWdzWyBrIF0gPSBmbGFncy5oYXNWaXJ0dWFsQmluZGluZyA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0fVxyXG5cdHJldHVybiBmbGFncztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2xvc2VzdEVsZW1lbnRXaXRoVmlydHVhbEJpbmRpbmcoIGVsZW1lbnQsIGV2ZW50VHlwZSApIHtcclxuXHR2YXIgYjtcclxuXHR3aGlsZSAoIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0YiA9ICQuZGF0YSggZWxlbWVudCwgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cclxuXHRcdGlmICggYiAmJiAoICFldmVudFR5cGUgfHwgYlsgZXZlbnRUeXBlIF0gKSApIHtcclxuXHRcdFx0cmV0dXJuIGVsZW1lbnQ7XHJcblx0XHR9XHJcblx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlVG91Y2hCaW5kaW5ncygpIHtcclxuXHRibG9ja1RvdWNoVHJpZ2dlcnMgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZVRvdWNoQmluZGluZ3MoKSB7XHJcblx0YmxvY2tUb3VjaFRyaWdnZXJzID0gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlTW91c2VCaW5kaW5ncygpIHtcclxuXHRsYXN0VG91Y2hJRCA9IDA7XHJcblx0Y2xpY2tCbG9ja0xpc3QubGVuZ3RoID0gMDtcclxuXHRibG9ja01vdXNlVHJpZ2dlcnMgPSBmYWxzZTtcclxuXHJcblx0Ly8gV2hlbiBtb3VzZSBiaW5kaW5ncyBhcmUgZW5hYmxlZCwgb3VyXHJcblx0Ly8gdG91Y2ggYmluZGluZ3MgYXJlIGRpc2FibGVkLlxyXG5cdGRpc2FibGVUb3VjaEJpbmRpbmdzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVNb3VzZUJpbmRpbmdzKCkge1xyXG5cdC8vIFdoZW4gbW91c2UgYmluZGluZ3MgYXJlIGRpc2FibGVkLCBvdXJcclxuXHQvLyB0b3VjaCBiaW5kaW5ncyBhcmUgZW5hYmxlZC5cclxuXHRlbmFibGVUb3VjaEJpbmRpbmdzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXJ0UmVzZXRUaW1lcigpIHtcclxuXHRjbGVhclJlc2V0VGltZXIoKTtcclxuXHRyZXNldFRpbWVySUQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdHJlc2V0VGltZXJJRCA9IDA7XHJcblx0XHRlbmFibGVNb3VzZUJpbmRpbmdzKCk7XHJcblx0fSwgJC52bW91c2UucmVzZXRUaW1lckR1cmF0aW9uICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyUmVzZXRUaW1lcigpIHtcclxuXHRpZiAoIHJlc2V0VGltZXJJRCApIHtcclxuXHRcdGNsZWFyVGltZW91dCggcmVzZXRUaW1lcklEICk7XHJcblx0XHRyZXNldFRpbWVySUQgPSAwO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gdHJpZ2dlclZpcnR1YWxFdmVudCggZXZlbnRUeXBlLCBldmVudCwgZmxhZ3MgKSB7XHJcblx0dmFyIHZlO1xyXG5cclxuXHRpZiAoICggZmxhZ3MgJiYgZmxhZ3NbIGV2ZW50VHlwZSBdICkgfHxcclxuXHRcdFx0XHQoICFmbGFncyAmJiBnZXRDbG9zZXN0RWxlbWVudFdpdGhWaXJ0dWFsQmluZGluZyggZXZlbnQudGFyZ2V0LCBldmVudFR5cGUgKSApICkge1xyXG5cclxuXHRcdHZlID0gY3JlYXRlVmlydHVhbEV2ZW50KCBldmVudCwgZXZlbnRUeXBlICk7XHJcblxyXG5cdFx0JCggZXZlbnQudGFyZ2V0KS50cmlnZ2VyKCB2ZSApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHZlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtb3VzZUV2ZW50Q2FsbGJhY2soIGV2ZW50ICkge1xyXG5cdHZhciB0b3VjaElEID0gJC5kYXRhKCBldmVudC50YXJnZXQsIHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lICksXHJcblx0XHR2ZTtcclxuXHJcblx0aWYgKCAhYmxvY2tNb3VzZVRyaWdnZXJzICYmICggIWxhc3RUb3VjaElEIHx8IGxhc3RUb3VjaElEICE9PSB0b3VjaElEICkgKSB7XHJcblx0XHR2ZSA9IHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidlwiICsgZXZlbnQudHlwZSwgZXZlbnQgKTtcclxuXHRcdGlmICggdmUgKSB7XHJcblx0XHRcdGlmICggdmUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHZlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB2ZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0KCBldmVudCApIHtcclxuXHJcblx0dmFyIHRvdWNoZXMgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS50b3VjaGVzLFxyXG5cdFx0dGFyZ2V0LCBmbGFncywgdDtcclxuXHJcblx0aWYgKCB0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID09PSAxICkge1xyXG5cclxuXHRcdHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuXHRcdGZsYWdzID0gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggdGFyZ2V0ICk7XHJcblxyXG5cdFx0aWYgKCBmbGFncy5oYXNWaXJ0dWFsQmluZGluZyApIHtcclxuXHJcblx0XHRcdGxhc3RUb3VjaElEID0gbmV4dFRvdWNoSUQrKztcclxuXHRcdFx0JC5kYXRhKCB0YXJnZXQsIHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lLCBsYXN0VG91Y2hJRCApO1xyXG5cclxuXHRcdFx0Y2xlYXJSZXNldFRpbWVyKCk7XHJcblxyXG5cdFx0XHRkaXNhYmxlTW91c2VCaW5kaW5ncygpO1xyXG5cdFx0XHRkaWRTY3JvbGwgPSBmYWxzZTtcclxuXHJcblx0XHRcdHQgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS50b3VjaGVzWyAwIF07XHJcblx0XHRcdHN0YXJ0WCA9IHQucGFnZVg7XHJcblx0XHRcdHN0YXJ0WSA9IHQucGFnZVk7XHJcblxyXG5cdFx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZW92ZXJcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0XHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlZG93blwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVNjcm9sbCggZXZlbnQgKSB7XHJcblx0aWYgKCBibG9ja1RvdWNoVHJpZ2dlcnMgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRpZiAoICFkaWRTY3JvbGwgKSB7XHJcblx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZWNhbmNlbFwiLCBldmVudCwgZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZXZlbnQudGFyZ2V0ICkgKTtcclxuXHR9XHJcblxyXG5cdGRpZFNjcm9sbCA9IHRydWU7XHJcblx0c3RhcnRSZXNldFRpbWVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZSggZXZlbnQgKSB7XHJcblx0aWYgKCBibG9ja1RvdWNoVHJpZ2dlcnMgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHR2YXIgdCA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLnRvdWNoZXNbIDAgXSxcclxuXHRcdGRpZENhbmNlbCA9IGRpZFNjcm9sbCxcclxuXHRcdG1vdmVUaHJlc2hvbGQgPSAkLnZtb3VzZS5tb3ZlRGlzdGFuY2VUaHJlc2hvbGQsXHJcblx0XHRmbGFncyA9IGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGV2ZW50LnRhcmdldCApO1xyXG5cclxuXHRcdGRpZFNjcm9sbCA9IGRpZFNjcm9sbCB8fFxyXG5cdFx0XHQoIE1hdGguYWJzKCB0LnBhZ2VYIC0gc3RhcnRYICkgPiBtb3ZlVGhyZXNob2xkIHx8XHJcblx0XHRcdFx0TWF0aC5hYnMoIHQucGFnZVkgLSBzdGFydFkgKSA+IG1vdmVUaHJlc2hvbGQgKTtcclxuXHJcblx0aWYgKCBkaWRTY3JvbGwgJiYgIWRpZENhbmNlbCApIHtcclxuXHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlY2FuY2VsXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdH1cclxuXHJcblx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2Vtb3ZlXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdHN0YXJ0UmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUb3VjaEVuZCggZXZlbnQgKSB7XHJcblx0aWYgKCBibG9ja1RvdWNoVHJpZ2dlcnMgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRkaXNhYmxlVG91Y2hCaW5kaW5ncygpO1xyXG5cclxuXHR2YXIgZmxhZ3MgPSBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBldmVudC50YXJnZXQgKSxcclxuXHRcdHZlLCB0O1xyXG5cdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNldXBcIiwgZXZlbnQsIGZsYWdzICk7XHJcblxyXG5cdGlmICggIWRpZFNjcm9sbCApIHtcclxuXHRcdHZlID0gdHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2Y2xpY2tcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0XHRpZiAoIHZlICYmIHZlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHQvLyBUaGUgdGFyZ2V0IG9mIHRoZSBtb3VzZSBldmVudHMgdGhhdCBmb2xsb3cgdGhlIHRvdWNoZW5kXHJcblx0XHRcdC8vIGV2ZW50IGRvbid0IG5lY2Vzc2FyaWx5IG1hdGNoIHRoZSB0YXJnZXQgdXNlZCBkdXJpbmcgdGhlXHJcblx0XHRcdC8vIHRvdWNoLiBUaGlzIG1lYW5zIHdlIG5lZWQgdG8gcmVseSBvbiBjb29yZGluYXRlcyBmb3IgYmxvY2tpbmdcclxuXHRcdFx0Ly8gYW55IGNsaWNrIHRoYXQgaXMgZ2VuZXJhdGVkLlxyXG5cdFx0XHR0ID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkuY2hhbmdlZFRvdWNoZXNbIDAgXTtcclxuXHRcdFx0Y2xpY2tCbG9ja0xpc3QucHVzaCh7XHJcblx0XHRcdFx0dG91Y2hJRDogbGFzdFRvdWNoSUQsXHJcblx0XHRcdFx0eDogdC5jbGllbnRYLFxyXG5cdFx0XHRcdHk6IHQuY2xpZW50WVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFByZXZlbnQgYW55IG1vdXNlIGV2ZW50cyB0aGF0IGZvbGxvdyBmcm9tIHRyaWdnZXJpbmdcclxuXHRcdFx0Ly8gdmlydHVhbCBldmVudCBub3RpZmljYXRpb25zLlxyXG5cdFx0XHRibG9ja01vdXNlVHJpZ2dlcnMgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZW91dFwiLCBldmVudCwgZmxhZ3MpO1xyXG5cdGRpZFNjcm9sbCA9IGZhbHNlO1xyXG5cclxuXHRzdGFydFJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFzVmlydHVhbEJpbmRpbmdzKCBlbGUgKSB7XHJcblx0dmFyIGJpbmRpbmdzID0gJC5kYXRhKCBlbGUsIGRhdGFQcm9wZXJ0eU5hbWUgKSxcclxuXHRcdGs7XHJcblxyXG5cdGlmICggYmluZGluZ3MgKSB7XHJcblx0XHRmb3IgKCBrIGluIGJpbmRpbmdzICkge1xyXG5cdFx0XHRpZiAoIGJpbmRpbmdzWyBrIF0gKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkdW1teU1vdXNlSGFuZGxlcigpIHt9XHJcblxyXG5mdW5jdGlvbiBnZXRTcGVjaWFsRXZlbnRPYmplY3QoIGV2ZW50VHlwZSApIHtcclxuXHR2YXIgcmVhbFR5cGUgPSBldmVudFR5cGUuc3Vic3RyKCAxICk7XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRzZXR1cDogZnVuY3Rpb24oLyogZGF0YSwgbmFtZXNwYWNlICovKSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBmb3IgdGhpcyBlbGVtZW50LFxyXG5cdFx0XHQvLyBhZGQgYSBiaW5kaW5ncyBvYmplY3QgdG8gaXRzIGRhdGEuXHJcblxyXG5cdFx0XHRpZiAoICFoYXNWaXJ0dWFsQmluZGluZ3MoIHRoaXMgKSApIHtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXMsIGRhdGFQcm9wZXJ0eU5hbWUsIHt9ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHNldHVwIGlzIGNhbGxlZCwgd2Uga25vdyBpdCBpcyB0aGUgZmlyc3QgYmluZGluZyBmb3IgdGhpc1xyXG5cdFx0XHQvLyBldmVudFR5cGUsIHNvIGluaXRpYWxpemUgdGhlIGNvdW50IGZvciB0aGUgZXZlbnRUeXBlIHRvIHplcm8uXHJcblx0XHRcdHZhciBiaW5kaW5ncyA9ICQuZGF0YSggdGhpcywgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cdFx0XHRiaW5kaW5nc1sgZXZlbnRUeXBlIF0gPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdmlydHVhbCBtb3VzZSBldmVudCBmb3IgdGhpcyB0eXBlLFxyXG5cdFx0XHQvLyByZWdpc3RlciBhIGdsb2JhbCBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudC5cclxuXHJcblx0XHRcdGFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSA9ICggYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdIHx8IDAgKSArIDE7XHJcblxyXG5cdFx0XHRpZiAoIGFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSA9PT0gMSApIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYmluZCggcmVhbFR5cGUsIG1vdXNlRXZlbnRDYWxsYmFjayApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTb21lIGJyb3dzZXJzLCBsaWtlIE9wZXJhIE1pbmksIHdvbid0IGRpc3BhdGNoIG1vdXNlL2NsaWNrIGV2ZW50c1xyXG5cdFx0XHQvLyBmb3IgZWxlbWVudHMgdW5sZXNzIHRoZXkgYWN0dWFsbHkgaGF2ZSBoYW5kbGVycyByZWdpc3RlcmVkIG9uIHRoZW0uXHJcblx0XHRcdC8vIFRvIGdldCBhcm91bmQgdGhpcywgd2UgcmVnaXN0ZXIgZHVtbXkgaGFuZGxlcnMgb24gdGhlIGVsZW1lbnRzLlxyXG5cclxuXHRcdFx0JCggdGhpcyApLmJpbmQoIHJlYWxUeXBlLCBkdW1teU1vdXNlSGFuZGxlciApO1xyXG5cclxuXHRcdFx0Ly8gRm9yIG5vdywgaWYgZXZlbnQgY2FwdHVyZSBpcyBub3Qgc3VwcG9ydGVkLCB3ZSByZWx5IG9uIG1vdXNlIGhhbmRsZXJzLlxyXG5cdFx0XHRpZiAoIGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgZm9yIHRoZSBkb2N1bWVudCxcclxuXHRcdFx0XHQvLyByZWdpc3RlciBvdXIgdG91Y2hzdGFydCBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudC5cclxuXHJcblx0XHRcdFx0YWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gPSAoIGFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdIHx8IDApICsgMTtcclxuXHJcblx0XHRcdFx0aWYgKCBhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSA9PT0gMSApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC5iaW5kKCBcInRvdWNoc3RhcnRcIiwgaGFuZGxlVG91Y2hTdGFydCApXHJcblx0XHRcdFx0XHRcdC5iaW5kKCBcInRvdWNoZW5kXCIsIGhhbmRsZVRvdWNoRW5kIClcclxuXHJcblx0XHRcdFx0XHRcdC8vIE9uIHRvdWNoIHBsYXRmb3JtcywgdG91Y2hpbmcgdGhlIHNjcmVlbiBhbmQgdGhlbiBkcmFnZ2luZyB5b3VyIGZpbmdlclxyXG5cdFx0XHRcdFx0XHQvLyBjYXVzZXMgdGhlIHdpbmRvdyBjb250ZW50IHRvIHNjcm9sbCBhZnRlciBzb21lIGRpc3RhbmNlIHRocmVzaG9sZCBpc1xyXG5cdFx0XHRcdFx0XHQvLyBleGNlZWRlZC4gT24gdGhlc2UgcGxhdGZvcm1zLCBhIHNjcm9sbCBwcmV2ZW50cyBhIGNsaWNrIGV2ZW50IGZyb20gYmVpbmdcclxuXHRcdFx0XHRcdFx0Ly8gZGlzcGF0Y2hlZCwgYW5kIG9uIHNvbWUgcGxhdGZvcm1zLCBldmVuIHRoZSB0b3VjaGVuZCBpcyBzdXBwcmVzc2VkLiBUb1xyXG5cdFx0XHRcdFx0XHQvLyBtaW1pYyB0aGUgc3VwcHJlc3Npb24gb2YgdGhlIGNsaWNrIGV2ZW50LCB3ZSBuZWVkIHRvIHdhdGNoIGZvciBhIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHQvLyBldmVudC4gVW5mb3J0dW5hdGVseSwgc29tZSBwbGF0Zm9ybXMgbGlrZSBpT1MgZG9uJ3QgZGlzcGF0Y2ggc2Nyb2xsXHJcblx0XHRcdFx0XHRcdC8vIGV2ZW50cyB1bnRpbCAqQUZURVIqIHRoZSB1c2VyIGxpZnRzIHRoZWlyIGZpbmdlciAodG91Y2hlbmQpLiBUaGlzIG1lYW5zXHJcblx0XHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gd2F0Y2ggYm90aCBzY3JvbGwgYW5kIHRvdWNobW92ZSBldmVudHMgdG8gZmlndXJlIG91dCB3aGV0aGVyXHJcblx0XHRcdFx0XHRcdC8vIG9yIG5vdCBhIHNjcm9sbCBoYXBwZW5lbnMgYmVmb3JlIHRoZSB0b3VjaGVuZCBldmVudCBpcyBmaXJlZC5cclxuXHJcblx0XHRcdFx0XHRcdC5iaW5kKCBcInRvdWNobW92ZVwiLCBoYW5kbGVUb3VjaE1vdmUgKVxyXG5cdFx0XHRcdFx0XHQuYmluZCggXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigvKiBkYXRhLCBuYW1lc3BhY2UgKi8pIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgbGFzdCB2aXJ0dWFsIGJpbmRpbmcgZm9yIHRoaXMgZXZlbnRUeXBlLFxyXG5cdFx0XHQvLyByZW1vdmUgaXRzIGdsb2JhbCBoYW5kbGVyIGZyb20gdGhlIGRvY3VtZW50LlxyXG5cclxuXHRcdFx0LS1hY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF07XHJcblxyXG5cdFx0XHRpZiAoICFhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LnVuYmluZCggcmVhbFR5cGUsIG1vdXNlRXZlbnRDYWxsYmFjayApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBpbiBleGlzdGVuY2UsXHJcblx0XHRcdFx0Ly8gcmVtb3ZlIG91ciBkb2N1bWVudCB0b3VjaHN0YXJ0IGxpc3RlbmVyLlxyXG5cclxuXHRcdFx0XHQtLWFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdO1xyXG5cclxuXHRcdFx0XHRpZiAoICFhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC51bmJpbmQoIFwidG91Y2hzdGFydFwiLCBoYW5kbGVUb3VjaFN0YXJ0IClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJ0b3VjaG1vdmVcIiwgaGFuZGxlVG91Y2hNb3ZlIClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJ0b3VjaGVuZFwiLCBoYW5kbGVUb3VjaEVuZCApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdGJpbmRpbmdzID0gJC5kYXRhKCB0aGlzLCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblxyXG5cdFx0XHQvLyB0ZWFyZG93biBtYXkgYmUgY2FsbGVkIHdoZW4gYW4gZWxlbWVudCB3YXNcclxuXHRcdFx0Ly8gcmVtb3ZlZCBmcm9tIHRoZSBET00uIElmIHRoaXMgaXMgdGhlIGNhc2UsXHJcblx0XHRcdC8vIGpRdWVyeSBjb3JlIG1heSBoYXZlIGFscmVhZHkgc3RyaXBwZWQgdGhlIGVsZW1lbnRcclxuXHRcdFx0Ly8gb2YgYW55IGRhdGEgYmluZGluZ3Mgc28gd2UgbmVlZCB0byBjaGVjayBpdCBiZWZvcmVcclxuXHRcdFx0Ly8gdXNpbmcgaXQuXHJcblx0XHRcdGlmICggYmluZGluZ3MgKSB7XHJcblx0XHRcdFx0YmluZGluZ3NbIGV2ZW50VHlwZSBdID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFVucmVnaXN0ZXIgdGhlIGR1bW15IGV2ZW50IGhhbmRsZXIuXHJcblxyXG5cdFx0XHQkdGhpcy51bmJpbmQoIHJlYWxUeXBlLCBkdW1teU1vdXNlSGFuZGxlciApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgbGFzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgb24gdGhlXHJcblx0XHRcdC8vIGVsZW1lbnQsIHJlbW92ZSB0aGUgYmluZGluZyBkYXRhIGZyb20gdGhlIGVsZW1lbnQuXHJcblxyXG5cdFx0XHRpZiAoICFoYXNWaXJ0dWFsQmluZGluZ3MoIHRoaXMgKSApIHtcclxuXHRcdFx0XHQkdGhpcy5yZW1vdmVEYXRhKCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG59XHJcblxyXG4vLyBFeHBvc2Ugb3VyIGN1c3RvbSBldmVudHMgdG8gdGhlIGpRdWVyeSBiaW5kL3VuYmluZCBtZWNoYW5pc20uXHJcblxyXG5mb3IgKCBpID0gMDsgaSA8IHZpcnR1YWxFdmVudE5hbWVzLmxlbmd0aDsgaSsrICkge1xyXG5cdCQuZXZlbnQuc3BlY2lhbFsgdmlydHVhbEV2ZW50TmFtZXNbIGkgXSBdID0gZ2V0U3BlY2lhbEV2ZW50T2JqZWN0KCB2aXJ0dWFsRXZlbnROYW1lc1sgaSBdICk7XHJcbn1cclxuXHJcbi8vIEFkZCBhIGNhcHR1cmUgY2xpY2sgaGFuZGxlciB0byBibG9jayBjbGlja3MuXHJcbi8vIE5vdGUgdGhhdCB3ZSByZXF1aXJlIGV2ZW50IGNhcHR1cmUgc3VwcG9ydCBmb3IgdGhpcyBzbyBpZiB0aGUgZGV2aWNlXHJcbi8vIGRvZXNuJ3Qgc3VwcG9ydCBpdCwgd2UgcHVudCBmb3Igbm93IGFuZCByZWx5IHNvbGVseSBvbiBtb3VzZSBldmVudHMuXHJcbmlmICggZXZlbnRDYXB0dXJlU3VwcG9ydGVkICkge1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHR2YXIgY250ID0gY2xpY2tCbG9ja0xpc3QubGVuZ3RoLFxyXG5cdFx0XHR0YXJnZXQgPSBlLnRhcmdldCxcclxuXHRcdFx0eCwgeSwgZWxlLCBpLCBvLCB0b3VjaElEO1xyXG5cclxuXHRcdGlmICggY250ICkge1xyXG5cdFx0XHR4ID0gZS5jbGllbnRYO1xyXG5cdFx0XHR5ID0gZS5jbGllbnRZO1xyXG5cdFx0XHR0aHJlc2hvbGQgPSAkLnZtb3VzZS5jbGlja0Rpc3RhbmNlVGhyZXNob2xkO1xyXG5cclxuXHRcdFx0Ly8gVGhlIGlkZWEgaGVyZSBpcyB0byBydW4gdGhyb3VnaCB0aGUgY2xpY2tCbG9ja0xpc3QgdG8gc2VlIGlmXHJcblx0XHRcdC8vIHRoZSBjdXJyZW50IGNsaWNrIGV2ZW50IGlzIGluIHRoZSBwcm94aW1pdHkgb2Ygb25lIG9mIG91clxyXG5cdFx0XHQvLyB2Y2xpY2sgZXZlbnRzIHRoYXQgaGFkIHByZXZlbnREZWZhdWx0KCkgY2FsbGVkIG9uIGl0LiBJZiB3ZSBmaW5kXHJcblx0XHRcdC8vIG9uZSwgdGhlbiB3ZSBibG9jayB0aGUgY2xpY2suXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIFdoeSBkbyB3ZSBoYXZlIHRvIHJlbHkgb24gcHJveGltaXR5P1xyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBCZWNhdXNlIHRoZSB0YXJnZXQgb2YgdGhlIHRvdWNoIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSB2Y2xpY2tcclxuXHRcdFx0Ly8gY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSB0YXJnZXQgb2YgdGhlIGNsaWNrIGV2ZW50IHN5bnRoZXNpemVkXHJcblx0XHRcdC8vIGJ5IHRoZSBicm93c2VyLiBUaGUgdGFyZ2V0IG9mIGEgbW91c2UvY2xpY2sgZXZlbnQgdGhhdCBpcyBzeW50aGVzaXplZFxyXG5cdFx0XHQvLyBmcm9tIGEgdG91Y2ggZXZlbnQgc2VlbXMgdG8gYmUgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuIEZvciBleGFtcGxlLFxyXG5cdFx0XHQvLyBzb21lIGJyb3dzZXJzIHdpbGwgZmlyZSBtb3VzZS9jbGljayBldmVudHMgZm9yIGEgbGluayB0aGF0IGlzIG5lYXJcclxuXHRcdFx0Ly8gYSB0b3VjaCBldmVudCwgZXZlbiB0aG91Z2ggdGhlIHRhcmdldCBvZiB0aGUgdG91Y2hzdGFydC90b3VjaGVuZCBldmVudFxyXG5cdFx0XHQvLyBzYXlzIHRoZSB1c2VyIHRvdWNoZWQgb3V0c2lkZSB0aGUgbGluay4gQWxzbywgaXQgc2VlbXMgdGhhdCB3aXRoIG1vc3RcclxuXHRcdFx0Ly8gYnJvd3NlcnMsIHRoZSB0YXJnZXQgb2YgdGhlIG1vdXNlL2NsaWNrIGV2ZW50IGlzIG5vdCBjYWxjdWxhdGVkIHVudGlsIHRoZVxyXG5cdFx0XHQvLyB0aW1lIGl0IGlzIGRpc3BhdGNoZWQsIHNvIGlmIHlvdSByZXBsYWNlIGFuIGVsZW1lbnQgdGhhdCB5b3UgdG91Y2hlZFxyXG5cdFx0XHQvLyB3aXRoIGFub3RoZXIgZWxlbWVudCwgdGhlIHRhcmdldCBvZiB0aGUgbW91c2UvY2xpY2sgd2lsbCBiZSB0aGUgbmV3XHJcblx0XHRcdC8vIGVsZW1lbnQgdW5kZXJuZWF0aCB0aGF0IHBvaW50LlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBBc2lkZSBmcm9tIHByb3hpbWl0eSwgd2UgYWxzbyBjaGVjayB0byBzZWUgaWYgdGhlIHRhcmdldCBhbmQgYW55XHJcblx0XHRcdC8vIG9mIGl0cyBhbmNlc3RvcnMgd2VyZSB0aGUgb25lcyB0aGF0IGJsb2NrZWQgYSBjbGljay4gVGhpcyBpcyBuZWNlc3NhcnlcclxuXHRcdFx0Ly8gYmVjYXVzZSBvZiB0aGUgc3RyYW5nZSBtb3VzZS9jbGljayB0YXJnZXQgY2FsY3VsYXRpb24gZG9uZSBpbiB0aGVcclxuXHRcdFx0Ly8gQW5kcm9pZCAyLjEgYnJvd3Nlciwgd2hlcmUgaWYgeW91IGNsaWNrIG9uIGFuIGVsZW1lbnQsIGFuZCB0aGVyZSBpcyBhXHJcblx0XHRcdC8vIG1vdXNlL2NsaWNrIGhhbmRsZXIgb24gb25lIG9mIGl0cyBhbmNlc3RvcnMsIHRoZSB0YXJnZXQgd2lsbCBiZSB0aGVcclxuXHRcdFx0Ly8gaW5uZXJtb3N0IGNoaWxkIG9mIHRoZSB0b3VjaGVkIGVsZW1lbnQsIGV2ZW4gaWYgdGhhdCBjaGlsZCBpcyBubyB3aGVyZVxyXG5cdFx0XHQvLyBuZWFyIHRoZSBwb2ludCBvZiB0b3VjaC5cclxuXHJcblx0XHRcdGVsZSA9IHRhcmdldDtcclxuXHJcblx0XHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgY250OyBpKysgKSB7XHJcblx0XHRcdFx0XHRvID0gY2xpY2tCbG9ja0xpc3RbIGkgXTtcclxuXHRcdFx0XHRcdHRvdWNoSUQgPSAwO1xyXG5cclxuXHRcdFx0XHRcdGlmICggKCBlbGUgPT09IHRhcmdldCAmJiBNYXRoLmFicyggby54IC0geCApIDwgdGhyZXNob2xkICYmIE1hdGguYWJzKCBvLnkgLSB5ICkgPCB0aHJlc2hvbGQgKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0JC5kYXRhKCBlbGUsIHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lICkgPT09IG8udG91Y2hJRCApIHtcclxuXHRcdFx0XHRcdFx0Ly8gWFhYOiBXZSBtYXkgd2FudCB0byBjb25zaWRlciByZW1vdmluZyBtYXRjaGVzIGZyb20gdGhlIGJsb2NrIGxpc3RcclxuXHRcdFx0XHRcdFx0Ly8gICAgICBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIHRoZSByZXNldCB0aW1lciB0byBmaXJlLlxyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxlID0gZWxlLnBhcmVudE5vZGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LCB0cnVlKTtcclxufVxyXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgJGRvY3VtZW50ID0gJCggZG9jdW1lbnQgKSxcclxuXHRcdHN1cHBvcnRUb3VjaCA9ICQubW9iaWxlLnN1cHBvcnQudG91Y2gsXHJcblx0XHRzY3JvbGxFdmVudCA9IFwidG91Y2htb3ZlIHNjcm9sbFwiLFxyXG5cdFx0dG91Y2hTdGFydEV2ZW50ID0gc3VwcG9ydFRvdWNoID8gXCJ0b3VjaHN0YXJ0XCIgOiBcIm1vdXNlZG93blwiLFxyXG5cdFx0dG91Y2hTdG9wRXZlbnQgPSBzdXBwb3J0VG91Y2ggPyBcInRvdWNoZW5kXCIgOiBcIm1vdXNldXBcIixcclxuXHRcdHRvdWNoTW92ZUV2ZW50ID0gc3VwcG9ydFRvdWNoID8gXCJ0b3VjaG1vdmVcIiA6IFwibW91c2Vtb3ZlXCI7XHJcblxyXG5cdC8vIHNldHVwIG5ldyBldmVudCBzaG9ydGN1dHNcclxuXHQkLmVhY2goICggXCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBcIiArXHJcblx0XHRcInRhcCB0YXBob2xkIFwiICtcclxuXHRcdFwic3dpcGUgc3dpcGVsZWZ0IHN3aXBlcmlnaHQgXCIgK1xyXG5cdFx0XCJzY3JvbGxzdGFydCBzY3JvbGxzdG9wXCIgKS5zcGxpdCggXCIgXCIgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XHJcblxyXG5cdFx0JC5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGZuICkge1xyXG5cdFx0XHRyZXR1cm4gZm4gPyB0aGlzLmJpbmQoIG5hbWUsIGZuICkgOiB0aGlzLnRyaWdnZXIoIG5hbWUgKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8galF1ZXJ5IDwgMS44XHJcblx0XHRpZiAoICQuYXR0ckZuICkge1xyXG5cdFx0XHQkLmF0dHJGblsgbmFtZSBdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0ZnVuY3Rpb24gdHJpZ2dlckN1c3RvbUV2ZW50KCBvYmosIGV2ZW50VHlwZSwgZXZlbnQsIGJ1YmJsZSApIHtcclxuXHRcdHZhciBvcmlnaW5hbFR5cGUgPSBldmVudC50eXBlO1xyXG5cdFx0ZXZlbnQudHlwZSA9IGV2ZW50VHlwZTtcclxuXHRcdGlmICggYnViYmxlICkge1xyXG5cdFx0XHQkLmV2ZW50LnRyaWdnZXIoIGV2ZW50LCB1bmRlZmluZWQsIG9iaiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JC5ldmVudC5kaXNwYXRjaC5jYWxsKCBvYmosIGV2ZW50ICk7XHJcblx0XHR9XHJcblx0XHRldmVudC50eXBlID0gb3JpZ2luYWxUeXBlO1xyXG5cdH1cclxuXHJcblx0Ly8gYWxzbyBoYW5kbGVzIHNjcm9sbHN0b3BcclxuXHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQgPSB7XHJcblxyXG5cdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHZhciB0aGlzT2JqZWN0ID0gdGhpcyxcclxuXHRcdFx0XHQkdGhpcyA9ICQoIHRoaXNPYmplY3QgKSxcclxuXHRcdFx0XHRzY3JvbGxpbmcsXHJcblx0XHRcdFx0dGltZXI7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB0cmlnZ2VyKCBldmVudCwgc3RhdGUgKSB7XHJcblx0XHRcdFx0c2Nyb2xsaW5nID0gc3RhdGU7XHJcblx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBzY3JvbGxpbmcgPyBcInNjcm9sbHN0YXJ0XCIgOiBcInNjcm9sbHN0b3BcIiwgZXZlbnQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaVBob25lIHRyaWdnZXJzIHNjcm9sbCBhZnRlciBhIHNtYWxsIGRlbGF5OyB1c2UgdG91Y2htb3ZlIGluc3RlYWRcclxuXHRcdFx0JHRoaXMuYmluZCggc2Nyb2xsRXZlbnQsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHJcblx0XHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICFzY3JvbGxpbmcgKSB7XHJcblx0XHRcdFx0XHR0cmlnZ2VyKCBldmVudCwgdHJ1ZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lciApO1xyXG5cdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0cmlnZ2VyKCBldmVudCwgZmFsc2UgKTtcclxuXHRcdFx0XHR9LCA1MCApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIHNjcm9sbEV2ZW50ICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gYWxzbyBoYW5kbGVzIHRhcGhvbGRcclxuXHQkLmV2ZW50LnNwZWNpYWwudGFwID0ge1xyXG5cdFx0dGFwaG9sZFRocmVzaG9sZDogNzUwLFxyXG5cdFx0ZW1pdFRhcE9uVGFwaG9sZDogdHJ1ZSxcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRoaXNPYmplY3QgPSB0aGlzLFxyXG5cdFx0XHRcdCR0aGlzID0gJCggdGhpc09iamVjdCApLFxyXG5cdFx0XHRcdGlzVGFwaG9sZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0JHRoaXMuYmluZCggXCJ2bW91c2Vkb3duXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRpc1RhcGhvbGQgPSBmYWxzZTtcclxuXHRcdFx0XHRpZiAoIGV2ZW50LndoaWNoICYmIGV2ZW50LndoaWNoICE9PSAxICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIG9yaWdUYXJnZXQgPSBldmVudC50YXJnZXQsXHJcblx0XHRcdFx0XHR0aW1lcjtcclxuXHJcblx0XHRcdFx0ZnVuY3Rpb24gY2xlYXJUYXBUaW1lcigpIHtcclxuXHRcdFx0XHRcdGNsZWFyVGltZW91dCggdGltZXIgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGNsZWFyVGFwSGFuZGxlcnMoKSB7XHJcblx0XHRcdFx0XHRjbGVhclRhcFRpbWVyKCk7XHJcblxyXG5cdFx0XHRcdFx0JHRoaXMudW5iaW5kKCBcInZjbGlja1wiLCBjbGlja0hhbmRsZXIgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInZtb3VzZXVwXCIsIGNsZWFyVGFwVGltZXIgKTtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC51bmJpbmQoIFwidm1vdXNlY2FuY2VsXCIsIGNsZWFyVGFwSGFuZGxlcnMgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGNsaWNrSGFuZGxlciggZXZlbnQgKSB7XHJcblx0XHRcdFx0XHRjbGVhclRhcEhhbmRsZXJzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gT05MWSB0cmlnZ2VyIGEgJ3RhcCcgZXZlbnQgaWYgdGhlIHN0YXJ0IHRhcmdldCBpc1xyXG5cdFx0XHRcdFx0Ly8gdGhlIHNhbWUgYXMgdGhlIHN0b3AgdGFyZ2V0LlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNUYXBob2xkICYmIG9yaWdUYXJnZXQgPT09IGV2ZW50LnRhcmdldCApIHtcclxuXHRcdFx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBcInRhcFwiLCBldmVudCApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggaXNUYXBob2xkICkge1xyXG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0JHRoaXMuYmluZCggXCJ2bW91c2V1cFwiLCBjbGVhclRhcFRpbWVyIClcclxuXHRcdFx0XHRcdC5iaW5kKCBcInZjbGlja1wiLCBjbGlja0hhbmRsZXIgKTtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYmluZCggXCJ2bW91c2VjYW5jZWxcIiwgY2xlYXJUYXBIYW5kbGVycyApO1xyXG5cclxuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLnRhcC5lbWl0VGFwT25UYXBob2xkICkge1xyXG5cdFx0XHRcdFx0XHRpc1RhcGhvbGQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBcInRhcGhvbGRcIiwgJC5FdmVudCggXCJ0YXBob2xkXCIsIHsgdGFyZ2V0OiBvcmlnVGFyZ2V0IH0gKSApO1xyXG5cdFx0XHRcdH0sICQuZXZlbnQuc3BlY2lhbC50YXAudGFwaG9sZFRocmVzaG9sZCApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIFwidm1vdXNlZG93blwiICkudW5iaW5kKCBcInZjbGlja1wiICkudW5iaW5kKCBcInZtb3VzZXVwXCIgKTtcclxuXHRcdFx0JGRvY3VtZW50LnVuYmluZCggXCJ2bW91c2VjYW5jZWxcIiApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEFsc28gaGFuZGxlcyBzd2lwZWxlZnQsIHN3aXBlcmlnaHRcclxuXHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUgPSB7XHJcblxyXG5cdFx0Ly8gTW9yZSB0aGFuIHRoaXMgaG9yaXpvbnRhbCBkaXNwbGFjZW1lbnQsIGFuZCB3ZSB3aWxsIHN1cHByZXNzIHNjcm9sbGluZy5cclxuXHRcdHNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQ6IDMwLFxyXG5cclxuXHRcdC8vIE1vcmUgdGltZSB0aGFuIHRoaXMsIGFuZCBpdCBpc24ndCBhIHN3aXBlLlxyXG5cdFx0ZHVyYXRpb25UaHJlc2hvbGQ6IDEwMDAsXHJcblxyXG5cdFx0Ly8gU3dpcGUgaG9yaXpvbnRhbCBkaXNwbGFjZW1lbnQgbXVzdCBiZSBtb3JlIHRoYW4gdGhpcy5cclxuXHRcdGhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZDogMzAsXHJcblxyXG5cdFx0Ly8gU3dpcGUgdmVydGljYWwgZGlzcGxhY2VtZW50IG11c3QgYmUgbGVzcyB0aGFuIHRoaXMuXHJcblx0XHR2ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkOiAzMCxcclxuXHJcblx0XHRnZXRMb2NhdGlvbjogZnVuY3Rpb24gKCBldmVudCApIHtcclxuXHRcdFx0dmFyIHdpblBhZ2VYID0gd2luZG93LnBhZ2VYT2Zmc2V0LFxyXG5cdFx0XHRcdHdpblBhZ2VZID0gd2luZG93LnBhZ2VZT2Zmc2V0LFxyXG5cdFx0XHRcdHggPSBldmVudC5jbGllbnRYLFxyXG5cdFx0XHRcdHkgPSBldmVudC5jbGllbnRZO1xyXG5cclxuXHRcdFx0aWYgKCBldmVudC5wYWdlWSA9PT0gMCAmJiBNYXRoLmZsb29yKCB5ICkgPiBNYXRoLmZsb29yKCBldmVudC5wYWdlWSApIHx8XHJcblx0XHRcdFx0ZXZlbnQucGFnZVggPT09IDAgJiYgTWF0aC5mbG9vciggeCApID4gTWF0aC5mbG9vciggZXZlbnQucGFnZVggKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gaU9TNCBjbGllbnRYL2NsaWVudFkgaGF2ZSB0aGUgdmFsdWUgdGhhdCBzaG91bGQgaGF2ZSBiZWVuXHJcblx0XHRcdFx0Ly8gaW4gcGFnZVgvcGFnZVkuIFdoaWxlIHBhZ2VYL3BhZ2UvIGhhdmUgdGhlIHZhbHVlIDBcclxuXHRcdFx0XHR4ID0geCAtIHdpblBhZ2VYO1xyXG5cdFx0XHRcdHkgPSB5IC0gd2luUGFnZVk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHkgPCAoIGV2ZW50LnBhZ2VZIC0gd2luUGFnZVkpIHx8IHggPCAoIGV2ZW50LnBhZ2VYIC0gd2luUGFnZVggKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gU29tZSBBbmRyb2lkIGJyb3dzZXJzIGhhdmUgdG90YWxseSBib2d1cyB2YWx1ZXMgZm9yIGNsaWVudFgvWVxyXG5cdFx0XHRcdC8vIHdoZW4gc2Nyb2xsaW5nL3pvb21pbmcgYSBwYWdlLiBEZXRlY3RhYmxlIHNpbmNlIGNsaWVudFgvY2xpZW50WVxyXG5cdFx0XHRcdC8vIHNob3VsZCBuZXZlciBiZSBzbWFsbGVyIHRoYW4gcGFnZVgvcGFnZVkgbWludXMgcGFnZSBzY3JvbGxcclxuXHRcdFx0XHR4ID0gZXZlbnQucGFnZVggLSB3aW5QYWdlWDtcclxuXHRcdFx0XHR5ID0gZXZlbnQucGFnZVkgLSB3aW5QYWdlWTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR4OiB4LFxyXG5cdFx0XHRcdHk6IHlcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGRhdGEgPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgP1xyXG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWyAwIF0gOiBldmVudCxcclxuXHRcdFx0XHRsb2NhdGlvbiA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5nZXRMb2NhdGlvbiggZGF0YSApO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHR0aW1lOiAoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCksXHJcblx0XHRcdFx0XHRcdGNvb3JkczogWyBsb2NhdGlvbi54LCBsb2NhdGlvbi55IF0sXHJcblx0XHRcdFx0XHRcdG9yaWdpbjogJCggZXZlbnQudGFyZ2V0IClcclxuXHRcdFx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGRhdGEgPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgP1xyXG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWyAwIF0gOiBldmVudCxcclxuXHRcdFx0XHRsb2NhdGlvbiA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5nZXRMb2NhdGlvbiggZGF0YSApO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHR0aW1lOiAoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCksXHJcblx0XHRcdFx0XHRcdGNvb3JkczogWyBsb2NhdGlvbi54LCBsb2NhdGlvbi55IF1cclxuXHRcdFx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhbmRsZVN3aXBlOiBmdW5jdGlvbiggc3RhcnQsIHN0b3AsIHRoaXNPYmplY3QsIG9yaWdUYXJnZXQgKSB7XHJcblx0XHRcdGlmICggc3RvcC50aW1lIC0gc3RhcnQudGltZSA8ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5kdXJhdGlvblRocmVzaG9sZCAmJlxyXG5cdFx0XHRcdE1hdGguYWJzKCBzdGFydC5jb29yZHNbIDAgXSAtIHN0b3AuY29vcmRzWyAwIF0gKSA+ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQgJiZcclxuXHRcdFx0XHRNYXRoLmFicyggc3RhcnQuY29vcmRzWyAxIF0gLSBzdG9wLmNvb3Jkc1sgMSBdICkgPCAkLmV2ZW50LnNwZWNpYWwuc3dpcGUudmVydGljYWxEaXN0YW5jZVRocmVzaG9sZCApIHtcclxuXHRcdFx0XHR2YXIgZGlyZWN0aW9uID0gc3RhcnQuY29vcmRzWzBdID4gc3RvcC5jb29yZHNbIDAgXSA/IFwic3dpcGVsZWZ0XCIgOiBcInN3aXBlcmlnaHRcIjtcclxuXHJcblx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBcInN3aXBlXCIsICQuRXZlbnQoIFwic3dpcGVcIiwgeyB0YXJnZXQ6IG9yaWdUYXJnZXQsIHN3aXBlc3RhcnQ6IHN0YXJ0LCBzd2lwZXN0b3A6IHN0b3AgfSksIHRydWUgKTtcclxuXHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIGRpcmVjdGlvbiwkLkV2ZW50KCBkaXJlY3Rpb24sIHsgdGFyZ2V0OiBvcmlnVGFyZ2V0LCBzd2lwZXN0YXJ0OiBzdGFydCwgc3dpcGVzdG9wOiBzdG9wIH0gKSwgdHJ1ZSApO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRoaXMgc2VydmVzIGFzIGEgZmxhZyB0byBlbnN1cmUgdGhhdCBhdCBtb3N0IG9uZSBzd2lwZSBldmVudCBldmVudCBpc1xyXG5cdFx0Ly8gaW4gd29yayBhdCBhbnkgZ2l2ZW4gdGltZVxyXG5cdFx0ZXZlbnRJblByb2dyZXNzOiBmYWxzZSxcclxuXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBldmVudHMsXHJcblx0XHRcdFx0dGhpc09iamVjdCA9IHRoaXMsXHJcblx0XHRcdFx0JHRoaXMgPSAkKCB0aGlzT2JqZWN0ICksXHJcblx0XHRcdFx0Y29udGV4dCA9IHt9O1xyXG5cclxuXHRcdFx0Ly8gUmV0cmlldmUgdGhlIGV2ZW50cyBkYXRhIGZvciB0aGlzIGVsZW1lbnQgYW5kIGFkZCB0aGUgc3dpcGUgY29udGV4dFxyXG5cdFx0XHRldmVudHMgPSAkLmRhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiICk7XHJcblx0XHRcdGlmICggIWV2ZW50cyApIHtcclxuXHRcdFx0XHRldmVudHMgPSB7IGxlbmd0aDogMCB9O1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIsIGV2ZW50cyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGV2ZW50cy5sZW5ndGgrKztcclxuXHRcdFx0ZXZlbnRzLnN3aXBlID0gY29udGV4dDtcclxuXHJcblx0XHRcdGNvbnRleHQuc3RhcnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRcdC8vIEJhaWwgaWYgd2UncmUgYWxyZWFkeSB3b3JraW5nIG9uIGEgc3dpcGUgZXZlbnRcclxuXHRcdFx0XHRpZiAoICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHR2YXIgc3RvcCxcclxuXHRcdFx0XHRcdHN0YXJ0ID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLnN0YXJ0KCBldmVudCApLFxyXG5cdFx0XHRcdFx0b3JpZ1RhcmdldCA9IGV2ZW50LnRhcmdldCxcclxuXHRcdFx0XHRcdGVtaXR0ZWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0Y29udGV4dC5tb3ZlID0gZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdFx0aWYgKCAhc3RhcnQgfHwgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzdG9wID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLnN0b3AoIGV2ZW50ICk7XHJcblx0XHRcdFx0XHRpZiAoICFlbWl0dGVkICkge1xyXG5cdFx0XHRcdFx0XHRlbWl0dGVkID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmhhbmRsZVN3aXBlKCBzdGFydCwgc3RvcCwgdGhpc09iamVjdCwgb3JpZ1RhcmdldCApO1xyXG5cdFx0XHRcdFx0XHRpZiAoIGVtaXR0ZWQgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBjb250ZXh0IHRvIG1ha2Ugd2F5IGZvciB0aGUgbmV4dCBzd2lwZSBldmVudFxyXG5cdFx0XHRcdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gcHJldmVudCBzY3JvbGxpbmdcclxuXHRcdFx0XHRcdGlmICggTWF0aC5hYnMoIHN0YXJ0LmNvb3Jkc1sgMCBdIC0gc3RvcC5jb29yZHNbIDAgXSApID4gJC5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQgKSB7XHJcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Y29udGV4dC5zdG9wID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGVtaXR0ZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUmVzZXQgdGhlIGNvbnRleHQgdG8gbWFrZSB3YXkgZm9yIHRoZSBuZXh0IHN3aXBlIGV2ZW50XHJcblx0XHRcdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0JGRvY3VtZW50Lm9mZiggdG91Y2hNb3ZlRXZlbnQsIGNvbnRleHQubW92ZSApO1xyXG5cdFx0XHRcdFx0XHRjb250ZXh0Lm1vdmUgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdCRkb2N1bWVudC5vbiggdG91Y2hNb3ZlRXZlbnQsIGNvbnRleHQubW92ZSApXHJcblx0XHRcdFx0XHQub25lKCB0b3VjaFN0b3BFdmVudCwgY29udGV4dC5zdG9wICk7XHJcblx0XHRcdH07XHJcblx0XHRcdCR0aGlzLm9uKCB0b3VjaFN0YXJ0RXZlbnQsIGNvbnRleHQuc3RhcnQgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgZXZlbnRzLCBjb250ZXh0O1xyXG5cclxuXHRcdFx0ZXZlbnRzID0gJC5kYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiApO1xyXG5cdFx0XHRpZiAoIGV2ZW50cyApIHtcclxuXHRcdFx0XHRjb250ZXh0ID0gZXZlbnRzLnN3aXBlO1xyXG5cdFx0XHRcdGRlbGV0ZSBldmVudHMuc3dpcGU7XHJcblx0XHRcdFx0ZXZlbnRzLmxlbmd0aC0tO1xyXG5cdFx0XHRcdGlmICggZXZlbnRzLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRcdCQucmVtb3ZlRGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggY29udGV4dCApIHtcclxuXHRcdFx0XHRpZiAoIGNvbnRleHQuc3RhcnQgKSB7XHJcblx0XHRcdFx0XHQkKCB0aGlzICkub2ZmKCB0b3VjaFN0YXJ0RXZlbnQsIGNvbnRleHQuc3RhcnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBjb250ZXh0Lm1vdmUgKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQub2ZmKCB0b3VjaE1vdmVFdmVudCwgY29udGV4dC5tb3ZlICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggY29udGV4dC5zdG9wICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9mZiggdG91Y2hTdG9wRXZlbnQsIGNvbnRleHQuc3RvcCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0JC5lYWNoKHtcclxuXHRcdHNjcm9sbHN0b3A6IFwic2Nyb2xsc3RhcnRcIixcclxuXHRcdHRhcGhvbGQ6IFwidGFwXCIsXHJcblx0XHRzd2lwZWxlZnQ6IFwic3dpcGUubGVmdFwiLFxyXG5cdFx0c3dpcGVyaWdodDogXCJzd2lwZS5yaWdodFwiXHJcblx0fSwgZnVuY3Rpb24oIGV2ZW50LCBzb3VyY2VFdmVudCApIHtcclxuXHJcblx0XHQkLmV2ZW50LnNwZWNpYWxbIGV2ZW50IF0gPSB7XHJcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuYmluZCggc291cmNlRXZlbnQsICQubm9vcCApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnVuYmluZCggc291cmNlRXZlbnQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcblxyXG5cdC8vIHRocm90dGxlZCByZXNpemUgZXZlbnRcclxuXHQoZnVuY3Rpb24oICQgKSB7XHJcblx0XHQkLmV2ZW50LnNwZWNpYWwudGhyb3R0bGVkcmVzaXplID0ge1xyXG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmJpbmQoIFwicmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIFwicmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgdGhyb3R0bGUgPSAyNTAsXHJcblx0XHRcdGhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRjdXJyID0gKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpO1xyXG5cdFx0XHRcdGRpZmYgPSBjdXJyIC0gbGFzdENhbGw7XHJcblxyXG5cdFx0XHRcdGlmICggZGlmZiA+PSB0aHJvdHRsZSApIHtcclxuXHJcblx0XHRcdFx0XHRsYXN0Q2FsbCA9IGN1cnI7XHJcblx0XHRcdFx0XHQkKCB0aGlzICkudHJpZ2dlciggXCJ0aHJvdHRsZWRyZXNpemVcIiApO1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdGlmICggaGVsZENhbGwgKSB7XHJcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCggaGVsZENhbGwgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBQcm9taXNlIGEgaGVsZCBjYWxsIHdpbGwgc3RpbGwgZXhlY3V0ZVxyXG5cdFx0XHRcdFx0aGVsZENhbGwgPSBzZXRUaW1lb3V0KCBoYW5kbGVyLCB0aHJvdHRsZSAtIGRpZmYgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGxhc3RDYWxsID0gMCxcclxuXHRcdFx0aGVsZENhbGwsXHJcblx0XHRcdGN1cnIsXHJcblx0XHRcdGRpZmY7XHJcblx0fSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93ICkge1xyXG5cdHZhciB3aW4gPSAkKCB3aW5kb3cgKSxcclxuXHRcdGV2ZW50X25hbWUgPSBcIm9yaWVudGF0aW9uY2hhbmdlXCIsXHJcblx0XHRnZXRfb3JpZW50YXRpb24sXHJcblx0XHRsYXN0X29yaWVudGF0aW9uLFxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUsXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQsXHJcblx0XHRwb3J0cmFpdF9tYXAgPSB7IFwiMFwiOiB0cnVlLCBcIjE4MFwiOiB0cnVlIH0sXHJcblx0XHR3dywgd2gsIGxhbmRzY2FwZV90aHJlc2hvbGQ7XHJcblxyXG5cdC8vIEl0IHNlZW1zIHRoYXQgc29tZSBkZXZpY2UvYnJvd3NlciB2ZW5kb3JzIHVzZSB3aW5kb3cub3JpZW50YXRpb24gdmFsdWVzIDAgYW5kIDE4MCB0b1xyXG5cdC8vIGRlbm90ZSB0aGUgXCJkZWZhdWx0XCIgb3JpZW50YXRpb24uIEZvciBpT1MgZGV2aWNlcywgYW5kIG1vc3Qgb3RoZXIgc21hcnQtcGhvbmVzIHRlc3RlZCxcclxuXHQvLyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbiBpcyBhbHdheXMgXCJwb3J0cmFpdFwiLCBidXQgaW4gc29tZSBBbmRyb2lkIGFuZCBSSU0gYmFzZWQgdGFibGV0cyxcclxuXHQvLyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbiBpcyBcImxhbmRzY2FwZVwiLiBUaGUgZm9sbG93aW5nIGNvZGUgYXR0ZW1wdHMgdG8gdXNlIHRoZSB3aW5kb3dcclxuXHQvLyBkaW1lbnNpb25zIHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGUgY3VycmVudCBvcmllbnRhdGlvbiBpcywgYW5kIHRoZW4gbWFrZXMgYWRqdXN0bWVudHNcclxuXHQvLyB0byB0aGUgdG8gdGhlIHBvcnRyYWl0X21hcCBpZiBuZWNlc3NhcnksIHNvIHRoYXQgd2UgY2FuIHByb3Blcmx5IGRlY29kZSB0aGVcclxuXHQvLyB3aW5kb3cub3JpZW50YXRpb24gdmFsdWUgd2hlbmV2ZXIgZ2V0X29yaWVudGF0aW9uKCkgaXMgY2FsbGVkLlxyXG5cdC8vXHJcblx0Ly8gTm90ZSB0aGF0IHdlIHVzZWQgdG8gdXNlIGEgbWVkaWEgcXVlcnkgdG8gZmlndXJlIG91dCB3aGF0IHRoZSBvcmllbnRhdGlvbiB0aGUgYnJvd3NlclxyXG5cdC8vIHRoaW5rcyBpdCBpcyBpbjpcclxuXHQvL1xyXG5cdC8vICAgICBpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSA9ICQubW9iaWxlLm1lZGlhKFwiYWxsIGFuZCAob3JpZW50YXRpb246IGxhbmRzY2FwZSlcIik7XHJcblx0Ly9cclxuXHQvLyBidXQgdGhlcmUgd2FzIGFuIGlQaG9uZS9pUG9kIFRvdWNoIGJ1ZyBiZWdpbm5pbmcgd2l0aCBpT1MgNC4yLCB1cCB0aHJvdWdoIGlPUyA1LjEsXHJcblx0Ly8gd2hlcmUgdGhlIGJyb3dzZXIgKkFMV0FZUyogYXBwbGllZCB0aGUgbGFuZHNjYXBlIG1lZGlhIHF1ZXJ5LiBUaGlzIGJ1ZyBkb2VzIG5vdFxyXG5cdC8vIGhhcHBlbiBvbiBpUGFkLlxyXG5cclxuXHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiApIHtcclxuXHJcblx0XHQvLyBDaGVjayB0aGUgd2luZG93IHdpZHRoIGFuZCBoZWlnaHQgdG8gZmlndXJlIG91dCB3aGF0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uXHJcblx0XHQvLyBvZiB0aGUgZGV2aWNlIGlzIGF0IHRoaXMgbW9tZW50LiBOb3RlIHRoYXQgd2UndmUgaW5pdGlhbGl6ZWQgdGhlIHBvcnRyYWl0IG1hcFxyXG5cdFx0Ly8gdmFsdWVzIHRvIDAgYW5kIDE4MCwgKkFORCogd2UgcHVycG9zZWx5IGNoZWNrIGZvciBsYW5kc2NhcGUgc28gdGhhdCBpZiB3ZSBndWVzc1xyXG5cdFx0Ly8gd3JvbmcsICwgd2UgZGVmYXVsdCB0byB0aGUgYXNzdW1wdGlvbiB0aGF0IHBvcnRyYWl0IGlzIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uLlxyXG5cdFx0Ly8gV2UgdXNlIGEgdGhyZXNob2xkIGNoZWNrIGJlbG93IGJlY2F1c2Ugb24gc29tZSBwbGF0Zm9ybXMgbGlrZSBpT1MsIHRoZSBpUGhvbmVcclxuXHRcdC8vIGZvcm0tZmFjdG9yIGNhbiByZXBvcnQgYSBsYXJnZXIgd2lkdGggdGhhbiBoZWlnaHQgaWYgdGhlIHVzZXIgdHVybnMgb24gdGhlXHJcblx0XHQvLyBkZXZlbG9wZXIgY29uc29sZS4gVGhlIGFjdHVhbCB0aHJlc2hvbGQgdmFsdWUgaXMgc29tZXdoYXQgYXJiaXRyYXJ5LCB3ZSBqdXN0XHJcblx0XHQvLyBuZWVkIHRvIG1ha2Ugc3VyZSBpdCBpcyBsYXJnZSBlbm91Z2ggdG8gZXhjbHVkZSB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgY2FzZS5cclxuXHJcblx0XHR3dyA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IHdpbi53aWR0aCgpO1xyXG5cdFx0d2ggPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgd2luLmhlaWdodCgpO1xyXG5cdFx0bGFuZHNjYXBlX3RocmVzaG9sZCA9IDUwO1xyXG5cclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlID0gd3cgPiB3aCAmJiAoIHd3IC0gd2ggKSA+IGxhbmRzY2FwZV90aHJlc2hvbGQ7XHJcblxyXG5cdFx0Ly8gTm93IGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB3aW5kb3cub3JpZW50YXRpb24gaXMgMCBvciAxODAuXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQgPSBwb3J0cmFpdF9tYXBbIHdpbmRvdy5vcmllbnRhdGlvbiBdO1xyXG5cclxuXHRcdC8vIElmIHRoZSBpbml0aWFsIG9yaWVudGF0aW9uIGlzIGxhbmRzY2FwZSwgYnV0IHdpbmRvdy5vcmllbnRhdGlvbiByZXBvcnRzIDAgb3IgMTgwLCAqT1IqXHJcblx0XHQvLyBpZiB0aGUgaW5pdGlhbCBvcmllbnRhdGlvbiBpcyBwb3J0cmFpdCwgYnV0IHdpbmRvdy5vcmllbnRhdGlvbiByZXBvcnRzIDkwIG9yIC05MCwgd2VcclxuXHRcdC8vIG5lZWQgdG8gZmxpcCBvdXIgcG9ydHJhaXRfbWFwIHZhbHVlcyBiZWNhdXNlIGxhbmRzY2FwZSBpcyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbiBmb3JcclxuXHRcdC8vIHRoaXMgZGV2aWNlL2Jyb3dzZXIuXHJcblx0XHRpZiAoICggaW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgJiYgaW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0ICkgfHwgKCAhaW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgJiYgIWluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCApICkge1xyXG5cdFx0XHRwb3J0cmFpdF9tYXAgPSB7IFwiLTkwXCI6IHRydWUsIFwiOTBcIjogdHJ1ZSB9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0JC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlID0gJC5leHRlbmQoIHt9LCAkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UsIHtcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGlzIHN1cHBvcnRlZCBuYXRpdmVseSwgcmV0dXJuIGZhbHNlIHNvIHRoYXQgalF1ZXJ5XHJcblx0XHRcdC8vIHdpbGwgYmluZCB0byB0aGUgZXZlbnQgdXNpbmcgRE9NIG1ldGhvZHMuXHJcblx0XHRcdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICYmICEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdG8gYXZvaWQgaW5pdGlhbCBkb3VibGUtdHJpZ2dlcmluZy5cclxuXHRcdFx0bGFzdF9vcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbigpO1xyXG5cclxuXHRcdFx0Ly8gQmVjYXVzZSB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQgZG9lc24ndCBleGlzdCwgc2ltdWxhdGUgdGhlXHJcblx0XHRcdC8vIGV2ZW50IGJ5IHRlc3Rpbmcgd2luZG93IGRpbWVuc2lvbnMgb24gcmVzaXplLlxyXG5cdFx0XHR3aW4uYmluZCggXCJ0aHJvdHRsZWRyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0fSxcclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHJldHVybiBmYWxzZSBzbyB0aGF0XHJcblx0XHRcdC8vIGpRdWVyeSB3aWxsIHVuYmluZCB0aGUgZXZlbnQgdXNpbmcgRE9NIG1ldGhvZHMuXHJcblx0XHRcdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICYmICEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBCZWNhdXNlIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudCBkb2Vzbid0IGV4aXN0LCB1bmJpbmQgdGhlXHJcblx0XHRcdC8vIHJlc2l6ZSBldmVudCBoYW5kbGVyLlxyXG5cdFx0XHR3aW4udW5iaW5kKCBcInRocm90dGxlZHJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHR9LFxyXG5cdFx0YWRkOiBmdW5jdGlvbiggaGFuZGxlT2JqICkge1xyXG5cdFx0XHQvLyBTYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBib3VuZCBldmVudCBoYW5kbGVyLlxyXG5cdFx0XHR2YXIgb2xkX2hhbmRsZXIgPSBoYW5kbGVPYmouaGFuZGxlcjtcclxuXHJcblx0XHRcdGhhbmRsZU9iai5oYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdC8vIE1vZGlmeSBldmVudCBvYmplY3QsIGFkZGluZyB0aGUgLm9yaWVudGF0aW9uIHByb3BlcnR5LlxyXG5cdFx0XHRcdGV2ZW50Lm9yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uKCk7XHJcblxyXG5cdFx0XHRcdC8vIENhbGwgdGhlIG9yaWdpbmFsbHktYm91bmQgZXZlbnQgaGFuZGxlciBhbmQgcmV0dXJuIGl0cyByZXN1bHQuXHJcblx0XHRcdFx0cmV0dXJuIG9sZF9oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gSWYgdGhlIGV2ZW50IGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoaXMgaGFuZGxlciB3aWxsIGJlIGJvdW5kIHRvXHJcblx0Ly8gdGhlIHdpbmRvdyByZXNpemUgZXZlbnQgdG8gc2ltdWxhdGUgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50LlxyXG5cdGZ1bmN0aW9uIGhhbmRsZXIoKSB7XHJcblx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24uXHJcblx0XHR2YXIgb3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24oKTtcclxuXHJcblx0XHRpZiAoIG9yaWVudGF0aW9uICE9PSBsYXN0X29yaWVudGF0aW9uICkge1xyXG5cdFx0XHQvLyBUaGUgb3JpZW50YXRpb24gaGFzIGNoYW5nZWQsIHNvIHRyaWdnZXIgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50LlxyXG5cdFx0XHRsYXN0X29yaWVudGF0aW9uID0gb3JpZW50YXRpb247XHJcblx0XHRcdHdpbi50cmlnZ2VyKCBldmVudF9uYW1lICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBHZXQgdGhlIGN1cnJlbnQgcGFnZSBvcmllbnRhdGlvbi4gVGhpcyBtZXRob2QgaXMgZXhwb3NlZCBwdWJsaWNseSwgc2hvdWxkIGl0XHJcblx0Ly8gYmUgbmVlZGVkLCBhcyBqUXVlcnkuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5vcmllbnRhdGlvbigpXHJcblx0JC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLm9yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaXNQb3J0cmFpdCA9IHRydWUsIGVsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gcHJlZmVyIHdpbmRvdyBvcmllbnRhdGlvbiB0byB0aGUgY2FsY3VsYXRpb24gYmFzZWQgb24gc2NyZWVuc2l6ZSBhc1xyXG5cdFx0Ly8gdGhlIGFjdHVhbCBzY3JlZW4gcmVzaXplIHRha2VzIHBsYWNlIGJlZm9yZSBvciBhZnRlciB0aGUgb3JpZW50YXRpb24gY2hhbmdlIGV2ZW50XHJcblx0XHQvLyBoYXMgYmVlbiBmaXJlZCBkZXBlbmRpbmcgb24gaW1wbGVtZW50YXRpb24gKGVnIGFuZHJvaWQgMi4zIGlzIGJlZm9yZSwgaXBob25lIGFmdGVyKS5cclxuXHRcdC8vIE1vcmUgdGVzdGluZyBpcyByZXF1aXJlZCB0byBkZXRlcm1pbmUgaWYgYSBtb3JlIHJlbGlhYmxlIG1ldGhvZCBvZiBkZXRlcm1pbmluZyB0aGUgbmV3IHNjcmVlbnNpemVcclxuXHRcdC8vIGlzIHBvc3NpYmxlIHdoZW4gb3JpZW50YXRpb25jaGFuZ2UgaXMgZmlyZWQuIChlZywgdXNlIG1lZGlhIHF1ZXJpZXMgKyBlbGVtZW50ICsgb3BhY2l0eSlcclxuXHRcdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICkge1xyXG5cdFx0XHQvLyBpZiB0aGUgd2luZG93IG9yaWVudGF0aW9uIHJlZ2lzdGVycyBhcyAwIG9yIDE4MCBkZWdyZWVzIHJlcG9ydFxyXG5cdFx0XHQvLyBwb3J0cmFpdCwgb3RoZXJ3aXNlIGxhbmRzY2FwZVxyXG5cdFx0XHRpc1BvcnRyYWl0ID0gcG9ydHJhaXRfbWFwWyB3aW5kb3cub3JpZW50YXRpb24gXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlzUG9ydHJhaXQgPSBlbGVtICYmIGVsZW0uY2xpZW50V2lkdGggLyBlbGVtLmNsaWVudEhlaWdodCA8IDEuMTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaXNQb3J0cmFpdCA/IFwicG9ydHJhaXRcIiA6IFwibGFuZHNjYXBlXCI7XHJcblx0fTtcclxuXHJcblx0JC5mblsgZXZlbnRfbmFtZSBdID0gZnVuY3Rpb24oIGZuICkge1xyXG5cdFx0cmV0dXJuIGZuID8gdGhpcy5iaW5kKCBldmVudF9uYW1lLCBmbiApIDogdGhpcy50cmlnZ2VyKCBldmVudF9uYW1lICk7XHJcblx0fTtcclxuXHJcblx0Ly8galF1ZXJ5IDwgMS44XHJcblx0aWYgKCAkLmF0dHJGbiApIHtcclxuXHRcdCQuYXR0ckZuWyBldmVudF9uYW1lIF0gPSB0cnVlO1xyXG5cdH1cclxuXHJcbn0oIGpRdWVyeSwgdGhpcyApKTtcclxuXHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvLyBleGlzdGluZyBiYXNlIHRhZz9cclxuXHR2YXIgYmFzZUVsZW1lbnQgPSAkKCBcImhlYWRcIiApLmNoaWxkcmVuKCBcImJhc2VcIiApLFxyXG5cclxuXHQvLyBiYXNlIGVsZW1lbnQgbWFuYWdlbWVudCwgZGVmaW5lZCBkZXBlbmRpbmcgb24gZHluYW1pYyBiYXNlIHRhZyBzdXBwb3J0XHJcblx0Ly8gVE9ETyBtb3ZlIHRvIGV4dGVybmFsIHdpZGdldFxyXG5cdGJhc2UgPSB7XHJcblxyXG5cdFx0Ly8gZGVmaW5lIGJhc2UgZWxlbWVudCwgZm9yIHVzZSBpbiByb3V0aW5nIGFzc2V0IHVybHMgdGhhdCBhcmUgcmVmZXJlbmNlZFxyXG5cdFx0Ly8gaW4gQWpheC1yZXF1ZXN0ZWQgbWFya3VwXHJcblx0XHRlbGVtZW50OiAoIGJhc2VFbGVtZW50Lmxlbmd0aCA/IGJhc2VFbGVtZW50IDpcclxuXHRcdFx0JCggXCI8YmFzZT5cIiwgeyBocmVmOiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoIH0gKS5wcmVwZW5kVG8oICQoIFwiaGVhZFwiICkgKSApLFxyXG5cclxuXHRcdGxpbmtTZWxlY3RvcjogXCJbc3JjXSwgbGlua1tocmVmXSwgYVtyZWw9J2V4dGVybmFsJ10sIDpqcW1EYXRhKGFqYXg9J2ZhbHNlJyksIGFbdGFyZ2V0XVwiLFxyXG5cclxuXHRcdC8vIHNldCB0aGUgZ2VuZXJhdGVkIEJBU0UgZWxlbWVudCdzIGhyZWYgdG8gYSBuZXcgcGFnZSdzIGJhc2UgcGF0aFxyXG5cdFx0c2V0OiBmdW5jdGlvbiggaHJlZiApIHtcclxuXHJcblx0XHRcdC8vIHdlIHNob3VsZCBkbyBub3RoaW5nIGlmIHRoZSB1c2VyIHdhbnRzIHRvIG1hbmFnZSB0aGVpciB1cmwgYmFzZVxyXG5cdFx0XHQvLyBtYW51YWxseVxyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5keW5hbWljQmFzZUVuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyB3ZSBzaG91bGQgdXNlIHRoZSBiYXNlIHRhZyBpZiB3ZSBjYW4gbWFuaXB1bGF0ZSBpdCBkeW5hbWljYWxseVxyXG5cdFx0XHRpZiAoICQuc3VwcG9ydC5keW5hbWljQmFzZVRhZyApIHtcclxuXHRcdFx0XHRiYXNlLmVsZW1lbnQuYXR0ciggXCJocmVmXCIsXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggaHJlZiwgJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHJld3JpdGU6IGZ1bmN0aW9uKCBocmVmLCBwYWdlICkge1xyXG5cdFx0XHR2YXIgbmV3UGF0aCA9ICQubW9iaWxlLnBhdGguZ2V0KCBocmVmICk7XHJcblxyXG5cdFx0XHRwYWdlLmZpbmQoIGJhc2UubGlua1NlbGVjdG9yICkuZWFjaChmdW5jdGlvbiggaSwgbGluayApIHtcclxuXHRcdFx0XHR2YXIgdGhpc0F0dHIgPSAkKCBsaW5rICkuaXMoIFwiW2hyZWZdXCIgKSA/IFwiaHJlZlwiIDpcclxuXHRcdFx0XHRcdCQoIGxpbmsgKS5pcyggXCJbc3JjXVwiICkgPyBcInNyY1wiIDogXCJhY3Rpb25cIixcclxuXHRcdFx0XHR0aGVMb2NhdGlvbiA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLFxyXG5cdFx0XHRcdHRoaXNVcmwgPSAkKCBsaW5rICkuYXR0ciggdGhpc0F0dHIgKTtcclxuXHJcblx0XHRcdFx0Ly8gWFhYX2pibGFzOiBXZSBuZWVkIHRvIGZpeCB0aGlzIHNvIHRoYXQgaXQgcmVtb3ZlcyB0aGUgZG9jdW1lbnRcclxuXHRcdFx0XHQvLyAgICAgICAgICAgIGJhc2UgVVJMLCBhbmQgdGhlbiBwcmVwZW5kcyB3aXRoIHRoZSBuZXcgcGFnZSBVUkwuXHJcblx0XHRcdFx0Ly8gaWYgZnVsbCBwYXRoIGV4aXN0cyBhbmQgaXMgc2FtZSwgY2hvcCBpdCAtIGhlbHBzIElFIG91dFxyXG5cdFx0XHRcdHRoaXNVcmwgPSB0aGlzVXJsLnJlcGxhY2UoIHRoZUxvY2F0aW9uLnByb3RvY29sICsgdGhlTG9jYXRpb24uZG91YmxlU2xhc2ggK1xyXG5cdFx0XHRcdFx0dGhlTG9jYXRpb24uaG9zdCArIHRoZUxvY2F0aW9uLnBhdGhuYW1lLCBcIlwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggIS9eKFxcdys6fCN8XFwvKS8udGVzdCggdGhpc1VybCApICkge1xyXG5cdFx0XHRcdFx0JCggbGluayApLmF0dHIoIHRoaXNBdHRyLCBuZXdQYXRoICsgdGhpc1VybCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIHNldCB0aGUgZ2VuZXJhdGVkIEJBU0UgZWxlbWVudCdzIGhyZWYgdG8gYSBuZXcgcGFnZSdzIGJhc2UgcGF0aFxyXG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKC8qIGhyZWYgKi8pIHtcclxuXHRcdFx0YmFzZS5lbGVtZW50LmF0dHIoIFwiaHJlZlwiLCAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9TZWFyY2ggKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLm1vYmlsZS5iYXNlID0gYmFzZTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuJC5tb2JpbGUud2lkZ2V0cyA9IHt9O1xyXG5cclxudmFyIG9yaWdpbmFsV2lkZ2V0ID0gJC53aWRnZXQsXHJcblxyXG5cdC8vIFJlY29yZCB0aGUgb3JpZ2luYWwsIG5vbi1tb2JpbGVpbml0LW1vZGlmaWVkIHZlcnNpb24gb2YgJC5tb2JpbGUua2VlcE5hdGl2ZVxyXG5cdC8vIHNvIHdlIGNhbiBsYXRlciBkZXRlcm1pbmUgd2hldGhlciBzb21lb25lIGhhcyBtb2RpZmllZCAkLm1vYmlsZS5rZWVwTmF0aXZlXHJcblx0a2VlcE5hdGl2ZUZhY3RvcnlEZWZhdWx0ID0gJC5tb2JpbGUua2VlcE5hdGl2ZTtcclxuXHJcbiQud2lkZ2V0ID0gKGZ1bmN0aW9uKCBvcmlnICkge1xyXG5cdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb25zdHJ1Y3RvciA9IG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLFxyXG5cdFx0XHRuYW1lID0gY29uc3RydWN0b3IucHJvdG90eXBlLndpZGdldE5hbWU7XHJcblxyXG5cdFx0Y29uc3RydWN0b3IuaW5pdFNlbGVjdG9yID0gKCAoIGNvbnN0cnVjdG9yLnByb3RvdHlwZS5pbml0U2VsZWN0b3IgIT09IHVuZGVmaW5lZCApID9cclxuXHRcdFx0Y29uc3RydWN0b3IucHJvdG90eXBlLmluaXRTZWxlY3RvciA6IFwiOmpxbURhdGEocm9sZT0nXCIgKyBuYW1lICsgXCInKVwiICk7XHJcblxyXG5cdFx0JC5tb2JpbGUud2lkZ2V0c1sgbmFtZSBdID0gY29uc3RydWN0b3I7XHJcblxyXG5cdFx0cmV0dXJuIGNvbnN0cnVjdG9yO1xyXG5cdH07XHJcbn0pKCAkLndpZGdldCApO1xyXG5cclxuLy8gTWFrZSBzdXJlICQud2lkZ2V0IHN0aWxsIGhhcyBicmlkZ2UgYW5kIGV4dGVuZCBtZXRob2RzXHJcbiQuZXh0ZW5kKCAkLndpZGdldCwgb3JpZ2luYWxXaWRnZXQgKTtcclxuXHJcbi8vIEZvciBiYWNrY29tcGF0IHJlbW92ZSBpbiAxLjVcclxuJC5tb2JpbGUuZG9jdW1lbnQub24oIFwiY3JlYXRlXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHQkKCBldmVudC50YXJnZXQgKS5lbmhhbmNlV2l0aGluKCk7XHJcbn0pO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBhZ2VcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBcImFcIixcclxuXHRcdGRvbUNhY2hlOiBmYWxzZSxcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRrZWVwTmF0aXZlRGVmYXVsdDogJC5tb2JpbGUua2VlcE5hdGl2ZSxcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRjb250ZW50VGhlbWU6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHQvLyBERVBSRUNBVEVEIGZvciA+IDEuNFxyXG5cdC8vIFRPRE8gcmVtb3ZlIGF0IDEuNVxyXG5cdF9jcmVhdGVXaWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0JC5XaWRnZXQucHJvdG90eXBlLl9jcmVhdGVXaWRnZXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJpbml0XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIElmIGZhbHNlIGlzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja3MgZG8gbm90IGNyZWF0ZSB0aGUgcGFnZVxyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWNyZWF0ZVwiICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudCwge1xyXG5cdFx0XHRwYWdlYmVmb3JlaGlkZTogXCJyZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kXCIsXHJcblx0XHRcdHBhZ2ViZWZvcmVzaG93OiBcIl9oYW5kbGVQYWdlQmVmb3JlU2hvd1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuZW5oYW5jZVdpdGhpbigpO1xyXG5cdFx0Ly8gRGlhbG9nIHdpZGdldCBpcyBkZXByZWNhdGVkIGluIDEuNCByZW1vdmUgdGhpcyBpbiAxLjVcclxuXHRcdGlmICggJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLmVsZW1lbnRbMF0sIFwicm9sZVwiICkgPT09IFwiZGlhbG9nXCIgJiYgJC5tb2JpbGUuZGlhbG9nICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZGlhbG9nKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBhdHRyUHJlZml4ID0gXCJkYXRhLVwiICsgJC5tb2JpbGUubnMsXHJcblx0XHRcdHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnJvbGUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZVwiLCB0aGlzLm9wdGlvbnMucm9sZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQuYXR0ciggXCJ0YWJpbmRleFwiLCBcIjBcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wYWdlIHVpLXBhZ2UtdGhlbWUtXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKTtcclxuXHJcblx0XHQvLyBNYW5pcHVsYXRpb24gb2YgY29udGVudCBvcyBEZXByZWNhdGVkIGFzIG9mIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJbXCIgKyBhdHRyUHJlZml4ICsgXCJyb2xlPSdjb250ZW50J11cIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0dGhlbWUgPSB0aGlzLmdldEF0dHJpYnV0ZSggYXR0clByZWZpeCArIFwidGhlbWVcIiApIHx8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lID0gdGhlbWUgfHwgc2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSB8fCAoIHNlbGYub3B0aW9ucy5kaWFsb2cgJiYgc2VsZi5vcHRpb25zLnRoZW1lICkgfHwgKCBzZWxmLmVsZW1lbnQuanFtRGF0YShcInJvbGVcIikgPT09IFwiZGlhbG9nXCIgJiYgIHNlbGYub3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWNvbnRlbnRcIiApO1xyXG5cdFx0XHRcdGlmICggc2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSApIHtcclxuXHRcdFx0XHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyAoIHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBBZGQgQVJJQSByb2xlXHJcblx0XHRcdFx0JHRoaXMuYXR0ciggXCJyb2xlXCIsIFwibWFpblwiICkuYWRkQ2xhc3MoIFwidWktY29udGVudFwiICk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRiaW5kUmVtb3ZlOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XHJcblx0XHR2YXIgcGFnZSA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHQvLyB3aGVuIGRvbSBjYWNoaW5nIGlzIG5vdCBlbmFibGVkIG9yIHRoZSBwYWdlIGlzIGVtYmVkZGVkIGJpbmQgdG8gcmVtb3ZlIHRoZSBwYWdlIG9uIGhpZGVcclxuXHRcdGlmICggIXBhZ2UuZGF0YSggXCJtb2JpbGUtcGFnZVwiICkub3B0aW9ucy5kb21DYWNoZSAmJlxyXG5cdFx0XHRwYWdlLmlzKCBcIjpqcW1EYXRhKGV4dGVybmFsLXBhZ2U9J3RydWUnKVwiICkgKSB7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHVzZSBfb24gLSB0aGF0IGlzLCBzb3J0IG91dCB3aHkgaXQgZG9lc24ndCB3b3JrIGluIHRoaXMgY2FzZVxyXG5cdFx0XHRwYWdlLmJpbmQoIFwicGFnZWhpZGUucmVtb3ZlXCIsIGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCBlLCBkYXRhICkge1xyXG5cclxuXHRcdFx0XHQvL2NoZWNrIGlmIHRoaXMgaXMgYSBzYW1lIHBhZ2UgdHJhbnNpdGlvbiBhbmQgaWYgc28gZG9uJ3QgcmVtb3ZlIHRoZSBwYWdlXHJcblx0XHRcdFx0aWYoICFkYXRhLnNhbWVQYWdlICl7XHJcblx0XHRcdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHRcdHByRXZlbnQgPSBuZXcgJC5FdmVudCggXCJwYWdlcmVtb3ZlXCIgKTtcclxuXHJcblx0XHRcdFx0XHQkdGhpcy50cmlnZ2VyKCBwckV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhcHJFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdFx0JHRoaXMucmVtb3ZlV2l0aERlcGVuZGVudHMoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbyApIHtcclxuXHRcdGlmICggby50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktcGFnZS10aGVtZS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApLmFkZENsYXNzKCBcInVpLXBhZ2UtdGhlbWUtXCIgKyBvLnRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvLmNvbnRlbnRUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJbZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCI9J2NvbnRlbnQnXVwiICkucmVtb3ZlQ2xhc3MoIFwidWktYm9keS1cIiArIHRoaXMub3B0aW9ucy5jb250ZW50VGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgby5jb250ZW50VGhlbWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdHRoaXMuc2V0Q29udGFpbmVyQmFja2dyb3VuZCgpO1xyXG5cdH0sXHJcblx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdHJlbW92ZUNvbnRhaW5lckJhY2tncm91bmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiOm1vYmlsZS1wYWdlY29udGFpbmVyXCIgKS5wYWdlY29udGFpbmVyKHsgXCJ0aGVtZVwiOiBcIm5vbmVcIiB9KTtcclxuXHR9LFxyXG5cdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHQvLyBzZXQgdGhlIHBhZ2UgY29udGFpbmVyIGJhY2tncm91bmQgdG8gdGhlIHBhZ2UgdGhlbWVcclxuXHRzZXRDb250YWluZXJCYWNrZ3JvdW5kOiBmdW5jdGlvbiggdGhlbWUgKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQucGFyZW50KCkucGFnZWNvbnRhaW5lciggeyBcInRoZW1lXCI6IHRoZW1lIHx8IHRoaXMub3B0aW9ucy50aGVtZSB9ICk7XHJcblx0fSxcclxuXHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0a2VlcE5hdGl2ZVNlbGVjdG9yOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRrZWVwTmF0aXZlID0gJC50cmltKCBvcHRpb25zLmtlZXBOYXRpdmUgfHwgXCJcIiApLFxyXG5cdFx0XHRnbG9iYWxWYWx1ZSA9ICQudHJpbSggJC5tb2JpbGUua2VlcE5hdGl2ZSApLFxyXG5cdFx0XHRvcHRpb25WYWx1ZSA9ICQudHJpbSggb3B0aW9ucy5rZWVwTmF0aXZlRGVmYXVsdCApLFxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgJC5tb2JpbGUua2VlcE5hdGl2ZSBoYXMgY2hhbmdlZCBmcm9tIHRoZSBmYWN0b3J5IGRlZmF1bHRcclxuXHRcdFx0bmV3RGVmYXVsdCA9ICgga2VlcE5hdGl2ZUZhY3RvcnlEZWZhdWx0ID09PSBnbG9iYWxWYWx1ZSA/XHJcblx0XHRcdFx0XCJcIiA6IGdsb2JhbFZhbHVlICksXHJcblxyXG5cdFx0XHQvLyBJZiAkLm1vYmlsZS5rZWVwTmF0aXZlIGhhcyBub3QgY2hhbmdlZCwgdXNlIG9wdGlvbnMua2VlcE5hdGl2ZURlZmF1bHRcclxuXHRcdFx0b2xkRGVmYXVsdCA9ICggbmV3RGVmYXVsdCA9PT0gXCJcIiA/IG9wdGlvblZhbHVlIDogXCJcIiApO1xyXG5cclxuXHRcdC8vIENvbmNhdGVuYXRlIGtlZXBOYXRpdmUgc2VsZWN0b3JzIGZyb20gYWxsIHNvdXJjZXMgd2hlcmUgdGhlIHZhbHVlIGhhc1xyXG5cdFx0Ly8gY2hhbmdlZCBvciwgaWYgbm90aGluZyBoYXMgY2hhbmdlZCwgcmV0dXJuIHRoZSBkZWZhdWx0XHJcblx0XHRyZXR1cm4gKCAoIGtlZXBOYXRpdmUgPyBbIGtlZXBOYXRpdmUgXSA6IFtdIClcclxuXHRcdFx0LmNvbmNhdCggbmV3RGVmYXVsdCA/IFsgbmV3RGVmYXVsdCBdIDogW10gKVxyXG5cdFx0XHQuY29uY2F0KCBvbGREZWZhdWx0ID8gWyBvbGREZWZhdWx0IF0gOiBbXSApXHJcblx0XHRcdC5qb2luKCBcIiwgXCIgKSApO1xyXG5cdH1cclxufSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUucGFnZWNvbnRhaW5lclwiLCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHRoZW1lOiBcImFcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRpbml0U2VsZWN0b3I6IGZhbHNlLFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWNyZWF0ZVwiICk7XHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7XHJcblx0XHRcdFx0Ly8gZGlzYWJsZSBhbiBzY3JvbGwgc2V0dGluZyB3aGVuIGEgaGFzaGNoYW5nZSBoYXMgYmVlbiBmaXJlZCxcclxuXHRcdFx0XHQvLyB0aGlzIG9ubHkgd29ya3MgYmVjYXVzZSB0aGUgcmVjb3JkaW5nIG9mIHRoZSBzY3JvbGwgcG9zaXRpb25cclxuXHRcdFx0XHQvLyBpcyBkZWxheWVkIGZvciAxMDBtcyBhZnRlciB0aGUgYnJvd3NlciBtaWdodCBoYXZlIGNoYW5nZWQgdGhlXHJcblx0XHRcdFx0Ly8gcG9zaXRpb24gYmVjYXVzZSBvZiB0aGUgaGFzaGNoYW5nZVxyXG5cdFx0XHRcdG5hdmlnYXRlOiBcIl9kaXNhYmxlUmVjb3JkU2Nyb2xsXCIsXHJcblxyXG5cdFx0XHRcdC8vIGJpbmQgdG8gc2Nyb2xsc3RvcCBmb3IgdGhlIGZpcnN0IHBhZ2UsIFwicGFnZWNoYW5nZVwiIHdvbid0IGJlXHJcblx0XHRcdFx0Ly8gZmlyZWQgaW4gdGhhdCBjYXNlXHJcblx0XHRcdFx0c2Nyb2xsc3RvcDogXCJfZGVsYXllZFJlY29yZFNjcm9sbFwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBtb3ZpbmcgdGhlIG5hdmlnYXRpb24gaGFuZGxlciBPVVQgb2Ygd2lkZ2V0IGludG9cclxuXHRcdFx0Ly8gICAgICBzb21lIG90aGVyIG9iamVjdCBhcyBnbHVlIGJldHdlZW4gdGhlIG5hdmlnYXRlIGV2ZW50IGFuZCB0aGVcclxuXHRcdFx0Ly8gICAgICBjb250ZW50IHdpZGdldCBsb2FkIGFuZCBjaGFuZ2UgbWV0aG9kc1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgbmF2aWdhdGU6IFwiX2ZpbHRlck5hdmlnYXRlRXZlbnRzXCIgfSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIG1vdmUgZnJvbSBwYWdlKiBldmVudHMgdG8gY29udGVudCogZXZlbnRzXHJcblx0XHRcdHRoaXMuX29uKHsgcGFnZWNoYW5nZTogXCJfYWZ0ZXJDb250ZW50Q2hhbmdlXCIgfSk7XHJcblxyXG5cdFx0XHQvLyBoYW5kbGUgaW5pdGlhbCBoYXNoY2hhbmdlIGZyb20gY2hyb21lIDooXHJcblx0XHRcdHRoaXMud2luZG93Lm9uZSggXCJuYXZpZ2F0ZVwiLCAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy50aGVtZSAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLW92ZXJsYXktXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLW92ZXJsYXktXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktb3ZlcmxheS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGlzYWJsZVJlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2VuYWJsZVJlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGNvbnNpZGVyIHRoZSBuYW1lIGhlcmUsIHNpbmNlIGl0J3MgcHVycG9zZSBzcGVjaWZpY1xyXG5cdFx0X2FmdGVyQ29udGVudENoYW5nZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIG9uY2UgdGhlIHBhZ2UgaGFzIGNoYW5nZWQsIHJlLWVuYWJsZSB0aGUgc2Nyb2xsIHJlY29yZGluZ1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIHJlbW92ZSBhbnkgYmluZGluZyB0aGF0IHByZXZpb3VzbHkgZXhpc3RlZCBvbiB0aGUgZ2V0IHNjcm9sbFxyXG5cdFx0XHQvLyB3aGljaCBtYXkgb3IgbWF5IG5vdCBiZSBkaWZmZXJlbnQgdGhhbiB0aGUgc2Nyb2xsIGVsZW1lbnRcclxuXHRcdFx0Ly8gZGV0ZXJtaW5lZCBmb3IgdGhpcyBwYWdlIHByZXZpb3VzbHlcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLndpbmRvdywgXCJzY3JvbGxzdG9wXCIgKTtcclxuXHJcblx0XHRcdC8vIGRldGVybWluZSBhbmQgYmluZCB0byB0aGUgY3VycmVudCBzY29sbCBlbGVtZW50IHdoaWNoIG1heSBiZSB0aGVcclxuXHRcdFx0Ly8gd2luZG93IG9yIGluIHRoZSBjYXNlIG9mIHRvdWNoIG92ZXJmbG93IHRoZSBlbGVtZW50IHRvdWNoIG92ZXJmbG93XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBzY3JvbGxzdG9wOiBcIl9kZWxheWVkUmVjb3JkU2Nyb2xsXCIgfSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9yZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyB0aGlzIGJhcnJpZXIgcHJldmVudHMgc2V0dGluZyB0aGUgc2Nyb2xsIHZhbHVlIGJhc2VkIG9uXHJcblx0XHRcdC8vIHRoZSBicm93c2VyIHNjcm9sbGluZyB0aGUgd2luZG93IGJhc2VkIG9uIGEgaGFzaGNoYW5nZVxyXG5cdFx0XHRpZiAoICF0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGFjdGl2ZSA9IHRoaXMuX2dldEFjdGl2ZUhpc3RvcnkoKSxcclxuXHRcdFx0XHRjdXJyZW50U2Nyb2xsLCBtaW5TY3JvbGwsIGRlZmF1bHRTY3JvbGw7XHJcblxyXG5cdFx0XHRpZiAoIGFjdGl2ZSApIHtcclxuXHRcdFx0XHRjdXJyZW50U2Nyb2xsID0gdGhpcy5fZ2V0U2Nyb2xsKCk7XHJcblx0XHRcdFx0bWluU2Nyb2xsID0gdGhpcy5fZ2V0TWluU2Nyb2xsKCk7XHJcblx0XHRcdFx0ZGVmYXVsdFNjcm9sbCA9IHRoaXMuX2dldERlZmF1bHRTY3JvbGwoKTtcclxuXHJcblx0XHRcdFx0Ly8gU2V0IGFjdGl2ZSBwYWdlJ3MgbGFzdFNjcm9sbCBwcm9wLiBJZiB0aGUgbG9jYXRpb24gd2UncmVcclxuXHRcdFx0XHQvLyBzY3JvbGxpbmcgdG8gaXMgbGVzcyB0aGFuIG1pblNjcm9sbEJhY2ssIGxldCBpdCBnby5cclxuXHRcdFx0XHRhY3RpdmUubGFzdFNjcm9sbCA9IGN1cnJlbnRTY3JvbGwgPCBtaW5TY3JvbGwgPyBkZWZhdWx0U2Nyb2xsIDogY3VycmVudFNjcm9sbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVsYXllZFJlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNldFRpbWVvdXQoICQucHJveHkodGhpcywgXCJfcmVjb3JkU2Nyb2xsXCIpLCAxMDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldE1pblNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5taW5TY3JvbGxCYWNrO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0RGVmYXVsdFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2ZpbHRlck5hdmlnYXRlRXZlbnRzOiBmdW5jdGlvbiggZSwgZGF0YSApIHtcclxuXHRcdFx0dmFyIHVybDtcclxuXHJcblx0XHRcdGlmICggZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHVybCA9IGUub3JpZ2luYWxFdmVudC50eXBlLmluZGV4T2YoIFwiaGFzaGNoYW5nZVwiICkgPiAtMSA/IGRhdGEuc3RhdGUuaGFzaCA6IGRhdGEuc3RhdGUudXJsO1xyXG5cclxuXHRcdFx0aWYgKCAhdXJsICkge1xyXG5cdFx0XHRcdHVybCA9IHRoaXMuX2dldEhhc2goKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhdXJsIHx8IHVybCA9PT0gXCIjXCIgfHwgdXJsLmluZGV4T2YoIFwiI1wiICsgJC5tb2JpbGUucGF0aC51aVN0YXRlS2V5ICkgPT09IDAgKSB7XHJcblx0XHRcdFx0dXJsID0gbG9jYXRpb24uaHJlZjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5faGFuZGxlTmF2aWdhdGUoIHVybCwgZGF0YS5zdGF0ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0SGFzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGFjdGl2ZSBwYWdlIHNob3VsZCBiZSBtYW5hZ2VkIGJ5IHRoZSBjb250YWluZXIgKGllLCBpdCBzaG91bGQgYmUgYSBwcm9wZXJ0eSlcclxuXHRcdGdldEFjdGl2ZVBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5hY3RpdmVQYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHRoZSBmaXJzdCBwYWdlIHNob3VsZCBiZSBhIHByb3BlcnR5IHNldCBkdXJpbmcgX2NyZWF0ZSB1c2luZyB0aGUgbG9naWNcclxuXHRcdC8vICAgICAgdGhhdCBjdXJyZW50bHkgcmVzaWRlcyBpbiBpbml0XHJcblx0XHRfZ2V0SW5pdGlhbENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZmlyc3RQYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGVhY2ggY29udGVudCBjb250YWluZXIgc2hvdWxkIGhhdmUgYSBoaXN0b3J5IG9iamVjdFxyXG5cdFx0X2dldEhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldEFjdGl2ZUhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fZ2V0SGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHRoZSBkb2N1bWVudCBiYXNlIHNob3VsZCBiZSBkZXRlcm1pbmVkIGF0IGNyZWF0aW9uXHJcblx0XHRfZ2V0RG9jdW1lbnRCYXNlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRiYWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5nbyggLTEgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Zm9yd2FyZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZ28oIDEgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z286IGZ1bmN0aW9uKCBzdGVwcyApIHtcclxuXHJcblx0XHRcdC8vaWYgaGFzaGxpc3RlbmluZyBpcyBlbmFibGVkIHVzZSBuYXRpdmUgaGlzdG9yeSBtZXRob2RcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCApIHtcclxuXHRcdFx0XHR3aW5kb3cuaGlzdG9yeS5nbyggc3RlcHMgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly93ZSBhcmUgbm90IGxpc3RlbmluZyB0byB0aGUgaGFzaCBzbyBoYW5kbGUgaGlzdG9yeSBpbnRlcm5hbGx5XHJcblx0XHRcdFx0dmFyIGFjdGl2ZUluZGV4ID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCxcclxuXHRcdFx0XHRcdGluZGV4ID0gYWN0aXZlSW5kZXggKyBwYXJzZUludCggc3RlcHMsIDEwICksXHJcblx0XHRcdFx0XHR1cmwgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LnN0YWNrWyBpbmRleCBdLnVybCxcclxuXHRcdFx0XHRcdGRpcmVjdGlvbiA9ICggc3RlcHMgPj0gMSApPyBcImZvcndhcmRcIiA6IFwiYmFja1wiO1xyXG5cclxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgaGlzdG9yeSBvYmplY3RcclxuXHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcblx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5wcmV2aW91c0luZGV4ID0gYWN0aXZlSW5kZXg7XHJcblxyXG5cdFx0XHRcdC8vY2hhbmdlIHRvIHRoZSBuZXcgcGFnZVxyXG5cdFx0XHRcdHRoaXMuY2hhbmdlKCB1cmwsIHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24sIGNoYW5nZUhhc2g6IGZhbHNlLCBmcm9tSGFzaENoYW5nZTogdHJ1ZSB9ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyByZW5hbWUgX2hhbmRsZURlc3RpbmF0aW9uXHJcblx0XHRfaGFuZGxlRGVzdGluYXRpb246IGZ1bmN0aW9uKCB0byApIHtcclxuXHRcdFx0dmFyIGhpc3Rvcnk7XHJcblxyXG5cdFx0XHQvLyBjbGVhbiB0aGUgaGFzaCBmb3IgY29tcGFyaXNvbiBpZiBpdCdzIGEgdXJsXHJcblx0XHRcdGlmICggJC50eXBlKHRvKSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHR0byA9ICQubW9iaWxlLnBhdGguc3RyaXBIYXNoKCB0byApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRvICkge1xyXG5cdFx0XHRcdGhpc3RvcnkgPSB0aGlzLl9nZXRIaXN0b3J5KCk7XHJcblxyXG5cdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsICd0bycgY2FuIGJlIG9uZSBvZiAzIHRoaW5ncywgYSBjYWNoZWQgcGFnZVxyXG5cdFx0XHRcdC8vIGVsZW1lbnQgZnJvbSBhIGhpc3Rvcnkgc3RhY2sgZW50cnksIGFuIGlkLCBvciBzaXRlLXJlbGF0aXZlIC9cclxuXHRcdFx0XHQvLyBhYnNvbHV0ZSBVUkwuIElmICd0bycgaXMgYW4gaWQsIHdlIG5lZWQgdG8gcmVzb2x2ZSBpdCBhZ2FpbnN0XHJcblx0XHRcdFx0Ly8gdGhlIGRvY3VtZW50QmFzZSwgbm90IHRoZSBsb2NhdGlvbi5ocmVmLCBzaW5jZSB0aGUgaGFzaGNoYW5nZVxyXG5cdFx0XHRcdC8vIGNvdWxkJ3ZlIGJlZW4gdGhlIHJlc3VsdCBvZiBhIGZvcndhcmQvYmFja3dhcmQgbmF2aWdhdGlvblxyXG5cdFx0XHRcdC8vIHRoYXQgY3Jvc3NlcyBmcm9tIGFuIGV4dGVybmFsIHBhZ2UvZGlhbG9nIHRvIGFuIGludGVybmFsXHJcblx0XHRcdFx0Ly8gcGFnZS9kaWFsb2cuXHJcblx0XHRcdFx0Ly9cclxuXHRcdFx0XHQvLyBUT0RPIG1vdmUgY2hlY2sgdG8gaGlzdG9yeSBvYmplY3Qgb3IgcGF0aCBvYmplY3Q/XHJcblx0XHRcdFx0dG8gPSAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIHRvICkgPyAoICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBcIiNcIiArIHRvLCB0aGlzLl9nZXREb2N1bWVudEJhc2UoKSApICkgOiB0bztcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdG8gfHwgdGhpcy5fZ2V0SW5pdGlhbENvbnRlbnQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RyYW5zaXRpb25Gcm9tSGlzdG9yeTogZnVuY3Rpb24oIGRpcmVjdGlvbiwgZGVmYXVsdFRyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciBoaXN0b3J5ID0gdGhpcy5fZ2V0SGlzdG9yeSgpLFxyXG5cdFx0XHRcdGVudHJ5ID0gKCBkaXJlY3Rpb24gPT09IFwiYmFja1wiID8gaGlzdG9yeS5nZXRMYXN0KCkgOiBoaXN0b3J5LmdldEFjdGl2ZSgpICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gKCBlbnRyeSAmJiBlbnRyeS50cmFuc2l0aW9uICkgfHwgZGVmYXVsdFRyYW5zaXRpb247XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVEaWFsb2c6IGZ1bmN0aW9uKCBjaGFuZ2VQYWdlT3B0aW9ucywgZGF0YSApIHtcclxuXHRcdFx0dmFyIHRvLCBhY3RpdmUsIGFjdGl2ZUNvbnRlbnQgPSB0aGlzLmdldEFjdGl2ZVBhZ2UoKTtcclxuXHJcblx0XHRcdC8vIElmIGN1cnJlbnQgYWN0aXZlIHBhZ2UgaXMgbm90IGEgZGlhbG9nIHNraXAgdGhlIGRpYWxvZyBhbmQgY29udGludWVcclxuXHRcdFx0Ly8gaW4gdGhlIHNhbWUgZGlyZWN0aW9uXHJcblx0XHRcdC8vIE5vdGU6IFRoZSBkaWFsb2cgd2lkZ2V0IGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjAgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjUuMC5cclxuXHRcdFx0Ly8gVGh1cywgYXMgb2YgMS41LjAgYWN0aXZlQ29udGVudC5kYXRhKCBcIm1vYmlsZS1kaWFsb2dcIiApIHdpbGwgYWx3YXlzIGV2YWx1YXRlIHRvXHJcblx0XHRcdC8vIGZhbHN5LCBzbyB0aGUgc2Vjb25kIGNvbmRpdGlvbiBpbiB0aGUgaWYtc3RhdGVtZW50IGJlbG93IGNhbiBiZSByZW1vdmVkIGFsdG9nZXRoZXIuXHJcblx0XHRcdGlmICggYWN0aXZlQ29udGVudCAmJiAhYWN0aXZlQ29udGVudC5kYXRhKCBcIm1vYmlsZS1kaWFsb2dcIiApICkge1xyXG5cdFx0XHRcdC8vIGRldGVybWluZSBpZiB3ZSdyZSBoZWFkaW5nIGZvcndhcmQgb3IgYmFja3dhcmQgYW5kIGNvbnRpbnVlXHJcblx0XHRcdFx0Ly8gYWNjb3JkaW5nbHkgcGFzdCB0aGUgY3VycmVudCBkaWFsb2dcclxuXHRcdFx0XHRpZiAoIGRhdGEuZGlyZWN0aW9uID09PSBcImJhY2tcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuYmFjaygpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLmZvcndhcmQoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIHByZXZlbnQgY2hhbmdlUGFnZSBjYWxsXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSBjdXJyZW50IGFjdGl2ZSBwYWdlIGlzIGEgZGlhbG9nIGFuZCB3ZSdyZSBuYXZpZ2F0aW5nXHJcblx0XHRcdFx0Ly8gdG8gYSBkaWFsb2cgdXNlIHRoZSBkaWFsb2cgb2JqZWN0ZWQgc2F2ZWQgaW4gdGhlIHN0YWNrXHJcblx0XHRcdFx0dG8gPSBkYXRhLnBhZ2VVcmw7XHJcblx0XHRcdFx0YWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlSGlzdG9yeSgpO1xyXG5cclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IHRoZSByb2xlLCB0cmFuc2l0aW9uIGFuZCByZXZlcnNhbFxyXG5cdFx0XHRcdC8vIGFzIG1vc3Qgb2YgdGhpcyBpcyBsb3N0IGJ5IHRoZSBkb21DYWNoZSBjbGVhbmluZ1xyXG5cdFx0XHRcdCQuZXh0ZW5kKCBjaGFuZ2VQYWdlT3B0aW9ucywge1xyXG5cdFx0XHRcdFx0cm9sZTogYWN0aXZlLnJvbGUsXHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiB0aGlzLl90cmFuc2l0aW9uRnJvbUhpc3RvcnkoXHJcblx0XHRcdFx0XHRcdGRhdGEuZGlyZWN0aW9uLFxyXG5cdFx0XHRcdFx0XHRjaGFuZ2VQYWdlT3B0aW9ucy50cmFuc2l0aW9uICksXHJcblx0XHRcdFx0XHRyZXZlcnNlOiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRvO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlTmF2aWdhdGU6IGZ1bmN0aW9uKCB1cmwsIGRhdGEgKSB7XHJcblx0XHRcdC8vZmluZCBmaXJzdCBwYWdlIHZpYSBoYXNoXHJcblx0XHRcdC8vIFRPRE8gc3RyaXBwaW5nIHRoZSBoYXNoIHR3aWNlIHdpdGggaGFuZGxlVXJsXHJcblx0XHRcdHZhciB0byA9ICQubW9iaWxlLnBhdGguc3RyaXBIYXNoKCB1cmwgKSwgaGlzdG9yeSA9IHRoaXMuX2dldEhpc3RvcnkoKSxcclxuXHJcblx0XHRcdFx0Ly8gdHJhbnNpdGlvbiBpcyBmYWxzZSBpZiBpdCdzIHRoZSBmaXJzdCBwYWdlLCB1bmRlZmluZWRcclxuXHRcdFx0XHQvLyBvdGhlcndpc2UgKGFuZCBtYXkgYmUgb3ZlcnJpZGRlbiBieSBkZWZhdWx0KVxyXG5cdFx0XHRcdHRyYW5zaXRpb24gPSBoaXN0b3J5LnN0YWNrLmxlbmd0aCA9PT0gMCA/IFwibm9uZVwiIDpcclxuXHRcdFx0XHRcdHRoaXMuX3RyYW5zaXRpb25Gcm9tSGlzdG9yeSggZGF0YS5kaXJlY3Rpb24gKSxcclxuXHJcblx0XHRcdFx0Ly8gZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgY2hhbmdQYWdlIGNhbGxzIG1hZGUgYWZ0ZXIgZXhhbWluaW5nXHJcblx0XHRcdFx0Ly8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBhZ2UgYW5kIHRoZSBoYXNoLCBOT1RFIHRoYXQgdGhlXHJcblx0XHRcdFx0Ly8gdHJhbnNpdGlvbiBpcyBkZXJpdmVkIGZyb20gdGhlIHByZXZpb3VzIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHRjaGFuZ2VQYWdlT3B0aW9ucyA9IHtcclxuXHRcdFx0XHRcdGNoYW5nZUhhc2g6IGZhbHNlLFxyXG5cdFx0XHRcdFx0ZnJvbUhhc2hDaGFuZ2U6IHRydWUsXHJcblx0XHRcdFx0XHRyZXZlcnNlOiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCJcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0JC5leHRlbmQoIGNoYW5nZVBhZ2VPcHRpb25zLCBkYXRhLCB7XHJcblx0XHRcdFx0dHJhbnNpdGlvbjogdHJhbnNpdGlvblxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRPRE8gbW92ZSB0byBfaGFuZGxlRGVzdGluYXRpb24gP1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzbid0IHRoZSBmaXJzdCBwYWdlLCBpZiB0aGUgY3VycmVudCB1cmwgaXMgYSBkaWFsb2cgaGFzaFxyXG5cdFx0XHQvLyBrZXksIGFuZCB0aGUgaW5pdGlhbCBkZXN0aW5hdGlvbiBpc24ndCBlcXVhbCB0byB0aGUgY3VycmVudCB0YXJnZXRcclxuXHRcdFx0Ly8gcGFnZSwgdXNlIHRoZSBzcGVjaWFsIGRpYWxvZyBoYW5kbGluZ1xyXG5cdFx0XHRpZiAoIGhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICYmXHJcblx0XHRcdFx0dG8uaW5kZXhPZiggJC5tb2JpbGUuZGlhbG9nSGFzaEtleSApID4gLTEgKSB7XHJcblxyXG5cdFx0XHRcdHRvID0gdGhpcy5faGFuZGxlRGlhbG9nKCBjaGFuZ2VQYWdlT3B0aW9ucywgZGF0YSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRvID09PSBmYWxzZSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2NoYW5nZUNvbnRlbnQoIHRoaXMuX2hhbmRsZURlc3RpbmF0aW9uKCB0byApLCBjaGFuZ2VQYWdlT3B0aW9ucyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY2hhbmdlQ29udGVudDogZnVuY3Rpb24oIHRvLCBvcHRzICkge1xyXG5cdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCB0bywgb3B0cyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0QmFzZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5iYXNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0TnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubnM7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9lbmhhbmNlOiBmdW5jdGlvbiggY29udGVudCwgcm9sZSApIHtcclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBzdXBwb3J0aW5nIGEgY3VzdG9tIGNhbGxiYWNrLCBhbmQgcGFzc2luZyBpblxyXG5cdFx0XHQvLyB0aGUgc2V0dGluZ3Mgd2hpY2ggaW5jbHVkZXMgdGhlIHJvbGVcclxuXHRcdFx0cmV0dXJuIGNvbnRlbnQucGFnZSh7IHJvbGU6IHJvbGUgfSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9pbmNsdWRlOiBmdW5jdGlvbiggcGFnZSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdC8vIGFwcGVuZCB0byBwYWdlIGFuZCBlbmhhbmNlXHJcblx0XHRcdHBhZ2UuYXBwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cclxuXHRcdFx0Ly8gdXNlIHRoZSBwYWdlIHdpZGdldCB0byBlbmhhbmNlXHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoIHBhZ2UsIHNldHRpbmdzLnJvbGUgKTtcclxuXHJcblx0XHRcdC8vIHJlbW92ZSBwYWdlIG9uIGhpZGVcclxuXHRcdFx0cGFnZS5wYWdlKCBcImJpbmRSZW1vdmVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZmluZDogZnVuY3Rpb24oIGFic1VybCApIHtcclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBzdXBwb3J0aW5nIGEgY3VzdG9tIGNhbGxiYWNrXHJcblx0XHRcdHZhciBmaWxlVXJsID0gdGhpcy5fY3JlYXRlRmlsZVVybCggYWJzVXJsICksXHJcblx0XHRcdFx0ZGF0YVVybCA9IHRoaXMuX2NyZWF0ZURhdGFVcmwoIGFic1VybCApLFxyXG5cdFx0XHRcdHBhZ2UsIGluaXRpYWxDb250ZW50ID0gdGhpcy5fZ2V0SW5pdGlhbENvbnRlbnQoKTtcclxuXHJcblx0XHRcdC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgcGFnZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgRE9NLlxyXG5cdFx0XHQvLyBOT1RFIGRvIF9ub3RfIHVzZSB0aGUgOmpxbURhdGEgcHNldWRvIHNlbGVjdG9yIGJlY2F1c2UgcGFyZW50aGVzaXNcclxuXHRcdFx0Ly8gICAgICBhcmUgYSB2YWxpZCB1cmwgY2hhciBhbmQgaXQgYnJlYWtzIG9uIHRoZSBmaXJzdCBvY2N1cmVuY2VcclxuXHRcdFx0cGFnZSA9IHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5jaGlsZHJlbiggXCJbZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgK1xyXG5cdFx0XHRcdFx0XCJ1cmw9J1wiICsgJC5tb2JpbGUucGF0aC5oYXNoVG9TZWxlY3RvciggZGF0YVVybCApICsgXCInXVwiICk7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBmYWlsZWQgdG8gZmluZCB0aGUgcGFnZSwgY2hlY2sgdG8gc2VlIGlmIHRoZSB1cmwgaXMgYVxyXG5cdFx0XHQvLyByZWZlcmVuY2UgdG8gYW4gZW1iZWRkZWQgcGFnZS4gSWYgc28sIGl0IG1heSBoYXZlIGJlZW4gZHluYW1pY2FsbHlcclxuXHRcdFx0Ly8gaW5qZWN0ZWQgYnkgYSBkZXZlbG9wZXIsIGluIHdoaWNoIGNhc2UgaXQgd291bGQgYmUgbGFja2luZyBhXHJcblx0XHRcdC8vIGRhdGEtdXJsIGF0dHJpYnV0ZSBhbmQgaW4gbmVlZCBvZiBlbmhhbmNlbWVudC5cclxuXHRcdFx0aWYgKCBwYWdlLmxlbmd0aCA9PT0gMCAmJiBkYXRhVXJsICYmICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggZGF0YVVybCApICkge1xyXG5cdFx0XHRcdHBhZ2UgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oICQubW9iaWxlLnBhdGguaGFzaFRvU2VsZWN0b3IoXCIjXCIgKyBkYXRhVXJsKSApXHJcblx0XHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwidXJsXCIsIGRhdGFVcmwgKVxyXG5cdFx0XHRcdFx0LmpxbURhdGEoIFwidXJsXCIsIGRhdGFVcmwgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgd2UgZmFpbGVkIHRvIGZpbmQgYSBwYWdlIGluIHRoZSBET00sIGNoZWNrIHRoZSBVUkwgdG8gc2VlIGlmIGl0XHJcblx0XHRcdC8vIHJlZmVycyB0byB0aGUgZmlyc3QgcGFnZSBpbiB0aGUgYXBwbGljYXRpb24uIEFsc28gY2hlY2sgdG8gbWFrZSBzdXJlXHJcblx0XHRcdC8vIG91ciBjYWNoZWQtZmlyc3QtcGFnZSBpcyBhY3R1YWxseSBpbiB0aGUgRE9NLiBTb21lIHVzZXIgZGVwbG95ZWRcclxuXHRcdFx0Ly8gYXBwcyBhcmUgcHJ1bmluZyB0aGUgZmlyc3QgcGFnZSBmcm9tIHRoZSBET00gZm9yIHZhcmlvdXMgcmVhc29ucy5cclxuXHRcdFx0Ly8gV2UgY2hlY2sgZm9yIHRoaXMgY2FzZSBoZXJlIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCBhIGZpcnN0LXBhZ2Ugd2l0aFxyXG5cdFx0XHQvLyBhbiBpZCBmYWxsaW5nIHRocm91Z2ggdG8gdGhlIG5vbi1leGlzdGVudCBlbWJlZGRlZCBwYWdlIGVycm9yIGNhc2UuXHJcblx0XHRcdGlmICggcGFnZS5sZW5ndGggPT09IDAgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzRmlyc3RQYWdlVXJsKCBmaWxlVXJsICkgJiZcclxuXHRcdFx0XHRpbml0aWFsQ29udGVudCAmJlxyXG5cdFx0XHRcdGluaXRpYWxDb250ZW50LnBhcmVudCgpLmxlbmd0aCApIHtcclxuXHRcdFx0XHRwYWdlID0gJCggaW5pdGlhbENvbnRlbnQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRMb2FkZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubG9hZGluZygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2hvd0xvYWRpbmc6IGZ1bmN0aW9uKCBkZWxheSwgdGhlbWUsIG1zZywgdGV4dG9ubHkgKSB7XHJcblx0XHRcdC8vIFRoaXMgY29uZmlndXJhYmxlIHRpbWVvdXQgYWxsb3dzIGNhY2hlZCBwYWdlcyBhIGJyaWVmXHJcblx0XHRcdC8vIGRlbGF5IHRvIGxvYWQgd2l0aG91dCBzaG93aW5nIGEgbWVzc2FnZVxyXG5cdFx0XHRpZiAoIHRoaXMuX2xvYWRNc2cgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9sb2FkTXNnID0gc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuX2dldExvYWRlcigpLmxvYWRlciggXCJzaG93XCIsIHRoZW1lLCBtc2csIHRleHRvbmx5ICk7XHJcblx0XHRcdFx0dGhpcy5fbG9hZE1zZyA9IDA7XHJcblx0XHRcdH0sIHRoaXMpLCBkZWxheSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGlkZUxvYWRpbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBTdG9wIG1lc3NhZ2Ugc2hvdyB0aW1lclxyXG5cdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuX2xvYWRNc2cgKTtcclxuXHRcdFx0dGhpcy5fbG9hZE1zZyA9IDA7XHJcblxyXG5cdFx0XHQvLyBIaWRlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLl9nZXRMb2FkZXIoKS5sb2FkZXIoIFwiaGlkZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zaG93RXJyb3I6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBjdXJyZW50IGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLl9oaWRlTG9hZGluZygpO1xyXG5cclxuXHRcdFx0Ly8gc2hvdyB0aGUgZXJyb3IgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLl9zaG93TG9hZGluZyggMCwgJC5tb2JpbGUucGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZSwgJC5tb2JpbGUucGFnZUxvYWRFcnJvck1lc3NhZ2UsIHRydWUgKTtcclxuXHJcblx0XHRcdC8vIGhpZGUgdGhlIGVycm9yIG1lc3NhZ2UgYWZ0ZXIgYSBkZWxheVxyXG5cdFx0XHQvLyBUT0RPIGNvbmZpZ3VyYXRpb25cclxuXHRcdFx0c2V0VGltZW91dCggJC5wcm94eSh0aGlzLCBcIl9oaWRlTG9hZGluZ1wiKSwgMTUwMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfcGFyc2U6IGZ1bmN0aW9uKCBodG1sLCBmaWxlVXJsICkge1xyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIGFsbG93aW5nIGN1c3RvbWl6YXRpb24gb2YgdGhpcyBtZXRob2QuIEl0J3MgdmVyeSBKUU0gc3BlY2lmaWNcclxuXHRcdFx0dmFyIHBhZ2UsIGFsbCA9ICQoIFwiPGRpdj48L2Rpdj5cIiApO1xyXG5cclxuXHRcdFx0Ly93b3JrYXJvdW5kIHRvIGFsbG93IHNjcmlwdHMgdG8gZXhlY3V0ZSB3aGVuIGluY2x1ZGVkIGluIHBhZ2UgZGl2c1xyXG5cdFx0XHRhbGwuZ2V0KCAwICkuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcblx0XHRcdHBhZ2UgPSBhbGwuZmluZCggXCI6anFtRGF0YShyb2xlPSdwYWdlJyksIDpqcW1EYXRhKHJvbGU9J2RpYWxvZycpXCIgKS5maXJzdCgpO1xyXG5cclxuXHRcdFx0Ly9pZiBwYWdlIGVsZW0gY291bGRuJ3QgYmUgZm91bmQsIGNyZWF0ZSBvbmUgYW5kIGluc2VydCB0aGUgYm9keSBlbGVtZW50J3MgY29udGVudHNcclxuXHRcdFx0aWYgKCAhcGFnZS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cGFnZSA9ICQoIFwiPGRpdiBkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwicm9sZT0ncGFnZSc+XCIgK1xyXG5cdFx0XHRcdFx0KCBodG1sLnNwbGl0KCAvPFxcLz9ib2R5W14+XSo+L2dtaSApWzFdIHx8IFwiXCIgKSArXHJcblx0XHRcdFx0XHRcIjwvZGl2PlwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRPRE8gdGFnZ2luZyBhIHBhZ2Ugd2l0aCBleHRlcm5hbCB0byBtYWtlIHN1cmUgdGhhdCBlbWJlZGRlZCBwYWdlcyBhcmVuJ3RcclxuXHRcdFx0Ly8gcmVtb3ZlZCBieSB0aGUgdmFyaW91cyBwYWdlIGhhbmRsaW5nIGNvZGUgaXMgYmFkLiBIYXZpbmcgcGFnZSBoYW5kbGluZyBjb2RlXHJcblx0XHRcdC8vIGluIG1hbnkgcGxhY2VzIGlzIGJhZC4gU29sdXRpb25zIHBvc3QgMS4wXHJcblx0XHRcdHBhZ2UuYXR0ciggXCJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwidXJsXCIsIHRoaXMuX2NyZWF0ZURhdGFVcmwoIGZpbGVVcmwgKSApXHJcblx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcImV4dGVybmFsLXBhZ2VcIiwgdHJ1ZSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRMb2FkZWRUaXRsZTogZnVuY3Rpb24oIHBhZ2UsIGh0bWwgKSB7XHJcblx0XHRcdC8vcGFnZSB0aXRsZSByZWdleHBcclxuXHRcdFx0dmFyIG5ld1BhZ2VUaXRsZSA9IGh0bWwubWF0Y2goIC88dGl0bGVbXj5dKj4oW148XSopLyApICYmIFJlZ0V4cC4kMTtcclxuXHJcblx0XHRcdGlmICggbmV3UGFnZVRpdGxlICYmICFwYWdlLmpxbURhdGEoXCJ0aXRsZVwiKSApIHtcclxuXHRcdFx0XHRuZXdQYWdlVGl0bGUgPSAkKCBcIjxkaXY+XCIgKyBuZXdQYWdlVGl0bGUgKyBcIjwvZGl2PlwiICkudGV4dCgpO1xyXG5cdFx0XHRcdHBhZ2UuanFtRGF0YSggXCJ0aXRsZVwiLCBuZXdQYWdlVGl0bGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaXNSZXdyaXRhYmxlQmFzZVRhZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5keW5hbWljQmFzZUVuYWJsZWQgJiYgISQuc3VwcG9ydC5keW5hbWljQmFzZVRhZztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZURhdGFVcmw6IGZ1bmN0aW9uKCBhYnNvbHV0ZVVybCApIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybCggYWJzb2x1dGVVcmwgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZUZpbGVVcmw6IGZ1bmN0aW9uKCBhYnNvbHV0ZVVybCApIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGguZ2V0RmlsZVBhdGgoIGFic29sdXRlVXJsICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90cmlnZ2VyV2l0aERlcHJlY2F0ZWQ6IGZ1bmN0aW9uKCBuYW1lLCBkYXRhLCBwYWdlICkge1xyXG5cdFx0XHR2YXIgZGVwcmVjYXRlZEV2ZW50ID0gJC5FdmVudCggXCJwYWdlXCIgKyBuYW1lICksXHJcblx0XHRcdFx0bmV3RXZlbnQgPSAkLkV2ZW50KCB0aGlzLndpZGdldE5hbWUgKyBuYW1lICk7XHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEXHJcblx0XHRcdC8vIHRyaWdnZXIgdGhlIG9sZCBkZXByZWNhdGVkIGV2ZW50IG9uIHRoZSBwYWdlIGlmIGl0J3MgcHJvdmlkZWRcclxuXHRcdFx0KCBwYWdlIHx8IHRoaXMuZWxlbWVudCApLnRyaWdnZXIoIGRlcHJlY2F0ZWRFdmVudCwgZGF0YSApO1xyXG5cclxuXHRcdFx0Ly8gdXNlIHRoZSB3aWRnZXQgdHJpZ2dlciBtZXRob2QgZm9yIHRoZSBuZXcgY29udGVudCogZXZlbnRcclxuXHRcdFx0dGhpcy5fdHJpZ2dlciggbmFtZSwgbmV3RXZlbnQsIGRhdGEgKTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0ZGVwcmVjYXRlZEV2ZW50OiBkZXByZWNhdGVkRXZlbnQsXHJcblx0XHRcdFx0ZXZlbnQ6IG5ld0V2ZW50XHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gaXQgd291bGQgYmUgbmljZSB0byBzcGxpdCB0aGlzIHVwIG1vcmUgYnV0IGV2ZXJ5dGhpbmcgYXBwZWFycyB0byBiZSBcIm9uZSBvZmZcIlxyXG5cdFx0Ly8gICAgICBvciByZXF1aXJlIG9yZGVyaW5nIHN1Y2ggdGhhdCBvdGhlciBiaXRzIGFyZSBzcHJpbmtsZWQgaW4gYmV0d2VlbiBwYXJ0cyB0aGF0XHJcblx0XHQvLyAgICAgIGNvdWxkIGJlIGFic3RyYWN0ZWQgb3V0IGFzIGEgZ3JvdXBcclxuXHRcdF9sb2FkU3VjY2VzczogZnVuY3Rpb24oIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApIHtcclxuXHRcdFx0dmFyIGZpbGVVcmwgPSB0aGlzLl9jcmVhdGVGaWxlVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdHJldHVybiAkLnByb3h5KGZ1bmN0aW9uKCBodG1sLCB0ZXh0U3RhdHVzLCB4aHIgKSB7XHJcblx0XHRcdFx0Ly9wcmUtcGFyc2UgaHRtbCB0byBjaGVjayBmb3IgYSBkYXRhLXVybCxcclxuXHRcdFx0XHQvL3VzZSBpdCBhcyB0aGUgbmV3IGZpbGVVcmwsIGJhc2UgcGF0aCwgZXRjXHJcblx0XHRcdFx0dmFyIGNvbnRlbnQsXHJcblxyXG5cdFx0XHRcdFx0Ly8gVE9ETyBoYW5kbGUgZGlhbG9ncyBhZ2FpblxyXG5cdFx0XHRcdFx0cGFnZUVsZW1SZWdleCA9IG5ldyBSZWdFeHAoIFwiKDxbXj5dK1xcXFxiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInJvbGU9W1xcXCInXT9wYWdlW1xcXCInXT9bXj5dKj4pXCIgKSxcclxuXHJcblx0XHRcdFx0XHRkYXRhVXJsUmVnZXggPSBuZXcgUmVnRXhwKCBcIlxcXFxiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInVybD1bXFxcIiddPyhbXlxcXCInPl0qKVtcXFwiJ10/XCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gZGF0YS11cmwgbXVzdCBiZSBwcm92aWRlZCBmb3IgdGhlIGJhc2UgdGFnIHNvIHJlc291cmNlIHJlcXVlc3RzXHJcblx0XHRcdFx0Ly8gY2FuIGJlIGRpcmVjdGVkIHRvIHRoZSBjb3JyZWN0IHVybC4gbG9hZGluZyBpbnRvIGEgdGVtcHJvcmFyeVxyXG5cdFx0XHRcdC8vIGVsZW1lbnQgbWFrZXMgdGhlc2UgcmVxdWVzdHMgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHRpZiAoIHBhZ2VFbGVtUmVnZXgudGVzdCggaHRtbCApICYmXHJcblx0XHRcdFx0XHRSZWdFeHAuJDEgJiZcclxuXHRcdFx0XHRcdGRhdGFVcmxSZWdleC50ZXN0KCBSZWdFeHAuJDEgKSAmJlxyXG5cdFx0XHRcdFx0UmVnRXhwLiQxICkge1xyXG5cdFx0XHRcdFx0ZmlsZVVybCA9ICQubW9iaWxlLnBhdGguZ2V0RmlsZVBhdGgoICQoXCI8ZGl2PlwiICsgUmVnRXhwLiQxICsgXCI8L2Rpdj5cIikudGV4dCgpICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gV2Ugc3BlY2lmeSB0aGF0LCBpZiBhIGRhdGEtdXJsIGF0dHJpYnV0ZSBpcyBnaXZlbiBvbiB0aGUgcGFnZSBkaXYsIGl0cyB2YWx1ZVxyXG5cdFx0XHRcdFx0Ly8gbXVzdCBiZSBnaXZlbiBub24tVVJMLWVuY29kZWQuIEhvd2V2ZXIsIGluIHRoaXMgcGFydCBvZiB0aGUgY29kZSwgZmlsZVVybCBpc1xyXG5cdFx0XHRcdFx0Ly8gYXNzdW1lZCB0byBiZSBVUkwtZW5jb2RlZCwgc28gd2UgVVJMLWVuY29kZSB0aGUgcmV0cmlldmVkIHZhbHVlIGhlcmVcclxuXHRcdFx0XHRcdGZpbGVVcmwgPSB0aGlzLndpbmRvd1sgMCBdLmVuY29kZVVSSUNvbXBvbmVudCggZmlsZVVybCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly9kb250IHVwZGF0ZSB0aGUgYmFzZSB0YWcgaWYgd2UgYXJlIHByZWZldGNoaW5nXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5wcmVmZXRjaCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnNldCggZmlsZVVybCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29udGVudCA9IHRoaXMuX3BhcnNlKCBodG1sLCBmaWxlVXJsICk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3NldExvYWRlZFRpdGxlKCBjb250ZW50LCBodG1sICk7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCB0aGUgY29udGVudCByZWZlcmVuY2UgYW5kIHhociB0byBvdXIgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEueGhyID0geGhyO1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnRleHRTdGF0dXMgPSB0ZXh0U3RhdHVzO1xyXG5cclxuXHRcdFx0XHQvLyBERVBSRUNBVEVEXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEucGFnZSA9IGNvbnRlbnQ7XHJcblxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmNvbnRlbnQgPSBjb250ZW50O1xyXG5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS50b1BhZ2UgPSBjb250ZW50O1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0XHQvLyBOb3RlIHRoYXQgaXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsaXN0ZW5lci9oYW5kbGVyXHJcblx0XHRcdFx0Ly8gdGhhdCBjYWxsZWQgcHJldmVudERlZmF1bHQoKSwgdG8gcmVzb2x2ZS9yZWplY3QgdGhlXHJcblx0XHRcdFx0Ly8gZGVmZXJyZWQgb2JqZWN0IHdpdGhpbiB0aGUgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwibG9hZFwiLCB0cmlnZ2VyRGF0YSApLmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gcmV3cml0ZSBzcmMgYW5kIGhyZWYgYXR0cnMgdG8gdXNlIGEgYmFzZSB1cmwgaWYgdGhlIGJhc2UgdGFnIHdvbid0IHdvcmtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX2lzUmV3cml0YWJsZUJhc2VUYWcoKSAmJiBjb250ZW50ICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnJld3JpdGUoIGZpbGVVcmwsIGNvbnRlbnQgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX2luY2x1ZGUoIGNvbnRlbnQsIHNldHRpbmdzICk7XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSBsb2FkaW5nIG1lc3NhZ2UuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5zaG93TG9hZE1zZyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2hpZGVMb2FkaW5nKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKCBhYnNVcmwsIHNldHRpbmdzLCBjb250ZW50ICk7XHJcblx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfbG9hZERlZmF1bHRzOiB7XHJcblx0XHRcdHR5cGU6IFwiZ2V0XCIsXHJcblx0XHRcdGRhdGE6IHVuZGVmaW5lZCxcclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURURcclxuXHRcdFx0cmVsb2FkUGFnZTogZmFsc2UsXHJcblxyXG5cdFx0XHRyZWxvYWQ6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly8gQnkgZGVmYXVsdCB3ZSByZWx5IG9uIHRoZSByb2xlIGRlZmluZWQgYnkgdGhlIEBkYXRhLXJvbGUgYXR0cmlidXRlLlxyXG5cdFx0XHRyb2xlOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0XHRzaG93TG9hZE1zZzogZmFsc2UsXHJcblxyXG5cdFx0XHQvLyBUaGlzIGRlbGF5IGFsbG93cyBsb2FkcyB0aGF0IHB1bGwgZnJvbSBicm93c2VyIGNhY2hlIHRvXHJcblx0XHRcdC8vIG9jY3VyIHdpdGhvdXQgc2hvd2luZyB0aGUgbG9hZGluZyBtZXNzYWdlLlxyXG5cdFx0XHRsb2FkTXNnRGVsYXk6IDUwXHJcblx0XHR9LFxyXG5cclxuXHRcdGxvYWQ6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XHJcblx0XHRcdC8vIFRoaXMgZnVuY3Rpb24gdXNlcyBkZWZlcnJlZCBub3RpZmljYXRpb25zIHRvIGxldCBjYWxsZXJzXHJcblx0XHRcdC8vIGtub3cgd2hlbiB0aGUgY29udGVudCBpcyBkb25lIGxvYWRpbmcsIG9yIGlmIGFuIGVycm9yIGhhcyBvY2N1cnJlZC5cclxuXHRcdFx0dmFyIGRlZmVycmVkID0gKCBvcHRpb25zICYmIG9wdGlvbnMuZGVmZXJyZWQgKSB8fCAkLkRlZmVycmVkKCksXHJcblxyXG5cdFx0XHRcdC8vIEV4YW1pbmluZyB0aGUgb3B0aW9uIFwicmVsb2FkUGFnZVwiIHBhc3NlZCBieSB0aGUgdXNlciBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wXHJcblx0XHRcdFx0Ly8gYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjUuMC5cclxuXHRcdFx0XHQvLyBDb3B5IG9wdGlvbiBcInJlbG9hZFBhZ2VcIiB0byBcInJlbG9hZFwiLCBidXQgb25seSBpZiBvcHRpb24gXCJyZWxvYWRcIiBpcyBub3QgcHJlc2VudFxyXG5cdFx0XHRcdHJlbG9hZE9wdGlvbkV4dGVuc2lvbiA9XHJcblx0XHRcdFx0XHQoICggb3B0aW9ucyAmJiBvcHRpb25zLnJlbG9hZCA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdFx0XHRcdG9wdGlvbnMucmVsb2FkUGFnZSAhPT0gdW5kZWZpbmVkICkgP1xyXG5cdFx0XHRcdFx0XHRcdHsgcmVsb2FkOiBvcHRpb25zLnJlbG9hZFBhZ2UgfSA6IHt9ICksXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBkZWZhdWx0IGxvYWQgb3B0aW9ucyB3aXRoIG92ZXJyaWRlcyBzcGVjaWZpZWQgYnkgdGhlIGNhbGxlci5cclxuXHRcdFx0XHRzZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5fbG9hZERlZmF1bHRzLCBvcHRpb25zLCByZWxvYWRPcHRpb25FeHRlbnNpb24gKSxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIERPTSBlbGVtZW50IGZvciB0aGUgY29udGVudCBhZnRlciBpdCBoYXMgYmVlbiBsb2FkZWQuXHJcblx0XHRcdFx0Y29udGVudCA9IG51bGwsXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSB2ZXJzaW9uIG9mIHRoZSBVUkwgcGFzc2VkIGludG8gdGhlIGZ1bmN0aW9uLiBUaGlzXHJcblx0XHRcdFx0Ly8gdmVyc2lvbiBvZiB0aGUgVVJMIG1heSBjb250YWluIGRpYWxvZy9zdWJjb250ZW50IHBhcmFtcyBpbiBpdC5cclxuXHRcdFx0XHRhYnNVcmwgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdXJsLCB0aGlzLl9maW5kQmFzZVdpdGhEZWZhdWx0KCkgKSxcclxuXHRcdFx0XHRmaWxlVXJsLCBkYXRhVXJsLCBwYmxFdmVudCwgdHJpZ2dlckRhdGE7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2FsbGVyIHByb3ZpZGVkIGRhdGEsIGFuZCB3ZSdyZSB1c2luZyBcImdldFwiIHJlcXVlc3QsXHJcblx0XHRcdC8vIGFwcGVuZCB0aGUgZGF0YSB0byB0aGUgVVJMLlxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLmRhdGEgJiYgc2V0dGluZ3MudHlwZSA9PT0gXCJnZXRcIiApIHtcclxuXHRcdFx0XHRhYnNVcmwgPSAkLm1vYmlsZS5wYXRoLmFkZFNlYXJjaFBhcmFtcyggYWJzVXJsLCBzZXR0aW5ncy5kYXRhICk7XHJcblx0XHRcdFx0c2V0dGluZ3MuZGF0YSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNhbGxlciBpcyB1c2luZyBhIFwicG9zdFwiIHJlcXVlc3QsIHJlbG9hZCBtdXN0IGJlIHRydWVcclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5kYXRhICYmIHNldHRpbmdzLnR5cGUgPT09IFwicG9zdFwiICkge1xyXG5cdFx0XHRcdHNldHRpbmdzLnJlbG9hZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRoZSBhYnNvbHV0ZSB2ZXJzaW9uIG9mIHRoZSBVUkwgbWludXMgYW55IGRpYWxvZy9zdWJjb250ZW50IHBhcmFtcy5cclxuXHRcdFx0Ly8gSW4gb3RoZXJ3b3JkcyB0aGUgcmVhbCBVUkwgb2YgdGhlIGNvbnRlbnQgdG8gYmUgbG9hZGVkLlxyXG5cdFx0XHRmaWxlVXJsID0gdGhpcy5fY3JlYXRlRmlsZVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHQvLyBUaGUgdmVyc2lvbiBvZiB0aGUgVXJsIGFjdHVhbGx5IHN0b3JlZCBpbiB0aGUgZGF0YS11cmwgYXR0cmlidXRlIG9mXHJcblx0XHRcdC8vIHRoZSBjb250ZW50LiBGb3IgZW1iZWRkZWQgY29udGVudCwgaXQgaXMganVzdCB0aGUgaWQgb2YgdGhlIHBhZ2UuIEZvclxyXG5cdFx0XHQvLyBjb250ZW50IHdpdGhpbiB0aGUgc2FtZSBkb21haW4gYXMgdGhlIGRvY3VtZW50IGJhc2UsIGl0IGlzIHRoZSBzaXRlXHJcblx0XHRcdC8vIHJlbGF0aXZlIHBhdGguIEZvciBjcm9zcy1kb21haW4gY29udGVudCAoUGhvbmUgR2FwIG9ubHkpIHRoZSBlbnRpcmVcclxuXHRcdFx0Ly8gYWJzb2x1dGUgVXJsIGlzIHVzZWQgdG8gbG9hZCB0aGUgY29udGVudC5cclxuXHRcdFx0ZGF0YVVybCA9IHRoaXMuX2NyZWF0ZURhdGFVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0Y29udGVudCA9IHRoaXMuX2ZpbmQoIGFic1VybCApO1xyXG5cclxuXHRcdFx0Ly8gSWYgaXQgaXNuJ3QgYSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IGNvbnRlbnQgYW5kIHJlZmVycyB0byBtaXNzaW5nXHJcblx0XHRcdC8vIGVtYmVkZGVkIGNvbnRlbnQgcmVqZWN0IHRoZSBkZWZlcnJlZCBhbmQgcmV0dXJuXHJcblx0XHRcdGlmICggY29udGVudC5sZW5ndGggPT09IDAgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzRW1iZWRkZWRQYWdlKGZpbGVVcmwpICYmXHJcblx0XHRcdFx0ISQubW9iaWxlLnBhdGguaXNGaXJzdFBhZ2VVcmwoZmlsZVVybCkgKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCBhYnNVcmwsIHNldHRpbmdzICk7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVzZXQgYmFzZSB0byB0aGUgZGVmYXVsdCBkb2N1bWVudCBiYXNlXHJcblx0XHRcdC8vIFRPRE8gZmlndXJlIG91dCB3aHkgd2UgZG9lIHRoaXNcclxuXHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnJlc2V0KCk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY29udGVudCB3ZSBhcmUgaW50ZXJlc3RlZCBpbiBpcyBhbHJlYWR5IGluIHRoZSBET00sXHJcblx0XHRcdC8vIGFuZCB0aGUgY2FsbGVyIGRpZCBub3QgaW5kaWNhdGUgdGhhdCB3ZSBzaG91bGQgZm9yY2UgYVxyXG5cdFx0XHQvLyByZWxvYWQgb2YgdGhlIGZpbGUsIHdlIGFyZSBkb25lLiBSZXNvbHZlIHRoZSBkZWZlcnJyZWQgc28gdGhhdFxyXG5cdFx0XHQvLyB1c2VycyBjYW4gYmluZCB0byAuZG9uZSBvbiB0aGUgcHJvbWlzZVxyXG5cdFx0XHRpZiAoIGNvbnRlbnQubGVuZ3RoICYmICFzZXR0aW5ncy5yZWxvYWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZW5oYW5jZSggY29udGVudCwgc2V0dGluZ3Mucm9sZSApO1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoIGFic1VybCwgc2V0dGluZ3MsIGNvbnRlbnQgKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB3ZSBhcmUgcmVsb2FkaW5nIHRoZSBjb250ZW50IG1ha2Ugc3VyZSB3ZSB1cGRhdGVcclxuXHRcdFx0XHQvLyB0aGUgYmFzZSBpZiBpdHMgbm90IGEgcHJlZmV0Y2hcclxuXHRcdFx0XHRpZiAoICFzZXR0aW5ncy5wcmVmZXRjaCApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5zZXQodXJsKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRyaWdnZXJEYXRhID0ge1xyXG5cdFx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRcdGFic1VybDogYWJzVXJsLFxyXG5cdFx0XHRcdHRvUGFnZTogdXJsLFxyXG5cdFx0XHRcdHByZXZQYWdlOiBvcHRpb25zID8gb3B0aW9ucy5mcm9tUGFnZSA6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRkYXRhVXJsOiBkYXRhVXJsLFxyXG5cdFx0XHRcdGRlZmVycmVkOiBkZWZlcnJlZCxcclxuXHRcdFx0XHRvcHRpb25zOiBzZXR0aW5nc1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gTGV0IGxpc3RlbmVycyBrbm93IHdlJ3JlIGFib3V0IHRvIGxvYWQgY29udGVudC5cclxuXHRcdFx0cGJsRXZlbnQgPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiYmVmb3JlbG9hZFwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdGlmICggcGJsRXZlbnQuZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0cGJsRXZlbnQuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5zaG93TG9hZE1zZyApIHtcclxuXHRcdFx0XHR0aGlzLl9zaG93TG9hZGluZyggc2V0dGluZ3MubG9hZE1zZ0RlbGF5ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlc2V0IGJhc2UgdG8gdGhlIGRlZmF1bHQgZG9jdW1lbnQgYmFzZS5cclxuXHRcdFx0Ly8gb25seSByZXNldCBpZiB3ZSBhcmUgbm90IHByZWZldGNoaW5nXHJcblx0XHRcdGlmICggc2V0dGluZ3MucHJlZmV0Y2ggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkucmVzZXQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhKCAkLm1vYmlsZS5hbGxvd0Nyb3NzRG9tYWluUGFnZXMgfHxcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzU2FtZURvbWFpbigkLm1vYmlsZS5wYXRoLmRvY3VtZW50VXJsLCBhYnNVcmwgKSApICkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCggYWJzVXJsLCBzZXR0aW5ncyApO1xyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExvYWQgdGhlIG5ldyBjb250ZW50LlxyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHVybDogZmlsZVVybCxcclxuXHRcdFx0XHR0eXBlOiBzZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRcdGRhdGE6IHNldHRpbmdzLmRhdGEsXHJcblx0XHRcdFx0Y29udGVudFR5cGU6IHNldHRpbmdzLmNvbnRlbnRUeXBlLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcclxuXHRcdFx0XHRzdWNjZXNzOiB0aGlzLl9sb2FkU3VjY2VzcyggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkICksXHJcblx0XHRcdFx0ZXJyb3I6IHRoaXMuX2xvYWRFcnJvciggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkIClcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfbG9hZEVycm9yOiBmdW5jdGlvbiggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkICkge1xyXG5cdFx0XHRyZXR1cm4gJC5wcm94eShmdW5jdGlvbiggeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcclxuXHRcdFx0XHQvL3NldCBiYXNlIGJhY2sgdG8gY3VycmVudCBwYXRoXHJcblx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnNldCggJC5tb2JpbGUucGF0aC5nZXQoKSApO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgZXJyb3IgaW5mbyB0byBvdXIgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEueGhyID0geGhyO1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnRleHRTdGF0dXMgPSB0ZXh0U3RhdHVzO1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmVycm9yVGhyb3duID0gZXJyb3JUaHJvd247XHJcblxyXG5cdFx0XHRcdC8vIExldCBsaXN0ZW5lcnMga25vdyB0aGUgcGFnZSBsb2FkIGZhaWxlZC5cclxuXHRcdFx0XHR2YXIgcGxmRXZlbnQgPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwibG9hZGZhaWxlZFwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0XHQvLyBOb3RlIHRoYXQgaXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsaXN0ZW5lci9oYW5kbGVyXHJcblx0XHRcdFx0Ly8gdGhhdCBjYWxsZWQgcHJldmVudERlZmF1bHQoKSwgdG8gcmVzb2x2ZS9yZWplY3QgdGhlXHJcblx0XHRcdFx0Ly8gZGVmZXJyZWQgb2JqZWN0IHdpdGhpbiB0aGUgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0aWYgKCBwbGZFdmVudC5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRcdHBsZkV2ZW50LmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGxvYWRpbmcgbWVzc2FnZS5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLnNob3dMb2FkTXNnICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fc2hvd0Vycm9yKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoIGFic1VybCwgc2V0dGluZ3MgKTtcclxuXHRcdFx0fSwgdGhpcyk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRUcmFuc2l0aW9uSGFuZGxlcjogZnVuY3Rpb24oIHRyYW5zaXRpb24gKSB7XHJcblx0XHRcdHRyYW5zaXRpb24gPSAkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiggdHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdFx0Ly9maW5kIHRoZSB0cmFuc2l0aW9uIGhhbmRsZXIgZm9yIHRoZSBzcGVjaWZpZWQgdHJhbnNpdGlvbi4gSWYgdGhlcmVcclxuXHRcdFx0Ly9pc24ndCBvbmUgaW4gb3VyIHRyYW5zaXRpb25IYW5kbGVycyBkaWN0aW9uYXJ5LCB1c2UgdGhlIGRlZmF1bHQgb25lLlxyXG5cdFx0XHQvL2NhbGwgdGhlIGhhbmRsZXIgaW1tZWRpYXRlbHkgdG8ga2ljay1vZmYgdGhlIHRyYW5zaXRpb24uXHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbIHRyYW5zaXRpb24gXSB8fCAkLm1vYmlsZS5kZWZhdWx0VHJhbnNpdGlvbkhhbmRsZXI7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gbW92ZSBpbnRvIHRyYW5zaXRpb24gaGFuZGxlcnM/XHJcblx0XHRfdHJpZ2dlckNzc1RyYW5zaXRpb25FdmVudHM6IGZ1bmN0aW9uKCB0bywgZnJvbSwgcHJlZml4ICkge1xyXG5cdFx0XHR2YXIgc2FtZVBhZ2UgPSBmYWxzZTtcclxuXHJcblx0XHRcdHByZWZpeCA9IHByZWZpeCB8fCBcIlwiO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBkZWNpZGUgaWYgdGhlc2UgZXZlbnRzIHNob3VsZCBpbiBmYWN0IGJlIHRyaWdnZXJlZCBvbiB0aGUgY29udGFpbmVyXHJcblx0XHRcdGlmICggZnJvbSApIHtcclxuXHJcblx0XHRcdFx0Ly9DaGVjayBpZiB0aGlzIGlzIGEgc2FtZSBwYWdlIHRyYW5zaXRpb24gYW5kIHRlbGwgdGhlIGhhbmRsZXIgaW4gcGFnZVxyXG5cdFx0XHRcdGlmKCB0b1swXSA9PT0gZnJvbVswXSApe1xyXG5cdFx0XHRcdFx0c2FtZVBhZ2UgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly90cmlnZ2VyIGJlZm9yZSBzaG93L2hpZGUgZXZlbnRzXHJcblx0XHRcdFx0Ly8gVE9ETyBkZXByZWNhdGUgbmV4dFBhZ2UgaW4gZmF2b3Igb2YgbmV4dFxyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggcHJlZml4ICsgXCJoaWRlXCIsIHtcclxuXHJcblx0XHRcdFx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRcdFx0XHRuZXh0UGFnZTogdG8sXHJcblx0XHRcdFx0XHR0b1BhZ2U6IHRvLFxyXG5cdFx0XHRcdFx0cHJldlBhZ2U6IGZyb20sXHJcblx0XHRcdFx0XHRzYW1lUGFnZTogc2FtZVBhZ2VcclxuXHRcdFx0XHR9LCBmcm9tICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRPRE8gZGVwcmVjYXRlIHByZXZQYWdlIGluIGZhdm9yIG9mIHByZXZpb3VzXHJcblx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggcHJlZml4ICsgXCJzaG93XCIsIHtcclxuXHRcdFx0XHRwcmV2UGFnZTogZnJvbSB8fCAkKCBcIlwiICksXHJcblx0XHRcdFx0dG9QYWdlOiB0b1xyXG5cdFx0XHR9LCB0byApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIG1ha2UgcHJpdmF0ZSBvbmNlIGNoYW5nZSBoYXMgYmVlbiBkZWZpbmVkIGluIHRoZSB3aWRnZXRcclxuXHRcdF9jc3NUcmFuc2l0aW9uOiBmdW5jdGlvbiggdG8sIGZyb20sIG9wdGlvbnMgKSB7XHJcblx0XHRcdHZhciB0cmFuc2l0aW9uID0gb3B0aW9ucy50cmFuc2l0aW9uLFxyXG5cdFx0XHRcdHJldmVyc2UgPSBvcHRpb25zLnJldmVyc2UsXHJcblx0XHRcdFx0ZGVmZXJyZWQgPSBvcHRpb25zLmRlZmVycmVkLFxyXG5cdFx0XHRcdFRyYW5zaXRpb25IYW5kbGVyLFxyXG5cdFx0XHRcdHByb21pc2U7XHJcblxyXG5cdFx0XHR0aGlzLl90cmlnZ2VyQ3NzVHJhbnNpdGlvbkV2ZW50cyggdG8sIGZyb20sIFwiYmVmb3JlXCIgKTtcclxuXHJcblx0XHRcdC8vIFRPRE8gcHV0IHRoaXMgaW4gYSBiaW5kaW5nIHRvIGV2ZW50cyAqb3V0c2lkZSogdGhlIHdpZGdldFxyXG5cdFx0XHR0aGlzLl9oaWRlTG9hZGluZygpO1xyXG5cclxuXHRcdFx0VHJhbnNpdGlvbkhhbmRsZXIgPSB0aGlzLl9nZXRUcmFuc2l0aW9uSGFuZGxlciggdHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdFx0cHJvbWlzZSA9ICggbmV3IFRyYW5zaXRpb25IYW5kbGVyKCB0cmFuc2l0aW9uLCByZXZlcnNlLCB0bywgZnJvbSApICkudHJhbnNpdGlvbigpO1xyXG5cclxuXHRcdFx0cHJvbWlzZS5kb25lKCAkLnByb3h5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyQ3NzVHJhbnNpdGlvbkV2ZW50cyggdG8sIGZyb20gKTtcclxuXHRcdFx0fSwgdGhpcyApKTtcclxuXHJcblx0XHRcdC8vIFRPRE8gdGVtcG9yYXJ5IGFjY29tb2RhdGlvbiBvZiBhcmd1bWVudCBkZWZlcnJlZFxyXG5cdFx0XHRwcm9taXNlLmRvbmUoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZS5hcHBseSggZGVmZXJyZWQsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3JlbGVhc2VUcmFuc2l0aW9uTG9jazogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vcmVsZWFzZSB0cmFuc2l0aW9uIGxvY2sgc28gbmF2aWdhdGlvbiBpcyBmcmVlIGFnYWluXHJcblx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHRcdFx0aWYgKCBwYWdlVHJhbnNpdGlvblF1ZXVlLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZS5hcHBseSggbnVsbCwgcGFnZVRyYW5zaXRpb25RdWV1ZS5wb3AoKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9yZW1vdmVBY3RpdmVMaW5rQ2xhc3M6IGZ1bmN0aW9uKCBmb3JjZSApIHtcclxuXHRcdFx0Ly9jbGVhciBvdXQgdGhlIGFjdGl2ZSBidXR0b24gc3RhdGVcclxuXHRcdFx0JC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCBmb3JjZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfbG9hZFVybDogZnVuY3Rpb24oIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdC8vIHByZXNlcnZlIHRoZSBvcmlnaW5hbCB0YXJnZXQgYXMgdGhlIGRhdGFVcmwgdmFsdWUgd2lsbCBiZVxyXG5cdFx0XHQvLyBzaW1wbGlmaWVkIGVnLCByZW1vdmluZyB1aS1zdGF0ZSwgYW5kIHJlbW92aW5nIHF1ZXJ5IHBhcmFtc1xyXG5cdFx0XHQvLyBmcm9tIHRoZSBoYXNoIHRoaXMgaXMgc28gdGhhdCB1c2VycyB3aG8gd2FudCB0byB1c2UgcXVlcnlcclxuXHRcdFx0Ly8gcGFyYW1zIGhhdmUgYWNjZXNzIHRvIHRoZW0gaW4gdGhlIGV2ZW50IGJpbmRpbmdzIGZvciB0aGUgcGFnZVxyXG5cdFx0XHQvLyBsaWZlIGN5Y2xlIFNlZSBpc3N1ZSAjNTA4NVxyXG5cdFx0XHRzZXR0aW5ncy50YXJnZXQgPSB0bztcclxuXHRcdFx0c2V0dGluZ3MuZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdFx0XHR0aGlzLmxvYWQoIHRvLCBzZXR0aW5ncyApO1xyXG5cclxuXHRcdFx0c2V0dGluZ3MuZGVmZXJyZWQuZG9uZSgkLnByb3h5KGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMsIGNvbnRlbnQgKSB7XHJcblx0XHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHQvLyBzdG9yZSB0aGUgb3JpZ2luYWwgYWJzb2x1dGUgdXJsIHNvIHRoYXQgaXQgY2FuIGJlIHByb3ZpZGVkXHJcblx0XHRcdFx0Ly8gdG8gZXZlbnRzIGluIHRoZSB0cmlnZ2VyRGF0YSBvZiB0aGUgc3Vic2VxdWVudCBjaGFuZ2VQYWdlIGNhbGxcclxuXHRcdFx0XHRvcHRpb25zLmFic1VybCA9IHRyaWdnZXJEYXRhLmFic1VybDtcclxuXHJcblx0XHRcdFx0dGhpcy50cmFuc2l0aW9uKCBjb250ZW50LCB0cmlnZ2VyRGF0YSwgb3B0aW9ucyApO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0XHRzZXR0aW5ncy5kZWZlcnJlZC5mYWlsKCQucHJveHkoZnVuY3Rpb24oLyogdXJsLCBvcHRpb25zICovKSB7XHJcblx0XHRcdFx0dGhpcy5fcmVtb3ZlQWN0aXZlTGlua0NsYXNzKCB0cnVlICk7XHJcblx0XHRcdFx0dGhpcy5fcmVsZWFzZVRyYW5zaXRpb25Mb2NrKCk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImNoYW5nZWZhaWxlZFwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90cmlnZ2VyUGFnZUJlZm9yZUNoYW5nZTogZnVuY3Rpb24oIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdHZhciByZXR1cm5FdmVudHM7XHJcblxyXG5cdFx0XHR0cmlnZ2VyRGF0YS5wcmV2UGFnZSA9IHRoaXMuYWN0aXZlUGFnZTtcclxuXHRcdFx0JC5leHRlbmQoIHRyaWdnZXJEYXRhLCB7XHJcblx0XHRcdFx0dG9QYWdlOiB0byxcclxuXHRcdFx0XHRvcHRpb25zOiBzZXR0aW5nc1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIE5PVEU6IHByZXNlcnZlIHRoZSBvcmlnaW5hbCB0YXJnZXQgYXMgdGhlIGRhdGFVcmwgdmFsdWUgd2lsbCBiZVxyXG5cdFx0XHQvLyBzaW1wbGlmaWVkIGVnLCByZW1vdmluZyB1aS1zdGF0ZSwgYW5kIHJlbW92aW5nIHF1ZXJ5IHBhcmFtcyBmcm9tXHJcblx0XHRcdC8vIHRoZSBoYXNoIHRoaXMgaXMgc28gdGhhdCB1c2VycyB3aG8gd2FudCB0byB1c2UgcXVlcnkgcGFyYW1zIGhhdmVcclxuXHRcdFx0Ly8gYWNjZXNzIHRvIHRoZW0gaW4gdGhlIGV2ZW50IGJpbmRpbmdzIGZvciB0aGUgcGFnZSBsaWZlIGN5Y2xlXHJcblx0XHRcdC8vIFNlZSBpc3N1ZSAjNTA4NVxyXG5cdFx0XHRpZiAoICQudHlwZSh0bykgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvUGFnZSBpcyBhIHN0cmluZyBzaW1wbHkgY29udmVydCBpdFxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmFic1VybCA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB0bywgdGhpcy5fZmluZEJhc2VXaXRoRGVmYXVsdCgpICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvUGFnZSBpcyBhIGpRdWVyeSBvYmplY3QgZ3JhYiB0aGUgYWJzb2x1dGUgdXJsIHN0b3JlZFxyXG5cdFx0XHRcdC8vIGluIHRoZSBsb2FkUGFnZSBjYWxsYmFjayB3aGVyZSBpdCBleGlzdHNcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5hYnNVcmwgPSBzZXR0aW5ncy5hYnNVcmw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExldCBsaXN0ZW5lcnMga25vdyB3ZSdyZSBhYm91dCB0byBjaGFuZ2UgdGhlIGN1cnJlbnQgcGFnZS5cclxuXHRcdFx0cmV0dXJuRXZlbnRzID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImJlZm9yZWNoYW5nZVwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdGlmICggcmV0dXJuRXZlbnRzLmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0cmV0dXJuRXZlbnRzLmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjaGFuZ2U6IGZ1bmN0aW9uKCB0bywgb3B0aW9ucyApIHtcclxuXHRcdFx0Ly8gSWYgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBhIHRyYW5zaXRpb24sIHF1ZXVlIHRoZSBjdXJyZW50IHJlcXVlc3QuXHJcblx0XHRcdC8vIFdlJ2xsIGNhbGwgY2hhbmdlUGFnZSgpIG9uY2Ugd2UncmUgZG9uZSB3aXRoIHRoZSBjdXJyZW50IHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gdG8gc2VydmljZSB0aGUgcmVxdWVzdC5cclxuXHRcdFx0aWYgKCBpc1BhZ2VUcmFuc2l0aW9uaW5nICkge1xyXG5cdFx0XHRcdHBhZ2VUcmFuc2l0aW9uUXVldWUudW5zaGlmdCggYXJndW1lbnRzICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCgge30sICQubW9iaWxlLmNoYW5nZVBhZ2UuZGVmYXVsdHMsIG9wdGlvbnMgKSxcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YSA9IHt9O1xyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIGhhdmUgYSBmcm9tUGFnZS5cclxuXHRcdFx0c2V0dGluZ3MuZnJvbVBhZ2UgPSBzZXR0aW5ncy5mcm9tUGFnZSB8fCB0aGlzLmFjdGl2ZVBhZ2U7XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgcGFnZSBiZWZvcmVjaGFuZ2UgZGVmYXVsdCBpcyBwcmV2ZW50ZWQgcmV0dXJuIGVhcmx5XHJcblx0XHRcdGlmICggIXRoaXMuX3RyaWdnZXJQYWdlQmVmb3JlQ2hhbmdlKHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gV2UgYWxsb3cgXCJwYWdlYmVmb3JlY2hhbmdlXCIgb2JzZXJ2ZXJzIHRvIG1vZGlmeSB0aGUgdG8gaW5cclxuXHRcdFx0Ly8gdGhlIHRyaWdnZXIgZGF0YSB0byBhbGxvdyBmb3IgcmVkaXJlY3RzLiBNYWtlIHN1cmUgb3VyIHRvIGlzXHJcblx0XHRcdC8vIHVwZGF0ZWQuIFdlIGFsc28gbmVlZCB0byByZS1ldmFsdWF0ZSB3aGV0aGVyIGl0IGlzIGEgc3RyaW5nLFxyXG5cdFx0XHQvLyBiZWNhdXNlIGFuIG9iamVjdCBjYW4gYWxzbyBiZSByZXBsYWNlZCBieSBhIHN0cmluZ1xyXG5cdFx0XHR0byA9IHRyaWdnZXJEYXRhLnRvUGFnZTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjYWxsZXIgcGFzc2VkIHVzIGEgdXJsLCBjYWxsIGxvYWRQYWdlKClcclxuXHRcdFx0Ly8gdG8gbWFrZSBzdXJlIGl0IGlzIGxvYWRlZCBpbnRvIHRoZSBET00uIFdlJ2xsIGxpc3RlblxyXG5cdFx0XHQvLyB0byB0aGUgcHJvbWlzZSBvYmplY3QgaXQgcmV0dXJucyBzbyB3ZSBrbm93IHdoZW5cclxuXHRcdFx0Ly8gaXQgaXMgZG9uZSBsb2FkaW5nIG9yIGlmIGFuIGVycm9yIG9jdXJyZWQuXHJcblx0XHRcdGlmICggJC50eXBlKHRvKSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHQvLyBTZXQgdGhlIGlzUGFnZVRyYW5zaXRpb25pbmcgZmxhZyB0byBwcmV2ZW50IGFueSByZXF1ZXN0cyBmcm9tXHJcblx0XHRcdFx0Ly8gZW50ZXJpbmcgdGhpcyBtZXRob2Qgd2hpbGUgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBsb2FkaW5nIGEgcGFnZVxyXG5cdFx0XHRcdC8vIG9yIHRyYW5zaXRpb25pbmcuXHJcblx0XHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHRoaXMuX2xvYWRVcmwoIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnRyYW5zaXRpb24oIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHR0cmFuc2l0aW9uOiBmdW5jdGlvbiggdG9QYWdlLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdHZhciBmcm9tUGFnZSwgdXJsLCBwYWdlVXJsLCBmaWxlVXJsLFxyXG5cdFx0XHRcdGFjdGl2ZSwgYWN0aXZlSXNJbml0aWFsUGFnZSxcclxuXHRcdFx0XHRoaXN0b3J5RGlyLCBwYWdlVGl0bGUsIGlzRGlhbG9nLFxyXG5cdFx0XHRcdGFscmVhZHlUaGVyZSwgbmV3UGFnZVRpdGxlLFxyXG5cdFx0XHRcdHBhcmFtcyxcdGNzc1RyYW5zaXRpb25EZWZlcnJlZCxcclxuXHRcdFx0XHRiZWZvcmVUcmFuc2l0aW9uO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBhIHRyYW5zaXRpb24sIHF1ZXVlIHRoZSBjdXJyZW50IHJlcXVlc3QuXHJcblx0XHRcdC8vIFdlJ2xsIGNhbGwgY2hhbmdlUGFnZSgpIG9uY2Ugd2UncmUgZG9uZSB3aXRoIHRoZSBjdXJyZW50IHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gdG8gc2VydmljZSB0aGUgcmVxdWVzdC5cclxuXHRcdFx0aWYgKCBpc1BhZ2VUcmFuc2l0aW9uaW5nICkge1xyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBvbmx5IHF1ZXVlIHRoZSB0byBhbmQgc2V0dGluZ3MgdmFsdWVzIHNvIHRoZSBhcmd1bWVudHNcclxuXHRcdFx0XHQvLyB3b3JrIHdpdGggYSBjYWxsIHRvIHRoZSBjaGFuZ2UgbWV0aG9kXHJcblx0XHRcdFx0cGFnZVRyYW5zaXRpb25RdWV1ZS51bnNoaWZ0KCBbdG9QYWdlLCBzZXR0aW5nc10gKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURUQgLSB0aGlzIGNhbGwgb25seSwgaW4gZmF2b3Igb2YgdGhlIGJlZm9yZSB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIGlmIHRoZSBwYWdlIGJlZm9yZWNoYW5nZSBkZWZhdWx0IGlzIHByZXZlbnRlZCByZXR1cm4gZWFybHlcclxuXHRcdFx0aWYgKCAhdGhpcy5fdHJpZ2dlclBhZ2VCZWZvcmVDaGFuZ2UodG9QYWdlLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJpZ2dlckRhdGEucHJldlBhZ2UgPSBzZXR0aW5ncy5mcm9tUGFnZTtcclxuXHRcdFx0Ly8gaWYgdGhlIChjb250ZW50fHBhZ2UpYmVmb3JldHJhbnNpdGlvbiBkZWZhdWx0IGlzIHByZXZlbnRlZCByZXR1cm4gZWFybHlcclxuXHRcdFx0Ly8gTm90ZSwgd2UgaGF2ZSB0byBjaGVjayBmb3IgYm90aCB0aGUgZGVwcmVjYXRlZCBhbmQgbmV3IGV2ZW50c1xyXG5cdFx0XHRiZWZvcmVUcmFuc2l0aW9uID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImJlZm9yZXRyYW5zaXRpb25cIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0aWYgKGJlZm9yZVRyYW5zaXRpb24uZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0YmVmb3JlVHJhbnNpdGlvbi5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldCB0aGUgaXNQYWdlVHJhbnNpdGlvbmluZyBmbGFnIHRvIHByZXZlbnQgYW55IHJlcXVlc3RzIGZyb21cclxuXHRcdFx0Ly8gZW50ZXJpbmcgdGhpcyBtZXRob2Qgd2hpbGUgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBsb2FkaW5nIGEgcGFnZVxyXG5cdFx0XHQvLyBvciB0cmFuc2l0aW9uaW5nLlxyXG5cdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZmlyc3QtcGFnZSBvZiB0aGUgYXBwbGljYXRpb24sIHdlIG5lZWQgdG8gbWFrZVxyXG5cdFx0XHQvLyBzdXJlIHNldHRpbmdzLmRhdGFVcmwgaXMgc2V0IHRvIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudCB1cmwuIFRoaXMgYWxsb3dzXHJcblx0XHRcdC8vIHVzIHRvIGF2b2lkIGdlbmVyYXRpbmcgYSBkb2N1bWVudCB1cmwgd2l0aCBhbiBpZCBoYXNoIGluIHRoZSBjYXNlIHdoZXJlIHRoZVxyXG5cdFx0XHQvLyBmaXJzdC1wYWdlIG9mIHRoZSBkb2N1bWVudCBoYXMgYW4gaWQgYXR0cmlidXRlIHNwZWNpZmllZC5cclxuXHRcdFx0aWYgKCB0b1BhZ2VbIDAgXSA9PT0gJC5tb2JpbGUuZmlyc3RQYWdlWyAwIF0gJiYgIXNldHRpbmdzLmRhdGFVcmwgKSB7XHJcblx0XHRcdFx0c2V0dGluZ3MuZGF0YVVybCA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRVcmwuaHJlZk5vSGFzaDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVGhlIGNhbGxlciBwYXNzZWQgdXMgYSByZWFsIHBhZ2UgRE9NIGVsZW1lbnQuIFVwZGF0ZSBvdXJcclxuXHRcdFx0Ly8gaW50ZXJuYWwgc3RhdGUgYW5kIHRoZW4gdHJpZ2dlciBhIHRyYW5zaXRpb24gdG8gdGhlIHBhZ2UuXHJcblx0XHRcdGZyb21QYWdlID0gc2V0dGluZ3MuZnJvbVBhZ2U7XHJcblx0XHRcdHVybCA9ICggc2V0dGluZ3MuZGF0YVVybCAmJiAkLm1vYmlsZS5wYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoc2V0dGluZ3MuZGF0YVVybCkgKSB8fFxyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcInVybFwiICk7XHJcblxyXG5cdFx0XHQvLyBUaGUgcGFnZVVybCB2YXIgaXMgdXN1YWxseSB0aGUgc2FtZSBhcyB1cmwsIGV4Y2VwdCB3aGVuIHVybCBpcyBvYnNjdXJlZFxyXG5cdFx0XHQvLyBhcyBhIGRpYWxvZyB1cmwuIHBhZ2VVcmwgYWx3YXlzIGNvbnRhaW5zIHRoZSBmaWxlIHBhdGhcclxuXHRcdFx0cGFnZVVybCA9IHVybDtcclxuXHRcdFx0ZmlsZVVybCA9ICQubW9iaWxlLnBhdGguZ2V0RmlsZVBhdGgoIHVybCApO1xyXG5cdFx0XHRhY3RpdmUgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpO1xyXG5cdFx0XHRhY3RpdmVJc0luaXRpYWxQYWdlID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA9PT0gMDtcclxuXHRcdFx0aGlzdG9yeURpciA9IDA7XHJcblx0XHRcdHBhZ2VUaXRsZSA9IGRvY3VtZW50LnRpdGxlO1xyXG5cdFx0XHRpc0RpYWxvZyA9ICggc2V0dGluZ3Mucm9sZSA9PT0gXCJkaWFsb2dcIiB8fFxyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcInJvbGVcIiApID09PSBcImRpYWxvZ1wiICkgJiZcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJkaWFsb2dcIiApICE9PSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gQnkgZGVmYXVsdCwgd2UgcHJldmVudCBjaGFuZ2VQYWdlIHJlcXVlc3RzIHdoZW4gdGhlIGZyb21QYWdlIGFuZCB0b1BhZ2VcclxuXHRcdFx0Ly8gYXJlIHRoZSBzYW1lIGVsZW1lbnQsIGJ1dCBmb2xrcyB0aGF0IGdlbmVyYXRlIGNvbnRlbnRcclxuXHRcdFx0Ly8gbWFudWFsbHkvZHluYW1pY2FsbHkgYW5kIHJldXNlIHBhZ2VzIHdhbnQgdG8gYmUgYWJsZSB0byB0cmFuc2l0aW9uIHRvXHJcblx0XHRcdC8vIHRoZSBzYW1lIHBhZ2UuIFRvIGFsbG93IHRoaXMsIHRoZXkgd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGUgZGVmYXVsdFxyXG5cdFx0XHQvLyB2YWx1ZSBvZiBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbiB0byB0cnVlLCAqT1IqLCBwYXNzIGl0IGluIGFzIGFuXHJcblx0XHRcdC8vIG9wdGlvbiB3aGVuIHRoZXkgbWFudWFsbHkgY2FsbCBjaGFuZ2VQYWdlKCkuIEl0IHNob3VsZCBiZSBub3RlZCB0aGF0XHJcblx0XHRcdC8vIG91ciBkZWZhdWx0IHRyYW5zaXRpb24gYW5pbWF0aW9ucyBhc3N1bWUgdGhhdCB0aGUgZm9ybVBhZ2UgYW5kIHRvUGFnZVxyXG5cdFx0XHQvLyBhcmUgZGlmZmVyZW50IGVsZW1lbnRzLCBzbyB0aGV5IG1heSBiZWhhdmUgdW5leHBlY3RlZGx5LiBJdCBpcyB1cCB0b1xyXG5cdFx0XHQvLyB0aGUgZGV2ZWxvcGVyIHRoYXQgdHVybnMgb24gdGhlIGFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uYSBvcHRpb24gdG9cclxuXHRcdFx0Ly8gZWl0aGVyIHR1cm4gb2ZmIHRyYW5zaXRpb24gYW5pbWF0aW9ucywgb3IgbWFrZSBzdXJlIHRoYXQgYW4gYXBwcm9wcmlhdGVcclxuXHRcdFx0Ly8gYW5pbWF0aW9uIHRyYW5zaXRpb24gaXMgdXNlZC5cclxuXHRcdFx0aWYgKCBmcm9tUGFnZSAmJiBmcm9tUGFnZVswXSA9PT0gdG9QYWdlWzBdICYmXHJcblx0XHRcdFx0IXNldHRpbmdzLmFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uICkge1xyXG5cclxuXHRcdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcInRyYW5zaXRpb25cIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiY2hhbmdlXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHRcdC8vIEV2ZW4gaWYgdGhlcmUgaXMgbm8gcGFnZSBjaGFuZ2UgdG8gYmUgZG9uZSwgd2Ugc2hvdWxkIGtlZXAgdGhlXHJcblx0XHRcdFx0Ly8gdXJsSGlzdG9yeSBpbiBzeW5jIHdpdGggdGhlIGhhc2ggY2hhbmdlc1xyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MuZnJvbUhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmRpcmVjdCh7IHVybDogdXJsIH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgcGFnZSB3ZSBhcmUgZ2l2ZW4gaGFzIGFscmVhZHkgYmVlbiBlbmhhbmNlZC5cclxuXHRcdFx0dG9QYWdlLnBhZ2UoeyByb2xlOiBzZXR0aW5ncy5yb2xlIH0pO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNoYW5nZVBhZ2UgcmVxdWVzdCB3YXMgc2VudCBmcm9tIGEgaGFzaENoYW5nZSBldmVudCwgY2hlY2sgdG9cclxuXHRcdFx0Ly8gc2VlIGlmIHRoZSBwYWdlIGlzIGFscmVhZHkgd2l0aGluIHRoZSB1cmxIaXN0b3J5IHN0YWNrLiBJZiBzbywgd2UnbGxcclxuXHRcdFx0Ly8gYXNzdW1lIHRoZSB1c2VyIGhpdCB0aGUgZm9yd2FyZC9iYWNrIGJ1dHRvbiBhbmQgd2lsbCB0cnkgdG8gbWF0Y2ggdGhlXHJcblx0XHRcdC8vIHRyYW5zaXRpb24gYWNjb3JkaW5nbHkuXHJcblx0XHRcdGlmICggc2V0dGluZ3MuZnJvbUhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0aGlzdG9yeURpciA9IHNldHRpbmdzLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgPyAtMSA6IDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEtpbGwgdGhlIGtleWJvYXJkLlxyXG5cdFx0XHQvLyBYWFhfamJsYXM6IFdlIG5lZWQgdG8gc3RvcCBjcmF3bGluZyB0aGUgZW50aXJlIGRvY3VtZW50IHRvIGtpbGwgZm9jdXMuXHJcblx0XHRcdC8vICAgICAgICAgICAgSW5zdGVhZCwgd2Ugc2hvdWxkIGJlIHRyYWNraW5nIGZvY3VzIHdpdGggYSBkZWxlZ2F0ZSgpXHJcblx0XHRcdC8vICAgICAgICAgICAgaGFuZGxlciBzbyB3ZSBhbHJlYWR5IGhhdmUgdGhlIGVsZW1lbnQgaW4gaGFuZCBhdCB0aGlzXHJcblx0XHRcdC8vICAgICAgICAgICAgcG9pbnQuXHJcblx0XHRcdC8vIFdyYXAgdGhpcyBpbiBhIHRyeS9jYXRjaCBibG9jayBzaW5jZSBJRTkgdGhyb3cgXCJVbnNwZWNpZmllZCBlcnJvclwiIGlmXHJcblx0XHRcdC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaXMgdW5kZWZpbmVkIHdoZW4gd2UgYXJlIGluIGFuIElGcmFtZS5cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiZcclxuXHRcdFx0XHRcdGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIgKSB7XHJcblxyXG5cdFx0XHRcdFx0JCggZG9jdW1lbnQuYWN0aXZlRWxlbWVudCApLmJsdXIoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JCggXCJpbnB1dDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMsIHNlbGVjdDpmb2N1c1wiICkuYmx1cigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCggZSApIHt9XHJcblxyXG5cdFx0XHQvLyBSZWNvcmQgd2hldGhlciB3ZSBhcmUgYXQgYSBwbGFjZSBpbiBoaXN0b3J5IHdoZXJlIGEgZGlhbG9nIHVzZWQgdG8gYmUgLVxyXG5cdFx0XHQvLyBpZiBzbywgZG8gbm90IGFkZCBhIG5ldyBoaXN0b3J5IGVudHJ5IGFuZCBkbyBub3QgY2hhbmdlIHRoZSBoYXNoIGVpdGhlclxyXG5cdFx0XHRhbHJlYWR5VGhlcmUgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIGRpc3BsYXlpbmcgdGhlIHBhZ2UgYXMgYSBkaWFsb2csIHdlIGRvbid0IHdhbnQgdGhlIHVybFxyXG5cdFx0XHQvLyBmb3IgdGhlIGRpYWxvZyBjb250ZW50IHRvIGJlIHVzZWQgaW4gdGhlIGhhc2guIEluc3RlYWQsIHdlIHdhbnRcclxuXHRcdFx0Ly8gdG8gYXBwZW5kIHRoZSBkaWFsb2dIYXNoS2V5IHRvIHRoZSB1cmwgb2YgdGhlIGN1cnJlbnQgcGFnZS5cclxuXHRcdFx0aWYgKCBpc0RpYWxvZyAmJiBhY3RpdmUgKSB7XHJcblx0XHRcdFx0Ly8gb24gdGhlIGluaXRpYWwgcGFnZSBsb2FkIGFjdGl2ZS51cmwgaXMgdW5kZWZpbmVkIGFuZCBpbiB0aGF0IGNhc2VcclxuXHRcdFx0XHQvLyBzaG91bGQgYmUgYW4gZW1wdHkgc3RyaW5nLiBNb3ZpbmcgdGhlIHVuZGVmaW5lZCAtPiBlbXB0eSBzdHJpbmcgYmFja1xyXG5cdFx0XHRcdC8vIGludG8gdXJsSGlzdG9yeS5hZGROZXcgc2VlbWVkIGltcHJ1ZGVudCBnaXZlbiB1bmRlZmluZWQgYmV0dGVyXHJcblx0XHRcdFx0Ly8gcmVwcmVzZW50cyB0aGUgdXJsIHN0YXRlXHJcblxyXG5cdFx0XHRcdC8vIElmIHdlIGFyZSBhdCBhIHBsYWNlIGluIGhpc3RvcnkgdGhhdCBvbmNlIGJlbG9uZ2VkIHRvIGEgZGlhbG9nLCByZXVzZVxyXG5cdFx0XHRcdC8vIHRoaXMgc3RhdGUgd2l0aG91dCBhZGRpbmcgdG8gdXJsSGlzdG9yeSBhbmQgd2l0aG91dCBtb2RpZnlpbmcgdGhlXHJcblx0XHRcdFx0Ly8gaGFzaC4gSG93ZXZlciwgaWYgYSBkaWFsb2cgaXMgYWxyZWFkeSBkaXNwbGF5ZWQgYXQgdGhpcyBwb2ludCwgYW5kXHJcblx0XHRcdFx0Ly8gd2UncmUgYWJvdXQgdG8gZGlzcGxheSBhbm90aGVyIGRpYWxvZywgdGhlbiB3ZSBtdXN0IGFkZCBhbm90aGVyIGhhc2hcclxuXHRcdFx0XHQvLyBhbmQgaGlzdG9yeSBlbnRyeSBvbiB0b3Agc28gdGhhdCBvbmUgbWF5IG5hdmlnYXRlIGJhY2sgdG8gdGhlXHJcblx0XHRcdFx0Ly8gb3JpZ2luYWwgZGlhbG9nXHJcblx0XHRcdFx0aWYgKCBhY3RpdmUudXJsICYmXHJcblx0XHRcdFx0XHRhY3RpdmUudXJsLmluZGV4T2YoICQubW9iaWxlLmRpYWxvZ0hhc2hLZXkgKSA+IC0xICYmXHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZVBhZ2UgJiZcclxuXHRcdFx0XHRcdCF0aGlzLmFjdGl2ZVBhZ2UuaGFzQ2xhc3MoIFwidWktZGlhbG9nXCIgKSAmJlxyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgKSB7XHJcblxyXG5cdFx0XHRcdFx0c2V0dGluZ3MuY2hhbmdlSGFzaCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0YWxyZWFkeVRoZXJlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIE5vcm1hbGx5LCB3ZSB0YWNrIG9uIGEgZGlhbG9nIGhhc2gga2V5LCBidXQgaWYgdGhpcyBpcyB0aGUgbG9jYXRpb25cclxuXHRcdFx0XHQvLyBvZiBhIHN0YWxlIGRpYWxvZywgd2UgcmV1c2UgdGhlIFVSTCBmcm9tIHRoZSBlbnRyeVxyXG5cdFx0XHRcdHVybCA9ICggYWN0aXZlLnVybCB8fCBcIlwiICk7XHJcblxyXG5cdFx0XHRcdC8vIGFjY291bnQgZm9yIGFic29sdXRlIHVybHMgaW5zdGVhZCBvZiBqdXN0IHJlbGF0aXZlIHVybHMgdXNlIGFzIGhhc2hlc1xyXG5cdFx0XHRcdGlmICggIWFscmVhZHlUaGVyZSAmJiB1cmwuaW5kZXhPZihcIiNcIikgPiAtMSApIHtcclxuXHRcdFx0XHRcdHVybCArPSAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5O1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR1cmwgKz0gXCIjXCIgKyAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGl0bGUgZWxlbWVudCB3YXNuJ3QgZm91bmQsIHRyeSB0aGUgcGFnZSBkaXYgZGF0YSBhdHRyIHRvb1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgZGVlcC1saW5rIG9yIGEgcmVsb2FkICggYWN0aXZlID09PSB1bmRlZmluZWQgKSB0aGVuIGp1c3RcclxuXHRcdFx0Ly8gdXNlIHBhZ2VUaXRsZVxyXG5cdFx0XHRuZXdQYWdlVGl0bGUgPSAoICFhY3RpdmUgKSA/IHBhZ2VUaXRsZSA6IHRvUGFnZS5qcW1EYXRhKCBcInRpdGxlXCIgKSB8fFxyXG5cdFx0XHRcdHRvUGFnZS5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmluZCggXCIudWktdGl0bGVcIiApLnRleHQoKTtcclxuXHRcdFx0aWYgKCAhIW5ld1BhZ2VUaXRsZSAmJiBwYWdlVGl0bGUgPT09IGRvY3VtZW50LnRpdGxlICkge1xyXG5cdFx0XHRcdHBhZ2VUaXRsZSA9IG5ld1BhZ2VUaXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICF0b1BhZ2UuanFtRGF0YSggXCJ0aXRsZVwiICkgKSB7XHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwidGl0bGVcIiwgcGFnZVRpdGxlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgdHJhbnNpdGlvbiBkZWZpbmVkLlxyXG5cdFx0XHRzZXR0aW5ncy50cmFuc2l0aW9uID0gc2V0dGluZ3MudHJhbnNpdGlvbiB8fFxyXG5cdFx0XHRcdCggKCBoaXN0b3J5RGlyICYmICFhY3RpdmVJc0luaXRpYWxQYWdlICkgPyBhY3RpdmUudHJhbnNpdGlvbiA6IHVuZGVmaW5lZCApIHx8XHJcblx0XHRcdFx0KCBpc0RpYWxvZyA/ICQubW9iaWxlLmRlZmF1bHREaWFsb2dUcmFuc2l0aW9uIDogJC5tb2JpbGUuZGVmYXVsdFBhZ2VUcmFuc2l0aW9uICk7XHJcblxyXG5cdFx0XHQvL2FkZCBwYWdlIHRvIGhpc3Rvcnkgc3RhY2sgaWYgaXQncyBub3QgYmFjayBvciBmb3J3YXJkXHJcblx0XHRcdGlmICggIWhpc3RvcnlEaXIgJiYgYWxyZWFkeVRoZXJlICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCkucGFnZVVybCA9IHBhZ2VVcmw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldCB0aGUgbG9jYXRpb24gaGFzaC5cclxuXHRcdFx0aWYgKCB1cmwgJiYgIXNldHRpbmdzLmZyb21IYXNoQ2hhbmdlICkge1xyXG5cclxuXHRcdFx0XHQvLyByZWJ1aWxkaW5nIHRoZSBoYXNoIGhlcmUgc2luY2Ugd2UgbG9vc2UgaXQgZWFybGllciBvblxyXG5cdFx0XHRcdC8vIFRPRE8gcHJlc2VydmUgdGhlIG9yaWdpbmFsbHkgcGFzc2VkIGluIHBhdGhcclxuXHRcdFx0XHRpZiAoICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggdXJsICkgJiYgdXJsLmluZGV4T2YoIFwiI1wiICkgPCAwICkge1xyXG5cdFx0XHRcdFx0dXJsID0gXCIjXCIgKyB1cmw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUT0RPIHRoZSBwcm9wZXJ0eSBuYW1lcyBoZXJlIGFyZSBqdXN0IHNpbGx5XHJcblx0XHRcdFx0cGFyYW1zID0ge1xyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogc2V0dGluZ3MudHJhbnNpdGlvbixcclxuXHRcdFx0XHRcdHRpdGxlOiBwYWdlVGl0bGUsXHJcblx0XHRcdFx0XHRwYWdlVXJsOiBwYWdlVXJsLFxyXG5cdFx0XHRcdFx0cm9sZTogc2V0dGluZ3Mucm9sZVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MuY2hhbmdlSGFzaCAhPT0gZmFsc2UgJiYgJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZSggdGhpcy53aW5kb3dbIDAgXS5lbmNvZGVVUkkoIHVybCApLCBwYXJhbXMsIHRydWUpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHRvUGFnZVsgMCBdICE9PSAkLm1vYmlsZS5maXJzdFBhZ2VbIDAgXSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWRkKCB1cmwsIHBhcmFtcyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9zZXQgcGFnZSB0aXRsZVxyXG5cdFx0XHRkb2N1bWVudC50aXRsZSA9IHBhZ2VUaXRsZTtcclxuXHJcblx0XHRcdC8vc2V0IFwidG9QYWdlXCIgYXMgYWN0aXZlUGFnZSBkZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRcdCQubW9iaWxlLmFjdGl2ZVBhZ2UgPSB0b1BhZ2U7XHJcblxyXG5cdFx0XHQvL25ldyB3YXkgdG8gaGFuZGxlIGFjdGl2ZVBhZ2VcclxuXHRcdFx0dGhpcy5hY3RpdmVQYWdlID0gdG9QYWdlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgbmF2aWdhdGluZyBiYWNrIGluIHRoZSBVUkwgaGlzdG9yeSwgc2V0IHJldmVyc2UgYWNjb3JkaW5nbHkuXHJcblx0XHRcdHNldHRpbmdzLnJldmVyc2UgPSBzZXR0aW5ncy5yZXZlcnNlIHx8IGhpc3RvcnlEaXIgPCAwO1xyXG5cclxuXHRcdFx0Y3NzVHJhbnNpdGlvbkRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHRcdFx0dGhpcy5fY3NzVHJhbnNpdGlvbih0b1BhZ2UsIGZyb21QYWdlLCB7XHJcblx0XHRcdFx0dHJhbnNpdGlvbjogc2V0dGluZ3MudHJhbnNpdGlvbixcclxuXHRcdFx0XHRyZXZlcnNlOiBzZXR0aW5ncy5yZXZlcnNlLFxyXG5cdFx0XHRcdGRlZmVycmVkOiBjc3NUcmFuc2l0aW9uRGVmZXJyZWRcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRjc3NUcmFuc2l0aW9uRGVmZXJyZWQuZG9uZSgkLnByb3h5KGZ1bmN0aW9uKCBuYW1lLCByZXZlcnNlLCAkdG8sICRmcm9tLCBhbHJlYWR5Rm9jdXNlZCApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB0aGVyZSdzIGEgZHVwbGljYXRlQ2FjaGVkUGFnZSwgcmVtb3ZlIGl0IGZyb20gdGhlIERPTSBub3cgdGhhdCBpdCdzIGhpZGRlblxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MuZHVwbGljYXRlQ2FjaGVkUGFnZSApIHtcclxuXHRcdFx0XHRcdHNldHRpbmdzLmR1cGxpY2F0ZUNhY2hlZFBhZ2UucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBkZXNwaXRlIHZpc2liaWxpdHk6IGhpZGRlbiBhZGRyZXNzZXMgaXNzdWUgIzI5NjVcclxuXHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzI5NjVcclxuXHRcdFx0XHRpZiAoICFhbHJlYWR5Rm9jdXNlZCApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLmZvY3VzUGFnZSggdG9QYWdlICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9yZWxlYXNlVHJhbnNpdGlvbkxvY2soKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwidHJhbnNpdGlvblwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJjaGFuZ2VcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBkZXRlcm1pbmUgdGhlIGN1cnJlbnQgYmFzZSB1cmxcclxuXHRcdF9maW5kQmFzZVdpdGhEZWZhdWx0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNsb3Nlc3RCYXNlID0gKCB0aGlzLmFjdGl2ZVBhZ2UgJiZcclxuXHRcdFx0JC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoIHRoaXMuYWN0aXZlUGFnZSApICk7XHJcblx0XHRyZXR1cm4gY2xvc2VzdEJhc2UgfHwgJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaDtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gVGhlIGZvbGxvd2luZyBoYW5kbGVycyBzaG91bGQgYmUgYm91bmQgYWZ0ZXIgbW9iaWxlaW5pdCBoYXMgYmVlbiB0cmlnZ2VyZWRcclxuXHQvLyB0aGUgZm9sbG93aW5nIGRlZmVycmVkIGlzIHJlc29sdmVkIGluIHRoZSBpbml0IGZpbGVcclxuXHQkLm1vYmlsZS5uYXZyZWFkeURlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHQvL3RoZXNlIHZhcmlhYmxlcyBtYWtlIGFsbCBwYWdlIGNvbnRhaW5lcnMgdXNlIHRoZSBzYW1lIHF1ZXVlIGFuZCBvbmx5IG5hdmlnYXRlIG9uZSBhdCBhIHRpbWVcclxuXHQvLyBxdWV1ZSB0byBob2xkIHNpbXVsdGFuaW91cyBwYWdlIHRyYW5zaXRpb25zXHJcblx0dmFyIHBhZ2VUcmFuc2l0aW9uUXVldWUgPSBbXSxcclxuXHJcblx0XHQvLyBpbmRpY2F0ZXMgd2hldGhlciBvciBub3QgcGFnZSBpcyBpbiBwcm9jZXNzIG9mIHRyYW5zaXRpb25pbmdcclxuXHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdC8vIHJlc29sdmVkIG9uIGRvbXJlYWR5XHJcblx0dmFyIGRvbXJlYWR5RGVmZXJyZWQgPSAkLkRlZmVycmVkKCksXHJcblxyXG5cdFx0Ly8gcmVzb2x2ZWQgYW5kIG51bGxlZCBvbiB3aW5kb3cubG9hZCgpXHJcblx0XHRsb2FkRGVmZXJyZWQgPSAkLkRlZmVycmVkKCksXHJcblxyXG5cdFx0Ly8gZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgYWJvdmUgZGVmZXJyZWRcclxuXHRcdHBhZ2VJc0Z1bGx5TG9hZGVkID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHQvLyBSZXNvbHZlIGFuZCBudWxsIHRoZSBkZWZlcnJlZFxyXG5cdFx0XHRsb2FkRGVmZXJyZWQucmVzb2x2ZSgpO1xyXG5cdFx0XHRsb2FkRGVmZXJyZWQgPSBudWxsO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkb2N1bWVudFVybCA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRVcmwsXHJcblxyXG5cdFx0Ly8gdXNlZCB0byB0cmFjayBsYXN0IHZjbGlja2VkIGVsZW1lbnQgdG8gbWFrZSBzdXJlIGl0cyB2YWx1ZSBpcyBhZGRlZCB0byBmb3JtIGRhdGFcclxuXHRcdCRsYXN0VkNsaWNrZWQgPSBudWxsO1xyXG5cclxuXHQvKiBFdmVudCBCaW5kaW5ncyAtIGhhc2hjaGFuZ2UsIHN1Ym1pdCwgYW5kIGNsaWNrICovXHJcblx0ZnVuY3Rpb24gZmluZENsb3Nlc3RMaW5rKCBlbGUgKVx0e1xyXG5cdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdC8vIExvb2sgZm9yIHRoZSBjbG9zZXN0IGVsZW1lbnQgd2l0aCBhIG5vZGVOYW1lIG9mIFwiYVwiLlxyXG5cdFx0XHQvLyBOb3RlIHRoYXQgd2UgYXJlIGNoZWNraW5nIGlmIHdlIGhhdmUgYSB2YWxpZCBub2RlTmFtZVxyXG5cdFx0XHQvLyBiZWZvcmUgYXR0ZW1wdGluZyB0byBhY2Nlc3MgaXQuIFRoaXMgaXMgYmVjYXVzZSB0aGVcclxuXHRcdFx0Ly8gbm9kZSB3ZSBnZXQgY2FsbGVkIHdpdGggY291bGQgaGF2ZSBvcmlnaW5hdGVkIGZyb20gd2l0aGluXHJcblx0XHRcdC8vIGFuIGVtYmVkZGVkIFNWRyBkb2N1bWVudCB3aGVyZSBzb21lIHN5bWJvbCBpbnN0YW5jZSBlbGVtZW50c1xyXG5cdFx0XHQvLyBkb24ndCBoYXZlIG5vZGVOYW1lIGRlZmluZWQgb24gdGhlbSwgb3Igc3RyaW5ncyBhcmUgb2YgdHlwZVxyXG5cdFx0XHQvLyBTVkdBbmltYXRlZFN0cmluZy5cclxuXHRcdFx0aWYgKCAoIHR5cGVvZiBlbGUubm9kZU5hbWUgPT09IFwic3RyaW5nXCIgKSAmJiBlbGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhXCIgKSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlID0gZWxlLnBhcmVudE5vZGU7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZWxlO1xyXG5cdH1cclxuXHJcblx0JC5tb2JpbGUubG9hZFBhZ2UgPSBmdW5jdGlvbiggdXJsLCBvcHRzICkge1xyXG5cdFx0dmFyIGNvbnRhaW5lcjtcclxuXHJcblx0XHRvcHRzID0gb3B0cyB8fCB7fTtcclxuXHRcdGNvbnRhaW5lciA9ICggb3B0cy5wYWdlQ29udGFpbmVyIHx8ICQubW9iaWxlLnBhZ2VDb250YWluZXIgKTtcclxuXHJcblx0XHQvLyBjcmVhdGUgdGhlIGRlZmVycmVkIHRoYXQgd2lsbCBiZSBzdXBwbGllZCB0byBsb2FkUGFnZSBjYWxsZXJzXHJcblx0XHQvLyBhbmQgcmVzb2x2ZWQgYnkgdGhlIGNvbnRlbnQgd2lkZ2V0J3MgbG9hZCBtZXRob2RcclxuXHRcdG9wdHMuZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdFx0Ly8gUHJlZmVycmluZyB0byBhbGxvdyBleGNlcHRpb25zIGZvciB1bmluaXRpYWxpemVkIG9wdHMucGFnZUNvbnRhaW5lclxyXG5cdFx0Ly8gd2lkZ2V0cyBzbyB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gZm9yY2UgaW5pdCBoZXJlIGZvciB1c2Vyc1xyXG5cdFx0Y29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwibG9hZFwiLCB1cmwsIG9wdHMgKTtcclxuXHJcblx0XHQvLyBwcm92aWRlIHRoZSBkZWZlcnJlZFxyXG5cdFx0cmV0dXJuIG9wdHMuZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdH07XHJcblxyXG5cdC8vZGVmaW5lIHZhcnMgZm9yIGludGVyYWwgdXNlXHJcblxyXG5cdC8qIGludGVybmFsIHV0aWxpdHkgZnVuY3Rpb25zICovXHJcblxyXG5cdC8vIE5PVEUgSXNzdWUgIzQ5NTAgQW5kcm9pZCBwaG9uZWdhcCBkb2Vzbid0IG5hdmlnYXRlIGJhY2sgcHJvcGVybHlcclxuXHQvLyAgICAgIHdoZW4gYSBmdWxsIHBhZ2UgcmVmcmVzaCBoYXMgdGFrZW4gcGxhY2UuIEl0IGFwcGVhcnMgdGhhdCBoYXNoY2hhbmdlXHJcblx0Ly8gICAgICBhbmQgcmVwbGFjZXN0YXRlIGhpc3RvcnkgYWx0ZXJhdGlvbnMgd29yayBmaW5lIGJ1dCB3ZSBuZWVkIHRvIHN1cHBvcnRcclxuXHQvLyAgICAgIGJvdGggZm9ybXMgb2YgaGlzdG9yeSB0cmF2ZXJzYWwgaW4gb3VyIGNvZGUgdGhhdCB1c2VzIGJhY2t3YXJkIGhpc3RvcnlcclxuXHQvLyAgICAgIG1vdmVtZW50XHJcblx0JC5tb2JpbGUuYmFjayA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG5hdiA9IHdpbmRvdy5uYXZpZ2F0b3I7XHJcblxyXG5cdFx0Ly8gaWYgdGhlIHNldHRpbmcgaXMgb24gYW5kIHRoZSBuYXZpZ2F0b3Igb2JqZWN0IGlzXHJcblx0XHQvLyBhdmFpbGFibGUgdXNlIHRoZSBwaG9uZWdhcCBuYXZpZ2F0aW9uIGNhcGFiaWxpdHlcclxuXHRcdGlmICggdGhpcy5waG9uZWdhcE5hdmlnYXRpb25FbmFibGVkICYmXHJcblx0XHRcdG5hdiAmJlxyXG5cdFx0XHRuYXYuYXBwICYmXHJcblx0XHRcdG5hdi5hcHAuYmFja0hpc3RvcnkgKSB7XHJcblx0XHRcdG5hdi5hcHAuYmFja0hpc3RvcnkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lciggXCJiYWNrXCIgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBEaXJlY3QgZm9jdXMgdG8gdGhlIHBhZ2UgdGl0bGUsIG9yIG90aGVyd2lzZSBmaXJzdCBmb2N1c2FibGUgZWxlbWVudFxyXG5cdCQubW9iaWxlLmZvY3VzUGFnZSA9IGZ1bmN0aW9uICggcGFnZSApIHtcclxuXHRcdHZhciBhdXRvZm9jdXMgPSBwYWdlLmZpbmQoIFwiW2F1dG9mb2N1c11cIiApLFxyXG5cdFx0XHRwYWdlVGl0bGUgPSBwYWdlLmZpbmQoIFwiLnVpLXRpdGxlOmVxKDApXCIgKTtcclxuXHJcblx0XHRpZiAoIGF1dG9mb2N1cy5sZW5ndGggKSB7XHJcblx0XHRcdGF1dG9mb2N1cy5mb2N1cygpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBwYWdlVGl0bGUubGVuZ3RoICkge1xyXG5cdFx0XHRwYWdlVGl0bGUuZm9jdXMoKTtcclxuXHRcdH0gZWxzZXtcclxuXHRcdFx0cGFnZS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIE5vLW9wIGltcGxlbWVudGF0aW9uIG9mIHRyYW5zaXRpb24gZGVncmFkYXRpb25cclxuXHQkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiA9ICQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uIHx8IGZ1bmN0aW9uKCB0cmFuc2l0aW9uICkge1xyXG5cdFx0cmV0dXJuIHRyYW5zaXRpb247XHJcblx0fTtcclxuXHJcblx0Ly8gRXhwb3NlZCAkLm1vYmlsZSBtZXRob2RzXHJcblxyXG5cdCQubW9iaWxlLmNoYW5nZVBhZ2UgPSBmdW5jdGlvbiggdG8sIG9wdGlvbnMgKSB7XHJcblx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiY2hhbmdlXCIsIHRvLCBvcHRpb25zICk7XHJcblx0fTtcclxuXHJcblx0JC5tb2JpbGUuY2hhbmdlUGFnZS5kZWZhdWx0cyA9IHtcclxuXHRcdHRyYW5zaXRpb246IHVuZGVmaW5lZCxcclxuXHRcdHJldmVyc2U6IGZhbHNlLFxyXG5cdFx0Y2hhbmdlSGFzaDogdHJ1ZSxcclxuXHRcdGZyb21IYXNoQ2hhbmdlOiBmYWxzZSxcclxuXHRcdHJvbGU6IHVuZGVmaW5lZCwgLy8gQnkgZGVmYXVsdCB3ZSByZWx5IG9uIHRoZSByb2xlIGRlZmluZWQgYnkgdGhlIEBkYXRhLXJvbGUgYXR0cmlidXRlLlxyXG5cdFx0ZHVwbGljYXRlQ2FjaGVkUGFnZTogdW5kZWZpbmVkLFxyXG5cdFx0cGFnZUNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cdFx0c2hvd0xvYWRNc2c6IHRydWUsIC8vbG9hZGluZyBtZXNzYWdlIHNob3dzIGJ5IGRlZmF1bHQgd2hlbiBwYWdlcyBhcmUgYmVpbmcgZmV0Y2hlZCBkdXJpbmcgY2hhbmdlUGFnZVxyXG5cdFx0ZGF0YVVybDogdW5kZWZpbmVkLFxyXG5cdFx0ZnJvbVBhZ2U6IHVuZGVmaW5lZCxcclxuXHRcdGFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdCQubW9iaWxlLl9yZWdpc3RlckludGVybmFsRXZlbnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZ2V0QWpheEZvcm1EYXRhID0gZnVuY3Rpb24oICRmb3JtLCBjYWxjdWxhdGVPbmx5ICkge1xyXG5cdFx0XHR2YXIgdXJsLCByZXQgPSB0cnVlLCBmb3JtRGF0YSwgdmNsaWNrZWROYW1lLCBtZXRob2Q7XHJcblx0XHRcdGlmICggISQubW9iaWxlLmFqYXhFbmFibGVkIHx8XHJcblx0XHRcdFx0XHQvLyB0ZXN0IHRoYXQgdGhlIGZvcm0gaXMsIGl0c2VsZiwgYWpheCBmYWxzZVxyXG5cdFx0XHRcdFx0JGZvcm0uaXMoIFwiOmpxbURhdGEoYWpheD0nZmFsc2UnKVwiICkgfHxcclxuXHRcdFx0XHRcdC8vIHRlc3QgdGhhdCAkLm1vYmlsZS5pZ25vcmVDb250ZW50RW5hYmxlZCBpcyBzZXQgYW5kXHJcblx0XHRcdFx0XHQvLyB0aGUgZm9ybSBvciBvbmUgb2YgaXQncyBwYXJlbnRzIGlzIGFqYXg9ZmFsc2VcclxuXHRcdFx0XHRcdCEkZm9ybS5qcW1IaWphY2thYmxlKCkubGVuZ3RoIHx8XHJcblx0XHRcdFx0XHQkZm9ybS5hdHRyKCBcInRhcmdldFwiICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR1cmwgPSAoICRsYXN0VkNsaWNrZWQgJiYgJGxhc3RWQ2xpY2tlZC5hdHRyKCBcImZvcm1hY3Rpb25cIiApICkgfHxcclxuXHRcdFx0XHQkZm9ybS5hdHRyKCBcImFjdGlvblwiICk7XHJcblx0XHRcdG1ldGhvZCA9ICggJGZvcm0uYXR0ciggXCJtZXRob2RcIiApIHx8IFwiZ2V0XCIgKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0Ly8gSWYgbm8gYWN0aW9uIGlzIHNwZWNpZmllZCwgYnJvd3NlcnMgZGVmYXVsdCB0byB1c2luZyB0aGVcclxuXHRcdFx0Ly8gVVJMIG9mIHRoZSBkb2N1bWVudCBjb250YWluaW5nIHRoZSBmb3JtLiBTaW5jZSB3ZSBkeW5hbWljYWxseVxyXG5cdFx0XHQvLyBwdWxsIGluIHBhZ2VzIGZyb20gZXh0ZXJuYWwgZG9jdW1lbnRzLCB0aGUgZm9ybSBzaG91bGQgc3VibWl0XHJcblx0XHRcdC8vIHRvIHRoZSBVUkwgZm9yIHRoZSBzb3VyY2UgZG9jdW1lbnQgb2YgdGhlIHBhZ2UgY29udGFpbmluZ1xyXG5cdFx0XHQvLyB0aGUgZm9ybS5cclxuXHRcdFx0aWYgKCAhdXJsICkge1xyXG5cdFx0XHRcdC8vIEdldCB0aGUgQGRhdGEtdXJsIGZvciB0aGUgcGFnZSBjb250YWluaW5nIHRoZSBmb3JtLlxyXG5cdFx0XHRcdHVybCA9ICQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCAkZm9ybSApO1xyXG5cclxuXHRcdFx0XHQvLyBOT1RFOiBJZiB0aGUgbWV0aG9kIGlzIFwiZ2V0XCIsIHdlIG5lZWQgdG8gc3RyaXAgb2ZmIHRoZSBxdWVyeSBzdHJpbmdcclxuXHRcdFx0XHQvLyBiZWNhdXNlIGl0IHdpbGwgZ2V0IHJlcGxhY2VkIHdpdGggdGhlIG5ldyBmb3JtIGRhdGEuIFNlZSBpc3N1ZSAjNTcxMC5cclxuXHRcdFx0XHRpZiAoIG1ldGhvZCA9PT0gXCJnZXRcIiApIHtcclxuXHRcdFx0XHRcdHVybCA9ICQubW9iaWxlLnBhdGgucGFyc2VVcmwoIHVybCApLmhyZWZOb1NlYXJjaDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggdXJsID09PSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoICkge1xyXG5cdFx0XHRcdFx0Ly8gVGhlIHVybCB3ZSBnb3QgYmFjayBtYXRjaGVzIHRoZSBkb2N1bWVudCBiYXNlLFxyXG5cdFx0XHRcdFx0Ly8gd2hpY2ggbWVhbnMgdGhlIHBhZ2UgbXVzdCBiZSBhbiBpbnRlcm5hbC9lbWJlZGRlZCBwYWdlLFxyXG5cdFx0XHRcdFx0Ly8gc28gZGVmYXVsdCB0byB1c2luZyB0aGUgYWN0dWFsIGRvY3VtZW50IHVybCBhcyBhIGJyb3dzZXJcclxuXHRcdFx0XHRcdC8vIHdvdWxkLlxyXG5cdFx0XHRcdFx0dXJsID0gZG9jdW1lbnRVcmwuaHJlZk5vU2VhcmNoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dXJsID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoICB1cmwsICQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCAkZm9ybSApICk7XHJcblxyXG5cdFx0XHRpZiAoICggJC5tb2JpbGUucGF0aC5pc0V4dGVybmFsKCB1cmwgKSAmJiAhJC5tb2JpbGUucGF0aC5pc1Blcm1pdHRlZENyb3NzRG9tYWluUmVxdWVzdCggZG9jdW1lbnRVcmwsIHVybCApICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICFjYWxjdWxhdGVPbmx5ICkge1xyXG5cdFx0XHRcdGZvcm1EYXRhID0gJGZvcm0uc2VyaWFsaXplQXJyYXkoKTtcclxuXHJcblx0XHRcdFx0aWYgKCAkbGFzdFZDbGlja2VkICYmICRsYXN0VkNsaWNrZWRbIDAgXS5mb3JtID09PSAkZm9ybVsgMCBdICkge1xyXG5cdFx0XHRcdFx0dmNsaWNrZWROYW1lID0gJGxhc3RWQ2xpY2tlZC5hdHRyKCBcIm5hbWVcIiApO1xyXG5cdFx0XHRcdFx0aWYgKCB2Y2xpY2tlZE5hbWUgKSB7XHJcblx0XHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgbGFzdCBjbGlja2VkIGVsZW1lbnQgaXMgaW5jbHVkZWQgaW4gdGhlIGZvcm1cclxuXHRcdFx0XHRcdFx0JC5lYWNoKCBmb3JtRGF0YSwgZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCB2YWx1ZS5uYW1lID09PSB2Y2xpY2tlZE5hbWUgKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVbnNldCB2Y2xpY2tlZE5hbWUgLSB3ZSd2ZSBmb3VuZCBpdCBpbiB0aGUgc2VyaWFsaXplZCBkYXRhIGFscmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdHZjbGlja2VkTmFtZSA9IFwiXCI7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0aWYgKCB2Y2xpY2tlZE5hbWUgKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9ybURhdGEucHVzaCggeyBuYW1lOiB2Y2xpY2tlZE5hbWUsIHZhbHVlOiAkbGFzdFZDbGlja2VkLmF0dHIoIFwidmFsdWVcIiApIH0gKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0ID0ge1xyXG5cdFx0XHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdHR5cGU6XHRcdG1ldGhvZCxcclxuXHRcdFx0XHRcdFx0ZGF0YTpcdFx0JC5wYXJhbSggZm9ybURhdGEgKSxcclxuXHRcdFx0XHRcdFx0dHJhbnNpdGlvbjpcdCRmb3JtLmpxbURhdGEoIFwidHJhbnNpdGlvblwiICksXHJcblx0XHRcdFx0XHRcdHJldmVyc2U6XHQkZm9ybS5qcW1EYXRhKCBcImRpcmVjdGlvblwiICkgPT09IFwicmV2ZXJzZVwiLFxyXG5cdFx0XHRcdFx0XHRyZWxvYWRQYWdlOlx0dHJ1ZVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiByZXQ7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vYmluZCB0byBmb3JtIHN1Ym1pdCBldmVudHMsIGhhbmRsZSB3aXRoIEFqYXhcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmRlbGVnYXRlKCBcImZvcm1cIiwgXCJzdWJtaXRcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZm9ybURhdGE7XHJcblxyXG5cdFx0XHRpZiAoICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRmb3JtRGF0YSA9IGdldEFqYXhGb3JtRGF0YSggJCggdGhpcyApICk7XHJcblx0XHRcdFx0aWYgKCBmb3JtRGF0YSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoIGZvcm1EYXRhLnVybCwgZm9ybURhdGEub3B0aW9ucyApO1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vYWRkIGFjdGl2ZSBzdGF0ZSBvbiB2Y2xpY2tcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmJpbmQoIFwidmNsaWNrXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyICRidG4sIGJ0bkVscywgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LCBuZWVkQ2xvc2VzdCA9IGZhbHNlO1xyXG5cdFx0XHQvLyBpZiB0aGlzIGlzbid0IGEgbGVmdCBjbGljayB3ZSBkb24ndCBjYXJlLiBJdHMgaW1wb3J0YW50IHRvIG5vdGVcclxuXHRcdFx0Ly8gdGhhdCB3aGVuIHRoZSB2aXJ0dWFsIGV2ZW50IGlzIGdlbmVyYXRlZCBpdCB3aWxsIGNyZWF0ZSB0aGUgd2hpY2ggYXR0clxyXG5cdFx0XHRpZiAoIGV2ZW50LndoaWNoID4gMSB8fCAhJC5tb2JpbGUubGlua0JpbmRpbmdFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVjb3JkIHRoYXQgdGhpcyBlbGVtZW50IHdhcyBjbGlja2VkLCBpbiBjYXNlIHdlIG5lZWQgaXQgZm9yIGNvcnJlY3RcclxuXHRcdFx0Ly8gZm9ybSBzdWJtaXNzaW9uIGR1cmluZyB0aGUgXCJzdWJtaXRcIiBoYW5kbGVyIGFib3ZlXHJcblx0XHRcdCRsYXN0VkNsaWNrZWQgPSAkKCB0YXJnZXQgKTtcclxuXHJcblx0XHRcdC8vIFRyeSB0byBmaW5kIGEgdGFyZ2V0IGVsZW1lbnQgdG8gd2hpY2ggdGhlIGFjdGl2ZSBjbGFzcyB3aWxsIGJlIGFwcGxpZWRcclxuXHRcdFx0aWYgKCAkLmRhdGEoIHRhcmdldCwgXCJtb2JpbGUtYnV0dG9uXCIgKSApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgZm9ybSB3aWxsIG5vdCBiZSBzdWJtaXR0ZWQgdmlhIEFKQVgsIGRvIG5vdCBhZGQgYWN0aXZlIGNsYXNzXHJcblx0XHRcdFx0aWYgKCAhZ2V0QWpheEZvcm1EYXRhKCAkKCB0YXJnZXQgKS5jbG9zZXN0KCBcImZvcm1cIiApLCB0cnVlICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFdlIHdpbGwgYXBwbHkgdGhlIGFjdGl2ZSBzdGF0ZSB0byB0aGlzIGJ1dHRvbiB3aWRnZXQgLSB0aGUgcGFyZW50XHJcblx0XHRcdFx0Ly8gb2YgdGhlIGlucHV0IHRoYXQgd2FzIGNsaWNrZWQgd2lsbCBoYXZlIHRoZSBhc3NvY2lhdGVkIGRhdGFcclxuXHRcdFx0XHRpZiAoIHRhcmdldC5wYXJlbnROb2RlICkge1xyXG5cdFx0XHRcdFx0dGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRhcmdldCA9IGZpbmRDbG9zZXN0TGluayggdGFyZ2V0ICk7XHJcblx0XHRcdFx0aWYgKCAhKCB0YXJnZXQgJiYgJC5tb2JpbGUucGF0aC5wYXJzZVVybCggdGFyZ2V0LmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKSB8fCBcIiNcIiApLmhhc2ggIT09IFwiI1wiICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUT0RPIHRlYWNoICQubW9iaWxlLmhpamFja2FibGUgdG8gb3BlcmF0ZSBvbiByYXcgZG9tIGVsZW1lbnRzIHNvIHRoZVxyXG5cdFx0XHRcdC8vIGxpbmsgd3JhcHBpbmcgY2FuIGJlIGF2b2lkZWRcclxuXHRcdFx0XHRpZiAoICEkKCB0YXJnZXQgKS5qcW1IaWphY2thYmxlKCkubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQXZvaWQgY2FsbGluZyAuY2xvc2VzdCBieSB1c2luZyB0aGUgZGF0YSBzZXQgZHVyaW5nIC5idXR0b25NYXJrdXAoKVxyXG5cdFx0XHQvLyBMaXN0IGl0ZW1zIGhhdmUgdGhlIGJ1dHRvbiBkYXRhIGluIHRoZSBwYXJlbnQgb2YgdGhlIGVsZW1lbnQgY2xpY2tlZFxyXG5cdFx0XHRpZiAoICEhfnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZiggXCJ1aS1saW5rLWluaGVyaXRcIiApICkge1xyXG5cdFx0XHRcdGlmICggdGFyZ2V0LnBhcmVudE5vZGUgKSB7XHJcblx0XHRcdFx0XHRidG5FbHMgPSAkLmRhdGEoIHRhcmdldC5wYXJlbnROb2RlLCBcImJ1dHRvbkVsZW1lbnRzXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdC8vIE90aGVyd2lzZSwgbG9vayBmb3IgdGhlIGRhdGEgb24gdGhlIHRhcmdldCBpdHNlbGZcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRidG5FbHMgPSAkLmRhdGEoIHRhcmdldCwgXCJidXR0b25FbGVtZW50c1wiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gSWYgZm91bmQsIGdyYWIgdGhlIGJ1dHRvbidzIG91dGVyIGVsZW1lbnRcclxuXHRcdFx0aWYgKCBidG5FbHMgKSB7XHJcblx0XHRcdFx0dGFyZ2V0ID0gYnRuRWxzLm91dGVyO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5lZWRDbG9zZXN0ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JGJ0biA9ICQoIHRhcmdldCApO1xyXG5cdFx0XHQvLyBJZiB0aGUgb3V0ZXIgZWxlbWVudCB3YXNuJ3QgZm91bmQgYnkgdGhlIG91ciBoZXVyaXN0aWNzLCB1c2UgLmNsb3Nlc3QoKVxyXG5cdFx0XHRpZiAoIG5lZWRDbG9zZXN0ICkge1xyXG5cdFx0XHRcdCRidG4gPSAkYnRuLmNsb3Nlc3QoIFwiLnVpLWJ0blwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJGJ0bi5sZW5ndGggPiAwICYmXHJcblx0XHRcdFx0ISggJGJ0bi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiIHx8XHJcblxyXG5cdFx0XHRcdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSBhZnRlciAxLjQuMCByZWxlYXNlXHJcblx0XHRcdFx0XHQvLyBvbmx5IHVpLXN0YXRlLWRpc2FibGVkIHNob3VsZCBiZSBwcmVzZW50IHRoZXJlYWZ0ZXJcclxuXHRcdFx0XHRcdCRidG4uaGFzQ2xhc3MoIFwidWktZGlzYWJsZWRcIiApICkgKSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIHRydWUgKTtcclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayA9ICRidG47XHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGNsaWNrIHJvdXRpbmcgLSBkaXJlY3QgdG8gSFRUUCBvciBBamF4LCBhY2NvcmRpbmdseVxyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuYmluZCggXCJjbGlja1wiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdGlmICggISQubW9iaWxlLmxpbmtCaW5kaW5nRW5hYmxlZCB8fCBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBsaW5rID0gZmluZENsb3Nlc3RMaW5rKCBldmVudC50YXJnZXQgKSxcclxuXHRcdFx0XHQkbGluayA9ICQoIGxpbmsgKSxcclxuXHJcblx0XHRcdFx0Ly9yZW1vdmUgYWN0aXZlIGxpbmsgY2xhc3MgaWYgZXh0ZXJuYWwgKHRoZW4gaXQgd29uJ3QgYmUgdGhlcmUgaWYgeW91IGNvbWUgYmFjaylcclxuXHRcdFx0XHRodHRwQ2xlYW51cCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ICQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcyggdHJ1ZSApOyB9LCAyMDAgKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGJhc2VVcmwsIGhyZWYsXHJcblx0XHRcdFx0dXNlRGVmYXVsdFVybEhhbmRsaW5nLCBpc0V4dGVybmFsLFxyXG5cdFx0XHRcdHRyYW5zaXRpb24sIHJldmVyc2UsIHJvbGU7XHJcblxyXG5cdFx0XHQvLyBJZiBhIGJ1dHRvbiB3YXMgY2xpY2tlZCwgY2xlYW4gdXAgdGhlIGFjdGl2ZSBjbGFzcyBhZGRlZCBieSB2Y2xpY2sgYWJvdmVcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rWyAwIF0gPT09IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlICkge1xyXG5cdFx0XHRcdGh0dHBDbGVhbnVwKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZXJlIGlzIG5vIGxpbmsgYXNzb2NpYXRlZCB3aXRoIHRoZSBjbGljayBvciBpdHMgbm90IGEgbGVmdFxyXG5cdFx0XHQvLyBjbGljayB3ZSB3YW50IHRvIGlnbm9yZSB0aGUgY2xpY2tcclxuXHRcdFx0Ly8gVE9ETyB0ZWFjaCAkLm1vYmlsZS5oaWphY2thYmxlIHRvIG9wZXJhdGUgb24gcmF3IGRvbSBlbGVtZW50cyBzbyB0aGUgbGluayB3cmFwcGluZ1xyXG5cdFx0XHQvLyBjYW4gYmUgYXZvaWRlZFxyXG5cdFx0XHRpZiAoICFsaW5rIHx8IGV2ZW50LndoaWNoID4gMSB8fCAhJGxpbmsuanFtSGlqYWNrYWJsZSgpLmxlbmd0aCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vaWYgdGhlcmUncyBhIGRhdGEtcmVsPWJhY2sgYXR0ciwgZ28gYmFjayBpbiBoaXN0b3J5XHJcblx0XHRcdGlmICggJGxpbmsuaXMoIFwiOmpxbURhdGEocmVsPSdiYWNrJylcIiApICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmJhY2soKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGJhc2VVcmwgPSAkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggJGxpbmsgKTtcclxuXHJcblx0XHRcdC8vZ2V0IGhyZWYsIGlmIGRlZmluZWQsIG90aGVyd2lzZSBkZWZhdWx0IHRvIGVtcHR5IGhhc2hcclxuXHRcdFx0aHJlZiA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCAkbGluay5hdHRyKCBcImhyZWZcIiApIHx8IFwiI1wiLCBiYXNlVXJsICk7XHJcblxyXG5cdFx0XHQvL2lmIGFqYXggaXMgZGlzYWJsZWQsIGV4aXQgZWFybHlcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuYWpheEVuYWJsZWQgJiYgISQubW9iaWxlLnBhdGguaXNFbWJlZGRlZFBhZ2UoIGhyZWYgKSApIHtcclxuXHRcdFx0XHRodHRwQ2xlYW51cCgpO1xyXG5cdFx0XHRcdC8vdXNlIGRlZmF1bHQgY2xpY2sgaGFuZGxpbmdcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFhYWF9qYmxhczogSWRlYWxseSBsaW5rcyB0byBhcHBsaWNhdGlvbiBwYWdlcyBzaG91bGQgYmUgc3BlY2lmaWVkIGFzXHJcblx0XHRcdC8vICAgICAgICAgICAgYW4gdXJsIHRvIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudCB3aXRoIGEgaGFzaCB0aGF0IGlzIGVpdGhlclxyXG5cdFx0XHQvLyAgICAgICAgICAgIHRoZSBzaXRlIHJlbGF0aXZlIHBhdGggb3IgaWQgdG8gdGhlIHBhZ2UuIEJ1dCBzb21lIG9mIHRoZVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGludGVybmFsIGNvZGUgdGhhdCBkeW5hbWljYWxseSBnZW5lcmF0ZXMgc3ViLXBhZ2VzIGZvciBuZXN0ZWRcclxuXHRcdFx0Ly8gICAgICAgICAgICBsaXN0cyBhbmQgc2VsZWN0IGRpYWxvZ3MsIGp1c3Qgd3JpdGUgYSBoYXNoIGluIHRoZSBsaW5rIHRoZXlcclxuXHRcdFx0Ly8gICAgICAgICAgICBjcmVhdGUuIFRoaXMgbWVhbnMgdGhlIGFjdHVhbCBVUkwgcGF0aCBpcyBiYXNlZCBvbiB3aGF0ZXZlclxyXG5cdFx0XHQvLyAgICAgICAgICAgIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBiYXNlIHRhZyBpcyBhdCB0aGUgdGltZSB0aGlzIGNvZGVcclxuXHRcdFx0Ly8gICAgICAgICAgICBpcyBjYWxsZWQuXHJcblx0XHRcdGlmICggaHJlZi5zZWFyY2goIFwiI1wiICkgIT09IC0xICYmXHJcblx0XHRcdFx0ISggJC5tb2JpbGUucGF0aC5pc0V4dGVybmFsKCBocmVmICkgJiYgJC5tb2JpbGUucGF0aC5pc0Fic29sdXRlVXJsKCBocmVmICkgKSApIHtcclxuXHJcblx0XHRcdFx0aHJlZiA9IGhyZWYucmVwbGFjZSggL1teI10qIy8sIFwiXCIgKTtcclxuXHRcdFx0XHRpZiAoICFocmVmICkge1xyXG5cdFx0XHRcdFx0Ly9saW5rIHdhcyBhbiBlbXB0eSBoYXNoIG1lYW50IHB1cmVseVxyXG5cdFx0XHRcdFx0Ly9mb3IgaW50ZXJhY3Rpb24sIHNvIHdlIGlnbm9yZSBpdC5cclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fSBlbHNlIGlmICggJC5tb2JpbGUucGF0aC5pc1BhdGgoIGhyZWYgKSApIHtcclxuXHRcdFx0XHRcdC8vd2UgaGF2ZSBhcGF0aCBzbyBtYWtlIGl0IHRoZSBocmVmIHdlIHdhbnQgdG8gbG9hZC5cclxuXHRcdFx0XHRcdGhyZWYgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggaHJlZiwgYmFzZVVybCApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvL3dlIGhhdmUgYSBzaW1wbGUgaWQgc28gdXNlIHRoZSBkb2N1bWVudFVybCBhcyBpdHMgYmFzZS5cclxuXHRcdFx0XHRcdGhyZWYgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggXCIjXCIgKyBocmVmLCBkb2N1bWVudFVybC5ocmVmTm9IYXNoICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTaG91bGQgd2UgaGFuZGxlIHRoaXMgbGluaywgb3IgbGV0IHRoZSBicm93c2VyIGRlYWwgd2l0aCBpdD9cclxuXHRcdFx0dXNlRGVmYXVsdFVybEhhbmRsaW5nID0gJGxpbmsuaXMoIFwiW3JlbD0nZXh0ZXJuYWwnXVwiICkgfHwgJGxpbmsuaXMoIFwiOmpxbURhdGEoYWpheD0nZmFsc2UnKVwiICkgfHwgJGxpbmsuaXMoIFwiW3RhcmdldF1cIiApO1xyXG5cclxuXHRcdFx0Ly8gU29tZSBlbWJlZGRlZCBicm93c2VycywgbGlrZSB0aGUgd2ViIHZpZXcgaW4gUGhvbmUgR2FwLCBhbGxvdyBjcm9zcy1kb21haW4gWEhSXHJcblx0XHRcdC8vIHJlcXVlc3RzIGlmIHRoZSBkb2N1bWVudCBkb2luZyB0aGUgcmVxdWVzdCB3YXMgbG9hZGVkIHZpYSB0aGUgZmlsZTovLyBwcm90b2NvbC5cclxuXHRcdFx0Ly8gVGhpcyBpcyB1c3VhbGx5IHRvIGFsbG93IHRoZSBhcHBsaWNhdGlvbiB0byBcInBob25lIGhvbWVcIiBhbmQgZmV0Y2ggYXBwIHNwZWNpZmljXHJcblx0XHRcdC8vIGRhdGEuIFdlIG5vcm1hbGx5IGxldCB0aGUgYnJvd3NlciBoYW5kbGUgZXh0ZXJuYWwvY3Jvc3MtZG9tYWluIHVybHMsIGJ1dCBpZiB0aGVcclxuXHRcdFx0Ly8gYWxsb3dDcm9zc0RvbWFpblBhZ2VzIG9wdGlvbiBpcyB0cnVlLCB3ZSB3aWxsIGFsbG93IGNyb3NzLWRvbWFpbiBodHRwL2h0dHBzXHJcblx0XHRcdC8vIHJlcXVlc3RzIHRvIGdvIHRocm91Z2ggb3VyIHBhZ2UgbG9hZGluZyBsb2dpYy5cclxuXHJcblx0XHRcdC8vY2hlY2sgZm9yIHByb3RvY29sIG9yIHJlbCBhbmQgaXRzIG5vdCBhbiBlbWJlZGRlZCBwYWdlXHJcblx0XHRcdC8vVE9ETyBvdmVybGFwIGluIGxvZ2ljIGZyb20gaXNFeHRlcm5hbCwgcmVsPWV4dGVybmFsIGNoZWNrIHNob3VsZCBiZVxyXG5cdFx0XHQvLyAgICAgbW92ZWQgaW50byBtb3JlIGNvbXByZWhlbnNpdmUgaXNFeHRlcm5hbExpbmtcclxuXHRcdFx0aXNFeHRlcm5hbCA9IHVzZURlZmF1bHRVcmxIYW5kbGluZyB8fCAoICQubW9iaWxlLnBhdGguaXNFeHRlcm5hbCggaHJlZiApICYmICEkLm1vYmlsZS5wYXRoLmlzUGVybWl0dGVkQ3Jvc3NEb21haW5SZXF1ZXN0KCBkb2N1bWVudFVybCwgaHJlZiApICk7XHJcblxyXG5cdFx0XHRpZiAoIGlzRXh0ZXJuYWwgKSB7XHJcblx0XHRcdFx0aHR0cENsZWFudXAoKTtcclxuXHRcdFx0XHQvL3VzZSBkZWZhdWx0IGNsaWNrIGhhbmRsaW5nXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL3VzZSBhamF4XHJcblx0XHRcdHRyYW5zaXRpb24gPSAkbGluay5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRyZXZlcnNlID0gJGxpbmsuanFtRGF0YSggXCJkaXJlY3Rpb25cIiApID09PSBcInJldmVyc2VcIiB8fFxyXG5cdFx0XHRcdFx0XHQvLyBkZXByZWNhdGVkIC0gcmVtb3ZlIGJ5IDEuMFxyXG5cdFx0XHRcdFx0XHQkbGluay5qcW1EYXRhKCBcImJhY2tcIiApO1xyXG5cclxuXHRcdFx0Ly90aGlzIG1heSBuZWVkIHRvIGJlIG1vcmUgc3BlY2lmaWMgYXMgd2UgdXNlIGRhdGEtcmVsIG1vcmVcclxuXHRcdFx0cm9sZSA9ICRsaW5rLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWxcIiApIHx8IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoIGhyZWYsIHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiwgcmV2ZXJzZTogcmV2ZXJzZSwgcm9sZTogcm9sZSwgbGluazogJGxpbmsgfSApO1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly9wcmVmZXRjaCBwYWdlcyB3aGVuIGFuY2hvcnMgd2l0aCBkYXRhLXByZWZldGNoIGFyZSBlbmNvdW50ZXJlZFxyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuZGVsZWdhdGUoIFwiLnVpLXBhZ2VcIiwgXCJwYWdlc2hvdy5wcmVmZXRjaFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHVybHMgPSBbXTtcclxuXHRcdFx0JCggdGhpcyApLmZpbmQoIFwiYTpqcW1EYXRhKHByZWZldGNoKVwiICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgJGxpbmsgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHR1cmwgPSAkbGluay5hdHRyKCBcImhyZWZcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHVybCAmJiAkLmluQXJyYXkoIHVybCwgdXJscyApID09PSAtMSApIHtcclxuXHRcdFx0XHRcdHVybHMucHVzaCggdXJsICk7XHJcblxyXG5cdFx0XHRcdFx0JC5tb2JpbGUubG9hZFBhZ2UoIHVybCwgeyByb2xlOiAkbGluay5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsXCIgKSxwcmVmZXRjaDogdHJ1ZSB9ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFRPRE8gZW5zdXJlIHRoYXQgdGhlIG5hdmlnYXRlIGJpbmRpbmcgaW4gdGhlIGNvbnRlbnQgd2lkZ2V0IGhhcHBlbnMgYXQgdGhlIHJpZ2h0IHRpbWVcclxuXHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lcigpO1xyXG5cclxuXHRcdC8vc2V0IHBhZ2UgbWluLWhlaWdodHMgdG8gYmUgZGV2aWNlIHNwZWNpZmljXHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5iaW5kKCBcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0Ly8gV2UgbmVlZCB0byB3YWl0IGZvciB3aW5kb3cubG9hZCB0byBtYWtlIHN1cmUgdGhhdCBzdHlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gcmVuZGVyZWQsXHJcblx0XHRcdC8vIG90aGVyd2lzZSBoZWlnaHRzIG9mIGV4dGVybmFsIHRvb2xiYXJzIHdpbGwgaGF2ZSB0aGUgd3JvbmcgdmFsdWVcclxuXHRcdFx0aWYgKCBsb2FkRGVmZXJyZWQgKSB7XHJcblx0XHRcdFx0bG9hZERlZmVycmVkLmRvbmUoICQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdCQubW9iaWxlLndpbmRvdy5iaW5kKCBcInRocm90dGxlZHJlc2l6ZVwiLCAkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQgKTtcclxuXHJcblx0fTsvL25hdnJlYWR5RGVmZXJyZWQgZG9uZSBjYWxsYmFja1xyXG5cclxuXHQkKCBmdW5jdGlvbigpIHsgZG9tcmVhZHlEZWZlcnJlZC5yZXNvbHZlKCk7IH0gKTtcclxuXHJcblx0Ly8gQWNjb3VudCBmb3IgdGhlIHBvc3NpYmlsaXR5IHRoYXQgdGhlIGxvYWQgZXZlbnQgaGFzIGFscmVhZHkgZmlyZWRcclxuXHRpZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiApIHtcclxuXHRcdHBhZ2VJc0Z1bGx5TG9hZGVkKCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdCQubW9iaWxlLndpbmRvdy5sb2FkKCBwYWdlSXNGdWxseUxvYWRlZCApO1xyXG5cdH1cclxuXHJcblx0JC53aGVuKCBkb21yZWFkeURlZmVycmVkLCAkLm1vYmlsZS5uYXZyZWFkeURlZmVycmVkICkuZG9uZSggZnVuY3Rpb24oKSB7ICQubW9iaWxlLl9yZWdpc3RlckludGVybmFsRXZlbnRzKCk7IH0gKTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8vIFRPRE8gcmVtb3ZlIGRpcmVjdCByZWZlcmVuY2VzIHRvICQubW9iaWxlIGFuZCBwcm9wZXJ0aWVzLCB3ZSBzaG91bGRcclxuXHQvLyAgICAgIGZhdm9yIGluamVjdGlvbiB3aXRoIHBhcmFtcyB0byB0aGUgY29uc3RydWN0b3JcclxuXHQkLm1vYmlsZS5UcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLlRyYW5zaXRpb24ucHJvdG90eXBlLCB7XHJcblx0XHR0b1ByZUNsYXNzOiBcIiB1aS1wYWdlLXByZS1pblwiLFxyXG5cclxuXHRcdGluaXQ6IGZ1bmN0aW9uKCBuYW1lLCByZXZlcnNlLCAkdG8sICRmcm9tICkge1xyXG5cdFx0XHQkLmV4dGVuZCh0aGlzLCB7XHJcblx0XHRcdFx0bmFtZTogbmFtZSxcclxuXHRcdFx0XHRyZXZlcnNlOiByZXZlcnNlLFxyXG5cdFx0XHRcdCR0bzogJHRvLFxyXG5cdFx0XHRcdCRmcm9tOiAkZnJvbSxcclxuXHRcdFx0XHRkZWZlcnJlZDogbmV3ICQuRGVmZXJyZWQoKVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xlYW5Gcm9tOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy4kZnJvbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICsgXCIgb3V0IGluIHJldmVyc2UgXCIgKyB0aGlzLm5hbWUgKVxyXG5cdFx0XHRcdC5oZWlnaHQoIFwiXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gTk9URSBvdmVycmlkZGVuIGJ5IGNoaWxkIG9iamVjdCBwcm90b3R5cGVzLCBub29wJ2QgaGVyZSBhcyBkZWZhdWx0c1xyXG5cdFx0YmVmb3JlRG9uZUluOiBmdW5jdGlvbigpIHt9LFxyXG5cdFx0YmVmb3JlRG9uZU91dDogZnVuY3Rpb24oKSB7fSxcclxuXHRcdGJlZm9yZVN0YXJ0T3V0OiBmdW5jdGlvbigpIHt9LFxyXG5cclxuXHRcdGRvbmVJbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlRG9uZUluKCk7XHJcblxyXG5cdFx0XHR0aGlzLiR0by5yZW1vdmVDbGFzcyggXCJvdXQgaW4gcmV2ZXJzZSBcIiArIHRoaXMubmFtZSApLmhlaWdodCggXCJcIiApO1xyXG5cclxuXHRcdFx0dGhpcy50b2dnbGVWaWV3cG9ydENsYXNzKCk7XHJcblxyXG5cdFx0XHQvLyBJbiBzb21lIGJyb3dzZXJzIChpT1M1KSwgM0QgdHJhbnNpdGlvbnMgYmxvY2sgdGhlIGFiaWxpdHkgdG8gc2Nyb2xsIHRvIHRoZSBkZXNpcmVkIGxvY2F0aW9uIGR1cmluZyB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyB3ZSBqdW1wIHRvIHRoYXQgc3BvdCBhZnRlciB0aGUgZmFjdCwgaWYgd2UgYXJlbid0IHRoZXJlIGFscmVhZHkuXHJcblx0XHRcdGlmICggJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpICE9PSB0aGlzLnRvU2Nyb2xsICkge1xyXG5cdFx0XHRcdHRoaXMuc2Nyb2xsUGFnZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIXRoaXMuc2VxdWVudGlhbCApIHtcclxuXHRcdFx0XHR0aGlzLiR0by5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5kZWZlcnJlZC5yZXNvbHZlKCB0aGlzLm5hbWUsIHRoaXMucmV2ZXJzZSwgdGhpcy4kdG8sIHRoaXMuJGZyb20sIHRydWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZG9uZU91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCBwcmV2ZW50Rm9jdXMgKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlRG9uZU91dCgpO1xyXG5cdFx0XHR0aGlzLnN0YXJ0SW4oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCBwcmV2ZW50Rm9jdXMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZUluOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XHJcblx0XHRcdC8vIFByZXZlbnQgZmxpY2tlcmluZyBpbiBwaG9uZWdhcCBjb250YWluZXI6IHNlZSBjb21tZW50cyBhdCAjNDAyNCByZWdhcmRpbmcgaU9TXHJcblx0XHRcdHRoaXMuJHRvLmNzcyggXCJ6LWluZGV4XCIsIC0xMCApO1xyXG5cdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzICk7XHJcblx0XHRcdHRoaXMuJHRvLmNzcyggXCJ6LWluZGV4XCIsIFwiXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2Nyb2xsUGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIEJ5IHVzaW5nIHNjcm9sbFRvIGluc3RlYWQgb2Ygc2lsZW50U2Nyb2xsLCB3ZSBjYW4ga2VlcCB0aGluZ3MgYmV0dGVyIGluIG9yZGVyXHJcblx0XHRcdC8vIEp1c3QgdG8gYmUgcHJlY2F1dGlvcywgZGlzYWJsZSBzY3JvbGxzdGFydCBsaXN0ZW5pbmcgbGlrZSBzaWxlbnRTY3JvbGwgd291bGRcclxuXHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0Ly9pZiB3ZSBhcmUgaGlkaW5nIHRoZSB1cmwgYmFyIG9yIHRoZSBwYWdlIHdhcyBwcmV2aW91c2x5IHNjcm9sbGVkIHNjcm9sbCB0byBoaWRlIG9yIHJldHVybiB0byBwb3NpdGlvblxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmhpZGVVcmxCYXIgfHwgdGhpcy50b1Njcm9sbCAhPT0gJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwgKSB7XHJcblx0XHRcdFx0d2luZG93LnNjcm9sbFRvKCAwLCB0aGlzLnRvU2Nyb2xsICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHJlZW5hYmxlIHNjcm9sbHN0YXJ0IGxpc3RlbmluZyBsaWtlIHNpbGVudFNjcm9sbCB3b3VsZFxyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH0sIDE1MCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzdGFydEluOiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHByZXZlbnRGb2N1cyApIHtcclxuXHRcdFx0dGhpcy5oaWRlSW4oZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy4kdG8uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyArIHRoaXMudG9QcmVDbGFzcyApO1xyXG5cclxuXHRcdFx0XHQvLyBTZW5kIGZvY3VzIHRvIHBhZ2UgYXMgaXQgaXMgbm93IGRpc3BsYXk6IGJsb2NrXHJcblx0XHRcdFx0aWYgKCAhcHJldmVudEZvY3VzICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuZm9jdXNQYWdlKCB0aGlzLiR0byApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU2V0IHRvIHBhZ2UgaGVpZ2h0XHJcblx0XHRcdFx0dGhpcy4kdG8uaGVpZ2h0KCBzY3JlZW5IZWlnaHQgKyB0aGlzLnRvU2Nyb2xsICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCAhbm9uZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLiR0b1xyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy50b1ByZUNsYXNzIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMubmFtZSArIFwiIGluIFwiICsgcmV2ZXJzZUNsYXNzICk7XHJcblxyXG5cdFx0XHRpZiAoICFub25lICkge1xyXG5cdFx0XHRcdHRoaXMuJHRvLmFuaW1hdGlvbkNvbXBsZXRlKCAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5kb25lSW4oKTtcclxuXHRcdFx0XHR9LCB0aGlzICkpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuZG9uZUluKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdHN0YXJ0T3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlU3RhcnRPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGZyb20gcGFnZSdzIGhlaWdodCBhbmQgc3RhcnQgaXQgdHJhbnNpdGlvbmluZyBvdXRcclxuXHRcdFx0Ly8gTm90ZTogc2V0dGluZyBhbiBleHBsaWNpdCBoZWlnaHQgaGVscHMgZWxpbWluYXRlIHRpbGluZyBpbiB0aGUgdHJhbnNpdGlvbnNcclxuXHRcdFx0dGhpcy4kZnJvbVxyXG5cdFx0XHRcdC5oZWlnaHQoIHNjcmVlbkhlaWdodCArICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLm5hbWUgKyBcIiBvdXRcIiArIHJldmVyc2VDbGFzcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0b2dnbGVWaWV3cG9ydENsYXNzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci50b2dnbGVDbGFzcyggXCJ1aS1tb2JpbGUtdmlld3BvcnQtdHJhbnNpdGlvbmluZyB2aWV3cG9ydC1cIiArIHRoaXMubmFtZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0cmFuc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gTk9URSBtYW55IG9mIHRoZXNlIGNvdWxkIGJlIGNhbGN1bGF0ZWQvcmVjb3JkZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBpdCdzIG15XHJcblx0XHRcdC8vICAgICAgb3BpbmlvbiB0aGF0IGJpbmRpbmcgdGhlbSBhcyBsYXRlIGFzIHBvc3NpYmxlIGhhcyB2YWx1ZSB3aXRoIHJlZ2FyZHMgdG9cclxuXHRcdFx0Ly8gICAgICBiZXR0ZXIgdHJhbnNpdGlvbnMgd2l0aCBmZXdlciBidWdzLiBJZSwgaXQncyBub3QgZ3VhcmFudGVlZCB0aGF0IHRoZVxyXG5cdFx0XHQvLyAgICAgIG9iamVjdCB3aWxsIGJlIGNyZWF0ZWQgYW5kIHRyYW5zaXRpb24gd2lsbCBiZSBydW4gaW1tZWRpYXRlbHkgYWZ0ZXIgYXNcclxuXHRcdFx0Ly8gICAgICBpdCBpcyB0b2RheS4gU28gd2Ugd2FpdCB1bnRpbCB0cmFuc2l0aW9uIGlzIGludm9rZWQgdG8gZ2F0aGVyIHRoZSBmb2xsb3dpbmdcclxuXHRcdFx0dmFyIG5vbmUsXHJcblx0XHRcdFx0cmV2ZXJzZUNsYXNzID0gdGhpcy5yZXZlcnNlID8gXCIgcmV2ZXJzZVwiIDogXCJcIixcclxuXHRcdFx0XHRzY3JlZW5IZWlnaHQgPSAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSxcclxuXHRcdFx0XHRtYXhUcmFuc2l0aW9uT3ZlcnJpZGUgPSAkLm1vYmlsZS5tYXhUcmFuc2l0aW9uV2lkdGggIT09IGZhbHNlICYmXHJcblx0XHRcdFx0XHQkLm1vYmlsZS53aW5kb3cud2lkdGgoKSA+ICQubW9iaWxlLm1heFRyYW5zaXRpb25XaWR0aDtcclxuXHJcblx0XHRcdHRoaXMudG9TY3JvbGwgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpLmxhc3RTY3JvbGwgfHwgJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7XHJcblxyXG5cdFx0XHRub25lID0gISQuc3VwcG9ydC5jc3NUcmFuc2l0aW9ucyB8fCAhJC5zdXBwb3J0LmNzc0FuaW1hdGlvbnMgfHxcclxuXHRcdFx0XHRtYXhUcmFuc2l0aW9uT3ZlcnJpZGUgfHwgIXRoaXMubmFtZSB8fCB0aGlzLm5hbWUgPT09IFwibm9uZVwiIHx8XHJcblx0XHRcdFx0TWF0aC5tYXgoICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSwgdGhpcy50b1Njcm9sbCApID5cclxuXHRcdFx0XHRcdCQubW9iaWxlLmdldE1heFNjcm9sbEZvclRyYW5zaXRpb24oKTtcclxuXHJcblx0XHRcdHRoaXMudG9nZ2xlVmlld3BvcnRDbGFzcygpO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLiRmcm9tICYmICFub25lICkge1xyXG5cdFx0XHRcdHRoaXMuc3RhcnRPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5kb25lT3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5kZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cdCQubW9iaWxlLlNlcmlhbFRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLlNlcmlhbFRyYW5zaXRpb24ucHJvdG90eXBlLCAkLm1vYmlsZS5UcmFuc2l0aW9uLnByb3RvdHlwZSwge1xyXG5cdFx0c2VxdWVudGlhbDogdHJ1ZSxcclxuXHJcblx0XHRiZWZvcmVEb25lT3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLiRmcm9tICkge1xyXG5cdFx0XHRcdHRoaXMuY2xlYW5Gcm9tKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0YmVmb3JlU3RhcnRPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApIHtcclxuXHRcdFx0dGhpcy4kZnJvbS5hbmltYXRpb25Db21wbGV0ZSgkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuZG9uZU91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHRcdFx0fSwgdGhpcyApKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cdCQubW9iaWxlLkNvbmN1cnJlbnRUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5Db25jdXJyZW50VHJhbnNpdGlvbi5wcm90b3R5cGUsICQubW9iaWxlLlRyYW5zaXRpb24ucHJvdG90eXBlLCB7XHJcblx0XHRzZXF1ZW50aWFsOiBmYWxzZSxcclxuXHJcblx0XHRiZWZvcmVEb25lSW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMuJGZyb20gKSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhbkZyb20oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRiZWZvcmVTdGFydE91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICkge1xyXG5cdFx0XHR0aGlzLmRvbmVPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuXHQvLyBnZW5lcmF0ZSB0aGUgaGFuZGxlcnMgZnJvbSB0aGUgYWJvdmVcclxuXHR2YXIgZGVmYXVsdEdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSAqIDM7XHJcblx0fTtcclxuXHJcblx0Ly90cmFuc2l0aW9uIGhhbmRsZXIgZGljdGlvbmFyeSBmb3IgM3JkIHBhcnR5IHRyYW5zaXRpb25zXHJcblx0JC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzID0ge1xyXG5cdFx0XCJzZXF1ZW50aWFsXCI6ICQubW9iaWxlLlNlcmlhbFRyYW5zaXRpb24sXHJcblx0XHRcInNpbXVsdGFuZW91c1wiOiAkLm1vYmlsZS5Db25jdXJyZW50VHJhbnNpdGlvblxyXG5cdH07XHJcblxyXG5cdC8vIE1ha2Ugb3VyIHRyYW5zaXRpb24gaGFuZGxlciB0aGUgcHVibGljIGRlZmF1bHQuXHJcblx0JC5tb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyID0gJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNlcXVlbnRpYWw7XHJcblxyXG5cdCQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MgPSB7fTtcclxuXHJcblx0Ly8gSWYgdHJhbnNpdGlvbiBpcyBkZWZpbmVkLCBjaGVjayBpZiBjc3MgM0QgdHJhbnNmb3JtcyBhcmUgc3VwcG9ydGVkLCBhbmQgaWYgbm90LCBpZiBhIGZhbGxiYWNrIGlzIHNwZWNpZmllZFxyXG5cdCQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uID0gZnVuY3Rpb24oIHRyYW5zaXRpb24gKSB7XHJcblx0XHRpZiAoIHRyYW5zaXRpb24gJiYgISQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAkLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzWyB0cmFuc2l0aW9uIF0gKSB7XHJcblx0XHRcdHRyYW5zaXRpb24gPSAkLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzWyB0cmFuc2l0aW9uIF07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRyYW5zaXRpb247XHJcblx0fTtcclxuXHJcblx0Ly8gU2V0IHRoZSBnZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uIHRvIGRlZmF1bHQgaWYgbm8gaW1wbGVtZW50YXRpb24gd2FzIHNldCBieSB1c2VyXHJcblx0JC5tb2JpbGUuZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiA9ICQubW9iaWxlLmdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gfHwgZGVmYXVsdEdldE1heFNjcm9sbEZvclRyYW5zaXRpb247XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIGZsaXAgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLmZsaXAgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgZmxvdyBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MuZmxvdyA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBwb3AgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnBvcCA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZSBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIFVzZSB0aGUgc2ltdWx0YW5lb3VzIHRyYW5zaXRpb25zIGhhbmRsZXIgZm9yIHNsaWRlIHRyYW5zaXRpb25zXHJcbiQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zbGlkZSA9ICQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zaW11bHRhbmVvdXM7XHJcblxyXG4vLyBTZXQgdGhlIHNsaWRlIHRyYW5zaXRpb25zJ3MgZmFsbGJhY2sgdG8gXCJmYWRlXCJcclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZSA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZWRvd24gaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlZG93biA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZWZhZGUgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBTZXQgdGhlIHNsaWRlIHRyYW5zaXRpb25zJ3MgZmFsbGJhY2sgdG8gXCJmYWRlXCJcclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZWZhZGUgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGV1cCBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGV1cCA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciB0dXJuIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy50dXJuID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5kZWdyYWRlSW5wdXRzID0ge1xyXG5cdGNvbG9yOiBmYWxzZSxcclxuXHRkYXRlOiBmYWxzZSxcclxuXHRkYXRldGltZTogZmFsc2UsXHJcblx0XCJkYXRldGltZS1sb2NhbFwiOiBmYWxzZSxcclxuXHRlbWFpbDogZmFsc2UsXHJcblx0bW9udGg6IGZhbHNlLFxyXG5cdG51bWJlcjogZmFsc2UsXHJcblx0cmFuZ2U6IFwibnVtYmVyXCIsXHJcblx0c2VhcmNoOiBcInRleHRcIixcclxuXHR0ZWw6IGZhbHNlLFxyXG5cdHRpbWU6IGZhbHNlLFxyXG5cdHVybDogZmFsc2UsXHJcblx0d2VlazogZmFsc2VcclxufTtcclxuLy8gQmFja2NvbXBhdCByZW1vdmUgaW4gMS41XHJcbiQubW9iaWxlLnBhZ2UucHJvdG90eXBlLm9wdGlvbnMuZGVncmFkZUlucHV0cyA9ICQubW9iaWxlLmRlZ3JhZGVJbnB1dHM7XHJcblxyXG4vLyBBdXRvIHNlbGYtaW5pdCB3aWRnZXRzXHJcbiQubW9iaWxlLmRlZ3JhZGVJbnB1dHNXaXRoaW4gPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cclxuXHR0YXJnZXQgPSAkKCB0YXJnZXQgKTtcclxuXHJcblx0Ly8gRGVncmFkZSBpbnB1dHMgdG8gYXZvaWQgcG9vcmx5IGltcGxlbWVudGVkIG5hdGl2ZSBmdW5jdGlvbmFsaXR5XHJcblx0dGFyZ2V0LmZpbmQoIFwiaW5wdXRcIiApLm5vdCggJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yKCkgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKCB0aGlzICksXHJcblx0XHRcdHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSxcclxuXHRcdFx0b3B0VHlwZSA9ICQubW9iaWxlLmRlZ3JhZGVJbnB1dHNbIHR5cGUgXSB8fCBcInRleHRcIixcclxuXHRcdFx0aHRtbCwgaGFzVHlwZSwgZmluZHN0ciwgcmVwc3RyO1xyXG5cclxuXHRcdGlmICggJC5tb2JpbGUuZGVncmFkZUlucHV0c1sgdHlwZSBdICkge1xyXG5cdFx0XHRodG1sID0gJCggXCI8ZGl2PlwiICkuaHRtbCggZWxlbWVudC5jbG9uZSgpICkuaHRtbCgpO1xyXG5cdFx0XHQvLyBJbiBJRSBicm93c2VycywgdGhlIHR5cGUgc29tZXRpbWVzIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGNsb25lZCBtYXJrdXAsIHNvIHdlIHJlcGxhY2UgdGhlIGNsb3NpbmcgdGFnIGluc3RlYWRcclxuXHRcdFx0aGFzVHlwZSA9IGh0bWwuaW5kZXhPZiggXCIgdHlwZT1cIiApID4gLTE7XHJcblx0XHRcdGZpbmRzdHIgPSBoYXNUeXBlID8gL1xccyt0eXBlPVtcIiddP1xcdytbJ1wiXT8vIDogL1xcLz8+LztcclxuXHRcdFx0cmVwc3RyID0gXCIgdHlwZT1cXFwiXCIgKyBvcHRUeXBlICsgXCJcXFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHlwZT1cXFwiXCIgKyB0eXBlICsgXCJcXFwiXCIgKyAoIGhhc1R5cGUgPyBcIlwiIDogXCI+XCIgKTtcclxuXHJcblx0XHRcdGVsZW1lbnQucmVwbGFjZVdpdGgoIGh0bWwucmVwbGFjZSggZmluZHN0ciwgcmVwc3RyICkgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBhZ2VcIiwgJC5tb2JpbGUucGFnZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHJcblx0XHQvLyBBY2NlcHRzIGxlZnQsIHJpZ2h0IGFuZCBub25lXHJcblx0XHRjbG9zZUJ0bjogXCJsZWZ0XCIsXHJcblx0XHRjbG9zZUJ0blRleHQ6IFwiQ2xvc2VcIixcclxuXHRcdG92ZXJsYXlUaGVtZTogXCJhXCIsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0ZGlhbG9nOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpYWxvZyApIHtcclxuXHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0X2lubmVyOiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKSxcclxuXHRcdFx0XHRfaGVhZGVyQ2xvc2VCdXR0b246IG51bGxcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIHRoaXMub3B0aW9ucy5jbG9zZUJ0biApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQvLyBDbGFzcyB0aGUgbWFya3VwIGZvciBkaWFsb2cgc3R5bGluZyBhbmQgd3JhcCBpbnRlcmlvclxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlhbG9nICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktZGlhbG9nXCIgKVxyXG5cdFx0XHRcdC53cmFwSW5uZXIoICQoIFwiPGRpdi8+XCIsIHtcclxuXHJcblx0XHRcdFx0XHQvLyBBUklBIHJvbGVcclxuXHRcdFx0XHRcdFwicm9sZVwiIDogXCJkaWFsb2dcIixcclxuXHRcdFx0XHRcdFwiY2xhc3NcIiA6IFwidWktZGlhbG9nLWNvbnRhaW4gdWktb3ZlcmxheS1zaGFkb3dcIiArXHJcblx0XHRcdFx0XHRcdCggdGhpcy5vcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiIClcclxuXHRcdFx0XHR9KSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCxcclxuXHRcdFx0Y3VycmVudE9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5faW5uZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCAhIW9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5vdmVybGF5VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5hY3RpdmVQYWdlWyAwIF0gPT09IHRoaXMuZWxlbWVudFsgMCBdICkge1xyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLm92ZXJsYXlUaGVtZSA9IG9wdGlvbnMub3ZlcmxheVRoZW1lO1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZVBhZ2VCZWZvcmVTaG93KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG5UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBjdXJyZW50T3B0cy5jbG9zZUJ0bjtcclxuXHRcdFx0Y2xvc2VCdXR0b25UZXh0ID0gb3B0aW9ucy5jbG9zZUJ0blRleHQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBvcHRpb25zLmNsb3NlQnRuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggY2xvc2VCdXR0b25Mb2NhdGlvbiApIHtcclxuXHRcdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgJiYgdGhpcy5vcHRpb25zLmRpYWxvZyApIHtcclxuXHRcdFx0dGhpcy5yZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kKCk7XHJcblx0XHRcdHRoaXMuc2V0Q29udGFpbmVyQmFja2dyb3VuZCggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0Q2xvc2VCdG46IGZ1bmN0aW9uKCBsb2NhdGlvbiwgdGV4dCApIHtcclxuXHRcdHZhciBkc3QsXHJcblx0XHRcdGJ0biA9IHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uO1xyXG5cclxuXHRcdC8vIFNhbml0aXplIHZhbHVlXHJcblx0XHRsb2NhdGlvbiA9IFwibGVmdFwiID09PSBsb2NhdGlvbiA/IFwibGVmdFwiIDogXCJyaWdodFwiID09PSBsb2NhdGlvbiA/IFwicmlnaHRcIiA6IFwibm9uZVwiO1xyXG5cclxuXHRcdGlmICggXCJub25lXCIgPT09IGxvY2F0aW9uICkge1xyXG5cdFx0XHRpZiAoIGJ0biApIHtcclxuXHRcdFx0XHRidG4ucmVtb3ZlKCk7XHJcblx0XHRcdFx0YnRuID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmICggYnRuICkge1xyXG5cdFx0XHRidG4ucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0XCIgKS5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBsb2NhdGlvbiApO1xyXG5cdFx0XHRpZiAoIHRleHQgKSB7XHJcblx0XHRcdFx0YnRuLnRleHQoIHRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZHN0ID0gdGhpcy5faW5uZXIuZmluZCggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmlyc3QoKTtcclxuXHRcdFx0YnRuID0gJCggXCI8YT48L2E+XCIsIHtcclxuXHRcdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1idG4gdWktY29ybmVyLWFsbCB1aS1pY29uLWRlbGV0ZSB1aS1idG4taWNvbi1ub3RleHQgdWktYnRuLVwiICsgbG9jYXRpb25cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsXCIsIFwiYmFja1wiIClcclxuXHRcdFx0XHQudGV4dCggdGV4dCB8fCB0aGlzLm9wdGlvbnMuY2xvc2VCdG5UZXh0IHx8IFwiXCIgKVxyXG5cdFx0XHRcdC5wcmVwZW5kVG8oIGRzdCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uID0gYnRuO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmRpYWxvZ1wiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cclxuXHRcdC8vIEFjY2VwdHMgbGVmdCwgcmlnaHQgYW5kIG5vbmVcclxuXHRcdGNsb3NlQnRuOiBcImxlZnRcIixcclxuXHRcdGNsb3NlQnRuVGV4dDogXCJDbG9zZVwiLFxyXG5cdFx0b3ZlcmxheVRoZW1lOiBcImFcIixcclxuXHRcdGNvcm5lcnM6IHRydWVcclxuXHR9LFxyXG5cclxuXHQvLyBPdmVycmlkZSB0aGUgdGhlbWUgc2V0IGJ5IHRoZSBwYWdlIHBsdWdpbiBvbiBwYWdlc2hvd1xyXG5cdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9pc0Nsb3NlYWJsZSA9IHRydWU7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5wYWdlKCBcInJlbW92ZUNvbnRhaW5lckJhY2tncm91bmRcIiApXHJcblx0XHRcdFx0LnBhZ2UoIFwic2V0Q29udGFpbmVyQmFja2dyb3VuZFwiLCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVIaWRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2lzQ2xvc2VhYmxlID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0Ly8gY2xpY2sgYW5kIHN1Ym1pdCBldmVudHM6XHJcblx0Ly8gLSBjbGlja3MgYW5kIHN1Ym1pdHMgc2hvdWxkIHVzZSB0aGUgY2xvc2luZyB0cmFuc2l0aW9uIHRoYXQgdGhlIGRpYWxvZ1xyXG5cdC8vICAgb3BlbmVkIHdpdGggdW5sZXNzIGEgZGF0YS10cmFuc2l0aW9uIGlzIHNwZWNpZmllZCBvbiB0aGUgbGluay9mb3JtXHJcblx0Ly8gLSBpZiB0aGUgY2xpY2sgd2FzIG9uIHRoZSBjbG9zZSBidXR0b24sIG9yIHRoZSBsaW5rIGhhcyBhIGRhdGEtcmVsPVwiYmFja1wiXHJcblx0Ly8gICBpdCdsbCBnbyBiYWNrIGluIGhpc3RvcnkgbmF0dXJhbGx5XHJcblx0X2hhbmRsZVZDbGlja1N1Ym1pdDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGF0dHJzLFxyXG5cdFx0XHQkdGFyZ2V0ID0gJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggZXZlbnQudHlwZSA9PT0gXCJ2Y2xpY2tcIiA/IFwiYVwiIDogXCJmb3JtXCIgKTtcclxuXHJcblx0XHRpZiAoICR0YXJnZXQubGVuZ3RoICYmICEkdGFyZ2V0LmpxbURhdGEoIFwidHJhbnNpdGlvblwiICkgKSB7XHJcblx0XHRcdGF0dHJzID0ge307XHJcblx0XHRcdGF0dHJzWyBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHJhbnNpdGlvblwiIF0gPVxyXG5cdFx0XHRcdCggJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKSB8fCB7fSApWyBcInRyYW5zaXRpb25cIiBdIHx8XHJcblx0XHRcdFx0JC5tb2JpbGUuZGVmYXVsdERpYWxvZ1RyYW5zaXRpb247XHJcblx0XHRcdGF0dHJzWyBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiZGlyZWN0aW9uXCIgXSA9IFwicmV2ZXJzZVwiO1xyXG5cdFx0XHQkdGFyZ2V0LmF0dHIoIGF0dHJzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBDbGFzcyB0aGUgbWFya3VwIGZvciBkaWFsb2cgc3R5bGluZyBhbmQgd3JhcCBpbnRlcmlvclxyXG5cdFx0ZWxlbS5hZGRDbGFzcyggXCJ1aS1kaWFsb2dcIiApXHJcblx0XHRcdC53cmFwSW5uZXIoICQoIFwiPGRpdi8+XCIsIHtcclxuXHJcblx0XHRcdFx0Ly8gQVJJQSByb2xlXHJcblx0XHRcdFx0XCJyb2xlXCIgOiBcImRpYWxvZ1wiLFxyXG5cdFx0XHRcdFwiY2xhc3NcIiA6IFwidWktZGlhbG9nLWNvbnRhaW4gdWktb3ZlcmxheS1zaGFkb3dcIiArXHJcblx0XHRcdFx0XHQoICEhb3B0cy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApXHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfaXNDbG9zZWFibGU6IGZhbHNlLFxyXG5cdFx0XHRfaW5uZXI6IGVsZW0uY2hpbGRyZW4oKSxcclxuXHRcdFx0X2hlYWRlckNsb3NlQnV0dG9uOiBudWxsXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbiggZWxlbSwge1xyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZVZDbGlja1N1Ym1pdFwiLFxyXG5cdFx0XHRzdWJtaXQ6IFwiX2hhbmRsZVZDbGlja1N1Ym1pdFwiLFxyXG5cdFx0XHRwYWdlYmVmb3Jlc2hvdzogXCJfaGFuZGxlUGFnZUJlZm9yZVNob3dcIixcclxuXHRcdFx0cGFnZWJlZm9yZWhpZGU6IFwiX2hhbmRsZVBhZ2VCZWZvcmVIaWRlXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3NldENsb3NlQnRuKCBvcHRzLmNsb3NlQnRuICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCxcclxuXHRcdFx0Y3VycmVudE9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5faW5uZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCAhIW9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5vdmVybGF5VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5hY3RpdmVQYWdlWyAwIF0gPT09IHRoaXMuZWxlbWVudFsgMCBdICkge1xyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLm92ZXJsYXlUaGVtZSA9IG9wdGlvbnMub3ZlcmxheVRoZW1lO1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZVBhZ2VCZWZvcmVTaG93KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG5UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBjdXJyZW50T3B0cy5jbG9zZUJ0bjtcclxuXHRcdFx0Y2xvc2VCdXR0b25UZXh0ID0gb3B0aW9ucy5jbG9zZUJ0blRleHQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBvcHRpb25zLmNsb3NlQnRuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggY2xvc2VCdXR0b25Mb2NhdGlvbiApIHtcclxuXHRcdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X3NldENsb3NlQnRuOiBmdW5jdGlvbiggbG9jYXRpb24sIHRleHQgKSB7XHJcblx0XHR2YXIgZHN0LFxyXG5cdFx0XHRidG4gPSB0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbjtcclxuXHJcblx0XHQvLyBTYW5pdGl6ZSB2YWx1ZVxyXG5cdFx0bG9jYXRpb24gPSBcImxlZnRcIiA9PT0gbG9jYXRpb24gPyBcImxlZnRcIiA6IFwicmlnaHRcIiA9PT0gbG9jYXRpb24gPyBcInJpZ2h0XCIgOiBcIm5vbmVcIjtcclxuXHJcblx0XHRpZiAoIFwibm9uZVwiID09PSBsb2NhdGlvbiApIHtcclxuXHRcdFx0aWYgKCBidG4gKSB7XHJcblx0XHRcdFx0YnRuLnJlbW92ZSgpO1xyXG5cdFx0XHRcdGJ0biA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoIGJ0biApIHtcclxuXHRcdFx0YnRuLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodFwiICkuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgbG9jYXRpb24gKTtcclxuXHRcdFx0aWYgKCB0ZXh0ICkge1xyXG5cdFx0XHRcdGJ0bi50ZXh0KCB0ZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRzdCA9IHRoaXMuX2lubmVyLmZpbmQoIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpcnN0KCk7XHJcblx0XHRcdGJ0biA9ICQoIFwiPGE+PC9hPlwiLCB7XHJcblx0XHRcdFx0XHRcInJvbGVcIjogXCJidXR0b25cIixcclxuXHRcdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1idG4gdWktY29ybmVyLWFsbCB1aS1pY29uLWRlbGV0ZSB1aS1idG4taWNvbi1ub3RleHQgdWktYnRuLVwiICsgbG9jYXRpb25cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC50ZXh0KCB0ZXh0IHx8IHRoaXMub3B0aW9ucy5jbG9zZUJ0blRleHQgfHwgXCJcIiApXHJcblx0XHRcdFx0LnByZXBlbmRUbyggZHN0ICk7XHJcblx0XHRcdHRoaXMuX29uKCBidG4sIHsgY2xpY2s6IFwiY2xvc2VcIiB9ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faGVhZGVyQ2xvc2VCdXR0b24gPSBidG47XHJcblx0fSxcclxuXHJcblx0Ly8gQ2xvc2UgbWV0aG9kIGdvZXMgYmFjayBpbiBoaXN0b3J5XHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhpc3QgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG5cclxuXHRcdGlmICggdGhpcy5faXNDbG9zZWFibGUgKSB7XHJcblx0XHRcdHRoaXMuX2lzQ2xvc2VhYmxlID0gZmFsc2U7XHJcblx0XHRcdC8vIElmIHRoZSBoYXNoIGxpc3RlbmluZyBpcyBlbmFibGVkIGFuZCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgcHJlY2VkaW5nIGhpc3RvcnlcclxuXHRcdFx0Ly8gZW50cnkgaXQncyBvayB0byBnbyBiYWNrLiBJbml0aWFsIHBhZ2VzIHdpdGggdGhlIGRpYWxvZyBoYXNoIHN0YXRlIGFyZSBhbiBleGFtcGxlXHJcblx0XHRcdC8vIHdoZXJlIHRoZSBzdGFjayBjaGVjayBpcyBuZWNlc3NhcnlcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCAmJiBoaXN0LmFjdGl2ZUluZGV4ID4gMCApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5iYWNrKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImJhY2tcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHJJbml0aWFsTGV0dGVyID0gLyhbQS1aXSkvZyxcclxuXHJcblx0Ly8gQ29uc3RydWN0IGljb25wb3MgY2xhc3MgZnJvbSBpY29ucG9zIHZhbHVlXHJcblx0aWNvbnBvc0NsYXNzID0gZnVuY3Rpb24oIGljb25wb3MgKSB7XHJcblx0XHRyZXR1cm4gKCBcInVpLWJ0bi1pY29uLVwiICsgKCBpY29ucG9zID09PSBudWxsID8gXCJsZWZ0XCIgOiBpY29ucG9zICkgKTtcclxuXHR9O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNvbGxhcHNpYmxlXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHRleHBhbmRDdWVUZXh0OiBudWxsLFxyXG5cdFx0Y29sbGFwc2VDdWVUZXh0OiBudWxsLFxyXG5cdFx0Y29sbGFwc2VkOiB0cnVlLFxyXG5cdFx0aGVhZGluZzogXCJoMSxoMixoMyxoNCxoNSxoNixsZWdlbmRcIixcclxuXHRcdGNvbGxhcHNlZEljb246IG51bGwsXHJcblx0XHRleHBhbmRlZEljb246IG51bGwsXHJcblx0XHRpY29ucG9zOiBudWxsLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRjb250ZW50VGhlbWU6IG51bGwsXHJcblx0XHRpbnNldDogbnVsbCxcclxuXHRcdGNvcm5lcnM6IG51bGwsXHJcblx0XHRtaW5pOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dWkgPSB7XHJcblx0XHRcdFx0YWNjb3JkaW9uOiBlbGVtXHJcblx0XHRcdFx0XHQuY2xvc2VzdCggXCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKSxcIiArXHJcblx0XHRcdFx0XHRcdFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGVzZXQnKVwiICtcclxuXHRcdFx0XHRcdFx0KCAkLm1vYmlsZS5jb2xsYXBzaWJsZXNldCA/IFwiLCA6bW9iaWxlLWNvbGxhcHNpYmxlc2V0XCIgOlxyXG5cdFx0XHRcdFx0XHRcdFwiXCIgKSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUtc2V0XCIgKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHRoaXMuX3VpID0gdWk7XHJcblx0XHR0aGlzLl9yZW5kZXJlZE9wdGlvbnMgPSB0aGlzLl9nZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dWkuaGVhZGluZyA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCIudWktY29sbGFwc2libGUtaGVhZGluZ1wiICk7XHJcblx0XHRcdHVpLmNvbnRlbnQgPSB1aS5oZWFkaW5nLm5leHQoKTtcclxuXHRcdFx0dWkuYW5jaG9yID0gdWkuaGVhZGluZy5jaGlsZHJlbigpO1xyXG5cdFx0XHR1aS5zdGF0dXMgPSB1aS5hbmNob3IuY2hpbGRyZW4oIFwiLnVpLWNvbGxhcHNpYmxlLWhlYWRpbmctc3RhdHVzXCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoIGVsZW0sIHVpICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIHVpLmhlYWRpbmcsIHtcclxuXHRcdFx0XCJ0YXBcIjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dWkuaGVhZGluZy5maW5kKCBcImFcIiApLmZpcnN0KCkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRcImNsaWNrXCI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggIXVpLmhlYWRpbmcuaGFzQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIiApICk7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Ly8gQWRqdXN0IHRoZSBrZXlzIGluc2lkZSBvcHRpb25zIGZvciBpbmhlcml0ZWQgdmFsdWVzXHJcblx0X2dldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGtleSxcclxuXHRcdFx0YWNjb3JkaW9uID0gdGhpcy5fdWkuYWNjb3JkaW9uLFxyXG5cdFx0XHRhY2NvcmRpb25XaWRnZXQgPSB0aGlzLl91aS5hY2NvcmRpb25XaWRnZXQ7XHJcblxyXG5cdFx0Ly8gQ29weSBvcHRpb25zXHJcblx0XHRvcHRpb25zID0gJC5leHRlbmQoIHt9LCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCBhY2NvcmRpb24ubGVuZ3RoICYmICFhY2NvcmRpb25XaWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmFjY29yZGlvbldpZGdldCA9XHJcblx0XHRcdGFjY29yZGlvbldpZGdldCA9IGFjY29yZGlvbi5kYXRhKCBcIm1vYmlsZS1jb2xsYXBzaWJsZXNldFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICgga2V5IGluIG9wdGlvbnMgKSB7XHJcblxyXG5cdFx0XHQvLyBSZXRyaWV2ZSB0aGUgb3B0aW9uIHZhbHVlIGZpcnN0IGZyb20gdGhlIG9wdGlvbnMgb2JqZWN0IHBhc3NlZCBpbiBhbmQsIGlmXHJcblx0XHRcdC8vIG51bGwsIGZyb20gdGhlIHBhcmVudCBhY2NvcmRpb24gb3IsIGlmIHRoYXQncyBudWxsIHRvbywgb3IgaWYgdGhlcmUncyBub1xyXG5cdFx0XHQvLyBwYXJlbnQgYWNjb3JkaW9uLCB0aGVuIGZyb20gdGhlIGRlZmF1bHRzLlxyXG5cdFx0XHRvcHRpb25zWyBrZXkgXSA9XHJcblx0XHRcdFx0KCBvcHRpb25zWyBrZXkgXSAhPSBudWxsICkgPyBvcHRpb25zWyBrZXkgXSA6XHJcblx0XHRcdFx0KCBhY2NvcmRpb25XaWRnZXQgKSA/IGFjY29yZGlvbldpZGdldC5vcHRpb25zWyBrZXkgXSA6XHJcblx0XHRcdFx0YWNjb3JkaW9uLmxlbmd0aCA/ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggYWNjb3JkaW9uWyAwIF0sXHJcblx0XHRcdFx0XHRrZXkucmVwbGFjZSggckluaXRpYWxMZXR0ZXIsIFwiLSQxXCIgKS50b0xvd2VyQ2FzZSgpICk6XHJcblx0XHRcdFx0bnVsbDtcclxuXHJcblx0XHRcdGlmICggbnVsbCA9PSBvcHRpb25zWyBrZXkgXSApIHtcclxuXHRcdFx0XHRvcHRpb25zWyBrZXkgXSA9ICQubW9iaWxlLmNvbGxhcHNpYmxlLmRlZmF1bHRzWyBrZXkgXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvcHRpb25zO1xyXG5cdH0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHByZWZpeCwgdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6IHByZWZpeCArIHZhbHVlICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCBlbGVtLCB1aSApIHtcclxuXHRcdHZhciBpY29uY2xhc3MsXHJcblx0XHRcdG9wdHMgPSB0aGlzLl9yZW5kZXJlZE9wdGlvbnMsXHJcblx0XHRcdGNvbnRlbnRUaGVtZUNsYXNzID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb3B0cy5jb250ZW50VGhlbWUgKTtcclxuXHJcblx0XHRlbGVtLmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlIFwiICtcclxuXHRcdFx0KCBvcHRzLmluc2V0ID8gXCJ1aS1jb2xsYXBzaWJsZS1pbnNldCBcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0cy5pbnNldCAmJiBvcHRzLmNvcm5lcnMgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIGNvbnRlbnRUaGVtZUNsYXNzID8gXCJ1aS1jb2xsYXBzaWJsZS10aGVtZWQtY29udGVudCBcIiA6IFwiXCIgKSApO1xyXG5cdFx0dWkub3JpZ2luYWxIZWFkaW5nID0gZWxlbS5jaGlsZHJlbiggdGhpcy5vcHRpb25zLmhlYWRpbmcgKS5maXJzdCgpLFxyXG5cdFx0dWkuY29udGVudCA9IGVsZW1cclxuXHRcdFx0LndyYXBJbm5lciggXCI8ZGl2IFwiICtcclxuXHRcdFx0XHRcImNsYXNzPSd1aS1jb2xsYXBzaWJsZS1jb250ZW50IFwiICtcclxuXHRcdFx0XHRjb250ZW50VGhlbWVDbGFzcyArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdC5jaGlsZHJlbiggXCIudWktY29sbGFwc2libGUtY29udGVudFwiICksXHJcblx0XHR1aS5oZWFkaW5nID0gdWkub3JpZ2luYWxIZWFkaW5nO1xyXG5cclxuXHRcdC8vIFJlcGxhY2UgY29sbGFwc2libGVIZWFkaW5nIGlmIGl0J3MgYSBsZWdlbmRcclxuXHRcdGlmICggdWkuaGVhZGluZy5pcyggXCJsZWdlbmRcIiApICkge1xyXG5cdFx0XHR1aS5oZWFkaW5nID0gJCggXCI8ZGl2IHJvbGU9J2hlYWRpbmcnPlwiKyB1aS5oZWFkaW5nLmh0bWwoKSArXCI8L2Rpdj5cIiApO1xyXG5cdFx0XHR1aS5wbGFjZWhvbGRlciA9ICQoIFwiPGRpdj48IS0tIHBsYWNlaG9sZGVyIGZvciBsZWdlbmQgLS0+PC9kaXY+XCIgKS5pbnNlcnRCZWZvcmUoIHVpLm9yaWdpbmFsSGVhZGluZyApO1xyXG5cdFx0XHR1aS5vcmlnaW5hbEhlYWRpbmcucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWNvbmNsYXNzID0gKCBvcHRzLmNvbGxhcHNlZCA/ICggb3B0cy5jb2xsYXBzZWRJY29uID8gXCJ1aS1pY29uLVwiICsgb3B0cy5jb2xsYXBzZWRJY29uIDogXCJcIiApOlxyXG5cdFx0XHQoIG9wdHMuZXhwYW5kZWRJY29uID8gXCJ1aS1pY29uLVwiICsgb3B0cy5leHBhbmRlZEljb24gOiBcIlwiICkgKTtcclxuXHJcblx0XHR1aS5zdGF0dXMgPSAkKCBcIjxzcGFuIGNsYXNzPSd1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXN0YXR1cyc+PC9zcGFuPlwiICk7XHJcblx0XHR1aS5hbmNob3IgPSB1aS5oZWFkaW5nXHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQvL21vZGlmeSBtYXJrdXAgJiBhdHRyaWJ1dGVzXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nXCIgKVxyXG5cdFx0XHQuYXBwZW5kKCB1aS5zdGF0dXMgKVxyXG5cdFx0XHQud3JhcElubmVyKCBcIjxhIGhyZWY9JyMnIGNsYXNzPSd1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXRvZ2dsZSc+PC9hPlwiIClcclxuXHRcdFx0LmZpbmQoIFwiYVwiIClcclxuXHRcdFx0XHQuZmlyc3QoKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4gXCIgK1xyXG5cdFx0XHRcdFx0KCBpY29uY2xhc3MgPyBpY29uY2xhc3MgKyBcIiBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIGljb25jbGFzcyA/IGljb25wb3NDbGFzcyggb3B0cy5pY29ucG9zICkgK1xyXG5cdFx0XHRcdFx0XHRcIiBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1idG4tXCIsIG9wdHMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdCggb3B0cy5taW5pID8gXCJ1aS1taW5pIFwiIDogXCJcIiApICk7XHJcblxyXG5cdFx0Ly9kcm9wIGhlYWRpbmcgaW4gYmVmb3JlIGNvbnRlbnRcclxuXHRcdHVpLmhlYWRpbmcuaW5zZXJ0QmVmb3JlKCB1aS5jb250ZW50ICk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIHRoaXMub3B0aW9ucy5jb2xsYXBzZWQgKTtcclxuXHJcblx0XHRyZXR1cm4gdWk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9hcHBseU9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fcmVuZGVyZWRPcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2FwcGx5T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgaXNDb2xsYXBzZWQsIG5ld1RoZW1lLCBvbGRUaGVtZSwgaGFzQ29ybmVycywgaGFzSWNvbixcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0Y3VycmVudE9wdHMgPSB0aGlzLl9yZW5kZXJlZE9wdGlvbnMsXHJcblx0XHRcdHVpID0gdGhpcy5fdWksXHJcblx0XHRcdGFuY2hvciA9IHVpLmFuY2hvcixcclxuXHRcdFx0c3RhdHVzID0gdWkuc3RhdHVzLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5fZ2V0T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cclxuXHRcdC8vIEZpcnN0IGFuZCBmb3JlbW9zdCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgY29sbGFwc2libGUgaXMgaW4gdGhlIHByb3BlclxyXG5cdFx0Ly8gc3RhdGUsIGluIGNhc2Ugc29tZWJvZHkgZGVjaWRlZCB0byBjaGFuZ2UgdGhlIGNvbGxhcHNlZCBvcHRpb24gYXQgdGhlXHJcblx0XHQvLyBzYW1lIHRpbWUgYXMgYW5vdGhlciBvcHRpb25cclxuXHRcdGlmICggb3B0aW9ucy5jb2xsYXBzZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIG9wdGlvbnMuY29sbGFwc2VkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aXNDb2xsYXBzZWQgPSBlbGVtLmhhc0NsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZFwiICk7XHJcblxyXG5cdFx0Ly8gV2Ugb25seSBuZWVkIHRvIGFwcGx5IHRoZSBjdWUgdGV4dCBmb3IgdGhlIGN1cnJlbnQgc3RhdGUgcmlnaHQgYXdheS5cclxuXHRcdC8vIFRoZSBjdWUgdGV4dCBmb3IgdGhlIGFsdGVybmF0ZSBzdGF0ZSB3aWxsIGJlIHN0b3JlZCBpbiB0aGUgb3B0aW9uc1xyXG5cdFx0Ly8gYW5kIGFwcGxpZWQgdGhlIG5leHQgdGltZSB0aGUgY29sbGFwc2libGUncyBzdGF0ZSBpcyB0b2dnbGVkXHJcblx0XHRpZiAoIGlzQ29sbGFwc2VkICkge1xyXG5cdFx0XHRpZiAoIG9wdHMuZXhwYW5kQ3VlVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHN0YXR1cy50ZXh0KCBvcHRzLmV4cGFuZEN1ZVRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCBvcHRzLmNvbGxhcHNlQ3VlVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHN0YXR1cy50ZXh0KCBvcHRzLmNvbGxhcHNlQ3VlVGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGljb25cclxuXHJcblx0XHQvLyBJcyBpdCBzdXBwb3NlZCB0byBoYXZlIGFuIGljb24/XHJcblx0XHRoYXNJY29uID1cclxuXHJcblx0XHRcdC8vIElmIHRoZSBjb2xsYXBzZWRJY29uIGlzIGJlaW5nIHNldCwgY29uc3VsdCB0aGF0XHJcblx0XHRcdCggb3B0cy5jb2xsYXBzZWRJY29uICE9PSB1bmRlZmluZWQgPyBvcHRzLmNvbGxhcHNlZEljb24gIT09IGZhbHNlIDpcclxuXHJcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGNvbnN1bHQgdGhlIGV4aXN0aW5nIG9wdGlvbiB2YWx1ZVxyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gIT09IGZhbHNlICk7XHJcblxyXG5cclxuXHRcdC8vIElmIGFueSBpY29uLXJlbGF0ZWQgb3B0aW9ucyBoYXZlIGNoYW5nZWQsIG1ha2Ugc3VyZSB0aGUgbmV3IGljb25cclxuXHRcdC8vIHN0YXRlIGlzIHJlZmxlY3RlZCBieSBmaXJzdCByZW1vdmluZyBhbGwgaWNvbi1yZWxhdGVkIGNsYXNzZXNcclxuXHRcdC8vIHJlZmxlY3RpbmcgdGhlIGN1cnJlbnQgc3RhdGUgYW5kIHRoZW4gYWRkaW5nIGFsbCBpY29uLXJlbGF0ZWRcclxuXHRcdC8vIGNsYXNzZXMgZm9yIHRoZSBuZXcgc3RhdGVcclxuXHRcdGlmICggISggb3B0cy5pY29ucG9zID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0cy5jb2xsYXBzZWRJY29uID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0cy5leHBhbmRlZEljb24gPT09IHVuZGVmaW5lZCApICkge1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBjdXJyZW50IGljb24tcmVsYXRlZCBjbGFzc2VzXHJcblx0XHRcdGFuY2hvci5yZW1vdmVDbGFzcyggWyBpY29ucG9zQ2xhc3MoIGN1cnJlbnRPcHRzLmljb25wb3MgKSBdXHJcblx0XHRcdFx0LmNvbmNhdCggKCBjdXJyZW50T3B0cy5leHBhbmRlZEljb24gP1xyXG5cdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyBjdXJyZW50T3B0cy5leHBhbmRlZEljb24gXSA6IFtdICkgKVxyXG5cdFx0XHRcdC5jb25jYXQoICggY3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiA/XHJcblx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArIGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gXSA6IFtdICkgKVxyXG5cdFx0XHRcdC5qb2luKCBcIiBcIiApICk7XHJcblxyXG5cdFx0XHQvLyBBZGQgbmV3IGNsYXNzZXMgaWYgYW4gaWNvbiBpcyBzdXBwb3NlZCB0byBiZSBwcmVzZW50XHJcblx0XHRcdGlmICggaGFzSWNvbiApIHtcclxuXHRcdFx0XHRhbmNob3IuYWRkQ2xhc3MoXHJcblx0XHRcdFx0XHRbIGljb25wb3NDbGFzcyggb3B0cy5pY29ucG9zICE9PSB1bmRlZmluZWQgP1xyXG5cdFx0XHRcdFx0XHRvcHRzLmljb25wb3MgOiBjdXJyZW50T3B0cy5pY29ucG9zICkgXVxyXG5cdFx0XHRcdFx0XHQuY29uY2F0KCBpc0NvbGxhcHNlZCA/XHJcblx0XHRcdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyAoIG9wdHMuY29sbGFwc2VkSWNvbiAhPT0gdW5kZWZpbmVkID9cclxuXHRcdFx0XHRcdFx0XHRcdG9wdHMuY29sbGFwc2VkSWNvbiA6XHJcblx0XHRcdFx0XHRcdFx0XHRjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uICkgXSA6XHJcblx0XHRcdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyAoIG9wdHMuZXhwYW5kZWRJY29uICE9PSB1bmRlZmluZWQgP1xyXG5cdFx0XHRcdFx0XHRcdFx0b3B0cy5leHBhbmRlZEljb24gOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudE9wdHMuZXhwYW5kZWRJY29uICkgXSApXHJcblx0XHRcdFx0XHRcdC5qb2luKCBcIiBcIiApICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b2xkVGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1idG4tXCIsIGN1cnJlbnRPcHRzLnRoZW1lICk7XHJcblx0XHRcdG5ld1RoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYnRuLVwiLCBvcHRzLnRoZW1lICk7XHJcblx0XHRcdGFuY2hvci5yZW1vdmVDbGFzcyggb2xkVGhlbWUgKS5hZGRDbGFzcyggbmV3VGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMuY29udGVudFRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG9sZFRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIixcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5jb250ZW50VGhlbWUgKTtcclxuXHRcdFx0bmV3VGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLFxyXG5cdFx0XHRcdG9wdHMuY29udGVudFRoZW1lICk7XHJcblx0XHRcdHVpLmNvbnRlbnQucmVtb3ZlQ2xhc3MoIG9sZFRoZW1lICkuYWRkQ2xhc3MoIG5ld1RoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLmluc2V0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtaW5zZXRcIiwgb3B0cy5pbnNldCApO1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdHMuaW5zZXQgJiYgKCBvcHRzLmNvcm5lcnMgfHwgY3VycmVudE9wdHMuY29ybmVycyApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRzLmNvcm5lcnMgJiYgKCBvcHRzLmluc2V0IHx8IGN1cnJlbnRPcHRzLmluc2V0ICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGhhc0Nvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIGhhc0Nvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRhbmNob3IudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRzLm1pbmkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR0aGlzLl9hcHBseU9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHR0aGlzLl9yZW5kZXJlZE9wdGlvbnMgPSB0aGlzLl9nZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlRXhwYW5kQ29sbGFwc2U6IGZ1bmN0aW9uKCBpc0NvbGxhcHNlICkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLl9yZW5kZXJlZE9wdGlvbnMsXHJcblx0XHRcdHVpID0gdGhpcy5fdWk7XHJcblxyXG5cdFx0dWkuc3RhdHVzLnRleHQoIGlzQ29sbGFwc2UgPyBvcHRzLmV4cGFuZEN1ZVRleHQgOiBvcHRzLmNvbGxhcHNlQ3VlVGV4dCApO1xyXG5cdFx0dWkuaGVhZGluZ1xyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIiwgaXNDb2xsYXBzZSApXHJcblx0XHRcdC5maW5kKCBcImFcIiApLmZpcnN0KClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWljb24tXCIgKyBvcHRzLmV4cGFuZGVkSWNvbiwgIWlzQ29sbGFwc2UgKVxyXG5cclxuXHRcdFx0Ly8gbG9naWMgb3IgY2F1c2Ugc2FtZSBpY29uIGZvciBleHBhbmRlZC9jb2xsYXBzZWQgc3RhdGUgd291bGQgcmVtb3ZlIHRoZSB1aS1pY29uLWNsYXNzXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1pY29uLVwiICsgb3B0cy5jb2xsYXBzZWRJY29uLCAoIGlzQ29sbGFwc2UgfHwgb3B0cy5leHBhbmRlZEljb24gPT09IG9wdHMuY29sbGFwc2VkSWNvbiApIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWRcIiwgaXNDb2xsYXBzZSApO1xyXG5cdFx0dWkuY29udGVudFxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtY29udGVudC1jb2xsYXBzZWRcIiwgaXNDb2xsYXBzZSApXHJcblx0XHRcdC5hdHRyKCBcImFyaWEtaGlkZGVuXCIsIGlzQ29sbGFwc2UgKVxyXG5cdFx0XHQudHJpZ2dlciggXCJ1cGRhdGVsYXlvdXRcIiApO1xyXG5cdFx0dGhpcy5vcHRpb25zLmNvbGxhcHNlZCA9IGlzQ29sbGFwc2U7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBpc0NvbGxhcHNlID8gXCJjb2xsYXBzZVwiIDogXCJleHBhbmRcIiApO1xyXG5cdH0sXHJcblxyXG5cdGV4cGFuZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggZmFsc2UgKTtcclxuXHR9LFxyXG5cclxuXHRjb2xsYXBzZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1aSA9IHRoaXMuX3VpLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdWkucGxhY2Vob2xkZXIgKSB7XHJcblx0XHRcdHVpLm9yaWdpbmFsSGVhZGluZy5pbnNlcnRCZWZvcmUoIHVpLnBsYWNlaG9sZGVyICk7XHJcblx0XHRcdHVpLnBsYWNlaG9sZGVyLnJlbW92ZSgpO1xyXG5cdFx0XHR1aS5oZWFkaW5nLnJlbW92ZSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dWkuc3RhdHVzLnJlbW92ZSgpO1xyXG5cdFx0XHR1aS5oZWFkaW5nXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmcgdWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIiApXHJcblx0XHRcdFx0LmNoaWxkcmVuKClcclxuXHRcdFx0XHRcdC5jb250ZW50cygpXHJcblx0XHRcdFx0XHRcdC51bndyYXAoKTtcclxuXHRcdH1cclxuXHJcblx0XHR1aS5hbmNob3IuY29udGVudHMoKS51bndyYXAoKTtcclxuXHRcdHVpLmNvbnRlbnQuY29udGVudHMoKS51bndyYXAoKTtcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29sbGFwc2libGUgdWktY29sbGFwc2libGUtY29sbGFwc2VkIFwiICtcclxuXHRcdFx0XHRcInVpLWNvbGxhcHNpYmxlLXRoZW1lZC1jb250ZW50IHVpLWNvbGxhcHNpYmxlLWluc2V0IHVpLWNvcm5lci1hbGxcIiApO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBEZWZhdWx0cyB0byBiZSB1c2VkIGJ5IGFsbCBpbnN0YW5jZXMgb2YgY29sbGFwc2libGUgaWYgcGVyLWluc3RhbmNlIHZhbHVlc1xyXG4vLyBhcmUgdW5zZXQgb3IgaWYgbm90aGluZyBpcyBzcGVjaWZpZWQgYnkgd2F5IG9mIGluaGVyaXRhbmNlIGZyb20gYW4gYWNjb3JkaW9uLlxyXG4vLyBOb3RlIHRoYXQgdGhpcyBoYXNoIGRvZXMgbm90IGNvbnRhaW4gb3B0aW9ucyBcImNvbGxhcHNlZFwiIG9yIFwiaGVhZGluZ1wiLFxyXG4vLyBiZWNhdXNlIHRob3NlIGFyZSBub3QgaW5oZXJpdGFibGUuXHJcbiQubW9iaWxlLmNvbGxhcHNpYmxlLmRlZmF1bHRzID0ge1xyXG5cdGV4cGFuZEN1ZVRleHQ6IFwiIGNsaWNrIHRvIGV4cGFuZCBjb250ZW50c1wiLFxyXG5cdGNvbGxhcHNlQ3VlVGV4dDogXCIgY2xpY2sgdG8gY29sbGFwc2UgY29udGVudHNcIixcclxuXHRjb2xsYXBzZWRJY29uOiBcInBsdXNcIixcclxuXHRjb250ZW50VGhlbWU6IFwiaW5oZXJpdFwiLFxyXG5cdGV4cGFuZGVkSWNvbjogXCJtaW51c1wiLFxyXG5cdGljb25wb3M6IFwibGVmdFwiLFxyXG5cdGluc2V0OiB0cnVlLFxyXG5cdGNvcm5lcnM6IHRydWUsXHJcblx0dGhlbWU6IFwiaW5oZXJpdFwiLFxyXG5cdG1pbmk6IGZhbHNlXHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1aVNjcmVlbkhpZGRlblJlZ2V4ID0gL1xcYnVpLXNjcmVlbi1oaWRkZW5cXGIvO1xyXG5mdW5jdGlvbiBub0hpZGRlbkNsYXNzKCBlbGVtZW50cyApIHtcclxuXHR2YXIgaW5kZXgsXHJcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGgsXHJcblx0XHRyZXN1bHQgPSBbXTtcclxuXHJcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHRcdGlmICggIWVsZW1lbnRzWyBpbmRleCBdLmNsYXNzTmFtZS5tYXRjaCggdWlTY3JlZW5IaWRkZW5SZWdleCApICkge1xyXG5cdFx0XHRyZXN1bHQucHVzaCggZWxlbWVudHNbIGluZGV4IF0gKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiAkKCByZXN1bHQgKTtcclxufVxyXG5cclxuJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgPSB7XHJcblx0X2dldFZpc2libGVzOiBmdW5jdGlvbiggJGVscywgY3JlYXRlICkge1xyXG5cdFx0dmFyIHZpc2libGVzO1xyXG5cclxuXHRcdGlmICggY3JlYXRlICkge1xyXG5cdFx0XHR2aXNpYmxlcyA9IG5vSGlkZGVuQ2xhc3MoICRlbHMgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZpc2libGVzID0gJGVscy5maWx0ZXIoIFwiOnZpc2libGVcIiApO1xyXG5cdFx0XHRpZiAoIHZpc2libGVzLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHR2aXNpYmxlcyA9IG5vSGlkZGVuQ2xhc3MoICRlbHMgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB2aXNpYmxlcztcclxuXHR9LFxyXG5cclxuXHRfYWRkRmlyc3RMYXN0Q2xhc3NlczogZnVuY3Rpb24oICRlbHMsICR2aXNpYmxlcywgY3JlYXRlICkge1xyXG5cdFx0JGVscy5yZW1vdmVDbGFzcyggXCJ1aS1maXJzdC1jaGlsZCB1aS1sYXN0LWNoaWxkXCIgKTtcclxuXHRcdCR2aXNpYmxlcy5lcSggMCApLmFkZENsYXNzKCBcInVpLWZpcnN0LWNoaWxkXCIgKS5lbmQoKS5sYXN0KCkuYWRkQ2xhc3MoIFwidWktbGFzdC1jaGlsZFwiICk7XHJcblx0XHRpZiAoICFjcmVhdGUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcInVwZGF0ZWxheW91dFwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlbW92ZUZpcnN0TGFzdENsYXNzZXM6IGZ1bmN0aW9uKCAkZWxzICkge1xyXG5cdFx0JGVscy5yZW1vdmVDbGFzcyggXCJ1aS1maXJzdC1jaGlsZCB1aS1sYXN0LWNoaWxkXCIgKTtcclxuXHR9XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yID0gXCI6bW9iaWxlLWNvbGxhcHNpYmxlLCBcIiArICQubW9iaWxlLmNvbGxhcHNpYmxlLmluaXRTZWxlY3RvcjtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jb2xsYXBzaWJsZXNldFwiLCAkLmV4dGVuZCgge1xyXG5cclxuXHQvLyBUaGUgaW5pdFNlbGVjdG9yIGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjAuIEluIDEuNS4wIHdlIHdpbGwgdXNlXHJcblx0Ly8gOmpxbURhdGEocm9sZT0nY29sbGFwc2libGVzZXQnKSB3aGljaCB3aWxsIGFsbG93IHVzIHRvIGdldCByaWQgb2YgdGhlIGxpbmVcclxuXHQvLyBiZWxvdyBhbHRvZ2V0aGVyLCBiZWNhdXNlIHRoZSBhdXRvaW5pdCB3aWxsIGdlbmVyYXRlIHN1Y2ggYW4gaW5pdFNlbGVjdG9yXHJcblx0aW5pdFNlbGVjdG9yOiBcIjpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlLXNldCcpLDpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlc2V0JylcIixcclxuXHJcblx0b3B0aW9uczogJC5leHRlbmQoIHtcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sICQubW9iaWxlLmNvbGxhcHNpYmxlLmRlZmF1bHRzICksXHJcblxyXG5cdF9oYW5kbGVDb2xsYXBzaWJsZUV4cGFuZDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGNsb3Nlc3RDb2xsYXBzaWJsZSA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIFwiLnVpLWNvbGxhcHNpYmxlXCIgKTtcclxuXHJcblx0XHRpZiAoIGNsb3Nlc3RDb2xsYXBzaWJsZS5wYXJlbnQoKS5pcyggXCI6bW9iaWxlLWNvbGxhcHNpYmxlc2V0LCA6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKVwiICkgKSB7XHJcblx0XHRcdGNsb3Nlc3RDb2xsYXBzaWJsZVxyXG5cdFx0XHRcdC5zaWJsaW5ncyggXCIudWktY29sbGFwc2libGU6bm90KC51aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWQpXCIgKVxyXG5cdFx0XHRcdC5jb2xsYXBzaWJsZSggXCJjb2xsYXBzZVwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfY2xhc3NlczogXCJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCAhb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0ZWxlbS5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1zZXQgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCBvcHRzLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0KCBvcHRzLmNvcm5lcnMgJiYgb3B0cy5pbnNldCA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggJC5tb2JpbGUuY29sbGFwc2libGUuaW5pdFNlbGVjdG9yICkuY29sbGFwc2libGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggZWxlbSwgeyBjb2xsYXBzaWJsZWV4cGFuZDogXCJfaGFuZGxlQ29sbGFwc2libGVFeHBhbmRcIiB9ICk7XHJcblx0fSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggcHJlZml4LCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogcHJlZml4ICsgdmFsdWUgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfaW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCB0cnVlICk7XHJcblxyXG5cdFx0Ly8gQmVjYXVzZSB0aGUgY29ybmVycyBhcmUgaGFuZGxlZCBieSB0aGUgY29sbGFwc2libGUgaXRzZWxmIGFuZCB0aGUgZGVmYXVsdCBzdGF0ZSBpcyBjb2xsYXBzZWRcclxuXHRcdC8vIFRoYXQgd2FzIGNhdXNpbmcgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80MTE2XHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LmNoaWxkcmVuKCBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yIClcclxuXHRcdFx0LmZpbHRlciggXCI6anFtRGF0YShjb2xsYXBzZWQ9J2ZhbHNlJylcIiApXHJcblx0XHRcdC5jb2xsYXBzaWJsZSggXCJleHBhbmRcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciByZXQsIGhhc0Nvcm5lcnMsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRoZW1lQ2xhc3MgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgb3B0aW9ucy50aGVtZSApO1xyXG5cclxuXHRcdGlmICggdGhlbWVDbGFzcyApIHtcclxuXHRcdFx0ZWxlbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIHRoaXMub3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoZW1lQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaW5zZXQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRpb25zLmluc2V0ICYmICggb3B0aW9ucy5jb3JuZXJzIHx8IHRoaXMub3B0aW9ucy5jb3JuZXJzICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdGlvbnMuY29ybmVycyAmJiAoIG9wdGlvbnMuaW5zZXQgfHwgdGhpcy5vcHRpb25zLmluc2V0ICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGhhc0Nvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIGhhc0Nvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXQgPSB0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcIjptb2JpbGUtY29sbGFwc2libGVcIiApLmNvbGxhcHNpYmxlKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWwgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0dGhpcy5fcmVtb3ZlRmlyc3RMYXN0Q2xhc3NlcyggZWwuY2hpbGRyZW4oIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgKSApO1xyXG5cdFx0ZWxcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLXNldCB1aS1jb3JuZXItYWxsIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgdGhpcy5vcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHQuY2hpbGRyZW4oIFwiOm1vYmlsZS1jb2xsYXBzaWJsZVwiIClcclxuXHRcdFx0LmNvbGxhcHNpYmxlKCBcImRlc3Ryb3lcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIGNvbGxhcHNpYmxlc0luU2V0ID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yICk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmZpbmQoICQubW9iaWxlLmNvbGxhcHNpYmxlLmluaXRTZWxlY3RvciApLm5vdCggXCIudWktY29sbGFwc2libGVcIiApLmNvbGxhcHNpYmxlKCk7XHJcblxyXG5cdFx0dGhpcy5fYWRkRmlyc3RMYXN0Q2xhc3NlcyggY29sbGFwc2libGVzSW5TZXQsIHRoaXMuX2dldFZpc2libGVzKCBjb2xsYXBzaWJsZXNJblNldCwgY3JlYXRlICksIGNyZWF0ZSApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaCggZmFsc2UgKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gRGVwcmVjYXRlZCBpbiAxLjRcclxuJC5mbi5maWVsZGNvbnRhaW4gPSBmdW5jdGlvbigvKiBvcHRpb25zICovKSB7XHJcblx0cmV0dXJuIHRoaXMuYWRkQ2xhc3MoIFwidWktZmllbGQtY29udGFpblwiICk7XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQuZm4uZ3JpZCA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRvID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdGdyaWQ6IG51bGxcclxuXHRcdFx0fSwgb3B0aW9ucyApLFxyXG5cdFx0XHQka2lkcyA9ICR0aGlzLmNoaWxkcmVuKCksXHJcblx0XHRcdGdyaWRDb2xzID0geyBzb2xvOjEsIGE6MiwgYjozLCBjOjQsIGQ6NSB9LFxyXG5cdFx0XHRncmlkID0gby5ncmlkLFxyXG5cdFx0XHRpdGVyYXRvcixcclxuXHRcdFx0bGV0dGVyO1xyXG5cclxuXHRcdFx0aWYgKCAhZ3JpZCApIHtcclxuXHRcdFx0XHRpZiAoICRraWRzLmxlbmd0aCA8PSA1ICkge1xyXG5cdFx0XHRcdFx0Zm9yICggbGV0dGVyIGluIGdyaWRDb2xzICkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIGdyaWRDb2xzWyBsZXR0ZXIgXSA9PT0gJGtpZHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHRcdGdyaWQgPSBsZXR0ZXI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Z3JpZCA9IFwiYVwiO1xyXG5cdFx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktZ3JpZC1kdW9cIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpdGVyYXRvciA9IGdyaWRDb2xzW2dyaWRdO1xyXG5cclxuXHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWdyaWQtXCIgKyBncmlkICk7XHJcblxyXG5cdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibisxKVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stYVwiICk7XHJcblxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDEgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rMilcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWJcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDIgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rMylcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWNcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDMgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rNClcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWRcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDQgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rNSlcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWVcIiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5uYXZiYXJcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGljb25wb3M6IFwidG9wXCIsXHJcblx0XHRncmlkOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyICRuYXZiYXIgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdCRuYXZidG5zID0gJG5hdmJhci5maW5kKCBcImEsIGJ1dHRvblwiICksXHJcblx0XHRcdGljb25wb3MgPSAkbmF2YnRucy5maWx0ZXIoIFwiOmpxbURhdGEoaWNvbilcIiApLmxlbmd0aCA/IHRoaXMub3B0aW9ucy5pY29ucG9zIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdCRuYXZiYXIuYWRkQ2xhc3MoIFwidWktbmF2YmFyXCIgKVxyXG5cdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwibmF2aWdhdGlvblwiIClcclxuXHRcdFx0LmZpbmQoIFwidWxcIiApXHJcblx0XHRcdC5qcW1FbmhhbmNlYWJsZSgpXHJcblx0XHRcdC5ncmlkKHsgZ3JpZDogdGhpcy5vcHRpb25zLmdyaWQgfSk7XHJcblxyXG5cdFx0JG5hdmJ0bnNcclxuXHRcdFx0LmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBpY29uID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcImljb25cIiApLFxyXG5cdFx0XHRcdFx0dGhlbWUgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwidGhlbWVcIiApLFxyXG5cdFx0XHRcdFx0Y2xhc3NlcyA9IFwidWktYnRuXCI7XHJcblxyXG5cdFx0XHRcdGlmICggdGhlbWUgKSB7XHJcblx0XHRcdFx0XHRjbGFzc2VzICs9IFwiIHVpLWJ0bi1cIiArIHRoZW1lO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGljb24gKSB7XHJcblx0XHRcdFx0XHRjbGFzc2VzICs9IFwiIHVpLWljb24tXCIgKyBpY29uICsgXCIgdWktYnRuLWljb24tXCIgKyBpY29ucG9zO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKCB0aGlzICkuYWRkQ2xhc3MoIGNsYXNzZXMgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0JG5hdmJhci5kZWxlZ2F0ZSggXCJhXCIsIFwidmNsaWNrXCIsIGZ1bmN0aW9uKCAvKiBldmVudCAqLyApIHtcclxuXHRcdFx0dmFyIGFjdGl2ZUJ0biA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdGlmICggISggYWN0aXZlQnRuLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSB8fFxyXG5cclxuXHRcdFx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIGFmdGVyIDEuNC4wIHJlbGVhc2VcclxuXHRcdFx0XHQvLyBvbmx5IHVpLXN0YXRlLWRpc2FibGVkIHNob3VsZCBiZSBwcmVzZW50IHRoZXJlYWZ0ZXJcclxuXHRcdFx0XHRhY3RpdmVCdG4uaGFzQ2xhc3MoIFwidWktZGlzYWJsZWRcIiApIHx8XHJcblx0XHRcdFx0YWN0aXZlQnRuLmhhc0NsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApICkgKSB7XHJcblxyXG5cdFx0XHRcdCRuYXZidG5zLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdGFjdGl2ZUJ0bi5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGNvZGUgYmVsb3cgaXMgYSB3b3JrYXJvdW5kIHRvIGZpeCAjMTE4MVxyXG5cdFx0XHRcdCQoIGRvY3VtZW50ICkub25lKCBcInBhZ2VoaWRlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0YWN0aXZlQnRuLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zIGluIHRoZSBuYXZiYXIgd2l0aCB1aS1zdGF0ZS1wZXJzaXN0IGNsYXNzIHNob3VsZCByZWdhaW4gdGhlaXIgYWN0aXZlIHN0YXRlIGJlZm9yZSBwYWdlIHNob3dcclxuXHRcdCRuYXZiYXIuY2xvc2VzdCggXCIudWktcGFnZVwiICkuYmluZCggXCJwYWdlYmVmb3Jlc2hvd1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0JG5hdmJ0bnMuZmlsdGVyKCBcIi51aS1zdGF0ZS1wZXJzaXN0XCIgKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBnZXRBdHRyID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0Y291bnRUaGVtZTogbnVsbCwgLyogRGVwcmVjYXRlZCBpbiAxLjQgKi9cclxuXHRcdGRpdmlkZXJUaGVtZTogbnVsbCxcclxuXHRcdGljb246IFwiY2FyYXQtclwiLFxyXG5cdFx0c3BsaXRJY29uOiBcImNhcmF0LXJcIixcclxuXHRcdHNwbGl0VGhlbWU6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0aW5zZXQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdCA9IHRoaXMsXHJcblx0XHRcdGxpc3R2aWV3Q2xhc3NlcyA9IFwiXCI7XHJcblxyXG5cdFx0bGlzdHZpZXdDbGFzc2VzICs9IHQub3B0aW9ucy5pbnNldCA/IFwiIHVpLWxpc3R2aWV3LWluc2V0XCIgOiBcIlwiO1xyXG5cclxuXHRcdGlmICggISF0Lm9wdGlvbnMuaW5zZXQgKSB7XHJcblx0XHRcdGxpc3R2aWV3Q2xhc3NlcyArPSB0Lm9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCI7XHJcblx0XHRcdGxpc3R2aWV3Q2xhc3NlcyArPSB0Lm9wdGlvbnMuc2hhZG93ID8gXCIgdWktc2hhZG93XCIgOiBcIlwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNyZWF0ZSBsaXN0dmlldyBtYXJrdXBcclxuXHRcdHQuZWxlbWVudC5hZGRDbGFzcyggXCIgdWktbGlzdHZpZXdcIiArIGxpc3R2aWV3Q2xhc3NlcyApO1xyXG5cclxuXHRcdHQucmVmcmVzaCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRPRE86IFJlbW92ZSBpbiAxLjVcclxuXHRfZmluZEZpcnN0RWxlbWVudEJ5VGFnTmFtZTogZnVuY3Rpb24oIGVsZSwgbmV4dFByb3AsIGxjTmFtZSwgdWNOYW1lICkge1xyXG5cdFx0dmFyIGRpY3QgPSB7fTtcclxuXHRcdGRpY3RbIGxjTmFtZSBdID0gZGljdFsgdWNOYW1lIF0gPSB0cnVlO1xyXG5cdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdGlmICggZGljdFsgZWxlLm5vZGVOYW1lIF0gKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVsZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGUgPSBlbGVbIG5leHRQcm9wIF07XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9LFxyXG5cdC8vIFRPRE86IFJlbW92ZSBpbiAxLjVcclxuXHRfYWRkVGh1bWJDbGFzc2VzOiBmdW5jdGlvbiggY29udGFpbmVycyApIHtcclxuXHRcdHZhciBpLCBpbWcsIGxlbiA9IGNvbnRhaW5lcnMubGVuZ3RoO1xyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdFx0aW1nID0gJCggdGhpcy5fZmluZEZpcnN0RWxlbWVudEJ5VGFnTmFtZSggY29udGFpbmVyc1sgaSBdLmZpcnN0Q2hpbGQsIFwibmV4dFNpYmxpbmdcIiwgXCJpbWdcIiwgXCJJTUdcIiApICk7XHJcblx0XHRcdGlmICggaW1nLmxlbmd0aCApIHtcclxuXHRcdFx0XHQkKCB0aGlzLl9maW5kRmlyc3RFbGVtZW50QnlUYWdOYW1lKCBpbWdbIDAgXS5wYXJlbnROb2RlLCBcInBhcmVudE5vZGVcIiwgXCJsaVwiLCBcIkxJXCIgKSApLmFkZENsYXNzKCBpbWcuaGFzQ2xhc3MoIFwidWktbGktaWNvblwiICkgPyBcInVpLWxpLWhhcy1pY29uXCIgOiBcInVpLWxpLWhhcy10aHVtYlwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZ2V0Q2hpbGRyZW5CeVRhZ05hbWU6IGZ1bmN0aW9uKCBlbGUsIGxjTmFtZSwgdWNOYW1lICkge1xyXG5cdFx0dmFyIHJlc3VsdHMgPSBbXSxcclxuXHRcdFx0ZGljdCA9IHt9O1xyXG5cdFx0ZGljdFsgbGNOYW1lIF0gPSBkaWN0WyB1Y05hbWUgXSA9IHRydWU7XHJcblx0XHRlbGUgPSBlbGUuZmlyc3RDaGlsZDtcclxuXHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHRpZiAoIGRpY3RbIGVsZS5ub2RlTmFtZSBdICkge1xyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlID0gZWxlLm5leHRTaWJsaW5nO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuICQoIHJlc3VsdHMgKTtcclxuXHR9LFxyXG5cclxuXHRfYmVmb3JlTGlzdHZpZXdSZWZyZXNoOiAkLm5vb3AsXHJcblx0X2FmdGVyTGlzdHZpZXdSZWZyZXNoOiAkLm5vb3AsXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgYnV0dG9uQ2xhc3MsIHBvcywgbnVtbGksIGl0ZW0sIGl0ZW1DbGFzcywgaXRlbVRoZW1lLCBpdGVtSWNvbiwgaWNvbiwgYSxcclxuXHRcdFx0aXNEaXZpZGVyLCBzdGFydENvdW50LCBuZXdTdGFydENvdW50LCB2YWx1ZSwgbGFzdCwgc3BsaXR0aGVtZSwgc3BsaXRUaGVtZUNsYXNzLCBzcGxpdGljb24sXHJcblx0XHRcdGFsdEJ1dHRvbkNsYXNzLCBkaXZpZGVyVGhlbWUsIGxpLFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHQkbGlzdCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b2wgPSAhISQubm9kZU5hbWUoICRsaXN0WyAwIF0sIFwib2xcIiApLFxyXG5cdFx0XHRzdGFydCA9ICRsaXN0LmF0dHIoIFwic3RhcnRcIiApLFxyXG5cdFx0XHRpdGVtQ2xhc3NEaWN0ID0ge30sXHJcblx0XHRcdGNvdW50QnViYmxlcyA9ICRsaXN0LmZpbmQoIFwiLnVpLWxpLWNvdW50XCIgKSxcclxuXHRcdFx0Y291bnRUaGVtZSA9IGdldEF0dHIoICRsaXN0WyAwIF0sIFwiY291bnR0aGVtZVwiICkgfHwgdGhpcy5vcHRpb25zLmNvdW50VGhlbWUsXHJcblx0XHRcdGNvdW50VGhlbWVDbGFzcyA9IGNvdW50VGhlbWUgPyBcInVpLWJvZHktXCIgKyBjb3VudFRoZW1lIDogXCJ1aS1ib2R5LWluaGVyaXRcIjtcclxuXHJcblx0XHRpZiAoIG8udGhlbWUgKSB7XHJcblx0XHRcdCRsaXN0LmFkZENsYXNzKCBcInVpLWdyb3VwLXRoZW1lLVwiICsgby50aGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGEgc3RhcnQgYXR0cmlidXRlIGhhcyBiZWVuIHNldCB3aGlsZSB0YWtpbmcgYSB2YWx1ZSBvZiAwIGludG8gYWNjb3VudFxyXG5cdFx0aWYgKCBvbCAmJiAoIHN0YXJ0IHx8IHN0YXJ0ID09PSAwICkgKSB7XHJcblx0XHRcdHN0YXJ0Q291bnQgPSBwYXJzZUludCggc3RhcnQsIDEwICkgLSAxO1xyXG5cdFx0XHQkbGlzdC5jc3MoIFwiY291bnRlci1yZXNldFwiLCBcImxpc3RudW1iZXJpbmcgXCIgKyBzdGFydENvdW50ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fYmVmb3JlTGlzdHZpZXdSZWZyZXNoKCk7XHJcblxyXG5cdFx0bGkgPSB0aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZSggJGxpc3RbIDAgXSwgXCJsaVwiLCBcIkxJXCIgKTtcclxuXHJcblx0XHRmb3IgKCBwb3MgPSAwLCBudW1saSA9IGxpLmxlbmd0aDsgcG9zIDwgbnVtbGk7IHBvcysrICkge1xyXG5cdFx0XHRpdGVtID0gbGkuZXEoIHBvcyApO1xyXG5cdFx0XHRpdGVtQ2xhc3MgPSBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKCBjcmVhdGUgfHwgaXRlbVsgMCBdLmNsYXNzTmFtZS5zZWFyY2goIC9cXGJ1aS1saS1zdGF0aWNcXGJ8XFxidWktbGktZGl2aWRlclxcYi8gKSA8IDAgKSB7XHJcblx0XHRcdFx0YSA9IHRoaXMuX2dldENoaWxkcmVuQnlUYWdOYW1lKCBpdGVtWyAwIF0sIFwiYVwiLCBcIkFcIiApO1xyXG5cdFx0XHRcdGlzRGl2aWRlciA9ICggZ2V0QXR0ciggaXRlbVsgMCBdLCBcInJvbGVcIiApID09PSBcImxpc3QtZGl2aWRlclwiICk7XHJcblx0XHRcdFx0dmFsdWUgPSBpdGVtLmF0dHIoIFwidmFsdWVcIiApO1xyXG5cdFx0XHRcdGl0ZW1UaGVtZSA9IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJ0aGVtZVwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggYS5sZW5ndGggJiYgYVsgMCBdLmNsYXNzTmFtZS5zZWFyY2goIC9cXGJ1aS1idG5cXGIvICkgPCAwICYmICFpc0RpdmlkZXIgKSB7XHJcblx0XHRcdFx0XHRpdGVtSWNvbiA9IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJpY29uXCIgKTtcclxuXHRcdFx0XHRcdGljb24gPSAoIGl0ZW1JY29uID09PSBmYWxzZSApID8gZmFsc2UgOiAoIGl0ZW1JY29uIHx8IG8uaWNvbiApO1xyXG5cclxuXHRcdFx0XHRcdC8vIFRPRE86IFJlbW92ZSBpbiAxLjUgdG9nZXRoZXIgd2l0aCBsaW5rcy5qcyAobGlua3MuanMgLyAudWktbGluayBkZXByZWNhdGVkIGluIDEuNClcclxuXHRcdFx0XHRcdGEucmVtb3ZlQ2xhc3MoIFwidWktbGlua1wiICk7XHJcblxyXG5cdFx0XHRcdFx0YnV0dG9uQ2xhc3MgPSBcInVpLWJ0blwiO1xyXG5cclxuXHRcdFx0XHRcdGlmICggaXRlbVRoZW1lICkge1xyXG5cdFx0XHRcdFx0XHRidXR0b25DbGFzcyArPSBcIiB1aS1idG4tXCIgKyBpdGVtVGhlbWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBhLmxlbmd0aCA+IDEgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1DbGFzcyA9IFwidWktbGktaGFzLWFsdFwiO1xyXG5cclxuXHRcdFx0XHRcdFx0bGFzdCA9IGEubGFzdCgpO1xyXG5cdFx0XHRcdFx0XHRzcGxpdHRoZW1lID0gZ2V0QXR0ciggbGFzdFsgMCBdLCBcInRoZW1lXCIgKSB8fCBvLnNwbGl0VGhlbWUgfHwgZ2V0QXR0ciggaXRlbVsgMCBdLCBcInRoZW1lXCIsIHRydWUgKTtcclxuXHRcdFx0XHRcdFx0c3BsaXRUaGVtZUNsYXNzID0gc3BsaXR0aGVtZSA/IFwiIHVpLWJ0bi1cIiArIHNwbGl0dGhlbWUgOiBcIlwiO1xyXG5cdFx0XHRcdFx0XHRzcGxpdGljb24gPSBnZXRBdHRyKCBsYXN0WyAwIF0sIFwiaWNvblwiICkgfHwgZ2V0QXR0ciggaXRlbVsgMCBdLCBcImljb25cIiApIHx8IG8uc3BsaXRJY29uO1xyXG5cdFx0XHRcdFx0XHRhbHRCdXR0b25DbGFzcyA9IFwidWktYnRuIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1pY29uLVwiICsgc3BsaXRpY29uICsgc3BsaXRUaGVtZUNsYXNzO1xyXG5cclxuXHRcdFx0XHRcdFx0bGFzdFxyXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCBcInRpdGxlXCIsICQudHJpbSggbGFzdC5nZXRFbmNvZGVkVGV4dCgpICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyggYWx0QnV0dG9uQ2xhc3MgKVxyXG5cdFx0XHRcdFx0XHRcdC5lbXB0eSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUmVkdWNlIHRvIHRoZSBmaXJzdCBhbmNob3IsIGJlY2F1c2Ugb25seSB0aGUgZmlyc3QgZ2V0cyB0aGUgYnV0dG9uQ2xhc3NcclxuXHRcdFx0XHRcdFx0YSA9IGEuZmlyc3QoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGljb24gKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbkNsYXNzICs9IFwiIHVpLWJ0bi1pY29uLXJpZ2h0IHVpLWljb24tXCIgKyBpY29uO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEFwcGx5IGJ1dHRvbkNsYXNzIHRvIHRoZSAoZmlyc3QpIGFuY2hvclxyXG5cdFx0XHRcdFx0YS5hZGRDbGFzcyggYnV0dG9uQ2xhc3MgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBpc0RpdmlkZXIgKSB7XHJcblx0XHRcdFx0XHRkaXZpZGVyVGhlbWUgPSAoIGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJ0aGVtZVwiICkgfHwgby5kaXZpZGVyVGhlbWUgfHwgby50aGVtZSApO1xyXG5cclxuXHRcdFx0XHRcdGl0ZW1DbGFzcyA9IFwidWktbGktZGl2aWRlciB1aS1iYXItXCIgKyAoIGRpdmlkZXJUaGVtZSA/IGRpdmlkZXJUaGVtZSA6IFwiaW5oZXJpdFwiICk7XHJcblxyXG5cdFx0XHRcdFx0aXRlbS5hdHRyKCBcInJvbGVcIiwgXCJoZWFkaW5nXCIgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBhLmxlbmd0aCA8PSAwICkge1xyXG5cdFx0XHRcdFx0aXRlbUNsYXNzID0gXCJ1aS1saS1zdGF0aWMgdWktYm9keS1cIiArICggaXRlbVRoZW1lID8gaXRlbVRoZW1lIDogXCJpbmhlcml0XCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBvbCAmJiB2YWx1ZSApIHtcclxuXHRcdFx0XHRcdG5ld1N0YXJ0Q291bnQgPSBwYXJzZUludCggdmFsdWUgLCAxMCApIC0gMTtcclxuXHJcblx0XHRcdFx0XHRpdGVtLmNzcyggXCJjb3VudGVyLXJlc2V0XCIsIFwibGlzdG51bWJlcmluZyBcIiArIG5ld1N0YXJ0Q291bnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEluc3RlYWQgb2Ygc2V0dGluZyBpdGVtIGNsYXNzIGRpcmVjdGx5IG9uIHRoZSBsaXN0IGl0ZW1cclxuXHRcdFx0Ly8gYXQgdGhpcyBwb2ludCBpbiB0aW1lLCBwdXNoIHRoZSBpdGVtIGludG8gYSBkaWN0aW9uYXJ5XHJcblx0XHRcdC8vIHRoYXQgdGVsbHMgdXMgd2hhdCBjbGFzcyB0byBzZXQgb24gaXQgc28gd2UgY2FuIGRvIHRoaXMgYWZ0ZXIgdGhpc1xyXG5cdFx0XHQvLyBwcm9jZXNzaW5nIGxvb3AgaXMgZmluaXNoZWQuXHJcblxyXG5cdFx0XHRpZiAoICFpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXSApIHtcclxuXHRcdFx0XHRpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXSA9IFtdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXS5wdXNoKCBpdGVtWyAwIF0gKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZXQgdGhlIGFwcHJvcHJpYXRlIGxpc3R2aWV3IGl0ZW0gY2xhc3NlcyBvbiBlYWNoIGxpc3QgaXRlbS5cclxuXHRcdC8vIFRoZSBtYWluIHJlYXNvbiB3ZSBkaWRuJ3QgZG8gdGhpc1xyXG5cdFx0Ly8gaW4gdGhlIGZvci1sb29wIGFib3ZlIGlzIGJlY2F1c2Ugd2UgY2FuIGVsaW1pbmF0ZSBwZXItaXRlbSBmdW5jdGlvbiBvdmVyaGVhZFxyXG5cdFx0Ly8gYnkgY2FsbGluZyBhZGRDbGFzcygpIGFuZCBjaGlsZHJlbigpIG9uY2Ugb3IgdHdpY2UgYWZ0ZXJ3YXJkcy4gVGhpc1xyXG5cdFx0Ly8gY2FuIGdpdmUgdXMgYSBzaWduaWZpY2FudCBib29zdCBvbiBwbGF0Zm9ybXMgbGlrZSBXUDcuNS5cclxuXHJcblx0XHRmb3IgKCBpdGVtQ2xhc3MgaW4gaXRlbUNsYXNzRGljdCApIHtcclxuXHRcdFx0JCggaXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0gKS5hZGRDbGFzcyggaXRlbUNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y291bnRCdWJibGVzLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkuY2xvc2VzdCggXCJsaVwiICkuYWRkQ2xhc3MoIFwidWktbGktaGFzLWNvdW50XCIgKTtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKCBjb3VudFRoZW1lQ2xhc3MgKSB7XHJcblx0XHRcdGNvdW50QnViYmxlcy5ub3QoIFwiW2NsYXNzKj0ndWktYm9keS0nXVwiICkuYWRkQ2xhc3MoIGNvdW50VGhlbWVDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40LiBGcm9tIDEuNSB5b3UgaGF2ZSB0byBhZGQgY2xhc3MgdWktbGktaGFzLXRodW1iIG9yIHVpLWxpLWhhcy1pY29uIHRvIHRoZSBMSS5cclxuXHRcdHRoaXMuX2FkZFRodW1iQ2xhc3NlcyggbGkgKTtcclxuXHRcdHRoaXMuX2FkZFRodW1iQ2xhc3NlcyggbGkuZmluZCggXCIudWktYnRuXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuX2FmdGVyTGlzdHZpZXdSZWZyZXNoKCk7XHJcblxyXG5cdFx0dGhpcy5fYWRkRmlyc3RMYXN0Q2xhc3NlcyggbGksIHRoaXMuX2dldFZpc2libGVzKCBsaSwgY3JlYXRlICksIGNyZWF0ZSApO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QXV0b2RpdmlkZXJzU2VsZWN0b3IoIGVsdCApIHtcclxuXHQvLyBsb29rIGZvciB0aGUgdGV4dCBpbiB0aGUgZ2l2ZW4gZWxlbWVudFxyXG5cdHZhciB0ZXh0ID0gJC50cmltKCBlbHQudGV4dCgpICkgfHwgbnVsbDtcclxuXHJcblx0aWYgKCAhdGV4dCApIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gY3JlYXRlIHRoZSB0ZXh0IGZvciB0aGUgZGl2aWRlciAoZmlyc3QgdXBwZXJjYXNlZCBsZXR0ZXIpXHJcblx0dGV4dCA9IHRleHQuc2xpY2UoIDAsIDEgKS50b1VwcGVyQ2FzZSgpO1xyXG5cclxuXHRyZXR1cm4gdGV4dDtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQubW9iaWxlLmxpc3R2aWV3LCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0YXV0b2RpdmlkZXJzOiBmYWxzZSxcclxuXHRcdGF1dG9kaXZpZGVyc1NlbGVjdG9yOiBkZWZhdWx0QXV0b2RpdmlkZXJzU2VsZWN0b3JcclxuXHR9LFxyXG5cclxuXHRfYmVmb3JlTGlzdHZpZXdSZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmF1dG9kaXZpZGVycyApIHtcclxuXHRcdFx0dGhpcy5fcmVwbGFjZURpdmlkZXJzKCk7XHJcblx0XHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZXBsYWNlRGl2aWRlcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGksIGxpcywgbGksIGRpdmlkZXJUZXh0LFxyXG5cdFx0XHRsYXN0RGl2aWRlclRleHQgPSBudWxsLFxyXG5cdFx0XHRsaXN0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRkaXZpZGVyO1xyXG5cclxuXHRcdGxpc3QuY2hpbGRyZW4oIFwibGk6anFtRGF0YShyb2xlPSdsaXN0LWRpdmlkZXInKVwiICkucmVtb3ZlKCk7XHJcblxyXG5cdFx0bGlzID0gbGlzdC5jaGlsZHJlbiggXCJsaVwiICk7XHJcblxyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsaXMubGVuZ3RoIDsgaSsrICkge1xyXG5cdFx0XHRsaSA9IGxpc1sgaSBdO1xyXG5cdFx0XHRkaXZpZGVyVGV4dCA9IHRoaXMub3B0aW9ucy5hdXRvZGl2aWRlcnNTZWxlY3RvciggJCggbGkgKSApO1xyXG5cclxuXHRcdFx0aWYgKCBkaXZpZGVyVGV4dCAmJiBsYXN0RGl2aWRlclRleHQgIT09IGRpdmlkZXJUZXh0ICkge1xyXG5cdFx0XHRcdGRpdmlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpXCIgKTtcclxuXHRcdFx0XHRkaXZpZGVyLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggZGl2aWRlclRleHQgKSApO1xyXG5cdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZVwiLCBcImxpc3QtZGl2aWRlclwiICk7XHJcblx0XHRcdFx0bGkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGRpdmlkZXIsIGxpICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxhc3REaXZpZGVyVGV4dCA9IGRpdmlkZXJUZXh0O1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciByZGl2aWRlciA9IC8oXnxcXHMpdWktbGktZGl2aWRlcigkfFxccykvLFxyXG5cdHJoaWRkZW4gPSAvKF58XFxzKXVpLXNjcmVlbi1oaWRkZW4oJHxcXHMpLztcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLm1vYmlsZS5saXN0dmlldywge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGhpZGVEaXZpZGVyczogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfYWZ0ZXJMaXN0dmlld1JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGl0ZW1zLCBpZHgsIGl0ZW0sIGhpZGVEaXZpZGVyID0gdHJ1ZTtcclxuXHJcblx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oaWRlRGl2aWRlcnMgKSB7XHJcblx0XHRcdGl0ZW1zID0gdGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoIHRoaXMuZWxlbWVudFsgMCBdLCBcImxpXCIsIFwiTElcIiApO1xyXG5cdFx0XHRmb3IgKCBpZHggPSBpdGVtcy5sZW5ndGggLSAxIDsgaWR4ID4gLTEgOyBpZHgtLSApIHtcclxuXHRcdFx0XHRpdGVtID0gaXRlbXNbIGlkeCBdO1xyXG5cdFx0XHRcdGlmICggaXRlbS5jbGFzc05hbWUubWF0Y2goIHJkaXZpZGVyICkgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGhpZGVEaXZpZGVyICkge1xyXG5cdFx0XHRcdFx0XHRpdGVtLmNsYXNzTmFtZSA9IGl0ZW0uY2xhc3NOYW1lICsgXCIgdWktc2NyZWVuLWhpZGRlblwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aGlkZURpdmlkZXIgPSB0cnVlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoICFpdGVtLmNsYXNzTmFtZS5tYXRjaCggcmhpZGRlbiApICkge1xyXG5cdFx0XHRcdFx0XHRoaWRlRGl2aWRlciA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLm5vanMgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cdCQoIFwiOmpxbURhdGEocm9sZT0nbm9qcycpXCIsIHRhcmdldCApLmFkZENsYXNzKCBcInVpLW5vanNcIiApO1xyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ID0ge1xyXG5cdF9oYW5kbGVGb3JtUmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcImZvcm1cIiApLCB7XHJcblx0XHRcdHJlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl9kZWxheSggXCJfcmVzZXRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKlxyXG4qIFwiY2hlY2tib3hyYWRpb1wiIHBsdWdpblxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgZXNjYXBlSWQgPSAkLm1vYmlsZS5wYXRoLmhhc2hUb1NlbGVjdG9yO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNoZWNrYm94cmFkaW9cIiwgJC5leHRlbmQoIHtcclxuXHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0Om5vdCggOmpxbURhdGEocm9sZT0nZmxpcHN3aXRjaCcgKSApW3R5cGU9J2NoZWNrYm94J10saW5wdXRbdHlwZT0ncmFkaW8nXTpub3QoIDpqcW1EYXRhKHJvbGU9J2ZsaXBzd2l0Y2gnICkpXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBcImluaGVyaXRcIixcclxuXHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0aWNvbnBvczogXCJsZWZ0XCJcclxuXHJcblx0fSxcclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aW5oZXJpdEF0dHIgPSBmdW5jdGlvbiggaW5wdXQsIGRhdGFBdHRyICkge1xyXG5cdFx0XHRcdHJldHVybiBpbnB1dC5qcW1EYXRhKCBkYXRhQXR0ciApIHx8XHJcblx0XHRcdFx0XHRpbnB1dC5jbG9zZXN0KCBcImZvcm0sIGZpZWxkc2V0XCIgKS5qcW1EYXRhKCBkYXRhQXR0ciApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRsYWJlbCA9IHRoaXMub3B0aW9ucy5lbmhhbmNlZCA/XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZWxlbWVudDogdGhpcy5lbGVtZW50LnNpYmxpbmdzKCBcImxhYmVsXCIgKSxcclxuXHRcdFx0XHRcdGlzUGFyZW50OiBmYWxzZVxyXG5cdFx0XHRcdH0gOlxyXG5cdFx0XHRcdHRoaXMuX2ZpbmRMYWJlbCgpLFxyXG5cdFx0XHRpbnB1dHR5cGUgPSBpbnB1dFswXS50eXBlLFxyXG5cdFx0XHRjaGVja2VkQ2xhc3MgPSBcInVpLVwiICsgaW5wdXR0eXBlICsgXCItb25cIixcclxuXHRcdFx0dW5jaGVja2VkQ2xhc3MgPSBcInVpLVwiICsgaW5wdXR0eXBlICsgXCItb2ZmXCI7XHJcblxyXG5cdFx0aWYgKCBpbnB1dHR5cGUgIT09IFwiY2hlY2tib3hcIiAmJiBpbnB1dHR5cGUgIT09IFwicmFkaW9cIiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5lbGVtZW50WzBdLmRpc2FibGVkICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdG8uaWNvbnBvcyA9IGluaGVyaXRBdHRyKCBpbnB1dCwgXCJpY29ucG9zXCIgKSB8fFxyXG5cdFx0XHRsYWJlbC5lbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJpY29ucG9zXCIgKSB8fCBvLmljb25wb3MsXHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIG9wdGlvbnNcclxuXHRcdG8ubWluaSA9IGluaGVyaXRBdHRyKCBpbnB1dCwgXCJtaW5pXCIgKSB8fCBvLm1pbmk7XHJcblxyXG5cdFx0Ly8gRXhwb3NlIGZvciBvdGhlciBtZXRob2RzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRpbnB1dDogaW5wdXQsXHJcblx0XHRcdGxhYmVsOiBsYWJlbC5lbGVtZW50LFxyXG5cdFx0XHRsYWJlbElzUGFyZW50OiBsYWJlbC5pc1BhcmVudCxcclxuXHRcdFx0aW5wdXR0eXBlOiBpbnB1dHR5cGUsXHJcblx0XHRcdGNoZWNrZWRDbGFzczogY2hlY2tlZENsYXNzLFxyXG5cdFx0XHR1bmNoZWNrZWRDbGFzczogdW5jaGVja2VkQ2xhc3NcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCBsYWJlbC5lbGVtZW50LCB7XHJcblx0XHRcdHZtb3VzZW92ZXI6IFwiX2hhbmRsZUxhYmVsVk1vdXNlT3ZlclwiLFxyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZUxhYmVsVkNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKCBpbnB1dCwge1xyXG5cdFx0XHR2bW91c2Vkb3duOiBcIl9jYWNoZVZhbHNcIixcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVJbnB1dFZDbGlja1wiLFxyXG5cdFx0XHRmb2N1czogXCJfaGFuZGxlSW5wdXRGb2N1c1wiLFxyXG5cdFx0XHRibHVyOiBcIl9oYW5kbGVJbnB1dEJsdXJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfZmluZExhYmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYXJlbnRMYWJlbCwgbGFiZWwsIGlzUGFyZW50LFxyXG5cdFx0XHRpbnB1dCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0bGFiZWxzTGlzdCA9IGlucHV0WyAwIF0ubGFiZWxzO1xyXG5cclxuXHRcdGlmKCBsYWJlbHNMaXN0ICYmIGxhYmVsc0xpc3QubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0bGFiZWwgPSAkKCBsYWJlbHNMaXN0WyAwIF0gKTtcclxuXHRcdFx0aXNQYXJlbnQgPSAkLmNvbnRhaW5zKCBsYWJlbFsgMCBdLCBpbnB1dFsgMCBdICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwYXJlbnRMYWJlbCA9IGlucHV0LmNsb3Nlc3QoIFwibGFiZWxcIiApO1xyXG5cdFx0XHRpc1BhcmVudCA9ICggcGFyZW50TGFiZWwubGVuZ3RoID4gMCApO1xyXG5cclxuXHRcdFx0Ly8gTk9URTogV2luZG93cyBQaG9uZSBjb3VsZCBub3QgZmluZCB0aGUgbGFiZWwgdGhyb3VnaCBhIHNlbGVjdG9yXHJcblx0XHRcdC8vIGZpbHRlciB3b3JrcyB0aG91Z2guXHJcblx0XHRcdGxhYmVsID0gaXNQYXJlbnQgPyBwYXJlbnRMYWJlbCA6XHJcblx0XHRcdFx0JCggdGhpcy5kb2N1bWVudFsgMCBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcImxhYmVsXCIgKSApXHJcblx0XHRcdFx0XHQuZmlsdGVyKCBcIltmb3I9J1wiICsgZXNjYXBlSWQoIGlucHV0WyAwIF0uaWQgKSArIFwiJ11cIiApXHJcblx0XHRcdFx0XHQuZmlyc3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRlbGVtZW50OiBsYWJlbCxcclxuXHRcdFx0aXNQYXJlbnQ6IGlzUGFyZW50XHJcblx0XHR9O1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMubGFiZWwuYWRkQ2xhc3MoIFwidWktYnRuIHVpLWNvcm5lci1hbGxcIik7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmxhYmVsSXNQYXJlbnQgKSB7XHJcblx0XHRcdHRoaXMuaW5wdXQuYWRkKCB0aGlzLmxhYmVsICkud3JhcEFsbCggdGhpcy5fd3JhcHBlcigpICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvL3RoaXMuZWxlbWVudC5yZXBsYWNlV2l0aCggdGhpcy5pbnB1dC5hZGQoIHRoaXMubGFiZWwgKS53cmFwQWxsKCB0aGlzLl93cmFwcGVyKCkgKSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQud3JhcCggdGhpcy5fd3JhcHBlcigpICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wYXJlbnQoKS5wcmVwZW5kKCB0aGlzLmxhYmVsICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV3JhcCB0aGUgaW5wdXQgKyBsYWJlbCBpbiBhIGRpdlxyXG5cclxuXHRcdHRoaXMuX3NldE9wdGlvbnMoe1xyXG5cdFx0XHRcInRoZW1lXCI6IHRoaXMub3B0aW9ucy50aGVtZSxcclxuXHRcdFx0XCJpY29ucG9zXCI6IHRoaXMub3B0aW9ucy5pY29ucG9zLFxyXG5cdFx0XHRcIm1pbmlcIjogdGhpcy5vcHRpb25zLm1pbmlcclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRfd3JhcHBlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2IGNsYXNzPSdcIiAgK1xyXG5cdFx0XHQoIHRoaXMub3B0aW9ucy53cmFwcGVyQ2xhc3MgPyB0aGlzLm9wdGlvbnMud3JhcHBlckNsYXNzIDogXCJcIiApICtcclxuXHRcdFx0XCIgdWktXCIgKyB0aGlzLmlucHV0dHlwZSArXHJcblx0XHRcdCggdGhpcy5vcHRpb25zLmRpc2FibGVkID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIiA6IFwiXCIgKSArIFwiJyA+PC9kaXY+XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxhYmVsLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0Qmx1cjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxhYmVsLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0VkNsaWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIEFkZHMgY2hlY2tlZCBhdHRyaWJ1dGUgdG8gY2hlY2tlZCBpbnB1dCB3aGVuIGtleWJvYXJkIGlzIHVzZWRcclxuXHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiwgdGhpcy5lbGVtZW50LmlzKCBcIjpjaGVja2VkXCIgKSApO1xyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5ub3QoIHRoaXMuZWxlbWVudCApLnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG5cdFx0dGhpcy5fdXBkYXRlQWxsKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxhYmVsVk1vdXNlT3ZlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLmxhYmVsLnBhcmVudCgpLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxhYmVsVkNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0aWYgKCBpbnB1dC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY2FjaGVWYWxzKCk7XHJcblxyXG5cdFx0aW5wdXQucHJvcCggXCJjaGVja2VkXCIsIHRoaXMuaW5wdXR0eXBlID09PSBcInJhZGlvXCIgJiYgdHJ1ZSB8fCAhaW5wdXQucHJvcCggXCJjaGVja2VkXCIgKSApO1xyXG5cclxuXHRcdC8vIHRyaWdnZXIgY2xpY2sgaGFuZGxlcidzIGJvdW5kIGRpcmVjdGx5IHRvIHRoZSBpbnB1dCBhcyBhIHN1YnN0aXR1dGUgZm9yXHJcblx0XHQvLyBob3cgbGFiZWwgY2xpY2tzIGJlaGF2ZSBub3JtYWxseSBpbiB0aGUgYnJvd3NlcnNcclxuXHRcdC8vIFRPRE86IGl0IHdvdWxkIGJlIG5pY2UgdG8gbGV0IHRoZSBicm93c2VyJ3MgaGFuZGxlIHRoZSBjbGlja3MgYW5kIHBhc3MgdGhlbVxyXG5cdFx0Ly8gICAgICAgdGhyb3VnaCB0byB0aGUgYXNzb2NpYXRlIGlucHV0LiB3ZSBjYW4gc3dhbGxvdyB0aGF0IGNsaWNrIGF0IHRoZSBwYXJlbnRcclxuXHRcdC8vICAgICAgIHdyYXBwZXIgZWxlbWVudCBsZXZlbFxyXG5cdFx0aW5wdXQudHJpZ2dlckhhbmRsZXIoIFwiY2xpY2tcIiApO1xyXG5cclxuXHRcdC8vIElucHV0IHNldCBmb3IgY29tbW9uIHJhZGlvIGJ1dHRvbnMgd2lsbCBjb250YWluIGFsbCB0aGUgcmFkaW9cclxuXHRcdC8vIGJ1dHRvbnMsIGJ1dCB3aWxsIG5vdCBmb3IgY2hlY2tib3hlcy4gY2xlYXJpbmcgdGhlIGNoZWNrZWQgc3RhdHVzXHJcblx0XHQvLyBvZiBvdGhlciByYWRpb3MgZW5zdXJlcyB0aGUgYWN0aXZlIGJ1dHRvbiBzdGF0ZSBpcyBhcHBsaWVkIHByb3Blcmx5XHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLm5vdCggaW5wdXQgKS5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuXHJcblx0XHR0aGlzLl91cGRhdGVBbGwoKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRfY2FjaGVWYWxzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS5hdHRyKFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJjYWNoZVZhbFwiLCB0aGlzLmNoZWNrZWQgKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdC8vIFJldHVybnMgdGhvc2UgcmFkaW8gYnV0dG9ucyB0aGF0IGFyZSBzdXBwb3NlZCB0byBiZSBpbiB0aGUgc2FtZSBncm91cCBhc1xyXG5cdC8vIHRoaXMgcmFkaW8gYnV0dG9uLiBJbiB0aGUgY2FzZSBvZiBhIGNoZWNrYm94IG9yIGEgcmFkaW8gbGFja2luZyBhIG5hbWVcclxuXHQvLyBhdHRyaWJ1dGUsIGl0IHJldHVybnMgdGhpcy5lbGVtZW50LlxyXG5cdF9nZXRJbnB1dFNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0b3IsIGZvcm1JZCxcclxuXHRcdFx0cmFkaW8gPSB0aGlzLmVsZW1lbnRbIDAgXSxcclxuXHRcdFx0bmFtZSA9IHJhZGlvLm5hbWUsXHJcblx0XHRcdGZvcm0gPSByYWRpby5mb3JtLFxyXG5cdFx0XHRkb2MgPSB0aGlzLmVsZW1lbnQucGFyZW50cygpLmxhc3QoKS5nZXQoIDAgKSxcclxuXHJcblx0XHRcdC8vIEEgcmFkaW8gaXMgYWx3YXlzIGEgbWVtYmVyIG9mIGl0cyBvd24gZ3JvdXBcclxuXHRcdFx0cmFkaW9zID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdC8vIE9ubHkgc3RhcnQgcnVubmluZyBzZWxlY3RvcnMgaWYgdGhpcyBpcyBhbiBhdHRhY2hlZCByYWRpbyBidXR0b24gd2l0aCBhIG5hbWVcclxuXHRcdGlmICggbmFtZSAmJiB0aGlzLmlucHV0dHlwZSA9PT0gXCJyYWRpb1wiICYmIGRvYyApIHtcclxuXHRcdFx0c2VsZWN0b3IgPSBcImlucHV0W3R5cGU9J3JhZGlvJ11bbmFtZT0nXCIgKyBlc2NhcGVJZCggbmFtZSApICsgXCInXVwiO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgaW5zaWRlIGEgZm9ybVxyXG5cdFx0XHRpZiAoIGZvcm0gKSB7XHJcblx0XHRcdFx0Zm9ybUlkID0gZm9ybS5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgZm9ybSBoYXMgYW4gSUQsIGNvbGxlY3QgcmFkaW9zIHNjYXR0ZXJlZCB0aHJvdWdodCB0aGUgZG9jdW1lbnQgd2hpY2hcclxuXHRcdFx0XHQvLyBuZXZlcnRoZWxlc3MgYXJlIHBhcnQgb2YgdGhlIGZvcm0gYnkgd2F5IG9mIHRoZSB2YWx1ZSBvZiB0aGVpciBmb3JtIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdGlmICggZm9ybUlkICkge1xyXG5cdFx0XHRcdFx0cmFkaW9zID0gJCggc2VsZWN0b3IgKyBcIltmb3JtPSdcIiArIGVzY2FwZUlkKCBmb3JtSWQgKSArIFwiJ11cIiwgZG9jICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBBbHNvIGFkZCB0byB0aG9zZSB0aGUgcmFkaW9zIGluIHRoZSBmb3JtIGl0c2VsZlxyXG5cdFx0XHRcdHJhZGlvcyA9ICQoIGZvcm0gKS5maW5kKCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU29tZSByYWRpb3MgaW5zaWRlIHRoZSBmb3JtIG1heSBiZWxvbmcgdG8gc29tZSBvdGhlciBmb3JtIGJ5IHZpcnR1ZSBvZlxyXG5cdFx0XHRcdFx0Ly8gaGF2aW5nIGEgZm9ybSBhdHRyaWJ1dGUgZGVmaW5lZCBvbiB0aGVtLCBzbyB3ZSBtdXN0IGZpbHRlciB0aGVtIG91dCBoZXJlXHJcblx0XHRcdFx0XHRyZXR1cm4gKCB0aGlzLmZvcm0gPT09IGZvcm0gKTtcclxuXHRcdFx0XHR9KS5hZGQoIHJhZGlvcyApO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgb3V0c2lkZSBhIGZvcm1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gQ29sbGVjdCBhbGwgdGhvc2UgcmFkaW9zIHdoaWNoIGFyZSBhbHNvIG91dHNpZGUgb2YgYSBmb3JtIGFuZCBtYXRjaCBvdXIgbmFtZVxyXG5cdFx0XHRcdHJhZGlvcyA9ICQoIHNlbGVjdG9yLCBkb2MgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICF0aGlzLmZvcm07XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByYWRpb3M7XHJcblx0fSxcclxuXHJcblx0X3VwZGF0ZUFsbDogZnVuY3Rpb24oIGNoYW5nZVRyaWdnZXJlZCApIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHRpZiAoICggdGhpcy5jaGVja2VkIHx8IHNlbGYuaW5wdXR0eXBlID09PSBcImNoZWNrYm94XCIgKSAmJiAhY2hhbmdlVHJpZ2dlcmVkICkge1xyXG5cdFx0XHRcdCR0aGlzLnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHQvLyBJcyB0aGUgd2lkZ2V0IHN1cHBvc2VkIHRvIGRpc3BsYXkgYW4gaWNvbj9cclxuXHRfaGFzSWNvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29udHJvbGdyb3VwLCBjb250cm9sZ3JvdXBXaWRnZXQsXHJcblx0XHRcdGNvbnRyb2xncm91cENvbnN0cnVjdG9yID0gJC5tb2JpbGUuY29udHJvbGdyb3VwO1xyXG5cclxuXHRcdC8vIElmIHRoZSBjb250cm9sZ3JvdXAgd2lkZ2V0IGlzIGRlZmluZWQgLi4uXHJcblx0XHRpZiAoIGNvbnRyb2xncm91cENvbnN0cnVjdG9yICkge1xyXG5cdFx0XHRjb250cm9sZ3JvdXAgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdChcclxuXHRcdFx0XHRcIjptb2JpbGUtY29udHJvbGdyb3VwLFwiICtcclxuXHRcdFx0XHRjb250cm9sZ3JvdXBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdFNlbGVjdG9yICk7XHJcblxyXG5cdFx0XHQvLyAuLi4gYW5kIHRoZSBjaGVja2JveCBpcyBpbiBhIGNvbnRyb2xncm91cCAuLi5cclxuXHRcdFx0aWYgKCBjb250cm9sZ3JvdXAubGVuZ3RoID4gMCApIHtcclxuXHJcblx0XHRcdFx0Ly8gLi4uIGxvb2sgZm9yIGEgY29udHJvbGdyb3VwIHdpZGdldCBpbnN0YW5jZSwgYW5kIC4uLlxyXG5cdFx0XHRcdGNvbnRyb2xncm91cFdpZGdldCA9ICQuZGF0YSggY29udHJvbGdyb3VwWyAwIF0sIFwibW9iaWxlLWNvbnRyb2xncm91cFwiICk7XHJcblxyXG5cdFx0XHRcdC8vIC4uLiBpZiBmb3VuZCwgZGVjaWRlIGJhc2VkIG9uIHRoZSBvcHRpb24gdmFsdWUsIC4uLlxyXG5cdFx0XHRcdHJldHVybiAoICggY29udHJvbGdyb3VwV2lkZ2V0ID8gY29udHJvbGdyb3VwV2lkZ2V0Lm9wdGlvbnMudHlwZSA6XHJcblxyXG5cdFx0XHRcdFx0Ly8gLi4uIG90aGVyd2lzZSBkZWNpZGUgYmFzZWQgb24gdGhlIFwidHlwZVwiIGRhdGEgYXR0cmlidXRlLlxyXG5cdFx0XHRcdFx0Y29udHJvbGdyb3VwLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0eXBlXCIgKSApICE9PSBcImhvcml6b250YWxcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTm9ybWFsbHksIHRoZSB3aWRnZXQgZGlzcGxheXMgYW4gaWNvbi5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlzQ2hlY2tlZCA9IHRoaXMuZWxlbWVudFsgMCBdLmNoZWNrZWQsXHJcblx0XHRcdGFjdGl2ZSA9ICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzLFxyXG5cdFx0XHRpY29ucG9zQ2xhc3MgPSBcInVpLWJ0bi1pY29uLVwiICsgdGhpcy5vcHRpb25zLmljb25wb3MsXHJcblx0XHRcdGFkZENsYXNzZXMgPSBbXSxcclxuXHRcdFx0cmVtb3ZlQ2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdGlmICggdGhpcy5faGFzSWNvbigpICkge1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIGFjdGl2ZSApO1xyXG5cdFx0XHRhZGRDbGFzc2VzLnB1c2goIGljb25wb3NDbGFzcyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCBpY29ucG9zQ2xhc3MgKTtcclxuXHRcdFx0KCBpc0NoZWNrZWQgPyBhZGRDbGFzc2VzIDogcmVtb3ZlQ2xhc3NlcyApLnB1c2goIGFjdGl2ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaXNDaGVja2VkICkge1xyXG5cdFx0XHRhZGRDbGFzc2VzLnB1c2goIHRoaXMuY2hlY2tlZENsYXNzICk7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggdGhpcy51bmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YWRkQ2xhc3Nlcy5wdXNoKCB0aGlzLnVuY2hlY2tlZENsYXNzICk7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggdGhpcy5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApO1xyXG5cclxuXHRcdHRoaXMubGFiZWxcclxuXHRcdFx0LmFkZENsYXNzKCBhZGRDbGFzc2VzLmpvaW4oIFwiIFwiICkgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIHJlbW92ZUNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5sYWJlbC5wYXJlbnQoKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgbGFiZWwgPSB0aGlzLmxhYmVsLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0b3V0ZXIgPSB0aGlzLndpZGdldCgpLFxyXG5cdFx0XHRoYXNJY29uID0gdGhpcy5faGFzSWNvbigpO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmlucHV0LnByb3AoIFwiZGlzYWJsZWRcIiwgISFvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCAhIW9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGxhYmVsXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1cIiArIGN1cnJlbnRPcHRpb25zLnRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLndyYXBwZXJDbGFzcyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggY3VycmVudE9wdGlvbnMud3JhcHBlckNsYXNzIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIG9wdGlvbnMud3JhcHBlckNsYXNzICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuaWNvbnBvcyAhPT0gdW5kZWZpbmVkICYmIGhhc0ljb24gKSB7XHJcblx0XHRcdGxhYmVsLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1pY29uLVwiICsgY3VycmVudE9wdGlvbnMuaWNvbnBvcyApLmFkZENsYXNzKCBcInVpLWJ0bi1pY29uLVwiICsgb3B0aW9ucy5pY29ucG9zICk7XHJcblx0XHR9IGVsc2UgaWYgKCAhaGFzSWNvbiApIHtcclxuXHRcdFx0bGFiZWwucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWljb24tXCIgKyBjdXJyZW50T3B0aW9ucy5pY29ucG9zICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH1cclxuXHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuYnV0dG9uXCIsIHtcclxuXHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0W3R5cGU9J2J1dHRvbiddLCBpbnB1dFt0eXBlPSdzdWJtaXQnXSwgaW5wdXRbdHlwZT0ncmVzZXQnXVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGljb246IG51bGwsXHJcblx0XHRpY29ucG9zOiBcImxlZnRcIixcclxuXHRcdGljb25zaGFkb3c6IGZhbHNlLCAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRpbmxpbmU6IG51bGwsXHJcblx0XHRtaW5pOiBudWxsLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnQuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHR3cmFwcGVyOiB0aGlzLmVsZW1lbnQucGFyZW50KClcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKCB7XHJcblx0XHRcdGZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLndpZGdldCgpLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRibHVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLndpZGdldCgpLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucmVmcmVzaCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC53cmFwKCB0aGlzLl9idXR0b24oKSApO1xyXG5cdH0sXHJcblxyXG5cdF9idXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGljb25DbGFzc2VzID0gdGhpcy5fZ2V0SWNvbkNsYXNzZXMoIHRoaXMub3B0aW9ucyApO1xyXG5cclxuXHRcdHJldHVybiAkKFwiPGRpdiBjbGFzcz0ndWktYnRuIHVpLWlucHV0LWJ0blwiICtcclxuXHRcdFx0KCBvcHRpb25zLndyYXBwZXJDbGFzcyA/IFwiIFwiICsgb3B0aW9ucy53cmFwcGVyQ2xhc3MgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMudGhlbWUgPyBcIiB1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuc2hhZG93ID8gXCIgdWktc2hhZG93XCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuaW5saW5lID8gXCIgdWktYnRuLWlubGluZVwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLm1pbmkgPyBcIiB1aS1taW5pXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuZGlzYWJsZWQgPyBcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBpY29uQ2xhc3NlcyA/ICggXCIgXCIgKyBpY29uQ2xhc3NlcyApIDogXCJcIiApICtcclxuXHRcdFx0XCInID5cIiArIHRoaXMuZWxlbWVudC52YWwoKSArIFwiPC9kaXY+XCIgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMud3JhcHBlcjtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoIHRoaXMud3JhcHBlciApO1xyXG5cdFx0XHR0aGlzLndyYXBwZXIucmVtb3ZlKCk7XHJcblx0fSxcclxuXHJcblx0X2dldEljb25DbGFzc2VzOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHJldHVybiAoIG9wdGlvbnMuaWNvbiA/ICggXCJ1aS1pY29uLVwiICsgb3B0aW9ucy5pY29uICtcclxuXHRcdFx0KCBvcHRpb25zLmljb25zaGFkb3cgPyBcIiB1aS1zaGFkb3ctaWNvblwiIDogXCJcIiApICsgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRcdFwiIHVpLWJ0bi1pY29uLVwiICsgb3B0aW9ucy5pY29ucG9zICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIG91dGVyID0gdGhpcy53aWRnZXQoKTtcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy50aGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLXNoYWRvd1wiLCBvcHRpb25zLnNoYWRvdyApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmlubGluZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1idG4taW5saW5lXCIsIG9wdGlvbnMuaW5saW5lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5pY29uICE9PSB1bmRlZmluZWQgfHxcclxuXHRcdFx0XHRvcHRpb25zLmljb25zaGFkb3cgIT09IHVuZGVmaW5lZCB8fCAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdFx0XHRvcHRpb25zLmljb25wb3MgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX2dldEljb25DbGFzc2VzKCB0aGlzLm9wdGlvbnMgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl9nZXRJY29uQ2xhc3NlcyhcclxuXHRcdFx0XHRcdCQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zICkgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBvcmlnaW5hbEVsZW1lbnQsXHJcblx0XHRcdGlzRGlzYWJsZWQgPSB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaWNvbiAmJiB0aGlzLm9wdGlvbnMuaWNvbnBvcyA9PT0gXCJub3RleHRcIiAmJiB0aGlzLmVsZW1lbnQuYXR0ciggXCJ0aXRsZVwiICkgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRpdGxlXCIsIHRoaXMuZWxlbWVudC52YWwoKSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCAhY3JlYXRlICkge1xyXG5cdFx0XHRvcmlnaW5hbEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuZGV0YWNoKCk7XHJcblx0XHRcdCQoIHRoaXMud3JhcHBlciApLnRleHQoIHRoaXMuZWxlbWVudC52YWwoKSApLmFwcGVuZCggb3JpZ2luYWxFbGVtZW50ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCAhPT0gaXNEaXNhYmxlZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiBpc0Rpc2FibGVkIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblx0dmFyXHRtZXRhID0gJCggXCJtZXRhW25hbWU9dmlld3BvcnRdXCIgKSxcclxuXHRcdGluaXRpYWxDb250ZW50ID0gbWV0YS5hdHRyKCBcImNvbnRlbnRcIiApLFxyXG5cdFx0ZGlzYWJsZWRab29tID0gaW5pdGlhbENvbnRlbnQgKyBcIixtYXhpbXVtLXNjYWxlPTEsIHVzZXItc2NhbGFibGU9bm9cIixcclxuXHRcdGVuYWJsZWRab29tID0gaW5pdGlhbENvbnRlbnQgKyBcIixtYXhpbXVtLXNjYWxlPTEwLCB1c2VyLXNjYWxhYmxlPXllc1wiLFxyXG5cdFx0ZGlzYWJsZWRJbml0aWFsbHkgPSAvKHVzZXItc2NhbGFibGVbXFxzXSo9W1xcc10qbm8pfChtYXhpbXVtLXNjYWxlW1xcc10qPVtcXHNdKjEpWyQsXFxzXS8udGVzdCggaW5pdGlhbENvbnRlbnQgKTtcclxuXHJcblx0JC5tb2JpbGUuem9vbSA9ICQuZXh0ZW5kKCB7fSwge1xyXG5cdFx0ZW5hYmxlZDogIWRpc2FibGVkSW5pdGlhbGx5LFxyXG5cdFx0bG9ja2VkOiBmYWxzZSxcclxuXHRcdGRpc2FibGU6IGZ1bmN0aW9uKCBsb2NrICkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZEluaXRpYWxseSAmJiAhJC5tb2JpbGUuem9vbS5sb2NrZWQgKSB7XHJcblx0XHRcdFx0bWV0YS5hdHRyKCBcImNvbnRlbnRcIiwgZGlzYWJsZWRab29tICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5sb2NrZWQgPSBsb2NrIHx8IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZW5hYmxlOiBmdW5jdGlvbiggdW5sb2NrICkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZEluaXRpYWxseSAmJiAoICEkLm1vYmlsZS56b29tLmxvY2tlZCB8fCB1bmxvY2sgPT09IHRydWUgKSApIHtcclxuXHRcdFx0XHRtZXRhLmF0dHIoIFwiY29udGVudFwiLCBlbmFibGVkWm9vbSApO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5sb2NrZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHJlc3RvcmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZEluaXRpYWxseSApIHtcclxuXHRcdFx0XHRtZXRhLmF0dHIoIFwiY29udGVudFwiLCBpbml0aWFsQ29udGVudCApO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0oIGpRdWVyeSApKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRleHRpbnB1dFwiLCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0W3R5cGU9J3RleHQnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3NlYXJjaCddLFwiICtcclxuXHRcdFwiOmpxbURhdGEodHlwZT0nc2VhcmNoJyksXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdudW1iZXInXSxcIiArXHJcblx0XHRcIjpqcW1EYXRhKHR5cGU9J251bWJlcicpLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ncGFzc3dvcmQnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2VtYWlsJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd1cmwnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3RlbCddLFwiICtcclxuXHRcdFwidGV4dGFyZWEsXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd0aW1lJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdkYXRlJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdtb250aCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nd2VlayddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZGF0ZXRpbWUnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2RhdGV0aW1lLWxvY2FsJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdjb2xvciddLFwiICtcclxuXHRcdFwiaW5wdXQ6bm90KFt0eXBlXSksXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdmaWxlJ11cIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0bWluaTogZmFsc2UsXHJcblx0XHQvLyBUaGlzIG9wdGlvbiBkZWZhdWx0cyB0byB0cnVlIG9uIGlPUyBkZXZpY2VzLlxyXG5cdFx0cHJldmVudEZvY3VzWm9vbTogL2lQaG9uZXxpUGFkfGlQb2QvLnRlc3QoIG5hdmlnYXRvci5wbGF0Zm9ybSApICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSxcclxuXHRcdHdyYXBwZXJDbGFzczogXCJcIixcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpc1NlYXJjaCA9IHRoaXMuZWxlbWVudC5pcyggXCJbdHlwZT0nc2VhcmNoJ10sIDpqcW1EYXRhKHR5cGU9J3NlYXJjaCcpXCIgKSxcclxuXHRcdFx0aXNUZXh0YXJlYSA9IHRoaXMuZWxlbWVudFsgMCBdLnRhZ05hbWUgPT09IFwiVEVYVEFSRUFcIixcclxuXHRcdFx0aXNSYW5nZSA9IHRoaXMuZWxlbWVudC5pcyggXCJbZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJ0eXBlPSdyYW5nZSddXCIgKSxcclxuXHRcdFx0aW5wdXROZWVkc1dyYXAgPSAoICh0aGlzLmVsZW1lbnQuaXMoIFwiaW5wdXRcIiApIHx8XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmlzKCBcIltkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInR5cGU9J3NlYXJjaCddXCIgKSApICYmXHJcblx0XHRcdFx0XHQhaXNSYW5nZSApO1xyXG5cclxuXHRcdGlmICggdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRvcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRjbGFzc2VzOiB0aGlzLl9jbGFzc2VzRnJvbU9wdGlvbnMoKSxcclxuXHRcdFx0aXNTZWFyY2g6IGlzU2VhcmNoLFxyXG5cdFx0XHRpc1RleHRhcmVhOiBpc1RleHRhcmVhLFxyXG5cdFx0XHRpc1JhbmdlOiBpc1JhbmdlLFxyXG5cdFx0XHRpbnB1dE5lZWRzV3JhcDogaW5wdXROZWVkc1dyYXBcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2F1dG9Db3JyZWN0KCk7XHJcblxyXG5cdFx0aWYgKCAhb3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCB7XHJcblx0XHRcdFwiZm9jdXNcIjogXCJfaGFuZGxlRm9jdXNcIixcclxuXHRcdFx0XCJibHVyXCI6IFwiX2hhbmRsZUJsdXJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zZXRPcHRpb25zKHtcclxuXHRcdFx0XCJkaXNhYmxlZFwiIDogdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiIClcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtZW50Q2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdGlmICggdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRlbGVtZW50Q2xhc3Nlcy5wdXNoKCBcInVpLWlucHV0LXRleHRcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5pc1RleHRhcmVhIHx8IHRoaXMuaXNSYW5nZSApIHtcclxuXHRcdFx0ZWxlbWVudENsYXNzZXMucHVzaCggXCJ1aS1zaGFkb3ctaW5zZXRcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vXCJzZWFyY2hcIiBhbmQgXCJ0ZXh0XCIgaW5wdXQgd2lkZ2V0c1xyXG5cdFx0aWYgKCB0aGlzLmlucHV0TmVlZHNXcmFwICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQud3JhcCggdGhpcy5fd3JhcCgpICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbGVtZW50Q2xhc3NlcyA9IGVsZW1lbnRDbGFzc2VzLmNvbmNhdCggdGhpcy5jbGFzc2VzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBlbGVtZW50Q2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoIHRoaXMuaW5wdXROZWVkc1dyYXAgKSA/IHRoaXMuZWxlbWVudC5wYXJlbnQoKSA6IHRoaXMuZWxlbWVudDtcclxuXHR9LFxyXG5cclxuXHRfY2xhc3Nlc0Zyb21PcHRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRjbGFzc2VzID0gW107XHJcblxyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJvZHktXCIgKyAoICggb3B0aW9ucy50aGVtZSA9PT0gbnVsbCApID8gXCJpbmhlcml0XCIgOiBvcHRpb25zLnRoZW1lICkgKTtcclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktY29ybmVyLWFsbFwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLW1pbmlcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLndyYXBwZXJDbGFzcyApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBvcHRpb25zLndyYXBwZXJDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjbGFzc2VzO1xyXG5cdH0sXHJcblxyXG5cdF93cmFwOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXYgY2xhc3M9J1wiICtcclxuXHRcdFx0KCB0aGlzLmlzU2VhcmNoID8gXCJ1aS1pbnB1dC1zZWFyY2ggXCIgOiBcInVpLWlucHV0LXRleHQgXCIgKSArXHJcblx0XHRcdHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICsgXCIgXCIgK1xyXG5cdFx0XHRcInVpLXNoYWRvdy1pbnNldCc+PC9kaXY+XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfYXV0b0NvcnJlY3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gWFhYOiBUZW1wb3Jhcnkgd29ya2Fyb3VuZCBmb3IgaXNzdWUgNzg1IChBcHBsZSBidWcgODkxMDU4OSkuXHJcblx0XHQvLyAgICAgIFR1cm4gb2ZmIGF1dG9jb3JyZWN0IGFuZCBhdXRvY29tcGxldGUgb24gbm9uLWlPUyA1IGRldmljZXNcclxuXHRcdC8vICAgICAgc2luY2UgdGhlIHBvcHVwIHRoZXkgdXNlIGNhbid0IGJlIGRpc21pc3NlZCBieSB0aGUgdXNlci4gTm90ZVxyXG5cdFx0Ly8gICAgICB0aGF0IHdlIHRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgZmVhdHVyZSBieSBsb29raW5nIGZvclxyXG5cdFx0Ly8gICAgICB0aGUgYXV0b2NvcnJlY3QgcHJvcGVydHkgb24gdGhlIGlucHV0IGVsZW1lbnQuIFdlIGN1cnJlbnRseVxyXG5cdFx0Ly8gICAgICBoYXZlIG5vIHRlc3QgZm9yIGlPUyA1IG9yIG5ld2VyIHNvIHdlJ3JlIHRlbXBvcmFyaWx5IHVzaW5nXHJcblx0XHQvLyAgICAgIHRoZSB0b3VjaE92ZXJmbG93IHN1cHBvcnQgZmxhZyBmb3IgalFNIDEuMC4gWWVzLCBJIGZlZWwgZGlydHkuXHJcblx0XHQvLyAgICAgIC0gamJsYXNcclxuXHRcdGlmICggdHlwZW9mIHRoaXMuZWxlbWVudFswXS5hdXRvY29ycmVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxyXG5cdFx0XHQhJC5zdXBwb3J0LnRvdWNoT3ZlcmZsb3cgKSB7XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGF0dHJpYnV0ZSBpbnN0ZWFkIG9mIHRoZSBwcm9wZXJ0eSBqdXN0IGluIGNhc2UgdGhlcmVcclxuXHRcdFx0Ly8gaXMgY29kZSB0aGF0IGF0dGVtcHRzIHRvIG1ha2UgbW9kaWZpY2F0aW9ucyB2aWEgSFRNTC5cclxuXHRcdFx0dGhpcy5lbGVtZW50WzBdLnNldEF0dHJpYnV0ZSggXCJhdXRvY29ycmVjdFwiLCBcIm9mZlwiICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudFswXS5zZXRBdHRyaWJ1dGUoIFwiYXV0b2NvbXBsZXRlXCIsIFwib2ZmXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQmx1cjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLndpZGdldCgpLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBJbiBtYW55IHNpdHVhdGlvbnMsIGlPUyB3aWxsIHpvb20gaW50byB0aGUgaW5wdXQgdXBvbiB0YXAsIHRoaXNcclxuXHRcdC8vIHByZXZlbnRzIHRoYXQgZnJvbSBoYXBwZW5pbmdcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy53aWRnZXQoKS5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiAoIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb3V0ZXIgPSB0aGlzLndpZGdldCgpO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCAhKCBvcHRpb25zLmRpc2FibGVkID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy5taW5pID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy5jb3JuZXJzID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy50aGVtZSA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMud3JhcHBlckNsYXNzID09PSB1bmRlZmluZWQgKSApIHtcclxuXHJcblx0XHRcdG91dGVyLnJlbW92ZUNsYXNzKCB0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdFx0XHR0aGlzLmNsYXNzZXMgPSB0aGlzLl9jbGFzc2VzRnJvbU9wdGlvbnMoKTtcclxuXHRcdFx0b3V0ZXIuYWRkQ2xhc3MoIHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsICEhb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMuaW5wdXROZWVkc1dyYXAgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC51bndyYXAoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1pbnB1dC10ZXh0IFwiICsgdGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2xpZGVyXCIsICQuZXh0ZW5kKCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0W3R5cGU9J3JhbmdlJ10sIDpqcW1EYXRhKHR5cGU9J3JhbmdlJyksIDpqcW1EYXRhKHJvbGU9J3NsaWRlcicpXCIsXHJcblxyXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcInNsaWRlXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0dHJhY2tUaGVtZTogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdGhpZ2hsaWdodDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBUT0RPOiBFYWNoIG9mIHRoZXNlIHNob3VsZCBoYXZlIGNvbW1lbnRzIGV4cGxhaW4gd2hhdCB0aGV5J3JlIGZvclxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRjb250cm9sID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0cmFja1RoZW1lID0gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgfHwgJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBjb250cm9sWyAwIF0sIFwidGhlbWVcIiApLFxyXG5cdFx0XHR0cmFja1RoZW1lQ2xhc3MgPSB0cmFja1RoZW1lID8gXCIgdWktYmFyLVwiICsgdHJhY2tUaGVtZSA6IFwiIHVpLWJhci1pbmhlcml0XCIsXHJcblx0XHRcdGNvcm5lckNsYXNzID0gKCB0aGlzLm9wdGlvbnMuY29ybmVycyB8fCBjb250cm9sLmpxbURhdGEoIFwiY29ybmVyc1wiICkgKSA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIsXHJcblx0XHRcdG1pbmlDbGFzcyA9ICggdGhpcy5vcHRpb25zLm1pbmkgfHwgY29udHJvbC5qcW1EYXRhKCBcIm1pbmlcIiApICkgPyBcIiB1aS1taW5pXCIgOiBcIlwiLFxyXG5cdFx0XHRjVHlwZSA9IGNvbnRyb2xbIDAgXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRpc1RvZ2dsZVN3aXRjaCA9ICggY1R5cGUgPT09IFwic2VsZWN0XCIgKSxcclxuXHRcdFx0aXNSYW5nZXNsaWRlciA9IGNvbnRyb2wucGFyZW50KCkuaXMoIFwiOmpxbURhdGEocm9sZT0ncmFuZ2VzbGlkZXInKVwiICksXHJcblx0XHRcdHNlbGVjdENsYXNzID0gKCBpc1RvZ2dsZVN3aXRjaCApID8gXCJ1aS1zbGlkZXItc3dpdGNoXCIgOiBcIlwiLFxyXG5cdFx0XHRjb250cm9sSUQgPSBjb250cm9sLmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHQkbGFiZWwgPSAkKCBcIltmb3I9J1wiICsgY29udHJvbElEICsgXCInXVwiICksXHJcblx0XHRcdGxhYmVsSUQgPSAkbGFiZWwuYXR0ciggXCJpZFwiICkgfHwgY29udHJvbElEICsgXCItbGFiZWxcIixcclxuXHRcdFx0bWluID0gIWlzVG9nZ2xlU3dpdGNoID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1pblwiICkgKSA6IDAsXHJcblx0XHRcdG1heCA9ICAhaXNUb2dnbGVTd2l0Y2ggPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWF4XCIgKSApIDogY29udHJvbC5maW5kKCBcIm9wdGlvblwiICkubGVuZ3RoLTEsXHJcblx0XHRcdHN0ZXAgPSB3aW5kb3cucGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcInN0ZXBcIiApIHx8IDEgKSxcclxuXHRcdFx0ZG9tSGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKSxcclxuXHRcdFx0aGFuZGxlID0gJCggZG9tSGFuZGxlICksXHJcblx0XHRcdGRvbVNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcclxuXHRcdFx0c2xpZGVyID0gJCggZG9tU2xpZGVyICksXHJcblx0XHRcdHZhbHVlYmcgPSB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0ICYmICFpc1RvZ2dsZVN3aXRjaCA/IChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0XHRcdFx0YmcuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItYmcgXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcztcclxuXHRcdFx0XHRyZXR1cm4gJCggYmcgKS5wcmVwZW5kVG8oIHNsaWRlciApO1xyXG5cdFx0XHR9KSgpIDogZmFsc2UsXHJcblx0XHRcdG9wdGlvbnMsXHJcblx0XHRcdHdyYXBwZXIsXHJcblx0XHRcdGosIGxlbmd0aCxcclxuXHRcdFx0aSwgb3B0aW9uc0NvdW50LCBvcmlnVGFiSW5kZXgsXHJcblx0XHRcdHNpZGUsIGFjdGl2ZUNsYXNzLCBzbGlkZXJJbWc7XHJcblxyXG5cdFx0JGxhYmVsLmF0dHIoIFwiaWRcIiwgbGFiZWxJRCApO1xyXG5cdFx0dGhpcy5pc1RvZ2dsZVN3aXRjaCA9IGlzVG9nZ2xlU3dpdGNoO1xyXG5cclxuXHRcdGRvbUhhbmRsZS5zZXRBdHRyaWJ1dGUoIFwiaHJlZlwiLCBcIiNcIiApO1xyXG5cdFx0ZG9tU2xpZGVyLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwiYXBwbGljYXRpb25cIiApO1xyXG5cdFx0ZG9tU2xpZGVyLmNsYXNzTmFtZSA9IFsgdGhpcy5pc1RvZ2dsZVN3aXRjaCA/IFwidWktc2xpZGVyIHVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXQgXCIgOiBcInVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXQgXCIsIHNlbGVjdENsYXNzLCB0cmFja1RoZW1lQ2xhc3MsIGNvcm5lckNsYXNzLCBtaW5pQ2xhc3MgXS5qb2luKCBcIlwiICk7XHJcblx0XHRkb21IYW5kbGUuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItaGFuZGxlXCI7XHJcblx0XHRkb21TbGlkZXIuYXBwZW5kQ2hpbGQoIGRvbUhhbmRsZSApO1xyXG5cclxuXHRcdGhhbmRsZS5hdHRyKHtcclxuXHRcdFx0XCJyb2xlXCI6IFwic2xpZGVyXCIsXHJcblx0XHRcdFwiYXJpYS12YWx1ZW1pblwiOiBtaW4sXHJcblx0XHRcdFwiYXJpYS12YWx1ZW1heFwiOiBtYXgsXHJcblx0XHRcdFwiYXJpYS12YWx1ZW5vd1wiOiB0aGlzLl92YWx1ZSgpLFxyXG5cdFx0XHRcImFyaWEtdmFsdWV0ZXh0XCI6IHRoaXMuX3ZhbHVlKCksXHJcblx0XHRcdFwidGl0bGVcIjogdGhpcy5fdmFsdWUoKSxcclxuXHRcdFx0XCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJRFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0c2xpZGVyOiBzbGlkZXIsXHJcblx0XHRcdGhhbmRsZTogaGFuZGxlLFxyXG5cdFx0XHRjb250cm9sOiBjb250cm9sLFxyXG5cdFx0XHR0eXBlOiBjVHlwZSxcclxuXHRcdFx0c3RlcDogc3RlcCxcclxuXHRcdFx0bWF4OiBtYXgsXHJcblx0XHRcdG1pbjogbWluLFxyXG5cdFx0XHR2YWx1ZWJnOiB2YWx1ZWJnLFxyXG5cdFx0XHRpc1Jhbmdlc2xpZGVyOiBpc1Jhbmdlc2xpZGVyLFxyXG5cdFx0XHRkcmFnZ2luZzogZmFsc2UsXHJcblx0XHRcdGJlZm9yZVN0YXJ0OiBudWxsLFxyXG5cdFx0XHR1c2VyTW9kaWZpZWQ6IGZhbHNlLFxyXG5cdFx0XHRtb3VzZU1vdmVkOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCBpc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0Ly8gVE9ETzogcmVzdG9yZSBvcmlnaW5hbCB0YWJpbmRleCAoaWYgYW55KSBpbiBhIGRlc3Ryb3kgbWV0aG9kXHJcblx0XHRcdG9yaWdUYWJJbmRleCA9IGNvbnRyb2wuYXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHRcdGlmICggb3JpZ1RhYkluZGV4ICkge1xyXG5cdFx0XHRcdGhhbmRsZS5hdHRyKCBcInRhYmluZGV4XCIsIG9yaWdUYWJJbmRleCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnRyb2wuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKS5mb2N1cyhmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuYmx1cigpO1xyXG5cdFx0XHRcdGhhbmRsZS5mb2N1cygpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0XHRcdHdyYXBwZXIuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItaW5uZXJvZmZzZXRcIjtcclxuXHJcblx0XHRcdGZvciAoIGogPSAwLCBsZW5ndGggPSBkb21TbGlkZXIuY2hpbGROb2Rlcy5sZW5ndGg7IGogPCBsZW5ndGg7IGorKyApIHtcclxuXHRcdFx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKCBkb21TbGlkZXIuY2hpbGROb2Rlc1tqXSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkb21TbGlkZXIuYXBwZW5kQ2hpbGQoIHdyYXBwZXIgKTtcclxuXHJcblx0XHRcdC8vIHNsaWRlci53cmFwSW5uZXIoIFwiPGRpdiBjbGFzcz0ndWktc2xpZGVyLWlubmVyb2Zmc2V0Jz48L2Rpdj5cIiApO1xyXG5cclxuXHRcdFx0Ly8gbWFrZSB0aGUgaGFuZGxlIG1vdmUgd2l0aCBhIHNtb290aCB0cmFuc2l0aW9uXHJcblx0XHRcdGhhbmRsZS5hZGRDbGFzcyggXCJ1aS1zbGlkZXItaGFuZGxlLXNuYXBwaW5nXCIgKTtcclxuXHJcblx0XHRcdG9wdGlvbnMgPSBjb250cm9sLmZpbmQoIFwib3B0aW9uXCIgKTtcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwLCBvcHRpb25zQ291bnQgPSBvcHRpb25zLmxlbmd0aDsgaSA8IG9wdGlvbnNDb3VudDsgaSsrICkge1xyXG5cdFx0XHRcdHNpZGUgPSAhaSA/IFwiYlwiIDogXCJhXCI7XHJcblx0XHRcdFx0YWN0aXZlQ2xhc3MgPSAhaSA/IFwiXCIgOiBcIiBcIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzO1xyXG5cdFx0XHRcdHNsaWRlckltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic3BhblwiICk7XHJcblxyXG5cdFx0XHRcdHNsaWRlckltZy5jbGFzc05hbWUgPSBbIFwidWktc2xpZGVyLWxhYmVsIHVpLXNsaWRlci1sYWJlbC1cIiwgc2lkZSwgYWN0aXZlQ2xhc3MgXS5qb2luKCBcIlwiICk7XHJcblx0XHRcdFx0c2xpZGVySW1nLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwiaW1nXCIgKTtcclxuXHRcdFx0XHRzbGlkZXJJbWcuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBvcHRpb25zW2ldLmlubmVySFRNTCApICk7XHJcblx0XHRcdFx0JCggc2xpZGVySW1nICkucHJlcGVuZFRvKCBzbGlkZXIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5fbGFiZWxzID0gJCggXCIudWktc2xpZGVyLWxhYmVsXCIsIHNsaWRlciApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvLyBtb25pdG9yIHRoZSBpbnB1dCBmb3IgdXBkYXRlZCB2YWx1ZXNcclxuXHRcdGNvbnRyb2wuYWRkQ2xhc3MoIGlzVG9nZ2xlU3dpdGNoID8gXCJ1aS1zbGlkZXItc3dpdGNoXCIgOiBcInVpLXNsaWRlci1pbnB1dFwiICk7XHJcblxyXG5cdFx0dGhpcy5fb24oIGNvbnRyb2wsIHtcclxuXHRcdFx0XCJjaGFuZ2VcIjogXCJfY29udHJvbENoYW5nZVwiLFxyXG5cdFx0XHRcImtleXVwXCI6IFwiX2NvbnRyb2xLZXl1cFwiLFxyXG5cdFx0XHRcImJsdXJcIjogXCJfY29udHJvbEJsdXJcIixcclxuXHRcdFx0XCJ2bW91c2V1cFwiOiBcIl9jb250cm9sVk1vdXNlVXBcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2xpZGVyLmJpbmQoIFwidm1vdXNlZG93blwiLCAkLnByb3h5KCB0aGlzLl9zbGlkZXJWTW91c2VEb3duLCB0aGlzICkgKVxyXG5cdFx0XHQuYmluZCggXCJ2Y2xpY2tcIiwgZmFsc2UgKTtcclxuXHJcblx0XHQvLyBXZSBoYXZlIHRvIGluc3RhbnRpYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdCBmb3IgdGhlIHVuYmluZCB0byB3b3JrIHByb3Blcmx5XHJcblx0XHQvLyBzaW5jZSB0aGUgbWV0aG9kIGl0c2VsZiBpcyBkZWZpbmVkIGluIHRoZSBwcm90b3R5cGUgKGNhdXNpbmcgaXQgdG8gdW5iaW5kIGV2ZXJ5dGhpbmcpXHJcblx0XHR0aGlzLl9vbiggZG9jdW1lbnQsIHsgXCJ2bW91c2Vtb3ZlXCI6IFwiX3ByZXZlbnREb2N1bWVudERyYWdcIiB9KTtcclxuXHRcdHRoaXMuX29uKCBzbGlkZXIuYWRkKCBkb2N1bWVudCApLCB7IFwidm1vdXNldXBcIjogXCJfc2xpZGVyVk1vdXNlVXBcIiB9KTtcclxuXHJcblx0XHRzbGlkZXIuaW5zZXJ0QWZ0ZXIoIGNvbnRyb2wgKTtcclxuXHJcblx0XHQvLyB3cmFwIGluIGEgZGl2IGZvciBzdHlsaW5nIHB1cnBvc2VzXHJcblx0XHRpZiAoICFpc1RvZ2dsZVN3aXRjaCAmJiAhaXNSYW5nZXNsaWRlciApIHtcclxuXHRcdFx0d3JhcHBlciA9IHRoaXMub3B0aW9ucy5taW5pID8gXCI8ZGl2IGNsYXNzPSd1aS1zbGlkZXIgdWktbWluaSc+XCIgOiBcIjxkaXYgY2xhc3M9J3VpLXNsaWRlcic+XCI7XHJcblxyXG5cdFx0XHRjb250cm9sLmFkZCggc2xpZGVyICkud3JhcEFsbCggd3JhcHBlciApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGJpbmQgdGhlIGhhbmRsZSBldmVudCBjYWxsYmFja3MgYW5kIHNldCB0aGUgY29udGV4dCB0byB0aGUgd2lkZ2V0IGluc3RhbmNlXHJcblx0XHR0aGlzLl9vbiggdGhpcy5oYW5kbGUsIHtcclxuXHRcdFx0XCJ2bW91c2Vkb3duXCI6IFwiX2hhbmRsZVZNb3VzZURvd25cIixcclxuXHRcdFx0XCJrZXlkb3duXCI6IFwiX2hhbmRsZUtleWRvd25cIixcclxuXHRcdFx0XCJrZXl1cFwiOiBcIl9oYW5kbGVLZXl1cFwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZS5iaW5kKCBcInZjbGlja1wiLCBmYWxzZSApO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cclxuXHRcdHRoaXMucmVmcmVzaCggdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0VGhlbWUoIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMudHJhY2tUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRUcmFja1RoZW1lKCBvcHRpb25zLnRyYWNrVGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRDb3JuZXJzKCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRNaW5pKCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaGlnaGxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldEhpZ2hsaWdodCggb3B0aW9ucy5oaWdobGlnaHQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0RGlzYWJsZWQoIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2NvbnRyb2xDaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdC8vIGlmIHRoZSB1c2VyIGRyYWdnZWQgdGhlIGhhbmRsZSwgdGhlIFwiY2hhbmdlXCIgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIGluc2lkZSByZWZyZXNoKCk7IGRvbid0IGNhbGwgcmVmcmVzaCgpIGFnYWluXHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiY29udHJvbGNoYW5nZVwiLCBldmVudCApID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCAhdGhpcy5tb3VzZU1vdmVkICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCksIHRydWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY29udHJvbEtleXVwOiBmdW5jdGlvbigvKiBldmVudCAqLykgeyAvLyBuZWNlc3Nhcnk/XHJcblx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCksIHRydWUsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfY29udHJvbEJsdXI6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCksIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBpdCBhcHBlYXJzIHRoZSBjbGlja2luZyB0aGUgdXAgYW5kIGRvd24gYnV0dG9ucyBpbiBjaHJvbWUgb25cclxuXHQvLyByYW5nZS9udW1iZXIgaW5wdXRzIGRvZXNuJ3QgdHJpZ2dlciBhIGNoYW5nZSB1bnRpbCB0aGUgZmllbGQgaXNcclxuXHQvLyBibHVycmVkLiBIZXJlIHdlIGNoZWNrIHRoaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGFuZCByZWZyZXNoXHJcblx0X2NvbnRyb2xWTW91c2VVcDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdHRoaXMuX2NoZWNrZWRSZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gTk9URSBmb3JjZSBmb2N1cyBvbiBoYW5kbGVcclxuXHRfaGFuZGxlVk1vdXNlRG93bjogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdHRoaXMuaGFuZGxlLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBpbmRleCA9IHRoaXMuX3ZhbHVlKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEluIGFsbCBjYXNlcyBwcmV2ZW50IHRoZSBkZWZhdWx0IGFuZCBtYXJrIHRoZSBoYW5kbGUgYXMgYWN0aXZlXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuSE9NRTpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkVORDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX0RPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlJJR0hUOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkxFRlQ6XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0aWYgKCAhdGhpcy5fa2V5U2xpZGluZyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2tleVNsaWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5oYW5kbGUuYWRkQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTsgLyogVE9ETzogV2UgZG9uJ3QgdXNlIHRoaXMgY2xhc3MgZm9yIHN0eWxpbmcuIERvIHdlIG5lZWQgdG8gYWRkIGl0PyAqL1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbW92ZSB0aGUgc2xpZGVyIGFjY29yZGluZyB0byB0aGUga2V5cHJlc3NcclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5IT01FOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5taW4gKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkVORDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMubWF4ICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX1VQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5SSUdIVDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIGluZGV4ICsgdGhpcy5zdGVwICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX0RPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuTEVGVDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIGluZGV4IC0gdGhpcy5zdGVwICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fSwgLy8gcmVtb3ZlIGFjdGl2ZSBtYXJrXHJcblxyXG5cdF9oYW5kbGVLZXl1cDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdGlmICggdGhpcy5fa2V5U2xpZGluZyApIHtcclxuXHRcdFx0dGhpcy5fa2V5U2xpZGluZyA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApOyAvKiBTZWUgY29tbWVudCBhYm92ZS4gKi9cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2xpZGVyVk1vdXNlRG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0Ly8gTk9URTogd2UgZG9uJ3QgZG8gdGhpcyBpbiByZWZyZXNoIGJlY2F1c2Ugd2Ugc3RpbGwgd2FudCB0b1xyXG5cdFx0Ly8gICAgICAgc3VwcG9ydCBwcm9ncmFtbWF0aWMgYWx0ZXJhdGlvbiBvZiBkaXNhYmxlZCBpbnB1dHNcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8ICEoIGV2ZW50LndoaWNoID09PSAxIHx8IGV2ZW50LndoaWNoID09PSAwIHx8IGV2ZW50LndoaWNoID09PSB1bmRlZmluZWQgKSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZXN0YXJ0XCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdHRoaXMudXNlck1vZGlmaWVkID0gZmFsc2U7XHJcblx0XHR0aGlzLm1vdXNlTW92ZWQgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoIHRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlU3RhcnQgPSB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleDtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnJlZnJlc2goIGV2ZW50ICk7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcInN0YXJ0XCIgKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRfc2xpZGVyVk1vdXNlVXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLmRyYWdnaW5nICkge1xyXG5cdFx0XHR0aGlzLmRyYWdnaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdFx0Ly8gbWFrZSB0aGUgaGFuZGxlIG1vdmUgd2l0aCBhIHNtb290aCB0cmFuc2l0aW9uXHJcblx0XHRcdFx0dGhpcy5oYW5kbGUuYWRkQ2xhc3MoIFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiICk7XHJcblxyXG5cdFx0XHRcdGlmICggdGhpcy5tb3VzZU1vdmVkICkge1xyXG5cdFx0XHRcdFx0Ly8gdGhpcyBpcyBhIGRyYWcsIGNoYW5nZSB0aGUgdmFsdWUgb25seSBpZiB1c2VyIGRyYWdnZWQgZW5vdWdoXHJcblx0XHRcdFx0XHRpZiAoIHRoaXMudXNlck1vZGlmaWVkICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuYmVmb3JlU3RhcnQgPT09IDAgPyAxIDogMCApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLmJlZm9yZVN0YXJ0ICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIHRoaXMgaXMganVzdCBhIGNsaWNrLCBjaGFuZ2UgdGhlIHZhbHVlXHJcblx0XHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuYmVmb3JlU3RhcnQgPT09IDAgPyAxIDogMCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5tb3VzZU1vdmVkID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwic3RvcFwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcHJldmVudERvY3VtZW50RHJhZzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHQvLyBOT1RFOiB3ZSBkb24ndCBkbyB0aGlzIGluIHJlZnJlc2ggYmVjYXVzZSB3ZSBzdGlsbCB3YW50IHRvXHJcblx0XHRcdC8vICAgICAgIHN1cHBvcnQgcHJvZ3JhbW1hdGljIGFsdGVyYXRpb24gb2YgZGlzYWJsZWQgaW5wdXRzXHJcblx0XHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJkcmFnXCIsIGV2ZW50ICkgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5kcmFnZ2luZyAmJiAhdGhpcy5vcHRpb25zLmRpc2FibGVkICkge1xyXG5cclxuXHRcdFx0XHQvLyB0aGlzLm1vdXNlTW92ZWQgbXVzdCBiZSB1cGRhdGVkIGJlZm9yZSByZWZyZXNoKCkgYmVjYXVzZSBpdCB3aWxsIGJlIHVzZWQgaW4gdGhlIGNvbnRyb2wgXCJjaGFuZ2VcIiBldmVudFxyXG5cdFx0XHRcdHRoaXMubW91c2VNb3ZlZCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdGlmICggdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0XHRcdC8vIG1ha2UgdGhlIGhhbmRsZSBtb3ZlIGluIHN5bmMgd2l0aCB0aGUgbW91c2VcclxuXHRcdFx0XHRcdHRoaXMuaGFuZGxlLnJlbW92ZUNsYXNzKCBcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCBldmVudCApO1xyXG5cclxuXHRcdFx0XHQvLyBvbmx5IGFmdGVyIHJlZnJlc2goKSB5b3UgY2FuIGNhbGN1bGF0ZSB0aGlzLnVzZXJNb2RpZmllZFxyXG5cdFx0XHRcdHRoaXMudXNlck1vZGlmaWVkID0gdGhpcy5iZWZvcmVTdGFydCAhPT0gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRfY2hlY2tlZFJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLnZhbHVlICE9PSB0aGlzLl92YWx1ZSgpICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdmFsdWU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICB0aGlzLmlzVG9nZ2xlU3dpdGNoID8gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXggOiBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQudmFsKCkgKSA7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCggdW5kZWZpbmVkLCBmYWxzZSwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCB2YWwsIGlzZnJvbUNvbnRyb2wsIHByZXZlbnRJbnB1dFVwZGF0ZSApIHtcclxuXHRcdC8vIE5PVEU6IHdlIGRvbid0IHJldHVybiBoZXJlIGJlY2F1c2Ugd2Ugd2FudCB0byBzdXBwb3J0IHByb2dyYW1tYXRpY1xyXG5cdFx0Ly8gICAgICAgYWx0ZXJhdGlvbiBvZiB0aGUgaW5wdXQgdmFsdWUsIHdoaWNoIHNob3VsZCBzdGlsbCB1cGRhdGUgdGhlIHNsaWRlclxyXG5cclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0cGFyZW50VGhlbWUgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMuZWxlbWVudFsgMCBdLCBcInRoZW1lXCIgKSxcclxuXHRcdFx0dGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgfHwgcGFyZW50VGhlbWUsXHJcblx0XHRcdHRoZW1lQ2xhc3MgPSAgdGhlbWUgPyBcIiB1aS1idG4tXCIgKyB0aGVtZSA6IFwiXCIsXHJcblx0XHRcdHRyYWNrVGhlbWUgPSB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSB8fCBwYXJlbnRUaGVtZSxcclxuXHRcdFx0dHJhY2tUaGVtZUNsYXNzID0gdHJhY2tUaGVtZSA/IFwiIHVpLWJhci1cIiArIHRyYWNrVGhlbWUgOiBcIiB1aS1iYXItaW5oZXJpdFwiLFxyXG5cdFx0XHRjb3JuZXJDbGFzcyA9IHRoaXMub3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIixcclxuXHRcdFx0bWluaUNsYXNzID0gdGhpcy5vcHRpb25zLm1pbmkgPyBcIiB1aS1taW5pXCIgOiBcIlwiLFxyXG5cdFx0XHRsZWZ0LCB3aWR0aCwgZGF0YSwgdG9sLFxyXG5cdFx0XHRweFN0ZXAsIHBlcmNlbnQsXHJcblx0XHRcdGNvbnRyb2wsIGlzSW5wdXQsIG9wdGlvbkVsZW1lbnRzLCBtaW4sIG1heCwgc3RlcCxcclxuXHRcdFx0bmV3dmFsLCB2YWxNb2RTdGVwLCBhbGlnblZhbHVlLCBwZXJjZW50UGVyU3RlcCxcclxuXHRcdFx0aGFuZGxlUGVyY2VudCwgYVBlcmNlbnQsIGJQZXJjZW50LFxyXG5cdFx0XHR2YWx1ZUNoYW5nZWQ7XHJcblxyXG5cdFx0c2VsZi5zbGlkZXJbMF0uY2xhc3NOYW1lID0gWyB0aGlzLmlzVG9nZ2xlU3dpdGNoID8gXCJ1aS1zbGlkZXIgdWktc2xpZGVyLXN3aXRjaCB1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0XCIgOiBcInVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXRcIiwgdHJhY2tUaGVtZUNsYXNzLCBjb3JuZXJDbGFzcywgbWluaUNsYXNzIF0uam9pbiggXCJcIiApO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHR0aGlzLmRpc2FibGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzZXQgdGhlIHN0b3JlZCB2YWx1ZSBmb3IgY29tcGFyaXNvbiBsYXRlclxyXG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMuX3ZhbHVlKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oaWdobGlnaHQgJiYgIXRoaXMuaXNUb2dnbGVTd2l0Y2ggJiYgdGhpcy5zbGlkZXIuZmluZCggXCIudWktc2xpZGVyLWJnXCIgKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHRoaXMudmFsdWViZyA9IChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0XHRcdFx0YmcuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItYmcgXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcztcclxuXHRcdFx0XHRyZXR1cm4gJCggYmcgKS5wcmVwZW5kVG8oIHNlbGYuc2xpZGVyICk7XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmhhbmRsZS5hZGRDbGFzcyggXCJ1aS1idG5cIiArIHRoZW1lQ2xhc3MgKyBcIiB1aS1zaGFkb3dcIiApO1xyXG5cclxuXHRcdGNvbnRyb2wgPSB0aGlzLmVsZW1lbnQ7XHJcblx0XHRpc0lucHV0ID0gIXRoaXMuaXNUb2dnbGVTd2l0Y2g7XHJcblx0XHRvcHRpb25FbGVtZW50cyA9IGlzSW5wdXQgPyBbXSA6IGNvbnRyb2wuZmluZCggXCJvcHRpb25cIiApO1xyXG5cdFx0bWluID0gIGlzSW5wdXQgPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWluXCIgKSApIDogMDtcclxuXHRcdG1heCA9IGlzSW5wdXQgPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWF4XCIgKSApIDogb3B0aW9uRWxlbWVudHMubGVuZ3RoIC0gMTtcclxuXHRcdHN0ZXAgPSAoIGlzSW5wdXQgJiYgcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcInN0ZXBcIiApICkgPiAwICkgPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwic3RlcFwiICkgKSA6IDE7XHJcblxyXG5cdFx0aWYgKCB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHRkYXRhID0gdmFsO1xyXG5cdFx0XHQvLyBhIHNsaWdodCB0b2xlcmFuY2UgaGVscGVkIGdldCB0byB0aGUgZW5kcyBvZiB0aGUgc2xpZGVyXHJcblx0XHRcdHRvbCA9IDg7XHJcblxyXG5cdFx0XHRsZWZ0ID0gdGhpcy5zbGlkZXIub2Zmc2V0KCkubGVmdDtcclxuXHRcdFx0d2lkdGggPSB0aGlzLnNsaWRlci53aWR0aCgpO1xyXG5cdFx0XHRweFN0ZXAgPSB3aWR0aC8oKG1heC1taW4pL3N0ZXApO1xyXG5cdFx0XHRpZiAoICF0aGlzLmRyYWdnaW5nIHx8XHJcblx0XHRcdFx0XHRkYXRhLnBhZ2VYIDwgbGVmdCAtIHRvbCB8fFxyXG5cdFx0XHRcdFx0ZGF0YS5wYWdlWCA+IGxlZnQgKyB3aWR0aCArIHRvbCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBweFN0ZXAgPiAxICkge1xyXG5cdFx0XHRcdHBlcmNlbnQgPSAoICggZGF0YS5wYWdlWCAtIGxlZnQgKSAvIHdpZHRoICkgKiAxMDA7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cGVyY2VudCA9IE1hdGgucm91bmQoICggKCBkYXRhLnBhZ2VYIC0gbGVmdCApIC8gd2lkdGggKSAqIDEwMCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xyXG5cdFx0XHRcdHZhbCA9IGlzSW5wdXQgPyBwYXJzZUZsb2F0KCBjb250cm9sLnZhbCgpIHx8IDAgKSA6IGNvbnRyb2xbMF0uc2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0fVxyXG5cdFx0XHRwZXJjZW50ID0gKCBwYXJzZUZsb2F0KCB2YWwgKSAtIG1pbiApIC8gKCBtYXggLSBtaW4gKSAqIDEwMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGlzTmFOKCBwZXJjZW50ICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRuZXd2YWwgPSAoIHBlcmNlbnQgLyAxMDAgKSAqICggbWF4IC0gbWluICkgKyBtaW47XHJcblxyXG5cdFx0Ly9mcm9tIGpRdWVyeSBVSSBzbGlkZXIsIHRoZSBmb2xsb3dpbmcgc291cmNlIHdpbGwgcm91bmQgdG8gdGhlIG5lYXJlc3Qgc3RlcFxyXG5cdFx0dmFsTW9kU3RlcCA9ICggbmV3dmFsIC0gbWluICkgJSBzdGVwO1xyXG5cdFx0YWxpZ25WYWx1ZSA9IG5ld3ZhbCAtIHZhbE1vZFN0ZXA7XHJcblxyXG5cdFx0aWYgKCBNYXRoLmFicyggdmFsTW9kU3RlcCApICogMiA+PSBzdGVwICkge1xyXG5cdFx0XHRhbGlnblZhbHVlICs9ICggdmFsTW9kU3RlcCA+IDAgKSA/IHN0ZXAgOiAoIC1zdGVwICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cGVyY2VudFBlclN0ZXAgPSAxMDAvKChtYXgtbWluKS9zdGVwKTtcclxuXHRcdC8vIFNpbmNlIEphdmFTY3JpcHQgaGFzIHByb2JsZW1zIHdpdGggbGFyZ2UgZmxvYXRzLCByb3VuZFxyXG5cdFx0Ly8gdGhlIGZpbmFsIHZhbHVlIHRvIDUgZGlnaXRzIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50IChzZWUgalF1ZXJ5VUk6ICM0MTI0KVxyXG5cdFx0bmV3dmFsID0gcGFyc2VGbG9hdCggYWxpZ25WYWx1ZS50b0ZpeGVkKDUpICk7XHJcblxyXG5cdFx0aWYgKCB0eXBlb2YgcHhTdGVwID09PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0XHRweFN0ZXAgPSB3aWR0aCAvICggKG1heC1taW4pIC8gc3RlcCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBweFN0ZXAgPiAxICYmIGlzSW5wdXQgKSB7XHJcblx0XHRcdHBlcmNlbnQgPSAoIG5ld3ZhbCAtIG1pbiApICogcGVyY2VudFBlclN0ZXAgKiAoIDEgLyBzdGVwICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIHBlcmNlbnQgPCAwICkge1xyXG5cdFx0XHRwZXJjZW50ID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHBlcmNlbnQgPiAxMDAgKSB7XHJcblx0XHRcdHBlcmNlbnQgPSAxMDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXd2YWwgPCBtaW4gKSB7XHJcblx0XHRcdG5ld3ZhbCA9IG1pbjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld3ZhbCA+IG1heCApIHtcclxuXHRcdFx0bmV3dmFsID0gbWF4O1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuaGFuZGxlLmNzcyggXCJsZWZ0XCIsIHBlcmNlbnQgKyBcIiVcIiApO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlWzBdLnNldEF0dHJpYnV0ZSggXCJhcmlhLXZhbHVlbm93XCIsIGlzSW5wdXQgPyBuZXd2YWwgOiBvcHRpb25FbGVtZW50cy5lcSggbmV3dmFsICkuYXR0ciggXCJ2YWx1ZVwiICkgKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZVswXS5zZXRBdHRyaWJ1dGUoIFwiYXJpYS12YWx1ZXRleHRcIiwgaXNJbnB1dCA/IG5ld3ZhbCA6IG9wdGlvbkVsZW1lbnRzLmVxKCBuZXd2YWwgKS5nZXRFbmNvZGVkVGV4dCgpICk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVbMF0uc2V0QXR0cmlidXRlKCBcInRpdGxlXCIsIGlzSW5wdXQgPyBuZXd2YWwgOiBvcHRpb25FbGVtZW50cy5lcSggbmV3dmFsICkuZ2V0RW5jb2RlZFRleHQoKSApO1xyXG5cclxuXHRcdGlmICggdGhpcy52YWx1ZWJnICkge1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcuY3NzKCBcIndpZHRoXCIsIHBlcmNlbnQgKyBcIiVcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRyYWcgdGhlIGxhYmVsIHdpZHRoc1xyXG5cdFx0aWYgKCB0aGlzLl9sYWJlbHMgKSB7XHJcblx0XHRcdGhhbmRsZVBlcmNlbnQgPSB0aGlzLmhhbmRsZS53aWR0aCgpIC8gdGhpcy5zbGlkZXIud2lkdGgoKSAqIDEwMDtcclxuXHRcdFx0YVBlcmNlbnQgPSBwZXJjZW50ICYmIGhhbmRsZVBlcmNlbnQgKyAoIDEwMCAtIGhhbmRsZVBlcmNlbnQgKSAqIHBlcmNlbnQgLyAxMDA7XHJcblx0XHRcdGJQZXJjZW50ID0gcGVyY2VudCA9PT0gMTAwID8gMCA6IE1hdGgubWluKCBoYW5kbGVQZXJjZW50ICsgMTAwIC0gYVBlcmNlbnQsIDEwMCApO1xyXG5cclxuXHRcdFx0dGhpcy5fbGFiZWxzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGFiID0gJCggdGhpcyApLmhhc0NsYXNzKCBcInVpLXNsaWRlci1sYWJlbC1hXCIgKTtcclxuXHRcdFx0XHQkKCB0aGlzICkud2lkdGgoICggYWIgPyBhUGVyY2VudCA6IGJQZXJjZW50ICApICsgXCIlXCIgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhcHJldmVudElucHV0VXBkYXRlICkge1xyXG5cdFx0XHR2YWx1ZUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIHVwZGF0ZSBjb250cm9sXCJzIHZhbHVlXHJcblx0XHRcdGlmICggaXNJbnB1dCApIHtcclxuXHRcdFx0XHR2YWx1ZUNoYW5nZWQgPSBwYXJzZUZsb2F0KCBjb250cm9sLnZhbCgpICkgIT09IG5ld3ZhbDtcclxuXHRcdFx0XHRjb250cm9sLnZhbCggbmV3dmFsICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFsdWVDaGFuZ2VkID0gY29udHJvbFsgMCBdLnNlbGVjdGVkSW5kZXggIT09IG5ld3ZhbDtcclxuXHRcdFx0XHRjb250cm9sWyAwIF0uc2VsZWN0ZWRJbmRleCA9IG5ld3ZhbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlY2hhbmdlXCIsIHZhbCApID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIWlzZnJvbUNvbnRyb2wgJiYgdmFsdWVDaGFuZ2VkICkge1xyXG5cdFx0XHRcdGNvbnRyb2wudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldEhpZ2hsaWdodDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFsdWUgPSAhIXZhbHVlO1xyXG5cdFx0aWYgKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmhpZ2hsaWdodCA9ICEhdmFsdWU7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fSBlbHNlIGlmICggdGhpcy52YWx1ZWJnICkge1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMudmFsdWViZyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dGhpcy5oYW5kbGVcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyB2YWx1ZSApO1xyXG5cclxuXHRcdHZhciBjdXJyZW50VGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0bmV3VGhlbWUgPSB2YWx1ZSA/IHZhbHVlIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0dGhpcy5jb250cm9sXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1ib2R5LVwiICsgY3VycmVudFRoZW1lIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyBuZXdUaGVtZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRUcmFja1RoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YXIgY3VycmVudFRyYWNrVGhlbWUgPSB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSA/IHRoaXMub3B0aW9ucy50cmFja1RoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdG5ld1RyYWNrVGhlbWUgPSB2YWx1ZSA/IHZhbHVlIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0dGhpcy5zbGlkZXJcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJvZHktXCIgKyBjdXJyZW50VHJhY2tUaGVtZSApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgbmV3VHJhY2tUaGVtZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRNaW5pOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHRpZiAoICF0aGlzLmlzVG9nZ2xlU3dpdGNoICYmICF0aGlzLmlzUmFuZ2VzbGlkZXIgKSB7XHJcblx0XHRcdHRoaXMuc2xpZGVyLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuc2xpZGVyLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgdmFsdWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0Q29ybmVyczogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dGhpcy5zbGlkZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCB2YWx1ZSApO1xyXG5cclxuXHRcdGlmICggIXRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdHRoaXMuY29udHJvbC50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldERpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0dGhpcy5zbGlkZXJcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHZhbHVlIClcclxuXHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdH1cclxuXHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgcG9wdXA7XHJcblxyXG5mdW5jdGlvbiBnZXRQb3B1cCgpIHtcclxuXHRpZiAoICFwb3B1cCApIHtcclxuXHRcdHBvcHVwID0gJCggXCI8ZGl2PjwvZGl2PlwiLCB7XHJcblx0XHRcdFwiY2xhc3NcIjogXCJ1aS1zbGlkZXItcG9wdXAgdWktc2hhZG93IHVpLWNvcm5lci1hbGxcIlxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiBwb3B1cC5jbG9uZSgpO1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2xpZGVyXCIsICQubW9iaWxlLnNsaWRlciwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHBvcHVwRW5hYmxlZDogZmFsc2UsXHJcblx0XHRzaG93VmFsdWU6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9jdXJyZW50VmFsdWU6IG51bGwsXHJcblx0XHRcdF9wb3B1cDogbnVsbCxcclxuXHRcdFx0X3BvcHVwVmlzaWJsZTogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3NldE9wdGlvbiggXCJwb3B1cEVuYWJsZWRcIiwgdGhpcy5vcHRpb25zLnBvcHVwRW5hYmxlZCApO1xyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmhhbmRsZSwgeyBcInZtb3VzZWRvd25cIiA6IFwiX3Nob3dQb3B1cFwiIH0gKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnNsaWRlci5hZGQoIHRoaXMuZG9jdW1lbnQgKSwgeyBcInZtb3VzZXVwXCIgOiBcIl9oaWRlUG9wdXBcIiB9ICk7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gcG9zaXRpb24gdGhlIHBvcHVwIGNlbnRlcmVkIDVweCBhYm92ZSB0aGUgaGFuZGxlXHJcblx0X3Bvc2l0aW9uUG9wdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRzdE9mZnNldCA9IHRoaXMuaGFuZGxlLm9mZnNldCgpO1xyXG5cclxuXHRcdHRoaXMuX3BvcHVwLm9mZnNldCgge1xyXG5cdFx0XHRsZWZ0OiBkc3RPZmZzZXQubGVmdCArICggdGhpcy5oYW5kbGUud2lkdGgoKSAtIHRoaXMuX3BvcHVwLndpZHRoKCkgKSAvIDIsXHJcblx0XHRcdHRvcDogZHN0T2Zmc2V0LnRvcCAtIHRoaXMuX3BvcHVwLm91dGVySGVpZ2h0KCkgLSA1XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwic2hvd1ZhbHVlXCIgKSB7XHJcblx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIHZhbHVlICYmICF0aGlzLm9wdGlvbnMubWluaSA/IHRoaXMuX3ZhbHVlKCkgOiBcIlwiICk7XHJcblx0XHR9IGVsc2UgaWYgKCBrZXkgPT09IFwicG9wdXBFbmFibGVkXCIgKSB7XHJcblx0XHRcdGlmICggdmFsdWUgJiYgIXRoaXMuX3BvcHVwICkge1xyXG5cdFx0XHRcdHRoaXMuX3BvcHVwID0gZ2V0UG9wdXAoKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyAoIHRoaXMub3B0aW9ucy50aGVtZSB8fCBcImFcIiApIClcclxuXHRcdFx0XHRcdC5oaWRlKClcclxuXHRcdFx0XHRcdC5pbnNlcnRCZWZvcmUoIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gc2hvdyB2YWx1ZSBvbiB0aGUgaGFuZGxlIGFuZCBpbiBwb3B1cFxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zLCBuZXdWYWx1ZTtcclxuXHJcblx0XHRpZiAoIG8ucG9wdXBFbmFibGVkICkge1xyXG5cdFx0XHQvLyByZW1vdmUgdGhlIHRpdGxlIGF0dHJpYnV0ZSBmcm9tIHRoZSBoYW5kbGUgKHdoaWNoIGlzXHJcblx0XHRcdC8vIHJlc3BvbnNpYmxlIGZvciB0aGUgYW5ub3lpbmcgdG9vbHRpcCk7IE5CIHdlIGhhdmVcclxuXHRcdFx0Ly8gdG8gZG8gaXQgaGVyZSBhcyB0aGUganFtIHNsaWRlciBzZXRzIGl0IGV2ZXJ5IHRpbWVcclxuXHRcdFx0Ly8gdGhlIHNsaWRlcidzIHZhbHVlIGNoYW5nZXMgOihcclxuXHRcdFx0dGhpcy5oYW5kbGUucmVtb3ZlQXR0ciggXCJ0aXRsZVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0bmV3VmFsdWUgPSB0aGlzLl92YWx1ZSgpO1xyXG5cdFx0aWYgKCBuZXdWYWx1ZSA9PT0gdGhpcy5fY3VycmVudFZhbHVlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR0aGlzLl9jdXJyZW50VmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcblx0XHRpZiAoIG8ucG9wdXBFbmFibGVkICYmIHRoaXMuX3BvcHVwICkge1xyXG5cdFx0XHR0aGlzLl9wb3NpdGlvblBvcHVwKCk7XHJcblx0XHRcdHRoaXMuX3BvcHVwLmh0bWwoIG5ld1ZhbHVlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvLnNob3dWYWx1ZSAmJiAhdGhpcy5vcHRpb25zLm1pbmkgKSB7XHJcblx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIG5ld1ZhbHVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3Nob3dQb3B1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3B1cEVuYWJsZWQgJiYgIXRoaXMuX3BvcHVwVmlzaWJsZSApIHtcclxuXHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggXCJcIiApO1xyXG5cdFx0XHR0aGlzLl9wb3B1cC5zaG93KCk7XHJcblx0XHRcdHRoaXMuX3Bvc2l0aW9uUG9wdXAoKTtcclxuXHRcdFx0dGhpcy5fcG9wdXBWaXNpYmxlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGlkZVBvcHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggby5wb3B1cEVuYWJsZWQgJiYgdGhpcy5fcG9wdXBWaXNpYmxlICkge1xyXG5cdFx0XHRpZiAoIG8uc2hvd1ZhbHVlICYmICFvLm1pbmkgKSB7XHJcblx0XHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggdGhpcy5fdmFsdWUoKSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3BvcHVwLmhpZGUoKTtcclxuXHRcdFx0dGhpcy5fcG9wdXBWaXNpYmxlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmZsaXBzd2l0Y2hcIiwgJC5leHRlbmQoe1xyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHRvblRleHQ6IFwiT25cIixcclxuXHRcdG9mZlRleHQ6IFwiT2ZmXCIsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRtaW5pOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0XHRmbGlwc3dpdGNoOiB0aGlzLmVsZW1lbnQucGFyZW50KCksXHJcblx0XHRcdFx0XHRvbjogdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLWZsaXBzd2l0Y2gtb25cIiApLmVxKCAwICksXHJcblx0XHRcdFx0XHRvZmY6IHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1mbGlwc3dpdGNoLW9mZlwiICkuZXEoMCksXHJcblx0XHRcdFx0XHR0eXBlOiB0aGlzLmVsZW1lbnQuZ2V0KCAwICkudGFnTmFtZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHJcblx0XHRcdC8vIFRyYW5zZmVyIHRhYmluZGV4IHRvIFwib25cIiBlbGVtZW50IGFuZCBtYWtlIGlucHV0IHVuZm9jdXNhYmxlXHJcblx0XHRcdHRoaXMuX29yaWdpbmFsVGFiSW5kZXggPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHRcdGlmICggdGhpcy5fb3JpZ2luYWxUYWJJbmRleCAhPSBudWxsICkge1xyXG5cdFx0XHRcdHRoaXMub24uYXR0ciggXCJ0YWJpbmRleFwiLCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcImZvY3VzXCIgOiBcIl9oYW5kbGVJbnB1dEZvY3VzXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuZWxlbWVudC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldE9wdGlvbnMoe1xyXG5cdFx0XHRcdFx0XCJkaXNhYmxlZFwiOiB0cnVlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmZsaXBzd2l0Y2gsIHtcclxuXHRcdFx0XHRcImNsaWNrXCI6IFwiX3RvZ2dsZVwiLFxyXG5cdFx0XHRcdFwic3dpcGVsZWZ0XCI6IFwiX2xlZnRcIixcclxuXHRcdFx0XHRcInN3aXBlcmlnaHRcIjogXCJfcmlnaHRcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLm9uLCB7XHJcblx0XHRcdFx0XCJrZXlkb3duXCI6IFwiX2tleWRvd25cIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB7XHJcblx0XHRcdFx0XCJjaGFuZ2VcIjogXCJyZWZyZXNoXCJcclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0Rm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5vbi5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5mbGlwc3dpdGNoO1xyXG5cdH0sXHJcblxyXG5cdF9sZWZ0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZmxpcHN3aXRjaC5yZW1vdmVDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICk7XHJcblx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJTRUxFQ1RcIiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmdldCggMCApLnNlbGVjdGVkSW5kZXggPSAwO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5mbGlwc3dpdGNoLmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKTtcclxuXHRcdGlmICggdGhpcy50eXBlID09PSBcIlNFTEVDVFwiICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZ2V0KCAwICkuc2VsZWN0ZWRJbmRleCA9IDE7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIsIHRydWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGZsaXBzd2l0Y2ggPSAkKCBcIjxkaXY+XCIgKSxcclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0ZWxlbWVudCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dGhlbWUgPSBvcHRpb25zLnRoZW1lID8gb3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cclxuXHRcdFx0Ly8gVGhlIFwib25cIiBidXR0b24gaXMgYW4gYW5jaG9yIHNvIGl0J3MgZm9jdXNhYmxlXHJcblx0XHRcdG9uID0gJCggXCI8YT48L2E+XCIsIHtcclxuXHRcdFx0XHRcImhyZWZcIjogXCIjXCJcclxuXHRcdFx0fSksXHJcblx0XHRcdG9mZiA9ICQoIFwiPHNwYW4+PC9zcGFuPlwiICksXHJcblx0XHRcdHR5cGUgPSBlbGVtZW50LmdldCggMCApLnRhZ05hbWUsXHJcblx0XHRcdG9uVGV4dCA9ICggdHlwZSA9PT0gXCJJTlBVVFwiICkgP1xyXG5cdFx0XHRcdG9wdGlvbnMub25UZXh0IDogZWxlbWVudC5maW5kKCBcIm9wdGlvblwiICkuZXEoIDEgKS50ZXh0KCksXHJcblx0XHRcdG9mZlRleHQgPSAoIHR5cGUgPT09IFwiSU5QVVRcIiApID9cclxuXHRcdFx0XHRvcHRpb25zLm9mZlRleHQgOiBlbGVtZW50LmZpbmQoIFwib3B0aW9uXCIgKS5lcSggMCApLnRleHQoKTtcclxuXHJcblx0XHRcdG9uXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtb24gdWktYnRuIHVpLXNoYWRvdyB1aS1idG4taW5oZXJpdFwiIClcclxuXHRcdFx0XHQudGV4dCggb25UZXh0ICk7XHJcblx0XHRcdG9mZlxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLW9mZlwiIClcclxuXHRcdFx0XHQudGV4dCggb2ZmVGV4dCApO1xyXG5cclxuXHRcdFx0ZmxpcHN3aXRjaFxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoIHVpLXNoYWRvdy1pbnNldCBcIiArXHJcblx0XHRcdFx0XHRcInVpLWJhci1cIiArIHRoZW1lICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLndyYXBwZXJDbGFzcyA/IG9wdGlvbnMud3JhcHBlckNsYXNzIDogXCJcIiApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0KCAoIGVsZW1lbnQuaXMoIFwiOmNoZWNrZWRcIiApIHx8XHJcblx0XHRcdFx0XHRcdGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0XHQuZmluZCggXCJvcHRpb25cIiApXHJcblx0XHRcdFx0XHRcdFx0LmVxKCAxIClcclxuXHRcdFx0XHRcdFx0XHQuaXMoIFwiOnNlbGVjdGVkXCIgKSApID8gXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggZWxlbWVudC5pcyhcIjpkaXNhYmxlZFwiKSA/IFwiIHVpLXN0YXRlLWRpc2FibGVkXCI6IFwiXCIpICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLm1pbmkgPyBcIiB1aS1taW5pXCI6IFwiXCIgKSApXHJcblx0XHRcdFx0LmFwcGVuZCggb24sIG9mZiApO1xyXG5cclxuXHRcdFx0ZWxlbWVudFxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWlucHV0XCIgKVxyXG5cdFx0XHRcdC5hZnRlciggZmxpcHN3aXRjaCApXHJcblx0XHRcdFx0LmFwcGVuZFRvKCBmbGlwc3dpdGNoICk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0ZmxpcHN3aXRjaDogZmxpcHN3aXRjaCxcclxuXHRcdFx0b246IG9uLFxyXG5cdFx0XHRvZmY6IG9mZixcclxuXHRcdFx0dHlwZTogdHlwZVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRpcmVjdGlvbixcclxuXHRcdFx0ZXhpc3RpbmdEaXJlY3Rpb24gPSB0aGlzLmZsaXBzd2l0Y2guaGFzQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApID8gXCJfcmlnaHRcIiA6IFwiX2xlZnRcIjtcclxuXHJcblx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJTRUxFQ1RcIiApIHtcclxuXHRcdFx0ZGlyZWN0aW9uID0gKCB0aGlzLmVsZW1lbnQuZ2V0KCAwICkuc2VsZWN0ZWRJbmRleCA+IDAgKSA/IFwiX3JpZ2h0XCI6IFwiX2xlZnRcIjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRpcmVjdGlvbiA9IHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiApID8gXCJfcmlnaHRcIjogXCJfbGVmdFwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggZGlyZWN0aW9uICE9PSBleGlzdGluZ0RpcmVjdGlvbiApIHtcclxuXHRcdFx0dGhpc1sgZGlyZWN0aW9uIF0oKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkaXJlY3Rpb24gPSB0aGlzLmZsaXBzd2l0Y2guaGFzQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApID8gXCJfbGVmdFwiIDogXCJfcmlnaHRcIjtcclxuXHJcblx0XHR0aGlzWyBkaXJlY3Rpb24gXSgpO1xyXG5cdH0sXHJcblxyXG5cdF9rZXlkb3duOiBmdW5jdGlvbiggZSApIHtcclxuXHRcdGlmICggZS53aGljaCA9PT0gJC5tb2JpbGUua2V5Q29kZS5MRUZUICkge1xyXG5cdFx0XHR0aGlzLl9sZWZ0KCk7XHJcblx0XHR9IGVsc2UgaWYgKCBlLndoaWNoID09PSAkLm1vYmlsZS5rZXlDb2RlLlJJR0hUICkge1xyXG5cdFx0XHR0aGlzLl9yaWdodCgpO1xyXG5cdFx0fSBlbHNlIGlmICggZS53aGljaCA9PT0gJC5tb2JpbGUua2V5Q29kZS5TUEFDRSApIHtcclxuXHRcdFx0dGhpcy5fdG9nZ2xlKCk7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dmFyIGN1cnJlbnRUaGVtZSA9IG9wdGlvbnMudGhlbWUgPyBvcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdFx0bmV3VGhlbWUgPSBvcHRpb25zLnRoZW1lID8gb3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdFx0dGhpcy53aWRnZXQoKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1iYXItXCIgKyBjdXJyZW50VGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1iYXItXCIgKyBuZXdUaGVtZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm9uVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLm9uLnRleHQoIG9wdGlvbnMub25UZXh0ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMub2ZmVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLm9mZi50ZXh0KCBvcHRpb25zLm9mZlRleHQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggIT0gbnVsbCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwidGFiaW5kZXhcIiwgdGhpcy5fb3JpZ2luYWxUYWJJbmRleCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5vbi5yZW1vdmUoKTtcclxuXHRcdHRoaXMub2ZmLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnVud3JhcCgpO1xyXG5cdFx0dGhpcy5mbGlwc3dpdGNoLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5yZW1vdmVDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWlucHV0XCIgKTtcclxuXHR9XHJcblxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS5yYW5nZXNsaWRlclwiLCAkLmV4dGVuZCgge1xyXG5cclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0dGhlbWU6IG51bGwsXHJcblx0XHRcdHRyYWNrVGhlbWU6IG51bGwsXHJcblx0XHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0XHRoaWdobGlnaHQ6IHRydWVcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGVsQ2xhc3MgPSB0aGlzLm9wdGlvbnMubWluaSA/IFwidWktcmFuZ2VzbGlkZXIgdWktbWluaVwiIDogXCJ1aS1yYW5nZXNsaWRlclwiLFxyXG5cdFx0XHRfaW5wdXRGaXJzdCA9ICRlbC5maW5kKCBcImlucHV0XCIgKS5maXJzdCgpLFxyXG5cdFx0XHRfaW5wdXRMYXN0ID0gJGVsLmZpbmQoIFwiaW5wdXRcIiApLmxhc3QoKSxcclxuXHRcdFx0X2xhYmVsID0gJGVsLmZpbmQoIFwibGFiZWxcIiApLmZpcnN0KCksXHJcblx0XHRcdF9zbGlkZXJXaWRnZXRGaXJzdCA9ICQuZGF0YSggX2lucHV0Rmlyc3QuZ2V0KCAwICksIFwibW9iaWxlLXNsaWRlclwiICkgfHxcclxuXHRcdFx0XHQkLmRhdGEoIF9pbnB1dEZpcnN0LnNsaWRlcigpLmdldCggMCApLCBcIm1vYmlsZS1zbGlkZXJcIiApLFxyXG5cdFx0XHRfc2xpZGVyV2lkZ2V0TGFzdCA9ICQuZGF0YSggX2lucHV0TGFzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkgfHxcclxuXHRcdFx0XHQkLmRhdGEoIF9pbnB1dExhc3Quc2xpZGVyKCkuZ2V0KCAwICksIFwibW9iaWxlLXNsaWRlclwiICksXHJcblx0XHRcdF9zbGlkZXJGaXJzdCA9IF9zbGlkZXJXaWRnZXRGaXJzdC5zbGlkZXIsXHJcblx0XHRcdF9zbGlkZXJMYXN0ID0gX3NsaWRlcldpZGdldExhc3Quc2xpZGVyLFxyXG5cdFx0XHRmaXJzdEhhbmRsZSA9IF9zbGlkZXJXaWRnZXRGaXJzdC5oYW5kbGUsXHJcblx0XHRcdF9zbGlkZXJzID0gJCggXCI8ZGl2IGNsYXNzPSd1aS1yYW5nZXNsaWRlci1zbGlkZXJzJyAvPlwiICkuYXBwZW5kVG8oICRlbCApO1xyXG5cclxuXHRcdFx0X2lucHV0Rmlyc3QuYWRkQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItZmlyc3RcIiApO1xyXG5cdFx0XHRfaW5wdXRMYXN0LmFkZENsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWxhc3RcIiApO1xyXG5cdFx0XHQkZWwuYWRkQ2xhc3MoIGVsQ2xhc3MgKTtcclxuXHJcblx0XHRcdF9zbGlkZXJGaXJzdC5hcHBlbmRUbyggX3NsaWRlcnMgKTtcclxuXHRcdFx0X3NsaWRlckxhc3QuYXBwZW5kVG8oIF9zbGlkZXJzICk7XHJcblx0XHRcdF9sYWJlbC5pbnNlcnRCZWZvcmUoICRlbCApO1xyXG5cdFx0XHRmaXJzdEhhbmRsZS5wcmVwZW5kVG8oIF9zbGlkZXJMYXN0ICk7XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdF9pbnB1dEZpcnN0OiBfaW5wdXRGaXJzdCxcclxuXHRcdFx0XHRfaW5wdXRMYXN0OiBfaW5wdXRMYXN0LFxyXG5cdFx0XHRcdF9zbGlkZXJGaXJzdDogX3NsaWRlckZpcnN0LFxyXG5cdFx0XHRcdF9zbGlkZXJMYXN0OiBfc2xpZGVyTGFzdCxcclxuXHRcdFx0XHRfbGFiZWw6IF9sYWJlbCxcclxuXHRcdFx0XHRfdGFyZ2V0VmFsOiBudWxsLFxyXG5cdFx0XHRcdF9zbGlkZXJUYXJnZXQ6IGZhbHNlLFxyXG5cdFx0XHRcdF9zbGlkZXJzOiBfc2xpZGVycyxcclxuXHRcdFx0XHRfcHJveHk6IGZhbHNlXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQuZmluZCggXCJpbnB1dC51aS1zbGlkZXItaW5wdXRcIiApLCB7XHJcblx0XHRcdFx0XCJzbGlkZWJlZm9yZXN0YXJ0XCI6IFwiX3NsaWRlYmVmb3Jlc3RhcnRcIixcclxuXHRcdFx0XHRcInNsaWRlc3RvcFwiOiBcIl9zbGlkZXN0b3BcIixcclxuXHRcdFx0XHRcInNsaWRlZHJhZ1wiOiBcIl9zbGlkZWRyYWdcIixcclxuXHRcdFx0XHRcInNsaWRlYmVmb3JlY2hhbmdlXCI6IFwiX2NoYW5nZVwiLFxyXG5cdFx0XHRcdFwiYmx1clwiOiBcIl9jaGFuZ2VcIixcclxuXHRcdFx0XHRcImtleXVwXCI6IFwiX2NoYW5nZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJtb3VzZWRvd25cIjpcIl9jaGFuZ2VcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcImZvcm1cIiApLCB7XHJcblx0XHRcdFx0XCJyZXNldFwiOlwiX2hhbmRsZVJlc2V0XCJcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX29uKCBmaXJzdEhhbmRsZSwge1xyXG5cdFx0XHRcdFwidm1vdXNlZG93blwiOiBcIl9kcmFnRmlyc3RIYW5kbGVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRfaGFuZGxlUmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vd2UgbXVzdCB3YWl0IGZvciB0aGUgc3RhY2sgdG8gdW53aW5kIGJlZm9yZSB1cGRhdGVpbmcgb3RoZXIgd2lzZSBzbGlkZXJzIHdpbGwgbm90IGhhdmUgdXBkYXRlZCB5ZXRcclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblx0XHRcdH0sMCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kcmFnRmlyc3RIYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0Ly9pZiB0aGUgZmlyc3QgaGFuZGxlIGlzIGRyYWdnZWQgc2VuZCB0aGUgZXZlbnQgdG8gdGhlIGZpcnN0IHNsaWRlclxyXG5cdFx0XHQkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmRyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdFx0JC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5yZWZyZXNoKCBldmVudCApO1xyXG5cdFx0XHQkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLl90cmlnZ2VyKCBcInN0YXJ0XCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2xpZGVkcmFnOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBmaXJzdCA9ICQoIGV2ZW50LnRhcmdldCApLmlzKCB0aGlzLl9pbnB1dEZpcnN0ICksXHJcblx0XHRcdFx0b3RoZXJTbGlkZXIgPSAoIGZpcnN0ICkgPyB0aGlzLl9pbnB1dExhc3QgOiB0aGlzLl9pbnB1dEZpcnN0O1xyXG5cclxuXHRcdFx0dGhpcy5fc2xpZGVyVGFyZ2V0ID0gZmFsc2U7XHJcblx0XHRcdC8vaWYgdGhlIGRyYWcgd2FzIGluaXRpYXRlZCBvbiBhbiBleHRyZW1lIGFuZCB0aGUgb3RoZXIgaGFuZGxlIGlzIGZvY3VzZWQgc2VuZCB0aGUgZXZlbnRzIHRvXHJcblx0XHRcdC8vdGhlIGNsb3Nlc3QgaGFuZGxlXHJcblx0XHRcdGlmICggKCB0aGlzLl9wcm94eSA9PT0gXCJmaXJzdFwiICYmIGZpcnN0ICkgfHwgKCB0aGlzLl9wcm94eSA9PT0gXCJsYXN0XCIgJiYgIWZpcnN0ICkgKSB7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLnJlZnJlc2goIGV2ZW50ICk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zbGlkZXN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGZpcnN0ID0gJCggZXZlbnQudGFyZ2V0ICkuaXMoIHRoaXMuX2lucHV0Rmlyc3QgKTtcclxuXHJcblx0XHRcdHRoaXMuX3Byb3h5ID0gZmFsc2U7XHJcblx0XHRcdC8vdGhpcyBzdG9wcyBkcmFnZ2luZyBvZiB0aGUgaGFuZGxlIGFuZCBicmluZ3MgdGhlIGFjdGl2ZSB0cmFjayB0byB0aGUgZnJvbnRcclxuXHRcdFx0Ly90aGlzIG1ha2VzIGNsaWNrcyBvbiB0aGUgdHJhY2sgZ28gdGhlIHRoZSBsYXN0IGhhbmRsZSB1c2VkXHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcImlucHV0XCIgKS50cmlnZ2VyKCBcInZtb3VzZXVwXCIgKTtcclxuXHRcdFx0dGhpcy5fc2xpZGVyRmlyc3QuY3NzKCBcInotaW5kZXhcIiwgZmlyc3QgPyAxIDogXCJcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2xpZGViZWZvcmVzdGFydDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR0aGlzLl9zbGlkZXJUYXJnZXQgPSBmYWxzZTtcclxuXHRcdFx0Ly9pZiB0aGUgdHJhY2sgaXMgdGhlIHRhcmdldCByZW1lbWJlciB0aGlzIGFuZCB0aGUgb3JpZ2luYWwgdmFsdWVcclxuXHRcdFx0aWYgKCAkKCBldmVudC5vcmlnaW5hbEV2ZW50LnRhcmdldCApLmhhc0NsYXNzKCBcInVpLXNsaWRlci10cmFja1wiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2xpZGVyVGFyZ2V0ID0gdHJ1ZTtcclxuXHRcdFx0XHR0aGlzLl90YXJnZXRWYWwgPSAkKCBldmVudC50YXJnZXQgKS52YWwoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldFRoZW1lKCBvcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy50cmFja1RoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0VHJhY2tUaGVtZSggb3B0aW9ucy50cmFja1RoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0TWluaSggb3B0aW9ucy5taW5pICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5oaWdobGlnaHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRIaWdobGlnaHQoIG9wdGlvbnMuaGlnaGxpZ2h0ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldERpc2FibGVkKCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9pbnB1dEZpcnN0LmlzKCBcIjpkaXNhYmxlZFwiICkgfHwgdGhpcy5faW5wdXRMYXN0LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JGVsLmZpbmQoIFwiaW5wdXRcIiApLnNsaWRlcih7XHJcblx0XHRcdFx0dGhlbWU6IG8udGhlbWUsXHJcblx0XHRcdFx0dHJhY2tUaGVtZTogby50cmFja1RoZW1lLFxyXG5cdFx0XHRcdGRpc2FibGVkOiBvLmRpc2FibGVkLFxyXG5cdFx0XHRcdGNvcm5lcnM6IG8uY29ybmVycyxcclxuXHRcdFx0XHRtaW5pOiBvLm1pbmksXHJcblx0XHRcdFx0aGlnaGxpZ2h0OiBvLmhpZ2hsaWdodFxyXG5cdFx0XHR9KS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdGlmICggZXZlbnQudHlwZSA9PT0gXCJrZXl1cFwiICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG1pbiA9IHBhcnNlRmxvYXQoIHRoaXMuX2lucHV0Rmlyc3QudmFsKCksIDEwICksXHJcblx0XHRcdFx0bWF4ID0gcGFyc2VGbG9hdCggdGhpcy5faW5wdXRMYXN0LnZhbCgpLCAxMCApLFxyXG5cdFx0XHRcdGZpcnN0ID0gJCggZXZlbnQudGFyZ2V0ICkuaGFzQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItZmlyc3RcIiApLFxyXG5cdFx0XHRcdHRoaXNTbGlkZXIgPSBmaXJzdCA/IHRoaXMuX2lucHV0Rmlyc3QgOiB0aGlzLl9pbnB1dExhc3QsXHJcblx0XHRcdFx0b3RoZXJTbGlkZXIgPSBmaXJzdCA/IHRoaXMuX2lucHV0TGFzdCA6IHRoaXMuX2lucHV0Rmlyc3Q7XHJcblxyXG5cdFx0XHRpZiAoICggdGhpcy5faW5wdXRGaXJzdC52YWwoKSA+IHRoaXMuX2lucHV0TGFzdC52YWwoKSAmJiBldmVudC50eXBlID09PSBcIm1vdXNlZG93blwiICYmICEkKGV2ZW50LnRhcmdldCkuaGFzQ2xhc3MoXCJ1aS1zbGlkZXItaGFuZGxlXCIpKSApIHtcclxuXHRcdFx0XHR0aGlzU2xpZGVyLmJsdXIoKTtcclxuXHRcdFx0fSBlbHNlIGlmICggZXZlbnQudHlwZSA9PT0gXCJtb3VzZWRvd25cIiApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBtaW4gPiBtYXggJiYgIXRoaXMuX3NsaWRlclRhcmdldCApIHtcclxuXHRcdFx0XHQvL3RoaXMgcHJldmVudHMgbWluIGZyb20gYmVpbmcgZ3JlYXRlciB0aGVuIG1heFxyXG5cdFx0XHRcdHRoaXNTbGlkZXIudmFsKCBmaXJzdCA/IG1heDogbWluICkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXIoIFwibm9ybWFsaXplXCIgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggbWluID4gbWF4ICkge1xyXG5cdFx0XHRcdC8vdGhpcyBtYWtlcyBpdCBzbyBjbGlja3Mgb24gdGhlIHRhcmdldCBvbiBlaXRoZXIgZXh0cmVtZSBnbyB0byB0aGUgY2xvc2VzdCBoYW5kbGVcclxuXHRcdFx0XHR0aGlzU2xpZGVyLnZhbCggdGhpcy5fdGFyZ2V0VmFsICkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cclxuXHRcdFx0XHQvL1lvdSBtdXN0IHdhaXQgZm9yIHRoZSBzdGFjayB0byB1bndpbmQgc28gZmlyc3Qgc2xpZGVyIGlzIHVwZGF0ZWQgYmVmb3JlIHVwZGF0aW5nIHNlY29uZFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0b3RoZXJTbGlkZXIudmFsKCBmaXJzdCA/IG1pbjogbWF4ICkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRzZWxmLl9zbGlkZXJGaXJzdC5jc3MoIFwiei1pbmRleFwiLCBmaXJzdCA/IFwiXCIgOiAxICk7XHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCBcIm5vcm1hbGl6ZVwiICk7XHJcblx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHRcdHRoaXMuX3Byb3h5ID0gKCBmaXJzdCApID8gXCJmaXJzdFwiIDogXCJsYXN0XCI7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9maXhlcyBpc3N1ZSB3aGVyZSB3aGVuIGJvdGggX3NsaWRlcnMgYXJlIGF0IG1pbiB0aGV5IGNhbm5vdCBiZSBhZGp1c3RlZFxyXG5cdFx0XHRpZiAoIG1pbiA9PT0gbWF4ICkge1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpc1NsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIDEgKTtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgMCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCBcIlwiICk7XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgXCJcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHJcblx0XHRcdGlmICggbWluID49IG1heCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3VwZGF0ZUhpZ2hsaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBtaW4gPSBwYXJzZUludCggJC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuZ2V0KDApLnN0eWxlLmxlZnQsIDEwICksXHJcblx0XHRcdFx0bWF4ID0gcGFyc2VJbnQoICQuZGF0YSggdGhpcy5faW5wdXRMYXN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuZ2V0KDApLnN0eWxlLmxlZnQsIDEwICksXHJcblx0XHRcdFx0d2lkdGggPSAobWF4IC0gbWluKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1zbGlkZXItYmdcIiApLmNzcyh7XHJcblx0XHRcdFx0XCJtYXJnaW4tbGVmdFwiOiBtaW4gKyBcIiVcIixcclxuXHRcdFx0XHRcIndpZHRoXCI6IHdpZHRoICsgXCIlXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0aGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRoZW1lXCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRUcmFja1RoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRyYWNrVGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0cmFja1RoZW1lXCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRNaW5pOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcIm1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJtaW5pXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsICEhdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldEhpZ2hsaWdodDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJoaWdobGlnaHRcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJoaWdobGlnaHRcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldERpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3QucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3QucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2xhYmVsLnByZXBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1yYW5nZXNsaWRlciB1aS1taW5pXCIgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5hZnRlciggdGhpcy5fc2xpZGVyRmlyc3QgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LmFmdGVyKCB0aGlzLl9zbGlkZXJMYXN0ICk7XHJcblx0XHRcdHRoaXMuX3NsaWRlcnMucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcImlucHV0XCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1maXJzdCB1aS1yYW5nZXNsaWRlci1sYXN0XCIgKS5zbGlkZXIoIFwiZGVzdHJveVwiICk7XHJcblx0XHR9XHJcblxyXG5cdH0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50ZXh0aW5wdXRcIiwgJC5tb2JpbGUudGV4dGlucHV0LCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdGNsZWFyQnRuOiBmYWxzZSxcclxuXHRcdFx0Y2xlYXJCdG5UZXh0OiBcIkNsZWFyIHRleHRcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5pc1NlYXJjaCApIHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbnMuY2xlYXJCdG4gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICEhdGhpcy5vcHRpb25zLmNsZWFyQnRuICYmIHRoaXMuaW5wdXROZWVkc1dyYXAgKSB7XHJcblx0XHRcdFx0dGhpcy5fYWRkQ2xlYXJCdG4oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRjbGVhckJ1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkKCBcIjxhIGhyZWY9JyMnIHRhYmluZGV4PSctMScgYXJpYS1oaWRkZW49J3RydWUnIFwiICtcclxuXHRcdFx0XHRcImNsYXNzPSd1aS1pbnB1dC1jbGVhciB1aS1idG4gdWktaWNvbi1kZWxldGUgdWktYnRuLWljb24tbm90ZXh0IHVpLWNvcm5lci1hbGwnPlwiICtcclxuXHRcdFx0XHRcIjwvYT5cIiApXHJcblx0XHRcdFx0XHQuYXR0ciggXCJ0aXRsZVwiLCB0aGlzLm9wdGlvbnMuY2xlYXJCdG5UZXh0IClcclxuXHRcdFx0XHRcdC50ZXh0KCB0aGlzLm9wdGlvbnMuY2xlYXJCdG5UZXh0ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jbGVhckJ0bkNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC52YWwoIFwiXCIgKVxyXG5cdFx0XHRcdFx0LmZvY3VzKClcclxuXHRcdFx0XHRcdC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLl9jbGVhckJ0bi5hZGRDbGFzcyggXCJ1aS1pbnB1dC1jbGVhci1oaWRkZW5cIiApO1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfYWRkQ2xlYXJCdG46IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRcdHRoaXMuX2VuaGFuY2VDbGVhcigpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdF9jbGVhckJ0bjogdGhpcy53aWRnZXQoKS5maW5kKFwiYS51aS1pbnB1dC1jbGVhclwiKVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX2JpbmRDbGVhckV2ZW50cygpO1xyXG5cclxuXHRcdFx0dGhpcy5fdG9nZ2xlQ2xlYXIoKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdF9lbmhhbmNlQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0dGhpcy5jbGVhckJ1dHRvbigpLmFwcGVuZFRvKCB0aGlzLndpZGdldCgpICk7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkuYWRkQ2xhc3MoIFwidWktaW5wdXQtaGFzLWNsZWFyXCIgKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdF9iaW5kQ2xlYXJFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuX2NsZWFyQnRuLCB7XHJcblx0XHRcdFx0XCJjbGlja1wiOiBcIl9jbGVhckJ0bkNsaWNrXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJrZXl1cFwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiY2hhbmdlXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJpbnB1dFwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiZm9jdXNcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImJsdXJcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImN1dFwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwicGFzdGVcIjogXCJfdG9nZ2xlQ2xlYXJcIlxyXG5cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRfdW5iaW5kQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuX2NsZWFyQnRuLCBcImNsaWNrXCIpO1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuZWxlbWVudCwgXCJrZXl1cCBjaGFuZ2UgaW5wdXQgZm9jdXMgYmx1ciBjdXQgcGFzdGVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuY2xlYXJCdG4gIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdCF0aGlzLmVsZW1lbnQuaXMoIFwidGV4dGFyZWEsIDpqcW1EYXRhKHR5cGU9J3JhbmdlJylcIiApICkge1xyXG5cdFx0XHRcdGlmICggb3B0aW9ucy5jbGVhckJ0biApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2FkZENsZWFyQnRuKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuX2Rlc3Ryb3lDbGVhcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmNsZWFyQnRuVGV4dCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX2NsZWFyQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fY2xlYXJCdG4udGV4dCggb3B0aW9ucy5jbGVhckJ0blRleHQgKVxyXG5cdFx0XHRcdFx0LmF0dHIoXCJ0aXRsZVwiLCBvcHRpb25zLmNsZWFyQnRuVGV4dCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3RvZ2dsZUNsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fZGVsYXkoIFwiX3RvZ2dsZUNsZWFyQ2xhc3NcIiwgMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdG9nZ2xlQ2xlYXJDbGFzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2NsZWFyQnRuLnRvZ2dsZUNsYXNzKCBcInVpLWlucHV0LWNsZWFyLWhpZGRlblwiLCAhdGhpcy5lbGVtZW50LnZhbCgpICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95Q2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnJlbW92ZUNsYXNzKCBcInVpLWlucHV0LWhhcy1jbGVhclwiICk7XHJcblx0XHRcdHRoaXMuX3VuYmluZENsZWFyKCk7XHJcblx0XHRcdHRoaXMuX2NsZWFyQnRuLnJlbW92ZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmNsZWFyQnRuICkge1xyXG5cdFx0XHRcdHRoaXMuX2Rlc3Ryb3lDbGVhcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50ZXh0aW5wdXRcIiwgJC5tb2JpbGUudGV4dGlucHV0LCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdGF1dG9ncm93OnRydWUsXHJcblx0XHRcdGtleXVwVGltZW91dEJ1ZmZlcjogMTAwXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b2dyb3cgJiYgdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRcdHRoaXMuX2F1dG9ncm93KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2F1dG9ncm93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvd1wiICk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJrZXl1cFwiOiBcIl90aW1lb3V0XCIsXHJcblx0XHRcdFx0XCJjaGFuZ2VcIjogXCJfdGltZW91dFwiLFxyXG5cdFx0XHRcdFwiaW5wdXRcIjogXCJfdGltZW91dFwiLFxyXG5cdFx0XHRcdFwicGFzdGVcIjogXCJfdGltZW91dFwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gQXR0YWNoIHRvIHRoZSB2YXJpb3VzIHlvdS1oYXZlLWJlY29tZS12aXNpYmxlIG5vdGlmaWNhdGlvbnMgdGhhdCB0aGVcclxuXHRcdFx0Ly8gdmFyaW91cyBmcmFtZXdvcmsgZWxlbWVudHMgZW1pdC5cclxuXHRcdFx0Ly8gVE9ETzogUmVtb3ZlIGFsbCBidXQgdGhlIHVwZGF0ZWxheW91dCBoYW5kbGVyIG9uY2UgIzY0MjYgaXMgZml4ZWQuXHJcblx0XHRcdHRoaXMuX29uKCB0cnVlLCB0aGlzLmRvY3VtZW50LCB7XHJcblxyXG5cdFx0XHRcdC8vIFRPRE86IE1vdmUgdG8gbm9uLWRlcHJlY2F0ZWQgZXZlbnRcclxuXHRcdFx0XHRcInBhZ2VzaG93XCI6IFwiX2hhbmRsZVNob3dcIixcclxuXHRcdFx0XHRcInBvcHVwYmVmb3JlcG9zaXRpb25cIjogXCJfaGFuZGxlU2hvd1wiLFxyXG5cdFx0XHRcdFwidXBkYXRlbGF5b3V0XCI6IFwiX2hhbmRsZVNob3dcIixcclxuXHRcdFx0XHRcInBhbmVsb3BlblwiOiBcIl9oYW5kbGVTaG93XCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFN5bmNocm9ub3VzbHkgZml4IHRoZSB3aWRnZXQgaGVpZ2h0IGlmIHRoaXMgd2lkZ2V0J3MgcGFyZW50cyBhcmUgc3VjaFxyXG5cdFx0Ly8gdGhhdCB0aGV5IHNob3cvaGlkZSBjb250ZW50IGF0IHJ1bnRpbWUuIFdlIHN0aWxsIG5lZWQgdG8gY2hlY2sgd2hldGhlclxyXG5cdFx0Ly8gdGhlIHdpZGdldCBpcyBhY3R1YWxseSB2aXNpYmxlIGluIGNhc2UgaXQgaXMgY29udGFpbmVkIGluc2lkZSBtdWx0aXBsZVxyXG5cdFx0Ly8gc3VjaCBjb250YWluZXJzLiBGb3IgZXhhbXBsZTogcGFuZWwgY29udGFpbnMgY29sbGFwc2libGUgY29udGFpbnNcclxuXHRcdC8vIGF1dG9ncm93IHRleHRpbnB1dC4gVGhlIHBhbmVsIG1heSBlbWl0IFwicGFuZWxvcGVuXCIgaW5kaWNhdGluZyB0aGF0IGl0c1xyXG5cdFx0Ly8gY29udGVudCBoYXMgYmVjb21lIHZpc2libGUsIGJ1dCB0aGUgY29sbGFwc2libGUgaXMgc3RpbGwgY29sbGFwc2VkLCBzb1xyXG5cdFx0Ly8gdGhlIGF1dG9ncm93IHRleHRhcmVhIGlzIHN0aWxsIG5vdCB2aXNpYmxlLlxyXG5cdFx0X2hhbmRsZVNob3c6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYgKCAkLmNvbnRhaW5zKCBldmVudC50YXJnZXQsIHRoaXMuZWxlbWVudFsgMCBdICkgJiZcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuaXMoIFwiOnZpc2libGVcIiApICkge1xyXG5cclxuXHRcdFx0XHRpZiAoIGV2ZW50LnR5cGUgIT09IFwicG9wdXBiZWZvcmVwb3NpdGlvblwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3ctcmVzaXplXCIgKVxyXG5cdFx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoXHJcblx0XHRcdFx0XHRcdFx0JC5wcm94eSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93LXJlc2l6ZVwiICk7XHJcblx0XHRcdFx0XHRcdFx0fSwgdGhpcyApLFxyXG5cdFx0XHRcdFx0XHRcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLl9wcmVwYXJlSGVpZ2h0VXBkYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3VuYmluZEF1dG9ncm93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvd1wiICk7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5lbGVtZW50LCBcImtleXVwIGNoYW5nZSBpbnB1dCBwYXN0ZVwiICk7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5kb2N1bWVudCxcclxuXHRcdFx0XHRcInBhZ2VzaG93IHBvcHVwYmVmb3JlcG9zaXRpb24gdXBkYXRlbGF5b3V0IHBhbmVsb3BlblwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGtleXVwVGltZW91dDogbnVsbCxcclxuXHJcblx0XHRfcHJlcGFyZUhlaWdodFVwZGF0ZTogZnVuY3Rpb24oIGRlbGF5ICkge1xyXG5cdFx0XHRpZiAoIHRoaXMua2V5dXBUaW1lb3V0ICkge1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5rZXl1cFRpbWVvdXQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIGRlbGF5ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlSGVpZ2h0KCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5rZXl1cFRpbWVvdXQgPSB0aGlzLl9kZWxheSggXCJfdXBkYXRlSGVpZ2h0XCIsIGRlbGF5ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3RpbWVvdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9wcmVwYXJlSGVpZ2h0VXBkYXRlKCB0aGlzLm9wdGlvbnMua2V5dXBUaW1lb3V0QnVmZmVyICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF91cGRhdGVIZWlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFkZGluZ1RvcCwgcGFkZGluZ0JvdHRvbSwgcGFkZGluZ0hlaWdodCwgc2Nyb2xsSGVpZ2h0LCBjbGllbnRIZWlnaHQsXHJcblx0XHRcdFx0Ym9yZGVyVG9wLCBib3JkZXJCb3R0b20sIGJvcmRlckhlaWdodCwgaGVpZ2h0LFxyXG5cdFx0XHRcdHNjcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cdFx0XHR0aGlzLmtleXVwVGltZW91dCA9IDA7XHJcblxyXG5cdFx0XHQvLyBJRTggdGV4dGFyZWFzIGhhdmUgdGhlIG9ucGFnZSBwcm9wZXJ0eSAtIG90aGVycyBkbyBub3RcclxuXHRcdFx0aWYgKCAhKCBcIm9ucGFnZVwiIGluIHRoaXMuZWxlbWVudFsgMCBdICkgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmNzcyh7XHJcblx0XHRcdFx0XHRcImhlaWdodFwiOiAwLFxyXG5cdFx0XHRcdFx0XCJtaW4taGVpZ2h0XCI6IDAsXHJcblx0XHRcdFx0XHRcIm1heC1oZWlnaHRcIjogMFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzY3JvbGxIZWlnaHQgPSB0aGlzLmVsZW1lbnRbIDAgXS5zY3JvbGxIZWlnaHQ7XHJcblx0XHRcdGNsaWVudEhlaWdodCA9IHRoaXMuZWxlbWVudFsgMCBdLmNsaWVudEhlaWdodDtcclxuXHRcdFx0Ym9yZGVyVG9wID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJib3JkZXItdG9wLXdpZHRoXCIgKSApO1xyXG5cdFx0XHRib3JkZXJCb3R0b20gPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcImJvcmRlci1ib3R0b20td2lkdGhcIiApICk7XHJcblx0XHRcdGJvcmRlckhlaWdodCA9IGJvcmRlclRvcCArIGJvcmRlckJvdHRvbTtcclxuXHRcdFx0aGVpZ2h0ID0gc2Nyb2xsSGVpZ2h0ICsgYm9yZGVySGVpZ2h0ICsgMTU7XHJcblxyXG5cdFx0XHQvLyBJc3N1ZSA2MTc5OiBQYWRkaW5nIGlzIG5vdCBpbmNsdWRlZCBpbiBzY3JvbGxIZWlnaHQgYW5kXHJcblx0XHRcdC8vIGNsaWVudEhlaWdodCBieSBGaXJlZm94IGlmIG5vIHNjcm9sbGJhciBpcyB2aXNpYmxlLiBCZWNhdXNlXHJcblx0XHRcdC8vIHRleHRhcmVhcyB1c2UgdGhlIGJvcmRlci1ib3ggYm94LXNpemluZyBtb2RlbCwgcGFkZGluZyBzaG91bGQgYmVcclxuXHRcdFx0Ly8gaW5jbHVkZWQgaW4gdGhlIG5ldyAoYXNzaWduZWQpIGhlaWdodC4gQmVjYXVzZSB0aGUgaGVpZ2h0IGlzIHNldFxyXG5cdFx0XHQvLyB0byAwLCBjbGllbnRIZWlnaHQgPT0gMCBpbiBGaXJlZm94LiBUaGVyZWZvcmUsIHdlIGNhbiB1c2UgdGhpcyB0b1xyXG5cdFx0XHQvLyBjaGVjayBpZiBwYWRkaW5nIG11c3QgYmUgYWRkZWQuXHJcblx0XHRcdGlmICggY2xpZW50SGVpZ2h0ID09PSAwICkge1xyXG5cdFx0XHRcdHBhZGRpbmdUb3AgPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcInBhZGRpbmctdG9wXCIgKSApO1xyXG5cdFx0XHRcdHBhZGRpbmdCb3R0b20gPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcInBhZGRpbmctYm90dG9tXCIgKSApO1xyXG5cdFx0XHRcdHBhZGRpbmdIZWlnaHQgPSBwYWRkaW5nVG9wICsgcGFkZGluZ0JvdHRvbTtcclxuXHJcblx0XHRcdFx0aGVpZ2h0ICs9IHBhZGRpbmdIZWlnaHQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jc3Moe1xyXG5cdFx0XHRcdFwiaGVpZ2h0XCI6IGhlaWdodCxcclxuXHRcdFx0XHRcIm1pbi1oZWlnaHRcIjogXCJcIixcclxuXHRcdFx0XHRcIm1heC1oZWlnaHRcIjogXCJcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMud2luZG93LnNjcm9sbFRvcCggc2Nyb2xsVG9wICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvZ3JvdyAmJiB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlSGVpZ2h0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5hdXRvZ3JvdyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnMuYXV0b2dyb3cgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9hdXRvZ3JvdygpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLl91bmJpbmRBdXRvZ3JvdygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2VsZWN0bWVudVwiLCAkLmV4dGVuZCgge1xyXG5cdGluaXRTZWxlY3RvcjogXCJzZWxlY3Q6bm90KCA6anFtRGF0YShyb2xlPSdzbGlkZXInKSk6bm90KCA6anFtRGF0YShyb2xlPSdmbGlwc3dpdGNoJykgKVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGljb246IFwiY2FyYXQtZFwiLFxyXG5cdFx0aWNvbnBvczogXCJyaWdodFwiLFxyXG5cdFx0aW5saW5lOiBmYWxzZSxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRpY29uc2hhZG93OiBmYWxzZSwgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRvdmVybGF5VGhlbWU6IG51bGwsXHJcblx0XHRkaXZpZGVyVGhlbWU6IG51bGwsXHJcblx0XHRoaWRlUGxhY2Vob2xkZXJNZW51SXRlbXM6IHRydWUsXHJcblx0XHRjbG9zZVRleHQ6IFwiQ2xvc2VcIixcclxuXHRcdG5hdGl2ZU1lbnU6IHRydWUsXHJcblx0XHQvLyBUaGlzIG9wdGlvbiBkZWZhdWx0cyB0byB0cnVlIG9uIGlPUyBkZXZpY2VzLlxyXG5cdFx0cHJldmVudEZvY3VzWm9vbTogL2lQaG9uZXxpUGFkfGlQb2QvLnRlc3QoIG5hdmlnYXRvci5wbGF0Zm9ybSApICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSxcclxuXHRcdG1pbmk6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2Lz5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXREaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdHRoaXMuYnV0dG9uLmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbiggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c0J1dHRvbiA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZWxmLmJ1dHRvbi5mb2N1cygpO1xyXG5cdFx0fSwgNDApO1xyXG5cdH0sXHJcblxyXG5cdF9zZWxlY3RPcHRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLnNlbGVjdC5maW5kKCBcIm9wdGlvblwiICk7XHJcblx0fSxcclxuXHJcblx0Ly8gc2V0dXAgaXRlbXMgdGhhdCBhcmUgZ2VuZXJhbGx5IG5lY2Vzc2FyeSBmb3Igc2VsZWN0IG1lbnUgZXh0ZW5zaW9uXHJcblx0X3ByZUV4dGVuc2lvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaW5saW5lID0gdGhpcy5vcHRpb25zLmlubGluZSB8fCB0aGlzLmVsZW1lbnQuanFtRGF0YSggXCJpbmxpbmVcIiApLFxyXG5cdFx0XHRtaW5pID0gdGhpcy5vcHRpb25zLm1pbmkgfHwgdGhpcy5lbGVtZW50LmpxbURhdGEoIFwibWluaVwiICksXHJcblx0XHRcdGNsYXNzZXMgPSBcIlwiO1xyXG5cdFx0Ly8gVE9ETzogUG9zdCAxLjEtLW9uY2Ugd2UgaGF2ZSB0aW1lIHRvIHRlc3QgdGhvcm91Z2hseS0tYW55IGNsYXNzZXMgbWFudWFsbHkgYXBwbGllZCB0byB0aGUgb3JpZ2luYWwgZWxlbWVudCBzaG91bGQgYmUgY2FycmllZCBvdmVyIHRvIHRoZSBlbmhhbmNlZCBlbGVtZW50LCB3aXRoIGFuIGAtZW5oYW5jZWRgIHN1ZmZpeC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMzU3N1xyXG5cdFx0LyogaWYgKCAkZWxbMF0uY2xhc3NOYW1lLmxlbmd0aCApIHtcclxuXHRcdFx0Y2xhc3NlcyA9ICRlbFswXS5jbGFzc05hbWU7XHJcblx0XHR9ICovXHJcblx0XHRpZiAoICEhfnRoaXMuZWxlbWVudFswXS5jbGFzc05hbWUuaW5kZXhPZiggXCJ1aS1idG4tbGVmdFwiICkgKSB7XHJcblx0XHRcdGNsYXNzZXMgPSBcIiB1aS1idG4tbGVmdFwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggICEhfnRoaXMuZWxlbWVudFswXS5jbGFzc05hbWUuaW5kZXhPZiggXCJ1aS1idG4tcmlnaHRcIiApICkge1xyXG5cdFx0XHRjbGFzc2VzID0gXCIgdWktYnRuLXJpZ2h0XCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmxpbmUgKSB7XHJcblx0XHRcdGNsYXNzZXMgKz0gXCIgdWktYnRuLWlubGluZVwiO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBtaW5pICkge1xyXG5cdFx0XHRjbGFzc2VzICs9IFwiIHVpLW1pbmlcIjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNlbGVjdCA9IHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHRcIiApLndyYXAoIFwiPGRpdiBjbGFzcz0ndWktc2VsZWN0XCIgKyBjbGFzc2VzICsgXCInPlwiICk7XHJcblx0XHR0aGlzLnNlbGVjdElkICA9IHRoaXMuc2VsZWN0LmF0dHIoIFwiaWRcIiApIHx8ICggXCJzZWxlY3QtXCIgKyB0aGlzLnV1aWQgKTtcclxuXHRcdHRoaXMuYnV0dG9uSWQgPSB0aGlzLnNlbGVjdElkICsgXCItYnV0dG9uXCI7XHJcblx0XHR0aGlzLmxhYmVsID0gJCggXCJsYWJlbFtmb3I9J1wiKyB0aGlzLnNlbGVjdElkICtcIiddXCIgKTtcclxuXHRcdHRoaXMuaXNNdWx0aXBsZSA9IHRoaXMuc2VsZWN0WyAwIF0ubXVsdGlwbGU7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdyYXBwZXIgPSB0aGlzLmVsZW1lbnQucGFyZW50cyggXCIudWktc2VsZWN0XCIgKTtcclxuXHRcdGlmICggd3JhcHBlci5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRpZiAoIHdyYXBwZXIuaXMoIFwiLnVpLWJ0bi1sZWZ0LCAudWktYnRuLXJpZ2h0XCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHdyYXBwZXIuaGFzQ2xhc3MoIFwidWktYnRuLWxlZnRcIiApID8gXCJ1aS1idG4tbGVmdFwiIDogXCJ1aS1idG4tcmlnaHRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZWxlbWVudC5pbnNlcnRBZnRlciggd3JhcHBlciApO1xyXG5cdFx0XHR3cmFwcGVyLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcHJlRXh0ZW5zaW9uKCk7XHJcblxyXG5cdFx0dGhpcy5idXR0b24gPSB0aGlzLl9idXR0b24oKTtcclxuXHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cclxuXHRcdFx0aWNvbnBvcyA9IG9wdGlvbnMuaWNvbiA/ICggb3B0aW9ucy5pY29ucG9zIHx8IHRoaXMuc2VsZWN0LmpxbURhdGEoIFwiaWNvbnBvc1wiICkgKSA6IGZhbHNlLFxyXG5cclxuXHRcdFx0YnV0dG9uID0gdGhpcy5idXR0b25cclxuXHRcdFx0XHQuaW5zZXJ0QmVmb3JlKCB0aGlzLnNlbGVjdCApXHJcblx0XHRcdFx0LmF0dHIoIFwiaWRcIiwgdGhpcy5idXR0b25JZCApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0blwiICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5pY29uID8gKCBcIiB1aS1pY29uLVwiICsgb3B0aW9ucy5pY29uICsgXCIgdWktYnRuLWljb24tXCIgKyBpY29ucG9zICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5pY29uc2hhZG93ID8gXCIgdWktc2hhZG93LWljb25cIiA6IFwiXCIgKSApIDpcdFwiXCIgKSArIC8qIFRPRE86IFJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMudGhlbWUgPyBcIiB1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5zaGFkb3cgPyBcIiB1aS1zaGFkb3dcIiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuc2V0QnV0dG9uVGV4dCgpO1xyXG5cclxuXHRcdC8vIE9wZXJhIGRvZXMgbm90IHByb3Blcmx5IHN1cHBvcnQgb3BhY2l0eSBvbiBzZWxlY3QgZWxlbWVudHNcclxuXHRcdC8vIEluIE1pbmksIGl0IGhpZGVzIHRoZSBlbGVtZW50LCBidXQgbm90IGl0cyB0ZXh0XHJcblx0XHQvLyBPbiB0aGUgZGVza3RvcCxpdCBzZWVtcyB0byBkbyB0aGUgb3Bwb3NpdGVcclxuXHRcdC8vIGZvciB0aGVzZSByZWFzb25zLCB1c2luZyB0aGUgbmF0aXZlTWVudSBvcHRpb24gcmVzdWx0cyBpbiBhIGZ1bGwgbmF0aXZlIHNlbGVjdCBpbiBPcGVyYVxyXG5cdFx0aWYgKCBvcHRpb25zLm5hdGl2ZU1lbnUgJiYgd2luZG93Lm9wZXJhICYmIHdpbmRvdy5vcGVyYS52ZXJzaW9uICkge1xyXG5cdFx0XHRidXR0b24uYWRkQ2xhc3MoIFwidWktc2VsZWN0LW5hdGl2ZW9ubHlcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBjb3VudGVyIGZvciBtdWx0aSBzZWxlY3RzXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5idXR0b25Db3VudCA9ICQoIFwiPHNwYW4+XCIgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1saS1jb3VudCB1aS1ib2R5LWluaGVyaXRcIiApXHJcblx0XHRcdFx0LmhpZGUoKVxyXG5cdFx0XHRcdC5hcHBlbmRUbyggYnV0dG9uLmFkZENsYXNzKCBcInVpLWxpLWhhcy1jb3VudFwiICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEaXNhYmxlIGlmIHNwZWNpZmllZFxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuZWxlbWVudC5hdHRyKCBcImRpc2FibGVkXCIgKSkge1xyXG5cdFx0XHR0aGlzLmRpc2FibGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFdmVudHMgb24gbmF0aXZlIHNlbGVjdFxyXG5cdFx0dGhpcy5zZWxlY3QuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZWxmLnJlZnJlc2goKTtcclxuXHJcblx0XHRcdGlmICggISFvcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdFx0c2VsZi5fZGVsYXkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5zZWxlY3QuYmx1cigpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5idXR0b24sIHtcclxuXHRcdFx0a2V5ZG93bjogXCJfaGFuZGxlS2V5ZG93blwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1aWxkKCk7XHJcblx0fSxcclxuXHJcblx0YnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuc2VsZWN0XHJcblx0XHRcdC5hcHBlbmRUbyggc2VsZi5idXR0b24gKVxyXG5cdFx0XHQuYmluZCggXCJ2bW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gYnV0dG9uXHJcblx0XHRcdFx0c2VsZi5idXR0b24uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24ucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiZm9jdXMgdm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi50cmlnZ2VyKCBcInZtb3VzZW92ZXJcIiApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJ2bW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vIFJlbW92ZSBhY3RpdmUgY2xhc3Mgb24gc2Nyb2xsL3RvdWNobW92ZVxyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJjaGFuZ2UgYmx1ciB2bW91c2VvdXRcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24udHJpZ2dlciggXCJ2bW91c2VvdXRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEluIG1hbnkgc2l0dWF0aW9ucywgaU9TIHdpbGwgem9vbSBpbnRvIHRoZSBzZWxlY3QgdXBvbiB0YXAsIHRoaXMgcHJldmVudHMgdGhhdCBmcm9tIGhhcHBlbmluZ1xyXG5cdFx0c2VsZi5idXR0b24uYmluZCggXCJ2bW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5sYWJlbC5iaW5kKCBcImNsaWNrIGZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5zZWxlY3QuYmluZCggXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYuYnV0dG9uLmJpbmQoIFwibW91c2V1cFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5zZWxlY3QuYmluZCggXCJibHVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZWxlY3RlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2VsZWN0T3B0aW9ucygpLmZpbHRlciggXCI6c2VsZWN0ZWRcIiApO1xyXG5cdH0sXHJcblxyXG5cdHNlbGVjdGVkSW5kaWNlczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuc2VsZWN0ZWQoKS5tYXAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiBzZWxmLl9zZWxlY3RPcHRpb25zKCkuaW5kZXgoIHRoaXMgKTtcclxuXHRcdH0pLmdldCgpO1xyXG5cdH0sXHJcblxyXG5cdHNldEJ1dHRvblRleHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQoKSxcclxuXHRcdFx0dGV4dCA9IHRoaXMucGxhY2Vob2xkZXIsXHJcblx0XHRcdHNwYW4gPSAkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNwYW5cIiApICk7XHJcblxyXG5cdFx0dGhpcy5idXR0b24uY2hpbGRyZW4oIFwic3BhblwiICkubm90KCBcIi51aS1saS1jb3VudFwiICkucmVtb3ZlKCkuZW5kKCkuZW5kKCkucHJlcGVuZCggKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGVjdGVkLmxlbmd0aCApIHtcclxuXHRcdFx0XHR0ZXh0ID0gc2VsZWN0ZWQubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICQoIHRoaXMgKS50ZXh0KCk7XHJcblx0XHRcdFx0fSkuZ2V0KCkuam9pbiggXCIsIFwiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGV4dCA9IHNlbGYucGxhY2Vob2xkZXI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdGV4dCApIHtcclxuXHRcdFx0XHRzcGFuLnRleHQoIHRleHQgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBjb250ZW50cyB0byAmbmJzcDsgd2hpY2ggd2Ugd3JpdGUgYXMgJiMxNjA7IHRvIGJlIFhIVE1MIGNvbXBsaWFudCAtIHNlZSBnaC02Njk5XHJcblx0XHRcdFx0c3Bhbi5odG1sKCBcIiYjMTYwO1wiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRPRE8gcG9zc2libHkgYWdncmVnYXRlIG11bHRpcGxlIHNlbGVjdCBvcHRpb24gY2xhc3Nlc1xyXG5cdFx0XHRyZXR1cm4gc3BhblxyXG5cdFx0XHRcdC5hZGRDbGFzcyggc2VsZi5zZWxlY3QuYXR0ciggXCJjbGFzc1wiICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggc2VsZWN0ZWQuYXR0ciggXCJjbGFzc1wiICkgKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH0pKCkpO1xyXG5cdH0sXHJcblxyXG5cdHNldEJ1dHRvbkNvdW50OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQoKTtcclxuXHJcblx0XHQvLyBtdWx0aXBsZSBjb3VudCBpbnNpZGUgYnV0dG9uXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5idXR0b25Db3VudFsgc2VsZWN0ZWQubGVuZ3RoID4gMSA/IFwic2hvd1wiIDogXCJoaWRlXCIgXSgpLnRleHQoIHNlbGVjdGVkLmxlbmd0aCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVLZXlkb3duOiBmdW5jdGlvbiggLyogZXZlbnQgKi8gKSB7XHJcblx0XHR0aGlzLl9kZWxheSggXCJfcmVmcmVzaEJ1dHRvblwiICk7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoQnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuc2V0QnV0dG9uVGV4dCgpO1xyXG5cdFx0dGhpcy5zZXRCdXR0b25Db3VudCgpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaEJ1dHRvbigpO1xyXG5cdH0sXHJcblxyXG5cdC8vIG9wZW4gYW5kIGNsb3NlIHByZXNlcnZlZCBpbiBuYXRpdmUgc2VsZWN0c1xyXG5cdC8vIHRvIHNpbXBsaWZ5IHVzZXJzIGNvZGUgd2hlbiBsb29waW5nIG92ZXIgc2VsZWN0c1xyXG5cdG9wZW46ICQubm9vcCxcclxuXHRjbG9zZTogJC5ub29wLFxyXG5cclxuXHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldERpc2FibGVkKCB0cnVlICk7XHJcblx0XHR0aGlzLmJ1dHRvbi5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldERpc2FibGVkKCBmYWxzZSApO1xyXG5cdFx0dGhpcy5idXR0b24ucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLmxpbmtzID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHJcblx0Ly9saW5rcyB3aXRoaW4gY29udGVudCBhcmVhcywgdGVzdHMgaW5jbHVkZWQgd2l0aCBwYWdlXHJcblx0JCggdGFyZ2V0IClcclxuXHRcdC5maW5kKCBcImFcIiApXHJcblx0XHQuanFtRW5oYW5jZWFibGUoKVxyXG5cdFx0LmZpbHRlciggXCI6anFtRGF0YShyZWw9J3BvcHVwJylbaHJlZl1baHJlZiE9JyddXCIgKVxyXG5cdFx0LmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBBY2Nlc3NpYmlsaXR5IGluZm8gZm9yIHBvcHVwc1xyXG5cdFx0XHR2YXIgZWxlbWVudCA9IHRoaXMsXHJcblx0XHRcdFx0aWRyZWYgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKS5zdWJzdHJpbmcoIDEgKTtcclxuXHJcblx0XHRcdGlmICggaWRyZWYgKSB7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1oYXNwb3B1cFwiLCB0cnVlICk7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1vd25zXCIsIGlkcmVmICk7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmVuZCgpXHJcblx0XHQubm90KCBcIi51aS1idG4sIDpqcW1EYXRhKHJvbGU9J25vbmUnKSwgOmpxbURhdGEocm9sZT0nbm9qcycpXCIgKVxyXG5cdFx0LmFkZENsYXNzKCBcInVpLWxpbmtcIiApO1xyXG5cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbmZ1bmN0aW9uIGZpdFNlZ21lbnRJbnNpZGVTZWdtZW50KCB3aW5kb3dTaXplLCBzZWdtZW50U2l6ZSwgb2Zmc2V0LCBkZXNpcmVkICkge1xyXG5cdHZhciByZXR1cm5WYWx1ZSA9IGRlc2lyZWQ7XHJcblxyXG5cdGlmICggd2luZG93U2l6ZSA8IHNlZ21lbnRTaXplICkge1xyXG5cdFx0Ly8gQ2VudGVyIHNlZ21lbnQgaWYgaXQncyBiaWdnZXIgdGhhbiB0aGUgd2luZG93XHJcblx0XHRyZXR1cm5WYWx1ZSA9IG9mZnNldCArICggd2luZG93U2l6ZSAtIHNlZ21lbnRTaXplICkgLyAyO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBPdGhlcndpc2UgY2VudGVyIGl0IGF0IHRoZSBkZXNpcmVkIGNvb3JkaW5hdGUgd2hpbGUga2VlcGluZyBpdCBjb21wbGV0ZWx5IGluc2lkZSB0aGUgd2luZG93XHJcblx0XHRyZXR1cm5WYWx1ZSA9IE1hdGgubWluKCBNYXRoLm1heCggb2Zmc2V0LCBkZXNpcmVkIC0gc2VnbWVudFNpemUgLyAyICksIG9mZnNldCArIHdpbmRvd1NpemUgLSBzZWdtZW50U2l6ZSApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhlV2luZG93ICkge1xyXG5cdHJldHVybiB7XHJcblx0XHR4OiB0aGVXaW5kb3cuc2Nyb2xsTGVmdCgpLFxyXG5cdFx0eTogdGhlV2luZG93LnNjcm9sbFRvcCgpLFxyXG5cdFx0Y3g6ICggdGhlV2luZG93WyAwIF0uaW5uZXJXaWR0aCB8fCB0aGVXaW5kb3cud2lkdGgoKSApLFxyXG5cdFx0Y3k6ICggdGhlV2luZG93WyAwIF0uaW5uZXJIZWlnaHQgfHwgdGhlV2luZG93LmhlaWdodCgpIClcclxuXHR9O1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucG9wdXBcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0b3ZlcmxheVRoZW1lOiBudWxsLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHRyYW5zaXRpb246IFwibm9uZVwiLFxyXG5cdFx0cG9zaXRpb25UbzogXCJvcmlnaW5cIixcclxuXHRcdHRvbGVyYW5jZTogbnVsbCxcclxuXHRcdGNsb3NlTGlua1NlbGVjdG9yOiBcImE6anFtRGF0YShyZWw9J2JhY2snKVwiLFxyXG5cdFx0Y2xvc2VMaW5rRXZlbnRzOiBcImNsaWNrLnBvcHVwXCIsXHJcblx0XHRuYXZpZ2F0ZUV2ZW50czogXCJuYXZpZ2F0ZS5wb3B1cFwiLFxyXG5cdFx0Y2xvc2VFdmVudHM6IFwibmF2aWdhdGUucG9wdXAgcGFnZWJlZm9yZWNoYW5nZS5wb3B1cFwiLFxyXG5cdFx0ZGlzbWlzc2libGU6IHRydWUsXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gTk9URSBXaW5kb3dzIFBob25lIDcgaGFzIGEgc2Nyb2xsIHBvc2l0aW9uIGNhY2hpbmcgaXNzdWUgdGhhdFxyXG5cdFx0Ly8gICAgICByZXF1aXJlcyB1cyB0byBkaXNhYmxlIHBvcHVwIGhpc3RvcnkgbWFuYWdlbWVudCBieSBkZWZhdWx0XHJcblx0XHQvLyAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDc4NFxyXG5cdFx0Ly9cclxuXHRcdC8vIE5PVEUgdGhpcyBvcHRpb24gaXMgbW9kaWZpZWQgaW4gX2NyZWF0ZSFcclxuXHRcdGhpc3Rvcnk6ICEkLm1vYmlsZS5icm93c2VyLm9sZElFXHJcblx0fSxcclxuXHJcblx0Ly8gV2hlbiB0aGUgdXNlciBkZXByZXNzZXMgdGhlIG1vdXNlL2ZpbmdlciBvbiBhbiBlbGVtZW50IGluc2lkZSB0aGUgcG9wdXAgd2hpbGUgdGhlIHBvcHVwIGlzXHJcblx0Ly8gb3Blbiwgd2UgaWdub3JlIHJlc2l6ZSBldmVudHMgZm9yIGEgc2hvcnQgd2hpbGUuIFRoaXMgcHJldmVudHMgIzY5NjEuXHJcblx0X2hhbmRsZURvY3VtZW50Vm1vdXNlZG93bjogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gJiYgJC5jb250YWlucyggdGhpcy5fdWkuY29udGFpbmVyWyAwIF0sIHRoZUV2ZW50LnRhcmdldCApICkge1xyXG5cdFx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGVFbGVtZW50ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRteUlkID0gdGhlRWxlbWVudC5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gV2UgbmVlZCB0byBhZGp1c3QgdGhlIGhpc3Rvcnkgb3B0aW9uIHRvIGJlIGZhbHNlIGlmIHRoZXJlJ3Mgbm8gQUpBWCBuYXYuXHJcblx0XHQvLyBXZSBjYW4ndCBkbyBpdCBpbiB0aGUgb3B0aW9uIGRlY2xhcmF0aW9ucyBiZWNhdXNlIHRob3NlIGFyZSBydW4gYmVmb3JlXHJcblx0XHQvLyBpdCBpcyBkZXRlcm1pbmVkIHdoZXRoZXIgdGhlcmUgc2hhbGwgYmUgQUpBWCBuYXYuXHJcblx0XHRjdXJyZW50T3B0aW9ucy5oaXN0b3J5ID0gY3VycmVudE9wdGlvbnMuaGlzdG9yeSAmJiAkLm1vYmlsZS5hamF4RW5hYmxlZCAmJiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZDtcclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xyXG5cdFx0XHRcInZtb3VzZWRvd25cIjogXCJfaGFuZGxlRG9jdW1lbnRWbW91c2Vkb3duXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERlZmluZSBpbnN0YW5jZSB2YXJpYWJsZXNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9zY3JvbGxUb3A6IDAsXHJcblx0XHRcdF9wYWdlOiB0aGVFbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLFxyXG5cdFx0XHRfdWk6IG51bGwsXHJcblx0XHRcdF9mYWxsYmFja1RyYW5zaXRpb246IFwiXCIsXHJcblx0XHRcdF9jdXJyZW50VHJhbnNpdGlvbjogZmFsc2UsXHJcblx0XHRcdF9wcmVyZXF1aXNpdGVzOiBudWxsLFxyXG5cdFx0XHRfaXNPcGVuOiBmYWxzZSxcclxuXHRcdFx0X3RvbGVyYW5jZTogbnVsbCxcclxuXHRcdFx0X3Jlc2l6ZURhdGE6IG51bGwsXHJcblx0XHRcdF9pZ25vcmVSZXNpemVUbzogMCxcclxuXHRcdFx0X29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzczogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggdGhpcy5fcGFnZS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHRoaXMuX3BhZ2UgPSAkKCBcImJvZHlcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggY3VycmVudE9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpID0ge1xyXG5cdFx0XHRcdGNvbnRhaW5lcjogdGhlRWxlbWVudC5wYXJlbnQoKSxcclxuXHRcdFx0XHRzY3JlZW46IHRoZUVsZW1lbnQucGFyZW50KCkucHJldigpLFxyXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiAkKCB0aGlzLmRvY3VtZW50WyAwIF0uZ2V0RWxlbWVudEJ5SWQoIG15SWQgKyBcIi1wbGFjZWhvbGRlclwiICkgKVxyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB0aGlzLl9lbmhhbmNlKCB0aGVFbGVtZW50LCBteUlkICk7XHJcblx0XHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggY3VycmVudE9wdGlvbnMudHJhbnNpdGlvbiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpc1xyXG5cdFx0XHQuX3NldFRvbGVyYW5jZSggY3VycmVudE9wdGlvbnMudG9sZXJhbmNlIClcclxuXHRcdFx0Ll91aS5mb2N1c0VsZW1lbnQgPSB0aGlzLl91aS5jb250YWluZXI7XHJcblxyXG5cdFx0Ly8gRXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuX29uKCB0aGlzLl91aS5zY3JlZW4sIHsgXCJ2Y2xpY2tcIjogXCJfZWF0RXZlbnRBbmRDbG9zZVwiIH0gKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xyXG5cdFx0XHRvcmllbnRhdGlvbmNoYW5nZTogJC5wcm94eSggdGhpcywgXCJfaGFuZGxlV2luZG93T3JpZW50YXRpb25jaGFuZ2VcIiApLFxyXG5cdFx0XHRyZXNpemU6ICQucHJveHkoIHRoaXMsIFwiX2hhbmRsZVdpbmRvd1Jlc2l6ZVwiICksXHJcblx0XHRcdGtleXVwOiAkLnByb3h5KCB0aGlzLCBcIl9oYW5kbGVXaW5kb3dLZXlVcFwiIClcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHsgXCJmb2N1c2luXCI6IFwiX2hhbmRsZURvY3VtZW50Rm9jdXNJblwiIH0gKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oIHRoZUVsZW1lbnQsIG15SWQgKSB7XHJcblx0XHR2YXIgY3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHdyYXBwZXJDbGFzcyA9IGN1cnJlbnRPcHRpb25zLndyYXBwZXJDbGFzcyxcclxuXHRcdFx0dWkgPSB7XHJcblx0XHRcdFx0c2NyZWVuOiAkKCBcIjxkaXYgY2xhc3M9J3VpLXNjcmVlbi1oaWRkZW4gdWktcG9wdXAtc2NyZWVuIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1vdmVybGF5LVwiLCBjdXJyZW50T3B0aW9ucy5vdmVybGF5VGhlbWUgKSArIFwiJz48L2Rpdj5cIiApLFxyXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiAkKCBcIjxkaXYgc3R5bGU9J2Rpc3BsYXk6IG5vbmU7Jz48IS0tIHBsYWNlaG9sZGVyIC0tPjwvZGl2PlwiICksXHJcblx0XHRcdFx0Y29udGFpbmVyOiAkKCBcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWNvbnRhaW5lciB1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiArXHJcblx0XHRcdFx0XHQoIHdyYXBwZXJDbGFzcyA/ICggXCIgXCIgKyB3cmFwcGVyQ2xhc3MgKSA6IFwiXCIgKSArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdH0sXHJcblx0XHRcdGZyYWdtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggdWkuc2NyZWVuWyAwIF0gKTtcclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCB1aS5jb250YWluZXJbIDAgXSApO1xyXG5cclxuXHRcdGlmICggbXlJZCApIHtcclxuXHRcdFx0dWkuc2NyZWVuLmF0dHIoIFwiaWRcIiwgbXlJZCArIFwiLXNjcmVlblwiICk7XHJcblx0XHRcdHVpLmNvbnRhaW5lci5hdHRyKCBcImlkXCIsIG15SWQgKyBcIi1wb3B1cFwiICk7XHJcblx0XHRcdHVpLnBsYWNlaG9sZGVyXHJcblx0XHRcdFx0LmF0dHIoIFwiaWRcIiwgbXlJZCArIFwiLXBsYWNlaG9sZGVyXCIgKVxyXG5cdFx0XHRcdC5odG1sKCBcIjwhLS0gcGxhY2Vob2xkZXIgZm9yIFwiICsgbXlJZCArIFwiIC0tPlwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQXBwbHkgdGhlIHByb3RvXHJcblx0XHR0aGlzLl9wYWdlWyAwIF0uYXBwZW5kQ2hpbGQoIGZyYWdtZW50ICk7XHJcblx0XHQvLyBMZWF2ZSBhIHBsYWNlaG9sZGVyIHdoZXJlIHRoZSBlbGVtZW50IHVzZWQgdG8gYmVcclxuXHRcdHVpLnBsYWNlaG9sZGVyLmluc2VydEFmdGVyKCB0aGVFbGVtZW50ICk7XHJcblx0XHR0aGVFbGVtZW50XHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIGN1cnJlbnRPcHRpb25zLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0KCBjdXJyZW50T3B0aW9ucy5zaGFkb3cgPyBcInVpLW92ZXJsYXktc2hhZG93IFwiIDogXCJcIiApICtcclxuXHRcdFx0XHQoIGN1cnJlbnRPcHRpb25zLmNvcm5lcnMgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgKVxyXG5cdFx0XHQuYXBwZW5kVG8oIHVpLmNvbnRhaW5lciApO1xyXG5cclxuXHRcdHJldHVybiB1aTtcclxuXHR9LFxyXG5cclxuXHRfZWF0RXZlbnRBbmRDbG9zZTogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHQvLyBNYWtlIHN1cmUgdGhlIHNjcmVlbiBjb3ZlcnMgdGhlIGVudGlyZSBkb2N1bWVudCAtIENTUyBpcyBzb21ldGltZXMgbm90XHJcblx0Ly8gZW5vdWdoIHRvIGFjY29tcGxpc2ggdGhpcy5cclxuXHRfcmVzaXplU2NyZWVuOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzY3JlZW4gPSB0aGlzLl91aS5zY3JlZW4sXHJcblx0XHRcdHBvcHVwSGVpZ2h0ID0gdGhpcy5fdWkuY29udGFpbmVyLm91dGVySGVpZ2h0KCB0cnVlICksXHJcblx0XHRcdHNjcmVlbkhlaWdodCA9IHNjcmVlbi5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKS5oZWlnaHQoKSxcclxuXHJcblx0XHRcdC8vIFN1YnRyYWN0aW5nIDEgaGVyZSBpcyBuZWNlc3NhcnkgZm9yIGFuIG9ic2N1cmUgQW5kcmRvaWQgNC4wIGJ1ZyB3aGVyZVxyXG5cdFx0XHQvLyB0aGUgYnJvd3NlciBoYW5ncyBpZiB0aGUgc2NyZWVuIGNvdmVycyB0aGUgZW50aXJlIGRvY3VtZW50IDovXHJcblx0XHRcdGRvY3VtZW50SGVpZ2h0ID0gdGhpcy5kb2N1bWVudC5oZWlnaHQoKSAtIDE7XHJcblxyXG5cdFx0aWYgKCBzY3JlZW5IZWlnaHQgPCBkb2N1bWVudEhlaWdodCApIHtcclxuXHRcdFx0c2NyZWVuLmhlaWdodCggZG9jdW1lbnRIZWlnaHQgKTtcclxuXHRcdH0gZWxzZSBpZiAoIHBvcHVwSGVpZ2h0ID4gc2NyZWVuSGVpZ2h0ICkge1xyXG5cdFx0XHRzY3JlZW4uaGVpZ2h0KCBwb3B1cEhlaWdodCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVXaW5kb3dLZXlVcDogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gJiYgdGhlRXZlbnQua2V5Q29kZSA9PT0gJC5tb2JpbGUua2V5Q29kZS5FU0NBUEUgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9lYXRFdmVudEFuZENsb3NlKCB0aGVFdmVudCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9leHBlY3RSZXNpemVFdmVudDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd2luZG93Q29vcmRpbmF0ZXMgPSBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhpcy53aW5kb3cgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX3Jlc2l6ZURhdGEgKSB7XHJcblx0XHRcdGlmICggd2luZG93Q29vcmRpbmF0ZXMueCA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy54ICYmXHJcblx0XHRcdFx0d2luZG93Q29vcmRpbmF0ZXMueSA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy55ICYmXHJcblx0XHRcdFx0d2luZG93Q29vcmRpbmF0ZXMuY3ggPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMuY3ggJiZcclxuXHRcdFx0XHR3aW5kb3dDb29yZGluYXRlcy5jeSA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy5jeSApIHtcclxuXHRcdFx0XHQvLyB0aW1lb3V0IG5vdCByZWZyZXNoZWRcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gY2xlYXIgZXhpc3RpbmcgdGltZW91dCAtIGl0IHdpbGwgYmUgcmVmcmVzaGVkIGJlbG93XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLl9yZXNpemVEYXRhLnRpbWVvdXRJZCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVzaXplRGF0YSA9IHtcclxuXHRcdFx0dGltZW91dElkOiB0aGlzLl9kZWxheSggXCJfcmVzaXplVGltZW91dFwiLCAyMDAgKSxcclxuXHRcdFx0d2luZG93Q29vcmRpbmF0ZXM6IHdpbmRvd0Nvb3JkaW5hdGVzXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNpemVUaW1lb3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHRpZiAoICF0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpICkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fdWkuY29udGFpbmVyLmhhc0NsYXNzKCBcInVpLXBvcHVwLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0XHQvLyBlZmZlY3RpdmVseSByYXBpZC1vcGVuIHRoZSBwb3B1cCB3aGlsZSBsZWF2aW5nIHRoZSBzY3JlZW4gaW50YWN0XHJcblx0XHRcdFx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgKTtcclxuXHRcdFx0XHRcdHRoaXMucmVwb3NpdGlvbiggeyBwb3NpdGlvblRvOiBcIndpbmRvd1wiIH0gKTtcclxuXHRcdFx0XHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fcmVzaXplU2NyZWVuKCk7XHJcblx0XHRcdFx0dGhpcy5fcmVzaXplRGF0YSA9IG51bGw7XHJcblx0XHRcdFx0dGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3Jlc2l6ZURhdGEgPSBudWxsO1xyXG5cdFx0XHR0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc3RvcElnbm9yaW5nUmVzaXplRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZVRvID0gMDtcclxuXHR9LFxyXG5cclxuXHRfaWdub3JlUmVzaXplRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5faWdub3JlUmVzaXplVG8gKSB7XHJcblx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5faWdub3JlUmVzaXplVG8gKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZVRvID0gdGhpcy5fZGVsYXkoIFwiX3N0b3BJZ25vcmluZ1Jlc2l6ZUV2ZW50c1wiLCAxMDAwICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVdpbmRvd1Jlc2l6ZTogZnVuY3Rpb24oLyogdGhlRXZlbnQgKi8pIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICYmIHRoaXMuX2lnbm9yZVJlc2l6ZVRvID09PSAwICkge1xyXG5cdFx0XHRpZiAoICggdGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKSB8fCB0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgKSAmJlxyXG5cdFx0XHRcdCF0aGlzLl91aS5jb250YWluZXIuaGFzQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHQvLyBlZmZlY3RpdmVseSByYXBpZC1jbG9zZSB0aGUgcG9wdXAgd2hpbGUgbGVhdmluZyB0aGUgc2NyZWVuIGludGFjdFxyXG5cdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVXaW5kb3dPcmllbnRhdGlvbmNoYW5nZTogZnVuY3Rpb24oLyogdGhlRXZlbnQgKi8pIHtcclxuXHRcdGlmICggIXRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyAmJiB0aGlzLl9pc09wZW4gJiYgdGhpcy5faWdub3JlUmVzaXplVG8gPT09IDAgKSB7XHJcblx0XHRcdHRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCk7XHJcblx0XHRcdHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gV2hlbiB0aGUgcG9wdXAgaXMgb3BlbiwgYXR0ZW1wdGluZyB0byBmb2N1cyBvbiBhbiBlbGVtZW50IHRoYXQgaXMgbm90IGFcclxuXHQvLyBjaGlsZCBvZiB0aGUgcG9wdXAgd2lsbCByZWRpcmVjdCBmb2N1cyB0byB0aGUgcG9wdXBcclxuXHRfaGFuZGxlRG9jdW1lbnRGb2N1c0luOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHR2YXIgdGFyZ2V0LFxyXG5cdFx0XHR0YXJnZXRFbGVtZW50ID0gdGhlRXZlbnQudGFyZ2V0LFxyXG5cdFx0XHR1aSA9IHRoaXMuX3VpO1xyXG5cclxuXHRcdGlmICggIXRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGFyZ2V0RWxlbWVudCAhPT0gdWkuY29udGFpbmVyWyAwIF0gKSB7XHJcblx0XHRcdHRhcmdldCA9ICQoIHRhcmdldEVsZW1lbnQgKTtcclxuXHRcdFx0aWYgKCAhJC5jb250YWlucyggdWkuY29udGFpbmVyWyAwIF0sIHRhcmdldEVsZW1lbnQgKSApIHtcclxuXHRcdFx0XHQkKCB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudCApLm9uZSggXCJmb2N1c1wiLCAkLnByb3h5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRoaXMuX3NhZmVseUJsdXIoIHRhcmdldEVsZW1lbnQgKTtcclxuXHRcdFx0XHR9LCB0aGlzICkgKTtcclxuXHRcdFx0XHR1aS5mb2N1c0VsZW1lbnQuZm9jdXMoKTtcclxuXHRcdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdHRoZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIGlmICggdWkuZm9jdXNFbGVtZW50WyAwIF0gPT09IHVpLmNvbnRhaW5lclsgMCBdICkge1xyXG5cdFx0XHRcdHVpLmZvY3VzRWxlbWVudCA9IHRhcmdldDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdH0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHByZWZpeCwgdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6ICggcHJlZml4ICsgdmFsdWUgKSApIDogKCBwcmVmaXggKyBcImluaGVyaXRcIiApICk7XHJcblx0fSxcclxuXHJcblx0X2FwcGx5VHJhbnNpdGlvbjogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0aWYgKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gKTtcclxuXHRcdFx0aWYgKCB2YWx1ZSAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uID0gJC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24oIHZhbHVlICk7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gPT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uID0gXCJcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLmFkZENsYXNzKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbmV3T3B0aW9ucyApIHtcclxuXHRcdHZhciBjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dGhlRWxlbWVudCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0c2NyZWVuID0gdGhpcy5fdWkuc2NyZWVuO1xyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy53cmFwcGVyQ2xhc3MgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBjdXJyZW50T3B0aW9ucy53cmFwcGVyQ2xhc3MgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggbmV3T3B0aW9ucy53cmFwcGVyQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhlRWxlbWVudFxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgY3VycmVudE9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBuZXdPcHRpb25zLnRoZW1lICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMub3ZlcmxheVRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHNjcmVlblxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktb3ZlcmxheS1cIiwgY3VycmVudE9wdGlvbnMub3ZlcmxheVRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktb3ZlcmxheS1cIiwgbmV3T3B0aW9ucy5vdmVybGF5VGhlbWUgKSApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdFx0c2NyZWVuLmFkZENsYXNzKCBcImluXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhlRWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1vdmVybGF5LXNoYWRvd1wiLCBuZXdPcHRpb25zLnNoYWRvdyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoZUVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBuZXdPcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMudHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICF0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiApIHtcclxuXHRcdFx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIG5ld09wdGlvbnMudHJhbnNpdGlvbiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRUb2xlcmFuY2UoIG5ld09wdGlvbnMudG9sZXJhbmNlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggbmV3T3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIG5ld09wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0VG9sZXJhbmNlOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YXIgdG9sID0geyB0OiAzMCwgcjogMTUsIGI6IDMwLCBsOiAxNSB9LFxyXG5cdFx0XHRhcjtcclxuXHJcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGFyID0gU3RyaW5nKCB2YWx1ZSApLnNwbGl0KCBcIixcIiApO1xyXG5cclxuXHRcdFx0JC5lYWNoKCBhciwgZnVuY3Rpb24oIGlkeCwgdmFsICkgeyBhclsgaWR4IF0gPSBwYXJzZUludCggdmFsLCAxMCApOyB9ICk7XHJcblxyXG5cdFx0XHRzd2l0Y2goIGFyLmxlbmd0aCApIHtcclxuXHRcdFx0XHQvLyBBbGwgdmFsdWVzIGFyZSB0byBiZSB0aGUgc2FtZVxyXG5cdFx0XHRcdGNhc2UgMTpcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMCBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC50ID0gdG9sLnIgPSB0b2wuYiA9IHRvbC5sID0gYXJbIDAgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgZmlyc3QgdmFsdWUgZGVub3RlcyB0b3AvYm90dG9tIHRvbGVyYW5jZSwgYW5kIHRoZSBzZWNvbmQgdmFsdWUgZGVub3RlcyBsZWZ0L3JpZ2h0IHRvbGVyYW5jZVxyXG5cdFx0XHRcdGNhc2UgMjpcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMCBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC50ID0gdG9sLmIgPSBhclsgMCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAxIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLmwgPSB0b2wuciA9IGFyWyAxIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGFycmF5IGNvbnRhaW5zIHZhbHVlcyBpbiB0aGUgb3JkZXIgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XHJcblx0XHRcdFx0Y2FzZSA0OlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAwIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnQgPSBhclsgMCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAxIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnIgPSBhclsgMSBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAyIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLmIgPSBhclsgMiBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAzIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLmwgPSBhclsgMyBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3RvbGVyYW5jZSA9IHRvbDtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9jbGFtcFBvcHVwV2lkdGg6IGZ1bmN0aW9uKCBpbmZvT25seSApIHtcclxuXHRcdHZhciBtZW51U2l6ZSxcclxuXHRcdFx0d2luZG93Q29vcmRpbmF0ZXMgPSBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhpcy53aW5kb3cgKSxcclxuXHRcdFx0Ly8gcmVjdGFuZ2xlIHdpdGhpbiB3aGljaCB0aGUgcG9wdXAgbXVzdCBmaXRcclxuXHRcdFx0cmVjdGFuZ2xlID0ge1xyXG5cdFx0XHRcdHg6IHRoaXMuX3RvbGVyYW5jZS5sLFxyXG5cdFx0XHRcdHk6IHdpbmRvd0Nvb3JkaW5hdGVzLnkgKyB0aGlzLl90b2xlcmFuY2UudCxcclxuXHRcdFx0XHRjeDogd2luZG93Q29vcmRpbmF0ZXMuY3ggLSB0aGlzLl90b2xlcmFuY2UubCAtIHRoaXMuX3RvbGVyYW5jZS5yLFxyXG5cdFx0XHRcdGN5OiB3aW5kb3dDb29yZGluYXRlcy5jeSAtIHRoaXMuX3RvbGVyYW5jZS50IC0gdGhpcy5fdG9sZXJhbmNlLmJcclxuXHRcdFx0fTtcclxuXHJcblx0XHRpZiAoICFpbmZvT25seSApIHtcclxuXHRcdFx0Ly8gQ2xhbXAgdGhlIHdpZHRoIG9mIHRoZSBtZW51IGJlZm9yZSBncmFiYmluZyBpdHMgc2l6ZVxyXG5cdFx0XHR0aGlzLl91aS5jb250YWluZXIuY3NzKCBcIm1heC13aWR0aFwiLCByZWN0YW5nbGUuY3ggKTtcclxuXHRcdH1cclxuXHJcblx0XHRtZW51U2l6ZSA9IHtcclxuXHRcdFx0Y3g6IHRoaXMuX3VpLmNvbnRhaW5lci5vdXRlcldpZHRoKCB0cnVlICksXHJcblx0XHRcdGN5OiB0aGlzLl91aS5jb250YWluZXIub3V0ZXJIZWlnaHQoIHRydWUgKVxyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4geyByYzogcmVjdGFuZ2xlLCBtZW51U2l6ZTogbWVudVNpemUgfTtcclxuXHR9LFxyXG5cclxuXHRfY2FsY3VsYXRlRmluYWxMb2NhdGlvbjogZnVuY3Rpb24oIGRlc2lyZWQsIGNsYW1wSW5mbyApIHtcclxuXHRcdHZhciByZXR1cm5WYWx1ZSxcclxuXHRcdFx0cmVjdGFuZ2xlID0gY2xhbXBJbmZvLnJjLFxyXG5cdFx0XHRtZW51U2l6ZSA9IGNsYW1wSW5mby5tZW51U2l6ZTtcclxuXHJcblx0XHQvLyBDZW50ZXIgdGhlIG1lbnUgb3ZlciB0aGUgZGVzaXJlZCBjb29yZGluYXRlcywgd2hpbGUgbm90IGdvaW5nIG91dHNpZGVcclxuXHRcdC8vIHRoZSB3aW5kb3cgdG9sZXJhbmNlcy4gVGhpcyB3aWxsIGNlbnRlciB3cnQuIHRoZSB3aW5kb3cgaWYgdGhlIHBvcHVwIGlzXHJcblx0XHQvLyB0b28gbGFyZ2UuXHJcblx0XHRyZXR1cm5WYWx1ZSA9IHtcclxuXHRcdFx0bGVmdDogZml0U2VnbWVudEluc2lkZVNlZ21lbnQoIHJlY3RhbmdsZS5jeCwgbWVudVNpemUuY3gsIHJlY3RhbmdsZS54LCBkZXNpcmVkLnggKSxcclxuXHRcdFx0dG9wOiBmaXRTZWdtZW50SW5zaWRlU2VnbWVudCggcmVjdGFuZ2xlLmN5LCBtZW51U2l6ZS5jeSwgcmVjdGFuZ2xlLnksIGRlc2lyZWQueSApXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSB0aGUgdG9wIG9mIHRoZSBtZW51IGlzIHZpc2libGVcclxuXHRcdHJldHVyblZhbHVlLnRvcCA9IE1hdGgubWF4KCAwLCByZXR1cm5WYWx1ZS50b3AgKTtcclxuXHJcblx0XHQvLyBJZiB0aGUgaGVpZ2h0IG9mIHRoZSBtZW51IGlzIHNtYWxsZXIgdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSBkb2N1bWVudFxyXG5cdFx0Ly8gYWxpZ24gdGhlIGJvdHRvbSB3aXRoIHRoZSBib3R0b20gb2YgdGhlIGRvY3VtZW50XHJcblxyXG5cdFx0cmV0dXJuVmFsdWUudG9wIC09IE1hdGgubWluKCByZXR1cm5WYWx1ZS50b3AsXHJcblx0XHRcdE1hdGgubWF4KCAwLCByZXR1cm5WYWx1ZS50b3AgKyBtZW51U2l6ZS5jeSAtIHRoaXMuZG9jdW1lbnQuaGVpZ2h0KCkgKSApO1xyXG5cclxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHR9LFxyXG5cclxuXHQvLyBUcnkgYW5kIGNlbnRlciB0aGUgb3ZlcmxheSBvdmVyIHRoZSBnaXZlbiBjb29yZGluYXRlc1xyXG5cdF9wbGFjZW1lbnRDb29yZHM6IGZ1bmN0aW9uKCBkZXNpcmVkICkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2NhbGN1bGF0ZUZpbmFsTG9jYXRpb24oIGRlc2lyZWQsIHRoaXMuX2NsYW1wUG9wdXBXaWR0aCgpICk7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZVByZXJlcXVpc2l0ZXM6IGZ1bmN0aW9uKCBzY3JlZW5QcmVyZXF1aXNpdGUsIGNvbnRhaW5lclByZXJlcXVpc2l0ZSwgd2hlbkRvbmUgKSB7XHJcblx0XHR2YXIgcHJlcmVxdWlzaXRlcyxcclxuXHRcdFx0c2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gSXQgaXMgaW1wb3J0YW50IHRvIG1haW50YWluIGJvdGggdGhlIGxvY2FsIHZhcmlhYmxlIHByZXJlcXVpc2l0ZXMgYW5kXHJcblx0XHQvLyBzZWxmLl9wcmVyZXF1aXNpdGVzLiBUaGUgbG9jYWwgdmFyaWFibGUgcmVtYWlucyBpbiB0aGUgY2xvc3VyZSBvZiB0aGVcclxuXHRcdC8vIGZ1bmN0aW9ucyB3aGljaCBjYWxsIHRoZSBjYWxsYmFja3MgcGFzc2VkIGluLiBUaGUgY29tcGFyaXNvbiBiZXR3ZWVuIHRoZVxyXG5cdFx0Ly8gbG9jYWwgdmFyaWFibGUgYW5kIHNlbGYuX3ByZXJlcXVpc2l0ZXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIG9uY2UgYVxyXG5cdFx0Ly8gZnVuY3Rpb24gaGFzIGJlZW4gcGFzc2VkIHRvIC5hbmltYXRpb25Db21wbGV0ZSgpIGl0IHdpbGwgYmUgY2FsbGVkIG5leHRcclxuXHRcdC8vIHRpbWUgYW4gYW5pbWF0aW9uIGNvbXBsZXRlcywgZXZlbiBpZiB0aGF0J3Mgbm90IHRoZSBhbmltYXRpb24gd2hvc2UgZW5kXHJcblx0XHQvLyB0aGUgZnVuY3Rpb24gd2FzIHN1cHBvc2VkIHRvIGNhdGNoIChmb3IgZXhhbXBsZSwgaWYgYW4gYWJvcnQgaGFwcGVuc1xyXG5cdFx0Ly8gZHVyaW5nIHRoZSBvcGVuaW5nIGFuaW1hdGlvbiwgdGhlIC5hbmltYXRpb25Db21wbGV0ZSBoYW5kbGVyIGlzIG5vdFxyXG5cdFx0Ly8gY2FsbGVkIGZvciB0aGF0IGFuaW1hdGlvbiBhbnltb3JlLCBidXQgdGhlIGhhbmRsZXIgcmVtYWlucyBhdHRhY2hlZCwgc29cclxuXHRcdC8vIGl0IGlzIGNhbGxlZCB0aGUgbmV4dCB0aW1lIHRoZSBwb3B1cCBpcyBvcGVuZWQgLSBtYWtpbmcgaXQgc3RhbGUuXHJcblx0XHQvLyBDb21wYXJpbmcgdGhlIGxvY2FsIHZhcmlhYmxlIHByZXJlcXVpc2l0ZXMgdG8gdGhlIHdpZGdldC1sZXZlbCB2YXJpYWJsZVxyXG5cdFx0Ly8gc2VsZi5fcHJlcmVxdWlzaXRlcyBlbnN1cmVzIHRoYXQgY2FsbGJhY2tzIHRyaWdnZXJlZCBieSBhIHN0YWxlXHJcblx0XHQvLyAuYW5pbWF0aW9uQ29tcGxldGUgd2lsbCBiZSBpZ25vcmVkLlxyXG5cclxuXHRcdHByZXJlcXVpc2l0ZXMgPSB7XHJcblx0XHRcdHNjcmVlbjogJC5EZWZlcnJlZCgpLFxyXG5cdFx0XHRjb250YWluZXI6ICQuRGVmZXJyZWQoKVxyXG5cdFx0fTtcclxuXHJcblx0XHRwcmVyZXF1aXNpdGVzLnNjcmVlbi50aGVuKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzICkge1xyXG5cdFx0XHRcdHNjcmVlblByZXJlcXVpc2l0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcmVyZXF1aXNpdGVzLmNvbnRhaW5lci50aGVuKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzICkge1xyXG5cdFx0XHRcdGNvbnRhaW5lclByZXJlcXVpc2l0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQkLndoZW4oIHByZXJlcXVpc2l0ZXMuc2NyZWVuLCBwcmVyZXF1aXNpdGVzLmNvbnRhaW5lciApLmRvbmUoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMgKSB7XHJcblx0XHRcdFx0c2VsZi5fcHJlcmVxdWlzaXRlcyA9IG51bGw7XHJcblx0XHRcdFx0d2hlbkRvbmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2VsZi5fcHJlcmVxdWlzaXRlcyA9IHByZXJlcXVpc2l0ZXM7XHJcblx0fSxcclxuXHJcblx0X2FuaW1hdGU6IGZ1bmN0aW9uKCBhcmdzICkge1xyXG5cdFx0Ly8gTk9URSBiZWZvcmUgcmVtb3ZpbmcgdGhlIGRlZmF1bHQgYW5pbWF0aW9uIG9mIHRoZSBzY3JlZW5cclxuXHRcdC8vICAgICAgdGhpcyBoYWQgYW4gYW5pbWF0ZSBjYWxsYmFjayB0aGF0IHdvdWxkIHJlc29sdmUgdGhlIGRlZmVycmVkXHJcblx0XHQvLyAgICAgIG5vdyB0aGUgZGVmZXJyZWQgaXMgcmVzb2x2ZWQgaW1tZWRpYXRlbHlcclxuXHRcdC8vIFRPRE8gcmVtb3ZlIHRoZSBkZXBlbmRlbmN5IG9uIHRoZSBzY3JlZW4gZGVmZXJyZWRcclxuXHRcdHRoaXMuX3VpLnNjcmVlblxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIGFyZ3MuY2xhc3NUb1JlbW92ZSApXHJcblx0XHRcdC5hZGRDbGFzcyggYXJncy5zY3JlZW5DbGFzc1RvQWRkICk7XHJcblxyXG5cdFx0YXJncy5wcmVyZXF1aXNpdGVzLnNjcmVlbi5yZXNvbHZlKCk7XHJcblxyXG5cdFx0aWYgKCBhcmdzLnRyYW5zaXRpb24gJiYgYXJncy50cmFuc2l0aW9uICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0aWYgKCBhcmdzLmFwcGx5VHJhbnNpdGlvbiApIHtcclxuXHRcdFx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIGFyZ3MudHJhbnNpdGlvbiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uICkge1xyXG5cdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBhcmdzLmNvbnRhaW5lckNsYXNzVG9BZGQgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBhcmdzLmNsYXNzVG9SZW1vdmUgKVxyXG5cdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKCAkLnByb3h5KCBhcmdzLnByZXJlcXVpc2l0ZXMuY29udGFpbmVyLCBcInJlc29sdmVcIiApICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIGFyZ3MuY2xhc3NUb1JlbW92ZSApO1xyXG5cdFx0YXJncy5wcmVyZXF1aXNpdGVzLmNvbnRhaW5lci5yZXNvbHZlKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gVGhlIGRlc2lyZWQgY29vcmRpbmF0ZXMgcGFzc2VkIGluIHdpbGwgYmUgcmV0dXJuZWQgdW50b3VjaGVkIGlmIG5vIHJlZmVyZW5jZSBlbGVtZW50IGNhbiBiZSBpZGVudGlmaWVkIHZpYVxyXG5cdC8vIGRlc2lyZWRQb3NpdGlvbi5wb3NpdGlvblRvLiBOZXZlcnRoZWxlc3MsIHRoaXMgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IGl0cyByZXR1cm4gdmFsdWUgYWx3YXlzIGNvbnRhaW5zIHZhbGlkXHJcblx0Ly8geCBhbmQgeSBjb29yZGluYXRlcyBieSBzcGVjaWZ5aW5nIHRoZSBjZW50ZXIgbWlkZGxlIG9mIHRoZSB3aW5kb3cgaWYgdGhlIGNvb3JkaW5hdGVzIGFyZSBhYnNlbnQuXHJcblx0Ly8gb3B0aW9uczogeyB4OiBjb29yZGluYXRlLCB5OiBjb29yZGluYXRlLCBwb3NpdGlvblRvOiBzdHJpbmc6IFwib3JpZ2luXCIsIFwid2luZG93XCIsIG9yIGpRdWVyeSBzZWxlY3RvclxyXG5cdF9kZXNpcmVkQ29vcmRzOiBmdW5jdGlvbiggb3Blbk9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb2Zmc2V0LFxyXG5cdFx0XHRkc3QgPSBudWxsLFxyXG5cdFx0XHR3aW5kb3dDb29yZGluYXRlcyA9IGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGlzLndpbmRvdyApLFxyXG5cdFx0XHR4ID0gb3Blbk9wdGlvbnMueCxcclxuXHRcdFx0eSA9IG9wZW5PcHRpb25zLnksXHJcblx0XHRcdHBUbyA9IG9wZW5PcHRpb25zLnBvc2l0aW9uVG87XHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIHdoaWNoIGVsZW1lbnQgd2lsbCBzZXJ2ZSBhcyB0aGUgcmVmZXJlbmNlXHJcblx0XHRpZiAoIHBUbyAmJiBwVG8gIT09IFwib3JpZ2luXCIgKSB7XHJcblx0XHRcdGlmICggcFRvID09PSBcIndpbmRvd1wiICkge1xyXG5cdFx0XHRcdHggPSB3aW5kb3dDb29yZGluYXRlcy5jeCAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy54O1xyXG5cdFx0XHRcdHkgPSB3aW5kb3dDb29yZGluYXRlcy5jeSAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy55O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRkc3QgPSAkKCBwVG8gKTtcclxuXHRcdFx0XHR9IGNhdGNoKCBlcnIgKSB7XHJcblx0XHRcdFx0XHRkc3QgPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGRzdCApIHtcclxuXHRcdFx0XHRcdGRzdC5maWx0ZXIoIFwiOnZpc2libGVcIiApO1xyXG5cdFx0XHRcdFx0aWYgKCBkc3QubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdFx0XHRkc3QgPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIGFuIGVsZW1lbnQgd2FzIGZvdW5kLCBjZW50ZXIgb3ZlciBpdFxyXG5cdFx0aWYgKCBkc3QgKSB7XHJcblx0XHRcdG9mZnNldCA9IGRzdC5vZmZzZXQoKTtcclxuXHRcdFx0eCA9IG9mZnNldC5sZWZ0ICsgZHN0Lm91dGVyV2lkdGgoKSAvIDI7XHJcblx0XHRcdHkgPSBvZmZzZXQudG9wICsgZHN0Lm91dGVySGVpZ2h0KCkgLyAyO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSB4IGFuZCB5IGFyZSB2YWxpZCBudW1iZXJzIC0gY2VudGVyIG92ZXIgdGhlIHdpbmRvd1xyXG5cdFx0aWYgKCAkLnR5cGUoIHggKSAhPT0gXCJudW1iZXJcIiB8fCBpc05hTiggeCApICkge1xyXG5cdFx0XHR4ID0gd2luZG93Q29vcmRpbmF0ZXMuY3ggLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueDtcclxuXHRcdH1cclxuXHRcdGlmICggJC50eXBlKCB5ICkgIT09IFwibnVtYmVyXCIgfHwgaXNOYU4oIHkgKSApIHtcclxuXHRcdFx0eSA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN5IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLnk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHsgeDogeCwgeTogeSB9O1xyXG5cdH0sXHJcblxyXG5cdF9yZXBvc2l0aW9uOiBmdW5jdGlvbiggb3Blbk9wdGlvbnMgKSB7XHJcblx0XHQvLyBXZSBvbmx5IGNhcmUgYWJvdXQgcG9zaXRpb24tcmVsYXRlZCBwYXJhbWV0ZXJzIGZvciByZXBvc2l0aW9uaW5nXHJcblx0XHRvcGVuT3B0aW9ucyA9IHtcclxuXHRcdFx0eDogb3Blbk9wdGlvbnMueCxcclxuXHRcdFx0eTogb3Blbk9wdGlvbnMueSxcclxuXHRcdFx0cG9zaXRpb25Ubzogb3Blbk9wdGlvbnMucG9zaXRpb25Ub1xyXG5cdFx0fTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlcG9zaXRpb25cIiwgdW5kZWZpbmVkLCBvcGVuT3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLm9mZnNldCggdGhpcy5fcGxhY2VtZW50Q29vcmRzKCB0aGlzLl9kZXNpcmVkQ29vcmRzKCBvcGVuT3B0aW9ucyApICkgKTtcclxuXHR9LFxyXG5cclxuXHRyZXBvc2l0aW9uOiBmdW5jdGlvbiggb3Blbk9wdGlvbnMgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0dGhpcy5fcmVwb3NpdGlvbiggb3Blbk9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2FmZWx5Qmx1cjogZnVuY3Rpb24oIGN1cnJlbnRFbGVtZW50ICl7XHJcblx0XHRpZiAoIGN1cnJlbnRFbGVtZW50ICE9PSB0aGlzLndpbmRvd1sgMCBdICYmXHJcblx0XHRcdGN1cnJlbnRFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiYm9keVwiICkge1xyXG5cdFx0XHRcdCQoIGN1cnJlbnRFbGVtZW50ICkuYmx1cigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9vcGVuUHJlcmVxdWlzaXRlc0NvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpZCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0Zmlyc3RGb2N1cyA9IHRoaXMuX3VpLmNvbnRhaW5lci5maW5kKCBcIjpmb2N1c2FibGVcIiApLmZpcnN0KCk7XHJcblxyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLmFkZENsYXNzKCBcInVpLXBvcHVwLWFjdGl2ZVwiICk7XHJcblx0XHR0aGlzLl9pc09wZW4gPSB0cnVlO1xyXG5cdFx0dGhpcy5fcmVzaXplU2NyZWVuKCk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGN1cnJFbGVtZW50IGlzIG5vdCBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIuICBJZiBpdCdzIG5vdCwgYmx1clxyXG5cdFx0aWYgKCAhJC5jb250YWlucyggdGhpcy5fdWkuY29udGFpbmVyWyAwIF0sIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICkgKSB7XHJcblx0XHRcdHRoaXMuX3NhZmVseUJsdXIoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGZpcnN0Rm9jdXMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0dGhpcy5fdWkuZm9jdXNFbGVtZW50ID0gZmlyc3RGb2N1cztcclxuXHRcdH1cclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdFx0aWYgKCBpZCApIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBcIlthcmlhLWhhc3BvcHVwPSd0cnVlJ11bYXJpYS1vd25zPSdcIiArICBpZCArIFwiJ11cIiApLmF0dHIoIFwiYXJpYS1leHBhbmRlZFwiLCB0cnVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImFmdGVyb3BlblwiICk7XHJcblx0fSxcclxuXHJcblx0X29wZW46IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIG9wZW5PcHRpb25zID0gJC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKSxcclxuXHRcdFx0Ly8gVE9ETyBtb3ZlIGJsYWNrbGlzdCB0byBwcml2YXRlIG1ldGhvZFxyXG5cdFx0XHRhbmRyb2lkQmxhY2tsaXN0ID0gKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0XHRcdFx0Ly8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cclxuXHRcdFx0XHRcdHdrbWF0Y2ggPSB1YS5tYXRjaCggL0FwcGxlV2ViS2l0XFwvKFswLTlcXC5dKykvICksXHJcblx0XHRcdFx0XHR3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdLFxyXG5cdFx0XHRcdFx0YW5kcm9pZG1hdGNoID0gdWEubWF0Y2goIC9BbmRyb2lkIChcXGQrKD86XFwuXFxkKykpLyApLFxyXG5cdFx0XHRcdFx0YW5kdmVyc2lvbiA9ICEhYW5kcm9pZG1hdGNoICYmIGFuZHJvaWRtYXRjaFsgMSBdLFxyXG5cdFx0XHRcdFx0Y2hyb21lbWF0Y2ggPSB1YS5pbmRleE9mKCBcIkNocm9tZVwiICkgPiAtMTtcclxuXHJcblx0XHRcdFx0Ly8gUGxhdGZvcm0gaXMgQW5kcm9pZCwgV2ViS2l0IHZlcnNpb24gaXMgZ3JlYXRlciB0aGFuIDUzNC4xMyAoIEFuZHJvaWQgMy4yLjEgKSBhbmQgbm90IENocm9tZS5cclxuXHRcdFx0XHRpZiAoIGFuZHJvaWRtYXRjaCAhPT0gbnVsbCAmJiBhbmR2ZXJzaW9uID09PSBcIjQuMFwiICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPiA1MzQuMTMgJiYgIWNocm9tZW1hdGNoICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSgpKTtcclxuXHJcblx0XHQvLyBDb3VudCBkb3duIHRvIHRyaWdnZXJpbmcgXCJwb3B1cGFmdGVyb3BlblwiIC0gd2UgaGF2ZSB0d28gcHJlcmVxdWlzaXRlczpcclxuXHRcdC8vIDEuIFRoZSBwb3B1cCB3aW5kb3cgYW5pbWF0aW9uIGNvbXBsZXRlcyAoY29udGFpbmVyKCkpXHJcblx0XHQvLyAyLiBUaGUgc2NyZWVuIG9wYWNpdHkgYW5pbWF0aW9uIGNvbXBsZXRlcyAoc2NyZWVuKCkpXHJcblx0XHR0aGlzLl9jcmVhdGVQcmVyZXF1aXNpdGVzKFxyXG5cdFx0XHQkLm5vb3AsXHJcblx0XHRcdCQubm9vcCxcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfb3BlblByZXJlcXVpc2l0ZXNDb21wbGV0ZVwiICkgKTtcclxuXHJcblx0XHR0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IG9wZW5PcHRpb25zLnRyYW5zaXRpb247XHJcblx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIG9wZW5PcHRpb25zLnRyYW5zaXRpb24gKTtcclxuXHJcblx0XHR0aGlzLl91aS5zY3JlZW4ucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtdHJ1bmNhdGVcIiApO1xyXG5cclxuXHRcdC8vIEdpdmUgYXBwbGljYXRpb25zIGEgY2hhbmNlIHRvIG1vZGlmeSB0aGUgY29udGVudHMgb2YgdGhlIGNvbnRhaW5lciBiZWZvcmUgaXQgYXBwZWFyc1xyXG5cdFx0dGhpcy5fcmVwb3NpdGlvbiggb3Blbk9wdGlvbnMgKTtcclxuXHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuXCIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgJiYgYW5kcm9pZEJsYWNrbGlzdCApIHtcclxuXHRcdFx0LyogVE9ETzogVGhlIG5hdGl2ZSBicm93c2VyIG9uIEFuZHJvaWQgNC4wLlggKFwiSWNlIENyZWFtIFNhbmR3aWNoXCIpIHN1ZmZlcnMgZnJvbSBhbiBpc3N1ZSB3aGVyZSB0aGUgcG9wdXAgb3ZlcmxheSBhcHBlYXJzIHRvIGJlIHotaW5kZXhlZCBhYm92ZSB0aGUgcG9wdXAgaXRzZWxmIHdoZW4gY2VydGFpbiBvdGhlciBzdHlsZXMgZXhpc3Qgb24gdGhlIHNhbWUgcGFnZSAtLSBuYW1lbHksIGFueSBlbGVtZW50IHNldCB0byBgcG9zaXRpb246IGZpeGVkYCBhbmQgY2VydGFpbiB0eXBlcyBvZiBpbnB1dC4gVGhlc2UgaXNzdWVzIGFyZSByZW1pbmlzY2VudCBvZiBwcmV2aW91c2x5IHVuY292ZXJlZCBidWdzIGluIG9sZGVyIHZlcnNpb25zIG9mIEFuZHJvaWQncyBuYXRpdmUgYnJvd3NlcjogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9EZXZpY2UtQnVncy9pc3N1ZXMvM1xyXG5cdFx0XHRUaGlzIGZpeCBjbG9zZXMgdGhlIGZvbGxvd2luZyBidWdzICggSSB1c2UgXCJjbG9zZXNcIiB3aXRoIHJlbHVjdGFuY2UsIGFuZCBzdHJlc3MgdGhhdCB0aGlzIGlzc3VlIHNob3VsZCBiZSByZXZpc2l0ZWQgYXMgc29vbiBhcyBwb3NzaWJsZSApOlxyXG5cdFx0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ4MTZcclxuXHRcdFx0aHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80ODQ0XHJcblx0XHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDg3NFxyXG5cdFx0XHQqL1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBzb3J0IG91dCB3aHkgdGhpcy5fcGFnZSBpc24ndCB3b3JraW5nXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5hZGRDbGFzcyggXCJ1aS1wb3B1cC1vcGVuXCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2FuaW1hdGUoe1xyXG5cdFx0XHRhZGRpdGlvbmFsQ29uZGl0aW9uOiB0cnVlLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiBvcGVuT3B0aW9ucy50cmFuc2l0aW9uLFxyXG5cdFx0XHRjbGFzc1RvUmVtb3ZlOiBcIlwiLFxyXG5cdFx0XHRzY3JlZW5DbGFzc1RvQWRkOiBcImluXCIsXHJcblx0XHRcdGNvbnRhaW5lckNsYXNzVG9BZGQ6IFwiaW5cIixcclxuXHRcdFx0YXBwbHlUcmFuc2l0aW9uOiBmYWxzZSxcclxuXHRcdFx0cHJlcmVxdWlzaXRlczogdGhpcy5fcHJlcmVxdWlzaXRlc1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUHJlcmVxdWlzaXRlU2NyZWVuOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3VpLnNjcmVlblxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwib3V0XCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUHJlcmVxdWlzaXRlQ29udGFpbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwicmV2ZXJzZSBvdXRcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQcmVyZXF1aXNpdGVzRG9uZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29udGFpbmVyID0gdGhpcy5fdWkuY29udGFpbmVyLFxyXG5cdFx0XHRpZCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKTtcclxuXHJcblx0XHQvLyByZW1vdmUgdGhlIGdsb2JhbCBtdXRleCBmb3IgcG9wdXBzXHJcblx0XHQkLm1vYmlsZS5wb3B1cC5hY3RpdmUgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0Ly8gQmx1ciBlbGVtZW50cyBpbnNpZGUgdGhlIGNvbnRhaW5lciwgaW5jbHVkaW5nIHRoZSBjb250YWluZXJcclxuXHRcdCQoIFwiOmZvY3VzXCIsIGNvbnRhaW5lclsgMCBdICkuYWRkKCBjb250YWluZXJbIDAgXSApLmJsdXIoKTtcclxuXHJcblx0XHRpZiAoIGlkICkge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIFwiW2FyaWEtaGFzcG9wdXA9J3RydWUnXVthcmlhLW93bnM9J1wiICsgIGlkICsgXCInXVwiICkuYXR0ciggXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYWxlcnQgdXNlcnMgdGhhdCB0aGUgcG9wdXAgaXMgY2xvc2VkXHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImFmdGVyY2xvc2VcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZTogZnVuY3Rpb24oIGltbWVkaWF0ZSApIHtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1hY3RpdmVcIiApO1xyXG5cdFx0dGhpcy5fcGFnZS5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1vcGVuXCIgKTtcclxuXHJcblx0XHR0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuXHJcblx0XHQvLyBDb3VudCBkb3duIHRvIHRyaWdnZXJpbmcgXCJwb3B1cGFmdGVyY2xvc2VcIiAtIHdlIGhhdmUgdHdvIHByZXJlcXVpc2l0ZXM6XHJcblx0XHQvLyAxLiBUaGUgcG9wdXAgd2luZG93IHJldmVyc2UgYW5pbWF0aW9uIGNvbXBsZXRlcyAoY29udGFpbmVyKCkpXHJcblx0XHQvLyAyLiBUaGUgc2NyZWVuIG9wYWNpdHkgYW5pbWF0aW9uIGNvbXBsZXRlcyAoc2NyZWVuKCkpXHJcblx0XHR0aGlzLl9jcmVhdGVQcmVyZXF1aXNpdGVzKFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVByZXJlcXVpc2l0ZVNjcmVlblwiICksXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUHJlcmVxdWlzaXRlQ29udGFpbmVyXCIgKSxcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfY2xvc2VQcmVyZXF1aXNpdGVzRG9uZVwiICkgKTtcclxuXHJcblx0XHR0aGlzLl9hbmltYXRlKCB7XHJcblx0XHRcdGFkZGl0aW9uYWxDb25kaXRpb246IHRoaXMuX3VpLnNjcmVlbi5oYXNDbGFzcyggXCJpblwiICksXHJcblx0XHRcdHRyYW5zaXRpb246ICggaW1tZWRpYXRlID8gXCJub25lXCIgOiAoIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICkgKSxcclxuXHRcdFx0Y2xhc3NUb1JlbW92ZTogXCJpblwiLFxyXG5cdFx0XHRzY3JlZW5DbGFzc1RvQWRkOiBcIm91dFwiLFxyXG5cdFx0XHRjb250YWluZXJDbGFzc1RvQWRkOiBcInJldmVyc2Ugb3V0XCIsXHJcblx0XHRcdGFwcGx5VHJhbnNpdGlvbjogdHJ1ZSxcclxuXHRcdFx0cHJlcmVxdWlzaXRlczogdGhpcy5fcHJlcmVxdWlzaXRlc1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3VuZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFB1dCB0aGUgZWxlbWVudCBiYWNrIHRvIHdoZXJlIHRoZSBwbGFjZWhvbGRlciB3YXMgYW5kIHJlbW92ZSB0aGUgXCJ1aS1wb3B1cFwiIGNsYXNzXHJcblx0XHR0aGlzLl9zZXRPcHRpb25zKCB7IHRoZW1lOiAkLm1vYmlsZS5wb3B1cC5wcm90b3R5cGUub3B0aW9ucy50aGVtZSB9ICk7XHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0Ly8gQ2Fubm90IGRpcmVjdGx5IGluc2VydEFmdGVyKCkgLSB3ZSBuZWVkIHRvIGRldGFjaCgpIGZpcnN0LCBiZWNhdXNlXHJcblx0XHRcdC8vIGluc2VydEFmdGVyKCkgd2lsbCBkbyBub3RoaW5nIGlmIHRoZSBwYXlsb2FkIGRpdiB3YXMgbm90IGF0dGFjaGVkXHJcblx0XHRcdC8vIHRvIHRoZSBET00gYXQgdGhlIHRpbWUgdGhlIHdpZGdldCB3YXMgY3JlYXRlZCwgYW5kIHNvIHRoZSBwYXlsb2FkXHJcblx0XHRcdC8vIHdpbGwgcmVtYWluIGluc2lkZSB0aGUgY29udGFpbmVyIGV2ZW4gYWZ0ZXIgd2UgY2FsbCBpbnNlcnRBZnRlcigpLlxyXG5cdFx0XHQvLyBJZiB0aGF0IGhhcHBlbnMgYW5kIHdlIHJlbW92ZSB0aGUgY29udGFpbmVyIGEgZmV3IGxpbmVzIGJlbG93LCB3ZVxyXG5cdFx0XHQvLyB3aWxsIGNhdXNlIGFuIGluZmluaXRlIHJlY3Vyc2lvbiAtICM1MjQ0XHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQuaW5zZXJ0QWZ0ZXIoIHRoaXMuX3VpLnBsYWNlaG9sZGVyIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwIHVpLW92ZXJsYXktc2hhZG93IHVpLWNvcm5lci1hbGwgdWktYm9keS1pbmhlcml0XCIgKTtcclxuXHRcdHRoaXMuX3VpLnNjcmVlbi5yZW1vdmUoKTtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdHRoaXMuX3VpLnBsYWNlaG9sZGVyLnJlbW92ZSgpO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggJC5tb2JpbGUucG9wdXAuYWN0aXZlID09PSB0aGlzICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQub25lKCBcInBvcHVwYWZ0ZXJjbG9zZVwiLCAkLnByb3h5KCB0aGlzLCBcIl91bmVuaGFuY2VcIiApICk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3VuZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVBvcHVwOiBmdW5jdGlvbiggdGhlRXZlbnQsIGRhdGEgKSB7XHJcblx0XHR2YXIgcGFyc2VkRHN0LCB0b1VybCxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGltbWVkaWF0ZSA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICggKCB0aGVFdmVudCAmJiB0aGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHx8ICQubW9iaWxlLnBvcHVwLmFjdGl2ZSAhPT0gdGhpcyApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHJlc3RvcmUgbG9jYXRpb24gb24gc2NyZWVuXHJcblx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIHRoaXMuX3Njcm9sbFRvcCApO1xyXG5cclxuXHRcdGlmICggdGhlRXZlbnQgJiYgdGhlRXZlbnQudHlwZSA9PT0gXCJwYWdlYmVmb3JlY2hhbmdlXCIgJiYgZGF0YSApIHtcclxuXHRcdFx0Ly8gRGV0ZXJtaW5lIHdoZXRoZXIgd2UgbmVlZCB0byByYXBpZC1jbG9zZSB0aGUgcG9wdXAsIG9yIHdoZXRoZXIgd2UgY2FuXHJcblx0XHRcdC8vIHRha2UgdGhlIHRpbWUgdG8gcnVuIHRoZSBjbG9zaW5nIHRyYW5zaXRpb25cclxuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YS50b1BhZ2UgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0cGFyc2VkRHN0ID0gZGF0YS50b1BhZ2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cGFyc2VkRHN0ID0gZGF0YS50b1BhZ2UuanFtRGF0YSggXCJ1cmxcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHBhcnNlZERzdCA9ICQubW9iaWxlLnBhdGgucGFyc2VVcmwoIHBhcnNlZERzdCApO1xyXG5cdFx0XHR0b1VybCA9IHBhcnNlZERzdC5wYXRobmFtZSArIHBhcnNlZERzdC5zZWFyY2ggKyBwYXJzZWREc3QuaGFzaDtcclxuXHJcblx0XHRcdGlmICggdGhpcy5fbXlVcmwgIT09ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB0b1VybCApICkge1xyXG5cdFx0XHRcdC8vIEdvaW5nIHRvIGEgZGlmZmVyZW50IHBhZ2UgLSBjbG9zZSBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdGltbWVkaWF0ZSA9IHRydWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHJlbW92ZSBuYXYgYmluZGluZ3NcclxuXHRcdHRoaXMud2luZG93Lm9mZiggY3VycmVudE9wdGlvbnMuY2xvc2VFdmVudHMgKTtcclxuXHRcdC8vIHVuYmluZCBjbGljayBoYW5kbGVycyBhZGRlZCB3aGVuIGhpc3RvcnkgaXMgZGlzYWJsZWRcclxuXHRcdHRoaXMuZWxlbWVudC51bmRlbGVnYXRlKCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtTZWxlY3RvciwgY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rRXZlbnRzICk7XHJcblxyXG5cdFx0dGhpcy5fY2xvc2UoIGltbWVkaWF0ZSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGFueSBuYXZpZ2F0aW9uIGV2ZW50IGFmdGVyIGEgcG9wdXAgaXMgb3BlbmVkIHNob3VsZCBjbG9zZSB0aGUgcG9wdXBcclxuXHQvLyBOT1RFIHRoZSBwYWdlYmVmb3JlY2hhbmdlIGlzIGJvdW5kIHRvIGNhdGNoIG5hdmlnYXRpb24gZXZlbnRzIHRoYXQgZG9uJ3RcclxuXHQvLyAgICAgIGFsdGVyIHRoZSB1cmwgKGVnLCBkaWFsb2dzIGZyb20gcG9wdXBzKVxyXG5cdF9iaW5kQ29udGFpbmVyQ2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy53aW5kb3dcclxuXHRcdFx0Lm9uKCB0aGlzLm9wdGlvbnMuY2xvc2VFdmVudHMsICQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUG9wdXBcIiApICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl91aS5jb250YWluZXI7XHJcblx0fSxcclxuXHJcblx0Ly8gVE9ETyBubyBjbGVhciBkZWxpbmlhdGlvbiBvZiB3aGF0IHNob3VsZCBiZSBoZXJlIGFuZFxyXG5cdC8vIHdoYXQgc2hvdWxkIGJlIGluIF9vcGVuLiBTZWVtcyB0byBiZSBcInZpc3VhbFwiIHZzIFwiaGlzdG9yeVwiIGZvciBub3dcclxuXHRvcGVuOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciB1cmwsIGhhc2hrZXksIGFjdGl2ZVBhZ2UsIGN1cnJlbnRJc0RpYWxvZywgaGFzSGFzaCwgdXJsSGlzdG9yeSxcclxuXHRcdFx0c2VsZiA9IHRoaXMsXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIG1ha2Ugc3VyZSBvcGVuIGlzIGlkZW1wb3RlbnRcclxuXHRcdGlmICggJC5tb2JpbGUucG9wdXAuYWN0aXZlIHx8IGN1cnJlbnRPcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzZXQgdGhlIGdsb2JhbCBwb3B1cCBtdXRleFxyXG5cdFx0JC5tb2JpbGUucG9wdXAuYWN0aXZlID0gdGhpcztcclxuXHRcdHRoaXMuX3Njcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cclxuXHRcdC8vIGlmIGhpc3RvcnkgYWx0ZXJhdGlvbiBpcyBkaXNhYmxlZCBjbG9zZSBvbiBuYXZpZ2F0ZSBldmVudHNcclxuXHRcdC8vIGFuZCBsZWF2ZSB0aGUgdXJsIGFzIGlzXHJcblx0XHRpZiAoICEoIGN1cnJlbnRPcHRpb25zLmhpc3RvcnkgKSApIHtcclxuXHRcdFx0c2VsZi5fb3Blbiggb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9iaW5kQ29udGFpbmVyQ2xvc2UoKTtcclxuXHJcblx0XHRcdC8vIFdoZW4gaGlzdG95IGlzIGRpc2FibGVkIHdlIGhhdmUgdG8gZ3JhYiB0aGUgZGF0YS1yZWxcclxuXHRcdFx0Ly8gYmFjayBsaW5rIGNsaWNrcyBzbyB3ZSBjYW4gY2xvc2UgdGhlIHBvcHVwIGluc3RlYWQgb2ZcclxuXHRcdFx0Ly8gcmVseWluZyBvbiBoaXN0b3J5IHRvIGRvIGl0IGZvciB1c1xyXG5cdFx0XHRzZWxmLmVsZW1lbnRcclxuXHRcdFx0XHQuZGVsZWdhdGUoIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua1NlbGVjdG9yLCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtFdmVudHMsIGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjYWNoZSBzb21lIHZhbHVlcyBmb3IgbWluL3JlYWRhYmlsaXR5XHJcblx0XHR1cmxIaXN0b3J5ID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuXHRcdGhhc2hrZXkgPSAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5O1xyXG5cdFx0YWN0aXZlUGFnZSA9ICQubW9iaWxlLmFjdGl2ZVBhZ2U7XHJcblx0XHRjdXJyZW50SXNEaWFsb2cgPSAoIGFjdGl2ZVBhZ2UgPyBhY3RpdmVQYWdlLmhhc0NsYXNzKCBcInVpLWRpYWxvZ1wiICkgOiBmYWxzZSApO1xyXG5cdFx0dGhpcy5fbXlVcmwgPSB1cmwgPSB1cmxIaXN0b3J5LmdldEFjdGl2ZSgpLnVybDtcclxuXHRcdGhhc0hhc2ggPSAoIHVybC5pbmRleE9mKCBoYXNoa2V5ICkgPiAtMSApICYmICFjdXJyZW50SXNEaWFsb2cgJiYgKCB1cmxIaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCApO1xyXG5cclxuXHRcdGlmICggaGFzSGFzaCApIHtcclxuXHRcdFx0c2VsZi5fb3Blbiggb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9iaW5kQ29udGFpbmVyQ2xvc2UoKTtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYgdGhlIGN1cnJlbnQgdXJsIGhhcyBubyBkaWFsb2cgaGFzaCBrZXkgcHJvY2VlZCBhcyBub3JtYWxcclxuXHRcdC8vIG90aGVyd2lzZSwgaWYgdGhlIHBhZ2UgaXMgYSBkaWFsb2cgc2ltcGx5IHRhY2sgb24gdGhlIGhhc2gga2V5XHJcblx0XHRpZiAoIHVybC5pbmRleE9mKCBoYXNoa2V5ICkgPT09IC0xICYmICFjdXJyZW50SXNEaWFsb2cgKSB7XHJcblx0XHRcdHVybCA9IHVybCArICh1cmwuaW5kZXhPZiggXCIjXCIgKSA+IC0xID8gaGFzaGtleSA6IFwiI1wiICsgaGFzaGtleSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR1cmwgPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoICsgaGFzaGtleTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzd2FsbG93IHRoZSB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uIGV2ZW50LCBhbmQgYmluZCBmb3IgdGhlIG5leHRcclxuXHRcdHRoaXMud2luZG93Lm9uZSggXCJiZWZvcmVuYXZpZ2F0ZVwiLCBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGYuX29wZW4oIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fYmluZENvbnRhaW5lckNsb3NlKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnVybEFsdGVyZWQgPSB0cnVlO1xyXG5cdFx0JC5tb2JpbGUubmF2aWdhdGUoIHVybCwgeyByb2xlOiBcImRpYWxvZ1wiIH0gKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBtYWtlIHN1cmUgY2xvc2UgaXMgaWRlbXBvdGVudFxyXG5cdFx0aWYgKCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgIT09IHRoaXMgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3Njcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhpc3RvcnkgJiYgdGhpcy51cmxBbHRlcmVkICkge1xyXG5cdFx0XHQkLm1vYmlsZS5iYWNrKCk7XHJcblx0XHRcdHRoaXMudXJsQWx0ZXJlZCA9IGZhbHNlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gc2ltdWxhdGUgdGhlIG5hdiBiaW5kaW5ncyBoYXZpbmcgZmlyZWRcclxuXHRcdFx0dGhpcy5fY2xvc2VQb3B1cCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBUT0RPIHRoaXMgY2FuIGJlIG1vdmVkIGluc2lkZSB0aGUgd2lkZ2V0XHJcbiQubW9iaWxlLnBvcHVwLmhhbmRsZUxpbmsgPSBmdW5jdGlvbiggJGxpbmsgKSB7XHJcblx0dmFyIG9mZnNldCxcclxuXHRcdHBhdGggPSAkLm1vYmlsZS5wYXRoLFxyXG5cclxuXHRcdC8vIE5PVEUgbWFrZSBzdXJlIHRvIGdldCBvbmx5IHRoZSBoYXNoIGZyb20gdGhlIGhyZWYgYmVjYXVzZSBpZTcgKHdwNylcclxuXHRcdC8vICAgICAgcmV0dXJucyB0aGUgYWJzb2x1dGUgaHJlZiBpbiB0aGlzIGNhc2UgcnVpbmluZyB0aGUgZWxlbWVudCBzZWxlY3Rpb25cclxuXHRcdHBvcHVwID0gJCggcGF0aC5oYXNoVG9TZWxlY3RvciggcGF0aC5wYXJzZVVybCggJGxpbmsuYXR0ciggXCJocmVmXCIgKSApLmhhc2ggKSApLmZpcnN0KCk7XHJcblxyXG5cdGlmICggcG9wdXAubGVuZ3RoID4gMCAmJiBwb3B1cC5kYXRhKCBcIm1vYmlsZS1wb3B1cFwiICkgKSB7XHJcblx0XHRvZmZzZXQgPSAkbGluay5vZmZzZXQoKTtcclxuXHRcdHBvcHVwLnBvcHVwKCBcIm9wZW5cIiwge1xyXG5cdFx0XHR4OiBvZmZzZXQubGVmdCArICRsaW5rLm91dGVyV2lkdGgoKSAvIDIsXHJcblx0XHRcdHk6IG9mZnNldC50b3AgKyAkbGluay5vdXRlckhlaWdodCgpIC8gMixcclxuXHRcdFx0dHJhbnNpdGlvbjogJGxpbmsuanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKSxcclxuXHRcdFx0cG9zaXRpb25UbzogJGxpbmsuanFtRGF0YSggXCJwb3NpdGlvbi10b1wiIClcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly9yZW1vdmUgYWZ0ZXIgZGVsYXlcclxuXHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdCRsaW5rLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdH0sIDMwMCApO1xyXG59O1xyXG5cclxuLy8gVE9ETyBtb3ZlIGluc2lkZSBfY3JlYXRlXHJcbiQubW9iaWxlLmRvY3VtZW50Lm9uKCBcInBhZ2ViZWZvcmVjaGFuZ2VcIiwgZnVuY3Rpb24oIHRoZUV2ZW50LCBkYXRhICkge1xyXG5cdGlmICggZGF0YS5vcHRpb25zLnJvbGUgPT09IFwicG9wdXBcIiApIHtcclxuXHRcdCQubW9iaWxlLnBvcHVwLmhhbmRsZUxpbmsoIGRhdGEub3B0aW9ucy5saW5rICk7XHJcblx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKlxyXG4qIGN1c3RvbSBcInNlbGVjdG1lbnVcIiBwbHVnaW5cclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHVuZm9jdXNhYmxlSXRlbVNlbGVjdG9yID0gXCIudWktZGlzYWJsZWQsLnVpLXN0YXRlLWRpc2FibGVkLC51aS1saS1kaXZpZGVyLC51aS1zY3JlZW4taGlkZGVuLDpqcW1EYXRhKHJvbGU9J3BsYWNlaG9sZGVyJylcIixcclxuXHRnb1RvQWRqYWNlbnRJdGVtID0gZnVuY3Rpb24oIGl0ZW0sIHRhcmdldCwgZGlyZWN0aW9uICkge1xyXG5cdFx0dmFyIGFkamFjZW50ID0gaXRlbVsgZGlyZWN0aW9uICsgXCJBbGxcIiBdKClcclxuXHRcdFx0Lm5vdCggdW5mb2N1c2FibGVJdGVtU2VsZWN0b3IgKVxyXG5cdFx0XHQuZmlyc3QoKTtcclxuXHJcblx0XHQvLyBpZiB0aGVyZSdzIGEgcHJldmlvdXMgb3B0aW9uLCBmb2N1cyBpdFxyXG5cdFx0aWYgKCBhZGphY2VudC5sZW5ndGggKSB7XHJcblx0XHRcdHRhcmdldFxyXG5cdFx0XHRcdC5ibHVyKClcclxuXHRcdFx0XHQuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHJcblx0XHRcdGFkamFjZW50LmZpbmQoIFwiYVwiICkuZmlyc3QoKS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2VsZWN0bWVudVwiLCAkLm1vYmlsZS5zZWxlY3RtZW51LCB7XHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBDdXN0b20gc2VsZWN0cyBjYW5ub3QgZXhpc3QgaW5zaWRlIHBvcHVwcywgc28gcmV2ZXJ0IHRoZSBcIm5hdGl2ZU1lbnVcIlxyXG5cdFx0Ly8gb3B0aW9uIHRvIHRydWUgaWYgYSBwYXJlbnQgaXMgYSBwb3B1cFxyXG5cdFx0by5uYXRpdmVNZW51ID0gby5uYXRpdmVNZW51IHx8ICggdGhpcy5lbGVtZW50LnBhcmVudHMoIFwiOmpxbURhdGEocm9sZT0ncG9wdXAnKSw6bW9iaWxlLXBvcHVwXCIgKS5sZW5ndGggPiAwICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVNlbGVjdEZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5ibHVyKCk7XHJcblx0XHR0aGlzLmJ1dHRvbi5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR0aGlzLl9zdXBlciggZXZlbnQgKTtcclxuXHRcdHRoaXMuX2hhbmRsZUJ1dHRvblZjbGlja0tleWRvd24oIGV2ZW50ICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUJ1dHRvblZjbGlja0tleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuaXNPcGVuIHx8IHRoaXMub3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGV2ZW50LnR5cGUgPT09IFwidmNsaWNrXCIgfHxcclxuXHRcdFx0XHRldmVudC5rZXlDb2RlICYmIChldmVudC5rZXlDb2RlID09PSAkLm1vYmlsZS5rZXlDb2RlLkVOVEVSIHx8IGV2ZW50LmtleUNvZGUgPT09ICQubW9iaWxlLmtleUNvZGUuU1BBQ0UpKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9kZWNpZGVGb3JtYXQoKTtcclxuXHRcdFx0aWYgKCB0aGlzLm1lbnVUeXBlID09PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcImhyZWZcIiwgXCIjXCIgKyB0aGlzLnBvcHVwSWQgKS5hdHRyKCBcImRhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwicmVsXCIsIFwicG9wdXBcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuYnV0dG9uLmF0dHIoIFwiaHJlZlwiLCBcIiNcIiArIHRoaXMuZGlhbG9nSWQgKS5hdHRyKCBcImRhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwicmVsXCIsIFwiZGlhbG9nXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmlzT3BlbiA9IHRydWU7XHJcblx0XHRcdC8vIERvIG5vdCBwcmV2ZW50IGRlZmF1bHQsIHNvIHRoZSBuYXZpZ2F0aW9uIG1heSBoYXZlIGEgY2hhbmNlIHRvIGFjdHVhbGx5IG9wZW4gdGhlIGNob3NlbiBmb3JtYXRcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGlzdEZvY3VzOiBmdW5jdGlvbiggZSApIHtcclxuXHRcdHZhciBwYXJhbXMgPSAoIGUudHlwZSA9PT0gXCJmb2N1c2luXCIgKSA/XHJcblx0XHRcdHsgdGFiaW5kZXg6IFwiMFwiLCBldmVudDogXCJ2bW91c2VvdmVyXCIgfTpcclxuXHRcdFx0eyB0YWJpbmRleDogXCItMVwiLCBldmVudDogXCJ2bW91c2VvdXRcIiB9O1xyXG5cclxuXHRcdCQoIGUudGFyZ2V0IClcclxuXHRcdFx0LmF0dHIoIFwidGFiaW5kZXhcIiwgcGFyYW1zLnRhYmluZGV4IClcclxuXHRcdFx0LnRyaWdnZXIoIHBhcmFtcy5ldmVudCApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMaXN0S2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApLFxyXG5cdFx0XHRsaSA9IHRhcmdldC5jbG9zZXN0KCBcImxpXCIgKTtcclxuXHJcblx0XHQvLyBzd2l0Y2ggbG9naWMgYmFzZWQgb24gd2hpY2gga2V5IHdhcyBwcmVzc2VkXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHQvLyB1cCBvciBsZWZ0IGFycm93IGtleXNcclxuXHRcdGNhc2UgMzg6XHJcblx0XHRcdGdvVG9BZGphY2VudEl0ZW0oIGxpLCB0YXJnZXQsIFwicHJldlwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0Ly8gZG93biBvciByaWdodCBhcnJvdyBrZXlzXHJcblx0XHRjYXNlIDQwOlxyXG5cdFx0XHRnb1RvQWRqYWNlbnRJdGVtKCBsaSwgdGFyZ2V0LCBcIm5leHRcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdC8vIElmIGVudGVyIG9yIHNwYWNlIGlzIHByZXNzZWQsIHRyaWdnZXIgY2xpY2tcclxuXHRcdGNhc2UgMTM6XHJcblx0XHRjYXNlIDMyOlxyXG5cdFx0XHR0YXJnZXQudHJpZ2dlciggXCJjbGlja1wiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTWVudVBhZ2VIaWRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBBZnRlciB0aGUgZGlhbG9nJ3MgZG9uZSwgd2UgbWF5IHdhbnQgdG8gdHJpZ2dlciBjaGFuZ2UgaWYgdGhlIHZhbHVlIGhhcyBhY3R1YWxseSBjaGFuZ2VkXHJcblx0XHR0aGlzLl9kZWxheWVkVHJpZ2dlcigpO1xyXG5cclxuXHRcdC8vIFRPRE8gY2VudHJhbGl6ZSBwYWdlIHJlbW92YWwgYmluZGluZyAvIGhhbmRsaW5nIGluIHRoZSBwYWdlIHBsdWdpbi5cclxuXHRcdC8vIFN1Z2dlc3Rpb24gZnJvbSBAamJsYXMgdG8gZG8gcmVmY291bnRpbmdcclxuXHRcdC8vXHJcblx0XHQvLyBUT0RPIGV4dHJlbWVseSBjb25mdXNpbmcgZGVwZW5kZW5jeSBvbiB0aGUgb3BlbiBtZXRob2Qgd2hlcmUgdGhlIHBhZ2VoaWRlLnJlbW92ZVxyXG5cdFx0Ly8gYmluZGluZ3MgYXJlIHN0cmlwcGVkIHRvIHByZXZlbnQgdGhlIHBhcmVudCBwYWdlIGZyb20gZGlzYXBwZWFyaW5nLiBUaGUgd2F5XHJcblx0XHQvLyB3ZSdyZSBrZWVwaW5nIHBhZ2VzIGluIHRoZSBET00gcmlnaHQgbm93IHN1Y2tzXHJcblx0XHQvL1xyXG5cdFx0Ly8gcmViaW5kIHRoZSBwYWdlIHJlbW92ZSB0aGF0IHdhcyB1bmJvdW5kIGluIHRoZSBvcGVuIGZ1bmN0aW9uXHJcblx0XHQvLyB0byBhbGxvdyBmb3IgdGhlIHBhcmVudCBwYWdlIHJlbW92YWwgZnJvbSBhY3Rpb25zIG90aGVyIHRoYW4gdGhlIHVzZVxyXG5cdFx0Ly8gb2YgYSBkaWFsb2cgc2l6ZWQgY3VzdG9tIHNlbGVjdFxyXG5cdFx0Ly9cclxuXHRcdC8vIGRvaW5nIHRoaXMgaGVyZSBwcm92aWRlcyBmb3IgdGhlIGJhY2sgYnV0dG9uIG9uIHRoZSBjdXN0b20gc2VsZWN0IGRpYWxvZ1xyXG5cdFx0dGhpcy50aGlzUGFnZS5wYWdlKCBcImJpbmRSZW1vdmVcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVIZWFkZXJDbG9zZUNsaWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5tZW51VHlwZSA9PT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMaXN0SXRlbUNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgbGlzdEl0ZW0gPSAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHJcblx0XHRcdC8vIEluZGV4IG9mIG9wdGlvbiB0YWcgdG8gYmUgc2VsZWN0ZWRcclxuXHRcdFx0b2xkSW5kZXggPSB0aGlzLnNlbGVjdFsgMCBdLnNlbGVjdGVkSW5kZXgsXHJcblx0XHRcdG5ld0luZGV4ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBsaXN0SXRlbSwgXCJvcHRpb24taW5kZXhcIiApLFxyXG5cdFx0XHRvcHRpb24gPSB0aGlzLl9zZWxlY3RPcHRpb25zKCkuZXEoIG5ld0luZGV4IClbIDAgXTtcclxuXHJcblx0XHQvLyBUb2dnbGUgc2VsZWN0ZWQgc3RhdHVzIG9uIHRoZSB0YWcgZm9yIG11bHRpIHNlbGVjdHNcclxuXHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRoaXMuaXNNdWx0aXBsZSA/ICFvcHRpb24uc2VsZWN0ZWQgOiB0cnVlO1xyXG5cclxuXHRcdC8vIFRvZ2dsZSBjaGVja2JveCBjbGFzcyBmb3IgbXVsdGlwbGUgc2VsZWN0c1xyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdGxpc3RJdGVtLmZpbmQoIFwiYVwiIClcclxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY2hlY2tib3gtb25cIiwgb3B0aW9uLnNlbGVjdGVkIClcclxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY2hlY2tib3gtb2ZmXCIsICFvcHRpb24uc2VsZWN0ZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBpdCdzIG5vdCBhIG11bHRpcGxlIHNlbGVjdCwgdHJpZ2dlciBjaGFuZ2UgYWZ0ZXIgaXQgaGFzIGZpbmlzaGVkIGNsb3NpbmdcclxuXHRcdGlmICggIXRoaXMuaXNNdWx0aXBsZSAmJiBvbGRJbmRleCAhPT0gbmV3SW5kZXggKSB7XHJcblx0XHRcdHRoaXMuX3RyaWdnZXJDaGFuZ2UgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRyaWdnZXIgY2hhbmdlIGlmIGl0J3MgYSBtdWx0aXBsZSBzZWxlY3RcclxuXHRcdC8vIEhpZGUgY3VzdG9tIHNlbGVjdCBmb3Igc2luZ2xlIHNlbGVjdHMgb25seSAtIG90aGVyd2lzZSBmb2N1cyBjbGlja2VkIGl0ZW1cclxuXHRcdC8vIFdlIG5lZWQgdG8gZ3JhYiB0aGUgY2xpY2tlZCBpdGVtIHRoZSBoYXJkIHdheSwgYmVjYXVzZSB0aGUgbGlzdCBtYXkgaGF2ZSBiZWVuIHJlYnVpbHRcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLnNlbGVjdC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdHRoaXMubGlzdC5maW5kKCBcImxpOm5vdCgudWktbGktZGl2aWRlcilcIiApLmVxKCBuZXdJbmRleCApXHJcblx0XHRcdFx0LmZpbmQoIFwiYVwiICkuZmlyc3QoKS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH0sXHJcblxyXG5cdGJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RJZCwgcG9wdXBJZCwgZGlhbG9nSWQsIGxhYmVsLCB0aGlzUGFnZSwgaXNNdWx0aXBsZSwgbWVudUlkLFxyXG5cdFx0XHR0aGVtZUF0dHIsIG92ZXJsYXlUaGVtZSwgb3ZlcmxheVRoZW1lQXR0ciwgZGl2aWRlclRoZW1lQXR0cixcclxuXHRcdFx0bWVudVBhZ2UsIGxpc3Rib3gsIGxpc3QsIGhlYWRlciwgaGVhZGVyVGl0bGUsIG1lbnVQYWdlQ29udGVudCxcclxuXHRcdFx0bWVudVBhZ2VDbG9zZSwgaGVhZGVyQ2xvc2UsXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGVjdElkID0gdGhpcy5zZWxlY3RJZDtcclxuXHRcdHBvcHVwSWQgPSBzZWxlY3RJZCArIFwiLWxpc3Rib3hcIjtcclxuXHRcdGRpYWxvZ0lkID0gc2VsZWN0SWQgKyBcIi1kaWFsb2dcIjtcclxuXHRcdGxhYmVsID0gdGhpcy5sYWJlbDtcclxuXHRcdHRoaXNQYWdlID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApO1xyXG5cdFx0aXNNdWx0aXBsZSA9IHRoaXMuZWxlbWVudFsgMCBdLm11bHRpcGxlO1xyXG5cdFx0bWVudUlkID0gc2VsZWN0SWQgKyBcIi1tZW51XCI7XHJcblx0XHR0aGVtZUF0dHIgPSBvLnRoZW1lID8gKCBcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInRoZW1lPSdcIiArIG8udGhlbWUgKyBcIidcIiApIDogXCJcIjtcclxuXHRcdG92ZXJsYXlUaGVtZSA9IG8ub3ZlcmxheVRoZW1lIHx8IG8udGhlbWUgfHwgbnVsbDtcclxuXHRcdG92ZXJsYXlUaGVtZUF0dHIgPSBvdmVybGF5VGhlbWUgPyAoIFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArXHJcblx0XHRcdFwib3ZlcmxheS10aGVtZT0nXCIgKyBvdmVybGF5VGhlbWUgKyBcIidcIiApIDogXCJcIjtcclxuXHRcdGRpdmlkZXJUaGVtZUF0dHIgPSAoIG8uZGl2aWRlclRoZW1lICYmIGlzTXVsdGlwbGUgKSA/ICggXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJkaXZpZGVyLXRoZW1lPSdcIiArIG8uZGl2aWRlclRoZW1lICsgXCInXCIgKSA6IFwiXCI7XHJcblx0XHRtZW51UGFnZSA9ICQoIFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J2RpYWxvZycgY2xhc3M9J3VpLXNlbGVjdG1lbnUnIGlkPSdcIiArIGRpYWxvZ0lkICsgXCInXCIgKyB0aGVtZUF0dHIgKyBvdmVybGF5VGhlbWVBdHRyICsgXCI+XCIgK1xyXG5cdFx0XHRcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdoZWFkZXInPlwiICtcclxuXHRcdFx0XCI8ZGl2IGNsYXNzPSd1aS10aXRsZSc+PC9kaXY+XCIrXHJcblx0XHRcdFwiPC9kaXY+XCIrXHJcblx0XHRcdFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J2NvbnRlbnQnPjwvZGl2PlwiK1xyXG5cdFx0XHRcIjwvZGl2PlwiICk7XHJcblx0XHRsaXN0Ym94ID0gJCggXCI8ZGl2XCIgKyB0aGVtZUF0dHIgKyBvdmVybGF5VGhlbWVBdHRyICsgXCIgaWQ9J1wiICsgcG9wdXBJZCArXHJcblx0XHRcdFx0XCInIGNsYXNzPSd1aS1zZWxlY3RtZW51Jz48L2Rpdj5cIiApXHJcblx0XHRcdC5pbnNlcnRBZnRlciggdGhpcy5zZWxlY3QgKVxyXG5cdFx0XHQucG9wdXAoKTtcclxuXHRcdGxpc3QgPSAkKCBcIjx1bCBjbGFzcz0ndWktc2VsZWN0bWVudS1saXN0JyBpZD0nXCIgKyBtZW51SWQgKyBcIicgcm9sZT0nbGlzdGJveCcgYXJpYS1sYWJlbGxlZGJ5PSdcIiArIHRoaXMuYnV0dG9uSWQgKyBcIidcIiArIHRoZW1lQXR0ciArIGRpdmlkZXJUaGVtZUF0dHIgKyBcIj48L3VsPlwiICkuYXBwZW5kVG8oIGxpc3Rib3ggKTtcclxuXHRcdGhlYWRlciA9ICQoIFwiPGRpdiBjbGFzcz0ndWktaGVhZGVyIHVpLWJhci1cIiArICggby50aGVtZSA/IG8udGhlbWUgOiBcImluaGVyaXRcIiApICsgXCInPjwvZGl2PlwiICkucHJlcGVuZFRvKCBsaXN0Ym94ICk7XHJcblx0XHRoZWFkZXJUaXRsZSA9ICQoIFwiPGgxIGNsYXNzPSd1aS10aXRsZSc+PC9oMT5cIiApLmFwcGVuZFRvKCBoZWFkZXIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0aGVhZGVyQ2xvc2UgPSAkKCBcIjxhPlwiLCB7XHJcblx0XHRcdFx0XCJyb2xlXCI6IFwiYnV0dG9uXCIsXHJcblx0XHRcdFx0XCJ0ZXh0XCI6IG8uY2xvc2VUZXh0LFxyXG5cdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcImNsYXNzXCI6IFwidWktYnRuIHVpLWNvcm5lci1hbGwgdWktYnRuLWxlZnQgdWktYnRuLWljb24tbm90ZXh0IHVpLWljb24tZGVsZXRlXCJcclxuXHRcdFx0fSkuYXBwZW5kVG8oIGhlYWRlciApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdHNlbGVjdElkOiBzZWxlY3RJZCxcclxuXHRcdFx0bWVudUlkOiBtZW51SWQsXHJcblx0XHRcdHBvcHVwSWQ6IHBvcHVwSWQsXHJcblx0XHRcdGRpYWxvZ0lkOiBkaWFsb2dJZCxcclxuXHRcdFx0dGhpc1BhZ2U6IHRoaXNQYWdlLFxyXG5cdFx0XHRtZW51UGFnZTogbWVudVBhZ2UsXHJcblx0XHRcdGxhYmVsOiBsYWJlbCxcclxuXHRcdFx0aXNNdWx0aXBsZTogaXNNdWx0aXBsZSxcclxuXHRcdFx0dGhlbWU6IG8udGhlbWUsXHJcblx0XHRcdGxpc3Rib3g6IGxpc3Rib3gsXHJcblx0XHRcdGxpc3Q6IGxpc3QsXHJcblx0XHRcdGhlYWRlcjogaGVhZGVyLFxyXG5cdFx0XHRoZWFkZXJUaXRsZTogaGVhZGVyVGl0bGUsXHJcblx0XHRcdGhlYWRlckNsb3NlOiBoZWFkZXJDbG9zZSxcclxuXHRcdFx0bWVudVBhZ2VDb250ZW50OiBtZW51UGFnZUNvbnRlbnQsXHJcblx0XHRcdG1lbnVQYWdlQ2xvc2U6IG1lbnVQYWdlQ2xvc2UsXHJcblx0XHRcdHBsYWNlaG9sZGVyOiBcIlwiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDcmVhdGUgbGlzdCBmcm9tIHNlbGVjdCwgdXBkYXRlIHN0YXRlXHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX29yaWdUYWJJbmRleCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHQvLyBNYXAgdW5kZWZpbmVkIHRvIGZhbHNlLCBiZWNhdXNlIHRoaXMuX29yaWdUYWJJbmRleCA9PT0gdW5kZWZpbmVkXHJcblx0XHRcdC8vIGluZGljYXRlcyB0aGF0IHdlIGhhdmUgbm90IHlldCBjaGVja2VkIHdoZXRoZXIgdGhlIHNlbGVjdCBoYXNcclxuXHRcdFx0Ly8gb3JpZ2luYWxseSBoYWQgYSB0YWJpbmRleCBhdHRyaWJ1dGUsIHdoZXJlYXMgZmFsc2UgaW5kaWNhdGVzIHRoYXRcclxuXHRcdFx0Ly8gd2UgaGF2ZSBjaGVja2VkIHRoZSBzZWxlY3QgZm9yIHN1Y2ggYW4gYXR0cmlidXRlLCBhbmQgaGF2ZSBmb3VuZFxyXG5cdFx0XHQvLyBub25lIHByZXNlbnQuXHJcblx0XHRcdHRoaXMuX29yaWdUYWJJbmRleCA9ICggdGhpcy5zZWxlY3RbIDAgXS5nZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiApID09PSBudWxsICkgPyBmYWxzZSA6IHRoaXMuc2VsZWN0LmF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZWxlY3QuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnNlbGVjdCwgeyBmb2N1cyA6IFwiX2hhbmRsZVNlbGVjdEZvY3VzXCIgfSApO1xyXG5cclxuXHRcdC8vIEJ1dHRvbiBldmVudHNcclxuXHRcdHRoaXMuX29uKCB0aGlzLmJ1dHRvbiwge1xyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZUJ1dHRvblZjbGlja0tleWRvd25cIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRXZlbnRzIGZvciBsaXN0IGl0ZW1zXHJcblx0XHR0aGlzLmxpc3QuYXR0ciggXCJyb2xlXCIsIFwibGlzdGJveFwiICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5saXN0LCB7XHJcblx0XHRcdFwiZm9jdXNpblwiOiBcIl9oYW5kbGVMaXN0Rm9jdXNcIixcclxuXHRcdFx0XCJmb2N1c291dFwiOiBcIl9oYW5kbGVMaXN0Rm9jdXNcIixcclxuXHRcdFx0XCJrZXlkb3duXCI6IFwiX2hhbmRsZUxpc3RLZXlkb3duXCIsXHJcblx0XHRcdFwiY2xpY2sgbGk6bm90KC51aS1kaXNhYmxlZCwudWktc3RhdGUtZGlzYWJsZWQsLnVpLWxpLWRpdmlkZXIpXCI6IFwiX2hhbmRsZUxpc3RJdGVtQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gYnV0dG9uIHJlZm9jdXMgZW5zdXJlcyBwcm9wZXIgaGVpZ2h0IGNhbGN1bGF0aW9uXHJcblx0XHQvLyBieSByZW1vdmluZyB0aGUgaW5saW5lIHN0eWxlIGFuZCBlbnN1cmluZyBwYWdlIGluY2x1c2lvblxyXG5cdFx0dGhpcy5fb24oIHRoaXMubWVudVBhZ2UsIHsgcGFnZWhpZGU6IFwiX2hhbmRsZU1lbnVQYWdlSGlkZVwiIH0gKTtcclxuXHJcblx0XHQvLyBFdmVudHMgb24gdGhlIHBvcHVwXHJcblx0XHR0aGlzLl9vbiggdGhpcy5saXN0Ym94LCB7IHBvcHVwYWZ0ZXJjbG9zZTogXCJfcG9wdXBDbG9zZWRcIiB9ICk7XHJcblxyXG5cdFx0Ly8gQ2xvc2UgYnV0dG9uIG9uIHNtYWxsIG92ZXJsYXlzXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuaGVhZGVyQ2xvc2UsIHsgY2xpY2s6IFwiX2hhbmRsZUhlYWRlckNsb3NlQ2xpY2tcIiB9ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X3BvcHVwQ2xvc2VkOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdHRoaXMuX2RlbGF5ZWRUcmlnZ2VyKCk7XHJcblx0fSxcclxuXHJcblx0X2RlbGF5ZWRUcmlnZ2VyOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlckNoYW5nZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3RyaWdnZXJDaGFuZ2UgPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRfaXNSZWJ1aWxkUmVxdWlyZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSB0aGlzLmxpc3QuZmluZCggXCJsaVwiICksXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLl9zZWxlY3RPcHRpb25zKCkubm90KCBcIi51aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHJcblx0XHQvLyBUT0RPIGV4Y2VlZGluZ2x5IG5haXZlIG1ldGhvZCB0byBkZXRlcm1pbmUgZGlmZmVyZW5jZVxyXG5cdFx0Ly8gaWdub3JlcyB2YWx1ZSBjaGFuZ2VzIGV0YyBpbiBmYXZvciBvZiBhIGZvcmNlZFJlYnVpbGRcclxuXHRcdC8vIGZyb20gdGhlIHVzZXIgaW4gdGhlIHJlZnJlc2ggbWV0aG9kXHJcblx0XHRyZXR1cm4gb3B0aW9ucy50ZXh0KCkgIT09IGxpc3QudGV4dCgpO1xyXG5cdH0sXHJcblxyXG5cdHNlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RPcHRpb25zKCkuZmlsdGVyKCBcIjpzZWxlY3RlZDpub3QoIDpqcW1EYXRhKHBsYWNlaG9sZGVyPSd0cnVlJykgKVwiICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIGZvcmNlICkge1xyXG5cdFx0dmFyIHNlbGYsIGluZGljZXM7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBmb3JjZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGYgPSB0aGlzO1xyXG5cdFx0aWYgKCBmb3JjZSB8fCB0aGlzLl9pc1JlYnVpbGRSZXF1aXJlZCgpICkge1xyXG5cdFx0XHRzZWxmLl9idWlsZExpc3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpbmRpY2VzID0gdGhpcy5zZWxlY3RlZEluZGljZXMoKTtcclxuXHJcblx0XHRzZWxmLnNldEJ1dHRvblRleHQoKTtcclxuXHRcdHNlbGYuc2V0QnV0dG9uQ291bnQoKTtcclxuXHJcblx0XHRzZWxmLmxpc3QuZmluZCggXCJsaTpub3QoLnVpLWxpLWRpdmlkZXIpXCIgKVxyXG5cdFx0XHQuZmluZCggXCJhXCIgKS5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKS5lbmQoKVxyXG5cdFx0XHQuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIGZhbHNlIClcclxuXHRcdFx0LmVhY2goZnVuY3Rpb24oIGkgKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSAkKCB0aGlzICk7XHJcblx0XHRcdFx0aWYgKCAkLmluQXJyYXkoIGksIGluZGljZXMgKSA+IC0xICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIEFyaWEgc2VsZWN0ZWQgYXR0clxyXG5cdFx0XHRcdFx0aXRlbS5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgdHJ1ZSApO1xyXG5cclxuXHRcdFx0XHRcdC8vIE11bHRpcGxlIHNlbGVjdHM6IGFkZCB0aGUgXCJvblwiIGNoZWNrYm94IHN0YXRlIHRvIHRoZSBpY29uXHJcblx0XHRcdFx0XHRpZiAoIHNlbGYuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0XHRcdFx0aXRlbS5maW5kKCBcImFcIiApLnJlbW92ZUNsYXNzKCBcInVpLWNoZWNrYm94LW9mZlwiICkuYWRkQ2xhc3MoIFwidWktY2hlY2tib3gtb25cIiApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBpdGVtLmhhc0NsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdFx0XHRcdGl0ZW0ubmV4dCgpLmZpbmQoIFwiYVwiICkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0aXRlbS5maW5kKCBcImFcIiApLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIGlmICggc2VsZi5pc011bHRpcGxlICkge1xyXG5cdFx0XHRcdFx0aXRlbS5maW5kKCBcImFcIiApLnJlbW92ZUNsYXNzKCBcInVpLWNoZWNrYm94LW9uXCIgKS5hZGRDbGFzcyggXCJ1aS1jaGVja2JveC1vZmZcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgIXRoaXMuaXNPcGVuICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdGlmICggc2VsZi5tZW51VHlwZSA9PT0gXCJwYWdlXCIgKSB7XHJcblx0XHRcdHNlbGYubWVudVBhZ2UuZGlhbG9nKCBcImNsb3NlXCIgKTtcclxuXHRcdFx0c2VsZi5saXN0LmFwcGVuZFRvKCBzZWxmLmxpc3Rib3ggKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYubGlzdGJveC5wb3B1cCggXCJjbG9zZVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZi5fZm9jdXNCdXR0b24oKTtcclxuXHRcdC8vIGFsbG93IHRoZSBkaWFsb2cgdG8gYmUgY2xvc2VkIGFnYWluXHJcblx0XHRzZWxmLmlzT3BlbiA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdG9wZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5idXR0b24uY2xpY2soKTtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNNZW51SXRlbTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0b3IgPSB0aGlzLmxpc3QuZmluZCggXCJhLlwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdGlmICggc2VsZWN0b3IubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRzZWxlY3RvciA9IHRoaXMubGlzdC5maW5kKCBcImxpOm5vdChcIiArIHVuZm9jdXNhYmxlSXRlbVNlbGVjdG9yICsgXCIpIGEudWktYnRuXCIgKTtcclxuXHRcdH1cclxuXHRcdHNlbGVjdG9yLmZpcnN0KCkuZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRfZGVjaWRlRm9ybWF0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0JHdpbmRvdyA9IHRoaXMud2luZG93LFxyXG5cdFx0XHRzZWxmTGlzdFBhcmVudCA9IHNlbGYubGlzdC5wYXJlbnQoKSxcclxuXHRcdFx0bWVudUhlaWdodCA9IHNlbGZMaXN0UGFyZW50Lm91dGVySGVpZ2h0KCksXHJcblx0XHRcdHNjcm9sbFRvcCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRcdGJ0bk9mZnNldCA9IHNlbGYuYnV0dG9uLm9mZnNldCgpLnRvcCxcclxuXHRcdFx0c2NyZWVuSGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcclxuXHJcblx0XHRpZiAoIG1lbnVIZWlnaHQgPiBzY3JlZW5IZWlnaHQgLSA4MCB8fCAhJC5zdXBwb3J0LnNjcm9sbFRvcCApIHtcclxuXHJcblx0XHRcdHNlbGYubWVudVBhZ2UuYXBwZW5kVG8oICQubW9iaWxlLnBhZ2VDb250YWluZXIgKS5wYWdlKCk7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VDb250ZW50ID0gc2VsZi5tZW51UGFnZS5maW5kKCBcIi51aS1jb250ZW50XCIgKTtcclxuXHRcdFx0c2VsZi5tZW51UGFnZUNsb3NlID0gc2VsZi5tZW51UGFnZS5maW5kKCBcIi51aS1oZWFkZXIgYVwiICk7XHJcblxyXG5cdFx0XHQvLyBwcmV2ZW50IHRoZSBwYXJlbnQgcGFnZSBmcm9tIGJlaW5nIHJlbW92ZWQgZnJvbSB0aGUgRE9NLFxyXG5cdFx0XHQvLyBvdGhlcndpc2UgdGhlIHJlc3VsdHMgb2Ygc2VsZWN0aW5nIGEgbGlzdCBpdGVtIGluIHRoZSBkaWFsb2dcclxuXHRcdFx0Ly8gZmFsbCBpbnRvIGEgYmxhY2sgaG9sZVxyXG5cdFx0XHRzZWxmLnRoaXNQYWdlLnVuYmluZCggXCJwYWdlaGlkZS5yZW1vdmVcIiApO1xyXG5cclxuXHRcdFx0Ly9mb3IgV2ViT1MvT3BlcmEgTWluaSAoc2V0IGxhc3RzY3JvbGwgdXNpbmcgYnV0dG9uIG9mZnNldClcclxuXHRcdFx0aWYgKCBzY3JvbGxUb3AgPT09IDAgJiYgYnRuT2Zmc2V0ID4gc2NyZWVuSGVpZ2h0ICkge1xyXG5cdFx0XHRcdHNlbGYudGhpc1BhZ2Uub25lKCBcInBhZ2VoaWRlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JCggdGhpcyApLmpxbURhdGEoIFwibGFzdFNjcm9sbFwiLCBidG5PZmZzZXQgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5tZW51UGFnZS5vbmUoIHtcclxuXHRcdFx0XHRwYWdlc2hvdzogJC5wcm94eSggdGhpcywgXCJfZm9jdXNNZW51SXRlbVwiICksXHJcblx0XHRcdFx0cGFnZWhpZGU6ICQucHJveHkoIHRoaXMsIFwiY2xvc2VcIiApXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c2VsZi5tZW51VHlwZSA9IFwicGFnZVwiO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlQ29udGVudC5hcHBlbmQoIHNlbGYubGlzdCApO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlXHJcblx0XHRcdFx0LmZpbmQoIFwiZGl2IC51aS10aXRsZVwiIClcclxuXHRcdFx0XHRcdC50ZXh0KCBzZWxmLmxhYmVsLmdldEVuY29kZWRUZXh0KCkgfHwgc2VsZi5wbGFjZWhvbGRlciApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5tZW51VHlwZSA9IFwib3ZlcmxheVwiO1xyXG5cclxuXHRcdFx0c2VsZi5saXN0Ym94Lm9uZSggeyBwb3B1cGFmdGVyb3BlbjogJC5wcm94eSggdGhpcywgXCJfZm9jdXNNZW51SXRlbVwiICkgfSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9idWlsZExpc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRwbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXIsXHJcblx0XHRcdG5lZWRQbGFjZWhvbGRlciA9IHRydWUsXHJcblx0XHRcdGRhdGFJY29uID0gXCJmYWxzZVwiLFxyXG5cdFx0XHQkb3B0aW9ucywgbnVtT3B0aW9ucywgc2VsZWN0LFxyXG5cdFx0XHRkYXRhUHJlZml4ID0gXCJkYXRhLVwiICsgJC5tb2JpbGUubnMsXHJcblx0XHRcdGRhdGFJbmRleEF0dHIgPSBkYXRhUHJlZml4ICsgXCJvcHRpb24taW5kZXhcIixcclxuXHRcdFx0ZGF0YUljb25BdHRyID0gZGF0YVByZWZpeCArIFwiaWNvblwiLFxyXG5cdFx0XHRkYXRhUm9sZUF0dHIgPSBkYXRhUHJlZml4ICsgXCJyb2xlXCIsXHJcblx0XHRcdGRhdGFQbGFjZWhvbGRlckF0dHIgPSBkYXRhUHJlZml4ICsgXCJwbGFjZWhvbGRlclwiLFxyXG5cdFx0XHRmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcclxuXHRcdFx0aXNQbGFjZWhvbGRlckl0ZW0gPSBmYWxzZSxcclxuXHRcdFx0b3B0R3JvdXAsXHJcblx0XHRcdGksXHJcblx0XHRcdG9wdGlvbiwgJG9wdGlvbiwgcGFyZW50LCB0ZXh0LCBhbmNob3IsIGNsYXNzZXMsXHJcblx0XHRcdG9wdExhYmVsLCBkaXZpZGVyLCBpdGVtO1xyXG5cclxuXHRcdHNlbGYubGlzdC5lbXB0eSgpLmZpbHRlciggXCIudWktbGlzdHZpZXdcIiApLmxpc3R2aWV3KCBcImRlc3Ryb3lcIiApO1xyXG5cdFx0JG9wdGlvbnMgPSB0aGlzLl9zZWxlY3RPcHRpb25zKCk7XHJcblx0XHRudW1PcHRpb25zID0gJG9wdGlvbnMubGVuZ3RoO1xyXG5cdFx0c2VsZWN0ID0gdGhpcy5zZWxlY3RbIDAgXTtcclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IG51bU9wdGlvbnM7aSsrLCBpc1BsYWNlaG9sZGVySXRlbSA9IGZhbHNlKSB7XHJcblx0XHRcdG9wdGlvbiA9ICRvcHRpb25zW2ldO1xyXG5cdFx0XHQkb3B0aW9uID0gJCggb3B0aW9uICk7XHJcblxyXG5cdFx0XHQvLyBEbyBub3QgY3JlYXRlIG9wdGlvbnMgYmFzZWQgb24gdWktc2NyZWVuLWhpZGRlbiBzZWxlY3Qgb3B0aW9uc1xyXG5cdFx0XHRpZiAoICRvcHRpb24uaGFzQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHBhcmVudCA9IG9wdGlvbi5wYXJlbnROb2RlO1xyXG5cdFx0XHRjbGFzc2VzID0gW107XHJcblxyXG5cdFx0XHQvLyBBbHRob3VnaCB1c2luZyAudGV4dCgpIGhlcmUgcmFpc2VzIHRoZSByaXNrIHRoYXQsIHdoZW4gd2UgbGF0ZXIgcGFzdGUgdGhpcyBpbnRvIHRoZVxyXG5cdFx0XHQvLyBsaXN0IGl0ZW0gd2UgZW5kIHVwIHBhc3RpbmcgcG9zc2libHkgbWFsaWNpb3VzIHRoaW5ncyBsaWtlIDxzY3JpcHQ+IHRhZ3MsIHRoYXQgcmlza1xyXG5cdFx0XHQvLyBvbmx5IGFyaXNlcyBpZiB3ZSBkbyBzb21ldGhpbmcgbGlrZSAkKCBcIjxsaT48YSBocmVmPScjJz5cIiArIHRleHQgKyBcIjwvYT48L2xpPlwiICkuIFdlXHJcblx0XHRcdC8vIGRvbid0IGRvIHRoYXQuIFdlIGRvIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCB0ZXh0ICkgaW5zdGVhZCwgd2hpY2ggZ3VhcmFudGVlcyB0aGF0XHJcblx0XHRcdC8vIHdoYXRldmVyIHdlIHBhc3RlIGluIHdpbGwgZW5kIHVwIGFzIHRleHQsIHdpdGggY2hhcmFjdGVycyBsaWtlIDwsID4gYW5kICYgZXNjYXBlZC5cclxuXHRcdFx0dGV4dCA9ICRvcHRpb24udGV4dCgpO1xyXG5cdFx0XHRhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xyXG5cdFx0XHRhbmNob3Iuc2V0QXR0cmlidXRlKCBcImhyZWZcIiwgXCIjXCIgKTtcclxuXHRcdFx0YW5jaG9yLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggdGV4dCApICk7XHJcblxyXG5cdFx0XHQvLyBBcmUgd2UgaW5zaWRlIGFuIG9wdGdyb3VwP1xyXG5cdFx0XHRpZiAoIHBhcmVudCAhPT0gc2VsZWN0ICYmIHBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcIm9wdGdyb3VwXCIgKSB7XHJcblx0XHRcdFx0b3B0TGFiZWwgPSBwYXJlbnQuZ2V0QXR0cmlidXRlKCBcImxhYmVsXCIgKTtcclxuXHRcdFx0XHRpZiAoIG9wdExhYmVsICE9PSBvcHRHcm91cCApIHtcclxuXHRcdFx0XHRcdGRpdmlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBkYXRhUm9sZUF0dHIsIFwibGlzdC1kaXZpZGVyXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJvcHRpb25cIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggb3B0TGFiZWwgKSApO1xyXG5cdFx0XHRcdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRpdmlkZXIgKTtcclxuXHRcdFx0XHRcdG9wdEdyb3VwID0gb3B0TGFiZWw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG5lZWRQbGFjZWhvbGRlciAmJiAoICFvcHRpb24uZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSB8fCB0ZXh0Lmxlbmd0aCA9PT0gMCB8fCAkb3B0aW9uLmpxbURhdGEoIFwicGxhY2Vob2xkZXJcIiApICkgKSB7XHJcblx0XHRcdFx0bmVlZFBsYWNlaG9sZGVyID0gZmFsc2U7XHJcblx0XHRcdFx0aXNQbGFjZWhvbGRlckl0ZW0gPSB0cnVlO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGlkZW50aWZpZWQgYSBwbGFjZWhvbGRlciwgcmVjb3JkIHRoZSBmYWN0IHRoYXQgaXQgd2FzXHJcblx0XHRcdFx0Ly8gdXMgd2hvIGhhdmUgYWRkZWQgdGhlIHBsYWNlaG9sZGVyIHRvIHRoZSBvcHRpb24gYW5kIG1hcmsgaXRcclxuXHRcdFx0XHQvLyByZXRyb2FjdGl2ZWx5IGluIHRoZSBzZWxlY3QgYXMgd2VsbFxyXG5cdFx0XHRcdGlmICggbnVsbCA9PT0gb3B0aW9uLmdldEF0dHJpYnV0ZSggZGF0YVBsYWNlaG9sZGVyQXR0ciApICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fcmVtb3ZlUGxhY2Vob2xkZXJBdHRyID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b3B0aW9uLnNldEF0dHJpYnV0ZSggZGF0YVBsYWNlaG9sZGVyQXR0ciwgdHJ1ZSApO1xyXG5cdFx0XHRcdGlmICggby5oaWRlUGxhY2Vob2xkZXJNZW51SXRlbXMgKSB7XHJcblx0XHRcdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggcGxhY2Vob2xkZXIgIT09IHRleHQgKSB7XHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9IHNlbGYucGxhY2Vob2xkZXIgPSB0ZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xyXG5cdFx0XHRpZiAoIG9wdGlvbi5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBcImFyaWEtZGlzYWJsZWRcIiwgdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBkYXRhSW5kZXhBdHRyLCBpICk7XHJcblx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBkYXRhSWNvbkF0dHIsIGRhdGFJY29uICk7XHJcblx0XHRcdGlmICggaXNQbGFjZWhvbGRlckl0ZW0gKSB7XHJcblx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIGRhdGFQbGFjZWhvbGRlckF0dHIsIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpdGVtLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbiggXCIgXCIgKTtcclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcIm9wdGlvblwiICk7XHJcblx0XHRcdGFuY2hvci5zZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHRcdCQoIGFuY2hvciApLmFkZENsYXNzKCBcInVpLWJ0biB1aS1jaGVja2JveC1vZmYgdWktYnRuLWljb24tcmlnaHRcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpdGVtLmFwcGVuZENoaWxkKCBhbmNob3IgKTtcclxuXHRcdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGl0ZW0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxmLmxpc3RbMF0uYXBwZW5kQ2hpbGQoIGZyYWdtZW50ICk7XHJcblxyXG5cdFx0Ly8gSGlkZSBoZWFkZXIgaWYgaXQncyBub3QgYSBtdWx0aXNlbGVjdCBhbmQgdGhlcmUncyBubyBwbGFjZWhvbGRlclxyXG5cdFx0aWYgKCAhdGhpcy5pc011bHRpcGxlICYmICFwbGFjZWhvbGRlci5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMuaGVhZGVyLmFkZENsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5oZWFkZXJUaXRsZS50ZXh0KCB0aGlzLnBsYWNlaG9sZGVyICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTm93IHBvcHVsYXRlZCwgY3JlYXRlIGxpc3R2aWV3XHJcblx0XHRzZWxmLmxpc3QubGlzdHZpZXcoKTtcclxuXHR9LFxyXG5cclxuXHRfYnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMubmF0aXZlTWVudSA/XHJcblx0XHRcdHRoaXMuX3N1cGVyKCkgOlxyXG5cdFx0XHQkKCBcIjxhPlwiLCB7XHJcblx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFwicm9sZVwiOiBcImJ1dHRvblwiLFxyXG5cdFx0XHRcdC8vIFRPRE8gdmFsdWUgaXMgdW5kZWZpbmVkIGF0IGNyZWF0aW9uXHJcblx0XHRcdFx0XCJpZFwiOiB0aGlzLmJ1dHRvbklkLFxyXG5cdFx0XHRcdFwiYXJpYS1oYXNwb3B1cFwiOiBcInRydWVcIixcclxuXHJcblx0XHRcdFx0Ly8gVE9ETyB2YWx1ZSBpcyB1bmRlZmluZWQgYXQgY3JlYXRpb25cclxuXHRcdFx0XHRcImFyaWEtb3duc1wiOiB0aGlzLm1lbnVJZFxyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHJcblx0XHRcdC8vIFJlc3RvcmUgdGhlIHRhYmluZGV4IGF0dHJpYnV0ZSB0byBpdHMgb3JpZ2luYWwgdmFsdWVcclxuXHRcdFx0aWYgKCB0aGlzLl9vcmlnVGFiSW5kZXggIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX29yaWdUYWJJbmRleCAhPT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdC5hdHRyKCBcInRhYmluZGV4XCIsIHRoaXMuX29yaWdUYWJJbmRleCApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdC5yZW1vdmVBdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlbW92ZSB0aGUgcGxhY2Vob2xkZXIgYXR0cmlidXRlIGlmIHdlIHdlcmUgdGhlIG9uZXMgdG8gYWRkIGl0XHJcblx0XHRcdGlmICggdGhpcy5fcmVtb3ZlUGxhY2Vob2xkZXJBdHRyICkge1xyXG5cdFx0XHRcdHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5yZW1vdmVBdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicGxhY2Vob2xkZXJcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHBvcHVwXHJcblx0XHRcdHRoaXMubGlzdGJveC5yZW1vdmUoKTtcclxuXHJcblx0XHRcdC8vIFJlbW92ZSB0aGUgZGlhbG9nXHJcblx0XHRcdHRoaXMubWVudVBhZ2UucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hhaW4gdXBcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4vLyBidXR0b25NYXJrdXAgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDEuNS4wLlxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBHZW5lcmFsIHBvbGljeTogRG8gbm90IGFjY2VzcyBkYXRhLSogYXR0cmlidXRlcyBleGNlcHQgZHVyaW5nIGVuaGFuY2VtZW50LlxyXG4vLyBJbiBhbGwgb3RoZXIgY2FzZXMgd2UgZGV0ZXJtaW5lIHRoZSBzdGF0ZSBvZiB0aGUgYnV0dG9uIGV4Y2x1c2l2ZWx5IGZyb20gaXRzXHJcbi8vIGNsYXNzTmFtZS4gVGhhdCdzIHdoeSBvcHRpb25zVG9DbGFzc2VzIGV4cGVjdHMgYSBmdWxsIGNvbXBsZW1lbnQgb2Ygb3B0aW9ucyxcclxuLy8gYW5kIHRoZSBqUXVlcnkgcGx1Z2luIGNvbXBsZXRlcyB0aGUgc2V0IG9mIG9wdGlvbnMgZnJvbSB0aGUgZGVmYXVsdCB2YWx1ZXMuXHJcblxyXG4vLyBNYXAgY2xhc3NlcyB0byBidXR0b25NYXJrdXAgYm9vbGVhbiBvcHRpb25zIC0gdXNlZCBpbiBjbGFzc05hbWVUb09wdGlvbnMoKVxyXG52YXIgcmV2ZXJzZUJvb2xPcHRpb25NYXAgPSB7XHJcblx0XHRcInVpLXNoYWRvd1wiIDogXCJzaGFkb3dcIixcclxuXHRcdFwidWktY29ybmVyLWFsbFwiIDogXCJjb3JuZXJzXCIsXHJcblx0XHRcInVpLWJ0bi1pbmxpbmVcIiA6IFwiaW5saW5lXCIsXHJcblx0XHRcInVpLXNoYWRvdy1pY29uXCIgOiBcImljb25zaGFkb3dcIiwgLyogVE9ETzogUmVtb3ZlIGluIDEuNSAqL1xyXG5cdFx0XCJ1aS1taW5pXCIgOiBcIm1pbmlcIlxyXG5cdH0sXHJcblx0Z2V0QXR0ckZpeGVkID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcmV0ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRyZXR1cm4gKCByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldCApO1xyXG5cdH0sXHJcblx0Y2FwaXRhbExldHRlcnNSRSA9IC9bQS1aXS9nO1xyXG5cclxuLy8gb3B0aW9uc1RvQ2xhc3NlczpcclxuLy8gQG9wdGlvbnM6IEEgY29tcGxldGUgc2V0IG9mIG9wdGlvbnMgdG8gY29udmVydCB0byBjbGFzcyBuYW1lcy5cclxuLy8gQGV4aXN0aW5nQ2xhc3NlczogZXh0cmEgY2xhc3NlcyB0byBhZGQgdG8gdGhlIHJlc3VsdFxyXG4vL1xyXG4vLyBDb252ZXJ0cyBAb3B0aW9ucyB0byBidXR0b25NYXJrdXAgY2xhc3NlcyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGFuIGFycmF5XHJcbi8vIHRoYXQgY2FuIGJlIGNvbnZlcnRlZCB0byBhbiBlbGVtZW50J3MgY2xhc3NOYW1lIHdpdGggLmpvaW4oIFwiIFwiICkuIEFsbFxyXG4vLyBwb3NzaWJsZSBvcHRpb25zIG11c3QgYmUgc2V0IGluc2lkZSBAb3B0aW9ucy4gVXNlICQuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzXHJcbi8vIHRvIGdldCBhIGNvbXBsZXRlIHNldCBhbmQgdXNlICQuZXh0ZW5kIHRvIG92ZXJyaWRlIHlvdXIgY2hvaWNlIG9mIG9wdGlvbnNcclxuLy8gZnJvbSB0aGF0IHNldC5cclxuZnVuY3Rpb24gb3B0aW9uc1RvQ2xhc3Nlcyggb3B0aW9ucywgZXhpc3RpbmdDbGFzc2VzICkge1xyXG5cdHZhciBjbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzID8gZXhpc3RpbmdDbGFzc2VzIDogW107XHJcblxyXG5cdC8vIEFkZCBjbGFzc2VzIHRvIHRoZSBhcnJheSAtIGZpcnN0IHVpLWJ0blxyXG5cdGNsYXNzZXMucHVzaCggXCJ1aS1idG5cIiApO1xyXG5cclxuXHQvLyBJZiB0aGVyZSBpcyBhIHRoZW1lXHJcblx0aWYgKCBvcHRpb25zLnRoZW1lICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHR9XHJcblxyXG5cdC8vIElmIHRoZXJlJ3MgYW4gaWNvbiwgYWRkIHRoZSBpY29uLXJlbGF0ZWQgY2xhc3Nlc1xyXG5cdGlmICggb3B0aW9ucy5pY29uICkge1xyXG5cdFx0Y2xhc3NlcyA9IGNsYXNzZXMuY29uY2F0KFtcclxuXHRcdFx0XCJ1aS1pY29uLVwiICsgb3B0aW9ucy5pY29uLFxyXG5cdFx0XHRcInVpLWJ0bi1pY29uLVwiICsgb3B0aW9ucy5pY29ucG9zXHJcblx0XHRdKTtcclxuXHRcdGlmICggb3B0aW9ucy5pY29uc2hhZG93ICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc2hhZG93LWljb25cIiApOyAvKiBUT0RPOiBSZW1vdmUgaW4gMS41ICovXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBBZGQgdGhlIGFwcHJvcHJpYXRlIGNsYXNzIGZvciBlYWNoIGJvb2xlYW4gb3B0aW9uXHJcblx0aWYgKCBvcHRpb25zLmlubGluZSApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1idG4taW5saW5lXCIgKTtcclxuXHR9XHJcblx0aWYgKCBvcHRpb25zLnNoYWRvdyApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zaGFkb3dcIiApO1xyXG5cdH1cclxuXHRpZiAoIG9wdGlvbnMuY29ybmVycyApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1jb3JuZXItYWxsXCIgKTtcclxuXHR9XHJcblx0aWYgKCBvcHRpb25zLm1pbmkgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktbWluaVwiICk7XHJcblx0fVxyXG5cclxuXHQvLyBDcmVhdGUgYSBzdHJpbmcgZnJvbSB0aGUgYXJyYXkgYW5kIHJldHVybiBpdFxyXG5cdHJldHVybiBjbGFzc2VzO1xyXG59XHJcblxyXG4vLyBjbGFzc05hbWVUb09wdGlvbnM6XHJcbi8vIEBjbGFzc2VzOiBBIHN0cmluZyBjb250YWluaW5nIGEgLmNsYXNzTmFtZS1zdHlsZSBzcGFjZS1zZXBhcmF0ZWQgY2xhc3MgbGlzdFxyXG4vL1xyXG4vLyBMb29wcyBvdmVyIEBjbGFzc2VzIGFuZCBjYWxjdWxhdGVzIGFuIG9wdGlvbnMgb2JqZWN0IGJhc2VkIG9uIHRoZVxyXG4vLyBidXR0b25NYXJrdXAtcmVsYXRlZCBjbGFzc2VzIGl0IGZpbmRzLiBJdCByZWNvcmRzIHVucmVjb2duaXplZCBjbGFzc2VzIGluIGFuXHJcbi8vIGFycmF5LlxyXG4vL1xyXG4vLyBSZXR1cm5zOiBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGl0ZW1zOlxyXG4vL1xyXG4vLyBcIm9wdGlvbnNcIjogYnV0dG9uTWFya3VwIG9wdGlvbnMgZm91bmQgdG8gYmUgcHJlc2VudCBiZWNhdXNlIG9mIHRoZVxyXG4vLyBwcmVzZW5jZS9hYnNlbmNlIG9mIGNvcnJlc3BvbmRpbmcgY2xhc3Nlc1xyXG4vL1xyXG4vLyBcInVua25vd25DbGFzc2VzXCI6IGEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIHRoZSBub24tYnV0dG9uTWFya3VwLXJlbGF0ZWRcclxuLy8gY2xhc3NlcyBmb3VuZCBpbiBAY2xhc3Nlc1xyXG4vL1xyXG4vLyBcImFscmVhZHlFbmhhbmNlZFwiOiBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB1aS1idG4gY2xhc3Mgd2FzIGFtb25nXHJcbi8vIHRob3NlIGZvdW5kIHRvIGJlIHByZXNlbnRcclxuZnVuY3Rpb24gY2xhc3NOYW1lVG9PcHRpb25zKCBjbGFzc2VzICkge1xyXG5cdHZhciBpZHgsIG1hcCwgdW5rbm93bkNsYXNzLFxyXG5cdFx0YWxyZWFkeUVuaGFuY2VkID0gZmFsc2UsXHJcblx0XHRub0ljb24gPSB0cnVlLFxyXG5cdFx0byA9IHtcclxuXHRcdFx0aWNvbjogXCJcIixcclxuXHRcdFx0aW5saW5lOiBmYWxzZSxcclxuXHRcdFx0c2hhZG93OiBmYWxzZSxcclxuXHRcdFx0Y29ybmVyczogZmFsc2UsXHJcblx0XHRcdGljb25zaGFkb3c6IGZhbHNlLFxyXG5cdFx0XHRtaW5pOiBmYWxzZVxyXG5cdFx0fSxcclxuXHRcdHVua25vd25DbGFzc2VzID0gW107XHJcblxyXG5cdGNsYXNzZXMgPSBjbGFzc2VzLnNwbGl0KCBcIiBcIiApO1xyXG5cclxuXHQvLyBMb29wIG92ZXIgdGhlIGNsYXNzZXNcclxuXHRmb3IgKCBpZHggPSAwIDsgaWR4IDwgY2xhc3Nlcy5sZW5ndGggOyBpZHgrKyApIHtcclxuXHJcblx0XHQvLyBBc3N1bWUgaXQncyBhbiB1bnJlY29nbml6ZWQgY2xhc3NcclxuXHRcdHVua25vd25DbGFzcyA9IHRydWU7XHJcblxyXG5cdFx0Ly8gUmVjb2duaXplIGJvb2xlYW4gb3B0aW9ucyBmcm9tIHRoZSBwcmVzZW5jZSBvZiBjbGFzc2VzXHJcblx0XHRtYXAgPSByZXZlcnNlQm9vbE9wdGlvbk1hcFsgY2xhc3Nlc1sgaWR4IF0gXTtcclxuXHRcdGlmICggbWFwICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRvWyBtYXAgXSA9IHRydWU7XHJcblxyXG5cdFx0Ly8gUmVjb2duaXplIHRoZSBwcmVzZW5jZSBvZiBhbiBpY29uIGFuZCBlc3RhYmxpc2ggdGhlIGljb24gcG9zaXRpb25cclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdLmluZGV4T2YoIFwidWktYnRuLWljb24tXCIgKSA9PT0gMCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG5vSWNvbiA9IGZhbHNlO1xyXG5cdFx0XHRvLmljb25wb3MgPSBjbGFzc2VzWyBpZHggXS5zdWJzdHJpbmcoIDEyICk7XHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIHdoaWNoIGljb24gaXMgcHJlc2VudFxyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0uaW5kZXhPZiggXCJ1aS1pY29uLVwiICkgPT09IDAgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRvLmljb24gPSBjbGFzc2VzWyBpZHggXS5zdWJzdHJpbmcoIDggKTtcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggdGhlIHRoZW1lIC0gdGhpcyByZWNvZ25pemVzIG9uZS1sZXR0ZXIgdGhlbWUgc3dhdGNoIG5hbWVzXHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXS5pbmRleE9mKCBcInVpLWJ0bi1cIiApID09PSAwICYmIGNsYXNzZXNbIGlkeCBdLmxlbmd0aCA9PT0gOCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG8udGhlbWUgPSBjbGFzc2VzWyBpZHggXS5zdWJzdHJpbmcoIDcgKTtcclxuXHJcblx0XHQvLyBSZWNvZ25pemUgdGhhdCB0aGlzIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlbiBidXR0b25NYXJrdXAtZW5oYW5jZWRcclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdID09PSBcInVpLWJ0blwiICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0YWxyZWFkeUVuaGFuY2VkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB0aGlzIGNsYXNzIGhhcyBub3QgYmVlbiByZWNvZ25pemVkLCBhZGQgaXQgdG8gdGhlIGxpc3RcclxuXHRcdGlmICggdW5rbm93bkNsYXNzICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3Nlcy5wdXNoKCBjbGFzc2VzWyBpZHggXSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gSWYgYSBcInVpLWJ0bi1pY29uLSpcIiBpY29uIHBvc2l0aW9uIGNsYXNzIGlzIGFic2VudCB0aGVyZSBjYW5ub3QgYmUgYW4gaWNvblxyXG5cdGlmICggbm9JY29uICkge1xyXG5cdFx0by5pY29uID0gXCJcIjtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRvcHRpb25zOiBvLFxyXG5cdFx0dW5rbm93bkNsYXNzZXM6IHVua25vd25DbGFzc2VzLFxyXG5cdFx0YWxyZWFkeUVuaGFuY2VkOiBhbHJlYWR5RW5oYW5jZWRcclxuXHR9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYW1lbENhc2UySHlwaGVuYXRlZCggYyApIHtcclxuXHRyZXR1cm4gXCItXCIgKyBjLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuXHJcbi8vICQuZm4uYnV0dG9uTWFya3VwOlxyXG4vLyBET006IGdldHMvc2V0cyAuY2xhc3NOYW1lXHJcbi8vXHJcbi8vIEBvcHRpb25zOiBvcHRpb25zIHRvIGFwcGx5IHRvIHRoZSBlbGVtZW50cyBpbiB0aGUgalF1ZXJ5IG9iamVjdFxyXG4vLyBAb3ZlcndyaXRlQ2xhc3NlczogYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdG8gaG9ub3VyIGV4aXN0aW5nIGNsYXNzZXNcclxuLy9cclxuLy8gQ2FsY3VsYXRlcyB0aGUgY2xhc3NlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudHMgaW4gdGhlIGpRdWVyeSBvYmplY3QgYmFzZWQgb25cclxuLy8gdGhlIG9wdGlvbnMgcGFzc2VkIGluLiBJZiBAb3ZlcndyaXRlQ2xhc3NlcyBpcyB0cnVlLCBpdCBzZXRzIHRoZSBjbGFzc05hbWVcclxuLy8gcHJvcGVydHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBqUXVlcnkgb2JqZWN0IHRvIHRoZSBidXR0b25NYXJrdXAgY2xhc3Nlc1xyXG4vLyBpdCBjYWxjdWxhdGVzIGJhc2VkIG9uIHRoZSBvcHRpb25zIHBhc3NlZCBpbi5cclxuLy9cclxuLy8gSWYgeW91IHdpc2ggdG8gcHJlc2VydmUgYW55IGNsYXNzZXMgdGhhdCBhcmUgYWxyZWFkeSBwcmVzZW50IG9uIHRoZSBlbGVtZW50c1xyXG4vLyBpbnNpZGUgdGhlIGpRdWVyeSBvYmplY3QsIGluY2x1ZGluZyBidXR0b25NYXJrdXAtcmVsYXRlZCBjbGFzc2VzIHRoYXQgd2VyZVxyXG4vLyBhZGRlZCBieSBhIHByZXZpb3VzIGNhbGwgdG8gJC5mbi5idXR0b25NYXJrdXAoKSBvciBkdXJpbmcgcGFnZSBlbmhhbmNlbWVudFxyXG4vLyB0aGVuIHlvdSBzaG91bGQgb21pdCBAb3ZlcndyaXRlQ2xhc3NlcyBvciBzZXQgaXQgdG8gZmFsc2UuXHJcbiQuZm4uYnV0dG9uTWFya3VwID0gZnVuY3Rpb24oIG9wdGlvbnMsIG92ZXJ3cml0ZUNsYXNzZXMgKSB7XHJcblx0dmFyIGlkeCwgZGF0YSwgZWwsIHJldHJpZXZlZE9wdGlvbnMsIG9wdGlvbktleSxcclxuXHRcdGRlZmF1bHRzID0gJC5mbi5idXR0b25NYXJrdXAuZGVmYXVsdHM7XHJcblxyXG5cdGZvciAoIGlkeCA9IDAgOyBpZHggPCB0aGlzLmxlbmd0aCA7IGlkeCsrICkge1xyXG5cdFx0ZWwgPSB0aGlzWyBpZHggXTtcclxuXHRcdGRhdGEgPSBvdmVyd3JpdGVDbGFzc2VzID9cclxuXHJcblx0XHRcdC8vIEFzc3VtZSB0aGlzIGVsZW1lbnQgaXMgbm90IGVuaGFuY2VkIGFuZCBpZ25vcmUgaXRzIGNsYXNzZXNcclxuXHRcdFx0eyBhbHJlYWR5RW5oYW5jZWQ6IGZhbHNlLCB1bmtub3duQ2xhc3NlczogW10gfSA6XHJcblxyXG5cdFx0XHQvLyBPdGhlcndpc2UgYW5hbHl6ZSBleGlzdGluZyBjbGFzc2VzIHRvIGVzdGFibGlzaCBleGlzdGluZyBvcHRpb25zIGFuZFxyXG5cdFx0XHQvLyBjbGFzc2VzXHJcblx0XHRcdGNsYXNzTmFtZVRvT3B0aW9ucyggZWwuY2xhc3NOYW1lICk7XHJcblxyXG5cdFx0cmV0cmlldmVkT3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSxcclxuXHJcblx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGFscmVhZHkgaGFzIHRoZSBjbGFzcyB1aS1idG4sIHRoZW4gd2UgYXNzdW1lIHRoYXRcclxuXHRcdFx0Ly8gaXQgaGFzIHBhc3NlZCB0aHJvdWdoIGJ1dHRvbk1hcmt1cCBiZWZvcmUgLSBvdGhlcndpc2UsIHRoZSBvcHRpb25zXHJcblx0XHRcdC8vIHJldHVybmVkIGJ5IGNsYXNzTmFtZVRvT3B0aW9ucyBkbyBub3QgY29ycmVjdGx5IHJlZmxlY3QgdGhlIHN0YXRlIG9mXHJcblx0XHRcdC8vIHRoZSBlbGVtZW50XHJcblx0XHRcdCggZGF0YS5hbHJlYWR5RW5oYW5jZWQgPyBkYXRhLm9wdGlvbnMgOiB7fSApLFxyXG5cclxuXHRcdFx0Ly8gRmluYWxseSwgYXBwbHkgdGhlIG9wdGlvbnMgcGFzc2VkIGluXHJcblx0XHRcdG9wdGlvbnMgKTtcclxuXHJcblx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsIG9uIHRoaXMgZWxlbWVudCwgcmV0cmlldmUgcmVtYWluaW5nIG9wdGlvbnNcclxuXHRcdC8vIGZyb20gdGhlIGRhdGEtYXR0cmlidXRlc1xyXG5cdFx0aWYgKCAhZGF0YS5hbHJlYWR5RW5oYW5jZWQgKSB7XHJcblx0XHRcdGZvciAoIG9wdGlvbktleSBpbiBkZWZhdWx0cyApIHtcclxuXHRcdFx0XHRpZiAoIHJldHJpZXZlZE9wdGlvbnNbIG9wdGlvbktleSBdID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXRyaWV2ZWRPcHRpb25zWyBvcHRpb25LZXkgXSA9IGdldEF0dHJGaXhlZCggZWwsXHJcblx0XHRcdFx0XHRcdG9wdGlvbktleS5yZXBsYWNlKCBjYXBpdGFsTGV0dGVyc1JFLCBjYW1lbENhc2UySHlwaGVuYXRlZCApXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGVsLmNsYXNzTmFtZSA9IG9wdGlvbnNUb0NsYXNzZXMoXHJcblxyXG5cdFx0XHQvLyBNZXJnZSBhbGwgdGhlIG9wdGlvbnMgYW5kIGFwcGx5IHRoZW0gYXMgY2xhc3Nlc1xyXG5cdFx0XHQkLmV4dGVuZCgge30sXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBkZWZhdWx0cyBmb3JtIHRoZSBiYXNpc1xyXG5cdFx0XHRcdGRlZmF1bHRzLFxyXG5cclxuXHRcdFx0XHQvLyBBZGQgdGhlIGNvbXB1dGVkIG9wdGlvbnNcclxuXHRcdFx0XHRyZXRyaWV2ZWRPcHRpb25zXHJcblx0XHRcdCksXHJcblxyXG5cdFx0XHQvLyAuLi4gYW5kIHJlLWFwcGx5IGFueSB1bnJlY29nbml6ZWQgY2xhc3NlcyB0aGF0IHdlcmUgZm91bmRcclxuXHRcdFx0ZGF0YS51bmtub3duQ2xhc3NlcyApLmpvaW4oIFwiIFwiICk7XHJcblx0XHRpZiAoIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJidXR0b25cIiApIHtcclxuXHRcdFx0ZWwuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJidXR0b25cIiApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vLyBidXR0b25NYXJrdXAgZGVmYXVsdHMuIFRoaXMgbXVzdCBiZSBhIGNvbXBsZXRlIHNldCwgaS5lLiwgYSB2YWx1ZSBtdXN0IGJlXHJcbi8vIGdpdmVuIGhlcmUgZm9yIGFsbCByZWNvZ25pemVkIG9wdGlvbnNcclxuJC5mbi5idXR0b25NYXJrdXAuZGVmYXVsdHMgPSB7XHJcblx0aWNvbjogXCJcIixcclxuXHRpY29ucG9zOiBcImxlZnRcIixcclxuXHR0aGVtZTogbnVsbCxcclxuXHRpbmxpbmU6IGZhbHNlLFxyXG5cdHNoYWRvdzogdHJ1ZSxcclxuXHRjb3JuZXJzOiB0cnVlLFxyXG5cdGljb25zaGFkb3c6IGZhbHNlLCAvKiBUT0RPOiBSZW1vdmUgaW4gMS41LiBPcHRpb24gZGVwcmVjYXRlZCBpbiAxLjQuICovXHJcblx0bWluaTogZmFsc2VcclxufTtcclxuXHJcbiQuZXh0ZW5kKCAkLmZuLmJ1dHRvbk1hcmt1cCwge1xyXG5cdGluaXRTZWxlY3RvcjogXCJhOmpxbURhdGEocm9sZT0nYnV0dG9uJyksIC51aS1iYXIgPiBhLCAudWktYmFyID4gOmpxbURhdGEocm9sZT0nY29udHJvbGdyb3VwJykgPiBhLCBidXR0b246bm90KDpqcW1EYXRhKHJvbGU9J25hdmJhcicpIGJ1dHRvbilcIlxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jb250cm9sZ3JvdXBcIiwgJC5leHRlbmQoIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdHNoYWRvdzogZmFsc2UsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0ZXhjbHVkZUludmlzaWJsZTogdHJ1ZSxcclxuXHRcdHR5cGU6IFwidmVydGljYWxcIixcclxuXHRcdG1pbmk6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0a2VlcE5hdGl2ZSA9ICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvcigpO1xyXG5cclxuXHRcdC8vIFJ1biBidXR0b25tYXJrdXBcclxuXHRcdGlmICggJC5mbi5idXR0b25NYXJrdXAgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5maW5kKCAkLmZuLmJ1dHRvbk1hcmt1cC5pbml0U2VsZWN0b3IgKVxyXG5cdFx0XHRcdC5ub3QoIGtlZXBOYXRpdmUgKVxyXG5cdFx0XHRcdC5idXR0b25NYXJrdXAoKTtcclxuXHRcdH1cclxuXHRcdC8vIEVuaGFuY2UgY2hpbGQgd2lkZ2V0c1xyXG5cdFx0JC5lYWNoKCB0aGlzLl9jaGlsZFdpZGdldHMsICQucHJveHkoIGZ1bmN0aW9uKCBudW1iZXIsIHdpZGdldE5hbWUgKSB7XHJcblx0XHRcdGlmICggJC5tb2JpbGVbIHdpZGdldE5hbWUgXSApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHRcdC5maW5kKCAkLm1vYmlsZVsgd2lkZ2V0TmFtZSBdLmluaXRTZWxlY3RvciApXHJcblx0XHRcdFx0XHQubm90KCBrZWVwTmF0aXZlIClbIHdpZGdldE5hbWUgXSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB0aGlzICkpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF91aTogbnVsbCxcclxuXHRcdFx0X2luaXRpYWxSZWZyZXNoOiB0cnVlXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpID0ge1xyXG5cdFx0XHRcdGdyb3VwTGVnZW5kOiBlbGVtLmNoaWxkcmVuKCBcIi51aS1jb250cm9sZ3JvdXAtbGFiZWxcIiApLmNoaWxkcmVuKCksXHJcblx0XHRcdFx0Y2hpbGRXcmFwcGVyOiBlbGVtLmNoaWxkcmVuKCBcIi51aS1jb250cm9sZ3JvdXAtY29udHJvbHNcIiApXHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl91aSA9IHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0X2NoaWxkV2lkZ2V0czogWyBcImNoZWNrYm94cmFkaW9cIiwgXCJzZWxlY3RtZW51XCIsIFwiYnV0dG9uXCIgXSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6IFwidWktZ3JvdXAtdGhlbWUtXCIgKyB2YWx1ZSApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR1aSA9IHtcclxuXHRcdFx0XHRncm91cExlZ2VuZDogZWxlbS5jaGlsZHJlbiggXCJsZWdlbmRcIiApLFxyXG5cdFx0XHRcdGNoaWxkV3JhcHBlcjogZWxlbVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbnRyb2xncm91cCBcIiArXHJcblx0XHRcdFx0XHRcdFwidWktY29udHJvbGdyb3VwLVwiICtcclxuXHRcdFx0XHRcdFx0XHQoIG9wdHMudHlwZSA9PT0gXCJob3Jpem9udGFsXCIgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIiApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggb3B0cy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0XHQoIG9wdHMuY29ybmVycyA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHRcdCggb3B0cy5taW5pID8gXCJ1aS1taW5pIFwiIDogXCJcIiApIClcclxuXHRcdFx0XHRcdC53cmFwSW5uZXIoIFwiPGRpdiBcIiArXHJcblx0XHRcdFx0XHRcdFwiY2xhc3M9J3VpLWNvbnRyb2xncm91cC1jb250cm9scyBcIiArXHJcblx0XHRcdFx0XHRcdFx0KCBvcHRzLnNoYWRvdyA9PT0gdHJ1ZSA/IFwidWktc2hhZG93XCIgOiBcIlwiICkgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHRcdFx0LmNoaWxkcmVuKClcclxuXHRcdFx0fTtcclxuXHJcblx0XHRpZiAoIHVpLmdyb3VwTGVnZW5kLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdCQoIFwiPGRpdiByb2xlPSdoZWFkaW5nJyBjbGFzcz0ndWktY29udHJvbGdyb3VwLWxhYmVsJz48L2Rpdj5cIiApXHJcblx0XHRcdFx0LmFwcGVuZCggdWkuZ3JvdXBMZWdlbmQgKVxyXG5cdFx0XHRcdC5wcmVwZW5kVG8oIGVsZW0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdWk7XHJcblx0fSxcclxuXHJcblx0X2luaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGNhbGxSZWZyZXNoLCByZXR1cm5WYWx1ZSxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHQvLyBNdXN0IGhhdmUgb25lIG9mIGhvcml6b250YWwgb3IgdmVydGljYWxcclxuXHRcdGlmICggb3B0aW9ucy50eXBlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW1cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29udHJvbGdyb3VwLWhvcml6b250YWwgdWktY29udHJvbGdyb3VwLXZlcnRpY2FsXCIgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAtXCIgKyAoIG9wdGlvbnMudHlwZSA9PT0gXCJob3Jpem9udGFsXCIgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIiApICk7XHJcblx0XHRcdGNhbGxSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIHRoaXMub3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBvcHRpb25zLnRoZW1lICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fdWkuY2hpbGRXcmFwcGVyLnRvZ2dsZUNsYXNzKCBcInVpLXNoYWRvd1wiLCBvcHRpb25zLnNoYWRvdyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5leGNsdWRlSW52aXNpYmxlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5leGNsdWRlSW52aXNpYmxlID0gb3B0aW9ucy5leGNsdWRlSW52aXNpYmxlO1xyXG5cdFx0XHRjYWxsUmVmcmVzaCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuVmFsdWUgPSB0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggY2FsbFJlZnJlc2ggKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHR9LFxyXG5cclxuXHRjb250YWluZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3VpLmNoaWxkV3JhcHBlcjtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciAkZWwgPSB0aGlzLmNvbnRhaW5lcigpLFxyXG5cdFx0XHRlbHMgPSAkZWwuZmluZCggXCIudWktYnRuXCIgKS5ub3QoIFwiLnVpLXNsaWRlci1oYW5kbGVcIiApLFxyXG5cdFx0XHRjcmVhdGUgPSB0aGlzLl9pbml0aWFsUmVmcmVzaDtcclxuXHRcdGlmICggJC5tb2JpbGUuY2hlY2tib3hyYWRpbyApIHtcclxuXHRcdFx0JGVsLmZpbmQoIFwiOm1vYmlsZS1jaGVja2JveHJhZGlvXCIgKS5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYWRkRmlyc3RMYXN0Q2xhc3NlcyggZWxzLFxyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZXhjbHVkZUludmlzaWJsZSA/IHRoaXMuX2dldFZpc2libGVzKCBlbHMsIGNyZWF0ZSApIDogZWxzLFxyXG5cdFx0XHRjcmVhdGUgKTtcclxuXHRcdHRoaXMuX2luaXRpYWxSZWZyZXNoID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0Ly8gQ2F2ZWF0OiBJZiB0aGUgbGVnZW5kIGlzIG5vdCB0aGUgZmlyc3QgY2hpbGQgb2YgdGhlIGNvbnRyb2xncm91cCBhdCBlbmhhbmNlXHJcblx0Ly8gdGltZSwgaXQgd2lsbCBiZSBhZnRlciBfZGVzdHJveSgpLlxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1aSwgYnV0dG9ucyxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHVpID0gdGhpcy5fdWk7XHJcblx0XHRidXR0b25zID0gdGhpcy5lbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAgXCIgK1xyXG5cdFx0XHRcdFwidWktY29udHJvbGdyb3VwLWhvcml6b250YWwgdWktY29udHJvbGdyb3VwLXZlcnRpY2FsIHVpLWNvcm5lci1hbGwgdWktbWluaSBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIG9wdHMudGhlbWUgKSApXHJcblx0XHRcdC5maW5kKCBcIi51aS1idG5cIiApXHJcblx0XHRcdC5ub3QoIFwiLnVpLXNsaWRlci1oYW5kbGVcIiApO1xyXG5cclxuXHRcdHRoaXMuX3JlbW92ZUZpcnN0TGFzdENsYXNzZXMoIGJ1dHRvbnMgKTtcclxuXHJcblx0XHR1aS5ncm91cExlZ2VuZC51bndyYXAoKTtcclxuXHRcdHVpLmNoaWxkV3JhcHBlci5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgKSApO1xyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudG9vbGJhclwiLCB7XHJcblx0XHRpbml0U2VsZWN0b3I6IFwiOmpxbURhdGEocm9sZT0nZm9vdGVyJyksIDpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIsXHJcblxyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHR0aGVtZTogbnVsbCxcclxuXHRcdFx0YWRkQmFja0J0bjogZmFsc2UsXHJcblx0XHRcdGJhY2tCdG5UaGVtZTogbnVsbCxcclxuXHRcdFx0YmFja0J0blRleHQ6IFwiQmFja1wiXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbGVmdGJ0biwgcmlnaHRidG4sXHJcblx0XHRcdFx0cm9sZSA9ICB0aGlzLmVsZW1lbnQuaXMoIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApID8gXCJoZWFkZXJcIiA6IFwiZm9vdGVyXCIsXHJcblx0XHRcdFx0cGFnZSA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTtcclxuXHRcdFx0aWYgKCBwYWdlLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRwYWdlID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHtcclxuXHRcdFx0XHRcdFwicGFnZXNob3dcIjogXCJyZWZyZXNoXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdHJvbGU6IHJvbGUsXHJcblx0XHRcdFx0cGFnZTogcGFnZSxcclxuXHRcdFx0XHRsZWZ0YnRuOiBsZWZ0YnRuLFxyXG5cdFx0XHRcdHJpZ2h0YnRuOiByaWdodGJ0blxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwicm9sZVwiLCByb2xlID09PSBcImhlYWRlclwiID8gXCJiYW5uZXJcIiA6IFwiY29udGVudGluZm9cIiApLmFkZENsYXNzKCBcInVpLVwiICsgcm9sZSApO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdFx0dGhpcy5fc2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0XHR9LFxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvICkge1xyXG5cdFx0XHRpZiAoIG8uYWRkQmFja0J0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUJhY2tCdXR0b24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8uYmFja0J0blRoZW1lICE9IG51bGwgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0XHQuZmluZCggXCIudWktdG9vbGJhci1iYWNrLWJ0blwiIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4gdWktYnRuLVwiICsgby5iYWNrQnRuVGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8uYmFja0J0blRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCIudWktdG9vbGJhci1iYWNrLWJ0biAudWktYnRuLXRleHRcIiApLnRleHQoIG8uYmFja0J0blRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8udGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR2YXIgY3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdFx0XHRuZXdUaGVtZSA9IG8udGhlbWUgPyBvLnRoZW1lIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1iYXItXCIgKyBjdXJyZW50VGhlbWUgKS5hZGRDbGFzcyggXCJ1aS1iYXItXCIgKyBuZXdUaGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggbyApO1xyXG5cdFx0fSxcclxuXHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiApIHtcclxuXHRcdFx0XHR0aGlzLl9hZGRIZWFkZXJCdXR0b25DbGFzc2VzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhdGhpcy5wYWdlICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldFJlbGF0aXZlKCk7XHJcblx0XHRcdFx0aWYgKCB0aGlzLnJvbGUgPT09IFwiZm9vdGVyXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuYXBwZW5kVG8oIFwiYm9keVwiICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fdXBkYXRlQmFja0J1dHRvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9hZGRIZWFkaW5nQ2xhc3NlcygpO1xyXG5cdFx0XHR0aGlzLl9idG5NYXJrdXAoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly93ZSBvbmx5IHdhbnQgdGhpcyB0byBydW4gb24gbm9uIGZpeGVkIHRvb2xiYXJzIHNvIG1ha2UgaXQgZWFzeSB0byBvdmVycmlkZVxyXG5cdFx0X3NldFJlbGF0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggXCJbZGF0YS1cIisgJC5tb2JpbGUubnMgKyBcInJvbGU9J3BhZ2UnXVwiICkuY3NzKHsgXCJwb3NpdGlvblwiOiBcInJlbGF0aXZlXCIgfSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40LiBBcyBmcm9tIDEuNSBidXR0b24gY2xhc3NlcyBoYXZlIHRvIGJlIHByZXNlbnQgaW4gdGhlIG1hcmt1cC5cclxuXHRcdF9idG5NYXJrdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuY2hpbGRyZW4oIFwiYVwiIClcclxuXHRcdFx0XHQuZmlsdGVyKCBcIjpub3QoW2RhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0nbm9uZSddKVwiIClcclxuXHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGVcIiwgXCJidXR0b25cIiApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjcmVhdGVcIiApO1xyXG5cdFx0fSxcclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40LiBBcyBmcm9tIDEuNSB1aS1idG4tbGVmdC9yaWdodCBjbGFzc2VzIGhhdmUgdG8gYmUgcHJlc2VudCBpbiB0aGUgbWFya3VwLlxyXG5cdFx0X2FkZEhlYWRlckJ1dHRvbkNsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaGVhZGVyQW5jaG9ycyA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJhLCBidXR0b25cIiApO1xyXG5cclxuXHRcdFx0Ly8gRG8gbm90IG1pc3Rha2UgYSBiYWNrIGJ1dHRvbiBmb3IgYSBsZWZ0IHRvb2xiYXIgYnV0dG9uXHJcblx0XHRcdHRoaXMubGVmdGJ0biA9IGhlYWRlckFuY2hvcnMuaGFzQ2xhc3MoIFwidWktYnRuLWxlZnRcIiApICYmXHJcblx0XHRcdFx0IWhlYWRlckFuY2hvcnMuaGFzQ2xhc3MoIFwidWktdG9vbGJhci1iYWNrLWJ0blwiICk7XHJcblxyXG5cdFx0XHR0aGlzLnJpZ2h0YnRuID0gaGVhZGVyQW5jaG9ycy5oYXNDbGFzcyggXCJ1aS1idG4tcmlnaHRcIiApO1xyXG5cclxuXHRcdFx0Ly8gRmlsdGVyIG91dCByaWdodCBidXR0b25zIGFuZCBiYWNrIGJ1dHRvbnNcclxuXHRcdFx0dGhpcy5sZWZ0YnRuID0gdGhpcy5sZWZ0YnRuIHx8XHJcblx0XHRcdFx0aGVhZGVyQW5jaG9ycy5lcSggMCApXHJcblx0XHRcdFx0XHQubm90KCBcIi51aS1idG4tcmlnaHQsLnVpLXRvb2xiYXItYmFjay1idG5cIiApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLWxlZnRcIiApXHJcblx0XHRcdFx0XHQubGVuZ3RoO1xyXG5cclxuXHRcdFx0dGhpcy5yaWdodGJ0biA9IHRoaXMucmlnaHRidG4gfHwgaGVhZGVyQW5jaG9ycy5lcSggMSApLmFkZENsYXNzKCBcInVpLWJ0bi1yaWdodFwiICkubGVuZ3RoO1xyXG5cdFx0fSxcclxuXHRcdF91cGRhdGVCYWNrQnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGJhY2tCdXR0b24sXHJcblx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHR0aGVtZSA9IG9wdGlvbnMuYmFja0J0blRoZW1lIHx8IG9wdGlvbnMudGhlbWU7XHJcblxyXG5cdFx0XHQvLyBSZXRyaWV2ZSB0aGUgYmFjayBidXR0b24gb3IgY3JlYXRlIGEgbmV3LCBlbXB0eSBvbmVcclxuXHRcdFx0YmFja0J1dHRvbiA9IHRoaXMuX2JhY2tCdXR0b24gPSAoIHRoaXMuX2JhY2tCdXR0b24gfHwge30gKTtcclxuXHJcblx0XHRcdC8vIFdlIGFkZCBhIGJhY2sgYnV0dG9uIG9ubHkgaWYgdGhlIG9wdGlvbiB0byBkbyBzbyBpcyBvblxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5hZGRCYWNrQnRuICYmXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBtdXN0IGFsc28gYmUgYSBoZWFkZXIgdG9vbGJhclxyXG5cdFx0XHRcdFx0dGhpcy5yb2xlID09PSBcImhlYWRlclwiICYmXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlcmUgbXVzdCBiZSBtdWx0aXBsZSBwYWdlcyBpbiB0aGUgRE9NXHJcblx0XHRcdFx0XHQkKCBcIi51aS1wYWdlXCIgKS5sZW5ndGggPiAxICYmXHJcblx0XHRcdFx0XHQoIHRoaXMucGFnZSA/XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgdG9vbGJhciBpcyBpbnRlcm5hbCB0aGUgcGFnZSdzIFVSTCBtdXN0IGRpZmZlciBmcm9tIHRoZSBoYXNoXHJcblx0XHRcdFx0XHRcdCggdGhpcy5wYWdlWyAwIF0uZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidXJsXCIgKSAhPT1cclxuXHRcdFx0XHRcdFx0XHQkLm1vYmlsZS5wYXRoLnN0cmlwSGFzaCggbG9jYXRpb24uaGFzaCApICkgOlxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBpZiB0aGUgdG9vbGJhciBpcyBleHRlcm5hbCB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IG9uZVxyXG5cdFx0XHRcdFx0XHQvLyBoaXN0b3J5IGl0ZW0gdG8gd2hpY2ggb25lIGNhbiBnbyBiYWNrXHJcblx0XHRcdFx0XHRcdCggJC5tb2JpbGUubmF2aWdhdGUgJiYgJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeSAmJlxyXG5cdFx0XHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICkgKSAmJlxyXG5cclxuXHRcdFx0XHRcdC8vIFRoZSB0b29sYmFyIGRvZXMgbm90IGhhdmUgYSBsZWZ0IGJ1dHRvblxyXG5cdFx0XHRcdFx0IXRoaXMubGVmdGJ0biApIHtcclxuXHJcblx0XHRcdFx0Ly8gU2tpcCBiYWNrIGJ1dHRvbiBjcmVhdGlvbiBpZiBvbmUgaXMgYWxyZWFkeSBwcmVzZW50XHJcblx0XHRcdFx0aWYgKCAhYmFja0J1dHRvbi5hdHRhY2hlZCApIHtcclxuXHRcdFx0XHRcdHRoaXMuYmFja0J1dHRvbiA9IGJhY2tCdXR0b24uZWxlbWVudCA9ICggYmFja0J1dHRvbi5lbGVtZW50IHx8XHJcblx0XHRcdFx0XHRcdCQoIFwiPGEgcm9sZT0nYnV0dG9uJyBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCk7JyBcIiArXHJcblx0XHRcdFx0XHRcdFx0XCJjbGFzcz0ndWktYnRuIHVpLWNvcm5lci1hbGwgdWktc2hhZG93IHVpLWJ0bi1sZWZ0IFwiICtcclxuXHRcdFx0XHRcdFx0XHRcdCggdGhlbWUgPyBcInVpLWJ0bi1cIiArIHRoZW1lICsgXCIgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ1aS10b29sYmFyLWJhY2stYnRuIHVpLWljb24tY2FyYXQtbCB1aS1idG4taWNvbi1sZWZ0JyBcIiArXHJcblx0XHRcdFx0XHRcdFx0XCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbD0nYmFjayc+XCIgKyBvcHRpb25zLmJhY2tCdG5UZXh0ICtcclxuXHRcdFx0XHRcdFx0XHRcIjwvYT5cIiApIClcclxuXHRcdFx0XHRcdFx0XHQucHJlcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0XHRcdGJhY2tCdXR0b24uYXR0YWNoZWQgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHdlIGFyZSBub3QgYWRkaW5nIGEgYmFjayBidXR0b24sIHRoZW4gcmVtb3ZlIHRoZSBvbmUgcHJlc2VudCwgaWYgYW55XHJcblx0XHRcdH0gZWxzZSBpZiAoIGJhY2tCdXR0b24uZWxlbWVudCApIHtcclxuXHRcdFx0XHRiYWNrQnV0dG9uLmVsZW1lbnQuZGV0YWNoKCk7XHJcblx0XHRcdFx0YmFja0J1dHRvbi5hdHRhY2hlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0X2FkZEhlYWRpbmdDbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIiApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRpdGxlXCIgKVxyXG5cdFx0XHRcdC8vIFJlZ2FyZGxlc3Mgb2YgaCBlbGVtZW50IG51bWJlciBpbiBzcmMsIGl0IGJlY29tZXMgaDEgZm9yIHRoZSBlbmhhbmNlZCBwYWdlXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0XCJyb2xlXCI6IFwiaGVhZGluZ1wiLFxyXG5cdFx0XHRcdFx0XCJhcmlhLWxldmVsXCI6IFwiMVwiXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY3VycmVudFRoZW1lO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIiApXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXRpdGxlXCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1sZXZlbFwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiYSwgYnV0dG9uXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodCB1aS1idG4gdWktc2hhZG93IHVpLWNvcm5lci1hbGxcIiApO1xyXG5cdFx0XHRcdGlmICggdGhpcy5iYWNrQnV0dG9uKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2tCdXR0b24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjdXJyZW50VGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIjtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJhci1cIiArIGN1cnJlbnRUaGVtZSApO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLVwiICsgdGhpcy5yb2xlICkucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudG9vbGJhclwiLCAkLm1vYmlsZS50b29sYmFyLCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHBvc2l0aW9uOm51bGwsXHJcblx0XHRcdHZpc2libGVPblBhZ2VTaG93OiB0cnVlLFxyXG5cdFx0XHRkaXNhYmxlUGFnZVpvb206IHRydWUsXHJcblx0XHRcdHRyYW5zaXRpb246IFwic2xpZGVcIiwgLy9jYW4gYmUgbm9uZSwgZmFkZSwgc2xpZGUgKHNsaWRlIG1hcHMgdG8gc2xpZGV1cCBvciBzbGlkZWRvd24pXHJcblx0XHRcdGZ1bGxzY3JlZW46IGZhbHNlLFxyXG5cdFx0XHR0YXBUb2dnbGU6IHRydWUsXHJcblx0XHRcdHRhcFRvZ2dsZUJsYWNrbGlzdDogXCJhLCBidXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCAudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkLCAudWktZmxpcHN3aXRjaCwgLnVpLXBvcHVwLCAudWktcGFuZWwsIC51aS1wYW5lbC1kaXNtaXNzLW9wZW5cIixcclxuXHRcdFx0aGlkZUR1cmluZ0ZvY3VzOiBcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0XCIsXHJcblx0XHRcdHVwZGF0ZVBhZ2VQYWRkaW5nOiB0cnVlLFxyXG5cdFx0XHR0cmFja1BlcnNpc3RlbnRUb29sYmFyczogdHJ1ZSxcclxuXHJcblx0XHRcdC8vIEJyb3dzZXIgZGV0ZWN0aW9uISBXZWVlZSwgaGVyZSB3ZSBnby4uLlxyXG5cdFx0XHQvLyBVbmZvcnR1bmF0ZWx5LCBwb3NpdGlvbjpmaXhlZCBpcyBjb3N0bHksIG5vdCB0byBtZW50aW9uIHByb2JhYmx5IGltcG9zc2libGUsIHRvIGZlYXR1cmUtZGV0ZWN0IGFjY3VyYXRlbHkuXHJcblx0XHRcdC8vIFNvbWUgdGVzdHMgZXhpc3QsIGJ1dCB0aGV5IGN1cnJlbnRseSByZXR1cm4gZmFsc2UgcmVzdWx0cyBpbiBjcml0aWNhbCBkZXZpY2VzIGFuZCBicm93c2Vycywgd2hpY2ggY291bGQgbGVhZCB0byBhIGJyb2tlbiBleHBlcmllbmNlLlxyXG5cdFx0XHQvLyBUZXN0aW5nIGZpeGVkIHBvc2l0aW9uaW5nIGlzIGFsc28gcHJldHR5IG9idHJ1c2l2ZSB0byBwYWdlIGxvYWQsIHJlcXVpcmluZyBpbmplY3RlZCBlbGVtZW50cyBhbmQgc2Nyb2xsaW5nIHRoZSB3aW5kb3dcclxuXHRcdFx0Ly8gVGhlIGZvbGxvd2luZyBmdW5jdGlvbiBzZXJ2ZXMgdG8gcnVsZSBvdXQgc29tZSBwb3B1bGFyIGJyb3dzZXJzIHdpdGgga25vd24gZml4ZWQtcG9zaXRpb25pbmcgaXNzdWVzXHJcblx0XHRcdC8vIFRoaXMgaXMgYSBwbHVnaW4gb3B0aW9uIGxpa2UgYW55IG90aGVyLCBzbyBmZWVsIGZyZWUgdG8gaW1wcm92ZSBvciBvdmVyd3JpdGUgaXRcclxuXHRcdFx0c3VwcG9ydEJsYWNrbGlzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICEkLnN1cHBvcnQuZml4ZWRQb3NpdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0dGhpcy5wYWdlY29udGFpbmVyID0gJCggXCI6bW9iaWxlLXBhZ2Vjb250YWluZXJcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmICF0aGlzLm9wdGlvbnMuc3VwcG9ydEJsYWNrbGlzdCgpICkge1xyXG5cdFx0XHRcdHRoaXMuX21ha2VGaXhlZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9tYWtlRml4ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktXCIrIHRoaXMucm9sZSArXCItZml4ZWRcIiApO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVBhZ2VQYWRkaW5nKCk7XHJcblx0XHRcdHRoaXMuX2FkZFRyYW5zaXRpb25DbGFzcygpO1xyXG5cdFx0XHR0aGlzLl9iaW5kUGFnZUV2ZW50cygpO1xyXG5cdFx0XHR0aGlzLl9iaW5kVG9nZ2xlSGFuZGxlcnMoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvICkge1xyXG5cdFx0XHRpZiAoIG8ucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiB0aGlzLm9wdGlvbnMucG9zaXRpb24gIT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHR0aGlzLl9tYWtlRml4ZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmICF0aGlzLm9wdGlvbnMuc3VwcG9ydEJsYWNrbGlzdCgpICkge1xyXG5cdFx0XHRcdHZhciAkcGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiAoICQoXCIudWktcGFnZS1hY3RpdmVcIikubGVuZ3RoID4gMCApPyAkKFwiLnVpLXBhZ2UtYWN0aXZlXCIpOiAkKFwiLnVpLXBhZ2VcIikuZXEoMCk7XHJcblxyXG5cdFx0XHRcdGlmICggby5mdWxsc2NyZWVuICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdGlmICggby5mdWxsc2NyZWVuICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktXCIrIHRoaXMucm9sZSArXCItZnVsbHNjcmVlblwiICk7XHJcblx0XHRcdFx0XHRcdCRwYWdlLmFkZENsYXNzKCBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIElmIG5vdCBmdWxsc2NyZWVuLCBhZGQgY2xhc3MgdG8gcGFnZSB0byBzZXQgdG9wIG9yIGJvdHRvbSBwYWRkaW5nXHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLVwiKyB0aGlzLnJvbGUgK1wiLWZ1bGxzY3JlZW5cIiApO1xyXG5cdFx0XHRcdFx0XHQkcGFnZS5yZW1vdmVDbGFzcyggXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZnVsbHNjcmVlblwiICkuYWRkQ2xhc3MoIFwidWktcGFnZS1cIiArIHRoaXMucm9sZSsgXCItZml4ZWRcIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9zdXBlcihvKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2FkZFRyYW5zaXRpb25DbGFzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB0Y2xhc3MgPSB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbjtcclxuXHJcblx0XHRcdGlmICggdGNsYXNzICYmIHRjbGFzcyAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0Ly8gdXNlIGFwcHJvcHJpYXRlIHNsaWRlIGZvciBoZWFkZXIgb3IgZm9vdGVyXHJcblx0XHRcdFx0aWYgKCB0Y2xhc3MgPT09IFwic2xpZGVcIiApIHtcclxuXHRcdFx0XHRcdHRjbGFzcyA9IHRoaXMuZWxlbWVudC5oYXNDbGFzcyggXCJ1aS1oZWFkZXJcIiApID8gXCJzbGlkZWRvd25cIiA6IFwic2xpZGV1cFwiO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0Y2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfYmluZFBhZ2VFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApOiB0aGlzLmRvY3VtZW50O1xyXG5cdFx0XHQvL3BhZ2UgZXZlbnQgYmluZGluZ3NcclxuXHRcdFx0Ly8gRml4ZWQgdG9vbGJhcnMgcmVxdWlyZSBwYWdlIHpvb20gdG8gYmUgZGlzYWJsZWQsIG90aGVyd2lzZSB1c2FiaWxpdHkgaXNzdWVzIGNyb3AgdXBcclxuXHRcdFx0Ly8gVGhpcyBtZXRob2QgaXMgbWVhbnQgdG8gZGlzYWJsZSB6b29tIHdoaWxlIGEgZml4ZWQtcG9zaXRpb25lZCB0b29sYmFyIHBhZ2UgaXMgdmlzaWJsZVxyXG5cdFx0XHR0aGlzLl9vbiggcGFnZSAsIHtcclxuXHRcdFx0XHRcInBhZ2ViZWZvcmVzaG93XCI6IFwiX2hhbmRsZVBhZ2VCZWZvcmVTaG93XCIsXHJcblx0XHRcdFx0XCJ3ZWJraXRBbmltYXRpb25TdGFydFwiOlwiX2hhbmRsZUFuaW1hdGlvblN0YXJ0XCIsXHJcblx0XHRcdFx0XCJhbmltYXRpb25zdGFydFwiOlwiX2hhbmRsZUFuaW1hdGlvblN0YXJ0XCIsXHJcblx0XHRcdFx0XCJ1cGRhdGVsYXlvdXRcIjogXCJfaGFuZGxlQW5pbWF0aW9uU3RhcnRcIixcclxuXHRcdFx0XHRcInBhZ2VzaG93XCI6IFwiX2hhbmRsZVBhZ2VTaG93XCIsXHJcblx0XHRcdFx0XCJwYWdlYmVmb3JlaGlkZVwiOiBcIl9oYW5kbGVQYWdlQmVmb3JlSGlkZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uKCApIHtcclxuXHRcdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XHJcblx0XHRcdGlmICggby5kaXNhYmxlUGFnZVpvb20gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhby52aXNpYmxlT25QYWdlU2hvdyApIHtcclxuXHRcdFx0XHR0aGlzLmhpZGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlQW5pbWF0aW9uU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy51cGRhdGVQYWdlUGFkZGluZyApIHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZVBhZ2VQYWRkaW5nKCAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogXCIudWktcGFnZS1hY3RpdmVcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVQYWdlU2hvdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMudXBkYXRlUGFnZVBhZGRpbmcoICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiBcIi51aS1wYWdlLWFjdGl2ZVwiICk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnVwZGF0ZVBhZ2VQYWRkaW5nICkge1xyXG5cdFx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBcInRocm90dGxlZHJlc2l6ZVwiOiBcInVwZGF0ZVBhZ2VQYWRkaW5nXCIgfSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVQYWdlQmVmb3JlSGlkZTogZnVuY3Rpb24oIGUsIHVpICkge1xyXG5cdFx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHR0aGlzRm9vdGVyLCB0aGlzSGVhZGVyLCBuZXh0Rm9vdGVyLCBuZXh0SGVhZGVyO1xyXG5cclxuXHRcdFx0aWYgKCBvLmRpc2FibGVQYWdlWm9vbSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby51cGRhdGVQYWdlUGFkZGluZyApIHtcclxuXHRcdFx0XHR0aGlzLl9vZmYoIHRoaXMud2luZG93LCBcInRocm90dGxlZHJlc2l6ZVwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggby50cmFja1BlcnNpc3RlbnRUb29sYmFycyApIHtcclxuXHRcdFx0XHR0aGlzRm9vdGVyID0gJCggXCIudWktZm9vdGVyLWZpeGVkOmpxbURhdGEoaWQpXCIsIHRoaXMucGFnZSApO1xyXG5cdFx0XHRcdHRoaXNIZWFkZXIgPSAkKCBcIi51aS1oZWFkZXItZml4ZWQ6anFtRGF0YShpZClcIiwgdGhpcy5wYWdlICk7XHJcblx0XHRcdFx0bmV4dEZvb3RlciA9IHRoaXNGb290ZXIubGVuZ3RoICYmIHVpLm5leHRQYWdlICYmICQoIFwiLnVpLWZvb3Rlci1maXhlZDpqcW1EYXRhKGlkPSdcIiArIHRoaXNGb290ZXIuanFtRGF0YSggXCJpZFwiICkgKyBcIicpXCIsIHVpLm5leHRQYWdlICkgfHwgJCgpO1xyXG5cdFx0XHRcdG5leHRIZWFkZXIgPSB0aGlzSGVhZGVyLmxlbmd0aCAmJiB1aS5uZXh0UGFnZSAmJiAkKCBcIi51aS1oZWFkZXItZml4ZWQ6anFtRGF0YShpZD0nXCIgKyB0aGlzSGVhZGVyLmpxbURhdGEoIFwiaWRcIiApICsgXCInKVwiLCB1aS5uZXh0UGFnZSApIHx8ICQoKTtcclxuXHJcblx0XHRcdFx0aWYgKCBuZXh0Rm9vdGVyLmxlbmd0aCB8fCBuZXh0SGVhZGVyLmxlbmd0aCApIHtcclxuXHJcblx0XHRcdFx0XHRuZXh0Rm9vdGVyLmFkZCggbmV4dEhlYWRlciApLmFwcGVuZFRvKCAkLm1vYmlsZS5wYWdlQ29udGFpbmVyICk7XHJcblxyXG5cdFx0XHRcdFx0dWkubmV4dFBhZ2Uub25lKCBcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRuZXh0SGVhZGVyLnByZXBlbmRUbyggdGhpcyApO1xyXG5cdFx0XHRcdFx0XHRuZXh0Rm9vdGVyLmFwcGVuZFRvKCB0aGlzICk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3Zpc2libGU6IHRydWUsXHJcblxyXG5cdFx0Ly8gVGhpcyB3aWxsIHNldCB0aGUgY29udGVudCBlbGVtZW50J3MgdG9wIG9yIGJvdHRvbSBwYWRkaW5nIGVxdWFsIHRvIHRoZSB0b29sYmFyJ3MgaGVpZ2h0XHJcblx0XHR1cGRhdGVQYWdlUGFkZGluZzogZnVuY3Rpb24oIHRiUGFnZSApIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRoZWFkZXIgPSAoIHRoaXMucm9sZSA9PT1cImhlYWRlclwiICksXHJcblx0XHRcdFx0cG9zID0gcGFyc2VGbG9hdCggJGVsLmNzcyggaGVhZGVyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gVGhpcyBiZWhhdmlvciBvbmx5IGFwcGxpZXMgdG8gXCJmaXhlZFwiLCBub3QgXCJmdWxsc2NyZWVuXCJcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbiApIHsgcmV0dXJuOyB9XHJcblx0XHRcdC8vIHRiUGFnZSBhcmd1bWVudCBjYW4gYmUgYSBQYWdlIG9iamVjdCBvciBhbiBldmVudCwgaWYgY29taW5nIGZyb20gdGhyb3R0bGVkIHJlc2l6ZS5cclxuXHRcdFx0dGJQYWdlID0gKCB0YlBhZ2UgJiYgdGJQYWdlLnR5cGUgPT09IHVuZGVmaW5lZCAmJiB0YlBhZ2UgKSB8fCB0aGlzLnBhZ2UgfHwgJGVsLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApO1xyXG5cdFx0XHR0YlBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogXCIudWktcGFnZS1hY3RpdmVcIjtcclxuXHRcdFx0JCggdGJQYWdlICkuY3NzKCBcInBhZGRpbmctXCIgKyAoIGhlYWRlciA/IFwidG9wXCIgOiBcImJvdHRvbVwiICksICRlbC5vdXRlckhlaWdodCgpICsgcG9zICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF91c2VUcmFuc2l0aW9uOiBmdW5jdGlvbiggbm90cmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgJHdpbiA9IHRoaXMud2luZG93LFxyXG5cdFx0XHRcdCRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRzY3JvbGwgPSAkd2luLnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRcdGVsSGVpZ2h0ID0gJGVsLmhlaWdodCgpLFxyXG5cdFx0XHRcdHBIZWlnaHQgPSAoICEhdGhpcy5wYWdlICk/ICRlbC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5oZWlnaHQoKTokKFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmhlaWdodCgpLFxyXG5cdFx0XHRcdHZpZXdwb3J0SGVpZ2h0ID0gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gIW5vdHJhbnNpdGlvbiAmJlxyXG5cdFx0XHRcdCggdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gJiYgdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gIT09IFwibm9uZVwiICYmXHJcblx0XHRcdFx0KFxyXG5cdFx0XHRcdFx0KCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgJiYgIXRoaXMub3B0aW9ucy5mdWxsc2NyZWVuICYmIHNjcm9sbCA+IGVsSGVpZ2h0ICkgfHxcclxuXHRcdFx0XHRcdCggdGhpcy5yb2xlID09PSBcImZvb3RlclwiICYmICF0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbiAmJiBzY3JvbGwgKyB2aWV3cG9ydEhlaWdodCA8IHBIZWlnaHQgLSBlbEhlaWdodCApXHJcblx0XHRcdFx0KSB8fCB0aGlzLm9wdGlvbnMuZnVsbHNjcmVlblxyXG5cdFx0XHRcdCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHNob3c6IGZ1bmN0aW9uKCBub3RyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciBoaWRlQ2xhc3MgPSBcInVpLWZpeGVkLWhpZGRlblwiLFxyXG5cdFx0XHRcdCRlbCA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHRcdGlmICggdGhpcy5fdXNlVHJhbnNpdGlvbiggbm90cmFuc2l0aW9uICkgKSB7XHJcblx0XHRcdFx0JGVsXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwib3V0IFwiICsgaGlkZUNsYXNzIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJpblwiIClcclxuXHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdCRlbC5yZW1vdmVDbGFzcyggXCJpblwiICk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQkZWwucmVtb3ZlQ2xhc3MoIGhpZGVDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3Zpc2libGUgPSB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWRlOiBmdW5jdGlvbiggbm90cmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgaGlkZUNsYXNzID0gXCJ1aS1maXhlZC1oaWRkZW5cIixcclxuXHRcdFx0XHQkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0Ly8gaWYgaXQncyBhIHNsaWRlIHRyYW5zaXRpb24sIG91ciBuZXcgdHJhbnNpdGlvbnMgbmVlZCB0aGUgcmV2ZXJzZSBjbGFzcyBhcyB3ZWxsIHRvIHNsaWRlIG91dHdhcmRcclxuXHRcdFx0XHRvdXRjbGFzcyA9IFwib3V0XCIgKyAoIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcInNsaWRlXCIgPyBcIiByZXZlcnNlXCIgOiBcIlwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX3VzZVRyYW5zaXRpb24oIG5vdHJhbnNpdGlvbiApICkge1xyXG5cdFx0XHRcdCRlbFxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBvdXRjbGFzcyApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwiaW5cIiApXHJcblx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdCRlbC5hZGRDbGFzcyggaGlkZUNsYXNzICkucmVtb3ZlQ2xhc3MoIG91dGNsYXNzICk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQkZWwuYWRkQ2xhc3MoIGhpZGVDbGFzcyApLnJlbW92ZUNsYXNzKCBvdXRjbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpc1sgdGhpcy5fdmlzaWJsZSA/IFwiaGlkZVwiIDogXCJzaG93XCIgXSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfYmluZFRvZ2dsZUhhbmRsZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG8gPSBzZWxmLm9wdGlvbnMsXHJcblx0XHRcdFx0ZGVsYXlTaG93LCBkZWxheUhpZGUsXHJcblx0XHRcdFx0aXNWaXNpYmxlID0gdHJ1ZSxcclxuXHRcdFx0XHRwYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6ICQoXCIudWktcGFnZVwiKTtcclxuXHJcblx0XHRcdC8vIHRhcCB0b2dnbGVcclxuXHRcdFx0cGFnZVxyXG5cdFx0XHRcdC5iaW5kKCBcInZjbGlja1wiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdGlmICggby50YXBUb2dnbGUgJiYgISQoIGUudGFyZ2V0ICkuY2xvc2VzdCggby50YXBUb2dnbGVCbGFja2xpc3QgKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYudG9nZ2xlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYmluZCggXCJmb2N1c2luIGZvY3Vzb3V0XCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0Ly90aGlzIGhpZGVzIHRoZSB0b29sYmFycyBvbiBhIGtleWJvYXJkIHBvcCB0byBnaXZlIG1vcmUgc2NyZWVuIHJvb20gYW5kIHByZXZlbnQgaW9zIGJ1ZyB3aGljaFxyXG5cdFx0XHRcdFx0Ly9wb3NpdGlvbnMgZml4ZWQgdG9vbGJhcnMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2NyZWVuIG9uIHBvcCBpZiB0aGUgaW5wdXQgaXMgbmVhciB0aGUgdG9wIG9yXHJcblx0XHRcdFx0XHQvL2JvdHRvbSBvZiB0aGUgc2NyZWVuIGFkZHJlc3NlcyBpc3N1ZXMgIzQ0MTAgRm9vdGVyIG5hdmJhciBtb3ZlcyB1cCB3aGVuIGNsaWNraW5nIG9uIGEgdGV4dGJveCBpbiBhbiBBbmRyb2lkIGVudmlyb25tZW50XHJcblx0XHRcdFx0XHQvL2FuZCBpc3N1ZSAjNDExMyBIZWFkZXIgYW5kIGZvb3RlciBjaGFuZ2UgdGhlaXIgcG9zaXRpb24gYWZ0ZXIga2V5Ym9hcmQgcG9wdXAgLSBpT1NcclxuXHRcdFx0XHRcdC8vYW5kIGlzc3VlICM0NDEwIEZvb3RlciBuYXZiYXIgbW92ZXMgdXAgd2hlbiBjbGlja2luZyBvbiBhIHRleHRib3ggaW4gYW4gQW5kcm9pZCBlbnZpcm9ubWVudFxyXG5cdFx0XHRcdFx0aWYgKCBzY3JlZW4ud2lkdGggPCAxMDI1ICYmICQoIGUudGFyZ2V0ICkuaXMoIG8uaGlkZUR1cmluZ0ZvY3VzICkgJiYgISQoIGUudGFyZ2V0ICkuY2xvc2VzdCggXCIudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIgKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdC8vRml4IGZvciBpc3N1ZSAjNDcyNCBNb3ZpbmcgdGhyb3VnaCBmb3JtIGluIE1vYmlsZSBTYWZhcmkgd2l0aCBcIk5leHRcIiBhbmQgXCJQcmV2aW91c1wiIHN5c3RlbVxyXG5cdFx0XHRcdFx0XHQvL2NvbnRyb2xzIGNhdXNlcyBmaXhlZCBwb3NpdGlvbiwgdGFwLXRvZ2dsZSBmYWxzZSBIZWFkZXIgdG8gcmV2ZWFsIGl0c2VsZlxyXG5cdFx0XHRcdFx0XHQvLyBpc1Zpc2libGUgaW5zdGVhZCBvZiBzZWxmLl92aXNpYmxlIGJlY2F1c2UgdGhlIGZvY3VzaW4gYW5kIGZvY3Vzb3V0IGV2ZW50cyBmaXJlIHR3aWNlIGF0IHRoZSBzYW1lIHRpbWVcclxuXHRcdFx0XHRcdFx0Ly8gQWxzbyB1c2UgYSBkZWxheSBmb3IgaGlkaW5nIHRoZSB0b29sYmFycyBiZWNhdXNlIG9uIEFuZHJvaWQgbmF0aXZlIGJyb3dzZXIgZm9jdXNpbiBpcyBkaXJlY2x0eSBmb2xsb3dlZFxyXG5cdFx0XHRcdFx0XHQvLyBieSBhIGZvY3Vzb3V0IHdoZW4gYSBuYXRpdmUgc2VsZWN0cyBvcGVucyBhbmQgdGhlIG90aGVyIHdheSBhcm91bmQgd2hlbiBpdCBjbG9zZXMuXHJcblx0XHRcdFx0XHRcdGlmICggZS50eXBlID09PSBcImZvY3Vzb3V0XCIgJiYgIWlzVmlzaWJsZSApIHtcclxuXHRcdFx0XHRcdFx0XHRpc1Zpc2libGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdC8vd2FpdCBmb3IgdGhlIHN0YWNrIHRvIHVud2luZCBhbmQgc2VlIGlmIHdlIGhhdmUganVtcGVkIHRvIGFub3RoZXIgaW5wdXRcclxuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIGRlbGF5SGlkZSApO1xyXG5cdFx0XHRcdFx0XHRcdGRlbGF5U2hvdyA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5zaG93KCk7XHJcblx0XHRcdFx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBlLnR5cGUgPT09IFwiZm9jdXNpblwiICYmICEhaXNWaXNpYmxlICkge1xyXG5cdFx0XHRcdFx0XHRcdC8vaWYgd2UgaGF2ZSBqdW1wZWQgdG8gYW5vdGhlciBpbnB1dCBjbGVhciB0aGUgdGltZSBvdXQgdG8gY2FuY2VsIHRoZSBzaG93LlxyXG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCggZGVsYXlTaG93ICk7XHJcblx0XHRcdFx0XHRcdFx0aXNWaXNpYmxlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0ZGVsYXlIaWRlID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmhpZGUoKTtcclxuXHRcdFx0XHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldFJlbGF0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiAhPT0gXCJmaXhlZFwiICl7XHJcblx0XHRcdFx0JCggXCJbZGF0YS1cIisgJC5tb2JpbGUubnMgKyBcInJvbGU9J3BhZ2UnXVwiICkuY3NzKHsgXCJwb3NpdGlvblwiOiBcInJlbGF0aXZlXCIgfSk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFnZUNsYXNzZXMsIHRvb2xiYXJDbGFzc2VzLCBoYXNGaXhlZCwgaGVhZGVyLCBoYXNGdWxsc2NyZWVuLFxyXG5cdFx0XHRcdHBhZ2UgPSB0aGlzLnBhZ2Vjb250YWluZXIucGFnZWNvbnRhaW5lciggXCJnZXRBY3RpdmVQYWdlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0aGFzRml4ZWQgPSAkKCAgXCJib2R5Pi51aS1cIiArIHRoaXMucm9sZSArIFwiLWZpeGVkXCIgKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGQoIHBhZ2UuZmluZCggXCIudWktXCIgKyB0aGlzLm9wdGlvbnMucm9sZSArIFwiLWZpeGVkXCIgKSApXHJcblx0XHRcdFx0XHRcdFx0Lm5vdCggdGhpcy5lbGVtZW50ICkubGVuZ3RoID4gMDtcclxuXHRcdFx0XHRoYXNGdWxsc2NyZWVuID0gJCggIFwiYm9keT4udWktXCIgKyB0aGlzLnJvbGUgKyBcIi1maXhlZFwiIClcclxuXHRcdFx0XHRcdFx0XHQuYWRkKCBwYWdlLmZpbmQoIFwiLnVpLVwiICsgdGhpcy5vcHRpb25zLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCIgKSApXHJcblx0XHRcdFx0XHRcdFx0Lm5vdCggdGhpcy5lbGVtZW50ICkubGVuZ3RoID4gMDtcclxuXHRcdFx0XHR0b29sYmFyQ2xhc3NlcyA9ICBcInVpLWhlYWRlci1maXhlZCB1aS1mb290ZXItZml4ZWQgdWktaGVhZGVyLWZ1bGxzY3JlZW4gaW4gb3V0XCIgK1xyXG5cdFx0XHRcdFx0XCIgdWktZm9vdGVyLWZ1bGxzY3JlZW4gZmFkZSBzbGlkZWRvd24gc2xpZGV1cCB1aS1maXhlZC1oaWRkZW5cIjtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRvb2xiYXJDbGFzc2VzICk7XHJcblx0XHRcdFx0aWYgKCAhaGFzRnVsbHNjcmVlbiApIHtcclxuXHRcdFx0XHRcdHBhZ2VDbGFzc2VzID0gXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZnVsbHNjcmVlblwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoICFoYXNGaXhlZCApIHtcclxuXHRcdFx0XHRcdGhlYWRlciA9IHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIjtcclxuXHRcdFx0XHRcdHBhZ2VDbGFzc2VzICs9IFwiIHVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1maXhlZFwiO1xyXG5cdFx0XHRcdFx0cGFnZS5jc3MoIFwicGFkZGluZy1cIiArICggaGVhZGVyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCIgKSwgXCJcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwYWdlLnJlbW92ZUNsYXNzKCBwYWdlQ2xhc3NlcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQkLndpZGdldCggXCJtb2JpbGUudG9vbGJhclwiLCAkLm1vYmlsZS50b29sYmFyLCB7XHJcblxyXG5cdFx0X21ha2VGaXhlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdHRoaXMuX3dvcmthcm91bmRzKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vY2hlY2sgdGhlIGJyb3dzZXIgYW5kIHZlcnNpb24gYW5kIHJ1biBuZWVkZWQgd29ya2Fyb3VuZHNcclxuXHRcdF93b3JrYXJvdW5kczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHRcdHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtLFxyXG5cdFx0XHQvLyBSZW5kZXJpbmcgZW5naW5lIGlzIFdlYmtpdCwgYW5kIGNhcHR1cmUgbWFqb3IgdmVyc2lvblxyXG5cdFx0XHR3a21hdGNoID0gdWEubWF0Y2goIC9BcHBsZVdlYktpdFxcLyhbMC05XSspLyApLFxyXG5cdFx0XHR3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdLFxyXG5cdFx0XHRvcyA9IG51bGwsXHJcblx0XHRcdHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL3NldCB0aGUgb3Mgd2UgYXJlIHdvcmtpbmcgaW4gaWYgaXQgZG9zZW50IG1hdGNoIG9uZSB3aXRoIHdvcmthcm91bmRzIHJldHVyblxyXG5cdFx0XHRpZiAoIHBsYXRmb3JtLmluZGV4T2YoIFwiaVBob25lXCIgKSA+IC0xIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBhZFwiICkgPiAtMSAgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUG9kXCIgKSA+IC0xICkge1xyXG5cdFx0XHRcdG9zID0gXCJpb3NcIjtcclxuXHRcdFx0fSBlbHNlIGlmICggdWEuaW5kZXhPZiggXCJBbmRyb2lkXCIgKSA+IC0xICkge1xyXG5cdFx0XHRcdG9zID0gXCJhbmRyb2lkXCI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY2hlY2sgb3MgdmVyc2lvbiBpZiBpdCBkb3NlbnQgbWF0Y2ggb25lIHdpdGggd29ya2Fyb3VuZHMgcmV0dXJuXHJcblx0XHRcdGlmICggb3MgPT09IFwiaW9zXCIgKSB7XHJcblx0XHRcdFx0Ly9pT1MgIHdvcmthcm91bmRzXHJcblx0XHRcdFx0c2VsZi5fYmluZFNjcm9sbFdvcmthcm91bmQoKTtcclxuXHRcdFx0fSBlbHNlIGlmICggb3MgPT09IFwiYW5kcm9pZFwiICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzQgKSB7XHJcblx0XHRcdFx0Ly9BbmRyb2lkIDIuMyBydW4gYWxsIEFuZHJvaWQgMi4zIHdvcmthcm91bmRcclxuXHRcdFx0XHRzZWxmLl9iaW5kU2Nyb2xsV29ya2Fyb3VuZCgpO1xyXG5cdFx0XHRcdHNlbGYuX2JpbmRMaXN0VGh1bWJXb3JrYXJvdW5kKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vVXRpbGl0eSBjbGFzcyBmb3IgY2hlY2tpbmcgaGVhZGVyIGFuZCBmb290ZXIgcG9zaXRpb25zIHJlbGF0aXZlIHRvIHZpZXdwb3J0XHJcblx0XHRfdmlld3BvcnRPZmZzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdGhlYWRlciA9ICRlbC5oYXNDbGFzcyggXCJ1aS1oZWFkZXJcIiApLFxyXG5cdFx0XHRcdG9mZnNldCA9IE1hdGguYWJzKCAkZWwub2Zmc2V0KCkudG9wIC0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCkgKTtcclxuXHRcdFx0aWYgKCAhaGVhZGVyICkge1xyXG5cdFx0XHRcdG9mZnNldCA9IE1hdGgucm91bmQoIG9mZnNldCAtIHRoaXMud2luZG93LmhlaWdodCgpICsgJGVsLm91dGVySGVpZ2h0KCkgKSAtIDYwO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBvZmZzZXQ7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vYmluZCBldmVudHMgZm9yIF90cmlnZ2VyUmVkcmF3KCkgZnVuY3Rpb25cclxuXHRcdF9iaW5kU2Nyb2xsV29ya2Fyb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0Ly9iaW5kIHRvIHNjcm9sbHN0b3AgYW5kIGNoZWNrIGlmIHRoZSB0b29sYmFycyBhcmUgY29ycmVjdGx5IHBvc2l0aW9uZWRcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IHNjcm9sbHN0b3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB2aWV3cG9ydE9mZnNldCA9IHNlbGYuX3ZpZXdwb3J0T2Zmc2V0KCk7XHJcblx0XHRcdFx0Ly9jaGVjayBpZiB0aGUgaGVhZGVyIGlzIHZpc2libGUgYW5kIGlmIGl0cyBpbiB0aGUgcmlnaHQgcGxhY2VcclxuXHRcdFx0XHRpZiAoIHZpZXdwb3J0T2Zmc2V0ID4gMiAmJiBzZWxmLl92aXNpYmxlICkge1xyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlclJlZHJhdygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fX0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3RoaXMgYWRkcmVzc2VzIGlzc3VlICM0MjUwIFBlcnNpc3RlbnQgZm9vdGVyIGluc3RhYmlsaXR5IGluIHYxLjEgd2l0aCBsb25nIHNlbGVjdCBsaXN0cyBpbiBBbmRyb2lkIDIuMy4zXHJcblx0XHQvL2FuZCBpc3N1ZSAjMzc0OCBBbmRyb2lkIDIueDogUGFnZSB0cmFuc2l0aW9ucyBicm9rZW4gd2hlbiBmaXhlZCB0b29sYmFycyB1c2VkXHJcblx0XHQvL3RoZSBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgdGh1bWJuYWlsIGluIGEgbGlzdCB2aWV3IGNhdXNlcyBwcm9ibGVtcyB3aXRoIGZpeGVkIHBvc2l0aW9uIGJ1dHRvbnMgYWJvdmUgaW4gYSBuYXYgYmFyXHJcblx0XHQvL3NldHRpbmcgdGhlIGxpJ3MgdG8gLXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApOyBzb2x2ZXMgdGhpcyBwcm9ibGVtIHRvIGF2b2lkZSBwb3RlbnRpYWwgaXNzdWVzIGluIG90aGVyXHJcblx0XHQvL3BsYXRmb3JtcyB3ZSBzY29wZSB0aGlzIHdpdGggdGhlIGNsYXNzIHVpLWFuZHJvaWQtMngtZml4XHJcblx0XHRfYmluZExpc3RUaHVtYldvcmthcm91bmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICkuYWRkQ2xhc3MoIFwidWktYW5kcm9pZC0yeC1maXhlZFwiICk7XHJcblx0XHR9LFxyXG5cdFx0Ly90aGlzIGFkZHJlc3NlcyBpc3N1ZXMgIzQzMzcgRml4ZWQgaGVhZGVyIHByb2JsZW0gYWZ0ZXIgc2Nyb2xsaW5nIGNvbnRlbnQgb24gaU9TIGFuZCBBbmRyb2lkXHJcblx0XHQvL2FuZCBkZXZpY2UgYnVncyBwcm9qZWN0IGlzc3VlICMxIEZvcm0gZWxlbWVudHMgY2FuIGxvc2UgY2xpY2sgaGl0IGFyZWEgaW4gcG9zaXRpb246IGZpeGVkIGNvbnRhaW5lcnMuXHJcblx0XHQvL3RoaXMgYWxzbyBhZGRyZXNzZXMgbm90IG9uIGZpeGVkIHRvb2xiYXJzIHBhZ2UgaW4gZG9jc1xyXG5cdFx0Ly9hZGRpbmcgMXB4IG9mIHBhZGRpbmcgdG8gdGhlIGJvdHRvbSB0aGVuIHJlbW92aW5nIGl0IGNhdXNlcyBhIFwicmVkcmF3XCJcclxuXHRcdC8vd2hpY2ggcG9zaXRpb25zIHRoZSB0b29sYmFycyBjb3JyZWN0bHkgKHRoZXkgd2lsbCBhbHdheXMgYmUgdmlzdWFsbHkgY29ycmVjdClcclxuXHRcdF90cmlnZ2VyUmVkcmF3OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZGRpbmdCb3R0b20gPSBwYXJzZUZsb2F0KCAkKCBcIi51aS1wYWdlLWFjdGl2ZVwiICkuY3NzKCBcInBhZGRpbmctYm90dG9tXCIgKSApO1xyXG5cdFx0XHQvL3RyaWdnZXIgcGFnZSByZWRyYXcgdG8gZml4IGluY29ycmVjdGx5IHBvc2l0aW9uZWQgZml4ZWQgZWxlbWVudHNcclxuXHRcdFx0JCggXCIudWktcGFnZS1hY3RpdmVcIiApLmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiLCAoIHBhZGRpbmdCb3R0b20gKyAxICkgKyBcInB4XCIgKTtcclxuXHRcdFx0Ly9pZiB0aGUgcGFkZGluZyBpcyByZXNldCB3aXRoIG91dCBhIHRpbWVvdXQgdGhlIHJlcG9zaXRpb24gd2lsbCBub3Qgb2NjdXJlLlxyXG5cdFx0XHQvL3RoaXMgaXMgaW5kZXBlbmRhbnQgb2YgSlFNIHRoZSBicm93c2VyIHNlZW1zIHRvIG5lZWQgdGhlIHRpbWUgdG8gcmVhY3QuXHJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5jc3MoIFwicGFkZGluZy1ib3R0b21cIiwgcGFkZGluZ0JvdHRvbSArIFwicHhcIiApO1xyXG5cdFx0XHR9LCAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHQvL1JlbW92ZSB0aGUgY2xhc3Mgd2UgYWRkZWQgdG8gdGhlIHBhZ2UgcHJldmlvdXNseSBpbiBhbmRyb2lkIDIueFxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZS1hY3RpdmVcIiApLnJlbW92ZUNsYXNzKCBcInVpLWFuZHJvaWQtMngtZml4XCIgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oIGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgaWVIYWNrID0gKCAkLm1vYmlsZS5icm93c2VyLm9sZElFICYmICQubW9iaWxlLmJyb3dzZXIub2xkSUUgPD0gOCApLFxyXG5cdHVpVGVtcGxhdGUgPSAkKFxyXG5cdFx0XCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1hcnJvdy1ndWlkZSc+PC9kaXY+XCIgK1xyXG5cdFx0XCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1hcnJvdy1jb250YWluZXJcIiArICggaWVIYWNrID8gXCIgaWVcIiA6IFwiXCIgKSArIFwiJz5cIiArXHJcblx0XHRcdFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtYXJyb3cnPjwvZGl2PlwiICtcclxuXHRcdFwiPC9kaXY+XCJcclxuXHQpO1xyXG5cclxuZnVuY3Rpb24gZ2V0QXJyb3coKSB7XHJcblx0dmFyIGNsb25lID0gdWlUZW1wbGF0ZS5jbG9uZSgpLFxyXG5cdFx0Z2QgPSBjbG9uZS5lcSggMCApLFxyXG5cdFx0Y3QgPSBjbG9uZS5lcSggMSApLFxyXG5cdFx0YXIgPSBjdC5jaGlsZHJlbigpO1xyXG5cclxuXHRyZXR1cm4geyBhckVsczogY3QuYWRkKCBnZCApLCBnZDogZ2QsIGN0OiBjdCwgYXI6IGFyIH07XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wb3B1cFwiLCAkLm1vYmlsZS5wb3B1cCwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHJcblx0XHRhcnJvdzogXCJcIlxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFyLFxyXG5cdFx0XHRyZXQgPSB0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmFycm93ICkge1xyXG5cdFx0XHR0aGlzLl91aS5hcnJvdyA9IGFyID0gdGhpcy5fYWRkQXJyb3coKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdF9hZGRBcnJvdzogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhlbWUsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGFyID0gZ2V0QXJyb3coKTtcclxuXHJcblx0XHR0aGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9wdHMudGhlbWUgKTtcclxuXHRcdGFyLmFyLmFkZENsYXNzKCB0aGVtZSArICggb3B0cy5zaGFkb3cgPyBcIiB1aS1vdmVybGF5LXNoYWRvd1wiIDogXCJcIiApICk7XHJcblx0XHRhci5hckVscy5oaWRlKCkuYXBwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cclxuXHRcdHJldHVybiBhcjtcclxuXHR9LFxyXG5cclxuXHRfdW5lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggYXIgKSB7XHJcblx0XHRcdGFyLmFyRWxzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdC8vIFByZXRlbmQgdG8gc2hvdyBhbiBhcnJvdyBkZXNjcmliZWQgYnkgQHAgYW5kIEBkaXIgYW5kIGNhbGN1bGF0ZSB0aGVcclxuXHQvLyBkaXN0YW5jZSBmcm9tIHRoZSBkZXNpcmVkIHBvaW50LiBJZiBhIGJlc3QtZGlzdGFuY2UgaXMgcGFzc2VkIGluLCByZXR1cm5cclxuXHQvLyB0aGUgbWluaW11bSBvZiB0aGUgb25lIHBhc3NlZCBpbiBhbmQgdGhlIG9uZSBjYWxjdWxhdGVkLlxyXG5cdF90cnlBbkFycm93OiBmdW5jdGlvbiggcCwgZGlyLCBkZXNpcmVkLCBzLCBiZXN0ICkge1xyXG5cdFx0dmFyIHJlc3VsdCwgciwgZGlmZiwgZGVzaXJlZEZvckFycm93ID0ge30sIHRpcCA9IHt9O1xyXG5cclxuXHRcdC8vIElmIHRoZSBhcnJvdyBoYXMgbm8gd2lnZ2xlIHJvb20gYWxvbmcgdGhlIGVkZ2Ugb2YgdGhlIHBvcHVwLCBpdCBjYW5ub3RcclxuXHRcdC8vIGJlIGRpc3BsYXllZCBhbG9uZyB0aGUgcmVxdWVzdGVkIGVkZ2Ugd2l0aG91dCBpdCBzdGlja2luZyBvdXQuXHJcblx0XHRpZiAoIHMuYXJGdWxsWyBwLmRpbUtleSBdID4gcy5ndWlkZURpbXNbIHAuZGltS2V5IF0gKSB7XHJcblx0XHRcdHJldHVybiBiZXN0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGRlc2lyZWRGb3JBcnJvd1sgcC5mc3QgXSA9IGRlc2lyZWRbIHAuZnN0IF0gK1xyXG5cdFx0XHQoIHMuYXJIYWxmWyBwLm9EaW1LZXkgXSArIHMubWVudUhhbGZbIHAub0RpbUtleSBdICkgKiBwLm9mZnNldEZhY3RvciAtXHJcblx0XHRcdHMuY29udGVudEJveFsgcC5mc3QgXSArICggcy5jbGFtcEluZm8ubWVudVNpemVbIHAub0RpbUtleSBdIC0gcy5jb250ZW50Qm94WyBwLm9EaW1LZXkgXSApICogcC5hcnJvd09mZnNldEZhY3RvcjtcclxuXHRcdGRlc2lyZWRGb3JBcnJvd1sgcC5zbmQgXSA9IGRlc2lyZWRbIHAuc25kIF07XHJcblxyXG5cdFx0cmVzdWx0ID0gcy5yZXN1bHQgfHwgdGhpcy5fY2FsY3VsYXRlRmluYWxMb2NhdGlvbiggZGVzaXJlZEZvckFycm93LCBzLmNsYW1wSW5mbyApO1xyXG5cdFx0ciA9IHsgeDogcmVzdWx0LmxlZnQsIHk6IHJlc3VsdC50b3AgfTtcclxuXHJcblx0XHR0aXBbIHAuZnN0IF0gPSByWyBwLmZzdCBdICsgcy5jb250ZW50Qm94WyBwLmZzdCBdICsgcC50aXBPZmZzZXQ7XHJcblx0XHR0aXBbIHAuc25kIF0gPSBNYXRoLm1heCggcmVzdWx0WyBwLnByb3AgXSArIHMuZ3VpZGVPZmZzZXRbIHAucHJvcCBdICsgcy5hckhhbGZbIHAuZGltS2V5IF0sXHJcblx0XHRcdE1hdGgubWluKCByZXN1bHRbIHAucHJvcCBdICsgcy5ndWlkZU9mZnNldFsgcC5wcm9wIF0gKyBzLmd1aWRlRGltc1sgcC5kaW1LZXkgXSAtIHMuYXJIYWxmWyBwLmRpbUtleSBdLFxyXG5cdFx0XHRcdGRlc2lyZWRbIHAuc25kIF0gKSApO1xyXG5cclxuXHRcdGRpZmYgPSBNYXRoLmFicyggZGVzaXJlZC54IC0gdGlwLnggKSArIE1hdGguYWJzKCBkZXNpcmVkLnkgLSB0aXAueSApO1xyXG5cdFx0aWYgKCAhYmVzdCB8fCBkaWZmIDwgYmVzdC5kaWZmICkge1xyXG5cdFx0XHQvLyBDb252ZXJ0IHRpcCBvZmZzZXQgdG8gY29vcmRpbmF0ZXMgaW5zaWRlIHRoZSBwb3B1cFxyXG5cdFx0XHR0aXBbIHAuc25kIF0gLT0gcy5hckhhbGZbIHAuZGltS2V5IF0gKyByZXN1bHRbIHAucHJvcCBdICsgcy5jb250ZW50Qm94WyBwLnNuZCBdO1xyXG5cdFx0XHRiZXN0ID0geyBkaXI6IGRpciwgZGlmZjogZGlmZiwgcmVzdWx0OiByZXN1bHQsIHBvc1Byb3A6IHAucHJvcCwgcG9zVmFsOiB0aXBbIHAuc25kIF0gfTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYmVzdDtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGxhY2VtZW50U3RhdGU6IGZ1bmN0aW9uKCBjbGFtcCApIHtcclxuXHRcdHZhciBvZmZzZXQsIGdkT2Zmc2V0LFxyXG5cdFx0XHRhciA9IHRoaXMuX3VpLmFycm93LFxyXG5cdFx0XHRzdGF0ZSA9IHtcclxuXHRcdFx0XHRjbGFtcEluZm86IHRoaXMuX2NsYW1wUG9wdXBXaWR0aCggIWNsYW1wICksXHJcblx0XHRcdFx0YXJGdWxsOiB7IGN4OiBhci5jdC53aWR0aCgpLCBjeTogYXIuY3QuaGVpZ2h0KCkgfSxcclxuXHRcdFx0XHRndWlkZURpbXM6IHsgY3g6IGFyLmdkLndpZHRoKCksIGN5OiBhci5nZC5oZWlnaHQoKSB9LFxyXG5cdFx0XHRcdGd1aWRlT2Zmc2V0OiBhci5nZC5vZmZzZXQoKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdG9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcclxuXHJcblx0XHRhci5nZC5jc3MoIHsgbGVmdDogMCwgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwIH0gKTtcclxuXHRcdGdkT2Zmc2V0ID0gYXIuZ2Qub2Zmc2V0KCk7XHJcblx0XHRzdGF0ZS5jb250ZW50Qm94ID0ge1xyXG5cdFx0XHR4OiBnZE9mZnNldC5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcblx0XHRcdHk6IGdkT2Zmc2V0LnRvcCAtIG9mZnNldC50b3AsXHJcblx0XHRcdGN4OiBhci5nZC53aWR0aCgpLFxyXG5cdFx0XHRjeTogYXIuZ2QuaGVpZ2h0KClcclxuXHRcdH07XHJcblx0XHRhci5nZC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKTtcclxuXHJcblx0XHQvLyBUaGUgYXJyb3cgYm94IG1vdmVzIGJldHdlZW4gZ3VpZGVPZmZzZXQgYW5kIGd1aWRlT2Zmc2V0ICsgZ3VpZGVEaW1zIC0gYXJGdWxsXHJcblx0XHRzdGF0ZS5ndWlkZU9mZnNldCA9IHsgbGVmdDogc3RhdGUuZ3VpZGVPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0LCB0b3A6IHN0YXRlLmd1aWRlT2Zmc2V0LnRvcCAtIG9mZnNldC50b3AgfTtcclxuXHRcdHN0YXRlLmFySGFsZiA9IHsgY3g6IHN0YXRlLmFyRnVsbC5jeCAvIDIsIGN5OiBzdGF0ZS5hckZ1bGwuY3kgLyAyIH07XHJcblx0XHRzdGF0ZS5tZW51SGFsZiA9IHsgY3g6IHN0YXRlLmNsYW1wSW5mby5tZW51U2l6ZS5jeCAvIDIsIGN5OiBzdGF0ZS5jbGFtcEluZm8ubWVudVNpemUuY3kgLyAyIH07XHJcblxyXG5cdFx0cmV0dXJuIHN0YXRlO1xyXG5cdH0sXHJcblxyXG5cdF9wbGFjZW1lbnRDb29yZHM6IGZ1bmN0aW9uKCBkZXNpcmVkICkge1xyXG5cdFx0dmFyIHN0YXRlLCBiZXN0LCBwYXJhbXMsIGVsT2Zmc2V0LCBiZ1JlZixcclxuXHRcdFx0b3B0aW9uVmFsdWUgPSB0aGlzLm9wdGlvbnMuYXJyb3csXHJcblx0XHRcdGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCAhYXIgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlciggZGVzaXJlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGFyLmFyRWxzLnNob3coKTtcclxuXHJcblx0XHRiZ1JlZiA9IHt9O1xyXG5cdFx0c3RhdGUgPSB0aGlzLl9nZXRQbGFjZW1lbnRTdGF0ZSggdHJ1ZSApO1xyXG5cdFx0cGFyYW1zID0ge1xyXG5cdFx0XHRcImxcIjogeyBmc3Q6IFwieFwiLCBzbmQ6IFwieVwiLCBwcm9wOiBcInRvcFwiLCBkaW1LZXk6IFwiY3lcIiwgb0RpbUtleTogXCJjeFwiLCBvZmZzZXRGYWN0b3I6IDEsIHRpcE9mZnNldDogIC1zdGF0ZS5hckhhbGYuY3gsIGFycm93T2Zmc2V0RmFjdG9yOiAwIH0sXHJcblx0XHRcdFwiclwiOiB7IGZzdDogXCJ4XCIsIHNuZDogXCJ5XCIsIHByb3A6IFwidG9wXCIsIGRpbUtleTogXCJjeVwiLCBvRGltS2V5OiBcImN4XCIsIG9mZnNldEZhY3RvcjogLTEsIHRpcE9mZnNldDogc3RhdGUuYXJIYWxmLmN4ICsgc3RhdGUuY29udGVudEJveC5jeCwgYXJyb3dPZmZzZXRGYWN0b3I6IDEgfSxcclxuXHRcdFx0XCJiXCI6IHsgZnN0OiBcInlcIiwgc25kOiBcInhcIiwgcHJvcDogXCJsZWZ0XCIsIGRpbUtleTogXCJjeFwiLCBvRGltS2V5OiBcImN5XCIsIG9mZnNldEZhY3RvcjogLTEsIHRpcE9mZnNldDogc3RhdGUuYXJIYWxmLmN5ICsgc3RhdGUuY29udGVudEJveC5jeSwgYXJyb3dPZmZzZXRGYWN0b3I6IDEgfSxcclxuXHRcdFx0XCJ0XCI6IHsgZnN0OiBcInlcIiwgc25kOiBcInhcIiwgcHJvcDogXCJsZWZ0XCIsIGRpbUtleTogXCJjeFwiLCBvRGltS2V5OiBcImN5XCIsIG9mZnNldEZhY3RvcjogMSwgdGlwT2Zmc2V0OiAtc3RhdGUuYXJIYWxmLmN5LCBhcnJvd09mZnNldEZhY3RvcjogMCB9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFRyeSBlYWNoIHNpZGUgc3BlY2lmaWVkIGluIHRoZSBvcHRpb25zIHRvIHNlZSBvbiB3aGljaCBvbmUgdGhlIGFycm93XHJcblx0XHQvLyBzaG91bGQgYmUgcGxhY2VkIHN1Y2ggdGhhdCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdGlwIG9mIHRoZSBhcnJvdyBhbmRcclxuXHRcdC8vIHRoZSBkZXNpcmVkIGNvb3JkaW5hdGVzIGlzIHRoZSBzaG9ydGVzdC5cclxuXHRcdCQuZWFjaCggKCBvcHRpb25WYWx1ZSA9PT0gdHJ1ZSA/IFwibCx0LHIsYlwiIDogb3B0aW9uVmFsdWUgKS5zcGxpdCggXCIsXCIgKSxcclxuXHRcdFx0JC5wcm94eSggZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRcdFx0YmVzdCA9IHRoaXMuX3RyeUFuQXJyb3coIHBhcmFtc1sgdmFsdWUgXSwgdmFsdWUsIGRlc2lyZWQsIHN0YXRlLCBiZXN0ICk7XHJcblx0XHRcdH0sIHRoaXMgKSApO1xyXG5cclxuXHRcdC8vIENvdWxkIG5vdCBwbGFjZSB0aGUgYXJyb3cgYWxvbmcgYW55IG9mIHRoZSBlZGdlcyAtIGJlaGF2ZSBhcyBpZiBzaG93aW5nXHJcblx0XHQvLyB0aGUgYXJyb3cgd2FzIHR1cm5lZCBvZmYuXHJcblx0XHRpZiAoICFiZXN0ICkge1xyXG5cdFx0XHRhci5hckVscy5oaWRlKCk7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlciggZGVzaXJlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1vdmUgdGhlIGFycm93IGludG8gcGxhY2VcclxuXHRcdGFyLmN0XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1hcnJvdy1sIHVpLXBvcHVwLWFycm93LXQgdWktcG9wdXAtYXJyb3ctciB1aS1wb3B1cC1hcnJvdy1iXCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAtYXJyb3ctXCIgKyBiZXN0LmRpciApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKS5jc3MoIGJlc3QucG9zUHJvcCwgYmVzdC5wb3NWYWwgKVxyXG5cdFx0XHQuc2hvdygpO1xyXG5cclxuXHRcdC8vIERvIG5vdCBtb3ZlL3NpemUgdGhlIGJhY2tncm91bmQgZGl2IG9uIElFLCBiZWNhdXNlIHdlIHVzZSB0aGUgYXJyb3cgZGl2IGZvciBiYWNrZ3JvdW5kIGFzIHdlbGwuXHJcblx0XHRpZiAoICFpZUhhY2sgKSB7XHJcblx0XHRcdGVsT2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpO1xyXG5cdFx0XHRiZ1JlZlsgcGFyYW1zWyBiZXN0LmRpciBdLmZzdCBdID0gYXIuY3Qub2Zmc2V0KCk7XHJcblx0XHRcdGJnUmVmWyBwYXJhbXNbIGJlc3QuZGlyIF0uc25kIF0gPSB7XHJcblx0XHRcdFx0bGVmdDogZWxPZmZzZXQubGVmdCArIHN0YXRlLmNvbnRlbnRCb3gueCxcclxuXHRcdFx0XHR0b3A6IGVsT2Zmc2V0LnRvcCArIHN0YXRlLmNvbnRlbnRCb3gueVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBiZXN0LnJlc3VsdDtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdHMgKSB7XHJcblx0XHR2YXIgbmV3VGhlbWUsXHJcblx0XHRcdG9sZFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lLFxyXG5cdFx0XHRhciA9IHRoaXMuX3VpLmFycm93LFxyXG5cdFx0XHRyZXQgPSB0aGlzLl9zdXBlciggb3B0cyApO1xyXG5cclxuXHRcdGlmICggb3B0cy5hcnJvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICFhciAmJiBvcHRzLmFycm93ICkge1xyXG5cdFx0XHRcdHRoaXMuX3VpLmFycm93ID0gdGhpcy5fYWRkQXJyb3coKTtcclxuXHJcblx0XHRcdFx0Ly8gSW1wb3J0YW50IHRvIHJldHVybiBoZXJlIHNvIHdlIGRvbid0IHNldCB0aGUgc2FtZSBvcHRpb25zIGFsbCBvdmVyXHJcblx0XHRcdFx0Ly8gYWdhaW4gYmVsb3cuXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBhciAmJiAhb3B0cy5hcnJvdyApIHtcclxuXHRcdFx0XHRhci5hckVscy5yZW1vdmUoKTtcclxuXHRcdFx0XHR0aGlzLl91aS5hcnJvdyA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZWFzc2lnbiB3aXRoIHBvdGVudGlhbGx5IG5ldyBhcnJvd1xyXG5cdFx0YXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoIGFyICkge1xyXG5cdFx0XHRpZiAoIG9wdHMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRvbGRUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9sZFRoZW1lICk7XHJcblx0XHRcdFx0bmV3VGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvcHRzLnRoZW1lICk7XHJcblx0XHRcdFx0YXIuYXIucmVtb3ZlQ2xhc3MoIG9sZFRoZW1lICkuYWRkQ2xhc3MoIG5ld1RoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0cy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRhci5hci50b2dnbGVDbGFzcyggXCJ1aS1vdmVybGF5LXNoYWRvd1wiLCBvcHRzLnNoYWRvdyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoIGFyICkge1xyXG5cdFx0XHRhci5hckVscy5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBhbmVsXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRjbGFzc2VzOiB7XHJcblx0XHRcdHBhbmVsOiBcInVpLXBhbmVsXCIsXHJcblx0XHRcdHBhbmVsT3BlbjogXCJ1aS1wYW5lbC1vcGVuXCIsXHJcblx0XHRcdHBhbmVsQ2xvc2VkOiBcInVpLXBhbmVsLWNsb3NlZFwiLFxyXG5cdFx0XHRwYW5lbEZpeGVkOiBcInVpLXBhbmVsLWZpeGVkXCIsXHJcblx0XHRcdHBhbmVsSW5uZXI6IFwidWktcGFuZWwtaW5uZXJcIixcclxuXHRcdFx0bW9kYWw6IFwidWktcGFuZWwtZGlzbWlzc1wiLFxyXG5cdFx0XHRtb2RhbE9wZW46IFwidWktcGFuZWwtZGlzbWlzcy1vcGVuXCIsXHJcblx0XHRcdHBhZ2VDb250YWluZXI6IFwidWktcGFuZWwtcGFnZS1jb250YWluZXJcIixcclxuXHRcdFx0cGFnZVdyYXBwZXI6IFwidWktcGFuZWwtd3JhcHBlclwiLFxyXG5cdFx0XHRwYWdlRml4ZWRUb29sYmFyOiBcInVpLXBhbmVsLWZpeGVkLXRvb2xiYXJcIixcclxuXHRcdFx0cGFnZUNvbnRlbnRQcmVmaXg6IFwidWktcGFuZWwtcGFnZS1jb250ZW50XCIsIC8qIFVzZWQgZm9yIHdyYXBwZXIgYW5kIGZpeGVkIHRvb2xiYXJzIHBvc2l0aW9uLCBkaXNwbGF5IGFuZCBvcGVuIGNsYXNzZXMuICovXHJcblx0XHRcdGFuaW1hdGU6IFwidWktcGFuZWwtYW5pbWF0ZVwiXHJcblx0XHR9LFxyXG5cdFx0YW5pbWF0ZTogdHJ1ZSxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0cG9zaXRpb246IFwibGVmdFwiLFxyXG5cdFx0ZGlzbWlzc2libGU6IHRydWUsXHJcblx0XHRkaXNwbGF5OiBcInJldmVhbFwiLCAvL2FjY2VwdHMgcmV2ZWFsLCBwdXNoLCBvdmVybGF5XHJcblx0XHRzd2lwZUNsb3NlOiB0cnVlLFxyXG5cdFx0cG9zaXRpb25GaXhlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VMaW5rOiBudWxsLFxyXG5cdF9wYXJlbnRQYWdlOiBudWxsLFxyXG5cdF9wYWdlOiBudWxsLFxyXG5cdF9tb2RhbDogbnVsbCxcclxuXHRfcGFuZWxJbm5lcjogbnVsbCxcclxuXHRfd3JhcHBlcjogbnVsbCxcclxuXHRfZml4ZWRUb29sYmFyczogbnVsbCxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHBhcmVudFBhZ2UgPSBlbC5jbG9zZXN0KCBcIi51aS1wYWdlLCA6anFtRGF0YShyb2xlPSdwYWdlJylcIiApO1xyXG5cclxuXHRcdC8vIGV4cG9zZSBzb21lIHByaXZhdGUgcHJvcHMgdG8gb3RoZXIgbWV0aG9kc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2Nsb3NlTGluazogZWwuZmluZCggXCI6anFtRGF0YShyZWw9J2Nsb3NlJylcIiApLFxyXG5cdFx0XHRfcGFyZW50UGFnZTogKCBwYXJlbnRQYWdlLmxlbmd0aCA+IDAgKSA/IHBhcmVudFBhZ2UgOiBmYWxzZSxcclxuXHRcdFx0X29wZW5lZFBhZ2U6IG51bGwsXHJcblx0XHRcdF9wYWdlOiB0aGlzLl9nZXRQYWdlLFxyXG5cdFx0XHRfcGFuZWxJbm5lcjogdGhpcy5fZ2V0UGFuZWxJbm5lcigpLFxyXG5cdFx0XHRfZml4ZWRUb29sYmFyczogdGhpcy5fZ2V0Rml4ZWRUb29sYmFyc1xyXG5cdFx0fSk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApe1xyXG5cdFx0XHR0aGlzLl9nZXRXcmFwcGVyKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9hZGRQYW5lbENsYXNzZXMoKTtcclxuXHJcblx0XHQvLyBpZiBhbmltYXRpbmcsIGFkZCB0aGUgY2xhc3MgdG8gZG8gc29cclxuXHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhdGhpcy5vcHRpb25zLmFuaW1hdGUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2JpbmRVcGRhdGVMYXlvdXQoKTtcclxuXHRcdHRoaXMuX2JpbmRDbG9zZUV2ZW50cygpO1xyXG5cdFx0dGhpcy5fYmluZExpbmtMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuX2JpbmRQYWdlRXZlbnRzKCk7XHJcblxyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSApIHtcclxuXHRcdFx0dGhpcy5fY3JlYXRlTW9kYWwoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9iaW5kU3dpcGVFdmVudHMoKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFuZWxJbm5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFuZWxJbm5lciA9IHRoaXMuZWxlbWVudC5maW5kKCBcIi5cIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsSW5uZXIgKTtcclxuXHJcblx0XHRpZiAoIHBhbmVsSW5uZXIubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRwYW5lbElubmVyID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCkud3JhcEFsbCggXCI8ZGl2IGNsYXNzPSdcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsSW5uZXIgKyBcIicgLz5cIiApLnBhcmVudCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwYW5lbElubmVyO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGVNb2RhbDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHRhcmdldCA9IHNlbGYuX3BhcmVudFBhZ2UgPyBzZWxmLl9wYXJlbnRQYWdlLnBhcmVudCgpIDogc2VsZi5lbGVtZW50LnBhcmVudCgpO1xyXG5cclxuXHRcdHNlbGYuX21vZGFsID0gJCggXCI8ZGl2IGNsYXNzPSdcIiArIHNlbGYub3B0aW9ucy5jbGFzc2VzLm1vZGFsICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0Lm9uKCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hcHBlbmRUbyggdGFyZ2V0ICk7XHJcblx0fSxcclxuXHJcblx0X2dldFBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhZ2UgPSB0aGlzLl9vcGVuZWRQYWdlIHx8IHRoaXMuX3BhcmVudFBhZ2UgfHwgJCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKTtcclxuXHJcblx0XHRyZXR1cm4gcGFnZTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0V3JhcHBlcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd3JhcHBlciA9IHRoaXMuX3BhZ2UoKS5maW5kKCBcIi5cIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhZ2VXcmFwcGVyICk7XHJcblx0XHRpZiAoIHdyYXBwZXIubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHR3cmFwcGVyID0gdGhpcy5fcGFnZSgpLmNoaWxkcmVuKCBcIi51aS1oZWFkZXI6bm90KC51aS1oZWFkZXItZml4ZWQpLCAudWktY29udGVudDpub3QoLnVpLXBvcHVwKSwgLnVpLWZvb3Rlcjpub3QoLnVpLWZvb3Rlci1maXhlZClcIiApXHJcblx0XHRcdFx0LndyYXBBbGwoIFwiPGRpdiBjbGFzcz0nXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYWdlV3JhcHBlciArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdFx0LnBhcmVudCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3dyYXBwZXIgPSB3cmFwcGVyO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRGaXhlZFRvb2xiYXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBleHRGaXhlZFRvb2xiYXJzID0gJCggXCJib2R5XCIgKS5jaGlsZHJlbiggXCIudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIgKSxcclxuXHRcdFx0aW50Rml4ZWRUb29sYmFycyA9IHRoaXMuX3BhZ2UoKS5maW5kKCBcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIiApLFxyXG5cdFx0XHRmaXhlZFRvb2xiYXJzID0gZXh0Rml4ZWRUb29sYmFycy5hZGQoIGludEZpeGVkVG9vbGJhcnMgKS5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFnZUZpeGVkVG9vbGJhciApO1xyXG5cclxuXHRcdHJldHVybiBmaXhlZFRvb2xiYXJzO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQb3NEaXNwbGF5Q2xhc3NlczogZnVuY3Rpb24oIHByZWZpeCApIHtcclxuXHRcdHJldHVybiBwcmVmaXggKyBcIi1wb3NpdGlvbi1cIiArIHRoaXMub3B0aW9ucy5wb3NpdGlvbiArIFwiIFwiICsgcHJlZml4ICsgXCItZGlzcGxheS1cIiArIHRoaXMub3B0aW9ucy5kaXNwbGF5O1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYW5lbENsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhbmVsQ2xhc3NlcyA9IHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsICtcclxuXHRcdFx0XCIgXCIgKyB0aGlzLl9nZXRQb3NEaXNwbGF5Q2xhc3NlcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWwgKSArXHJcblx0XHRcdFwiIFwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxDbG9zZWQgK1xyXG5cdFx0XHRcIiBcIiArIFwidWktYm9keS1cIiArICggdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIgKTtcclxuXHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQgKSB7XHJcblx0XHRcdHBhbmVsQ2xhc3NlcyArPSBcIiBcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsRml4ZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBhbmVsQ2xhc3NlcztcclxuXHR9LFxyXG5cclxuXHRfYWRkUGFuZWxDbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5fZ2V0UGFuZWxDbGFzc2VzKCkgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQ2xvc2VDbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZENsb3NlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCB0aGlzLl9jbG9zZUxpbmssIHtcclxuXHRcdFx0XCJjbGlja1wiOiBcIl9oYW5kbGVDbG9zZUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XCJjbGljayBhOmpxbURhdGEoYWpheD0nZmFsc2UnKVwiOiBcIl9oYW5kbGVDbG9zZUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9wb3NpdGlvblBhbmVsOiBmdW5jdGlvbiggc2Nyb2xsVG9Ub3AgKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHBhbmVsSW5uZXJIZWlnaHQgPSBzZWxmLl9wYW5lbElubmVyLm91dGVySGVpZ2h0KCksXHJcblx0XHRcdGV4cGFuZCA9IHBhbmVsSW5uZXJIZWlnaHQgPiAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKTtcclxuXHJcblx0XHRpZiAoIGV4cGFuZCB8fCAhc2VsZi5vcHRpb25zLnBvc2l0aW9uRml4ZWQgKSB7XHJcblx0XHRcdGlmICggZXhwYW5kICkge1xyXG5cdFx0XHRcdHNlbGYuX3VuZml4UGFuZWwoKTtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQoIHBhbmVsSW5uZXJIZWlnaHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHNjcm9sbFRvVG9wICkge1xyXG5cdFx0XHRcdHRoaXMud2luZG93WyAwIF0uc2Nyb2xsVG8oIDAsICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYuX2ZpeFBhbmVsKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRGaXhMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggJCggd2luZG93ICksIHsgXCJ0aHJvdHRsZWRyZXNpemVcIjogXCJfcG9zaXRpb25QYW5lbFwiIH0pO1xyXG5cdH0sXHJcblxyXG5cdF91bmJpbmRGaXhMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vZmYoICQoIHdpbmRvdyApLCBcInRocm90dGxlZHJlc2l6ZVwiICk7XHJcblx0fSxcclxuXHJcblx0X3VuZml4UGFuZWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkICYmICQuc3VwcG9ydC5maXhlZFBvc2l0aW9uICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsRml4ZWQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZml4UGFuZWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkICYmICQuc3VwcG9ydC5maXhlZFBvc2l0aW9uICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsRml4ZWQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZFVwZGF0ZUxheW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0c2VsZi5lbGVtZW50Lm9uKCBcInVwZGF0ZWxheW91dFwiLCBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHRcdGlmICggc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRzZWxmLl9wb3NpdGlvblBhbmVsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9iaW5kTGlua0xpc3RlbmVyczogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggXCJib2R5XCIsIHtcclxuXHRcdFx0XCJjbGljayBhXCI6IFwiX2hhbmRsZUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0dmFyIGxpbmssXHJcblx0XHRcdHBhbmVsSWQgPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICk7XHJcblxyXG5cdFx0aWYgKCBlLmN1cnJlbnRUYXJnZXQuaHJlZi5zcGxpdCggXCIjXCIgKVsgMSBdID09PSBwYW5lbElkICYmIHBhbmVsSWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bGluayA9ICQoIGUudGFyZ2V0ICk7XHJcblx0XHRcdGlmICggbGluay5oYXNDbGFzcyggXCJ1aS1idG5cIiApICkge1xyXG5cdFx0XHRcdGxpbmsuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50Lm9uZSggXCJwYW5lbG9wZW4gcGFuZWxjbG9zZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGxpbmsucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy50b2dnbGUoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZFN3aXBlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0YXJlYSA9IHNlbGYuX21vZGFsID8gc2VsZi5lbGVtZW50LmFkZCggc2VsZi5fbW9kYWwgKSA6IHNlbGYuZWxlbWVudDtcclxuXHJcblx0XHQvLyBvbiBzd2lwZSwgY2xvc2UgdGhlIHBhbmVsXHJcblx0XHRpZiAoICEhc2VsZi5vcHRpb25zLnN3aXBlQ2xvc2UgKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnBvc2l0aW9uID09PSBcImxlZnRcIiApIHtcclxuXHRcdFx0XHRhcmVhLm9uKCBcInN3aXBlbGVmdC5wYW5lbFwiLCBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YXJlYS5vbiggXCJzd2lwZXJpZ2h0LnBhbmVsXCIsIGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kUGFnZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy5kb2N1bWVudFxyXG5cdFx0XHQvLyBDbG9zZSB0aGUgcGFuZWwgaWYgYW5vdGhlciBwYW5lbCBvbiB0aGUgcGFnZSBvcGVuc1xyXG5cdFx0XHQub24oIFwicGFuZWxiZWZvcmVvcGVuXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdGlmICggc2VsZi5fb3BlbiAmJiBlLnRhcmdldCAhPT0gc2VsZi5lbGVtZW50WyAwIF0gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQvLyBPbiBlc2NhcGUsIGNsb3NlPyBtaWdodCBuZWVkIHRvIGhhdmUgYSB0YXJnZXQgY2hlY2sgdG9vLi4uXHJcblx0XHRcdC5vbiggXCJrZXl1cC5wYW5lbFwiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRpZiAoIGUua2V5Q29kZSA9PT0gMjcgJiYgc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0aWYgKCAhdGhpcy5fcGFyZW50UGFnZSAmJiB0aGlzLm9wdGlvbnMuZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XHJcblx0XHRcdFx0XCJwYWdlc2hvd1wiOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRoaXMuX29wZW5lZFBhZ2UgPSBudWxsO1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0V3JhcHBlcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHQvLyBDbGVhbiB1cCBvcGVuIHBhbmVscyBhZnRlciBwYWdlIGhpZGVcclxuXHRcdGlmICggc2VsZi5fcGFyZW50UGFnZSApIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5vbiggXCJwYWdlaGlkZVwiLCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCB0cnVlICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQub24oIFwicGFnZWJlZm9yZWhpZGVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSggdHJ1ZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gc3RhdGUgc3RvcmFnZSBvZiBvcGVuIG9yIGNsb3NlZFxyXG5cdF9vcGVuOiBmYWxzZSxcclxuXHRfcGFnZUNvbnRlbnRPcGVuQ2xhc3NlczogbnVsbCxcclxuXHRfbW9kYWxPcGVuQ2xhc3NlczogbnVsbCxcclxuXHJcblx0b3BlbjogZnVuY3Rpb24oIGltbWVkaWF0ZSApIHtcclxuXHRcdGlmICggIXRoaXMuX29wZW4gKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRvID0gc2VsZi5vcHRpb25zLFxyXG5cclxuXHRcdFx0XHRfb3BlblBhbmVsID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9vZmYoIHNlbGYuZG9jdW1lbnQgLCBcInBhbmVsY2xvc2VcIiApO1xyXG5cdFx0XHRcdFx0c2VsZi5fcGFnZSgpLmpxbURhdGEoIFwicGFuZWxcIiwgXCJvcGVuXCIgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLmFkZENsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhaW1tZWRpYXRlICYmICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSApIHtcclxuXHRcdFx0XHRcdFx0KCBzZWxmLl93cmFwcGVyIHx8IHNlbGYuZWxlbWVudCApXHJcblx0XHRcdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKCBjb21wbGV0ZSwgXCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoIGNvbXBsZXRlLCAwICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLnRoZW1lICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi10aGVtZWQgXCIgKyBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLVwiICsgby50aGVtZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuZWxlbWVudFxyXG5cdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbENsb3NlZCApXHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyggby5jbGFzc2VzLnBhbmVsT3BlbiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3Bvc2l0aW9uUGFuZWwoIHRydWUgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzID0gc2VsZi5fZ2V0UG9zRGlzcGxheUNsYXNzZXMoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpLmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLmFkZENsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5hZGRDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX21vZGFsT3BlbkNsYXNzZXMgPSBzZWxmLl9nZXRQb3NEaXNwbGF5Q2xhc3Nlcyggby5jbGFzc2VzLm1vZGFsICkgKyBcIiBcIiArIG8uY2xhc3Nlcy5tb2RhbE9wZW47XHJcblx0XHRcdFx0XHRpZiAoIHNlbGYuX21vZGFsICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9tb2RhbFxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyggc2VsZi5fbW9kYWxPcGVuQ2xhc3NlcyApXHJcblx0XHRcdFx0XHRcdFx0LmhlaWdodCggTWF0aC5tYXgoIHNlbGYuX21vZGFsLmhlaWdodCgpLCBzZWxmLmRvY3VtZW50LmhlaWdodCgpICkgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQmFpbCBpZiB0aGUgcGFuZWwgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIG9wZW5pbmcgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWRcclxuXHRcdFx0XHRcdGlmICggIXNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX2JpbmRGaXhMaXN0ZW5lcigpO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoIFwib3BlblwiICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fb3BlbmVkUGFnZSA9IHNlbGYuX3BhZ2UoKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0c2VsZi5fdHJpZ2dlciggXCJiZWZvcmVvcGVuXCIgKTtcclxuXHJcblx0XHRcdGlmICggc2VsZi5fcGFnZSgpLmpxbURhdGEoIFwicGFuZWxcIiApID09PSBcIm9wZW5cIiApIHtcclxuXHRcdFx0XHRzZWxmLl9vbiggc2VsZi5kb2N1bWVudCwge1xyXG5cdFx0XHRcdFx0XCJwYW5lbGNsb3NlXCI6IF9vcGVuUGFuZWxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRfb3BlblBhbmVsKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuX29wZW4gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdGNsb3NlOiBmdW5jdGlvbiggaW1tZWRpYXRlICkge1xyXG5cdFx0aWYgKCB0aGlzLl9vcGVuICkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHJcblx0XHRcdFx0X2Nsb3NlUGFuZWwgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHRzZWxmLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbE9wZW4gKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIucmVtb3ZlQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhaW1tZWRpYXRlICYmICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSApIHtcclxuXHRcdFx0XHRcdFx0KCBzZWxmLl93cmFwcGVyIHx8IHNlbGYuZWxlbWVudCApXHJcblx0XHRcdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKCBjb21wbGV0ZSwgXCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoIGNvbXBsZXRlLCAwICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBzZWxmLl9tb2RhbCApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fbW9kYWxcclxuXHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHNlbGYuX21vZGFsT3BlbkNsYXNzZXMgKVxyXG5cdFx0XHRcdFx0XHRcdC5oZWlnaHQoIFwiXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZiAoIG8udGhlbWUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLXRoZW1lZCBcIiArIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItXCIgKyBvLnRoZW1lICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5lbGVtZW50LmFkZENsYXNzKCBvLmNsYXNzZXMucGFuZWxDbG9zZWQgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5yZW1vdmVDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX2ZpeFBhbmVsKCk7XHJcblx0XHRcdFx0XHRzZWxmLl91bmJpbmRGaXhMaXN0ZW5lcigpO1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fcGFnZSgpLmpxbVJlbW92ZURhdGEoIFwicGFuZWxcIiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoIFwiY2xvc2VcIiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX29wZW5lZFBhZ2UgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRzZWxmLl90cmlnZ2VyKCBcImJlZm9yZWNsb3NlXCIgKTtcclxuXHJcblx0XHRcdF9jbG9zZVBhbmVsKCk7XHJcblxyXG5cdFx0XHRzZWxmLl9vcGVuID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0dG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXNbIHRoaXMuX29wZW4gPyBcImNsb3NlXCIgOiBcIm9wZW5cIiBdKCk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG90aGVyUGFuZWxzLFxyXG5cdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdG11bHRpcGxlUGFuZWxzID0gKCAkKCBcImJvZHkgPiA6bW9iaWxlLXBhbmVsXCIgKS5sZW5ndGggKyAkLm1vYmlsZS5hY3RpdmVQYWdlLmZpbmQoIFwiOm1vYmlsZS1wYW5lbFwiICkubGVuZ3RoICkgPiAxO1xyXG5cclxuXHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHJcblx0XHRcdC8vICByZW1vdmUgdGhlIHdyYXBwZXIgaWYgbm90IGluIHVzZSBieSBhbm90aGVyIHBhbmVsXHJcblx0XHRcdG90aGVyUGFuZWxzID0gJCggXCJib2R5ID4gOm1vYmlsZS1wYW5lbFwiICkuYWRkKCAkLm1vYmlsZS5hY3RpdmVQYWdlLmZpbmQoIFwiOm1vYmlsZS1wYW5lbFwiICkgKTtcclxuXHRcdFx0aWYgKCBvdGhlclBhbmVscy5ub3QoIFwiLnVpLXBhbmVsLWRpc3BsYXktb3ZlcmxheVwiICkubm90KCB0aGlzLmVsZW1lbnQgKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0dGhpcy5fd3JhcHBlci5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX29wZW4gKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciApO1xyXG5cclxuXHRcdFx0XHRpZiAoIG8udGhlbWUgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItdGhlbWVkIFwiICsgby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi1cIiArIG8udGhlbWUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICFtdWx0aXBsZVBhbmVscyApIHtcclxuXHJcblx0XHRcdHRoaXMuZG9jdW1lbnQub2ZmKCBcInBhbmVsb3BlbiBwYW5lbGNsb3NlXCIgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9vcGVuICkge1xyXG5cdFx0XHR0aGlzLl9wYWdlKCkuanFtUmVtb3ZlRGF0YSggXCJwYW5lbFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcGFuZWxJbm5lci5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFsgdGhpcy5fZ2V0UGFuZWxDbGFzc2VzKCksIG8uY2xhc3Nlcy5wYW5lbE9wZW4sIG8uY2xhc3Nlcy5hbmltYXRlIF0uam9pbiggXCIgXCIgKSApXHJcblx0XHRcdC5vZmYoIFwic3dpcGVsZWZ0LnBhbmVsIHN3aXBlcmlnaHQucGFuZWxcIiApXHJcblx0XHRcdC5vZmYoIFwicGFuZWxiZWZvcmVvcGVuXCIgKVxyXG5cdFx0XHQub2ZmKCBcInBhbmVsaGlkZVwiIClcclxuXHRcdFx0Lm9mZiggXCJrZXl1cC5wYW5lbFwiIClcclxuXHRcdFx0Lm9mZiggXCJ1cGRhdGVsYXlvdXRcIiApO1xyXG5cclxuXHRcdGlmICggdGhpcy5fbW9kYWwgKSB7XHJcblx0XHRcdHRoaXMuX21vZGFsLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50YWJsZVwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0Y2xhc3Nlczoge1xyXG5cdFx0XHR0YWJsZTogXCJ1aS10YWJsZVwiXHJcblx0XHR9LFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMudGFibGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBleHRlbmQgaGVyZSwgYXNzaWduIG9uIHJlZnJlc2ggPiBfc2V0SGVhZGVyc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHJcblx0XHRcdC8vIEV4cG9zZSBoZWFkZXJzIGFuZCBhbGxIZWFkZXJzIHByb3BlcnRpZXMgb24gdGhlIHdpZGdldFxyXG5cdFx0XHQvLyBoZWFkZXJzIHJlZmVyZW5jZXMgdGhlIFRIcyB3aXRoaW4gdGhlIGZpcnN0IFRSIGluIHRoZSB0YWJsZVxyXG5cdFx0XHRoZWFkZXJzOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0XHQvLyBhbGxIZWFkZXJzIHJlZmVyZW5jZXMgaGVhZGVycywgcGx1cyBhbGwgVEhzIGluIHRoZSB0aGVhZCwgd2hpY2ggbWF5XHJcblx0XHRcdC8vIGluY2x1ZGUgc2V2ZXJhbCByb3dzLCBvciBub3RcclxuXHRcdFx0YWxsSGVhZGVyczogdW5kZWZpbmVkXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldEhlYWRlcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRycyA9IHRoaXMuZWxlbWVudC5maW5kKCBcInRoZWFkIHRyXCIgKTtcclxuXHJcblx0XHR0aGlzLmhlYWRlcnMgPSB0aGlzLmVsZW1lbnQuZmluZCggXCJ0cjplcSgwKVwiICkuY2hpbGRyZW4oKTtcclxuXHRcdHRoaXMuYWxsSGVhZGVycyA9IHRoaXMuaGVhZGVycy5hZGQoIHRycy5jaGlsZHJlbigpICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0cmVidWlsZDogJC5ub29wLFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIC8qIGNyZWF0ZSAqLyApIHtcclxuXHRcdHZhciB0YWJsZSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dHJzID0gdGFibGUuZmluZCggXCJ0aGVhZCB0clwiICk7XHJcblxyXG5cdFx0Ly8gdXBkYXRpbmcgaGVhZGVycyBvbiByZWZyZXNoIChmaXhlcyAjNTg4MClcclxuXHRcdHRoaXMuX3NldEhlYWRlcnMoKTtcclxuXHJcblx0XHQvLyBJdGVyYXRlIG92ZXIgdGhlIHRyc1xyXG5cdFx0dHJzLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY29sdW1uQ291bnQgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBjaGlsZHJlbiBvZiB0aGUgdHJcclxuXHRcdFx0JCggdGhpcyApLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHNwYW4gPSBwYXJzZUludCggdGhpcy5nZXRBdHRyaWJ1dGUoIFwiY29sc3BhblwiICksIDEwICksXHJcblx0XHRcdFx0XHRzZWxlY3RvciA9IFwiOm50aC1jaGlsZChcIiArICggY29sdW1uQ291bnQgKyAxICkgKyBcIilcIixcclxuXHRcdFx0XHRcdGo7XHJcblxyXG5cdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiY29sc3RhcnRcIiwgY29sdW1uQ291bnQgKyAxICk7XHJcblxyXG5cdFx0XHRcdGlmICggc3BhbiApIHtcclxuXHRcdFx0XHRcdGZvciggaiA9IDA7IGogPCBzcGFuIC0gMTsgaisrICkge1xyXG5cdFx0XHRcdFx0XHRjb2x1bW5Db3VudCsrO1xyXG5cdFx0XHRcdFx0XHRzZWxlY3RvciArPSBcIiwgOm50aC1jaGlsZChcIiArICggY29sdW1uQ291bnQgKyAxICkgKyBcIilcIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFN0b3JlIFwiY2VsbHNcIiBkYXRhIG9uIGhlYWRlciBhcyBhIHJlZmVyZW5jZSB0byBhbGwgY2VsbHMgaW4gdGhlXHJcblx0XHRcdFx0Ly8gc2FtZSBjb2x1bW4gYXMgdGhpcyBUSFxyXG5cdFx0XHRcdCQoIHRoaXMgKS5qcW1EYXRhKCBcImNlbGxzXCIsIHRhYmxlLmZpbmQoIFwidHJcIiApLm5vdCggdHJzLmVxKCAwICkgKS5ub3QoIHRoaXMgKS5jaGlsZHJlbiggc2VsZWN0b3IgKSApO1xyXG5cclxuXHRcdFx0XHRjb2x1bW5Db3VudCsrO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGFibGVcIiwgJC5tb2JpbGUudGFibGUsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRtb2RlOiBcImNvbHVtbnRvZ2dsZVwiLFxyXG5cdFx0Y29sdW1uQnRuVGhlbWU6IG51bGwsXHJcblx0XHRjb2x1bW5Qb3B1cFRoZW1lOiBudWxsLFxyXG5cdFx0Y29sdW1uQnRuVGV4dDogXCJDb2x1bW5zLi4uXCIsXHJcblx0XHRjbGFzc2VzOiAkLmV4dGVuZCggJC5tb2JpbGUudGFibGUucHJvdG90eXBlLm9wdGlvbnMuY2xhc3Nlcywge1xyXG5cdFx0XHRwb3B1cDogXCJ1aS10YWJsZS1jb2x1bW50b2dnbGUtcG9wdXBcIixcclxuXHRcdFx0Y29sdW1uQnRuOiBcInVpLXRhYmxlLWNvbHVtbnRvZ2dsZS1idG5cIixcclxuXHRcdFx0cHJpb3JpdHlQcmVmaXg6IFwidWktdGFibGUtcHJpb3JpdHktXCIsXHJcblx0XHRcdGNvbHVtblRvZ2dsZVRhYmxlOiBcInVpLXRhYmxlLWNvbHVtbnRvZ2dsZVwiXHJcblx0XHR9KVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlICE9PSBcImNvbHVtbnRvZ2dsZVwiICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X21lbnU6IG51bGxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9tZW51ID0gJCggdGhpcy5kb2N1bWVudFsgMCBdLmdldEVsZW1lbnRCeUlkKCB0aGlzLl9pZCgpICsgXCItcG9wdXBcIiApICkuY2hpbGRyZW4oKS5maXJzdCgpO1xyXG5cdFx0XHR0aGlzLl9hZGRUb2dnbGVzKCB0aGlzLl9tZW51LCB0cnVlICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9tZW51ID0gdGhpcy5fZW5oYW5jZUNvbFRvZ2dsZSgpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLmNvbHVtblRvZ2dsZVRhYmxlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2V0dXBFdmVudHMoKTtcclxuXHJcblx0XHR0aGlzLl9zZXRUb2dnbGVTdGF0ZSgpO1xyXG5cdH0sXHJcblxyXG5cdF9pZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICkgfHwgKCB0aGlzLndpZGdldE5hbWUgKyB0aGlzLnV1aWQgKSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cEV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHQvL05PVEU6IGlucHV0cyBhcmUgYm91bmQgaW4gYmluZFRvZ2dsZXMsXHJcblx0XHQvLyBzbyBpdCBjYW4gYmUgY2FsbGVkIG9uIHJlZnJlc2gsIHRvb1xyXG5cclxuXHRcdC8vIHVwZGF0ZSBjb2x1bW4gdG9nZ2xlcyBvbiByZXNpemVcclxuXHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xyXG5cdFx0XHR0aHJvdHRsZWRyZXNpemU6IFwiX3NldFRvZ2dsZVN0YXRlXCJcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuX21lbnUsIHtcclxuXHRcdFx0XCJjaGFuZ2UgaW5wdXRcIjogXCJfbWVudUlucHV0Q2hhbmdlXCJcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRUb2dnbGVzOiBmdW5jdGlvbiggbWVudSwga2VlcCApIHtcclxuXHRcdHZhciBpbnB1dHMsXHJcblx0XHRcdGNoZWNrYm94SW5kZXggPSAwLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRjb250YWluZXIgPSBtZW51LmNvbnRyb2xncm91cCggXCJjb250YWluZXJcIiApO1xyXG5cclxuXHRcdC8vIGFsbG93IHVwZGF0ZSBvZiBtZW51IG9uIHJlZnJlc2ggKGZpeGVzICM1ODgwKVxyXG5cdFx0aWYgKCBrZWVwICkge1xyXG5cdFx0XHRpbnB1dHMgPSBtZW51LmZpbmQoIFwiaW5wdXRcIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29udGFpbmVyLmVtcHR5KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY3JlYXRlIHRoZSBoaWRlL3Nob3cgdG9nZ2xlc1xyXG5cdFx0dGhpcy5oZWFkZXJzLm5vdCggXCJ0ZFwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBpbnB1dCwgY2VsbHMsXHJcblx0XHRcdFx0aGVhZGVyID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdHByaW9yaXR5ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcInByaW9yaXR5XCIgKTtcclxuXHJcblx0XHRcdGlmICggcHJpb3JpdHkgKSB7XHJcblx0XHRcdFx0Y2VsbHMgPSBoZWFkZXIuYWRkKCBoZWFkZXIuanFtRGF0YSggXCJjZWxsc1wiICkgKTtcclxuXHRcdFx0XHRjZWxscy5hZGRDbGFzcyggb3B0cy5jbGFzc2VzLnByaW9yaXR5UHJlZml4ICsgcHJpb3JpdHkgKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSAobmV3PykgY2hlY2tib3ggaXMgYXNzb2NpYXRlZCB3aXRoIGl0cyBoZWFkZXIgdmlhIC5qcW1EYXRhKCkgYW5kXHJcblx0XHRcdFx0Ly8gdGhhdCwgdmljZSB2ZXJzYSwgdGhlIGhlYWRlciBpcyBhbHNvIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2hlY2tib3hcclxuXHRcdFx0XHRpbnB1dCA9ICgga2VlcCA/IGlucHV0cy5lcSggY2hlY2tib3hJbmRleCsrICkgOlxyXG5cdFx0XHRcdFx0JChcIjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGNoZWNrZWQgLz5cIiArXHJcblx0XHRcdFx0XHRcdCggaGVhZGVyLmNoaWxkcmVuKCBcImFiYnJcIiApLmZpcnN0KCkuYXR0ciggXCJ0aXRsZVwiICkgfHxcclxuXHRcdFx0XHRcdFx0XHRoZWFkZXIudGV4dCgpICkgK1xyXG5cdFx0XHRcdFx0XHRcIjwvbGFiZWw+XCIgKVxyXG5cdFx0XHRcdFx0XHQuYXBwZW5kVG8oIGNvbnRhaW5lciApXHJcblx0XHRcdFx0XHRcdC5jaGlsZHJlbiggMCApXHJcblx0XHRcdFx0XHRcdC5jaGVja2JveHJhZGlvKCB7XHJcblx0XHRcdFx0XHRcdFx0dGhlbWU6IG9wdHMuY29sdW1uUG9wdXBUaGVtZVxyXG5cdFx0XHRcdFx0XHR9KSApXHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBc3NvY2lhdGUgdGhlIGhlYWRlciB3aXRoIHRoZSBjaGVja2JveFxyXG5cdFx0XHRcdFx0XHQuanFtRGF0YSggXCJoZWFkZXJcIiwgaGVhZGVyIClcclxuXHRcdFx0XHRcdFx0LmpxbURhdGEoIFwiY2VsbHNcIiwgY2VsbHMgKTtcclxuXHJcblx0XHRcdFx0Ly8gQXNzb2NpYXRlIHRoZSBjaGVja2JveCB3aXRoIHRoZSBoZWFkZXJcclxuXHRcdFx0XHRoZWFkZXIuanFtRGF0YSggXCJpbnB1dFwiLCBpbnB1dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBzZXQgYmluZGluZ3MgaGVyZVxyXG5cdFx0aWYgKCAha2VlcCApIHtcclxuXHRcdFx0bWVudS5jb250cm9sZ3JvdXAoIFwicmVmcmVzaFwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X21lbnVJbnB1dENoYW5nZTogZnVuY3Rpb24oIGV2dCApIHtcclxuXHRcdHZhciBpbnB1dCA9ICQoIGV2dC50YXJnZXQgKSxcclxuXHRcdFx0Y2hlY2tlZCA9IGlucHV0WyAwIF0uY2hlY2tlZDtcclxuXHJcblx0XHRpbnB1dC5qcW1EYXRhKCBcImNlbGxzXCIgKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFibGUtY2VsbC1oaWRkZW5cIiwgIWNoZWNrZWQgKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFibGUtY2VsbC12aXNpYmxlXCIsIGNoZWNrZWQgKTtcclxuXHR9LFxyXG5cclxuXHRfdW5sb2NrQ2VsbHM6IGZ1bmN0aW9uKCBjZWxscyApIHtcclxuXHRcdC8vIGFsbG93IGhpZGUvc2hvdyB2aWEgQ1NTIG9ubHkgPSByZW1vdmUgYWxsIHRvZ2dsZS1sb2Nrc1xyXG5cdFx0Y2VsbHMucmVtb3ZlQ2xhc3MoIFwidWktdGFibGUtY2VsbC1oaWRkZW4gdWktdGFibGUtY2VsbC12aXNpYmxlXCIpO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlQ29sVG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpZCAsIG1lbnVCdXR0b24sIHBvcHVwLCBtZW51LFxyXG5cdFx0XHR0YWJsZSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0bnMgPSAkLm1vYmlsZS5ucyxcclxuXHRcdFx0ZnJhZ21lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuXHRcdGlkID0gdGhpcy5faWQoKSArIFwiLXBvcHVwXCI7XHJcblx0XHRtZW51QnV0dG9uID0gJCggXCI8YSBocmVmPScjXCIgKyBpZCArIFwiJyBcIiArXHJcblx0XHRcdFwiY2xhc3M9J1wiICsgb3B0cy5jbGFzc2VzLmNvbHVtbkJ0biArIFwiIHVpLWJ0biBcIiArXHJcblx0XHRcdFwidWktYnRuLVwiICsgKCBvcHRzLmNvbHVtbkJ0blRoZW1lIHx8IFwiYVwiICkgK1xyXG5cdFx0XHRcIiB1aS1jb3JuZXItYWxsIHVpLXNoYWRvdyB1aS1taW5pJyBcIiArXHJcblx0XHRcdFwiZGF0YS1cIiArIG5zICsgXCJyZWw9J3BvcHVwJz5cIiArIG9wdHMuY29sdW1uQnRuVGV4dCArIFwiPC9hPlwiICk7XHJcblx0XHRwb3B1cCA9ICQoIFwiPGRpdiBjbGFzcz0nXCIgKyBvcHRzLmNsYXNzZXMucG9wdXAgKyBcIicgaWQ9J1wiICsgaWQgKyBcIic+PC9kaXY+XCIgKTtcclxuXHRcdG1lbnUgPSAkKCBcIjxmaWVsZHNldD48L2ZpZWxkc2V0PlwiICkuY29udHJvbGdyb3VwKCk7XHJcblxyXG5cdFx0Ly8gc2V0IGV4dGVuc2lvbiBoZXJlLCBzZW5kIFwiZmFsc2VcIiB0byB0cmlnZ2VyIGJ1aWxkL3JlYnVpbGRcclxuXHRcdHRoaXMuX2FkZFRvZ2dsZXMoIG1lbnUsIGZhbHNlICk7XHJcblxyXG5cdFx0bWVudS5hcHBlbmRUbyggcG9wdXAgKTtcclxuXHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggcG9wdXBbIDAgXSApO1xyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIG1lbnVCdXR0b25bIDAgXSApO1xyXG5cdFx0dGFibGUuYmVmb3JlKCBmcmFnbWVudCApO1xyXG5cclxuXHRcdHBvcHVwLnBvcHVwKCk7XHJcblxyXG5cdFx0cmV0dXJuIG1lbnU7XHJcblx0fSxcclxuXHJcblx0cmVidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgPT09IFwiY29sdW1udG9nZ2xlXCIgKSB7XHJcblx0XHRcdC8vIE5PVEU6IHJlYnVpbGQgcGFzc2VzIFwiZmFsc2VcIiwgd2hpbGUgcmVmcmVzaCBwYXNzZXMgXCJ1bmRlZmluZWRcIlxyXG5cdFx0XHQvLyBib3RoIHJlZnJlc2ggdGhlIHRhYmxlLCBidXQgaW5zaWRlIGFkZFRvZ2dsZXMsICFmYWxzZSB3aWxsIGJlIHRydWUsXHJcblx0XHRcdC8vIHNvIGEgcmVidWlsZCBjYWxsIGNhbiBiZSBpbmRlbnRpZmllZFxyXG5cdFx0XHR0aGlzLl9yZWZyZXNoKCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIGhlYWRlcnMsIGhpZGRlbkNvbHVtbnMsIGluZGV4O1xyXG5cclxuXHRcdC8vIENhbGxpbmcgX3N1cGVyKCkgaGVyZSB1cGRhdGVzIHRoaXMuaGVhZGVyc1xyXG5cdFx0dGhpcy5fc3VwZXIoIGNyZWF0ZSApO1xyXG5cclxuXHRcdGlmICggIWNyZWF0ZSAmJiB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJjb2x1bW50b2dnbGVcIiApIHtcclxuXHRcdFx0aGVhZGVycyA9IHRoaXMuaGVhZGVycztcclxuXHRcdFx0aGlkZGVuQ29sdW1ucyA9IFtdO1xyXG5cclxuXHRcdFx0Ly8gRmluZCB0aGUgaW5kZXggb2YgdGhlIGNvbHVtbiBoZWFkZXIgYXNzb2NpYXRlZCB3aXRoIGVhY2ggb2xkIGNoZWNrYm94IGFtb25nIHRoZVxyXG5cdFx0XHQvLyBwb3N0LXJlZnJlc2ggaGVhZGVycyBhbmQsIGlmIHRoZSBoZWFkZXIgaXMgc3RpbGwgdGhlcmUsIG1ha2Ugc3VyZSB0aGUgY29ycmVzcG9uZGluZ1xyXG5cdFx0XHQvLyBjb2x1bW4gd2lsbCBiZSBoaWRkZW4gaWYgdGhlIHByZS1yZWZyZXNoIGNoZWNrYm94IGluZGljYXRlcyB0aGF0IHRoZSBjb2x1bW4gaXNcclxuXHRcdFx0Ly8gaGlkZGVuIGJ5IHJlY29yZGluZyBpdHMgaW5kZXggaW4gdGhlIGFycmF5IG9mIGhpZGRlbiBjb2x1bW5zLlxyXG5cdFx0XHR0aGlzLl9tZW51LmZpbmQoIFwiaW5wdXRcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBpbnB1dCA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdGhlYWRlciA9IGlucHV0LmpxbURhdGEoIFwiaGVhZGVyXCIgKSxcclxuXHRcdFx0XHRcdGluZGV4ID0gaGVhZGVycy5pbmRleCggaGVhZGVyWyAwIF0gKTtcclxuXHJcblx0XHRcdFx0aWYgKCBpbmRleCA+IC0xICYmICFpbnB1dC5wcm9wKCBcImNoZWNrZWRcIiApICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFRoZSBjb2x1bW4gaGVhZGVyIGFzc29jaWF0ZWQgd2l0aCAvdGhpcy8gY2hlY2tib3ggaXMgc3RpbGwgcHJlc2VudCBpbiB0aGVcclxuXHRcdFx0XHRcdC8vIHBvc3QtcmVmcmVzaCB0YWJsZSBhbmQgdGhlIGNoZWNrYm94IGlzIG5vdCBjaGVja2VkLCBzbyB0aGUgY29sdW1uIGFzc29jaWF0ZWRcclxuXHRcdFx0XHRcdC8vIHdpdGggdGhpcyBjb2x1bW4gaGVhZGVyIGlzIGN1cnJlbnRseSBoaWRkZW4uIExldCdzIHJlY29yZCB0aGF0LlxyXG5cdFx0XHRcdFx0aGlkZGVuQ29sdW1ucy5wdXNoKCBpbmRleCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBjb2x1bW5zIG5vdCBiZWluZyByZXBsYWNlZCBtdXN0IGJlIGNsZWFyZWQgZnJvbSBpbnB1dCB0b2dnbGUtbG9ja3NcclxuXHRcdFx0dGhpcy5fdW5sb2NrQ2VsbHMoIHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS10YWJsZS1jZWxsLWhpZGRlbiwgXCIgK1xyXG5cdFx0XHRcdFwiLnVpLXRhYmxlLWNlbGwtdmlzaWJsZVwiICkgKTtcclxuXHJcblx0XHRcdC8vIHVwZGF0ZSBjb2x1bW50b2dnbGVzIGFuZCBjZWxsc1xyXG5cdFx0XHR0aGlzLl9hZGRUb2dnbGVzKCB0aGlzLl9tZW51LCBjcmVhdGUgKTtcclxuXHJcblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQgYWxsIGNvbHVtbnMgYXJlIHZpc2libGUsIHNvIHVuY2hlY2sgdGhlIGNoZWNrYm94ZXMgdGhhdCBjb3JyZXNwb25kIHRvXHJcblx0XHRcdC8vIHRob3NlIGNvbHVtbnMgd2UndmUgZm91bmQgdG8gYmUgaGlkZGVuXHJcblx0XHRcdGZvciAoIGluZGV4ID0gaGlkZGVuQ29sdW1ucy5sZW5ndGggLSAxIDsgaW5kZXggPiAtMSA7IGluZGV4LS0gKSB7XHJcblx0XHRcdFx0aGVhZGVycy5lcSggaGlkZGVuQ29sdW1uc1sgaW5kZXggXSApLmpxbURhdGEoIFwiaW5wdXRcIiApXHJcblx0XHRcdFx0XHQucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlIClcclxuXHRcdFx0XHRcdC5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApXHJcblx0XHRcdFx0XHQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldFRvZ2dsZVN0YXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX21lbnUuZmluZCggXCJpbnB1dFwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjaGVja2JveCA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdHRoaXMuY2hlY2tlZCA9IGNoZWNrYm94LmpxbURhdGEoIFwiY2VsbHNcIiApLmVxKCAwICkuY3NzKCBcImRpc3BsYXlcIiApID09PSBcInRhYmxlLWNlbGxcIjtcclxuXHRcdFx0Y2hlY2tib3guY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRhYmxlXCIsICQubW9iaWxlLnRhYmxlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0bW9kZTogXCJyZWZsb3dcIixcclxuXHRcdGNsYXNzZXM6ICQuZXh0ZW5kKCAkLm1vYmlsZS50YWJsZS5wcm90b3R5cGUub3B0aW9ucy5jbGFzc2VzLCB7XHJcblx0XHRcdHJlZmxvd1RhYmxlOiBcInVpLXRhYmxlLXJlZmxvd1wiLFxyXG5cdFx0XHRjZWxsTGFiZWxzOiBcInVpLXRhYmxlLWNlbGwtbGFiZWxcIlxyXG5cdFx0fSlcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0Ly8gSWYgaXQncyBub3QgcmVmbG93IG1vZGUsIHJldHVybiBoZXJlLlxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSAhPT0gXCJyZWZsb3dcIiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5yZWZsb3dUYWJsZSApO1xyXG5cclxuXHRcdFx0dGhpcy5fdXBkYXRlUmVmbG93KCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0cmVidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgPT09IFwicmVmbG93XCIgKSB7XHJcblx0XHRcdHRoaXMuX3JlZnJlc2goIGZhbHNlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR0aGlzLl9zdXBlciggY3JlYXRlICk7XHJcblx0XHRpZiAoICFjcmVhdGUgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09IFwicmVmbG93XCIgKSB7XHJcblx0XHRcdHRoaXMuX3VwZGF0ZVJlZmxvdyggKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdXBkYXRlUmVmbG93OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0YWJsZSA9IHRoaXMsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gZ2V0IGhlYWRlcnMgaW4gcmV2ZXJzZSBvcmRlciBzbyB0aGF0IHRvcC1sZXZlbCBoZWFkZXJzIGFyZSBhcHBlbmRlZCBsYXN0XHJcblx0XHQkKCB0YWJsZS5hbGxIZWFkZXJzLmdldCgpLnJldmVyc2UoKSApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2VsbHMgPSAkKCB0aGlzICkuanFtRGF0YSggXCJjZWxsc1wiICksXHJcblx0XHRcdFx0Y29sc3RhcnQgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwiY29sc3RhcnRcIiApLFxyXG5cdFx0XHRcdGhpZXJhcmNoeUNsYXNzID0gY2VsbHMubm90KCB0aGlzICkuZmlsdGVyKCBcInRoZWFkIHRoXCIgKS5sZW5ndGggJiYgXCIgdWktdGFibGUtY2VsbC1sYWJlbC10b3BcIixcclxuXHRcdFx0XHRjb250ZW50cyA9ICQoIHRoaXMgKS5jbG9uZSgpLmNvbnRlbnRzKCksXHJcblx0XHRcdFx0aXRlcmF0aW9uLCBmaWx0ZXI7XHJcblxyXG5cdFx0XHRcdGlmICggY29udGVudHMubGVuZ3RoID4gMCAgKSB7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBoaWVyYXJjaHlDbGFzcyApIHtcclxuXHRcdFx0XHRcdFx0aXRlcmF0aW9uID0gcGFyc2VJbnQoIHRoaXMuZ2V0QXR0cmlidXRlKCBcImNvbHNwYW5cIiApLCAxMCApO1xyXG5cdFx0XHRcdFx0XHRmaWx0ZXIgPSBcIlwiO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBpdGVyYXRpb24gKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmlsdGVyID0gXCJ0ZDpudGgtY2hpbGQoXCIrIGl0ZXJhdGlvbiArXCJuICsgXCIgKyAoIGNvbHN0YXJ0ICkgK1wiKVwiO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR0YWJsZS5fYWRkTGFiZWxzKCBjZWxscy5maWx0ZXIoIGZpbHRlciApLFxyXG5cdFx0XHRcdFx0XHRcdG9wdHMuY2xhc3Nlcy5jZWxsTGFiZWxzICsgaGllcmFyY2h5Q2xhc3MsIGNvbnRlbnRzICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0YWJsZS5fYWRkTGFiZWxzKCBjZWxscywgb3B0cy5jbGFzc2VzLmNlbGxMYWJlbHMsIGNvbnRlbnRzICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRMYWJlbHM6IGZ1bmN0aW9uKCBjZWxscywgbGFiZWwsIGNvbnRlbnRzICkge1xyXG5cdFx0aWYgKCBjb250ZW50cy5sZW5ndGggPT09IDEgJiYgY29udGVudHNbIDAgXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFiYnJcIiApIHtcclxuXHRcdFx0Y29udGVudHMgPSBjb250ZW50cy5lcSggMCApLmF0dHIoIFwidGl0bGVcIiApO1xyXG5cdFx0fVxyXG5cdFx0Ly8gLm5vdCBmaXhlcyAjNjAwNlxyXG5cdFx0Y2VsbHNcclxuXHRcdFx0Lm5vdCggXCI6aGFzKGIuXCIgKyBsYWJlbCArIFwiKVwiIClcclxuXHRcdFx0XHQucHJlcGVuZCggJCggXCI8YiBjbGFzcz0nXCIgKyBsYWJlbCArIFwiJz48L2I+XCIgKS5hcHBlbmQoIGNvbnRlbnRzICkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBUT0RPIHJlbmFtZSBmaWx0ZXJDYWxsYmFjay9kZXByZWNhdGUgYW5kIGRlZmF1bHQgdG8gdGhlIGl0ZW0gaXRzZWxmIGFzIHRoZSBmaXJzdCBhcmd1bWVudFxyXG52YXIgZGVmYXVsdEZpbHRlckNhbGxiYWNrID0gZnVuY3Rpb24oIGluZGV4LCBzZWFyY2hWYWx1ZSApIHtcclxuXHRyZXR1cm4gKCAoIFwiXCIgKyAoICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJmaWx0ZXJ0ZXh0XCIgKSB8fCAkKCB0aGlzICkudGV4dCgpICkgKVxyXG5cdFx0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggc2VhcmNoVmFsdWUgKSA9PT0gLTEgKTtcclxufTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5maWx0ZXJhYmxlXCIsIHtcclxuXHJcblx0aW5pdFNlbGVjdG9yOiBcIjpqcW1EYXRhKGZpbHRlcj0ndHJ1ZScpXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGZpbHRlclJldmVhbDogZmFsc2UsXHJcblx0XHRmaWx0ZXJDYWxsYmFjazogZGVmYXVsdEZpbHRlckNhbGxiYWNrLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0aW5wdXQ6IG51bGwsXHJcblx0XHRjaGlsZHJlbjogXCI+IGxpLCA+IG9wdGlvbiwgPiBvcHRncm91cCBvcHRpb24sID4gdGJvZHkgdHIsID4gLnVpLWNvbnRyb2xncm91cC1jb250cm9scyA+IC51aS1idG4sID4gLnVpLWNvbnRyb2xncm91cC1jb250cm9scyA+IC51aS1jaGVja2JveCwgPiAudWktY29udHJvbGdyb3VwLWNvbnRyb2xzID4gLnVpLXJhZGlvXCJcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9zZWFyY2g6IG51bGwsXHJcblx0XHRcdF90aW1lcjogMFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fc2V0SW5wdXQoIG9wdHMuaW5wdXQgKTtcclxuXHRcdGlmICggIW9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2ZpbHRlckl0ZW1zKCAoICggdGhpcy5fc2VhcmNoICYmIHRoaXMuX3NlYXJjaC52YWwoKSApIHx8IFwiXCIgKS50b0xvd2VyQ2FzZSgpICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X29uS2V5VXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHZhbCwgbGFzdHZhbCxcclxuXHRcdFx0c2VhcmNoID0gdGhpcy5fc2VhcmNoO1xyXG5cclxuXHRcdGlmICggc2VhcmNoICkge1xyXG5cdFx0XHR2YWwgPSBzZWFyY2gudmFsKCkudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0bGFzdHZhbCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggc2VhcmNoWyAwIF0sIFwibGFzdHZhbFwiICkgKyBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKCBsYXN0dmFsICYmIGxhc3R2YWwgPT09IHZhbCApIHtcclxuXHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBoYW5kbGVyIG9ubHkgb25jZSBwZXIgdmFsdWUgY2hhbmdlXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX3RpbWVyICkge1xyXG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRoaXMuX3RpbWVyICk7XHJcblx0XHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl90aW1lciA9IHRoaXMuX2RlbGF5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlZmlsdGVyXCIsIG51bGwsIHsgaW5wdXQ6IHNlYXJjaCB9ICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ2hhbmdlIHZhbCBhcyBsYXN0dmFsIGZvciBuZXh0IGV4ZWN1dGlvblxyXG5cdFx0XHRcdHNlYXJjaFsgMCBdLnNldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImxhc3R2YWxcIiwgdmFsICk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX2ZpbHRlckl0ZW1zKCB2YWwgKTtcclxuXHRcdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHRcdH0sIDI1MCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9nZXRGaWx0ZXJhYmxlSXRlbXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGNoaWxkcmVuID0gdGhpcy5vcHRpb25zLmNoaWxkcmVuLFxyXG5cdFx0XHRpdGVtcyA9ICFjaGlsZHJlbiA/IHsgbGVuZ3RoOiAwIH06XHJcblx0XHRcdFx0JC5pc0Z1bmN0aW9uKCBjaGlsZHJlbiApID8gY2hpbGRyZW4oKTpcclxuXHRcdFx0XHRjaGlsZHJlbi5ub2RlTmFtZSA/ICQoIGNoaWxkcmVuICk6XHJcblx0XHRcdFx0Y2hpbGRyZW4uanF1ZXJ5ID8gY2hpbGRyZW46XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIGNoaWxkcmVuICk7XHJcblxyXG5cdFx0aWYgKCBpdGVtcy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdGl0ZW1zID0gZWxlbS5jaGlsZHJlbigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpdGVtcztcclxuXHR9LFxyXG5cclxuXHRfZmlsdGVySXRlbXM6IGZ1bmN0aW9uKCB2YWwgKSB7XHJcblx0XHR2YXIgaWR4LCBjYWxsYmFjaywgbGVuZ3RoLCBkc3QsXHJcblx0XHRcdHNob3cgPSBbXSxcclxuXHRcdFx0aGlkZSA9IFtdLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRmaWx0ZXJJdGVtcyA9IHRoaXMuX2dldEZpbHRlcmFibGVJdGVtcygpO1xyXG5cclxuXHRcdGlmICggdmFsICE9IG51bGwgKSB7XHJcblx0XHRcdGNhbGxiYWNrID0gb3B0cy5maWx0ZXJDYWxsYmFjayB8fCBkZWZhdWx0RmlsdGVyQ2FsbGJhY2s7XHJcblx0XHRcdGxlbmd0aCA9IGZpbHRlckl0ZW1zLmxlbmd0aDtcclxuXHJcblx0XHRcdC8vIFBhcnRpdGlvbiB0aGUgaXRlbXMgaW50byB0aG9zZSB0byBiZSBoaWRkZW4gYW5kIHRob3NlIHRvIGJlIHNob3duXHJcblx0XHRcdGZvciAoIGlkeCA9IDAgOyBpZHggPCBsZW5ndGggOyBpZHgrKyApIHtcclxuXHRcdFx0XHRkc3QgPSAoIGNhbGxiYWNrLmNhbGwoIGZpbHRlckl0ZW1zWyBpZHggXSwgaWR4LCB2YWwgKSApID8gaGlkZSA6IHNob3c7XHJcblx0XHRcdFx0ZHN0LnB1c2goIGZpbHRlckl0ZW1zWyBpZHggXSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgbm90aGluZyBpcyBoaWRkZW4sIHRoZW4gdGhlIGRlY2lzaW9uIHdoZXRoZXIgdG8gaGlkZSBvciBzaG93IHRoZSBpdGVtc1xyXG5cdFx0Ly8gaXMgYmFzZWQgb24gdGhlIFwiZmlsdGVyUmV2ZWFsXCIgb3B0aW9uLlxyXG5cdFx0aWYgKCBoaWRlLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0ZmlsdGVySXRlbXNbICggb3B0cy5maWx0ZXJSZXZlYWwgJiYgdmFsLmxlbmd0aCA9PT0gMCApID9cclxuXHRcdFx0XHRcImFkZENsYXNzXCIgOiBcInJlbW92ZUNsYXNzXCIgXSggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoIGhpZGUgKS5hZGRDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdFx0JCggc2hvdyApLnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2hDaGlsZFdpZGdldCgpO1xyXG5cclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiZmlsdGVyXCIsIG51bGwsIHtcclxuXHRcdFx0aXRlbXM6IGZpbHRlckl0ZW1zXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHQvLyBUaGUgRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBfcmVmcmVzaENoaWxkV2lkZ2V0IGF0dGVtcHRzIHRvIGNhbGxcclxuXHQvLyByZWZyZXNoIG9uIGNvbGxhcHNpYmxlc2V0LCBjb250cm9sZ3JvdXAsIHNlbGVjdG1lbnUsIG9yIGxpc3R2aWV3XHJcblx0X3JlZnJlc2hDaGlsZFdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd2lkZ2V0LCBpZHgsXHJcblx0XHRcdHJlY29nbml6ZWRXaWRnZXRzID0gWyBcImNvbGxhcHNpYmxlc2V0XCIsIFwic2VsZWN0bWVudVwiLCBcImNvbnRyb2xncm91cFwiLCBcImxpc3R2aWV3XCIgXTtcclxuXHJcblx0XHRmb3IgKCBpZHggPSByZWNvZ25pemVkV2lkZ2V0cy5sZW5ndGggLSAxIDsgaWR4ID4gLTEgOyBpZHgtLSApIHtcclxuXHRcdFx0d2lkZ2V0ID0gcmVjb2duaXplZFdpZGdldHNbIGlkeCBdO1xyXG5cdFx0XHRpZiAoICQubW9iaWxlWyB3aWRnZXQgXSApIHtcclxuXHRcdFx0XHR3aWRnZXQgPSB0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtXCIgKyB3aWRnZXQgKTtcclxuXHRcdFx0XHRpZiAoIHdpZGdldCAmJiAkLmlzRnVuY3Rpb24oIHdpZGdldC5yZWZyZXNoICkgKSB7XHJcblx0XHRcdFx0XHR3aWRnZXQucmVmcmVzaCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIFRPRE86IFdoZW4gdGhlIGlucHV0IGlzIG5vdCBpbnRlcm5hbCwgZG8gbm90IGV2ZW4gc3RvcmUgaXQgaW4gdGhpcy5fc2VhcmNoXHJcblx0X3NldElucHV0OiBmdW5jdGlvbiAoIHNlbGVjdG9yICkge1xyXG5cdFx0dmFyIHNlYXJjaCA9IHRoaXMuX3NlYXJjaDtcclxuXHJcblx0XHQvLyBTdG9wIGEgcGVuZGluZyBmaWx0ZXIgb3BlcmF0aW9uXHJcblx0XHRpZiAoIHRoaXMuX3RpbWVyICkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG5cdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzZWFyY2ggKSB7XHJcblx0XHRcdHRoaXMuX29mZiggc2VhcmNoLCBcImtleXVwIGNoYW5nZSBpbnB1dFwiICk7XHJcblx0XHRcdHNlYXJjaCA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzZWxlY3RvciApIHtcclxuXHRcdFx0c2VhcmNoID0gc2VsZWN0b3IuanF1ZXJ5ID8gc2VsZWN0b3I6XHJcblx0XHRcdFx0c2VsZWN0b3Iubm9kZU5hbWUgPyAkKCBzZWxlY3RvciApOlxyXG5cdFx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggc2VsZWN0b3IgKTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCBzZWFyY2gsIHtcclxuXHRcdFx0XHRrZXlkb3duOiBcIl9vbktleURvd25cIixcclxuXHRcdFx0XHRrZXlwcmVzczogXCJfb25LZXlQcmVzc1wiLFxyXG5cdFx0XHRcdGtleXVwOiBcIl9vbktleVVwXCIsXHJcblx0XHRcdFx0Y2hhbmdlOiBcIl9vbktleVVwXCIsXHJcblx0XHRcdFx0aW5wdXQ6IFwiX29uS2V5VXBcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zZWFyY2ggPSBzZWFyY2g7XHJcblx0fSxcclxuXHJcblx0Ly8gUHJldmVudCBmb3JtIHN1Ym1pc3Npb25cclxuXHRfb25LZXlEb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FTlRFUiApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dGhpcy5fcHJldmVudEtleVByZXNzID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfb25LZXlQcmVzczogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9wcmV2ZW50S2V5UHJlc3MgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuX3ByZXZlbnRLZXlQcmVzcyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciByZWZpbHRlciA9ICEoICggb3B0aW9ucy5maWx0ZXJSZXZlYWwgPT09IHVuZGVmaW5lZCApICYmXHJcblx0XHRcdFx0KCBvcHRpb25zLmZpbHRlckNhbGxiYWNrID09PSB1bmRlZmluZWQgKSAmJlxyXG5cdFx0XHRcdCggb3B0aW9ucy5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICkgKTtcclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5pbnB1dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRJbnB1dCggb3B0aW9ucy5pbnB1dCApO1xyXG5cdFx0XHRyZWZpbHRlciA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCByZWZpbHRlciApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGl0ZW1zID0gdGhpcy5fZ2V0RmlsdGVyYWJsZUl0ZW1zKCk7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRpdGVtcy50b2dnbGVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIsIG9wdHMuZmlsdGVyUmV2ZWFsICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpdGVtcy5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5fdGltZXIgKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRoaXMuX3RpbWVyICk7XHJcblx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2ZpbHRlckl0ZW1zKCAoICggdGhpcy5fc2VhcmNoICYmIHRoaXMuX3NlYXJjaC52YWwoKSApIHx8IFwiXCIgKS50b0xvd2VyQ2FzZSgpICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gQ3JlYXRlIGEgZnVuY3Rpb24gdGhhdCB3aWxsIHJlcGxhY2UgdGhlIF9zZXRPcHRpb25zIGZ1bmN0aW9uIG9mIGEgd2lkZ2V0LFxyXG4vLyBhbmQgd2lsbCBwYXNzIHRoZSBvcHRpb25zIG9uIHRvIHRoZSBpbnB1dCBvZiB0aGUgZmlsdGVyYWJsZS5cclxudmFyIHJlcGxhY2VTZXRPcHRpb25zID0gZnVuY3Rpb24oIHNlbGYsIG9yaWcgKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdG9yaWcuY2FsbCggdGhpcywgb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9zeW5jVGV4dElucHV0T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cdFx0fTtcclxuXHR9LFxyXG5cdHJEaXZpZGVyTGlzdEl0ZW0gPSAvKF58XFxzKXVpLWxpLWRpdmlkZXIoXFxzfCQpLyxcclxuXHRvcmlnRGVmYXVsdEZpbHRlckNhbGxiYWNrID0gJC5tb2JpbGUuZmlsdGVyYWJsZS5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXJDYWxsYmFjaztcclxuXHJcbi8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGZpbHRlciBjYWxsYmFjayB3aXRoIG9uZSB0aGF0IGRvZXMgbm90IGhpZGUgbGlzdCBkaXZpZGVyc1xyXG4kLm1vYmlsZS5maWx0ZXJhYmxlLnByb3RvdHlwZS5vcHRpb25zLmZpbHRlckNhbGxiYWNrID0gZnVuY3Rpb24oIGluZGV4LCBzZWFyY2hWYWx1ZSApIHtcclxuXHRyZXR1cm4gIXRoaXMuY2xhc3NOYW1lLm1hdGNoKCByRGl2aWRlckxpc3RJdGVtICkgJiZcclxuXHRcdG9yaWdEZWZhdWx0RmlsdGVyQ2FsbGJhY2suY2FsbCggdGhpcywgaW5kZXgsIHNlYXJjaFZhbHVlICk7XHJcbn07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZmlsdGVyYWJsZVwiLCAkLm1vYmlsZS5maWx0ZXJhYmxlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZmlsdGVyUGxhY2Vob2xkZXI6IFwiRmlsdGVyIGl0ZW1zLi4uXCIsXHJcblx0XHRmaWx0ZXJUaGVtZTogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlkeCwgd2lkZ2V0TmFtZSxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0cmVjb2duaXplZFdpZGdldHMgPSBbIFwiY29sbGFwc2libGVzZXRcIiwgXCJzZWxlY3RtZW51XCIsIFwiY29udHJvbGdyb3VwXCIsIFwibGlzdHZpZXdcIiBdLFxyXG5cdFx0XHRjcmVhdGVIYW5kbGVycyA9IHt9O1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3dpZGdldDogbnVsbFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Zm9yICggaWR4ID0gcmVjb2duaXplZFdpZGdldHMubGVuZ3RoIC0gMSA7IGlkeCA+IC0xIDsgaWR4LS0gKSB7XHJcblx0XHRcdHdpZGdldE5hbWUgPSByZWNvZ25pemVkV2lkZ2V0c1sgaWR4IF07XHJcblx0XHRcdGlmICggJC5tb2JpbGVbIHdpZGdldE5hbWUgXSApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX3NldFdpZGdldCggZWxlbS5kYXRhKCBcIm1vYmlsZS1cIiArIHdpZGdldE5hbWUgKSApICkge1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNyZWF0ZUhhbmRsZXJzWyB3aWRnZXROYW1lICsgXCJjcmVhdGVcIiBdID0gXCJfaGFuZGxlQ3JlYXRlXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5fd2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl9vbiggZWxlbSwgY3JlYXRlSGFuZGxlcnMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQ3JlYXRlOiBmdW5jdGlvbiggZXZ0ICkge1xyXG5cdFx0dGhpcy5fc2V0V2lkZ2V0KCB0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtXCIgKyBldnQudHlwZS5zdWJzdHJpbmcoIDAsIGV2dC50eXBlLmxlbmd0aCAtIDYgKSApICk7XHJcblx0fSxcclxuXHJcblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHtcclxuXHRcdGlmICggdGhpcy5fd2lkZ2V0ICYmIHRoaXMuX3dpZGdldC53aWRnZXRGdWxsTmFtZSA9PT0gXCJtb2JpbGUtbGlzdHZpZXdcIiAmJlxyXG5cdFx0XHR0eXBlID09PSBcImJlZm9yZWZpbHRlclwiICkge1xyXG5cclxuXHRcdFx0Ly8gQWxzbyB0cmlnZ2VyIGxpc3R2aWV3YmVmb3JlZmlsdGVyIGlmIHRoaXMgd2lkZ2V0IGlzIGFsc28gYSBsaXN0dmlld1xyXG5cdFx0XHR0aGlzLl93aWRnZXQuX3RyaWdnZXIoIFwiYmVmb3JlZmlsdGVyXCIsIGV2ZW50LCBkYXRhICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUGFzc2luZyBiYWNrIHRoZSByZXNwb25zZSBlbmFibGVzIGNhbGxpbmcgcHJldmVudERlZmF1bHQoKVxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCB0eXBlLCBldmVudCwgZGF0YSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRXaWRnZXQ6IGZ1bmN0aW9uKCB3aWRnZXQgKSB7XHJcblx0XHRpZiAoICF0aGlzLl93aWRnZXQgJiYgd2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl93aWRnZXQgPSB3aWRnZXQ7XHJcblx0XHRcdHRoaXMuX3dpZGdldC5fc2V0T3B0aW9ucyA9IHJlcGxhY2VTZXRPcHRpb25zKCB0aGlzLCB0aGlzLl93aWRnZXQuX3NldE9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICEhdGhpcy5fd2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl9zeW5jVGV4dElucHV0T3B0aW9ucyggdGhpcy5fd2lkZ2V0Lm9wdGlvbnMgKTtcclxuXHRcdFx0aWYgKCB0aGlzLl93aWRnZXQud2lkZ2V0TmFtZSA9PT0gXCJsaXN0dmlld1wiICkge1xyXG5cdFx0XHRcdHRoaXMuX3dpZGdldC5vcHRpb25zLmhpZGVEaXZpZGVycyA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5fd2lkZ2V0LmVsZW1lbnQubGlzdHZpZXcoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gISF0aGlzLl93aWRnZXQ7XHJcblx0fSxcclxuXHJcblx0X2lzU2VhcmNoSW50ZXJuYWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdGhpcy5fc2VhcmNoICYmIHRoaXMuX3NlYXJjaC5qcW1EYXRhKCBcInVpLWZpbHRlcmFibGUtXCIgKyB0aGlzLnV1aWQgKyBcIi1pbnRlcm5hbFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0SW5wdXQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR1cGRhdGVQbGFjZWhvbGRlciA9IHRydWUsXHJcblx0XHRcdHRleHRpbnB1dE9wdHMgPSB7fTtcclxuXHJcblx0XHRpZiAoICFzZWxlY3RvciApIHtcclxuXHRcdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIElnbm9yZSB0aGUgY2FsbCB0byBzZXQgYSBuZXcgaW5wdXQgaWYgdGhlIHNlbGVjdG9yIGdvZXMgdG8gZmFsc3kgYW5kXHJcblx0XHRcdFx0Ly8gdGhlIGN1cnJlbnQgdGV4dGlucHV0IGlzIGFscmVhZHkgb2YgdGhlIGludGVybmFsbHkgZ2VuZXJhdGVkIHZhcmlldHkuXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBHZW5lcmF0aW5nIGEgbmV3IHRleHRpbnB1dCB3aWRnZXQuIE5vIG5lZWQgdG8gc2V0IHRoZSBwbGFjZWhvbGRlclxyXG5cdFx0XHRcdC8vIGZ1cnRoZXIgZG93biB0aGUgZnVuY3Rpb24uXHJcblx0XHRcdFx0dXBkYXRlUGxhY2Vob2xkZXIgPSBmYWxzZTtcclxuXHRcdFx0XHRzZWxlY3RvciA9ICQoIFwiPGlucHV0IFwiICtcclxuXHRcdFx0XHRcdFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0eXBlPSdzZWFyY2gnIFwiICtcclxuXHRcdFx0XHRcdFwicGxhY2Vob2xkZXI9J1wiICsgb3B0cy5maWx0ZXJQbGFjZWhvbGRlciArIFwiJz48L2lucHV0PlwiIClcclxuXHRcdFx0XHRcdC5qcW1EYXRhKCBcInVpLWZpbHRlcmFibGUtXCIgKyB0aGlzLnV1aWQgKyBcIi1pbnRlcm5hbFwiLCB0cnVlICk7XHJcblx0XHRcdFx0JCggXCI8Zm9ybSBjbGFzcz0ndWktZmlsdGVyYWJsZSc+PC9mb3JtPlwiIClcclxuXHRcdFx0XHRcdC5hcHBlbmQoIHNlbGVjdG9yIClcclxuXHRcdFx0XHRcdC5zdWJtaXQoIGZ1bmN0aW9uKCBldnQgKSB7XHJcblx0XHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRzZWxlY3Rvci5ibHVyKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0Lmluc2VydEJlZm9yZSggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdFx0aWYgKCAkLm1vYmlsZS50ZXh0aW5wdXQgKSB7XHJcblx0XHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5maWx0ZXJUaGVtZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdFx0XHR0ZXh0aW5wdXRPcHRzWyBcInRoZW1lXCIgXSA9IG9wdHMuZmlsdGVyVGhlbWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZWN0b3IudGV4dGlucHV0KCB0ZXh0aW5wdXRPcHRzICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIHNlbGVjdG9yICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgJiYgdXBkYXRlUGxhY2Vob2xkZXIgKSB7XHJcblx0XHRcdHRoaXMuX3NlYXJjaC5hdHRyKCBcInBsYWNlaG9sZGVyXCIsIHRoaXMub3B0aW9ucy5maWx0ZXJQbGFjZWhvbGRlciApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciByZXQgPSB0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdC8vIE5lZWQgdG8gc2V0IHRoZSBmaWx0ZXJQbGFjZWhvbGRlciBhZnRlciBoYXZpbmcgZXN0YWJsaXNoZWQgdGhlIHNlYXJjaCBpbnB1dFxyXG5cdFx0aWYgKCBvcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICkge1xyXG5cdFx0XHRcdHRoaXMuX3NlYXJjaC5hdHRyKCBcInBsYWNlaG9sZGVyXCIsIG9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5maWx0ZXJUaGVtZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3NlYXJjaCAmJiAkLm1vYmlsZS50ZXh0aW5wdXQgKSB7XHJcblx0XHRcdHRoaXMuX3NlYXJjaC50ZXh0aW5wdXQoIFwib3B0aW9uXCIsIFwidGhlbWVcIiwgb3B0aW9ucy5maWx0ZXJUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0Ly8gVGhlIGxpc3R2aWV3IGltcGxlbWVudGF0aW9uIGFjY29tcGFueWluZyB0aGlzIGZpbHRlcmFibGUgYmFja2NvbXBhdCBsYXllciB3aWxsIGNhbGxcclxuXHQvLyBmaWx0ZXJhYmxlLnJlZnJlc2goKSBhZnRlciBpdCdzIGRvbmUgcmVmcmVzaGluZyB0aGUgbGlzdHZpZXcgdG8gbWFrZSBzdXJlIHRoZSBmaWx0ZXJhYmxlXHJcblx0Ly8gZmlsdGVycyBvdXQgYW55IG5ldyBpdGVtcyBhZGRlZC4gSG93ZXZlciwgd2hlbiB0aGUgbGlzdHZpZXcgcmVmcmVzaCBoYXMgYmVlbiBpbml0aWF0ZWQgYnlcclxuXHQvLyB0aGUgZmlsdGVyYWJsZSBpdHNlbGYsIHRoZW4gc3VjaCBmaWx0ZXJpbmcgaGFzIGFscmVhZHkgdGFrZW4gcGxhY2UsIGFuZCBjYWxsaW5nIHRoZVxyXG5cdC8vIGZpbHRlcmFibGUncyByZWZyZXNoKCkgbWV0aG9kIHdpbGwgY2F1c2UgYW4gaW5maW5pdGUgcmVjdXJzaW9uLiBXZSBzdG9wIHRoaXMgYnkgc2V0dGluZyBhXHJcblx0Ly8gZmxhZyB0aGF0IHdpbGwgY2F1c2UgdGhlIGZpbHRlcmFibGUncyByZWZyZXNoKCkgbWV0aG9kIHRvIHNob3J0LWNpcmN1aXQuXHJcblx0X3JlZnJlc2hDaGlsZFdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoaW5nQ2hpbGRXaWRnZXQgPSB0cnVlO1xyXG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblx0XHR0aGlzLl9yZWZyZXNoaW5nQ2hpbGRXaWRnZXQgPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggIXRoaXMuX3JlZnJlc2hpbmdDaGlsZFdpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgKSB7XHJcblx0XHRcdHRoaXMuX3NlYXJjaC5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0X3N5bmNUZXh0SW5wdXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBpZHgsXHJcblx0XHRcdHRleHRpbnB1dE9wdGlvbnMgPSB7fTtcclxuXHJcblx0XHQvLyBXZSBvbmx5IHN5bmMgb3B0aW9ucyBpZiB0aGUgZmlsdGVyYWJsZSdzIHRleHRpbnB1dCBpcyBvZiB0aGUgaW50ZXJuYWxseVxyXG5cdFx0Ly8gZ2VuZXJhdGVkIHZhcmlldHksIHJhdGhlciB0aGFuIG9uZSBzcGVjaWZpZWQgYnkgdGhlIHVzZXIuXHJcblx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSAmJiAkLm1vYmlsZS50ZXh0aW5wdXQgKSB7XHJcblxyXG5cdFx0XHQvLyBBcHBseSBvbmx5IHRoZSBvcHRpb25zIHVuZGVyc3Rvb2QgYnkgdGV4dGlucHV0XHJcblx0XHRcdGZvciAoIGlkeCBpbiAkLm1vYmlsZS50ZXh0aW5wdXQucHJvdG90eXBlLm9wdGlvbnMgKSB7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zWyBpZHggXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0aWYgKCBpZHggPT09IFwidGhlbWVcIiAmJiB0aGlzLm9wdGlvbnMuZmlsdGVyVGhlbWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRcdFx0dGV4dGlucHV0T3B0aW9uc1sgaWR4IF0gPSB0aGlzLm9wdGlvbnMuZmlsdGVyVGhlbWU7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0ZXh0aW5wdXRPcHRpb25zWyBpZHggXSA9IG9wdGlvbnNbIGlkeCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9zZWFyY2gudGV4dGlucHV0KCBcIm9wdGlvblwiLCB0ZXh0aW5wdXRPcHRpb25zICk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIEluc3RhbnRpYXRlIGEgZmlsdGVyYWJsZSBvbiBhIGxpc3R2aWV3IHRoYXQgaGFzIHRoZSBkYXRhLWZpbHRlcj1cInRydWVcIiBhdHRyaWJ1dGVcclxuLy8gVGhpcyBpcyBub3QgbmVjZXNzYXJ5IGZvciBzdGF0aWMgY29udGVudCwgYmVjYXVzZSB0aGUgYXV0by1lbmhhbmNlIHRha2VzIGNhcmUgb2YgaW5zdGFudGlhdGluZ1xyXG4vLyB0aGUgZmlsdGVyYWJsZSB1cG9uIGVuY291bnRlcmluZyBkYXRhLWZpbHRlcj1cInRydWVcIi4gSG93ZXZlciwgYmVjYXVzZSBvZiAxLjMueCBpdCBpcyBleHBlY3RlZFxyXG4vLyB0aGF0IGEgbGlzdHZpZXcgd2l0aCBkYXRhLWZpbHRlcj1cInRydWVcIiB3aWxsIGJlIGZpbHRlcmFibGUgZXZlbiBpZiB5b3UganVzdCBpbnN0YW50aWF0ZSBhXHJcbi8vIGxpc3R2aWV3IG9uIGl0LiBUaGUgZXh0ZW5zaW9uIGJlbG93IGVuc3VyZXMgdGhhdCB0aGlzIGNvbnRpbnVlcyB0byBoYXBwZW4gaW4gMS40LnguXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLm1vYmlsZS5saXN0dmlldywge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGZpbHRlcjogZmFsc2VcclxuXHR9LFxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZmlsdGVyID09PSB0cnVlICYmXHJcblx0XHRcdFx0IXRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1maWx0ZXJhYmxlXCIgKSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbHRlcmFibGUoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGZpbHRlcmFibGU7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZmlsdGVyID09PSB0cnVlICkge1xyXG5cdFx0XHRmaWx0ZXJhYmxlID0gdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLWZpbHRlcmFibGVcIiApO1xyXG5cclxuXHRcdFx0aWYgKCBmaWx0ZXJhYmxlICkge1xyXG5cdFx0XHRcdGZpbHRlcmFibGUucmVmcmVzaCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgVUkgVGFicyBmYWRmMmIzMTJhMDUwNDA0MzY0NTFjNjRiYmZhZjQ4MTRiYzYyYzU2XHJcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vdGFicy9cclxuICpcclxuICogRGVwZW5kczpcclxuICpcdGpxdWVyeS51aS5jb3JlLmpzXHJcbiAqXHRqcXVlcnkudWkud2lkZ2V0LmpzXHJcbiAqL1xyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB0YWJJZCA9IDAsXHJcblx0cmhhc2ggPSAvIy4qJC87XHJcblxyXG5mdW5jdGlvbiBnZXROZXh0VGFiSWQoKSB7XHJcblx0cmV0dXJuICsrdGFiSWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzTG9jYWwoIGFuY2hvciApIHtcclxuXHRyZXR1cm4gYW5jaG9yLmhhc2gubGVuZ3RoID4gMSAmJlxyXG5cdFx0ZGVjb2RlVVJJQ29tcG9uZW50KCBhbmNob3IuaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApICkgPT09XHJcblx0XHRcdGRlY29kZVVSSUNvbXBvbmVudCggbG9jYXRpb24uaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApICk7XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcInVpLnRhYnNcIiwge1xyXG5cdHZlcnNpb246IFwiZmFkZjJiMzEyYTA1MDQwNDM2NDUxYzY0YmJmYWY0ODE0YmM2MmM1NlwiLFxyXG5cdGRlbGF5OiAzMDAsXHJcblx0b3B0aW9uczoge1xyXG5cdFx0YWN0aXZlOiBudWxsLFxyXG5cdFx0Y29sbGFwc2libGU6IGZhbHNlLFxyXG5cdFx0ZXZlbnQ6IFwiY2xpY2tcIixcclxuXHRcdGhlaWdodFN0eWxlOiBcImNvbnRlbnRcIixcclxuXHRcdGhpZGU6IG51bGwsXHJcblx0XHRzaG93OiBudWxsLFxyXG5cclxuXHRcdC8vIGNhbGxiYWNrc1xyXG5cdFx0YWN0aXZhdGU6IG51bGwsXHJcblx0XHRiZWZvcmVBY3RpdmF0ZTogbnVsbCxcclxuXHRcdGJlZm9yZUxvYWQ6IG51bGwsXHJcblx0XHRsb2FkOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXMsXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0dGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsXCIgKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCBvcHRpb25zLmNvbGxhcHNpYmxlIClcclxuXHRcdFx0Ly8gUHJldmVudCB1c2VycyBmcm9tIGZvY3VzaW5nIGRpc2FibGVkIHRhYnMgdmlhIGNsaWNrXHJcblx0XHRcdC5kZWxlZ2F0ZSggXCIudWktdGFicy1uYXYgPiBsaVwiLCBcIm1vdXNlZG93blwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmlzKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gc3VwcG9ydDogSUUgPDlcclxuXHRcdFx0Ly8gUHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gbW91c2Vkb3duIGRvZXNuJ3QgcHJldmVudCBJRVxyXG5cdFx0XHQvLyBmcm9tIGZvY3VzaW5nIHRoZSBlbGVtZW50LCBzbyBpZiB0aGUgYW5jaG9yIGdldHMgZm9jdXNlZCwgYmx1ci5cclxuXHRcdFx0Ly8gV2UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBmb2N1c2luZyB0aGUgcHJldmlvdXNseSBmb2N1c2VkXHJcblx0XHRcdC8vIGVsZW1lbnQgc2luY2UgY2xpY2tpbmcgb24gYSBub24tZm9jdXNhYmxlIGVsZW1lbnQgc2hvdWxkIGZvY3VzXHJcblx0XHRcdC8vIHRoZSBib2R5IGFueXdheS5cclxuXHRcdFx0LmRlbGVnYXRlKCBcIi51aS10YWJzLWFuY2hvclwiLCBcImZvY3VzXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5jbG9zZXN0KCBcImxpXCIgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdFx0dGhpcy5ibHVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xyXG5cdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLl9pbml0aWFsQWN0aXZlKCk7XHJcblxyXG5cdFx0Ly8gVGFrZSBkaXNhYmxpbmcgdGFicyB2aWEgY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTFxyXG5cdFx0Ly8gaW50byBhY2NvdW50IGFuZCB1cGRhdGUgb3B0aW9uIHByb3Blcmx5LlxyXG5cdFx0aWYgKCAkLmlzQXJyYXkoIG9wdGlvbnMuZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0b3B0aW9ucy5kaXNhYmxlZCA9ICQudW5pcXVlKCBvcHRpb25zLmRpc2FibGVkLmNvbmNhdChcclxuXHRcdFx0XHQkLm1hcCggdGhpcy50YWJzLmZpbHRlciggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApLCBmdW5jdGlvbiggbGkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGhhdC50YWJzLmluZGV4KCBsaSApO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCkgKS5zb3J0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY2hlY2sgZm9yIGxlbmd0aCBhdm9pZHMgZXJyb3Igd2hlbiBpbml0aWFsaXppbmcgZW1wdHkgbGlzdFxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlICE9PSBmYWxzZSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIG9wdGlvbnMuYWN0aXZlICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMubG9hZCggb3B0aW9ucy5hY3RpdmUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaW5pdGlhbEFjdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYWN0aXZlID0gdGhpcy5vcHRpb25zLmFjdGl2ZSxcclxuXHRcdFx0Y29sbGFwc2libGUgPSB0aGlzLm9wdGlvbnMuY29sbGFwc2libGUsXHJcblx0XHRcdGxvY2F0aW9uSGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICk7XHJcblxyXG5cdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgKSB7XHJcblx0XHRcdC8vIGNoZWNrIHRoZSBmcmFnbWVudCBpZGVudGlmaWVyIGluIHRoZSBVUkxcclxuXHRcdFx0aWYgKCBsb2NhdGlvbkhhc2ggKSB7XHJcblx0XHRcdFx0dGhpcy50YWJzLmVhY2goZnVuY3Rpb24oIGksIHRhYiApIHtcclxuXHRcdFx0XHRcdGlmICggJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSA9PT0gbG9jYXRpb25IYXNoICkge1xyXG5cdFx0XHRcdFx0XHRhY3RpdmUgPSBpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGNoZWNrIGZvciBhIHRhYiBtYXJrZWQgYWN0aXZlIHZpYSBhIGNsYXNzXHJcblx0XHRcdGlmICggYWN0aXZlID09PSBudWxsICkge1xyXG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmZpbHRlciggXCIudWktdGFicy1hY3RpdmVcIiApICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIG5vIGFjdGl2ZSB0YWIsIHNldCB0byBmYWxzZVxyXG5cdFx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCB8fCBhY3RpdmUgPT09IC0xICkge1xyXG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5sZW5ndGggPyAwIDogZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBoYW5kbGUgbnVtYmVyczogbmVnYXRpdmUsIG91dCBvZiByYW5nZVxyXG5cdFx0aWYgKCBhY3RpdmUgIT09IGZhbHNlICkge1xyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5lcSggYWN0aXZlICkgKTtcclxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IC0xICkge1xyXG5cdFx0XHRcdGFjdGl2ZSA9IGNvbGxhcHNpYmxlID8gZmFsc2UgOiAwO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZG9uJ3QgYWxsb3cgY29sbGFwc2libGU6IGZhbHNlIGFuZCBhY3RpdmU6IGZhbHNlXHJcblx0XHRpZiAoICFjb2xsYXBzaWJsZSAmJiBhY3RpdmUgPT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdGFjdGl2ZSA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGFjdGl2ZTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0Q3JlYXRlRXZlbnREYXRhOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRhYjogdGhpcy5hY3RpdmUsXHJcblx0XHRcdHBhbmVsOiAhdGhpcy5hY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClcclxuXHRcdH07XHJcblx0fSxcclxuXHJcblx0X3RhYktleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBmb2N1c2VkVGFiID0gJCggdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ICkuY2xvc2VzdCggXCJsaVwiICksXHJcblx0XHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLnRhYnMuaW5kZXgoIGZvY3VzZWRUYWIgKSxcclxuXHRcdFx0Z29pbmdGb3J3YXJkID0gdHJ1ZTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5SSUdIVDpcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRE9XTjpcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4Kys7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlVQOlxyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5MRUZUOlxyXG5cdFx0XHRcdGdvaW5nRm9yd2FyZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXgtLTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5EOlxyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLmFuY2hvcnMubGVuZ3RoIC0gMTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuSE9NRTpcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gMDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6XHJcblx0XHRcdFx0Ly8gQWN0aXZhdGUgb25seSwgbm8gY29sbGFwc2luZ1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5URVI6XHJcblx0XHRcdFx0Ly8gVG9nZ2xlIChjYW5jZWwgZGVsYXllZCBhY3RpdmF0aW9uLCBhbGxvdyBjb2xsYXBzaW5nKVxyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcclxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGNvbGxhcHNlIG9yIGFjdGl2YXRlXHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggPT09IHRoaXMub3B0aW9ucy5hY3RpdmUgPyBmYWxzZSA6IHNlbGVjdGVkSW5kZXggKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvY3VzIHRoZSBhcHByb3ByaWF0ZSB0YWIsIGJhc2VkIG9uIHdoaWNoIGtleSB3YXMgcHJlc3NlZFxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XHJcblx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy5fZm9jdXNOZXh0VGFiKCBzZWxlY3RlZEluZGV4LCBnb2luZ0ZvcndhcmQgKTtcclxuXHJcblx0XHQvLyBOYXZpZ2F0aW5nIHdpdGggY29udHJvbCBrZXkgd2lsbCBwcmV2ZW50IGF1dG9tYXRpYyBhY3RpdmF0aW9uXHJcblx0XHRpZiAoICFldmVudC5jdHJsS2V5ICkge1xyXG5cdFx0XHQvLyBVcGRhdGUgYXJpYS1zZWxlY3RlZCBpbW1lZGlhdGVseSBzbyB0aGF0IEFUIHRoaW5rIHRoZSB0YWIgaXMgYWxyZWFkeSBzZWxlY3RlZC5cclxuXHRcdFx0Ly8gT3RoZXJ3aXNlIEFUIG1heSBjb25mdXNlIHRoZSB1c2VyIGJ5IHN0YXRpbmcgdGhhdCB0aGV5IG5lZWQgdG8gYWN0aXZhdGUgdGhlIHRhYixcclxuXHRcdFx0Ly8gYnV0IHRoZSB0YWIgd2lsbCBhbHJlYWR5IGJlIGFjdGl2YXRlZCBieSB0aGUgdGltZSB0aGUgYW5ub3VuY2VtZW50IGZpbmlzaGVzLlxyXG5cdFx0XHRmb2N1c2VkVGFiLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIgKTtcclxuXHRcdFx0dGhpcy50YWJzLmVxKCBzZWxlY3RlZEluZGV4ICkuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIFwidHJ1ZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLmFjdGl2YXRpbmcgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbiggXCJhY3RpdmVcIiwgc2VsZWN0ZWRJbmRleCApO1xyXG5cdFx0XHR9LCB0aGlzLmRlbGF5ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3BhbmVsS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3RybCt1cCBtb3ZlcyBmb2N1cyB0byB0aGUgY3VycmVudCB0YWJcclxuXHRcdGlmICggZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuVVAgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuYWN0aXZlLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gQWx0K3BhZ2UgdXAvZG93biBtb3ZlcyBmb2N1cyB0byB0aGUgcHJldmlvdXMvbmV4dCB0YWIgKGFuZCBhY3RpdmF0ZXMpXHJcblx0X2hhbmRsZVBhZ2VOYXY6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX1VQICkge1xyXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlIC0gMSwgZmFsc2UgKSApO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX0RPV04gKSB7XHJcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgKyAxLCB0cnVlICkgKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2ZpbmROZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHtcclxuXHRcdHZhciBsYXN0VGFiSW5kZXggPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTtcclxuXHJcblx0XHRmdW5jdGlvbiBjb25zdHJhaW4oKSB7XHJcblx0XHRcdGlmICggaW5kZXggPiBsYXN0VGFiSW5kZXggKSB7XHJcblx0XHRcdFx0aW5kZXggPSAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggaW5kZXggPCAwICkge1xyXG5cdFx0XHRcdGluZGV4ID0gbGFzdFRhYkluZGV4O1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdH1cclxuXHJcblx0XHR3aGlsZSAoICQuaW5BcnJheSggY29uc3RyYWluKCksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApICE9PSAtMSApIHtcclxuXHRcdFx0aW5kZXggPSBnb2luZ0ZvcndhcmQgPyBpbmRleCArIDEgOiBpbmRleCAtIDE7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c05leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkge1xyXG5cdFx0aW5kZXggPSB0aGlzLl9maW5kTmV4dFRhYiggaW5kZXgsIGdvaW5nRm9yd2FyZCApO1xyXG5cdFx0dGhpcy50YWJzLmVxKCBpbmRleCApLmZvY3VzKCk7XHJcblx0XHRyZXR1cm4gaW5kZXg7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRpZiAoIGtleSA9PT0gXCJhY3RpdmVcIiApIHtcclxuXHRcdFx0Ly8gX2FjdGl2YXRlKCkgd2lsbCBoYW5kbGUgaW52YWxpZCB2YWx1ZXMgYW5kIHVwZGF0ZSB0aGlzLm9wdGlvbnNcclxuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHZhbHVlICk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xyXG5cdFx0XHQvLyBkb24ndCB1c2UgdGhlIHdpZGdldCBmYWN0b3J5J3MgZGlzYWJsZWQgaGFuZGxpbmdcclxuXHRcdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggdmFsdWUgKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlKTtcclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJjb2xsYXBzaWJsZVwiICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCB2YWx1ZSApO1xyXG5cdFx0XHQvLyBTZXR0aW5nIGNvbGxhcHNpYmxlOiBmYWxzZSB3aGlsZSBjb2xsYXBzZWQ7IG9wZW4gZmlyc3QgcGFuZWxcclxuXHRcdFx0aWYgKCAhdmFsdWUgJiYgdGhpcy5vcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIDAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImV2ZW50XCIgKSB7XHJcblx0XHRcdHRoaXMuX3NldHVwRXZlbnRzKCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImhlaWdodFN0eWxlXCIgKSB7XHJcblx0XHRcdHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHZhbHVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3RhYklkOiBmdW5jdGlvbiggdGFiICkge1xyXG5cdFx0cmV0dXJuIHRhYi5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApIHx8IFwidWktdGFicy1cIiArIGdldE5leHRUYWJJZCgpO1xyXG5cdH0sXHJcblxyXG5cdF9zYW5pdGl6ZVNlbGVjdG9yOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdHJldHVybiBoYXNoID8gaGFzaC5yZXBsYWNlKCAvWyFcIiQlJicoKSorLC5cXC86Ozw9Pj9AXFxbXFxdXFxeYHt8fX5dL2csIFwiXFxcXCQmXCIgKSA6IFwiXCI7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0bGlzID0gdGhpcy50YWJsaXN0LmNoaWxkcmVuKCBcIjpoYXMoYVtocmVmXSlcIiApO1xyXG5cclxuXHRcdC8vIGdldCBkaXNhYmxlZCB0YWJzIGZyb20gY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTFxyXG5cdFx0Ly8gdGhpcyB3aWxsIGdldCBjb252ZXJ0ZWQgdG8gYSBib29sZWFuIGlmIG5lZWRlZCBpbiBfcmVmcmVzaCgpXHJcblx0XHRvcHRpb25zLmRpc2FibGVkID0gJC5tYXAoIGxpcy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSwgZnVuY3Rpb24oIHRhYiApIHtcclxuXHRcdFx0cmV0dXJuIGxpcy5pbmRleCggdGFiICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xyXG5cclxuXHRcdC8vIHdhcyBjb2xsYXBzZWQgb3Igbm8gdGFic1xyXG5cdFx0aWYgKCBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgfHwgIXRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xyXG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYnV0IGFjdGl2ZSB0YWIgaXMgZ29uZVxyXG5cdFx0fSBlbHNlIGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICYmICEkLmNvbnRhaW5zKCB0aGlzLnRhYmxpc3RbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkge1xyXG5cdFx0XHQvLyBhbGwgcmVtYWluaW5nIHRhYnMgYXJlIGRpc2FibGVkXHJcblx0XHRcdGlmICggdGhpcy50YWJzLmxlbmd0aCA9PT0gb3B0aW9ucy5kaXNhYmxlZC5sZW5ndGggKSB7XHJcblx0XHRcdFx0b3B0aW9ucy5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcclxuXHRcdFx0Ly8gYWN0aXZhdGUgcHJldmlvdXMgdGFiXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZpbmROZXh0VGFiKCBNYXRoLm1heCggMCwgb3B0aW9ucy5hY3RpdmUgLSAxICksIGZhbHNlICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYWN0aXZlIHRhYiBzdGlsbCBleGlzdHNcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSBhY3RpdmUgaW5kZXggaXMgY29ycmVjdFxyXG5cdFx0XHRvcHRpb25zLmFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy5hY3RpdmUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggdGhpcy5vcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdGhpcy5vcHRpb25zLmV2ZW50ICk7XHJcblx0XHR0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgKTtcclxuXHJcblx0XHR0aGlzLnRhYnMubm90KCB0aGlzLmFjdGl2ZSApLmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiLFxyXG5cdFx0XHR0YWJJbmRleDogLTFcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5wYW5lbHMubm90KCB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKSApXHJcblx0XHRcdC5oaWRlKClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXHJcblx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgb25lIHRhYiBpcyBpbiB0aGUgdGFiIG9yZGVyXHJcblx0XHRpZiAoICF0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMudGFicy5lcSggMCApLmF0dHIoIFwidGFiSW5kZXhcIiwgMCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hY3RpdmVcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKVxyXG5cdFx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcclxuXHRcdFx0XHRcdHRhYkluZGV4OiAwXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApXHJcblx0XHRcdFx0LnNob3coKVxyXG5cdFx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcclxuXHRcdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwiXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3Byb2Nlc3NUYWJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHJcblx0XHR0aGlzLnRhYmxpc3QgPSB0aGlzLl9nZXRMaXN0KClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIgKVxyXG5cdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwidGFibGlzdFwiICk7XHJcblxyXG5cdFx0dGhpcy50YWJzID0gdGhpcy50YWJsaXN0LmZpbmQoIFwiPiBsaTpoYXMoYVtocmVmXSlcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci10b3BcIiApXHJcblx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRyb2xlOiBcInRhYlwiLFxyXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFuY2hvcnMgPSB0aGlzLnRhYnMubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkKCBcImFcIiwgdGhpcyApWyAwIF07XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLWFuY2hvclwiIClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdHJvbGU6IFwicHJlc2VudGF0aW9uXCIsXHJcblx0XHRcdFx0dGFiSW5kZXg6IC0xXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGFuZWxzID0gJCgpO1xyXG5cclxuXHRcdHRoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKCBpLCBhbmNob3IgKSB7XHJcblx0XHRcdHZhciBzZWxlY3RvciwgcGFuZWwsIHBhbmVsSWQsXHJcblx0XHRcdFx0YW5jaG9ySWQgPSAkKCBhbmNob3IgKS51bmlxdWVJZCgpLmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHRcdHRhYiA9ICQoIGFuY2hvciApLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cdFx0XHRcdG9yaWdpbmFsQXJpYUNvbnRyb2xzID0gdGFiLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XHJcblxyXG5cdFx0XHQvLyBpbmxpbmUgdGFiXHJcblx0XHRcdGlmICggaXNMb2NhbCggYW5jaG9yICkgKSB7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSBhbmNob3IuaGFzaDtcclxuXHRcdFx0XHRwYW5lbCA9IHRoYXQuZWxlbWVudC5maW5kKCB0aGF0Ll9zYW5pdGl6ZVNlbGVjdG9yKCBzZWxlY3RvciApICk7XHJcblx0XHRcdC8vIHJlbW90ZSB0YWJcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwYW5lbElkID0gdGhhdC5fdGFiSWQoIHRhYiApO1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gXCIjXCIgKyBwYW5lbElkO1xyXG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHNlbGVjdG9yICk7XHJcblx0XHRcdFx0aWYgKCAhcGFuZWwubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0cGFuZWwgPSB0aGF0Ll9jcmVhdGVQYW5lbCggcGFuZWxJZCApO1xyXG5cdFx0XHRcdFx0cGFuZWwuaW5zZXJ0QWZ0ZXIoIHRoYXQucGFuZWxzWyBpIC0gMSBdIHx8IHRoYXQudGFibGlzdCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwYW5lbC5hdHRyKCBcImFyaWEtbGl2ZVwiLCBcInBvbGl0ZVwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggcGFuZWwubGVuZ3RoKSB7XHJcblx0XHRcdFx0dGhhdC5wYW5lbHMgPSB0aGF0LnBhbmVscy5hZGQoIHBhbmVsICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvcmlnaW5hbEFyaWFDb250cm9scyApIHtcclxuXHRcdFx0XHR0YWIuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiwgb3JpZ2luYWxBcmlhQ29udHJvbHMgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0YWIuYXR0cih7XHJcblx0XHRcdFx0XCJhcmlhLWNvbnRyb2xzXCI6IHNlbGVjdG9yLnN1YnN0cmluZyggMSApLFxyXG5cdFx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGFuY2hvcklkXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRwYW5lbC5hdHRyKCBcImFyaWEtbGFiZWxsZWRieVwiLCBhbmNob3JJZCApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wYW5lbHNcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiIClcclxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcInRhYnBhbmVsXCIgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBhbGxvdyBvdmVycmlkaW5nIGhvdyB0byBmaW5kIHRoZSBsaXN0IGZvciByYXJlIHVzYWdlIHNjZW5hcmlvcyAoIzc3MTUpXHJcblx0X2dldExpc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCBcIm9sLHVsXCIgKS5lcSggMCApO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGVQYW5lbDogZnVuY3Rpb24oIGlkICkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdj5cIiApXHJcblx0XHRcdC5hdHRyKCBcImlkXCIsIGlkIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiIClcclxuXHRcdFx0LmRhdGEoIFwidWktdGFicy1kZXN0cm95XCIsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBEaXNhYmxlZDogZnVuY3Rpb24oIGRpc2FibGVkICkge1xyXG5cdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkLmxlbmd0aCApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBkaXNhYmxlZC5sZW5ndGggPT09IHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZGlzYWJsZSB0YWJzXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxpOyAoIGxpID0gdGhpcy50YWJzWyBpIF0gKTsgaSsrICkge1xyXG5cdFx0XHRpZiAoIGRpc2FibGVkID09PSB0cnVlIHx8ICQuaW5BcnJheSggaSwgZGlzYWJsZWQgKSAhPT0gLTEgKSB7XHJcblx0XHRcdFx0JCggbGkgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCBcInRydWVcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoIGxpIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gZGlzYWJsZWQ7XHJcblx0fSxcclxuXHJcblx0X3NldHVwRXZlbnRzOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgZXZlbnRzID0ge1xyXG5cdFx0XHRjbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRpZiAoIGV2ZW50ICkge1xyXG5cdFx0XHQkLmVhY2goIGV2ZW50LnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7XHJcblx0XHRcdFx0ZXZlbnRzWyBldmVudE5hbWUgXSA9IFwiX2V2ZW50SGFuZGxlclwiO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vZmYoIHRoaXMuYW5jaG9ycy5hZGQoIHRoaXMudGFicyApLmFkZCggdGhpcy5wYW5lbHMgKSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuYW5jaG9ycywgZXZlbnRzICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy50YWJzLCB7IGtleWRvd246IFwiX3RhYktleWRvd25cIiB9ICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5wYW5lbHMsIHsga2V5ZG93bjogXCJfcGFuZWxLZXlkb3duXCIgfSApO1xyXG5cclxuXHRcdHRoaXMuX2ZvY3VzYWJsZSggdGhpcy50YWJzICk7XHJcblx0XHR0aGlzLl9ob3ZlcmFibGUoIHRoaXMudGFicyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cEhlaWdodFN0eWxlOiBmdW5jdGlvbiggaGVpZ2h0U3R5bGUgKSB7XHJcblx0XHR2YXIgbWF4SGVpZ2h0LFxyXG5cdFx0XHRwYXJlbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50KCk7XHJcblxyXG5cdFx0aWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJmaWxsXCIgKSB7XHJcblx0XHRcdG1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKTtcclxuXHRcdFx0bWF4SGVpZ2h0IC09IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpIC0gdGhpcy5lbGVtZW50LmhlaWdodCgpO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LnNpYmxpbmdzKCBcIjp2aXNpYmxlXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBlbGVtID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBlbGVtLmNzcyggXCJwb3NpdGlvblwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gZWxlbS5vdXRlckhlaWdodCggdHJ1ZSApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG1heEhlaWdodCAtPSAkKCB0aGlzICkub3V0ZXJIZWlnaHQoIHRydWUgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5oZWlnaHQoIE1hdGgubWF4KCAwLCBtYXhIZWlnaHQgLVxyXG5cdFx0XHRcdFx0JCggdGhpcyApLmlubmVySGVpZ2h0KCkgKyAkKCB0aGlzICkuaGVpZ2h0KCkgKSApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY3NzKCBcIm92ZXJmbG93XCIsIFwiYXV0b1wiICk7XHJcblx0XHR9IGVsc2UgaWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJhdXRvXCIgKSB7XHJcblx0XHRcdG1heEhlaWdodCA9IDA7XHJcblx0XHRcdHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bWF4SGVpZ2h0ID0gTWF0aC5tYXgoIG1heEhlaWdodCwgJCggdGhpcyApLmhlaWdodCggXCJcIiApLmhlaWdodCgpICk7XHJcblx0XHRcdH0pLmhlaWdodCggbWF4SGVpZ2h0ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2V2ZW50SGFuZGxlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlLFxyXG5cdFx0XHRhbmNob3IgPSAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksXHJcblx0XHRcdHRhYiA9IGFuY2hvci5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHRcdFx0Y2xpY2tlZElzQWN0aXZlID0gdGFiWyAwIF0gPT09IGFjdGl2ZVsgMCBdLFxyXG5cdFx0XHRjb2xsYXBzaW5nID0gY2xpY2tlZElzQWN0aXZlICYmIG9wdGlvbnMuY29sbGFwc2libGUsXHJcblx0XHRcdHRvU2hvdyA9IGNvbGxhcHNpbmcgPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXHJcblx0XHRcdHRvSGlkZSA9ICFhY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIGFjdGl2ZSApLFxyXG5cdFx0XHRldmVudERhdGEgPSB7XHJcblx0XHRcdFx0b2xkVGFiOiBhY3RpdmUsXHJcblx0XHRcdFx0b2xkUGFuZWw6IHRvSGlkZSxcclxuXHRcdFx0XHRuZXdUYWI6IGNvbGxhcHNpbmcgPyAkKCkgOiB0YWIsXHJcblx0XHRcdFx0bmV3UGFuZWw6IHRvU2hvd1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0aWYgKCB0YWIuaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApIHx8XHJcblx0XHRcdFx0Ly8gdGFiIGlzIGFscmVhZHkgbG9hZGluZ1xyXG5cdFx0XHRcdHRhYi5oYXNDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApIHx8XHJcblx0XHRcdFx0Ly8gY2FuJ3Qgc3dpdGNoIGR1cm5pbmcgYW4gYW5pbWF0aW9uXHJcblx0XHRcdFx0dGhpcy5ydW5uaW5nIHx8XHJcblx0XHRcdFx0Ly8gY2xpY2sgb24gYWN0aXZlIGhlYWRlciwgYnV0IG5vdCBjb2xsYXBzaWJsZVxyXG5cdFx0XHRcdCggY2xpY2tlZElzQWN0aXZlICYmICFvcHRpb25zLmNvbGxhcHNpYmxlICkgfHxcclxuXHRcdFx0XHQvLyBhbGxvdyBjYW5jZWxpbmcgYWN0aXZhdGlvblxyXG5cdFx0XHRcdCggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVBY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICkgPT09IGZhbHNlICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRvcHRpb25zLmFjdGl2ZSA9IGNvbGxhcHNpbmcgPyBmYWxzZSA6IHRoaXMudGFicy5pbmRleCggdGFiICk7XHJcblxyXG5cdFx0dGhpcy5hY3RpdmUgPSBjbGlja2VkSXNBY3RpdmUgPyAkKCkgOiB0YWI7XHJcblx0XHRpZiAoIHRoaXMueGhyICkge1xyXG5cdFx0XHR0aGlzLnhoci5hYm9ydCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRvSGlkZS5sZW5ndGggJiYgIXRvU2hvdy5sZW5ndGggKSB7XHJcblx0XHRcdCQuZXJyb3IoIFwialF1ZXJ5IFVJIFRhYnM6IE1pc21hdGNoaW5nIGZyYWdtZW50IGlkZW50aWZpZXIuXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRvU2hvdy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMubG9hZCggdGhpcy50YWJzLmluZGV4KCB0YWIgKSwgZXZlbnQgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3RvZ2dsZSggZXZlbnQsIGV2ZW50RGF0YSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGhhbmRsZXMgc2hvdy9oaWRlIGZvciBzZWxlY3RpbmcgdGFic1xyXG5cdF90b2dnbGU6IGZ1bmN0aW9uKCBldmVudCwgZXZlbnREYXRhICkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxyXG5cdFx0XHR0b1Nob3cgPSBldmVudERhdGEubmV3UGFuZWwsXHJcblx0XHRcdHRvSGlkZSA9IGV2ZW50RGF0YS5vbGRQYW5lbDtcclxuXHJcblx0XHR0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xyXG5cdFx0XHR0aGF0LnJ1bm5pbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhhdC5fdHJpZ2dlciggXCJhY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2hvdygpIHtcclxuXHRcdFx0ZXZlbnREYXRhLm5ld1RhYi5jbG9zZXN0KCBcImxpXCIgKS5hZGRDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRoYXQub3B0aW9ucy5zaG93ICkge1xyXG5cdFx0XHRcdHRoYXQuX3Nob3coIHRvU2hvdywgdGhhdC5vcHRpb25zLnNob3csIGNvbXBsZXRlICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dG9TaG93LnNob3coKTtcclxuXHRcdFx0XHRjb21wbGV0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc3RhcnQgb3V0IGJ5IGhpZGluZywgdGhlbiBzaG93aW5nLCB0aGVuIGNvbXBsZXRpbmdcclxuXHRcdGlmICggdG9IaWRlLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMuaGlkZSApIHtcclxuXHRcdFx0dGhpcy5faGlkZSggdG9IaWRlLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCBcImxpXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xyXG5cdFx0XHRcdHNob3coKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRldmVudERhdGEub2xkVGFiLmNsb3Nlc3QoIFwibGlcIiApLnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XHJcblx0XHRcdHRvSGlkZS5oaWRlKCk7XHJcblx0XHRcdHNob3coKTtcclxuXHRcdH1cclxuXHJcblx0XHR0b0hpZGUuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXHJcblx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcclxuXHRcdH0pO1xyXG5cdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiICk7XHJcblx0XHQvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgdGFicywgcmVtb3ZlIHRoZSBvbGQgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cclxuXHRcdC8vIElmIHdlJ3JlIG9wZW5pbmcgZnJvbSBjb2xsYXBzZWQgc3RhdGUsIHJlbW92ZSB0aGUgcHJldmlvdXMgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cclxuXHRcdC8vIElmIHdlJ3JlIGNvbGxhcHNpbmcsIHRoZW4ga2VlcCB0aGUgY29sbGFwc2luZyB0YWIgaW4gdGhlIHRhYiBvcmRlci5cclxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0b0hpZGUubGVuZ3RoICkge1xyXG5cdFx0XHRldmVudERhdGEub2xkVGFiLmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcclxuXHRcdH0gZWxzZSBpZiAoIHRvU2hvdy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMudGFicy5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICQoIHRoaXMgKS5hdHRyKCBcInRhYkluZGV4XCIgKSA9PT0gMDtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0b1Nob3cuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcclxuXHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCJcclxuXHRcdH0pO1xyXG5cdFx0ZXZlbnREYXRhLm5ld1RhYi5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHR0YWJJbmRleDogMFxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2FjdGl2YXRlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHR2YXIgYW5jaG9yLFxyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBpbmRleCApO1xyXG5cclxuXHRcdC8vIHRyeWluZyB0byBhY3RpdmF0ZSB0aGUgYWxyZWFkeSBhY3RpdmUgcGFuZWxcclxuXHRcdGlmICggYWN0aXZlWyAwIF0gPT09IHRoaXMuYWN0aXZlWyAwIF0gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyB0cnlpbmcgdG8gY29sbGFwc2UsIHNpbXVsYXRlIGEgY2xpY2sgb24gdGhlIGN1cnJlbnQgYWN0aXZlIGhlYWRlclxyXG5cdFx0aWYgKCAhYWN0aXZlLmxlbmd0aCApIHtcclxuXHRcdFx0YWN0aXZlID0gdGhpcy5hY3RpdmU7XHJcblx0XHR9XHJcblxyXG5cdFx0YW5jaG9yID0gYWN0aXZlLmZpbmQoIFwiLnVpLXRhYnMtYW5jaG9yXCIgKVsgMCBdO1xyXG5cdFx0dGhpcy5fZXZlbnRIYW5kbGVyKHtcclxuXHRcdFx0dGFyZ2V0OiBhbmNob3IsXHJcblx0XHRcdGN1cnJlbnRUYXJnZXQ6IGFuY2hvcixcclxuXHRcdFx0cHJldmVudERlZmF1bHQ6ICQubm9vcFxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2ZpbmRBY3RpdmU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHJldHVybiBpbmRleCA9PT0gZmFsc2UgPyAkKCkgOiB0aGlzLnRhYnMuZXEoIGluZGV4ICk7XHJcblx0fSxcclxuXHJcblx0X2dldEluZGV4OiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHQvLyBtZXRhLWZ1bmN0aW9uIHRvIGdpdmUgdXNlcnMgb3B0aW9uIHRvIHByb3ZpZGUgYSBocmVmIHN0cmluZyBpbnN0ZWFkIG9mIGEgbnVtZXJpY2FsIGluZGV4LlxyXG5cdFx0aWYgKCB0eXBlb2YgaW5kZXggPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdGluZGV4ID0gdGhpcy5hbmNob3JzLmluZGV4KCB0aGlzLmFuY2hvcnMuZmlsdGVyKCBcIltocmVmJD0nXCIgKyBpbmRleCArIFwiJ11cIiApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy54aHIgKSB7XHJcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgdWktdGFicy1jb2xsYXBzaWJsZVwiICk7XHJcblxyXG5cdFx0dGhpcy50YWJsaXN0XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiICk7XHJcblxyXG5cdFx0dGhpcy5hbmNob3JzXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWFuY2hvclwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXHJcblx0XHRcdC5yZW1vdmVVbmlxdWVJZCgpO1xyXG5cclxuXHRcdHRoaXMudGFicy5hZGQoIHRoaXMucGFuZWxzICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAkLmRhdGEoIHRoaXMsIFwidWktdGFicy1kZXN0cm95XCIgKSApIHtcclxuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCggdGhpcyApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGVmYXVsdCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgXCIgK1xyXG5cdFx0XHRcdFx0XHRcInVpLWNvcm5lci10b3AgdWktY29ybmVyLWJvdHRvbSB1aS13aWRnZXQtY29udGVudCB1aS10YWJzLWFjdGl2ZSB1aS10YWJzLXBhbmVsXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxpdmVcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWJ1c3lcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLXNlbGVjdGVkXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1oaWRkZW5cIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWV4cGFuZGVkXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbGkgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0cHJldiA9IGxpLmRhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdFx0aWYgKCBwcmV2ICkge1xyXG5cdFx0XHRcdGxpXHJcblx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIsIHByZXYgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZURhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsaS5yZW1vdmVBdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhbmVscy5zaG93KCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09IFwiY29udGVudFwiICkge1xyXG5cdFx0XHR0aGlzLnBhbmVscy5jc3MoIFwiaGVpZ2h0XCIsIFwiXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDtcclxuXHRcdGlmICggZGlzYWJsZWQgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRkaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcclxuXHRcdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1hcCggZGlzYWJsZWQsIGZ1bmN0aW9uKCBudW0gKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1hcCggdGhpcy50YWJzLCBmdW5jdGlvbiggbGksIG51bSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggZGlzYWJsZWQgKTtcclxuXHR9LFxyXG5cclxuXHRkaXNhYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHR2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7XHJcblx0XHRpZiAoIGRpc2FibGVkID09PSB0cnVlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRkaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xyXG5cdFx0XHRpZiAoICQuaW5BcnJheSggaW5kZXgsIGRpc2FibGVkICkgIT09IC0xICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWVyZ2UoIFsgaW5kZXggXSwgZGlzYWJsZWQgKS5zb3J0KCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSBbIGluZGV4IF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIGRpc2FibGVkICk7XHJcblx0fSxcclxuXHJcblx0bG9hZDogZnVuY3Rpb24oIGluZGV4LCBldmVudCApIHtcclxuXHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXMsXHJcblx0XHRcdHRhYiA9IHRoaXMudGFicy5lcSggaW5kZXggKSxcclxuXHRcdFx0YW5jaG9yID0gdGFiLmZpbmQoIFwiLnVpLXRhYnMtYW5jaG9yXCIgKSxcclxuXHRcdFx0cGFuZWwgPSB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXHJcblx0XHRcdGV2ZW50RGF0YSA9IHtcclxuXHRcdFx0XHR0YWI6IHRhYixcclxuXHRcdFx0XHRwYW5lbDogcGFuZWxcclxuXHRcdFx0fTtcclxuXHJcblx0XHQvLyBub3QgcmVtb3RlXHJcblx0XHRpZiAoIGlzTG9jYWwoIGFuY2hvclsgMCBdICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnhociA9ICQuYWpheCggdGhpcy5fYWpheFNldHRpbmdzKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSApO1xyXG5cclxuXHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHQvLyBqUXVlcnkgPDEuOCByZXR1cm5zIGZhbHNlIGlmIHRoZSByZXF1ZXN0IGlzIGNhbmNlbGVkIGluIGJlZm9yZVNlbmQsXHJcblx0XHQvLyBidXQgYXMgb2YgMS44LCAkLmFqYXgoKSBhbHdheXMgcmV0dXJucyBhIGpxWEhSIG9iamVjdC5cclxuXHRcdGlmICggdGhpcy54aHIgJiYgdGhpcy54aHIuc3RhdHVzVGV4dCAhPT0gXCJjYW5jZWxlZFwiICkge1xyXG5cdFx0XHR0YWIuYWRkQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKTtcclxuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWJ1c3lcIiwgXCJ0cnVlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMueGhyXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oIHJlc3BvbnNlICkge1xyXG5cdFx0XHRcdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRwYW5lbC5odG1sKCByZXNwb25zZSApO1xyXG5cdFx0XHRcdFx0XHR0aGF0Ll90cmlnZ2VyKCBcImxvYWRcIiwgZXZlbnQsIGV2ZW50RGF0YSApO1xyXG5cdFx0XHRcdFx0fSwgMSApO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNvbXBsZXRlKGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xyXG5cdFx0XHRcdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gXCJhYm9ydFwiICkge1xyXG5cdFx0XHRcdFx0XHRcdHRoYXQucGFuZWxzLnN0b3AoIGZhbHNlLCB0cnVlICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHRhYi5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApO1xyXG5cdFx0XHRcdFx0XHRwYW5lbC5yZW1vdmVBdHRyKCBcImFyaWEtYnVzeVwiICk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIGpxWEhSID09PSB0aGF0LnhociApIHtcclxuXHRcdFx0XHRcdFx0XHRkZWxldGUgdGhhdC54aHI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIDEgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYWpheFNldHRpbmdzOiBmdW5jdGlvbiggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dXJsOiBhbmNob3IuYXR0ciggXCJocmVmXCIgKSxcclxuXHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oIGpxWEhSLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhhdC5fdHJpZ2dlciggXCJiZWZvcmVMb2FkXCIsIGV2ZW50LFxyXG5cdFx0XHRcdFx0JC5leHRlbmQoIHsganFYSFIgOiBqcVhIUiwgYWpheFNldHRpbmdzOiBzZXR0aW5ncyB9LCBldmVudERhdGEgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYW5lbEZvclRhYjogZnVuY3Rpb24oIHRhYiApIHtcclxuXHRcdHZhciBpZCA9ICQoIHRhYiApLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMuX3Nhbml0aXplU2VsZWN0b3IoIFwiI1wiICsgaWQgKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93ICkge1xyXG5cclxuXHQkLm1vYmlsZS5pb3NvcmllbnRhdGlvbmZpeEVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHQvLyBUaGlzIGZpeCBhZGRyZXNzZXMgYW4gaU9TIGJ1Zywgc28gcmV0dXJuIGVhcmx5IGlmIHRoZSBVQSBjbGFpbXMgaXQncyBzb21ldGhpbmcgZWxzZS5cclxuXHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0em9vbSxcclxuXHRcdGV2dCwgeCwgeSwgeiwgYWlnO1xyXG5cdGlmICggISggL2lQaG9uZXxpUGFkfGlQb2QvLnRlc3QoIG5hdmlnYXRvci5wbGF0Zm9ybSApICYmIC9PUyBbMS01XV9bMC05X10qIGxpa2UgTWFjIE9TIFgvaS50ZXN0KCB1YSApICYmIHVhLmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEgKSApIHtcclxuXHRcdCQubW9iaWxlLmlvc29yaWVudGF0aW9uZml4RW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0em9vbSA9ICQubW9iaWxlLnpvb207XHJcblxyXG5cdGZ1bmN0aW9uIGNoZWNrVGlsdCggZSApIHtcclxuXHRcdGV2dCA9IGUub3JpZ2luYWxFdmVudDtcclxuXHRcdGFpZyA9IGV2dC5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5O1xyXG5cclxuXHRcdHggPSBNYXRoLmFicyggYWlnLnggKTtcclxuXHRcdHkgPSBNYXRoLmFicyggYWlnLnkgKTtcclxuXHRcdHogPSBNYXRoLmFicyggYWlnLnogKTtcclxuXHJcblx0XHQvLyBJZiBwb3J0cmFpdCBvcmllbnRhdGlvbiBhbmQgaW4gb25lIG9mIHRoZSBkYW5nZXIgem9uZXNcclxuXHRcdGlmICggIXdpbmRvdy5vcmllbnRhdGlvbiAmJiAoIHggPiA3IHx8ICggKCB6ID4gNiAmJiB5IDwgOCB8fCB6IDwgOCAmJiB5ID4gNiApICYmIHggPiA1ICkgKSApIHtcclxuXHRcdFx0XHRpZiAoIHpvb20uZW5hYmxlZCApIHtcclxuXHRcdFx0XHRcdHpvb20uZGlzYWJsZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdH1cdGVsc2UgaWYgKCAhem9vbS5lbmFibGVkICkge1xyXG5cdFx0XHRcdHpvb20uZW5hYmxlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQkLm1vYmlsZS5kb2N1bWVudC5vbiggXCJtb2JpbGVpbml0XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5pb3NvcmllbnRhdGlvbmZpeEVuYWJsZWQgKSB7XHJcblx0XHRcdCQubW9iaWxlLndpbmRvd1xyXG5cdFx0XHRcdC5iaW5kKCBcIm9yaWVudGF0aW9uY2hhbmdlLmlvc29yaWVudGF0aW9uZml4XCIsIHpvb20uZW5hYmxlIClcclxuXHRcdFx0XHQuYmluZCggXCJkZXZpY2Vtb3Rpb24uaW9zb3JpZW50YXRpb25maXhcIiwgY2hlY2tUaWx0ICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KCBqUXVlcnksIHRoaXMgKSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdHZhclx0JGh0bWwgPSAkKCBcImh0bWxcIiApLFxyXG5cdFx0JHdpbmRvdyA9ICQubW9iaWxlLndpbmRvdztcclxuXHJcblx0Ly9yZW1vdmUgaW5pdGlhbCBidWlsZCBjbGFzcyAob25seSBwcmVzZW50IG9uIGZpcnN0IHBhZ2VzaG93KVxyXG5cdGZ1bmN0aW9uIGhpZGVSZW5kZXJpbmdDbGFzcygpIHtcclxuXHRcdCRodG1sLnJlbW92ZUNsYXNzKCBcInVpLW1vYmlsZS1yZW5kZXJpbmdcIiApO1xyXG5cdH1cclxuXHJcblx0Ly8gdHJpZ2dlciBtb2JpbGVpbml0IGV2ZW50IC0gdXNlZnVsIGhvb2sgZm9yIGNvbmZpZ3VyaW5nICQubW9iaWxlIHNldHRpbmdzIGJlZm9yZSB0aGV5J3JlIHVzZWRcclxuXHQkKCB3aW5kb3cuZG9jdW1lbnQgKS50cmlnZ2VyKCBcIm1vYmlsZWluaXRcIiApO1xyXG5cclxuXHQvLyBzdXBwb3J0IGNvbmRpdGlvbnNcclxuXHQvLyBpZiBkZXZpY2Ugc3VwcG9ydCBjb25kaXRpb24ocykgYXJlbid0IG1ldCwgbGVhdmUgdGhpbmdzIGFzIHRoZXkgYXJlIC0+IGEgYmFzaWMsIHVzYWJsZSBleHBlcmllbmNlLFxyXG5cdC8vIG90aGVyd2lzZSwgcHJvY2VlZCB3aXRoIHRoZSBlbmhhbmNlbWVudHNcclxuXHRpZiAoICEkLm1vYmlsZS5ncmFkZUEoKSApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIG92ZXJyaWRlIGFqYXhFbmFibGVkIG9uIHBsYXRmb3JtcyB0aGF0IGhhdmUga25vd24gY29uZmxpY3RzIHdpdGggaGFzaCBoaXN0b3J5IHVwZGF0ZXNcclxuXHQvLyBvciBnZW5lcmFsbHkgd29yayBiZXR0ZXIgYnJvd3NpbmcgaW4gcmVndWxhciBodHRwIGZvciBmdWxsIHBhZ2UgcmVmcmVzaGVzIChCQjUsIE9wZXJhIE1pbmkpXHJcblx0aWYgKCAkLm1vYmlsZS5hamF4QmxhY2tsaXN0ICkge1xyXG5cdFx0JC5tb2JpbGUuYWpheEVuYWJsZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIEFkZCBtb2JpbGUsIGluaXRpYWwgbG9hZCBcInJlbmRlcmluZ1wiIGNsYXNzZXMgdG8gZG9jRWxcclxuXHQkaHRtbC5hZGRDbGFzcyggXCJ1aS1tb2JpbGUgdWktbW9iaWxlLXJlbmRlcmluZ1wiICk7XHJcblxyXG5cdC8vIFRoaXMgaXMgYSBmYWxsYmFjay4gSWYgYW55dGhpbmcgZ29lcyB3cm9uZyAoSlMgZXJyb3JzLCBldGMpLCBvciBldmVudHMgZG9uJ3QgZmlyZSxcclxuXHQvLyB0aGlzIGVuc3VyZXMgdGhlIHJlbmRlcmluZyBjbGFzcyBpcyByZW1vdmVkIGFmdGVyIDUgc2Vjb25kcywgc28gY29udGVudCBpcyB2aXNpYmxlIGFuZCBhY2Nlc3NpYmxlXHJcblx0c2V0VGltZW91dCggaGlkZVJlbmRlcmluZ0NsYXNzLCA1MDAwICk7XHJcblxyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cdFx0Ly8gZmluZCBhbmQgZW5oYW5jZSB0aGUgcGFnZXMgaW4gdGhlIGRvbSBhbmQgdHJhbnNpdGlvbiB0byB0aGUgZmlyc3QgcGFnZS5cclxuXHRcdGluaXRpYWxpemVQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gZmluZCBwcmVzZW50IHBhZ2VzXHJcblx0XHRcdHZhciBwYXRoID0gJC5tb2JpbGUucGF0aCxcclxuXHRcdFx0XHQkcGFnZXMgPSAkKCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIiApLFxyXG5cdFx0XHRcdGhhc2ggPSBwYXRoLnN0cmlwSGFzaCggcGF0aC5zdHJpcFF1ZXJ5UGFyYW1zKHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2gpICksXHJcblx0XHRcdFx0dGhlTG9jYXRpb24gPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKSxcclxuXHRcdFx0XHRoYXNoUGFnZSA9IGhhc2ggPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaGFzaCApIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0Ly8gaWYgbm8gcGFnZXMgYXJlIGZvdW5kLCBjcmVhdGUgb25lIHdpdGggYm9keSdzIGlubmVyIGh0bWxcclxuXHRcdFx0aWYgKCAhJHBhZ2VzLmxlbmd0aCApIHtcclxuXHRcdFx0XHQkcGFnZXMgPSAkKCBcImJvZHlcIiApLndyYXBJbm5lciggXCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0ncGFnZSc+PC9kaXY+XCIgKS5jaGlsZHJlbiggMCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBhZGQgZGlhbG9ncywgc2V0IGRhdGEtdXJsIGF0dHJzXHJcblx0XHRcdCRwYWdlcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdFx0Ly8gdW5sZXNzIHRoZSBkYXRhIHVybCBpcyBhbHJlYWR5IHNldCBzZXQgaXQgdG8gdGhlIHBhdGhuYW1lXHJcblx0XHRcdFx0aWYgKCAhJHRoaXNbIDAgXS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ1cmxcIiApICkge1xyXG5cdFx0XHRcdFx0JHRoaXMuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInVybFwiLCAkdGhpcy5hdHRyKCBcImlkXCIgKSB8fFxyXG5cdFx0XHRcdFx0XHRwYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoIHRoZUxvY2F0aW9uLnBhdGhuYW1lICsgdGhlTG9jYXRpb24uc2VhcmNoICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gZGVmaW5lIGZpcnN0IHBhZ2UgaW4gZG9tIGNhc2Ugb25lIGJhY2tzIG91dCB0byB0aGUgZGlyZWN0b3J5IHJvb3QgKG5vdCBhbHdheXMgdGhlIGZpcnN0IHBhZ2UgdmlzaXRlZCwgYnV0IGRlZmluZWQgYXMgZmFsbGJhY2spXHJcblx0XHRcdCQubW9iaWxlLmZpcnN0UGFnZSA9ICRwYWdlcy5maXJzdCgpO1xyXG5cclxuXHRcdFx0Ly8gZGVmaW5lIHBhZ2UgY29udGFpbmVyXHJcblx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIgPSAkLm1vYmlsZS5maXJzdFBhZ2VcclxuXHRcdFx0XHQucGFyZW50KClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktbW9iaWxlLXZpZXdwb3J0XCIgKVxyXG5cdFx0XHRcdC5wYWdlY29udGFpbmVyKCk7XHJcblxyXG5cdFx0XHQvLyBpbml0aWFsaXplIG5hdmlnYXRpb24gZXZlbnRzIG5vdywgYWZ0ZXIgbW9iaWxlaW5pdCBoYXMgb2NjdXJyZWQgYW5kIHRoZSBwYWdlIGNvbnRhaW5lclxyXG5cdFx0XHQvLyBoYXMgYmVlbiBjcmVhdGVkIGJ1dCBiZWZvcmUgdGhlIHJlc3Qgb2YgdGhlIGxpYnJhcnkgaXMgYWxlcnRlZCB0byB0aGF0IGZhY3RcclxuXHRcdFx0JC5tb2JpbGUubmF2cmVhZHlEZWZlcnJlZC5yZXNvbHZlKCk7XHJcblxyXG5cdFx0XHQvLyBhbGVydCBsaXN0ZW5lcnMgdGhhdCB0aGUgcGFnZWNvbnRhaW5lciBoYXMgYmVlbiBkZXRlcm1pbmVkIGZvciBiaW5kaW5nXHJcblx0XHRcdC8vIHRvIGV2ZW50cyB0cmlnZ2VyZWQgb24gaXRcclxuXHRcdFx0JHdpbmRvdy50cmlnZ2VyKCBcInBhZ2Vjb250YWluZXJjcmVhdGVcIiApO1xyXG5cclxuXHRcdFx0Ly8gY3VlIHBhZ2UgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdCQubW9iaWxlLmxvYWRpbmcoIFwic2hvd1wiICk7XHJcblxyXG5cdFx0XHQvL3JlbW92ZSBpbml0aWFsIGJ1aWxkIGNsYXNzIChvbmx5IHByZXNlbnQgb24gZmlyc3QgcGFnZXNob3cpXHJcblx0XHRcdGhpZGVSZW5kZXJpbmdDbGFzcygpO1xyXG5cclxuXHRcdFx0Ly8gaWYgaGFzaGNoYW5nZSBsaXN0ZW5pbmcgaXMgZGlzYWJsZWQsIHRoZXJlJ3Mgbm8gaGFzaCBkZWVwbGluayxcclxuXHRcdFx0Ly8gdGhlIGhhc2ggaXMgbm90IHZhbGlkIChjb250YWlucyBtb3JlIHRoYW4gb25lICMgb3IgZG9lcyBub3Qgc3RhcnQgd2l0aCAjKVxyXG5cdFx0XHQvLyBvciB0aGVyZSBpcyBubyBwYWdlIHdpdGggdGhhdCBoYXNoLCBjaGFuZ2UgdG8gdGhlIGZpcnN0IHBhZ2UgaW4gdGhlIERPTVxyXG5cdFx0XHQvLyBSZW1lbWJlciwgaG93ZXZlciwgdGhhdCB0aGUgaGFzaCBjYW4gYWxzbyBiZSBhIHBhdGghXHJcblx0XHRcdGlmICggISAoICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc0hhc2hWYWxpZCggbG9jYXRpb24uaGFzaCApICYmXHJcblx0XHRcdFx0KCAkKCBoYXNoUGFnZSApLmlzKCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKVwiICkgfHxcclxuXHRcdFx0XHRcdCQubW9iaWxlLnBhdGguaXNQYXRoKCBoYXNoICkgfHxcclxuXHRcdFx0XHRcdGhhc2ggPT09ICQubW9iaWxlLmRpYWxvZ0hhc2hLZXkgKSApICkge1xyXG5cclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IGluaXRpYWwgcG9wc3RhdGUgc3RhdGUgaWYgaXQgZXhpc3RzXHJcblx0XHRcdFx0Ly8gc28gdGhhdCBuYXZpZ2F0aW9uIGJhY2sgdG8gdGhlIGluaXRpYWwgcGFnZSB3b3JrcyBwcm9wZXJseVxyXG5cdFx0XHRcdGlmICggJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUubmF2aWdhdG9yLnNxdWFzaCggcGF0aC5wYXJzZUxvY2F0aW9uKCkuaHJlZiApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggJC5tb2JpbGUuZmlyc3RQYWdlLCB7XHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBcIm5vbmVcIixcclxuXHRcdFx0XHRcdHJldmVyc2U6IHRydWUsXHJcblx0XHRcdFx0XHRjaGFuZ2VIYXNoOiBmYWxzZSxcclxuXHRcdFx0XHRcdGZyb21IYXNoQ2hhbmdlOiB0cnVlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gdHJpZ2dlciBoYXNoY2hhbmdlIG9yIG5hdmlnYXRlIHRvIHNxdWFzaCBhbmQgcmVjb3JkIHRoZSBjb3JyZWN0XHJcblx0XHRcdFx0Ly8gaGlzdG9yeSBlbnRyeSBmb3IgYW4gaW5pdGlhbCBoYXNoIHBhdGhcclxuXHRcdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0XHQkd2luZG93LnRyaWdnZXIoIFwiaGFzaGNoYW5nZVwiLCBbdHJ1ZV0gKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gVE9ETyBmaWd1cmUgb3V0IGhvdyB0byBzaW1wbGlmeSB0aGlzIGludGVyYWN0aW9uIHdpdGggdGhlIGluaXRpYWwgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdFx0Ly8gYXQgdGhlIGJvdHRvbSBqcy9uYXZpZ2F0ZS9uYXZpZ2F0ZS5qc1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5zdGFjayA9IFtdO1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUoICQubW9iaWxlLnBhdGguaXNQYXRoKCBsb2NhdGlvbi5oYXNoICkgPyBsb2NhdGlvbi5oYXNoIDogbG9jYXRpb24uaHJlZiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly9SdW4gaW5saW5lU1ZHIHN1cHBvcnQgdGVzdFxyXG5cdFx0JC5zdXBwb3J0LmlubGluZVNWRygpO1xyXG5cclxuXHRcdC8vIGNoZWNrIHdoaWNoIHNjcm9sbFRvcCB2YWx1ZSBzaG91bGQgYmUgdXNlZCBieSBzY3JvbGxpbmcgdG8gMSBpbW1lZGlhdGVseSBhdCBkb21yZWFkeVxyXG5cdFx0Ly8gdGhlbiBjaGVjayB3aGF0IHRoZSBzY3JvbGwgdG9wIGlzLiBBbmRyb2lkIHdpbGwgcmVwb3J0IDAuLi4gb3RoZXJzIDFcclxuXHRcdC8vIG5vdGUgdGhhdCB0aGlzIGluaXRpYWwgc2Nyb2xsIHdvbid0IGhpZGUgdGhlIGFkZHJlc3MgYmFyLiBJdCdzIGp1c3QgZm9yIHRoZSBjaGVjay5cclxuXHJcblx0XHQvLyBoaWRlIGlPUyBicm93c2VyIGNocm9tZSBvbiBsb2FkIGlmIGhpZGVVcmxCYXIgaXMgdHJ1ZSB0aGlzIGlzIHRvIHRyeSBhbmQgZG8gaXQgYXMgc29vbiBhcyBwb3NzaWJsZVxyXG5cdFx0aWYgKCAkLm1vYmlsZS5oaWRlVXJsQmFyICkge1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIDEgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiBkZWZhdWx0SG9tZVNjcm9sbCBoYXNuJ3QgYmVlbiBzZXQgeWV0LCBzZWUgaWYgc2Nyb2xsVG9wIGlzIDFcclxuXHRcdC8vIGl0IHNob3VsZCBiZSAxIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCBhbmRyb2lkIHRyZWF0cyAxIGFzIDAgKGZvciBoaWRpbmcgYWRkciBiYXIpXHJcblx0XHQvLyBzbyBpZiBpdCdzIDEsIHVzZSAwIGZyb20gbm93IG9uXHJcblx0XHQkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbCA9ICggISQuc3VwcG9ydC5zY3JvbGxUb3AgfHwgJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpID09PSAxICkgPyAwIDogMTtcclxuXHJcblx0XHQvL2RvbS1yZWFkeSBpbml0c1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5hdXRvSW5pdGlhbGl6ZVBhZ2UgKSB7XHJcblx0XHRcdCQubW9iaWxlLmluaXRpYWxpemVQYWdlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gd2luZG93IGxvYWQgZXZlbnRcclxuXHRcdC8vIGhpZGUgaU9TIGJyb3dzZXIgY2hyb21lIG9uIGxvYWQgaWYgaGlkZVVybEJhciBpcyB0cnVlIHRoaXMgaXMgYXMgZmFsbCBiYWNrIGluY2FzZSB3ZSB3ZXJlIHRvbyBlYXJseSBiZWZvcmVcclxuXHRcdGlmICggJC5tb2JpbGUuaGlkZVVybEJhciApIHtcclxuXHRcdFx0JHdpbmRvdy5sb2FkKCAkLm1vYmlsZS5zaWxlbnRTY3JvbGwgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICEkLnN1cHBvcnQuY3NzUG9pbnRlckV2ZW50cyApIHtcclxuXHRcdFx0Ly8gSUUgYW5kIE9wZXJhIGRvbid0IHN1cHBvcnQgQ1NTIHBvaW50ZXItZXZlbnRzOiBub25lIHRoYXQgd2UgdXNlIHRvIGRpc2FibGUgbGluay1iYXNlZCBidXR0b25zXHJcblx0XHRcdC8vIGJ5IGFkZGluZyB0aGUgJ3VpLWRpc2FibGVkJyBjbGFzcyB0byB0aGVtLiBVc2luZyBhIEphdmFTY3JpcHQgd29ya2Fyb3VuZCBmb3IgdGhvc2UgYnJvd3Nlci5cclxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8zNTU4XHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIHVpLWRpc2FibGVkIGFmdGVyIDEuNC4wIHJlbGVhc2VcclxuXHRcdFx0Ly8gb25seSB1aS1zdGF0ZS1kaXNhYmxlZCBzaG91bGQgYmUgcHJlc2VudCB0aGVyZWFmdGVyXHJcblx0XHRcdCQubW9iaWxlLmRvY3VtZW50LmRlbGVnYXRlKCBcIi51aS1zdGF0ZS1kaXNhYmxlZCwudWktZGlzYWJsZWRcIiwgXCJ2Y2xpY2tcIixcclxuXHRcdFx0XHRmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KCBqUXVlcnksIHRoaXMgKSk7XHJcblxyXG5cclxufSkpO1xyXG5cbn0uY2FsbCh3aW5kb3cpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2V4dGVybmFsL2pxdWVyeS9zY3JpcHRzL2pxdWVyeS5tb2JpbGUuanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBwbGF0Zm9ybSDliKTlrprjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqIFvlj4LogINdIGh0dHBzOi8vdzNnLmpwL2Jsb2cvdG9vbHMvanNfYnJvd3Nlcl9zbmlmZmluZ1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgbGV0IFBsYXRmb3JtID0gKCgpID0+IHtcclxuICAgICAgICBsZXQgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGxldCBtYWpvclZlcnNpb24gPSBmdW5jdGlvbiAoYnJvd3Nlcjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgbGV0IHZlcnNpb24gPSB1YS5tYXRjaChuZXcgUmVnRXhwKFwiKFwiICsgYnJvd3NlciArIFwiKSggfC8pKFswLTldKylcIikpO1xyXG4gICAgICAgICAgICBpZiAoIXZlcnNpb24gfHwgdmVyc2lvbi5sZW5ndGggPCA0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodmVyc2lvblszXSwgMTApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGx0SUU2OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUubWF4SGVpZ2h0ID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdElFNzogdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdElFODogdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdElFOTogKDxhbnk+ZG9jdW1lbnQpLnVuaXF1ZUlEICYmIHR5cGVvZiB3aW5kb3cubWF0Y2hNZWRpYSA9PT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgZ3RJRTEwOiAoPGFueT5kb2N1bWVudCkudW5pcXVlSUQgJiYgd2luZG93Lm1hdGNoTWVkaWEsXHJcbiAgICAgICAgICAgIFRyaWRlbnQ6ICg8YW55PmRvY3VtZW50KS51bmlxdWVJRCxcclxuICAgICAgICAgICAgR2Vja286IFwiTW96QXBwZWFyYW5jZVwiIGluICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUsXHJcbiAgICAgICAgICAgIFByZXN0bzogZ2xvYmFsLm9wZXJhLFxyXG4gICAgICAgICAgICBCbGluazogZ2xvYmFsLmNocm9tZSxcclxuICAgICAgICAgICAgV2Via2l0OiB0eXBlb2YgZ2xvYmFsLmNocm9tZSA9PT0gXCJ1bmRlZmluZWRcIiAmJiBcIldlYmtpdEFwcGVhcmFuY2VcIiBpbiAoPGFueT5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnN0eWxlLFxyXG4gICAgICAgICAgICBUb3VjaDogdHlwZW9mIGdsb2JhbC5vbnRvdWNoc3RhcnQgIT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIE1vYmlsZTogdHlwZW9mIGdsb2JhbC5vcmllbnRhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgbHRBZDRfNDogdHlwZW9mIGdsb2JhbC5vcmllbnRhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAodHlwZW9mIGdsb2JhbC5FdmVudFNvdXJjZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAzMCA+IG1ham9yVmVyc2lvbihcImNocm9tZVwiKSksXHJcbiAgICAgICAgICAgIFBvaW50ZXI6IGdsb2JhbC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQsXHJcbiAgICAgICAgICAgIE1TUG9uaXRlcjogZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLFxyXG4gICAgICAgICAgICBBbmRyb2lkOiAodWEuaW5kZXhPZihcImFuZHJvaWRcIikgIT09IC0xKSxcclxuICAgICAgICAgICAgaU9TOiAodWEuaW5kZXhPZihcImlwaG9uZVwiKSAhPT0gLTEgfHwgdWEuaW5kZXhPZihcImlwYWRcIikgIT09IC0xIHx8IHVhLmluZGV4T2YoXCJpcG9kXCIpICE9PSAtMSksXHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL1BsYXRmb3JtLnRzIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlBsYXRmb3JtLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnR5cGVkZWYgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHZjbGljayBwYXRjaFxyXG4gICAgICovXHJcbiAgICBsZXQgX3ZjbGlja1BhdGNoID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGxldCBqcXVlcnlfb24gPSAkLmZuLm9uLFxyXG4gICAgICAgICAgICBqcXVlcnlfb2ZmID0gJC5mbi5vZmY7XHJcblxyXG4gICAgICAgIGxldCBjdXN0b21fb24gPSBmdW5jdGlvbiAodHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnJlcGxhY2UoL3ZjbGljay9nLCBcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5fLmJpbmQoanF1ZXJ5X29uLCB0aGlzKSkodHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgY3VzdG9tX29mZiA9IGZ1bmN0aW9uICh0eXBlcywgc2VsZWN0b3IsIGZuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZXMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVzID0gdHlwZXMucmVwbGFjZSgvdmNsaWNrL2csIFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICg8YW55Pl8uYmluZChqcXVlcnlfb2ZmLCB0aGlzKSkodHlwZXMsIHNlbGVjdG9yLCBmbik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gcmVwbGFjZSBmdW5jdGlvbnMuXHJcbiAgICAgICAgKDxhbnk+JC5mbikub24gPSBjdXN0b21fb247XHJcbiAgICAgICAgKDxhbnk+JC5mbikub2ZmID0gY3VzdG9tX29mZjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhdGNoXHJcbiAgICAgKiBAYnJpZWYgcGF0Y2ggY2xhc3MgZm9yIGpxbSBmcmFtZXdvcmsuXHJcbiAgICAgKiAgICAgICBbcmV2aWV3XSB2Y2xpY2sg44Gu44OR44OD44OB44KS5b2T44Gm44KL44GT44Go44GM44KP44GL44KL44Go44KI44GEXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYXRjaCB7XHJcblxyXG4gICAgICAgIHN0YXRpYyBzX3ZjbGlja0V2ZW50ID0gXCJ2Y2xpY2tcIjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEFwcGx5IHBhdGNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5Hjg4Pjg4Hjga7pgannlKhcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFwcGx5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIVBhdGNoLmlzU3VwcG9ydGVkVmNsaWNrKCkpIHtcclxuICAgICAgICAgICAgICAgIF92Y2xpY2tQYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgUGF0Y2guc192Y2xpY2tFdmVudCA9IFwiY2xpY2tcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGlmIFwidmNsaWNrXCIgZXZlbnQgaXMgdW5zdXBwb3J0ZWQsIHJldHVybnMgZmFsc2UuIGV4OiBBbmRyb2lkIDQuNCAoS2l0a2F0KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBcInZjbGlja1wiIGV2ZW50IOOBjOmdnuOCteODneODvOODiOOBp+OBguOCiyBwbGF0Zm9ybSAoS2l0S2F0KSDjga8gZmFsc2Ug44KS6L+U44GZ44CCXHJcbiAgICAgICAgICogalFNIOOBriB2ZXJzaW9uIHVwIOOBq+OCiOOCiuOAgeino+axuuOBleOCjOOCi+WgtOWQiOOBr+eEoeWKueOBi+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaXNTdXBwb3J0ZWRWY2xpY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIGZvciBBbmRyb2lkIDQuNCsgKEtpdGthdCDvvZ4pXHJcbiAgICAgICAgICAgIGlmIChQbGF0Zm9ybS5BbmRyb2lkICYmICFQbGF0Zm9ybS5sdEFkNF80KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYXRjaC50cyIsIm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gT3JpZW50YXRpb25cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGVudW0gT3JpZW50YXRpb24ge1xyXG4gICAgICAgIFBPUlRSQUlUID0gMCxcclxuICAgICAgICBMQU5EU0NBUEUgPSAxLFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogR2V0IE9yaWVudGF0aW9uIGVudW0gY29kZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge051bWJlcn0gT3JpZW50YXRpb24gQ29kZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogT3JpZW50YXRpb24g44Gu5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBPcmllbnRhdGlvbiBDb2RlLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0T3JpZW50YXRpb24oKTogT3JpZW50YXRpb24ge1xyXG4gICAgICAgIGxldCAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG4gICAgICAgIHJldHVybiAoJHdpbmRvdy53aWR0aCgpIDwgJHdpbmRvdy5oZWlnaHQoKSkgPyBPcmllbnRhdGlvbi5QT1JUUkFJVCA6IE9yaWVudGF0aW9uLkxBTkRTQ0FQRTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvT3JpZW50YXRpb24udHMiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiT3JpZW50YXRpb24udHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQHR5cGUgIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uXHJcbiAgICAgKiBAYnJpZWYgZGlyZWN0aW9uIGRlZmluaXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAdHlwZSAgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb25cclxuICAgICAqIEBicmllZiDpgbfnp7vmlrnlkJHjga7lrprnvqkuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCB0eXBlIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uID0gXCJiYWNrXCIgfCBcImZvcndhcmRcIiB8IFwic2FtZVwiIHwgXCJ1bmtub3duXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFNob3dFdmVudERhdGFcclxuICAgICAqIEBicmllZiAgICAgQXJndW1lbnQgb2Ygb25TaG93L29uQmVmb3JlU2hvdyBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgU2hvd0V2ZW50RGF0YVxyXG4gICAgICogQGJyaWVmICAgICBvblNob3cvb25CZWZvcmVTaG93IOOBp+a4oeOBleOCjOOCi+W8leaVsFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFNob3dFdmVudERhdGEge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBzb3VyY2UgcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75YmN44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldlBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGRlc3RpbmF0aW9uIHBhZ2UgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+W+jOOBrueUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRvUGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcGFnZSB0cmFuc2l0aW9uIGRpcmVjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75pa55ZCR44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGlyZWN0aW9uOiBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YVxyXG4gICAgICogQGJyaWVmICAgICBBcmd1bWVudCBvZiBvbkhpZGUvb25CZWZvcmVIaWRlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBIaWRlRXZlbnREYXRhXHJcbiAgICAgKiBAYnJpZWYgICAgIG9uSGlkZS9vbkJlZm9yZUhpZGUg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHBhZ2UgRE9NIGVsZW1lbnQgdG8gd2hpY2ggd2UganVzdCB0cmFuc2l0aW9uZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODiOODqeODs+OCuOOCt+ODp+ODs+WujOS6huOBl+OBn+eUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5leHRQYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBkZXN0aW5hdGlvbiBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vlvozjga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0b1BhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZyb20gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75YmN44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldlBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdHJhbnNpdGlvbiBkaXJlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+aWueWQkeOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpcmVjdGlvbjogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIEludGVudFxyXG4gICAgICogQGJyaWVmICAgICBEZWxlZ2F0ZSBpbnRlcmZhY2Ugb2YgYWRkaXRpb25hbCBkYXRhIGZvciBQYWdlIGNsYXNzLlxyXG4gICAgICogICAgICAgICAgICBDbGllbnQgY2FuIGRlZmluZSBleHRlbmQgdHlwZSBmcm9tIGl0LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIEludGVudFxyXG4gICAgICogQGJyaWVmICAgICDku7vmhI/jga7mg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqICAgICAgICAgICAgUGFnZSDjgavmuKHjgZXjgozjgovjg4fjg7zjgr/jgILmi6HlvLXjgZfjgabkvb/nlKjlj6/og71cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBhbnkgcGFyYW1ldGVyLlxyXG4gICAgICAgICAqIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIGlzIHVzZWQgYnkgZnJhbWV3b3JrIGZvciBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDku7vmhI/jga7jg5Hjg6njg6Hjg7zjgr9cclxuICAgICAgICAgKiBwYXJhbXNbXCJxdWVyeVBhcmFtc1wiXSDjgavjga/jgIFxdWVyeSBwYXJhbWV0ZXIg44GM44OV44Os44O844Og44Ov44O844Kv44Gr44KI44KK5qC857SN44GV44KM44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcGFyYW1zPzogT2JqZWN0O1xyXG4gICAgICAgIC8vISBhbnlcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VTdGFja1xyXG4gICAgICogQGJyaWVmIEFyZ3VtZW50cyBpbnRlcmZhY2Ugb2YgUm91dGVyLnJlZ2lzdGVyUGFnZVN0YWNrKCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VTdGFja1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjaygpIOOBq+aMh+WumuOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFBhZ2VTdGFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHJvdXRlIHN0cmluZywgaXQgY2FuIGJlIHJlZ3VsYXIgZXhwcmVzc2lvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Or44O844OG44Kj44Oz44Kw5paH5a2X5YiXIC8g5q2j6KaP6KGo54++XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcm91dGU6IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdGl0bGUgc3RyaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjgr/jgqTjg4jjg6vmloflrZfliJdcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aXRsZT86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdHJhbnNpdGlvbiBzdHJpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+ODiOODqeODs+OCuOOCt+ODp+ODs+aWh+Wtl+WIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFN1YkZsb3dQYXJhbVxyXG4gICAgICogQGJyaWVmIGludGVyZmFjZSBvZiBSb3V0ZXIncyBTdWIgRmxvdyBwYXJhbWVudGVycy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBTdWJGbG93UGFyYW1cclxuICAgICAqIEBicmllZiBSb3V0ZXIg44GuIFN1YiBGbG93IOOBq+aMh+WumuOBmeOCi+ODkeODqeODoeODvOOCv+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFN1YkZsb3dQYXJhbSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHNldCBzdWIgZmxvdyBvcGVyYXRpb24gW2JlZ2luIHwgZW5kXS5cclxuICAgICAgICAgKiBXaGVuIFwiYmVnaW5cIiBpcyBzZXQgYW5kIHRoZW4gXCJlbmRcIiBpcyBjYWxsZWQsIGl0IGNhbiByZXR1cm4gdG8gdGhlIFVSTCBzcGVjaWZpZWQgYXMgXCJiYXNlXCIgd2l0aCB0cmVhdGluZyBicm93c2VyIGhpc3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOWHpueQhuOCkuaMh+WumiBbYmVnaW4gfCBlbmRdXHJcbiAgICAgICAgICogXCJiZWdpblwiIOOBjOaMh+WumuOBleOCjOOAgeasoeOBqyBcImVuZFwiIOOCkuWRvOOBtuOBqOOBjeOAgVwiYmFzZVwiIOOBq+aMh+WumuOBl+OBnyB1cmwg44G+44Gn44OW44Op44Km44K25bGl5q2044KS44Gf44Gp44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImJlZ2luXCIgfCBcImVuZFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUGFnZSBVUkwvSGFzaCB1c2VkIGFzIHRoZSByZWZlcmVuY2UgcG9pbnQgb2YgU3ViIEZsb3cgaXMgc3BlY2lmaWVkLlxyXG4gICAgICAgICAqIFdoZW4gU3ViIEZsb3cgb3BlcmF0aW9uID09IFwiZW5kXCIgaXMgc3BlY2lmaWVkLCBVUkwgc3BlY2lmaWVkIGFzIG5hdmlnYXRlIGlzIGRpc3JlZ2FyZGVkLlxyXG4gICAgICAgICAqIElmIG5vdCBzZXQsIHRoaXMgcGFyYW1ldGVyIGlzIGFzc2lnbmVkIHRoZSBwYWdlIGNhbGxlZCBSb3V0ZXIubmF2aWdhdGUoKSB3aXRoIHN1YkZsb3cgcHJvcGVydHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOOBruWfuueCueOBqOOBquOCi+ODmuODvOOCuCBVUkwvSGFzaCDjgpLmjIflrprjgIJcclxuICAgICAgICAgKiBTdWIgRmxvdyBvcGVyYXRpb24gPT0gXCJlbmRcIiDjgYzmjIflrprjgZXjgozjgovloLTlkIjjga/jgIFuYXZpZ2F0ZSDjgavmjIflrprjgZXjgozjgosgVVJMIOOBr+eEoeimluOBleOCjOOCi+OAglxyXG4gICAgICAgICAqIOaMh+WumuOBjOOBquOBhOWgtOWQiOOBryBSb3V0ZXIubmF2aWdhdGUoKSDmmYLjgasgc3ViRmxvdyDjgpLmjIflrprjga7lkbzjgbPlh7rjgZflhYPjgYzjgqLjgrXjgqTjg7PjgZXjgozjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0QmFzZT86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFBhZ2VTdGFjayBmcm9tIFwiZGVzdEJhc2VcIiB3aGljaCBjaGFuZ2VzIHBhZ2UgYXQgdGhlIHRpbWUgb2YgdGhlIGVuZCBvZiBTdWIgRmxvdyBpcyBzcGVjaWZpZWQuXHJcbiAgICAgICAgICogV2hlbiB0aGlzIHBhcmFtZXRlciBpcyBubyBzZXQsIGl0IGNoYW5nZXMgcGFnZSB0byBcImRlc3RCYXNlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOe1guS6huaZguOBq+mBt+enu+OBmeOCiyBcImRlc3RCYXNlXCIg44GL44KJ44GuIFBhZ2VTdGFjayDjgpLmjIflrprjgILmjIflrprjgYzjgarjgYTloLTlkIjjga/jgIFcImRlc3RCYXNlXCIg44Gr6YG356e744GZ44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVzdFN0YWNrcz86IFBhZ2VTdGFja1tdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBSb3V0ZXJPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgT3B0aW9ucyBpbnRlcmZhY2Ugb2YgUm91dGVyLnN0YXJ0KCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlck9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIuc3RhcnQoKSDjgavmjIflrprjgZnjgovjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBSb3V0ZXJPcHRpb25zIGV4dGVuZHMgQmFja2JvbmUuSGlzdG9yeU9wdGlvbnMgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIE9wdGlvbnMgaW50ZXJmYWNlIG9mIFJvdXRlci5uYXZpZ2F0ZSgpIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBOYXZpZ2F0ZU9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIubmF2aWdhdGUoKSDjgavmjIflrprjgZnjgovjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBOYXZpZ2F0ZU9wdGlvbnMgZXh0ZW5kcyBCYWNrYm9uZS5OYXZpZ2F0ZU9wdGlvbnMge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBvdmVyd3JpdGU6IHRyaWdnZXIgZGVmYXVsdCB2YWx1ZSBpcyB0cnVlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiB0cmlnZ2VyIOOBruaXouWumuWApOOBryB0cnVlIOOBqOOBl+OBpuaJseOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRyaWdnZXI/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3ViRmxvd1BhcmFtIGlzIHNwZWNpZmllZCB3aGVuIHBlcmZvcm1pbmcgU3ViIEZsb3cgcHJvY2Vzc2luZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogU3ViIEZsb3cg5Yem55CG44KS6KGM44GG5aC05ZCI44CBU3ViRmxvd1BhcmFtIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN1YkZsb3c/OiBTdWJGbG93UGFyYW07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBzZXQgYmFjayBvcGVyYXRpb24gZGVzdGluYXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFvmiLvjgotdIOaZguOBq+mBt+enu+OBmeOCi+ODmuODvOOCuCBVUkwg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYmFja0Rlc3RpbmF0aW9uPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogbm8gaGFzaCBjaGFuZ2UgZmxhZyBpbiBuYXZpZ2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIE5hdmlnYXRlIOaZguOBqyBIYXNoIOWkieabtOOBl+OBquOBhOODleODqeOCsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5vSGFzaENoYW5nZT86IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBhZGRpdGlvbmFsIGluZm8gaW50ZXJmYWNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDku5jliqDmg4XloLHjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnRlbnQ/OiBJbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIEhhbmRsZSBvcmllbnRhdGlvbiBjaGFuZ2VkIG5vdGlmeSBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYgT3JpZW50YXRpb24g44Gu5aSJ5pu05qSc55+l44KS5Y+X5L+h44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVjZWl2ZWQgb3JpZW50YXRpb24gY29kZSB3aGVuIHRoYXQgaXMgY2hhbmdlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdPcmllbnRhdGlvbiB7T3JpZW50YXRpb259IFtpbl0gbmV3IG9yaWVudGF0aW9uIGNvZGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIE9yaWVudGF0aW9uIOOBruWkieabtOOCkuWPl+S/oVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld09yaWVudGF0aW9uIHtPcmllbnRhdGlvbn0gW2luXSBuZXcgb3JpZW50YXRpb24gY29kZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBvbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbjogT3JpZW50YXRpb24pOiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXJcclxuICAgICAqIEBicmllZiBIYW5kbGUgSC9XIGJhY2sgYnV0dG9uIGV2ZW50IG5vdGlmeSBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgSUJhY2tCdXR0b25FdmVudExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYgSC9XIEJhY2sgYnV0dG9uIOOBriBldmVudCDjgpLlj5fkv6HjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWNlaXZlZCBIL1cgQmFjayBCdXR0b24gZXZlbnRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IGNvbnRpbnVlIGRlZmF1bHQgb3BlcmF0aW9uIC8gZmFsc2U6IHN0b3AgZGVmYXVsdCBvcGVyYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50PzogSlF1ZXJ5RXZlbnRPYmplY3QpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJQ29tbWFuZExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYgRnJhbWV3b3JrIGdlbmVyaWMgY29tbWFuZCBjYWxsYmFjayBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgSUNvbW1hbmRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIOaxjueUqOOCs+ODnuODs+ODieOCs+ODvOODq+ODkOODg+OCr+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21tYW5kTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWNlaXZlZCBnZW5lcmljIGNvbW1hbmRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSAgZXZlbnQge2tpbmR9ICAgICAgICAgICAgICBbaW5dIGNvbW1hbmQga2luZCBzdHJpbmdcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBjb250aW51ZSBkZWZhdWx0IG9wZXJhdGlvbiAvIGZhbHNlOiBzdG9wIGRlZmF1bHQgb3BlcmF0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaxjueUqOOCs+ODnuODs+ODieOCkuWPl+S/oVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNvbW1hbmQoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCwga2luZD86IHN0cmluZyk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VDb25zdHJ1Y3RPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgSW50ZXJmYWNlIGNsYXNzIGZvciBzdG9yaW5nIHJlZ2lzdHJhdGlvbiBpbmZvLCB1c2luZyBieSBSb3V0ZXIucmVnaXN0ZXIoKSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgUGFnZUNvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIucmVnaXN0ZXIoKSDjgafmjIflrprjgZnjgovnmbvpjLLmg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYWdlQ29uc3RydWN0T3B0aW9ucyB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHJvdXRlIGlkZW50aWZpZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogcm91dGUg6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcm91dGU/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBjYWxsYmFjayBvbiBjaGFuZ2luZyByb3V0ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogcm91dGUg5aSJ5pu05pmC44Gr5ZG844Gz5Ye644GV44KM44KL44Kz44O844Or44OQ44OD44KvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2FsbGJhY2s/OiAoLi4uYXJnczogYW55W10pID0+IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBzZXQgXCJ0cnVlXCIgaWYgYXBwbGljYXRpb24ncyB0b3Agdmlldy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Ki44OX44Oq44Kx44O844K344On44Oz44GuIHRvcCDnlLvpnaLjgafjgYLjgovloLTlkIggdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICB0b3A/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogVGhlIGluc3RhbmNlIG9mIFBhZ2UgZXZlbnQgbGlzdGVuZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFBhZ2Ug44Kk44OZ44Oz44OI44KS5Y+X5L+h44GZ44KL44Oq44K544OK44O844Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICog5qmf6IO95ouh5by15pmC44Gr5oyH5a6a44GZ44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3duZXI/OiBJUGFnZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGludGVudCBpbnN0YW5jZSBpcyBjb21tdW5pY2F0ZWQgbmV4dCBwYWdlIHdoZW4gXCJpbnRlbnRcIiBpc24ndCBkZXNpZ25hdGVkIHNwZWNpZmljYWxseSBpbiBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDmmI7npLrnmoTjgasgaW50ZW50IOOBjOaMh+WumuOBleOCjOOBquOBhOWgtOWQiOOBq+OBiuOBhOOBpuOCglxyXG4gICAgICAgICAqIGludGVudCDjgpLnoLTmo4TjgZfjgarjgYTloLTlkIjjga8gdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBrZWVwSW50ZW50PzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSVBhZ2VcclxuICAgICAqIEBicmllZiBJbnRlcmZhY2Ugb2YgUGFnZSBjbGFzcy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJUGFnZVxyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOOCr+ODqeOCueOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCueOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYWdlIGV4dGVuZHMgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyLCBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXIsIElDb21tYW5kTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBwYWdlIGlzIGFjdGl2ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K444GM44Ki44Kv44OG44Kj44OW44Gn44GC44KL5pmCIHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBhY3RpdmU6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZWQgdGFyZ2V0IHBhZ2UgdXJsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDlr77osaHjga7jg5rjg7zjgrggVVJMIOOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVybDogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcmVkIHRhcmdldCBwYWdlIElELlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDlr77osaHjga7jg5rjg7zjgrggSUQg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGpRdWVyeSBvYmplY3Qgb2YgcGFnZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K444GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICAkcGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogalF1ZXJ5IG9iamVjdCBvZiBwYWdlJ3MgaGVhZGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjg5jjg4Pjg4Djga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRoZWFkZXI6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGpRdWVyeSBvYmplY3Qgb2YgcGFnZSdzIGZvb3Rlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K444OV44OD44K/44GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICAkZm9vdGVyOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBpbnRlbnQgcGFyYW1ldGVyIHBhc3NpbmcgYmV0d2VlbiBwYWdlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K46ZaT44Gn5Y+X44GR5rih44GV44KM44KLIGludGVudCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnRlbnQ6IEludGVudDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlY2VpdmVkIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBldmVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZX0galF1ZXJ5UHJvbWlzZSBPYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqIOODmuODvOOCuOmBt+enu+ebtOWJjeOBq+mdnuWQjOacn+WHpueQhuOCkuihjOOBhuOBk+OBqOOBjOWPr+iDvVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SVByb21pc2VCYXNlfSBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uQmVmb3JlUm91dGVDaGFuZ2UoKTogSVByb21pc2VCYXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBJdCdzIGNhbGxlZCBvbmx5IHdoZW4gYmVmb3JlIHRoZSBmaXJzdCBPblBhZ2VJbml0KCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDmnIDliJ3jga4gT25QYWdlSW5pdCgpIOOBruOBqOOBjeOBq+OBruOBv+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNyZWF0ZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaW5pdFwiKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKOaXpzpcInBhZ2Vpbml0XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VJbml0KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3Jlc2hvd1wiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0gYWRkaXRpb25hbCBpbmZvXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3Jlc2hvd1wiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlc2hvd1wiKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSBhZGRpdGlvbmFsIGluZm9cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKOaXpzpcInBhZ2VzaG93XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIGFkZGl0aW9uYWwgaW5mb1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcmhpZGVcIiAocHJldmlvdXMgdmVyc2lvbiBkZWZpbmVkIFwicGFnZWhpZGVcIikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0gYWRkaXRpb25hbCBpbmZvXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VWaWV3XHJcbiAgICAgKiBAYnJpZWYgICAgIGFsaWFzIGZvciBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPi5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBCYXNlVmlld1xyXG4gICAgICogQGJyaWVmICAgICBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPiDjga4gYWxpYXNcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBCYXNlVmlldyBleHRlbmRzIEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+IHsgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSBcImNkcC5mcmFtZXdvcmsuanFtXCIge1xyXG4gICAgbGV0IEZyYW1ld29yazogdHlwZW9mIENEUC5GcmFtZXdvcms7XHJcbiAgICBleHBvcnQgPSBGcmFtZXdvcms7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL0ludGVyZmFjZXMudHMiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vQHR5cGVzL2pxdWVyeS5tb2JpbGUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJJbnRlcmZhY2VzLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvcmVBUEkudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiUGF0Y2gudHNcIiAvPlxyXG5cclxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoIG5vLXN0cmluZy1saXRlcmFsICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gY2xvc3VyZSBtZXRob2RzXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBDb252ZXJ0IHBhdGggdG8gVVJMLlxyXG4gICAgICogSWYgdGhlIHBhdGggc3RhcnRzIGZyb20gXCIvXCIsIHRoZSBmdW5jdGlvbiB0cmFuc2xhdGUgdGhlIHBhdGggYXMgY2hpbGQgZm9sZGVyIG9mIFwid2ViIHJvb3RcIi5cclxuICAgICAqIE90aGVyd2lzZSwgaXQgaW50ZXJwcmV0cyBhcyByZWxhdGl2ZSBwYXRoIGZyb20gY3VycmVudCBwYWdlLlxyXG4gICAgICogW05vdGVdIFRoaXMgYmVoYXZpb3IgZ28gYWxvbmcgd2l0aCBqUU0sIE5PVCB3aXRoIHJlcXVpcmUudG9VcmwoKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIHBhdGggc3RyaW5nXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIHBhdGgg44KSIFVSTCDjgavlpInmj5tcclxuICAgICAqIFwiL1wiIOOBi+OCieWni+OBvuOCi+OCguOBruOBryB3ZWIgcm9vdCDjgYvjgonjgIHjgZ3jgozku6XlpJbjga/nj77lnKjjga7jg5rjg7zjgrjjgYvjgonntbblr77jg5HjgrlVUkzjgavlpInmj5vjgZnjgovjgIJcclxuICAgICAqIGpRTSDjga7mjJnli5XjgavjgYLjgo/jgZvjgabjgYrjgorjgIFyZXF1aXJlLnRvVXJsKCkg44Go55Ww44Gq44KL44Gu44Gn5rOo5oSP44CCXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSDjg5HjgrnjgpLmjIflrprjgIJcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRvVXJsKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKG51bGwgIT0gcGF0aFswXSAmJiBcIi9cIiA9PT0gcGF0aFswXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ0RQLndlYlJvb3QgKyBwYXRoLnNsaWNlKDEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZShwYXRoLCBnZXRDdXJyZW50RG9jdW1lbnRVcmwoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogR2V0IGN1cnJlbnQgZG9jdW1lbnQgdXJsLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIOePvuWcqOihqOekuuOBl+OBpuOBhOOCi+ODieOCreODpeODoeODs+ODiOOBriBVUkwg44KS5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudERvY3VtZW50VXJsKCk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0ICRhY3RpdmVQYWdlID0gKDxhbnk+JChcImJvZHlcIikpLnBhZ2Vjb250YWluZXIoXCJnZXRBY3RpdmVQYWdlXCIpO1xyXG4gICAgICAgIGlmIChudWxsID09ICRhY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHVybCA9ICQubW9iaWxlLmFjdGl2ZVBhZ2UuY2xvc2VzdChcIi51aS1wYWdlXCIpLmpxbURhdGEoXCJ1cmxcIiksXHJcbiAgICAgICAgICAgIGJhc2UgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG5cclxuICAgICAgICBpZiAoIXVybCB8fCAhJC5tb2JpbGUucGF0aC5pc1BhdGgodXJsKSkge1xyXG4gICAgICAgICAgICB1cmwgPSBiYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKHVybCwgYmFzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBEZWZhdWx0IFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGhhbmRsZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICog5pei5a6a44GuIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGxldCBfYmVmb3JlUm91dGVDaGFuZ2UgPSAoKTogSVByb21pc2VCYXNlPGFueT4gPT4ge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZGVmYXVsdCBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBoYW5uZGxlclxyXG4gICAgbGV0IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgPSBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBTZXR1cCBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBoYW5kbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IG9sZCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6noqK3lrppcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlciDmjIflrpouXHJcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0g5Lul5YmN44GuIGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIoaGFuZGxlcjogKCkgPT4gSVByb21pc2VCYXNlPGFueT4pOiAoKSA9PiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gaGFuZGxlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBvbGRIYW5kbGVyID0gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UgPSBoYW5kbGVyO1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkSGFuZGxlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSW5pdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBpbml0aWFsaXplIG9wdGlvbiBkZWZpbml0aW9uLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJbml0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIOWIneacn+WMluOCquODl+OCt+ODp+ODs1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIEluaXRPcHRpb25zIHtcclxuICAgICAgICBhbmNob3JWY2xpY2s/OiBib29sZWFuOyAgICAvLyE8IOaal+m7meOBriBhbmNob3IgdmNsaWNrIOOCkuOCteODneODvOODiFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBSb3V0ZUNvbnRleHRcclxuICAgICAqIEBicmllZiBNYW5hZ2VtZW50IGluZm8gZm9yIHBhZ2UuXHJcbiAgICAgKiAgICAgICAgVGhpcyBpbnRlcmZhY2Ugcm9sZSBpcyBub3Qgc2FtZSBhcyBCYWNrYm9uZS5Sb3V0ZXIucm91dGVzLlxyXG4gICAgICogICAgICAgIFVzaW5nIGZvciByZXNvbHZpbmcgcmVsYXRpb24gYSBrbm93biBmcmFnbWVudCB2YWx1ZSBhbmQgYSBwYWdlIHBhdGguXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlQ29udGV4dFxyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOeuoeeQhuaDheWgsVxyXG4gICAgICogICAgICAgIEJhY2tib25lLlJvdXRlci5yb3V0ZXMg44Go5ZCM44GY5b255Ymy44Gn44Gv44Gq44GE44CCXHJcbiAgICAgKiAgICAgICAg6YG356e744GX44Gf44GT44Go44GM44GC44KL44OV44Op44Kw44Oh44Oz44OI5YCk44Go44Oa44O844K444Gu44OR44K544Gu6Kej5rG644Gr5L2/55So44GV44KM44KL44CCXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgUm91dGVDb250ZXh0IHtcclxuICAgICAgICByb3V0ZTogc3RyaW5nO1xyXG4gICAgICAgIHJlZ2V4cDogUmVnRXhwO1xyXG4gICAgICAgIHBhZ2U6IHN0cmluZztcclxuICAgICAgICB0b3A6IGJvb2xlYW47XHJcbiAgICAgICAgY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVJbmZvXHJcbiAgICAgKiBAYnJpZWYgU3RvcmVkIGFkZGl0aW9uYWwgaW5mbyBpbnRlcmZhY2Ugb24gbmF2aWdhdGUuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIE5hdmlnYXRlSW5mb1xyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOmBt+enu+OBq+mWouOBmeOCi+S7mOWKoOaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIE5hdmlnYXRlSW5mbyB7XHJcbiAgICAgICAgdXJsPzogc3RyaW5nO1xyXG4gICAgICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgcmV2ZXJzZT86IGJvb2xlYW47XHJcbiAgICAgICAgYmFja0Rlc3RpbmF0aW9uPzogc3RyaW5nO1xyXG4gICAgICAgIG5vSGFzaENoYW5nZT86IGJvb2xlYW47XHJcbiAgICAgICAgaW50ZW50PzogSW50ZW50O1xyXG4gICAgICAgIC8vIHN0YXR1cyBwYXJhbXNcclxuICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlPzogYm9vbGVhbjtcclxuICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZT86IGJvb2xlYW47XHJcbiAgICAgICAgaW5OYXZpZ2F0aW9uPzogYm9vbGVhbjtcclxuICAgICAgICBpbkFkZGl0aW9uYWxCYWNrPzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXhcclxuICAgICAqIEBicmllZiBFeHRlbmVkIFN1YkZsb3dQYXJhbSBpbnRlcmZhY2UgaW4gRnJhbWV3b3JrIHVzZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXhcclxuICAgICAqIEBicmllZiBGcmFtZXdvcmsg44GM5L2/55So44GZ44KLIFN1YkZsb3dQYXJhbSDmi6HlvLXjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBTdWJGbG93UGFyYW1FeCBleHRlbmRzIFN1YkZsb3dQYXJhbSB7XHJcbiAgICAgICAgYWRkaXRpb25hbERpc3RhbmNlPzogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAY2xhc3MgUm91dGVyXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyIGNsYXNzIGZvciBhZGp1c3RpbmcgalF1ZXJ5TW9iaWxlIGZ1bmN0aW9ucyBhbmQgQmFja2JvbmUuUm91dGVyIGZ1bmN0aW9ucy5cclxuICAgICAqICAgICAgICBFdmVuIGlmIEJhY2tib25lLlJvdXRlciBkb2VzIG5vdCBzdGFydCByb3V0aW5nLCBuYXRpZ2F0ZSgpIG1ldGhvZCB3b3JrcyBnb29kIHdpdGggalFNIGZyYW1ld29yay5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGNsYXNzIFJvdXRlclxyXG4gICAgICogQGJyaWVmIGpRdWVyeU1vYmlsZSDjgaggQmFja2JvbmUuUm91dGVyIOOCkuiqv+WBnOOBmeOCiyBSb3V0ZXIg44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAg44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44Gq44GE5aC05ZCI44Gr44KC44CBbmF2aWdhdGUoKSDjga8galFNIOODleODrOODvOODoOODr+ODvOOCr+OCkuS9v+eUqOOBl+OBpuapn+iDveOBmeOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUm91dGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19pbml0T3B0aW9uczogSW5pdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3JvdXRlcjogQmFja2JvbmUuUm91dGVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3Jvb3RDb250ZXh0czogT2JqZWN0ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sYXN0TmF2aWdhdGVJbmZvOiBOYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RDbGlja2VkVGltZTogbnVtYmVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RJbnRlbnQ6IEludGVudCA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfbG9hZFVybDogKGZyYWdtZW50OiBzdHJpbmcpID0+IGJvb2xlYW4gPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfYmFjazogKCkgPT4gdm9pZCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgREVMQVlfVElNRSA9IDIwMDsgICAgICAgIC8vIFRCRDog5pqr5a6a5YCkXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgREFUQV9CQUNLX0RFU1RJTkFUSU9OID0gXCJkYXRhLWJhY2stZHN0XCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgREFUQV9OT19IQVNIX0NIQU5HRSA9IFwiZGF0YS1uby1oYXNoLWNoYW5nZVwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfTk9fVkNMSUNLX0hBTkRMRSA9IFwiZGF0YS1uby12Y2xpY2staGFuZGxlXCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgQkFDS19ERVNUSU5BVElPTl9VUkwgPSBcImJhY2tEc3RVcmxcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBTVUJGTE9XX1BBUkFNID0gXCJzdWJGbG93UGFyYW1cIjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19kZWZhdWx0SW5pdE9wdGlvbnM6IEluaXRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmNob3JWY2xpY2s6IHRydWUsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19kZWZhdWx0TmF2aWdhdGVPcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBpbnRlbnQ6IG51bGwsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGZvciBpbml0aWFsaXplIFJvdXRlci4gdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgaW4gZnJhbWV3b3JrLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogc3VjY2VlZGVkIC8gZmFsc2U6IGZhaWxlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Yid5pyf5YyWXHJcbiAgICAgICAgICog44GT44Gu6Zai5pWw44Gv44OV44Os44O844Og44Ov44O844Kv5YaF6YOo44Gn5L2/55So44GV44KM44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIG9wdGlvbnMge09iamVjdH0gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSDmiJDlkKZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGluaXRpYWxpemUob3B0aW9uczogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCAkYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb3V0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImxvZ2ljIGVycm9yLiBpbml0aWFsaXplIGNhbGwgdHdpY2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuc19pbml0T3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0SW5pdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBjOOAgXJvdXRlIOOCkuino+axuuOBp+OBjeOBquOBi+OBo+OBn+WgtOWQiOOBq+OCgumAmuefpeOCkuaNleaNieOBmeOCi+OBn+OCgeOBruOCs+ODvOODq+ODkOODg+OCr+OCkuioreWumlxyXG4gICAgICAgICAgICBSb3V0ZXIuc19sb2FkVXJsID0gXy5iaW5kKEJhY2tib25lLmhpc3RvcnkubG9hZFVybCwgQmFja2JvbmUuaGlzdG9yeSk7XHJcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkubG9hZFVybCA9IFJvdXRlci5jdXN0b21Mb2FkVXJsO1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIgPSBuZXcgQmFja2JvbmUuUm91dGVyKCk7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlci5vbihcInJvdXRlXCIsIFJvdXRlci5vblJvdXRlU3VjY2VlZGVkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgpLkvb/nlKjjgZfjgabjgYTjgovloLTlkIjjgIEkLm1vYmlsZS5iYWNrKCkg44Gu5oyZ5YuV44KS44OW44Op44Km44K244GuW+aIu+OCi13jgavntbHkuIBcclxuICAgICAgICAgICAgaWYgKCEkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfYmFjayA9IF8uYmluZCgkLm1vYmlsZS5iYWNrLCAkLm1vYmlsZSk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5iYWNrID0gUm91dGVyLmN1c3RvbUpxbUJhY2s7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGNoYW5nZVBhZ2Ug44KS44K144Od44O844OIXHJcbiAgICAgICAgICAgIGlmIChudWxsID09ICQubW9iaWxlLmNoYW5nZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICQubW9iaWxlLmNoYW5nZVBhZ2UgPSAodG86IGFueSwgb3B0aW9ucz86IENoYW5nZVBhZ2VPcHRpb25zKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+JGJvZHkpLnBhZ2Vjb250YWluZXIoXCJjaGFuZ2VcIiwgdG8sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLmJpbmRFdmVudHMoKTtcclxuICAgICAgICAgICAgLy8gRnJhbWV3b3JrIOOBruOCpOODmeODs+ODiOODj+ODs+ODieODqeOCkuabtOaWsFxyXG4gICAgICAgICAgICBGcmFtZXdvcmsuc2V0dXBFdmVudEhhbmRsZXJzKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWdpc3RlciB0byBSb3V0ZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcm91dGUgICAge1N0cmluZ30gICBbaW5dIHJvdXRlIHN0cmluZywgaXQgY2FuIGJlIHJlZ3VsYXIgZXhwcmVzc2lvbi5cclxuICAgICAgICAgKiBAcGFyYW0gcGFnZSAgICAge1N0cmluZ30gICBbaW5dIHBhZ2UgdGVtcGxhdGUgcGF0aC5cclxuICAgICAgICAgKiBAcGFyYW0gdG9wICAgICAge0Jvb2xlYW59ICBbaW5dIHNldCBcInRydWVcIiBpZiBhcHBsaWNhdGlvbidzIHRvcCB2aWV3LiAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0gW2luXSBjYWxsYmFjayBmb3IgY3VzdG9tIHBhZ2UgdHJhbnNpdGlvbi4gSWYgeW91IGRvbid0IHdhbnQgdG8gdHJpZ2dlciBqUU0uY2hhbmdlUGFnZSgpLCByZXR1cm4gdHJ1ZSBieSB0aGlzIGNhbGxiYWNrLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHJldHVybiB7Um91dGVyfSBSb3V0ZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOeZu+mMslxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHJvdXRlICAgIHtTdHJpbmd9ICAgW2luXSDjg6vjg7zjg4bjgqPjg7PjgrDmloflrZfliJcgLyDmraPopo/ooajnj75cclxuICAgICAgICAgKiBAcGFyYW0gcGFnZSAgICAge1N0cmluZ30gICBbaW5dIHBhZ2UgdGVtcGxhdGUgcGF0aC4g44Kk44OZ44Oz44OI5ZCN44Gr44KC5L2/55So44GV44KM44KLXHJcbiAgICAgICAgICogQHBhcmFtIHRvcCAgICAgIHtCb29sZWFufSAgW2luXSBUb3Ag44Oa44O844K444Gu5aC05ZCI44GvIHRydWUg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0gW2luXSDpgbfnp7vjgpLoh6rouqvjgafnrqHnkIbjgZnjgovloLTlkIjjgavmjIflrprjgZfjgIHmiLvjgorlgKTjgpIgdHJ1ZSDjgavoqK3lrprjgZnjgovjgaggY2hhbmdlUGFnZSDjgpLjgrPjg7zjg6vjgZfjgarjgYQgKOS7u+aEjylcclxuICAgICAgICAgKiBAcmV0dXJuIHtSb3V0ZXJ9IOOCpOODs+OCueOCv+ODs+OCueOAguOBn+OBoOOBlyBtZXRob2QgY2hhaW4g44KS44GX44Gf44GE5aC05ZCI44Gv44CBYW55IGNhc3Qg44GM5b+F6KaB44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3Rlcihyb3V0ZTogc3RyaW5nLCBwYWdlOiBzdHJpbmcsIHRvcDogYm9vbGVhbiA9IGZhbHNlLCBjYWxsYmFjaz86ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbik6IFJvdXRlciB7XHJcbiAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgbjjga7nmbvpjLLjga8gaGlzdG9yeSDjga7lgZzmraLjgYzlv4XopoFcclxuICAgICAgICAgICAgbGV0IHJlc3RhcnQgPSBSb3V0ZXIuc3RvcCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IG5hbWUgPSByb3V0ZSArIHBhZ2U7XHJcbiAgICAgICAgICAgIGxldCBjb250ZXh0OiBSb3V0ZUNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICByb3V0ZTogcm91dGUsXHJcbiAgICAgICAgICAgICAgICByZWdleHA6ICg8YW55PlJvdXRlci5zX3JvdXRlcikuX3JvdXRlVG9SZWdFeHAocm91dGUpLFxyXG4gICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcclxuICAgICAgICAgICAgICAgIHRvcDogdG9wLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnB1c2hDb250ZXh0KG5hbWUsIGNvbnRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIucm91dGUocm91dGUsIG5hbWUsICgpID0+IHsvKiBub29wICovIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdGFydCkge1xyXG4gICAgICAgICAgICAgICAgLy8g5YaN6ZaL5pmC44Gv5YaN6Kqt44G/6L6844G/44GX44Gq44GE44CCXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc3RhcnQoeyBzaWxlbnQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RhcnQgbGlzdGVuaW5nIGhhc2ggY2hhbmdlLlxyXG4gICAgICAgICAqIEl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgcmVnaXN0ZXIoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFtpbl0gb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLkhpc3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWxpeattOebo+imluOBrumWi+Wni1xyXG4gICAgICAgICAqIOeZu+mMsuWujOS6huW+jOOBq+WRvOOBs+WHuuOBmeOAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gW2luXSBCYWNrYm9uZS5IaXN0b3J5IOOBq+OCj+OBn+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RhcnQob3B0aW9ucz86IFJvdXRlck9wdGlvbnMpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldHRpbmcgZXJyb3IuIGNvbmZpY3Q6ICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkID0gdHJ1ZSwgY2Fubm90IHN0YXJ0LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQmFja2JvbmUuaGlzdG9yeS5zdGFydChvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9wIGxpc3RlbmluZyBoYXNoIGNoYW5nZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHByZXZpb3VzIHN0YXR1cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5bGl5q2055uj6KaW44Gu57WC5LqGXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSDku6XliY3jga7plovlp4vnirbmhYvjgpLov5TljbRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0b3AoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBwcmV2U3RhdGUgPSAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0b3AoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayByb3V0aW5nIHN0YXR1cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IHJvdXRpbmcgLyBmYWxzZTogbm90IHJvdXRpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnInlirkgLyBmYWxzZTog54Sh5Yq5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc1JvdXRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFVSTCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSAgICAgICAgIFtpbl0gc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWwgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFVSTOmBt+enu1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGUodXJsOiBzdHJpbmcsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUm91dGVyLm5hdmlnYXRlKCkgY2FsbGVkIGluIG5hdmlnYXRpb24gcHJvYy5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUm91dGVyLmluaXRGaXJzdFBhZ2VJZk5lZWRlZCh1cmwpKSB7IC8vIGF1dG9Jbml0aWFsaXplUGFnZSDjgYzmjIflrprjgZXjgozjgabjgYTjgarjgYTjgajjgY1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0TmF2aWdhdGVPcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpS4gU3ViIEZsb3cg44Gr44Gm44GZ44Gn44Gr44Kz44O844Or44GV44KM44Gm44GE44KL5aC05ZCI44Gv5pei5a6a44Gu5L2V44KC44GX44Gq44GE44Kz44O844Or44OQ44OD44Kv44KS5L2/55So44GZ44KLLlxyXG4gICAgICAgICAgICBsZXQgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UgPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlID8gX2RlZmF1bHRCZWZvcmVSb3V0ZUNoYW5nZSA6IF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICByZXZlcnNlOiByZXZlcnNlLFxyXG4gICAgICAgICAgICAgICAgYmFja0Rlc3RpbmF0aW9uOiBuYXZPcHRpb25zLmJhY2tEZXN0aW5hdGlvbixcclxuICAgICAgICAgICAgICAgIG5vSGFzaENoYW5nZTogbmF2T3B0aW9ucy5ub0hhc2hDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICBpbnRlbnQ6IG5hdk9wdGlvbnMuaW50ZW50IHx8IHt9LFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpdmVOYXZpZ2F0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaW5OYXZpZ2F0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlKClcclxuICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmVSb3V0ZUNoYW5nZSgpIOOBjOWkseaVl+OBl+OBn+WgtOWQiOOAgeiHtOWRveeahOOBquS4jeWFt+WQiOOBqOOBquOCi+OBn+OCgeOAgWVycm9yIOiomOmMsuOBruOBv+OBq+OBl+OBpuWFiOOBq+mAsuOCgOOAglxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJiZWZvcmUgcm91dGUgY2hhbmdlIGNhbGwsIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5pc1JvdXRpbmcoKSAmJiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5ub0hhc2hDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdk9wdGlvbnMuc3ViRmxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuYXZPcHRpb25zLnN1YkZsb3cub3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJlZ2luXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydFN1YkZsb3cobmF2T3B0aW9ucy5zdWJGbG93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZmluaXNoU3ViRmxvdyhuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBuYXZpZ2F0aW9uIOOBr+WRvOOBsOOBquOBhFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcInVua25vd24gc3ViRmxvdy5vcGVyYXRpb24uIG9wZXJhdGlvbjogXCIgKyBuYXZPcHRpb25zLnN1YkZsb3cub3BlcmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfcm91dGVyLm5hdmlnYXRlKHVybCwgbmF2T3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdk9wdGlvbnMuc3ViRmxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwic3ViRmxvdyBvbmx5IHN1cHBvcnRlZCB1bmRlciByb3V0aW5nIGFuZCBoYXNoIGNoYW5nZSBjb25kaXRpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGV4dDogUm91dGVDb250ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ubm9IYXNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9IYXNoQ2hhbmdlIOOBjOaMh+WumuOBleOCjOOBn+OBqOOBjVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGNvbnRleHQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgYzmnInlirnjgafjgarjgYTjgajjgY1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmRXaGVyZSg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgeyByb3V0ZTogZnJhZ21lbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQucGFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLmNoYW5nZVBhZ2UodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBOYXZpZ2F0ZSBmcm9tIFRvcCBQYWdlLlxyXG4gICAgICAgICAqIElmIFN1YkZsb3cgc2V0IHVwLCB0aGUgcGFyYW0gaXMgY2xlYXJlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0byAgICAgICAgIHtTdHJpbmd8UGFnZVN0YWNrfFBhZ2VTdGFja1tdfSBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTCBvciBQYWdlU3RhY2tPcHRpb25zIG9iamVjdCBvciBhcnJheS5cclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICAgICAgICAgICAgICAgW2luXSBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZyAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgICAgICAgICAgICAgIFtpbl0gc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWwgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgICAgICBbaW5dIHNldCBhIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKS4gKG9wdGlvbmFsKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg4jjg4Pjg5fjg5rjg7zjgrjjgYvjgonjga7nlLvpnaLpgbfnp7tcclxuICAgICAgICAgKiBTdWJGbG93IOOBjOaMh+WumuOBleOCjOOBpuOBhOOBn+WgtOWQiOOBr+OCr+ODquOCouOBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRvICAgICAgICAge1N0cmluZ3xQYWdlU3RhY2t8UGFnZVN0YWNrW119IFtpbl0g6YG356e7IFVSTCAvIFBhZ2VTdGFja09wdGlvbnMg44Kq44OW44K444Kn44Kv44OIL+mFjeWIl1xyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICB7TmF2aWdhdGVPcHRpb25zfSAgICAgICAgICAgICAgW2luXSBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7MgKOS7u+aEjylcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIG5hdmlnYXRlRnJvbVRvcChcclxuICAgICAgICAgICAgdG8/OiBzdHJpbmcgfCBQYWdlU3RhY2sgfCBQYWdlU3RhY2tbXSxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbj86IHN0cmluZyxcclxuICAgICAgICAgICAgcmV2ZXJzZT86IGJvb2xlYW4sXHJcbiAgICAgICAgICAgIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnNcclxuICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IHN0YWNrID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRQYWdlID0gc3RhY2tbUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleF07XHJcbiAgICAgICAgICAgIGxldCBfdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgY3VycmVudFBhZ2UudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgbGV0IF9yZXZlcnNlID0gKG51bGwgIT0gcmV2ZXJzZSkgPyByZXZlcnNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IGRlc3RTdGFja3M6IFBhZ2VTdGFja1tdID0gKCgpOiBQYWdlU3RhY2tbXSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0bykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGFnZVN0YWNrW10+W3sgcm91dGU6IHRvIH1dO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0byBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFBhZ2VTdGFja1tdPlt0b107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmjIflrprjgZXjgozjgZ8gU3ViRmxvdyDjgpLliYrpmaRcclxuICAgICAgICAgICAgc3RhY2suZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K444GrIFN1YkZsb3cg44OR44Op44Oh44O844K/44KS5oyH5a6aXHJcbiAgICAgICAgICAgIHN0YWNrWzBdW1JvdXRlci5TVUJGTE9XX1BBUkFNXSA9IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJiZWdpblwiLFxyXG4gICAgICAgICAgICAgICAgZGVzdEJhc2U6IHN0YWNrWzBdLmhhc2gsICAgIC8vIOWIneacn+ODmuODvOOCuOOBruODj+ODg+OCt+ODpVxyXG4gICAgICAgICAgICAgICAgZGVzdFN0YWNrczogZGVzdFN0YWNrcyxcclxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxEaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCBfdHJhbnNpdGlvbiwgX3JldmVyc2UsICQuZXh0ZW5kKHt9LCBvcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImVuZFwiLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmFjayB0byBwcmV2aW91cyBoaXN0b3J5LlxyXG4gICAgICAgICAqIEl0J3Mgc2FtZSBhcyBicm93c2VyIGJhY2sgYnV0dG9uJ3MgYmVoYXZpb3VyLlxyXG4gICAgICAgICAqIFtOb3RlXSBJZiBzZXQgdGhlIGpRTTogZGF0YS1yZWw9XCJiYWNrXCIsIHdvcmsgYXMgd2VsbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5bGl5q2044KS5oi744KLXHJcbiAgICAgICAgICog44OW44Op44Km44K244Gu5oi744KL44Oc44K/44Oz44Go5ZCM44GY5oyZ5YuV44CCXHJcbiAgICAgICAgICogalFNOiBkYXRhLXJlbD1cImJhY2tcIiDjgpLmjIflrprjgZfjgabjgoLlkIzjgZjjgafjgYLjgovjgZPjgajjgavms6jmhI/jgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUm91dGVyLmJhY2soKSBjYWxsZWQgaW4gbmF2aWdhdGlvbiBwcm9jLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuaXNUb3BQYWdlKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRvcCDjg5rjg7zjgrjjgavmjIflrprjgZXjgozjgabjgYTjgozjgbDntYLkuoZcclxuICAgICAgICAgICAgICAgIGxldCBhcHAgPSAoPGFueT5uYXZpZ2F0b3IpLmFwcCB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmICghIWFwcC5leGl0QXBwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmV4aXRBcHAoKTsgICAgLy8gbm90ZTogbmV2ZXIgZXhpdCBvbiBpT1NcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZTogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpVxyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmJhY2soKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZSBJbnRlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJbnRlbnQg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwdXNoSW50ZW50KGludGVudDogSW50ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RJbnRlbnQgPSAkLmV4dGVuZCh0cnVlLCBSb3V0ZXIuc19sYXN0SW50ZW50LCBpbnRlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBJbnRlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJbnRlbnQg44KS5Y+W5b6XXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwb3BJbnRlbnQoKTogSW50ZW50IHtcclxuICAgICAgICAgICAgbGV0IGludGVudCA9IFJvdXRlci5zX2xhc3RJbnRlbnQ7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RJbnRlbnQgPSB7fTtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBHZXQgcXVlcnkgcGFyYW1ldGVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogcXVlcnkgcGFyYW1ldGVyIOOBq+aMh+WumuOBleOCjOOBn+W8leaVsOOBruWPluW+l1xyXG4gICAgICAgICAqIOODmuODvOOCuOmBt+enu+S4reOBq+OBruOBv+OCouOCr+OCu+OCueWPr+iDvSAocGFnZWJlZm9yZWNyZWF0ZSDvvZ4gcGFnZWNoYW5nZSlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldFF1ZXJ5UGFyYW1ldGVycygpOiBhbnkge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQgJiYgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zW1wicXVlcnlQYXJhbXNcIl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEJlZ2luIHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgW2luXSBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZyAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHN1YiBmbG93IOODiOODqeODs+OCtuOCr+OCt+ODp+ODs+OBrumWi+Wniy5cclxuICAgICAgICAgKiBuYXZpZ2F0ZSgpIOOBriDns5booaPmp4vmlodcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwgICAgICAgIHtTdHJpbmd9ICAgICAgICAgIFtpbl0g6YG356e7IFVSTCDjgpLmjIflrpogKOebuOWvvuODkeOCuS/ntbblr77jg5Hjgrkv44OV44Op44Kw44Oh44Oz44OIKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkg44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJlZ2luU3ViRmxvdyh1cmw6IHN0cmluZywgb3B0aW9uczogTmF2aWdhdGVPcHRpb25zLCB0cmFuc2l0aW9uPzogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgb3B0OiBOYXZpZ2F0ZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIG9wdC5zdWJGbG93ID0gb3B0LnN1YkZsb3cgfHwgeyBvcGVyYXRpb246IFwiYmVnaW5cIiB9O1xyXG4gICAgICAgICAgICBpZiAoXCJiZWdpblwiICE9PSBvcHQuc3ViRmxvdy5vcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJsb2dpYyBlcnJvci4gaW52YWxpZCBzdWJmbG93IG9wZXJhdGlvbi4gW29wZXJhdGlvbjogXCIgKyBvcHQuc3ViRmxvdy5vcGVyYXRpb24gKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKHVybCwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwgb3B0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDb21taXQgc3ViIGZsb3cgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgW2luXSBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZyAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59IFtpbl0gc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWwgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBzdWIgZmxvdyDjg4jjg6njg7Pjgrbjgq/jgrfjg6fjg7Pjga7ntYLkuoYuXHJcbiAgICAgICAgICogbmF2aWdhdGUoKSDjga4g57OW6KGj5qeL5paHXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59IFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZGlyZWN0aW9uIOOCkuaMh+WumiB0cnVlOnJldmVyc2UvZmFsc2U66YCa5bi4ICjku7vmhI8pXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjb21taXRTdWJGbG93KHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCB0cmFuc2l0aW9uLCByZXZlcnNlLCB7XHJcbiAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImVuZFwiLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDYW5jZWwgc3ViIGZsb3cgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgW2luXSBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZyAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59IFtpbl0gc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlW2RlZmF1bHRdIC8gZmFsc2U6bm9tYWwgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBzdWIgZmxvdyDjg4jjg6njg7Pjgrbjgq/jgrfjg6fjg7Pjga7jgq3jg6Pjg7Pjgrvjg6suXHJcbiAgICAgICAgICogbmF2aWdhdGUoKSDjga4g57OW6KGj5qeL5paHXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59IFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZGlyZWN0aW9uIOOCkuaMh+WumiB0cnVlOnJldmVyc2Vb5pei5a6aXS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNhbmNlbFN1YkZsb3codHJhbnNpdGlvbj86IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8g6LW354K544Gu44Oa44O844K444Gr5oi744KLXHJcbiAgICAgICAgICAgIGxldCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgYmFzZUluZm8uc3ViRmxvd1BhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCB0cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgKG51bGwgIT0gcmV2ZXJzZSkgPyByZXZlcnNlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdFN0YWNrczogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBpbiBzdWIgZmxvdy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg5YaF44Gn44GC44KL44GL5Yik5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc0luU3ViRmxvdygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IHN0YWNrID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgbGV0IGhhcyA9IF8uc29tZShzdGFjaywgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gISF2YWx1ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGZyb20gaGFzaCBjaGFuZ2VkIG5hdmlnYXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEhhc2gg5aSJ5pu044Gr44KI44Gj44GmIE5hdmlnYXRlIOOBjOi1t+OBk+OBo+OBn+OBi+WIpOWumlxyXG4gICAgICAgICAqIFwicGFnZWNoYW5nZVwiIOOBjOeZuueUn+OBmeOCi+OBvuOBp+OBq+WIpOWumuWPr+iDvVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbUhhc2hDaGFuZ2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICAvLyBwb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2Ug44Gv5ZCr44KB44Gq44GEXHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiAmJiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIHBhZ2Ugc3RhY2suXHJcbiAgICAgICAgICogU2V0IHJlZ2lzdGVyZWQgcm91dGUocykgdG8gYWRkIHRvIHBhZ2Ugc3RhY2sgb24gdGhlIGJhc2lzIG9mIHRoZSBwcmVzZW50IHN0YWNrIHBvc2l0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2VTdGFjayAgICB7UGFnZVN0YWNrfFBhZ2VTdGFja1tdfSAgIFtpbl0gUGFnZVN0YWNrT3B0aW9ucyBvYmplY3Qgb3IgYXJyYXkuXHJcbiAgICAgICAgICogQHBhcmFtIHdpdGhOYXZpZ2F0ZSB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgIFtpbl0gdHJ1ZTogd2l0aCBuYXZpZ2F0ZSBmaW5hbCBzdGFjay4gKGRlZmF1bHQpIC8gZmFsc2U6IG5vdCBuYXZpZ2F0ZS5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgW2luXSBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IHN1Y2NlZWRlZCAvIGZhbHNlOiBmYWlsZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K444K544K/44OD44Kv55m76YyyXHJcbiAgICAgICAgICog55m76Yyy5riI44G/44GuIHJvdXRlIOOCkuaMh+WumuOBl+OBpuOAgeePvuWcqOOBruS9jee9ruOCkuWfuueCueOBq+ODmuODvOOCuOOCueOCv+ODg+OCr+OBq+eZu+mMslxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2VTdGFjayAgICB7UGFnZVN0YWNrfFBhZ2VTdGFja1tdfSAgIFtpbl0gUGFnZVN0YWNrT3B0aW9ucyDjgqrjg5bjgrjjgqfjgq/jg4gv6YWN5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHdpdGhOYXZpZ2F0ZSB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgIFtpbl0gdHJ1ZTog5pyA5b6M44Gu44K544K/44OD44Kv44Gr5a++44GX44Gm44Oa44O844K46YG356e744GZ44KLLiAoZGVmYXVsdCkgLyBmYWxzZTog44Oa44O844K46YG356e744GX44Gq44GELlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgICAge05hdmlnYXRlT3B0aW9uc30gICAgICAgICBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogUGFnZVN0YWNrLCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogUGFnZVN0YWNrW10sIHdpdGhOYXZpZ2F0ZT86IGJvb2xlYW4sIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnMpOiBib29sZWFuO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJQYWdlU3RhY2socGFnZVN0YWNrOiBhbnksIHdpdGhOYXZpZ2F0ZT86IGJvb2xlYW4sIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnMpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IG5ld1N0YWNrcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBwYWdlU3RhY2sgPSAocGFnZVN0YWNrIGluc3RhbmNlb2YgQXJyYXkpID8gcGFnZVN0YWNrIDogW3BhZ2VTdGFja107XHJcbiAgICAgICAgICAgIHdpdGhOYXZpZ2F0ZSA9IChudWxsID09IHdpdGhOYXZpZ2F0ZSkgPyBmYWxzZSA6IHdpdGhOYXZpZ2F0ZTtcclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFrZVN0YWNrID0gKGluZm86IFBhZ2VTdGFjayk6IGFueSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVybDogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFjazogT2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KGluZm8ucm91dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjb250ZXh0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJyb3V0ZSBpcyBub3QgcmVnaXN0ZXJlZC4gcm91dGU6IFwiICsgaW5mby5yb3V0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IFJvdXRlci5wYXRoVG9KcW1EYXRhVXJsKGNvbnRleHQucGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdGFjayA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGU6IGluZm8ucm91dGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VVcmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGluZm8udGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGluZm8udHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2s7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gcGFnZVN0YWNrLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IG1ha2VTdGFjayhwYWdlU3RhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lgZzmraJcclxuICAgICAgICAgICAgICAgIGxldCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGxldCBzaWxlbnRMZW5ndGggPSBuZXdTdGFja3MubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIGxldCBmaW5hbEluZGV4ID0gbmV3U3RhY2tzLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHNpbGVudExlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBuZXdTdGFja3NbaV0ucm91dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5wdXNoKG5ld1N0YWNrc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2subGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBmaW5hbCBzdGFjayB3aXRoIG5hdmlnYXRlXHJcbiAgICAgICAgICAgICAgICBpZiAod2l0aE5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmV2ZXJzZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc3RhcnQoeyBzaWxlbnQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG5ld1N0YWNrc1tmaW5hbEluZGV4XS5yb3V0ZSwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBuZXdTdGFja3NbZmluYWxJbmRleF0ucm91dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5wdXNoKG5ld1N0YWNrc1tmaW5hbEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2subGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSb3V0ZXIg44Gu5YaN6ZaLXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBqUU0ncyBoaXN0b3J5IG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0g44GuIEhpc3Rvcnkg44Kq44OW44K444Kn44Kv44OI44Gu5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldEpxbUhpc3RvcnkoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByaXZhdGUgc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIE92ZXJyaWRlOiBCYWNrYm9uZS5IaXN0b3J5LmxvYWRVcmwoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEJhY2tib25lLkhpc3RvcnkubG9hZFVybCgpIOOBruOCquODvOODkOODvOODqeOCpOODiVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjdXN0b21Mb2FkVXJsKGZyYWdtZW50OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IGhhbmRsZWQgPSBSb3V0ZXIuc19sb2FkVXJsKGZyYWdtZW50KTtcclxuICAgICAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIub25Sb3V0ZUZhaWxlZChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogT3ZlcnJpZGU6ICQubW9iaWxlLmJhY2soKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIGZhaWwgc2FmZSBwcm9jZXNzaW5nLlxyXG4gICAgICAgICAqICBJZiB1c2luZyBCYWNrYm9uZSdzIFJvdXRlcixcclxuICAgICAgICAgKiAgdGhpcyBjbGFzcyB1bnVzZXMgaGlzdG9yeSBvYmplY3Qgb2YgalF1ZXJ5IE1vYmlsZSAxLjQsXHJcbiAgICAgICAgICogIGFuZCBzdGFuZGFyZGl6ZSBhcyBicm93c2VyIGJhY2sgYnV0dG9uJ3MgYmVoYXZpb3VyLiAoalFNIDEuMyBjb21wYXJhYmxlKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogJC5tb2JpbGUuYmFjaygpIOOBruOCquODvOODkOODvOODqeOCpOODiVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogW1RCRF0gZmFpbCBzYWZlIOWHpueQhlxyXG4gICAgICAgICAqICBCYWNrYm9uZSDjga4gUm91dGVyIOOCkuS9v+eUqOOBl+OBpuOBhOOCi+WgtOWQiOOAgVxyXG4gICAgICAgICAqICBqUXVlcnkgTW9iaWxlIDEuNCDku6XpmY3jga7lhoXpg6jjga4gSGlzdG9yeSDnrqHnkIbjga/kvb/nlKjjgZvjgZrjgatcclxuICAgICAgICAgKiAgMS4zIOebuOW9k+OBruODluODqeOCpuOCtuOBrlvmiLvjgotd44Gu5oyZ5YuV44Gr57Wx5LiA44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUpxbUJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuaXNSb3V0aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkuYmFjaygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8galFNIOaXouWumuWHpueQhlxyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmluZCBldmVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYmluZEV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgJChkb2N1bWVudClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJwYWdlY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfaW5pdE9wdGlvbnMuYW5jaG9yVmNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuY2hvciB2Y2xpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJ2Y2xpY2tcIiwgXCJbaHJlZl1cIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLm9uQW5jaG9yVmNsaWNrZWQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZWJlZm9yZXNob3dcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFwiZGF0YS1iYWNrLWRzdFwiIOOCkiBwYWdlIOOBq+ioreWumlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uYmFja0Rlc3RpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmU6IE9iamVjdCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVtSb3V0ZXIuQkFDS19ERVNUSU5BVElPTl9VUkxdID0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5iYWNrRGVzdGluYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2VzaG93XCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlOiBPYmplY3QgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlY2hhbmdlIHBhZ2Vjb250YWluZXJsb2FkZmFpbGVkXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgLy8gYmFjayBrZXkgYXNzaWduXHJcbiAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihSb3V0ZXIuYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcmUgdGhlIFJvb3RDb250ZXh0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAgICB7U3RyaW5nfSAgICAgICBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7Um91dGVDb250ZXh0fSBbaW5dIGNvbnRleHQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogYWxyZWFkeSByZWdpc3RlcmVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFJvb3RDb250ZXh0IOOBruagvOe0jVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAgICB7U3RyaW5nfSAgICAgICBbaW5dIHJvdXRlIOWQjVxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IHtSb3V0ZUNvbnRleHR9IFtpbl0gY29udGV4dCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOeZu+mMsuaIkOWKnyAvIGZhbHNlOiDjgZnjgafjgavnmbvpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBwdXNoQ29udGV4dChuYW1lOiBzdHJpbmcsIGNvbnRleHQ6IFJvdXRlQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibG9naWMgZXJyb3IuIHJvdXRlIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4gbmFtZTogXCIgKyBuYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV0gPSBjb250ZXh0O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBpZiAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpIGlzIGNhbGxlZCBvciBub3QsIGFuZCBjYWxsIGl0IGlmIG5lZWRlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHVybCB7U3RyaW5nfSAgW2luXSBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpIOOBjOWRvOOBsOOCjOOBpuOBhOOCi+OBi+eiuuiqjeOBl+OAgeW/heimgeOBquOCieWIneacn+WMluOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9IFtpbl0g6YG356e7IFVSTCDjgpLmjIflrpogKOebuOWvvuODkeOCuS/ntbblr77jg5Hjgrkv44OV44Op44Kw44Oh44Oz44OIKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGluaXRGaXJzdFBhZ2VJZk5lZWRlZCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoISQubW9iaWxlLmF1dG9Jbml0aWFsaXplUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwicGFnZWJlZm9yZWNoYW5nZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnRvUGFnZSA9IEZyYW1ld29yay50b1VybCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmb3IgY3VycmVudCBwYWdlIGlzIHRvcC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiB0b3AgcGFnZSAvIGZhbHNlOiBub3QgdG9wIHBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog54++5Zyo44Gu44Oa44O844K444GMIHRvcCDjgavmjIflrprjgZXjgozjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiB0b3Ag5oyH5a6aIC8gZmFsc2U6IHRvcCDjgafjga/jgarjgYRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc1RvcFBhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoJC5tb2JpbGUucGF0aC5wYXJzZVVybChsb2NhdGlvbi5ocmVmKS5oYXNoKTtcclxuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGNvbnRleHQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIChudWxsID09IGNvbnRleHQpID8gZmFsc2UgOiBjb250ZXh0LnRvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDYWxsZWQgd2hlbiBhbmNob3IgcmVjZWl2ZWQgXCJ2Y2xpY2tcIiBldmVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiBuZWVkIGRlZmF1bHQgcHJvY2Vzc2luZyAvIGZhbHNlOiBuZWVkIGN1c3RvbSBwcm9jZXNzaW5nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGFuY2hvciDjgYwgdmNsaWNrIOOBleOCjOOBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IGRlZmF1bHQg5Yem55CGIC8gZmFsc2U6IOOCq+OCueOCv+ODoOWHpueQhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIG9uQW5jaG9yVmNsaWNrZWQoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuaXNKdXN0QmVmb3JlVmNsaWNrZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLmZvbGxvd0FuY2hvcihldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQW5jaG9yIHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhbmNob3Ig5Yem55CGXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZvbGxvd0FuY2hvcihldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0ICR0YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICAgICBsZXQgdXJsOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJocmVmXCIpIHx8ICR0YXJnZXQuYXR0cihcImhyZWZcIik7XHJcbiAgICAgICAgICAgIGxldCB0cmFuc2l0aW9uOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJ0cmFuc2l0aW9uXCIpO1xyXG4gICAgICAgICAgICBsZXQgZGlyZWN0aW9uOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIGxldCBiYWNrRHN0OiBhbnkgPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfQkFDS19ERVNUSU5BVElPTik7XHJcbiAgICAgICAgICAgIGxldCBub0hhc2hDaGFuZ2U6IGJvb2xlYW4gPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fSEFTSF9DSEFOR0UpID9cclxuICAgICAgICAgICAgICAgICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9OT19IQVNIX0NIQU5HRSkgPT09IFwidHJ1ZVwiIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBub0hyZWZIYW5kbGU6IGJvb2xlYW4gPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fVkNMSUNLX0hBTkRMRSkgP1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX1ZDTElDS19IQU5ETEUpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogLSDmmI7npLrnmoTjgavjg4/jg7Pjg4njg6vjgZfjgarjgYTmjIflrprjgYzjgYLjgovloLTlkIhcclxuICAgICAgICAgICAgICogLSBqUU0g44Gu44OV44Op44Kw44Oh44Oz44OI44Gu5aC05ZCIXHJcbiAgICAgICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG5vSHJlZkhhbmRsZSB8fCBSb3V0ZXIubmVlZERlZmF1bHRPcGVyYXRpb24odXJsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGN1c3RvbSBiZWhhdmllclxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc0JhY2tCdXR0b25DbGlja2VkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sICEhZGlyZWN0aW9uLCB7IG5vSGFzaENoYW5nZTogbm9IYXNoQ2hhbmdlLCBiYWNrRGVzdGluYXRpb246IGJhY2tEc3QgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBkZWZhdWx0IHByb2Nlc3NpbmcgbmVlZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCBzdHJpbmdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgbm90XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBm+OCi+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOaXouWumuOBruWHpueQhuOBjOW/heimgSAvIGZhbHNlOiDkuI3opoFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBuZWVkRGVmYXVsdE9wZXJhdGlvbih1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoIXVybCB8fCAoXCIjXCIgPT09IHVybCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiI1wiID09PSB1cmxbMF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhUm91dGVyLmNhblJlc29sdmVSb3V0ZSh1cmwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgc3RhdHVzIG9mIEJhY2tib25lLlJvdXRlciBpZiB0aGV5IGNhbiByZXNvbHZlIHJvdXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IGNhbiByZXNvbHZlIC8gZmFsc2U6IGNhbiBub3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFja2JvbmUuUm91dGVyIOOBjCByb3V0ZSDjgpLop6Pmsbrlj6/og73jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtICB1cmwge1N0cmluZ30gW2luXSB1cmwg5paH5a2X5YiXXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiDop6Pmsbrlj6/og70gLyBmYWxzZTog6Kej5rG65LiN5Y+vXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY2FuUmVzb2x2ZVJvdXRlKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQodXJsKTtcclxuICAgICAgICAgICAgcmV0dXJuIF8uYW55KEJhY2tib25lLmhpc3RvcnkuaGFuZGxlcnMsIGZ1bmN0aW9uIChoYW5kbGVyOiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIFwidmNsaWNrXCIgZmlyZWQgYXQgdGhlIGxhc3QgbWludXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog55u05YmN44GrIHZjbGljayDjgYzlkbzjgbDjgozjgZ/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaXNKdXN0QmVmb3JlVmNsaWNrZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBpc0JlZm9yZSA9IChEYXRlLm5vdygpIC0gUm91dGVyLnNfbGFzdENsaWNrZWRUaW1lKSA8IFJvdXRlci5ERUxBWV9USU1FICogMjtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdENsaWNrZWRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlzQmVmb3JlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGJhY2sgYnV0dG9uIGNsaWNrZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBCYWNrIEJ1dHRvbiDjgYzjgq/jg6rjg4Pjgq/jgZXjgozjgZ/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaXNCYWNrQnV0dG9uQ2xpY2tlZChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCQoZXZlbnQuY3VycmVudFRhcmdldCkuanFtRGF0YShcInJlbFwiKSA9PT0gXCJiYWNrXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogSXQgY2FsbGVkIG9uIHN1Y2NlZWQgcm91dGluZyB0cmlnZ2VyZWQgYnkgY2hhbmdpbmcgaGFzaC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIG5hbWUge1N0cmluZ30gW2luXSBuYW1lIG9mIHJvdXRlXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSBhcnJheSBvZiBwYXJhbXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg4/jg4Pjgrfjg6XlgKTjgYzlpInmm7TjgZXjgozjgIHjg6vjg7zjg4bjgqPjg7PjgrDjgYzmiJDlip/jgZfjgZ/jgajjgY3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIG5hbWUge1N0cmluZ30gW2luXSByb3V0ZSDlkI3jgIJwYWdlIOOBruWApOOBjOa4oeOCi+OAglxyXG4gICAgICAgICAqIEBwYXJhbSBhcmdzIHtBcnJheX0gIFtpbl0g44OR44Op44Oh44O844K/6YWN5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25Sb3V0ZVN1Y2NlZWRlZChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5Sb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmICghIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpbnRlbnQgPSB7IHBhcmFtczogeyBxdWVyeVBhcmFtczogYXJncyB9IH07XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVudC5wYXJhbXMgPSAkLmV4dGVuZCh7fSwgaW50ZW50LnBhcmFtcywgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zIHx8IHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50ID0gJC5leHRlbmQoe30sIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50LCBpbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGhhbmRsZWQgPSBjb250ZXh0LmNhbGxiYWNrKGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmNoYW5nZVBhZ2UoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEl0IGNhbGxlZCBvbiBmYWlsZWQgcm91dGluZyB0cmlnZ2VyZWQgYnkgY2hhbmdpbmcgaGFzaC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIG5hbWUge1N0cmluZ30gW2luXSBuYW1lIG9mIHJvdXRlXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSBhcnJheSBvZiBwYXJhbXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg4/jg4Pjgrfjg6XlgKTjgYzlpInmm7TjgZXjgozjgIHjg6vjg7zjg4bjgqPjg7PjgrDjgYzlpLHmlZfjgZfjgZ/jgajjgY3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIG5hbWUge1N0cmluZ30gW2luXSByb3V0ZSDlkI3jgIJwYWdlIOOBruWApOOBjOa4oeOCi+OAglxyXG4gICAgICAgICAqIEBwYXJhbSBhcmdzIHtBcnJheX0gIFtpbl0g44OR44Op44Oh44O844K/6YWN5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25Sb3V0ZUZhaWxlZChmcmFnbWVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByb3V0ZSDjgYzop6PmsbrjgafjgY3jgarjgYvjgaPjgZ/jgoLjga7jgpLnrqHnkIbkuIvjgatcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucG9zaXRpdmVOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0PlJvdXRlci5zX3Jvb3RDb250ZXh0c1tmcmFnbWVudF07XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGU6IGZyYWdtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleHA6ICg8YW55PlJvdXRlci5zX3JvdXRlcikuX3JvdXRlVG9SZWdFeHAoZnJhZ21lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIucHVzaENvbnRleHQoZnJhZ21lbnQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBmcmFnbWVudCDjgYvjgokgcGF0aCDjgpLop6PmsbpcclxuICAgICAgICAgICAgbGV0IHBhdGggPSBmcmFnbWVudDtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XSkge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJvdXRlci5zX3Jvb3RDb250ZXh0c1tmcmFnbWVudF0ucGFnZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLmNoYW5nZVBhZ2UocGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBqdXN0IGNhbGxzIGpRdWVyeSBNb2JpbGUncyBuYXZpZ2F0aW9uIG1ldGhvZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSB0byBwYWdlIHBhdGhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalF1ZXJ5IE1vYmlsZSDjgavjgojjgovjg5rjg7zjgrjpgbfnp7vmjIflrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSDpgbfnp7vlhYjjg5HjgrnjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjaGFuZ2VQYWdlKHBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2U6ICgpID0+IElQcm9taXNlQmFzZTxhbnk+O1xyXG5cclxuICAgICAgICAgICAgLy8gZGF0YS1yZWw9XCJiYWNrXCIsIOODluODqeOCpuOCtuODnOOCv+ODsywgSC9XIEJhY2sgS2V5IOOBjOaKvOS4i+OBleOCjOOBn+OBqOOBjVxyXG4gICAgICAgICAgICBpZiAoIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucG9zaXRpdmVOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZGVjaWRlRGlyZWN0aW9uKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaMh+WumuWFiOOBq+aIu+OCi+OBi+WIpOWumlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGRpdGlvbmFsID0gUm91dGVyLmRldGVjdEFkZGl0aW9uYWxCYWNrRGlzdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCA8IGFkZGl0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMuWbnuebruS7pemZjeOBriBoYXNoIGNoYW5nZSDjgavjga/lj43lv5zjgZXjgZvjgarjgYQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggLT0gYWRkaXRpb25hbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtYWRkaXRpb25hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6YG356e75YWI44GMIHN1YmZsb3cg6ZaL5aeL54K544Gn44GC44KL5aC05ZCI44CBcGFyYW0g44KS5YmK6ZmkXHJcbiAgICAgICAgICAgICAgICBsZXQgc3ViRmxvd0luZm8gPSBSb3V0ZXIuZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViRmxvd0luZm8uaXNDdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN1YkZsb3dJbmZvLnN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOiDveWLleeahOmBt+enu+OBruWgtOWQiCBwcmV2aW91c0luZGV4IOOCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lLiDjgZnjgafjgavjgrPjg7zjg6vjgZXjgozjgabjgYTjgovloLTlkIjjga/ml6Llrprjga7kvZXjgoLjgZfjgarjgYTjgrPjg7zjg6vjg5Djg4Pjgq/jgpLkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlID0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5jYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZSA/IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgOiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci50cmVhdFVybEhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZShGcmFtZXdvcmsudG9VcmwocGF0aCksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRNc2c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uIHx8IFwibm9uZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlOiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21IYXNoQ2hhbmdlOiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VIYXNoOiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5ub0hhc2hDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJiZWZvcmUgcm91dGUgY2hhbmdlIGNhbGwsIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRGVjaWRlIGRpcmVjdGlvbiBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICogSXQncyBhcyBzYW1lIGFzIGpRTSBpbnRlcm5hbCBpbXBsZW1lbnQuIChpbXBlcmZlY3Rpb24pXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0gdG8gcGFnZSBwYXRoXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGRpcmVjdGlvbiDjga7liKTlrppcclxuICAgICAgICAgKiBqUU0g44Gu5YaF6YOo5a6f6KOF44Go562J5L6hICjkuI3lrozlhagpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0g6YG356e75YWI44OR44K544KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGVjaWRlRGlyZWN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKEZyYW1ld29yay50b1VybChwYXRoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbiA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCkudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5kaXJlY3Qoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBwcmVzZW50OiBmdW5jdGlvbiAobmV3UGFnZTogYW55LCBkaXJlY3Rpb246IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiYWNrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmb3J3YXJkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24gPSBuZXdQYWdlLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5rbm93biBkaXJlY3Rpb246IFwiICsgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtaXNzaW5nOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K4IFVSTCDjga/liKTlrprjgafjgY3jgarjgYTjgILmraPluLjns7vjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgwICE9PSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5rbm93biBkaXJlY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmV0dXJuIGFkZGl0aW9uYWwgYmFjayBkaXN0YW5jZSBjb3VudCB3aGVuIGJhY2sgZGVzdGluYXRpb24gc2V0LlxyXG4gICAgICAgICAqIChjb25zdCBmdW5jdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSBjb3VudCBvZiBhZGRpdGlvbmEgYmFjayBkaXN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5oi744KK5YWI44GM5oyH5a6a44GV44KM44Gm44GE44KL44Go44GN44CB6L+95Yqg44GuIEJhY2sg5pWw44KS6L+U44GX44G+44GZ44CCXHJcbiAgICAgICAgICogKOOBk+OBrumWouaVsOOBryBSb3V0ZXIg44Gu54q25oWL44KS5aSJ5pu044GX44G+44Gb44KT44CCKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOi/veWKoOOBpyBCYWNrIOOBq+W/heimgeOBqui3nemboi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCBoaXN0b3J5QWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4OyAgICAvLyBkZWNpZGVEaXJlY3Rpb24oKSDjga4gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5kaXJlY3QoKSDjgavjgojjgaPjgabjgIFoaXN0b3J5IOOBriBhY3RpdmVJbmRleCDjga/jgZnjgafjgavlpInjgo/jgaPjgabjgYTjgotcclxuICAgICAgICAgICAgbGV0IHByZXZpb3VzSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXg7ICAgICAgIC8vIFvmiLvjgotd44GM5oq85LiL44GV44KM44Gf5aC05ZCI44Gr5YCk44GM5YWl44KLXHJcbiAgICAgICAgICAgIGxldCBpLCBiYWNrRHN0LCBkaXN0YW5jZSwgZnJhZ21lbnQsIGNvbnRleHQsIGpxbURhdGFVcmw7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBcIm9wZXJhdGlvblwiLiBb5oi744KLXeOBiuOCiOOBsyBjbGVhckZvcndhcmQoKSDjgZXjgozjgabjgYTjgarjgYTnirbms4HjgpLjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgaWYgKCFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgfHwgbnVsbCA9PSBwcmV2aW91c0luZGV4IHx8ICFzdGFja1twcmV2aW91c0luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFwiYmFja0RzdCBleGlzdHNcIi4gW+aIu+OCiuWFiF3jgYzmjIflrprjgZXjgozjgabjgYTjgovjgYvjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgYmFja0RzdCA9IHN0YWNrW3ByZXZpb3VzSW5kZXhdW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF07XHJcbiAgICAgICAgICAgIGlmICgobnVsbCA9PSBiYWNrRHN0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChiYWNrRHN0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWIneacn+ODmuODvOOCuFxyXG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gZnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoaXN0b3J5QWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvb3RDb250ZXh0IOOBi+OCiSBwYXRoIOOCkumAhuW8leOBjVxyXG4gICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjb250ZXh0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImJhY2sgZGVzdGluYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuIGJhY2stZHN0OiBcIiArIGJhY2tEc3QpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRhdGFVcmwg44KS5YWD44GrIGpRTSBIaXN0b3J5IOOCkuaknOe0olxyXG4gICAgICAgICAgICBqcW1EYXRhVXJsID0gUm91dGVyLnBhdGhUb0pxbURhdGFVcmwoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgZm9yIChpID0gaGlzdG9yeUFjdGl2ZUluZGV4LCBkaXN0YW5jZSA9IDA7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpxbURhdGFVcmwgPT09IHN0YWNrW2ldLnBhZ2VVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImJhY2sgZGVzdGluYXRpb24gZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS4gYmFjay1kc3Q6IFwiICsgYmFja0RzdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0YXJ0IHN1YiBmbG93XHJcbiAgICAgICAgICogQXR0YWNoIFN1YkZsb3dQYXJhbSB0byBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3ViRmxvd1BhcmFtIHtTdWJGbG93UGFyYW19IFtpbl0gU3ViIEZsb3cgcGFyYW1ldGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOOBrumWi+Wni1xyXG4gICAgICAgICAqIFN1YkZsb3dQYXJhbSDjgpIganFtIGhpc3Rvcnkgc3RhY2sg44Gr44Ki44K/44OD44OBXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3ViRmxvd1BhcmFtIHtTdWJGbG93UGFyYW19IFtpbl0gU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc3RhcnRTdWJGbG93KHN1YkZsb3dQYXJhbTogU3ViRmxvd1BhcmFtKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBhY3RpdmUgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gPSA8U3ViRmxvd1BhcmFtRXg+c3ViRmxvd1BhcmFtO1xyXG4gICAgICAgICAgICBpZiAoc3ViRmxvd1BhcmFtLmRlc3RCYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChzdWJGbG93UGFyYW0uZGVzdEJhc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjb250ZXh0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiYmFzZSBkZXN0aW5hdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC4gZGVzdEJhc2U6IFwiICsgc3ViRmxvd1BhcmFtLmRlc3RCYXNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YVVybCDjgpLlhYPjgasgalFNIEhpc3Rvcnkg44KS5qSc57SiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGpxbURhdGFVcmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanFtRGF0YVVybCA9PT0gc3RhY2tbaV0ucGFnZVVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0uYWRkaXRpb25hbERpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5kZXN0QmFzZSA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dID0gcGFyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRW5kIHN1YiBmbG93XHJcbiAgICAgICAgICogbmF2aWdhdGUgYW5kIGRlbGV0ZSBTdWJGbG93UGFyYW0gZnJvbSBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmF2T3B0aW9ucyB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIFN1YiBGbG93IHBhcmFtZXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7ntYLkuoZcclxuICAgICAgICAgKiDpgbfnp7vjgaggU3ViRmxvd1BhcmFtIOOCkiBqcW0gaGlzdG9yeSBzdGFjayDjgYvjgonliYrpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYXZPcHRpb25zIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluaXNoU3ViRmxvdyhvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgbGV0IGJhc2VJbmZvID0gUm91dGVyLmRldGVjdFN1YkZsb3dCYXNlSW5mbygpO1xyXG4gICAgICAgICAgICAvLyBcImVuZFwiIOaZguOBq+abtOaWsOOBleOCjOOBn+OCguOBruOCkuS4iuabuOOBjVxyXG4gICAgICAgICAgICBsZXQgcGFyYW06IFN1YkZsb3dQYXJhbSA9ICQuZXh0ZW5kKHt9LCBiYXNlSW5mby5zdWJGbG93UGFyYW0sIG5hdk9wdGlvbnMuc3ViRmxvdyk7XHJcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IGJhc2VJbmZvLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBiYXNlSW5mby5zdGFjaztcclxuICAgICAgICAgICAgbGV0IHJldHJ5ID0gMDtcclxuICAgICAgICAgICAgY29uc3QgTkFWSUdBVEVfSU5URVJWQUwgPSAxMDA7XHJcbiAgICAgICAgICAgIGNvbnN0IE1BWF9SRVRSWV9DT1VOVCA9IDEwO1xyXG5cclxuICAgICAgICAgICAgLy8gaGFzaCDlpInmm7TjgYzlrozkuobjgZfjgZ/lvozjgasgbmF2aWdhdGUg44KS5a6f6KGMXHJcbiAgICAgICAgICAgIGxldCBfbmF2aWdhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTUFYX1JFVFJZX0NPVU5UIDw9IHJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInJlYWNoZWQgbmF2aWdhdGUgbWF4IHJldHJ5IGNvdW50LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtLmRlc3RCYXNlICE9PSBsb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cnkrKztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9uYXZpZ2F0ZSwgTkFWSUdBVEVfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjayhwYXJhbS5kZXN0U3RhY2tzLCB0cnVlLCBuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uZGVzdFN0YWNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaU9TIOeSsOWig+OBq+OBiuOBhOOBpiBpbmRleC5odG1sIOOCiOOCiiBoaXN0b3J5LmdvKDApIOOBjOeZuueUn+OBmeOCi+OBqOODquODreODvOODieOBjOeZuueUn+OBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICAvLyDjgZ3jga7lvoznlLvpnaLpgbfnp7vjgpLmjqfjgYjjgovjgZ/jgoEsIOWxpeattOOCkuaIu+OCi+W/heimgeOBjOOBguOCi+OBqOOBjeOBq+OBruOBv+mZkOWumuOBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmF2T3B0aW9ucy5zdWJGbG93OyAgICAvLyBzdWJGbG93IOODl+ODreODkeODhuOCo+OBruegtOajhFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX25hdmlnYXRlLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwic3ViRmxvdyBiZWdpbiBzdGF0dXMgZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS5cIik7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXR1cm4gZGVzdGluYXRpb24gU3ViIEZsb3cgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgICogKGNvbnN0IGZ1bmN0aW9uKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHN1YiBmbG93IGluZm8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOaDheWgseOCkui/lOWNtFxyXG4gICAgICAgICAqICjjgZPjga7plqLmlbDjga8gUm91dGVyIOOBrueKtuaFi+OCkuWkieabtOOBl+OBvuOBm+OCk+OAgilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBTdWIgRmxvdyDmg4XloLEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGxldCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCBoaXN0b3J5QWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyLCBkaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgcGFyYW06IFN1YkZsb3dQYXJhbUV4ID0gPFN1YkZsb3dQYXJhbUV4Pnt9O1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0OiBPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSBoaXN0b3J5QWN0aXZlSW5kZXgsIGRpc3RhbmNlID0gMDsgMCA8PSBpOyBpLS0gLCBkaXN0YW5jZSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2tbaV1bUm91dGVyLlNVQkZMT1dfUEFSQU1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gc3RhY2tbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW0gPSA8U3ViRmxvd1BhcmFtRXg+c3RhY2tbaV1bUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGFjazogdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgc3ViRmxvd1BhcmFtOiBwYXJhbSxcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZSArIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIGlzQ3VycmVudDogKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmIDAgPT09IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSgpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENvbnZlcnQgcGF0aCB0byBqUU0gZGF0YVVybC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBqUU0gZGF0YSB1cmwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODkeOCueOCkiBqUU0gZGF0YVVybCDjgavlpInmj5tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBqUU0gZGF0YSB1cmwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgcGF0aFRvSnFtRGF0YVVybChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gRnJhbWV3b3JrLnRvVXJsKHBhdGgpO1xyXG4gICAgICAgICAgICBsZXQgZGF0YVVybCA9ICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBVcGRhdGUgalFNIHVybEhpc3RvcnkgYnkgd2luZG93Lmhpc3Rvcnkgb2JqZWN0LlxyXG4gICAgICAgICAqIFRvIGJlIG5hdHVyYWwgYnJvd3NpbmcgaGlzdG9yeSBiZWhhdmlvciwgYXBwbGljYXRpb24gbmVlZHMgdG8gdXBkYXRlIGpRTSB1cmxIaXN0b3J5XHJcbiAgICAgICAgICogd2hlbiBjbGlja2luZyBiYWNrIG9yIG5leHQgYnV0dG9uIG9mIGJyb3dzZXIuIChpbXBlcmZlY3Rpb24gZm9yIGRlY2lkZURpcmVjdGlvbigpKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44OW44Op44Km44K244Gu5bGl5q2044Gr5Z+644Gl44GNIGpRTSB1cmxIaXN0b3J5IOOCkuabtOaWsFxyXG4gICAgICAgICAqIFvmiLvjgotdL1vpgLLjgoBd44GM5oq85LiL44GV44KM44Gf5b6M44CB44Oa44O844K46YG356e744GV44KM44KL44Go44GN44CBalFNIHVybEhpc3Rvcnkg44KS5pu05paw44GZ44KL44CCKGRlY2lkZURpcmVjdGlvbigpIOOBq+OCiOOCiuS4jeWujOWFqClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdHJlYXRVcmxIaXN0b3J5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlIHx8IGhpc3RvcnkubGVuZ3RoIDwgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuY2xlYXJGb3J3YXJkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL1JvdXRlci50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9AdHlwZXMvanF1ZXJ5Lm1vYmlsZS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlBhdGNoLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIk9yaWVudGF0aW9uLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlJvdXRlci50c1wiIC8+XHJcblxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggZm9yaW4gbm8tYml0d2lzZSAqL1xyXG5cclxubmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIFRoZSBmdW5jdGlvbiByZXR1cm5lZCBQcm9taXNlIHdhaXRzIHVudGlsIFBob25lR2FwIGlzIHJlYWR5LlxyXG4gICAgICogW05vdGVdIGVtdWxhdGUgd2hlbiBQQyBlbnZpcm9tZW50LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBQaG9uZUdhcCDjgYzmnInlirnjgavjgarjgovjgb7jgaflvoXmqZ9cclxuICAgICAqIFBDIOeSsOWig+OBp+OBr+OCqOODn+ODpeODrOODvOODiOOBleOCjOOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckRldmljZVJlYWR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIUNEUC5GcmFtZXdvcmsuUGxhdGZvcm0uTW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZ2xvYmFsLmNvcmRvdmEgfHwgbnVsbCA9PSBnbG9iYWwuY29yZG92YS5leGVjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiZGV2aWNlcmVhZHlcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyOiAoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBTZXR1cCBIL1cgQmFjayBrZXkgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyIOaMh+Wumi5cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSDku6XliY3jga4gaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldEJhY2tCdXR0b25IYW5kbGVyKGhhbmRsZXI6IChldmVudD86IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkKTogKGV2ZW50PzogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG9sZEhhbmRsZXIgPSBfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyO1xyXG4gICAgICAgIF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIgPSBoYW5kbGVyO1xyXG4gICAgICAgIHJldHVybiBvbGRIYW5kbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJhY2sga2V5IGhhbmRsZXIgaW1wbGVtZW50LlxyXG4gICAgKCgpID0+IHtcclxuICAgICAgICB3YWl0Rm9yRGV2aWNlUmVhZHkoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcImJhY2tidXR0b25cIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pKCk7XHJcblxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgRnJhbWV3b3JrIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGludGVyZmFjZSBGcmFtZXdvcmtPcHRpb25zXHJcbiAgICAgICAgICogQGJyaWVmIEZyYW1ld29yayDjgavoqK3lrprlj6/og73jgarjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEZyYW1ld29ya09wdGlvbnMge1xyXG4gICAgICAgICAgICBqcXVlcnk/OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgICAgICBqcXVlcnltb2JpbGU/OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgICAgICBpMThuPzogQ0RQLkkxOE5TZXR0aW5ncztcclxuICAgICAgICAgICAgYXBwbHlQYXRjaD86IGJvb2xlYW47XHJcbiAgICAgICAgICAgIGFuY2hvclZjbGljaz86IGJvb2xlYW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcmZhY2UgT3JpZW50YXRpb25MaXN0ZW5lckhvbGRlciB7XHJcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5GcmFtZXdvcmtdIFwiO1xyXG5cclxuICAgICAgICBsZXQgX2RmSW5pdGlhbGl6ZTogSlF1ZXJ5RGVmZXJyZWQ8dm9pZD4gPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcbiAgICAgICAgbGV0IF9hY3RpdmVQYWdlOiBJUGFnZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyOiBPcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyID0ge307XHJcbiAgICAgICAgbGV0IF9sYXN0T3JpZW50YXRpb246IE9yaWVudGF0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEluaXRpYWxpemF0aW9uIGZ1bmN0aW9uIG9mIEZyYW1ld29yay5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogRnJhbWV3b3JrIOOBruWIneacn+WMlumWouaVsFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0ZyYW1ld29ya09wdGlvbnN9IFtpbl0gb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucz86IEZyYW1ld29ya09wdGlvbnMpOiBJUHJvbWlzZUJhc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICBpZiAoXCJwZW5kaW5nXCIgIT09IF9kZkluaXRpYWxpemUuc3RhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxhbnk+X2RmSW5pdGlhbGl6ZS5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZyhvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENEUCDnkrDlooPjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgLy8g54++54q244Gv44CBY29uc29sZSDjgqrjg5bjgrjjgqfjgq/jg4jjga7kv53oqLzjgaggalF1ZXJ5IOOBriBXaW5SVCDlr77lv5zjgIJcclxuICAgICAgICAgICAgQ0RQLmluaXRpYWxpemUoe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5hcHBseVBhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZyYW1ld29yay5QYXRjaC5hcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5IOOBruWFsemAmuioreWumlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5qcXVlcnkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5IE1vYmlsZSDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcIm1vYmlsZWluaXRcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5qcXVlcnltb2JpbGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNkcC5pMThuIOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDRFAuaW5pdGlhbGl6ZUkxOE4oY29uZmlnLmkxOG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWx3YXlzKChpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaTE4bmV4dCDjga7liJ3mnJ/ljJbmmYLjga7jgqjjg6njg7zjga/nhKHoppbjgZnjgosuIGluZm8g44GMIGFycmF5IOOBruWgtOWQiOOAgeOCqOODqeODvOaDheWgseOBjOagvOe0jeOBleOCjOOBpuOBhOOCiy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25lKFwicGFnZWJlZm9yZWNoYW5nZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8Q2hhbmdlUGFnZU9wdGlvbnM+ZGF0YS5vcHRpb25zKS5zaG93TG9hZE1zZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3JlY3JlYXRlXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGkxOG5leHTjg6njgqTjg5bjg6njg6rjgavjgojjgotodG1sIGZyYWdtZW5044Gu57+76Kiz5Yem55CGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPGFueT4kKGV2ZW50LnRhcmdldCkpLmxvY2FsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSb3V0ZXIg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5pbml0aWFsaXplKHsgYW5jaG9yVmNsaWNrOiBjb25maWcuYW5jaG9yVmNsaWNrLCB9KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiZXJyb3IuIENEUC5GcmFtZXdvcmsuUm91dGVyLmluaXRpYWxpemUoKSBmYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB7IC8vIGpRdWVyeSBNb2JpbGUg44Gu44Ot44O844OJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGpxdWVyeSAzK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqcXVlcnlNYWpvciA9IH5+JC5mbi5qcXVlcnkuc3BsaXQoXCIuXCIpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoMyA8PSBqcXVlcnlNYWpvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDQgPD0ganF1ZXJ5TWFqb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJqcXVlcnktbWlncmF0ZSBmb3IgMy4wLjArIGluIHVzZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS1taWdyYXRlXCJdLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbXCJqcXVlcnkubW9iaWxlXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbXCJqcXVlcnkubW9iaWxlXCJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYWlsOiAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiZXJyb3IuIENEUC5pbml0aWFsaXplKCkgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUgPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiA8YW55Pl9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGZvciBpbml0aWFsaXphdGlvbiBzdGF0dXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBpbml0aWFsaXplZCAvIGZhbHNlOiB1bmluaXRpYWxpemVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWIneacn+WMlua4iOOBv+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5Yid5pyf5YyW5riI44G/IC8gZmFsc2U6IOacquWIneacn+WMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJyZXNvbHZlZFwiID09PSBfZGZJbml0aWFsaXplLnN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SVByb21pc2VCYXNlPHZvaWQ+fVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJblvoXjgaFcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZTx2b2lkPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckluaXRpYWxpemUoKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxhbnk+X2RmSW5pdGlhbGl6ZS5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVnaXN0ZXIgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHRvIGZyYW1ld29yay5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkgICAgICB7U3RyaW5nfSAgICAgICAgICAgICAgICAgICAgICBbaW5dIElEIGtleVxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciB7SU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyfSBbaW5dIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciBpbnN0YW5jZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIg44KSIEZyYW1ld29yayDjgavnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkgICAgICB7U3RyaW5nfSAgICAgICAgICAgICAgICAgICAgICBbaW5dIElEIGtleVxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciB7SU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyfSBbaW5dIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyKGtleTogc3RyaW5nLCBsaXN0ZW5lcjogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV0gPSBsaXN0ZW5lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBVbnJlZ2lzdGVyIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciBmcm9tIGZyYW1ld29yay5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkge1N0cmluZ30gW2luXSBJRCBrZXlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIOOCkiBGcmFtZXdvcmsg44GL44KJ55m76Yyy6Kej6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0gSUQga2V5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHVucmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcihrZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBkZWxldGUgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTZXR1cCBldmVudCBoYW5kbGVycyB3aGVuIGFmdGVyIHJvdXRlciBpbml0aWFsaXplZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOCpOODmeODs+ODiOODj+ODs+ODieODqeOBruioreWumi4gUm91dGVyIOWIneacn+WMluW+jOOBqyBGcmFtZXdvcmsg44GM44Kz44O844Or44GZ44KLLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gc2V0dXBFdmVudEhhbmRsZXJzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkQmFja0J1dHRvbkhhbmRsZXIgPSBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlQmFja0J1dHRvbkhhbmRsZXIgPSAoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSAmJiBfYWN0aXZlUGFnZS5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Op44Kk44Ki44Oz44OI5YG044Gn44OP44Oz44OJ44Oq44Oz44Kw5riI44G/44Go5oyH5a6a44GV44KM44Gf5aC05ZCI44CB5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihiYXNlQmFja0J1dHRvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUm91dGVDaGFuZ2VIYW5kbGVyID0gQ0RQLkZyYW1ld29yay5zZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlUm91dGVDaGFuZ2VIYW5kbGVyID0gKCk6IElQcm9taXNlQmFzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmVQYWdlLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkUm91dGVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFNldHVwIGFjdGl2ZSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2Uge0lQYWdlfSBbaW5dIElQYWdlIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhY3RpdmUgUGFnZSDjga7oqK3lrpouIEZyYW1ld29yayDjgYzjgrPjg7zjg6vjgZnjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlIHtJUGFnZX0gW2luXSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gc2V0QWN0aXZlUGFnZShwYWdlOiBJUGFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBfYWN0aXZlUGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IGdldE9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXRlcm5zIGZyYW1ld29yayBkZWZhdWx0IGNsaWNrIGV2ZW50IHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEZyYW1ld29yayDjgYzml6Llrprjgavkvb/nlKjjgZnjgovjgq/jg6rjg4Pjgq/jgqTjg5njg7Pjg4jmloflrZfliJfjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBcInZjbGlja1wiIC8gXCJjbGlja1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDbGlja0V2ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRjaC5zX3ZjbGlja0V2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtGcmFtZXdvcmtPcHRpb25zfSBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBDb25maWcgb2JqZWN0IOOBruWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtGcmFtZXdvcmtPcHRpb25zfSBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbmZpZyhvcHRpb25zOiBGcmFtZXdvcmtPcHRpb25zKTogRnJhbWV3b3JrT3B0aW9ucyB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZkNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIC8vIGZvciBmYWlsIHNhZmUsIGRlZmF1bHQgc2V0dGluZ3MuXHJcbiAgICAgICAgICAgICAgICBqcXVlcnk6ICgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkLnN1cHBvcnQuY29ycyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAoeyBjYWNoZTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5taWdyYXRlTXV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGpxdWVyeW1vYmlsZTogKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmFsbG93Q3Jvc3NEb21haW5QYWdlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuZGVmYXVsdFBhZ2VUcmFuc2l0aW9uID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZS5wdXNoU3RhdGVFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGkxOG46IHtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgYXBwbHlQYXRjaDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFuY2hvclZjbGljazogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgZGVmQ29uZmlnLCBDRFAuQ29uZmlnLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gY2xvc3VyZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vIHJlc2l6ZSBoYW5kbGVyXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3T3JpZW50YXRpb24gPSBnZXRPcmllbnRhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoX2xhc3RPcmllbnRhdGlvbiAhPT0gbmV3T3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV0ub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2FjdGl2ZVBhZ2Uub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IG5ld09yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL0NvcmVBUEkudHMiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiUm91dGVyLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICBpbXBvcnQgUHJvbWlzZSA9IENEUC5Qcm9taXNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBNYW5hZ2VkSW50ZW50XHJcbiAgICAgKiBAYnJpZWYgSW50ZXJuYWwgSW50ZW50IGludGVyZmFjZSBmb3IgbWFuYWdlZCB1cGRhdGUgaW5mby5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBNYW5hZ2VkSW50ZW50XHJcbiAgICAgKiBAYnJpZWYg5pu05paw5oOF5aCx44GM566h55CG44GV44KM44Gf5YaF6YOoIEludGVudCDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIE1hbmFnZWRJbnRlbnQgZXh0ZW5kcyBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBzZXQgXCJ0cnVlXCIgd2hlbiB1cGRhdGUgaW4gUGFnZSBjbGFzcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K45YaF44Gn5pu05paw44GV44KM44Gf5aC05ZCIIHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBfdXBkYXRlOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGNsYXNzIFBhZ2VcclxuICAgICAqIEBicmllZiBCYXNlIGNsYXNzIG9mIGFsbCBwYWdlIHVuaXQuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBjbGFzcyBQYWdlXHJcbiAgICAgKiBAYnJpZWYg44GZ44G544Gm44Gu44Oa44O844K444Gu5Z+65pys44Go44Gq44KL5pei5a6a44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYWdlIGltcGxlbWVudHMgSVBhZ2Uge1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBkYXRhIG1lbWJlclxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX293bmVyOiBJUGFnZTtcclxuICAgICAgICBwcml2YXRlIF8kcGFnZTogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgXyRoZWFkZXI6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF8kZm9vdGVyOiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfaW50ZW50OiBNYW5hZ2VkSW50ZW50O1xyXG4gICAgICAgIHByaXZhdGUgX2tlZXBJbnRlbnQ6IGJvb2xlYW47XHJcbiAgICAgICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIF91cmwgICAge1N0cmluZ30gICAgICAgICAgICAgICBbaW5dIHBhZ2UncyBVUkxcclxuICAgICAgICAgKiBAcGFyYW0gX2lkICAgICB7U3RyaW5nfSAgICAgICAgICAgICAgIFtpbl0gcGFnZSdzIElEXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge1BhZ2VDb25zdHJ1Y3RPcHRpb25zfSBbaW5dIG9wdGlvbnNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBfdXJsICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSDjg5rjg7zjgrggVVJMXHJcbiAgICAgICAgICogQHBhcmFtIF9pZCAgICAge1N0cmluZ30gICAgICAgICAgICAgICBbaW5dIOODmuODvOOCuCBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtQYWdlQ29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF91cmw6IHN0cmluZywgcHJpdmF0ZSBfaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VDb25zdHJ1Y3RPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXAob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgYWNjZXNzb3JcclxuXHJcbiAgICAgICAgZ2V0IGFjdGl2ZSgpOiBib29sZWFuICAgICAgICAgICB7IHJldHVybiAhIXRoaXMuXyRwYWdlICYmIHRoaXMuXyRwYWdlLmhhc0NsYXNzKFwidWktcGFnZS1hY3RpdmVcIik7ICAgfVxyXG4gICAgICAgIGdldCB1cmwoKTogc3RyaW5nICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fdXJsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGlkKCk6IHN0cmluZyAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9pZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJHBhZ2UoKTogSlF1ZXJ5ICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuXyRwYWdlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkaGVhZGVyKCk6IEpRdWVyeSAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fJGhlYWRlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRmb290ZXIoKTogSlF1ZXJ5ICAgICAgICAgICB7IHJldHVybiB0aGlzLl8kZm9vdGVyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgaW50ZW50KCk6IEludGVudCAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2ludGVudDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIHNldCBpbnRlbnQobmV3SW50ZW50OiBJbnRlbnQpICAgeyB0aGlzLl9pbnRlbnQgPSA8YW55Pm5ld0ludGVudDsgdGhpcy5faW50ZW50Ll91cGRhdGUgPSB0cnVlOyAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBFdmVudCBIYW5kbGVyXHJcblxyXG4gICAgICAgIC8vISBPcmllbnRhdGlvbiDjga7lpInmm7TjgpLlj5fkv6FcclxuICAgICAgICBwdWJsaWMgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IE9yaWVudGF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgIHB1YmxpYyBvbkhhcmR3YXJlQmFja0J1dHRvbihldmVudD86IEpRdWVyeUV2ZW50T2JqZWN0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLm9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6lcclxuICAgICAgICBwdWJsaWMgb25CZWZvcmVSb3V0ZUNoYW5nZSgpOiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaxjueUqOOCs+ODnuODs+ODieOCkuWPl+S/oVxyXG4gICAgICAgIHB1YmxpYyBvbkNvbW1hbmQoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCwga2luZD86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkNvbW1hbmQoZXZlbnQsIGtpbmQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBwdWJsaWMgb25Jbml0aWFsaXplKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uSW5pdGlhbGl6ZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWNyZWF0ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKOaXpzpcInBhZ2Vpbml0XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VJbml0KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKOaXpzpcInBhZ2VzaG93XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VTaG93KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VCZWZvcmVIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlSGlkZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlSGlkZShldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlUmVtb3ZlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBtaXhpbiDnlKjnlpHkvLzjgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICBwcml2YXRlIHNldHVwKG9wdGlvbnM6IFBhZ2VDb25zdHJ1Y3RPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIG1peGluIGRlc3RpbmF0aW9uIOeUqOOBruWGjeWIneacn+WMllxyXG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlbnQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8g44Kk44OZ44Oz44OI44OQ44Kk44Oz44OJXHJcbiAgICAgICAgICAgIGxldCBzZWxlY3Rvcjogc3RyaW5nID0gXCIjXCIgKyB0aGlzLl9pZDtcclxuICAgICAgICAgICAgJChkb2N1bWVudClcclxuICAgICAgICAgICAgICAgIC5vZmYoXCJwYWdlYmVmb3JlY3JlYXRlXCIsIHNlbGVjdG9yKVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCBzZWxlY3RvciwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRwYWdlID0gJChzZWxlY3RvcikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kaGVhZGVyID0gdGhpcy5fJHBhZ2UuY2hpbGRyZW4oXCI6anFtRGF0YShyb2xlPWhlYWRlcilcIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZm9vdGVyID0gdGhpcy5fJHBhZ2UuY2hpbGRyZW4oXCI6anFtRGF0YShyb2xlPWZvb3RlcilcIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlY3JlYXRlXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBTaG93RXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VCZWZvcmVTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW05vdGVdaW5zdGVhZCBmdXR1cmUgdmVyc2lvbiBcInBhZ2Vjb250YWluZXJzaG93XCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VzaG93XCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IFNob3dFdmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3JlaGlkZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW05vdGVdaW5zdGVhZCBmdXR1cmUgdmVyc2lvbiBcInBhZ2Vjb250YWluZXJoaWRlXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VoaWRlXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IEhpZGVFdmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUhpZGUoZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlcmVtb3ZlXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUJlZm9yZUNyZWF0ZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgLy8gb3duZXIg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyID0gb3B0aW9ucy5vd25lcjtcclxuICAgICAgICAgICAgLy8gaW50ZW50IOioreWumlxyXG4gICAgICAgICAgICB0aGlzLl9rZWVwSW50ZW50ID0gb3B0aW9ucy5rZWVwSW50ZW50O1xyXG5cclxuICAgICAgICAgICAgLy8gUm91dGVyIOOBuOeZu+mMslxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBvcHRpb25zLnJvdXRlKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnJvdXRlID0gdGhpcy5faWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUm91dGVyLnJlZ2lzdGVyKG9wdGlvbnMucm91dGUsIHRoaXMuX3VybCwgb3B0aW9ucy50b3AsIG9wdGlvbnMuY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uIOOBruWIpOWumlxyXG4gICAgICAgIHByaXZhdGUgZ2V0RGlyZWN0aW9uKCk6IFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uIHtcclxuICAgICAgICAgICAgbGV0IGFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgbGV0IHByZXZJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleDtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGFjdGl2ZUluZGV4IHx8IG51bGwgPT0gcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1bmtub3duXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldkluZGV4ID09PSBhY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2FtZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZUluZGV4IDwgcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJiYWNrXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmb3J3YXJkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwYWdlSW5pdChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkluaXRpYWxpemUoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlSW5pdChldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBGcmFtZXdvcmsuc2V0QWN0aXZlUGFnZSh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5faW50ZW50ID0gPE1hbmFnZWRJbnRlbnQ+Um91dGVyLnBvcEludGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBTaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlU2hvdyhldmVudCwgJC5leHRlbmQoZGF0YSwgeyBkaXJlY3Rpb246IHRoaXMuZ2V0RGlyZWN0aW9uKCkgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2ludGVudCAmJiAodGhpcy5fa2VlcEludGVudCB8fCB0aGlzLl9pbnRlbnQuX3VwZGF0ZSkpIHsgICAgLy8gaW50ZW50IOOBq+abtOaWsOOBjOOBguOBo+OBn+WgtOWQiFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2ludGVudC5fdXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnB1c2hJbnRlbnQodGhpcy5faW50ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuZnJvbUhhc2hDaGFuZ2VkKCkgJiYgUm91dGVyLmlzSW5TdWJGbG93KCkpIHsgICAgLy8gU3ViIEZsb3cg5YaF44GnIGJhY2sg44GV44KM44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIucHVzaEludGVudCh0aGlzLl9pbnRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIEZyYW1ld29yay5zZXRBY3RpdmVQYWdlKG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwYWdlSGlkZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VIaWRlKGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlUmVtb3ZlKGV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5fJHBhZ2Uub2ZmKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRwYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fJGhlYWRlci5vZmYoKTtcclxuICAgICAgICAgICAgdGhpcy5fJGhlYWRlciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRmb290ZXIub2ZmKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRmb290ZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gY2xvc3VyZSBtZXRob2RzXHJcblxyXG4gICAgLypcclxuICAgICAqIGpRTTEuNCDjgavjgabjgIFkdXBsaWNhdGUg44Go44GV44KM44Gm44GE44KLIFwicGFnZXNob3dcIiwgXCJwYWdlaGlkZVwiIOOBr+OBvuOBoOaNruOBiOe9ruOBjeOAglxyXG4gICAgICogaHR0cDovL2pxdWVyeW1vYmlsZS5jb20vdXBncmFkZS1ndWlkZS8xLjQvI25hdmlnYXRpb25cclxuICAgICAqXHJcbiAgICAgKiDnibnlrprjg5rjg7zjgrjjgavlr77jgZfjgabjgIHjgqTjg5njg7Pjg4jjgpLlj5blvpfjgafjgY3jgarjgYTjgZ/jgoHjgIJcclxuICAgICAqIEZvcnVtIOOBp+OCguitsOirluS4reOBquOBruOBp+OAgeaxuuedgOOBjOOBpOOBhOOBpuOBi+OCieWvvuW/nOOCkuiAg+aFruOBmeOCi+OAglxyXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy82ODY1XHJcbiAgICAgKlxyXG4gICAgICogW+WPguiAg10g44KI44GP44KP44GL44KL44Kk44OZ44Oz44OI44OB44O844OI44K344O844OIXHJcbiAgICAgKiAgLSDmnKzlrrYoMS40KykgaHR0cDovL2pxbXRyaWNrcy53b3JkcHJlc3MuY29tLzIwMTQvMDMvMjYvanF1ZXJ5LW1vYmlsZS1wYWdlLWV2ZW50cy9cclxuICAgICAqICAtIOacieW/lyh+MS4zKSBodHRwOi8vZGV2LnNjcmV3LWF4aXMuY29tL2RvYy9qcXVlcnlfbW9iaWxlL3Jlc291cmNlcy9jaGVhdHNoZWV0L1xyXG4gICAgICpcclxuICAgICAqIOS7peS4i+OBr+S4jeWujOWFqOOBquWvvuW/nOS6iOWumuOCs+ODvOODiVxyXG4gICAgICpcclxuICAgICAqIOeJueOBq+aMr+OCi+iInuOBhOOBjOWkieOCj+OCi+OBruOBr+OAgVwicGFnZWhpZGVcIiDjgafjgIHmpJzoqI7jgZXjgozjgabjgYTjgovku5Xmp5jjgafjga9cclxuICAgICAqIERPTSDjgpLnibnlrprjgafjgY3jgarjgYTjgZ/jgoHjgIFvblBhZ2VIaWRlKCkg44KS44Kk44Oz44K544K/44Oz44K544Gr5Lyd44GI44KL44GT44Go44GM44Gn44GN44Gq44GE44CCXHJcbiAgICAgKlxyXG4gICAgICog5LuV5qeY44GM5aSJ44KP44KJ44Gq44GE5aC05ZCI44GvXHJcbiAgICAgKiBvblBhZ2VCZWZvcmVIaWRlKCkg44Gu5Lit44GnIHBvc3Qg44GX44GmIG9uUGFnZUhpZGUoKSDjgpLnmbrooYzjgZnjgovkuojlrpoo6YGO5Y675LqS5o+b5L+d6Ki8KVxyXG4gICAgICpcclxuICAgICAqIDIwMTUvMDMvMjUg6L+96KiYOlxyXG4gICAgICog5LuV5qeY44Gv56K65a6aLiBqUU0xLjYg44KI44KK5YmK6Zmk44GV44KM44KL5LqI5a6aXHJcbiAgICAgKiAgalFNMS40IOebuOW9k+OBruWPguiAg+Wun+ijhSBwbHVnaW4g44GM44GC44KK44CB44GT44Gu5a6f6KOF55u45b2T44Gu5qmf6IO944KSIGNkcC5mcmFtZXdvcmsuanFtIOOBp+aKseOBiOOCi+S6iOWumlxyXG4gICAgICogIGh0dHBzOi8vZ2l0aHViLmNvbS9hcnNjaG1pdHovanF1ZXJ5LW1vYmlsZS1vbnBhZ2VcclxuICAgICAqXHJcbiAgICAgKiDlhazlvI/opovop6NcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNzI4MyNpc3N1ZWNvbW1lbnQtNDA3NDY2MjJcclxuICAgICAqL1xyXG4vKlxyXG4gICAgLy8gYmluZCBcInBhZ2Vjb250YWluZXJzaG93XCIsIGFuZCBcInBhZ2Vjb250YWluZXJoaWRlXCIuXHJcbiAgICAoKCkgPT4ge1xyXG4gICAgICAgIGxldCAkYm9keTogYW55ID0gJChcImJvZHlcIik7XHJcbiAgICAgICAgJChkb2N1bWVudClcclxuICAgICAgICAgICAgLm9uKFwicGFnZWNvbnRhaW5lcnNob3dcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPCBkYXRhLnByZXZQYWdlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFwicGFnZWNvbnRhaW5lcnNob3dcIiDjga8gXCJwYWdlY29udGFpbmVyaGlkZVwiIOOCiOOCiuOCgumBheOBhOOBruOBp+OAgeOChOOBr+OCiiBET00g44Gr44Gv44Ki44Kv44K744K544Gn44GN44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0ICRwcmV2cGFnZSA9ICQoXCIjXCIgKyBkYXRhLnByZXZQYWdlWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAkcHJldnBhZ2UudHJpZ2dlcihcIl9wYWdlaGlkZVwiLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOS7peS4i+OBruWvvuW/nOOBp+OAgVwicGFnZWNvbnRhaW5lcnNob3dcIiDjga8gXCJwYWdlc2hvd1wiIOWQjOetieOBruaMr+OCi+iInuOBhOOBq+OBmeOCi+OBk+OBqOOBjOWPr+iDvVxyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2VJZCA9ICRib2R5LnBhZ2Vjb250YWluZXIoXCJnZXRBY3RpdmVQYWdlXCIpLnByb3AoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgIGxldCAkcGFnZSA9ICQoXCIjXCIgKyBwYWdlSWQpO1xyXG4gICAgICAgICAgICAgICAgJHBhZ2UudHJpZ2dlcihcIl9wYWdlc2hvd1wiLCBkYXRhKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLm9uKFwicGFnZWNvbnRhaW5lcmhpZGVcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogSGlkZUV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyaGlkZVwiIOOCkuWPl+OBkeOBn+OBqOOBjeOBr+aXouOBqyBET00g44GL44KJ5raI44GI44Gm44GE44KL44Gf44KB44CBcGFnZSDjga/nibnlrprjgafjgY3jgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIC8vbGV0IHBhZ2VJZCA9ICRib2R5LnBhZ2Vjb250YWluZXIoJ2dldEFjdGl2ZVBhZ2UnKS5wcm9wKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAvL2xldCAkcGFnZSA9ICQoXCIjXCIgKyBwYWdlSWQpO1xyXG4gICAgICAgICAgICAgICAgLy8kcGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVydHJhbnNpdGlvblwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFwicGFnZWNvbnRhaW5lcnRyYW5zaXRpb25cIiDjgavjga8gdG9QYWdlIOOBq+OBl+OBi+OCouOCr+OCu+OCueOBr+OBp+OBjeOBquOBhFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pKCk7XHJcbiovXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL1BhZ2UudHMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5pMThuXCIsXCJjb21tb25qczJcIjpcImNkcC5pMThuXCIsXCJhbWRcIjpcImNkcC5pMThuXCJ9XG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwiQmFja2JvbmVcIixcImNvbW1vbmpzXCI6XCJiYWNrYm9uZVwiLFwiY29tbW9uanMyXCI6XCJiYWNrYm9uZVwiLFwiYW1kXCI6XCJiYWNrYm9uZVwifVxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG4oZnVuY3Rpb24oKSB7XG5cbi8qIVxyXG4gKiBqUXVlcnkgTWlncmF0ZSAtIHYzLjAuMS1ob3RmaXggLSAyMDE3LTAxLTExXHJcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqL1xyXG47IChmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxyXG4gICAgICAgIGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uICgkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KCQsIHdpbmRvdyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcclxuICAgICAgICAvLyBOb2RlL0NvbW1vbkpTXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIiksIHdpbmRvdyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5LCB3aW5kb3cpO1xyXG4gICAgfVxyXG59KShmdW5jdGlvbiAoalF1ZXJ5LCB3aW5kb3cpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGpRdWVyeS5taWdyYXRlVmVyc2lvbiA9IFwiMy4wLjEtaG90Zml4XCI7IC8vIHdpdGggaG90Zml4XHJcblxyXG4gICAgLyogZXhwb3J0ZWQgbWlncmF0ZVdhcm4sIG1pZ3JhdGVXYXJuRnVuYywgbWlncmF0ZVdhcm5Qcm9wICovXHJcblxyXG4gICAgKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydDogSUU5IG9ubHlcclxuICAgICAgICAvLyBJRTkgb25seSBjcmVhdGVzIGNvbnNvbGUgb2JqZWN0IHdoZW4gZGV2IHRvb2xzIGFyZSBmaXJzdCBvcGVuZWRcclxuICAgICAgICAvLyBBbHNvLCBhdm9pZCBGdW5jdGlvbiNiaW5kIGhlcmUgdG8gc2ltcGxpZnkgUGhhbnRvbUpTIHVzYWdlXHJcbiAgICAgICAgdmFyIGxvZyA9IHdpbmRvdy5jb25zb2xlICYmIHdpbmRvdy5jb25zb2xlLmxvZyAmJlxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cuYXBwbHkod2luZG93LmNvbnNvbGUsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJiYWRWZXJzaW9ucyA9IC9eWzEyXVxcLi87XHJcblxyXG4gICAgICAgIGlmICghbG9nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5lZWQgalF1ZXJ5IDMuMC4wKyBhbmQgbm8gb2xkZXIgTWlncmF0ZSBsb2FkZWRcclxuICAgICAgICBpZiAoIWpRdWVyeSB8fCByYmFkVmVyc2lvbnMudGVzdChqUXVlcnkuZm4uanF1ZXJ5KSkge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IGpRdWVyeSAzLjAuMCsgUkVRVUlSRURcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChqUXVlcnkubWlncmF0ZVdhcm5pbmdzKSB7XHJcbiAgICAgICAgICAgIGxvZyhcIkpRTUlHUkFURTogTWlncmF0ZSBwbHVnaW4gbG9hZGVkIG11bHRpcGxlIHRpbWVzXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2hvdyBhIG1lc3NhZ2Ugb24gdGhlIGNvbnNvbGUgc28gZGV2cyBrbm93IHdlJ3JlIGFjdGl2ZVxyXG4gICAgICAgIGlmICghalF1ZXJ5Lm1pZ3JhdGVNdXRlKSB7XHJcbiAgICAgICAgICAgIGxvZyhcIkpRTUlHUkFURTogTWlncmF0ZSBpcyBpbnN0YWxsZWRcIiArXHJcbiAgICAgICAgICAgICAgICAoalF1ZXJ5Lm1pZ3JhdGVNdXRlID8gXCJcIiA6IFwiIHdpdGggbG9nZ2luZyBhY3RpdmVcIikgK1xyXG4gICAgICAgICAgICAgICAgXCIsIHZlcnNpb24gXCIgKyBqUXVlcnkubWlncmF0ZVZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH0pKCk7XHJcblxyXG4gICAgdmFyIHdhcm5lZEFib3V0ID0ge307XHJcblxyXG4gICAgLy8gTGlzdCBvZiB3YXJuaW5ncyBhbHJlYWR5IGdpdmVuOyBwdWJsaWMgcmVhZCBvbmx5XHJcbiAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzID0gW107XHJcblxyXG4gICAgLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdHJhY2VzIHRoYXQgYXBwZWFyIHdpdGggd2FybmluZ3NcclxuICAgIGlmIChqUXVlcnkubWlncmF0ZVRyYWNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBqUXVlcnkubWlncmF0ZVRyYWNlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGb3JnZXQgYW55IHdhcm5pbmdzIHdlJ3ZlIGFscmVhZHkgZ2l2ZW47IHB1YmxpY1xyXG4gICAgalF1ZXJ5Lm1pZ3JhdGVSZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3YXJuZWRBYm91dCA9IHt9O1xyXG4gICAgICAgIGpRdWVyeS5taWdyYXRlV2FybmluZ3MubGVuZ3RoID0gMDtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbWlncmF0ZVdhcm4obXNnKSB7XHJcbiAgICAgICAgdmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcclxuICAgICAgICBpZiAoIXdhcm5lZEFib3V0W21zZ10pIHtcclxuICAgICAgICAgICAgd2FybmVkQWJvdXRbbXNnXSA9IHRydWU7XHJcbiAgICAgICAgICAgIGpRdWVyeS5taWdyYXRlV2FybmluZ3MucHVzaChtc2cpO1xyXG4gICAgICAgICAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4gJiYgIWpRdWVyeS5taWdyYXRlTXV0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiSlFNSUdSQVRFOiBcIiArIG1zZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVUcmFjZSAmJiBjb25zb2xlLnRyYWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS50cmFjZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1pZ3JhdGVXYXJuUHJvcChvYmosIHByb3AsIHZhbHVlLCBtc2cpIHtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCB7XHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2Fybihtc2cpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4obXNnKTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtaWdyYXRlV2FybkZ1bmMob2JqLCBwcm9wLCBuZXdGdW5jLCBtc2cpIHtcclxuICAgICAgICBvYmpbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKG1zZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAod2luZG93LmRvY3VtZW50LmNvbXBhdE1vZGUgPT09IFwiQmFja0NvbXBhdFwiKSB7XHJcbiAgICAgICAgLy8gSlF1ZXJ5IGhhcyBuZXZlciBzdXBwb3J0ZWQgb3IgdGVzdGVkIFF1aXJrcyBNb2RlXHJcbiAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBRdWlya3MgTW9kZVwiKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdmFyIG9sZEluaXQgPSBqUXVlcnkuZm4uaW5pdCxcclxuICAgICAgICBvbGRJc051bWVyaWMgPSBqUXVlcnkuaXNOdW1lcmljLFxyXG4gICAgICAgIG9sZEZpbmQgPSBqUXVlcnkuZmluZCxcclxuICAgICAgICByYXR0ckhhc2hUZXN0ID0gL1xcWyhcXHMqWy1cXHddK1xccyopKFt+fF4kKl0/PSlcXHMqKFstXFx3I10qPyNbLVxcdyNdKilcXHMqXFxdLyxcclxuICAgICAgICByYXR0ckhhc2hHbG9iID0gL1xcWyhcXHMqWy1cXHddK1xccyopKFt+fF4kKl0/PSlcXHMqKFstXFx3I10qPyNbLVxcdyNdKilcXHMqXFxdL2c7XHJcblxyXG4gICAgalF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiAoYXJnMSkge1xyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcxID09PSBcInN0cmluZ1wiICYmIGFyZzEgPT09IFwiI1wiKSB7XHJcbiAgICAgICAgICAgIC8vIEpRdWVyeSggXCIjXCIgKSBpcyBhIGJvZ3VzIElEIHNlbGVjdG9yLCBidXQgaXQgcmV0dXJuZWQgYW4gZW1wdHkgc2V0IGJlZm9yZSBqUXVlcnkgMy4wXHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5KCAnIycgKSBpcyBub3QgYSB2YWxpZCBzZWxlY3RvclwiKTtcclxuICAgICAgICAgICAgYXJnc1swXSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZEluaXQuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9O1xyXG4gICAgalF1ZXJ5LmZuLmluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xyXG5cclxuICAgIGpRdWVyeS5maW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0OiBQaGFudG9tSlMgMS54XHJcbiAgICAgICAgLy8gU3RyaW5nI21hdGNoIGZhaWxzIHRvIG1hdGNoIHdoZW4gdXNlZCB3aXRoIGEgLy9nIFJlZ0V4cCwgb25seSBvbiBzb21lIHN0cmluZ3NcclxuICAgICAgICBpZiAodHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICYmIHJhdHRySGFzaFRlc3QudGVzdChzZWxlY3RvcikpIHtcclxuICAgICAgICAgICAgLy8gVGhlIG5vbnN0YW5kYXJkIGFuZCB1bmRvY3VtZW50ZWQgdW5xdW90ZWQtaGFzaCB3YXMgcmVtb3ZlZCBpbiBqUXVlcnkgMS4xMi4wXHJcbiAgICAgICAgICAgIC8vIEZpcnN0IHNlZSBpZiBxUyB0aGlua3MgaXQncyBhIHZhbGlkIHNlbGVjdG9yLCBpZiBzbyBhdm9pZCBhIGZhbHNlIHBvc2l0aXZlXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycjEpIHtcclxuICAgICAgICAgICAgICAgIC8vIERpZG4ndCAqbG9vayogdmFsaWQgdG8gcVNBLCB3YXJuIGFuZCB0cnkgcXVvdGluZyB3aGF0IHdlIHRoaW5rIGlzIHRoZSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKHJhdHRySGFzaEdsb2IsIGZ1bmN0aW9uIChfLCBhdHRyLCBvcCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJbXCIgKyBhdHRyICsgb3AgKyBcIlxcXCJcIiArIHZhbHVlICsgXCJcXFwiXVwiO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlZ2V4cCAqbWF5KiBoYXZlIGNyZWF0ZWQgYW4gaW52YWxpZCBzZWxlY3RvciwgZG9uJ3QgdXBkYXRlIGl0XHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlcmUgbWF5IGJlIGZhbHNlIGFsYXJtcyBpZiBzZWxlY3RvciB1c2VzIGpRdWVyeSBleHRlbnNpb25zXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcIkF0dHJpYnV0ZSBzZWxlY3RvciB3aXRoICcjJyBtdXN0IGJlIHF1b3RlZDogXCIgKyBhcmdzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzWzBdID0gc2VsZWN0b3I7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJBdHRyaWJ1dGUgc2VsZWN0b3Igd2l0aCAnIycgd2FzIG5vdCBmaXhlZDogXCIgKyBhcmdzWzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZEZpbmQuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENvcHkgcHJvcGVydGllcyBhdHRhY2hlZCB0byBvcmlnaW5hbCBqUXVlcnkuZmluZCBtZXRob2QgKGUuZy4gLmF0dHIsIC5pc1hNTClcclxuICAgIHZhciBmaW5kUHJvcDtcclxuICAgIGZvciAoZmluZFByb3AgaW4gb2xkRmluZCkge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2xkRmluZCwgZmluZFByb3ApKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeS5maW5kW2ZpbmRQcm9wXSA9IG9sZEZpbmRbZmluZFByb3BdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldFxyXG4gICAgalF1ZXJ5LmZuLnNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uc2l6ZSgpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ7IHVzZSB0aGUgLmxlbmd0aCBwcm9wZXJ0eVwiKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGg7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5wYXJzZUpTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkucGFyc2VKU09OIGlzIGRlcHJlY2F0ZWQ7IHVzZSBKU09OLnBhcnNlXCIpO1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5pc051bWVyaWMgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgLy8gVGhlIGpRdWVyeSAyLjIuMyBpbXBsZW1lbnRhdGlvbiBvZiBpc051bWVyaWNcclxuICAgICAgICBmdW5jdGlvbiBpc051bWVyaWMyKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgcmVhbFN0cmluZ09iaiA9IG9iaiAmJiBvYmoudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgcmV0dXJuICFqUXVlcnkuaXNBcnJheShvYmopICYmIChyZWFsU3RyaW5nT2JqIC0gcGFyc2VGbG9hdChyZWFsU3RyaW5nT2JqKSArIDEpID49IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbmV3VmFsdWUgPSBvbGRJc051bWVyaWModmFsKSxcclxuICAgICAgICAgICAgb2xkVmFsdWUgPSBpc051bWVyaWMyKHZhbCk7XHJcblxyXG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuaXNOdW1lcmljKCkgc2hvdWxkIG5vdCBiZSBjYWxsZWQgb24gY29uc3RydWN0ZWQgb2JqZWN0c1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRWYWx1ZTtcclxuICAgIH07XHJcblxyXG4gICAgbWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwgXCJ1bmlxdWVcIiwgalF1ZXJ5LnVuaXF1ZVNvcnQsXHJcbiAgICAgICAgXCJqUXVlcnkudW5pcXVlIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkudW5pcXVlU29ydFwiKTtcclxuXHJcbiAgICAvLyBOb3cgalF1ZXJ5LmV4cHIucHNldWRvcyBpcyB0aGUgc3RhbmRhcmQgaW5jYW50YXRpb25cclxuICAgIG1pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXhwciwgXCJmaWx0ZXJzXCIsIGpRdWVyeS5leHByLnBzZXVkb3MsXHJcbiAgICAgICAgXCJqUXVlcnkuZXhwci5maWx0ZXJzIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkuZXhwci5wc2V1ZG9zXCIpO1xyXG4gICAgbWlncmF0ZVdhcm5Qcm9wKGpRdWVyeS5leHByLCBcIjpcIiwgalF1ZXJ5LmV4cHIucHNldWRvcyxcclxuICAgICAgICBcImpRdWVyeS5leHByWyc6J10gaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS5leHByLnBzZXVkb3NcIik7XHJcblxyXG5cclxuICAgIHZhciBvbGRBamF4ID0galF1ZXJ5LmFqYXg7XHJcblxyXG4gICAgalF1ZXJ5LmFqYXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGpRWEhSID0gb2xkQWpheC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cclxuICAgICAgICAvLyBCZSBzdXJlIHdlIGdvdCBhIGpRWEhSIChlLmcuLCBub3Qgc3luYylcclxuICAgICAgICBpZiAoalFYSFIucHJvbWlzZSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybkZ1bmMoalFYSFIsIFwic3VjY2Vzc1wiLCBqUVhIUi5kb25lLFxyXG4gICAgICAgICAgICAgICAgXCJqUVhIUi5zdWNjZXNzIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIik7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuRnVuYyhqUVhIUiwgXCJlcnJvclwiLCBqUVhIUi5mYWlsLFxyXG4gICAgICAgICAgICAgICAgXCJqUVhIUi5lcnJvciBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIpO1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybkZ1bmMoalFYSFIsIFwiY29tcGxldGVcIiwgalFYSFIuYWx3YXlzLFxyXG4gICAgICAgICAgICAgICAgXCJqUVhIUi5jb21wbGV0ZSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGpRWEhSO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZFJlbW92ZUF0dHIgPSBqUXVlcnkuZm4ucmVtb3ZlQXR0cixcclxuICAgICAgICBvbGRUb2dnbGVDbGFzcyA9IGpRdWVyeS5mbi50b2dnbGVDbGFzcyxcclxuICAgICAgICBybWF0Y2hOb25TcGFjZSA9IC9cXFMrL2c7XHJcblxyXG4gICAgalF1ZXJ5LmZuLnJlbW92ZUF0dHIgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgalF1ZXJ5LmVhY2gobmFtZS5tYXRjaChybWF0Y2hOb25TcGFjZSksIGZ1bmN0aW9uIChpLCBhdHRyKSB7XHJcbiAgICAgICAgICAgIGlmIChqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoYXR0cikpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnJlbW92ZUF0dHIgbm8gbG9uZ2VyIHNldHMgYm9vbGVhbiBwcm9wZXJ0aWVzOiBcIiArIGF0dHIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5wcm9wKGF0dHIsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gb2xkUmVtb3ZlQXR0ci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZm4udG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbiAoc3RhdGUpIHtcclxuICAgICAgICAvLyBPbmx5IGRlcHJlY2F0aW5nIG5vLWFyZ3Mgb3Igc2luZ2xlIGJvb2xlYW4gYXJnXHJcbiAgICAgICAgaWYgKHN0YXRlICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHN0YXRlICE9PSBcImJvb2xlYW5cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkVG9nZ2xlQ2xhc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnRvZ2dsZUNsYXNzKCBib29sZWFuICkgaXMgZGVwcmVjYXRlZFwiKTtcclxuXHJcbiAgICAgICAgLy8gVG9nZ2xlIGVudGlyZSBjbGFzcyBuYW1lIG9mIGVhY2ggZWxlbWVudFxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUgJiYgdGhpcy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmRhdGEodGhpcywgXCJfX2NsYXNzTmFtZV9fXCIsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXHJcbiAgICAgICAgICAgIC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXHJcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXHJcbiAgICAgICAgICAgIC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0QXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIHx8IHN0YXRlID09PSBmYWxzZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgXCJcIiA6XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmRhdGEodGhpcywgXCJfX2NsYXNzTmFtZV9fXCIpIHx8IFwiXCJcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBpbnRlcm5hbFN3YXBDYWxsID0gZmFsc2U7XHJcblxyXG4gICAgLy8gSWYgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSBoYXMgLnN3YXAoKSwgZG9uJ3QgZmFsc2UtYWxhcm0gb24gaW50ZXJuYWwgdXNlc1xyXG4gICAgaWYgKGpRdWVyeS5zd2FwKSB7XHJcbiAgICAgICAgalF1ZXJ5LmVhY2goW1wiaGVpZ2h0XCIsIFwid2lkdGhcIiwgXCJyZWxpYWJsZU1hcmdpblJpZ2h0XCJdLCBmdW5jdGlvbiAoXywgbmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgb2xkSG9vayA9IGpRdWVyeS5jc3NIb29rc1tuYW1lXSAmJiBqUXVlcnkuY3NzSG9va3NbbmFtZV0uZ2V0O1xyXG5cclxuICAgICAgICAgICAgaWYgKG9sZEhvb2spIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5jc3NIb29rc1tuYW1lXS5nZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxTd2FwQ2FsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gb2xkSG9vay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsU3dhcENhbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGpRdWVyeS5zd2FwID0gZnVuY3Rpb24gKGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzKSB7XHJcbiAgICAgICAgdmFyIHJldCwgbmFtZSxcclxuICAgICAgICAgICAgb2xkID0ge307XHJcblxyXG4gICAgICAgIGlmICghaW50ZXJuYWxTd2FwQ2FsbCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5zd2FwKCkgaXMgdW5kb2N1bWVudGVkIGFuZCBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXHJcbiAgICAgICAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgb2xkW25hbWVdID0gZWxlbS5zdHlsZVtuYW1lXTtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZVtuYW1lXSA9IG9wdGlvbnNbbmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXQgPSBjYWxsYmFjay5hcHBseShlbGVtLCBhcmdzIHx8IFtdKTtcclxuXHJcbiAgICAgICAgLy8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXHJcbiAgICAgICAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZVtuYW1lXSA9IG9sZFtuYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBvbGREYXRhID0galF1ZXJ5LmRhdGE7XHJcblxyXG4gICAgalF1ZXJ5LmRhdGEgPSBmdW5jdGlvbiAoZWxlbSwgbmFtZSwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgY3VyRGF0YTtcclxuXHJcbiAgICAgICAgLy8gTmFtZSBjYW4gYmUgYW4gb2JqZWN0LCBhbmQgZWFjaCBlbnRyeSBpbiB0aGUgb2JqZWN0IGlzIG1lYW50IHRvIGJlIHNldCBhcyBkYXRhXHJcbiAgICAgICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwib2JqZWN0XCIgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICBjdXJEYXRhID0galF1ZXJ5Lmhhc0RhdGEoZWxlbSkgJiYgb2xkRGF0YS5jYWxsKHRoaXMsIGVsZW0pO1xyXG4gICAgICAgICAgICB2YXIgc2FtZUtleXMgPSB7fTtcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09IGpRdWVyeS5jYW1lbENhc2Uoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmRhdGEoKSBhbHdheXMgc2V0cy9nZXRzIGNhbWVsQ2FzZWQgbmFtZXM6IFwiICsga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJEYXRhW2tleV0gPSBuYW1lW2tleV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVLZXlzW2tleV0gPSBuYW1lW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG9sZERhdGEuY2FsbCh0aGlzLCBlbGVtLCBzYW1lS2V5cyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBuYW1lIGlzIHRyYW5zZm9ybWVkLCBsb29rIGZvciB0aGUgdW4tdHJhbnNmb3JtZWQgbmFtZSBpbiB0aGUgZGF0YSBvYmplY3RcclxuICAgICAgICBpZiAobmFtZSAmJiB0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBuYW1lICE9PSBqUXVlcnkuY2FtZWxDYXNlKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIGN1ckRhdGEgPSBqUXVlcnkuaGFzRGF0YShlbGVtKSAmJiBvbGREYXRhLmNhbGwodGhpcywgZWxlbSk7XHJcbiAgICAgICAgICAgIGlmIChjdXJEYXRhICYmIG5hbWUgaW4gY3VyRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZGF0YSgpIGFsd2F5cyBzZXRzL2dldHMgY2FtZWxDYXNlZCBuYW1lczogXCIgKyBuYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckRhdGFbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJEYXRhW25hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkVHdlZW5SdW4gPSBqUXVlcnkuVHdlZW4ucHJvdG90eXBlLnJ1bjtcclxuXHJcbiAgICBqUXVlcnkuVHdlZW4ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoalF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ10ubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcclxuICAgICAgICAgICAgICAgIFwiZWFzaW5nIGZ1bmN0aW9uIFwiICtcclxuICAgICAgICAgICAgICAgIFwiXFxcImpRdWVyeS5lYXNpbmcuXCIgKyB0aGlzLmVhc2luZy50b1N0cmluZygpICtcclxuICAgICAgICAgICAgICAgIFwiXFxcIiBzaG91bGQgdXNlIG9ubHkgZmlyc3QgYXJndW1lbnRcIlxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9sZEVhc2luZyA9IGpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddO1xyXG4gICAgICAgICAgICBqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXSA9IGZ1bmN0aW9uIChwZXJjZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkRWFzaW5nLmNhbGwoalF1ZXJ5LmVhc2luZywgcGVyY2VudCwgcGVyY2VudCwgMCwgMSwgMSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9sZFR3ZWVuUnVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5meC5pbnRlcnZhbCA9IGpRdWVyeS5meC5pbnRlcnZhbCB8fCAxMztcclxuXHJcbiAgICAvLyBTdXBwb3J0OiBJRTksIEFuZHJvaWQgPD00LjRcclxuICAgIC8vIEF2b2lkIGZhbHNlIHBvc2l0aXZlcyBvbiBicm93c2VycyB0aGF0IGxhY2sgckFGXHJcbiAgICBpZiAod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZngsIFwiaW50ZXJ2YWxcIiwgalF1ZXJ5LmZ4LmludGVydmFsLFxyXG4gICAgICAgICAgICBcImpRdWVyeS5meC5pbnRlcnZhbCBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBvbGRMb2FkID0galF1ZXJ5LmZuLmxvYWQsXHJcbiAgICAgICAgb2xkRXZlbnRBZGQgPSBqUXVlcnkuZXZlbnQuYWRkLFxyXG4gICAgICAgIG9yaWdpbmFsRml4ID0galF1ZXJ5LmV2ZW50LmZpeDtcclxuXHJcbiAgICBqUXVlcnkuZXZlbnQucHJvcHMgPSBbXTtcclxuICAgIGpRdWVyeS5ldmVudC5maXhIb29rcyA9IHt9O1xyXG5cclxuICAgIG1pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXZlbnQucHJvcHMsIFwiY29uY2F0XCIsIGpRdWVyeS5ldmVudC5wcm9wcy5jb25jYXQsXHJcbiAgICAgICAgXCJqUXVlcnkuZXZlbnQucHJvcHMuY29uY2F0KCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuXHJcbiAgICBqUXVlcnkuZXZlbnQuZml4ID0gZnVuY3Rpb24gKG9yaWdpbmFsRXZlbnQpIHtcclxuICAgICAgICB2YXIgZXZlbnQsXHJcbiAgICAgICAgICAgIHR5cGUgPSBvcmlnaW5hbEV2ZW50LnR5cGUsXHJcbiAgICAgICAgICAgIGZpeEhvb2sgPSB0aGlzLmZpeEhvb2tzW3R5cGVdLFxyXG4gICAgICAgICAgICBwcm9wcyA9IGpRdWVyeS5ldmVudC5wcm9wcztcclxuXHJcbiAgICAgICAgaWYgKHByb3BzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5ldmVudC5wcm9wcyBhcmUgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZDogXCIgKyBwcm9wcy5qb2luKCkpO1xyXG4gICAgICAgICAgICB3aGlsZSAocHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkUHJvcChwcm9wcy5wb3AoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaXhIb29rICYmICFmaXhIb29rLl9taWdyYXRlZF8pIHtcclxuICAgICAgICAgICAgZml4SG9vay5fbWlncmF0ZWRfID0gdHJ1ZTtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZXZlbnQuZml4SG9va3MgYXJlIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgIGlmICgocHJvcHMgPSBmaXhIb29rLnByb3BzKSAmJiBwcm9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChwcm9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkUHJvcChwcm9wcy5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV2ZW50ID0gb3JpZ2luYWxGaXguY2FsbCh0aGlzLCBvcmlnaW5hbEV2ZW50KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZpeEhvb2sgJiYgZml4SG9vay5maWx0ZXIgPyBmaXhIb29rLmZpbHRlcihldmVudCwgb3JpZ2luYWxFdmVudCkgOiBldmVudDtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LmFkZCA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlcykge1xyXG4gICAgICAgIC8vIFRoaXMgbWlzc2VzIHRoZSBtdWx0aXBsZS10eXBlcyBjYXNlIGJ1dCB0aGF0IHNlZW1zIGF3ZnVsbHkgcmFyZVxyXG4gICAgICAgIGlmIChlbGVtID09PSB3aW5kb3cgJiYgdHlwZXMgPT09IFwibG9hZFwiICYmIHdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkod2luZG93KS5vbignbG9hZCcuLi4pIGNhbGxlZCBhZnRlciBsb2FkIGV2ZW50IG9jY3VycmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRXZlbnRBZGQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmVhY2goW1wibG9hZFwiLCBcInVubG9hZFwiLCBcImVycm9yXCJdLCBmdW5jdGlvbiAoXywgbmFtZSkge1xyXG5cclxuICAgICAgICBqUXVlcnkuZm5bbmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYW4gYWpheCBsb2FkKCkgdGhlIGZpcnN0IGFyZyBzaG91bGQgYmUgdGhlIHN0cmluZyBVUkw7XHJcbiAgICAgICAgICAgIC8vIHRlY2huaWNhbGx5IHRoaXMgY291bGQgYWxzbyBiZSB0aGUgXCJBbnl0aGluZ1wiIGFyZyBvZiB0aGUgZXZlbnQgLmxvYWQoKVxyXG4gICAgICAgICAgICAvLyB3aGljaCBqdXN0IGdvZXMgdG8gc2hvdyB3aHkgdGhpcyBkdW1iIHNpZ25hdHVyZSBoYXMgYmVlbiBkZXByZWNhdGVkIVxyXG4gICAgICAgICAgICAvLyBqUXVlcnkgY3VzdG9tIGJ1aWxkcyB0aGF0IGV4Y2x1ZGUgdGhlIEFqYXggbW9kdWxlIGp1c3RpZmlhYmx5IGRpZSBoZXJlLlxyXG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJsb2FkXCIgJiYgdHlwZW9mIGFyZ3NbMF0gPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvbGRMb2FkLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5cIiArIG5hbWUgKyBcIigpIGlzIGRlcHJlY2F0ZWRcIik7XHJcblxyXG4gICAgICAgICAgICBhcmdzLnNwbGljZSgwLCAwLCBuYW1lKTtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9uLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVc2UgLnRyaWdnZXJIYW5kbGVyIGhlcmUgYmVjYXVzZTpcclxuICAgICAgICAgICAgLy8gLSBsb2FkIGFuZCB1bmxvYWQgZXZlbnRzIGRvbid0IG5lZWQgdG8gYnViYmxlLCBvbmx5IGFwcGxpZWQgdG8gd2luZG93IG9yIGltYWdlXHJcbiAgICAgICAgICAgIC8vIC0gZXJyb3IgZXZlbnQgc2hvdWxkIG5vdCBidWJibGUgdG8gd2luZG93LCBhbHRob3VnaCBpdCBkb2VzIHByZS0xLjdcclxuICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExODIwXHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVHJpZ2dlciBcInJlYWR5XCIgZXZlbnQgb25seSBvbmNlLCBvbiBkb2N1bWVudCByZWFkeVxyXG4gICAgalF1ZXJ5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBqUXVlcnkod2luZG93LmRvY3VtZW50KS50cmlnZ2VySGFuZGxlcihcInJlYWR5XCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LnNwZWNpYWwucmVhZHkgPSB7XHJcbiAgICAgICAgc2V0dXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMgPT09IHdpbmRvdy5kb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCIncmVhZHknIGV2ZW50IGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xyXG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uICh0eXBlcywgZGF0YSwgZm4pIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uYmluZCgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKHR5cGVzLCBudWxsLCBkYXRhLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bmJpbmQ6IGZ1bmN0aW9uICh0eXBlcywgZm4pIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4udW5iaW5kKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2ZmKHR5cGVzLCBudWxsLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZWxlZ2F0ZTogZnVuY3Rpb24gKHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4pIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uZGVsZWdhdGUoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbih0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVuZGVsZWdhdGU6IGZ1bmN0aW9uIChzZWxlY3RvciwgdHlwZXMsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnVuZGVsZWdhdGUoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZihzZWxlY3RvciwgXCIqKlwiKSA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZih0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHZhciBvbGRPZmZzZXQgPSBqUXVlcnkuZm4ub2Zmc2V0O1xyXG5cclxuICAgIGpRdWVyeS5mbi5vZmZzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRvY0VsZW0sXHJcbiAgICAgICAgICAgIGVsZW0gPSB0aGlzWzBdLFxyXG4gICAgICAgICAgICBvcmlnaW4gPSB7IHRvcDogMCwgbGVmdDogMCB9O1xyXG5cclxuICAgICAgICBpZiAoIWVsZW0gfHwgIWVsZW0ubm9kZVR5cGUpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4ub2Zmc2V0KCkgcmVxdWlyZXMgYSB2YWxpZCBET00gZWxlbWVudFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvY0VsZW0gPSAoZWxlbS5vd25lckRvY3VtZW50IHx8IHdpbmRvdy5kb2N1bWVudCkuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgICAgIGlmICghalF1ZXJ5LmNvbnRhaW5zKGRvY0VsZW0sIGVsZW0pKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLm9mZnNldCgpIHJlcXVpcmVzIGFuIGVsZW1lbnQgY29ubmVjdGVkIHRvIGEgZG9jdW1lbnRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkT2Zmc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgb2xkUGFyYW0gPSBqUXVlcnkucGFyYW07XHJcblxyXG4gICAgalF1ZXJ5LnBhcmFtID0gZnVuY3Rpb24gKGRhdGEsIHRyYWRpdGlvbmFsKSB7XHJcbiAgICAgICAgdmFyIGFqYXhUcmFkaXRpb25hbCA9IGpRdWVyeS5hamF4U2V0dGluZ3MgJiYgalF1ZXJ5LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDtcclxuXHJcbiAgICAgICAgaWYgKHRyYWRpdGlvbmFsID09PSB1bmRlZmluZWQgJiYgYWpheFRyYWRpdGlvbmFsKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LnBhcmFtKCkgbm8gbG9uZ2VyIHVzZXMgalF1ZXJ5LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbFwiKTtcclxuICAgICAgICAgICAgdHJhZGl0aW9uYWwgPSBhamF4VHJhZGl0aW9uYWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkUGFyYW0uY2FsbCh0aGlzLCBkYXRhLCB0cmFkaXRpb25hbCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBvbGRTZWxmID0galF1ZXJ5LmZuLmFuZFNlbGYgfHwgalF1ZXJ5LmZuLmFkZEJhY2s7XHJcblxyXG4gICAgalF1ZXJ5LmZuLmFuZFNlbGYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uYW5kU2VsZigpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQsIHVzZSBqUXVlcnkuZm4uYWRkQmFjaygpXCIpO1xyXG4gICAgICAgIHJldHVybiBvbGRTZWxmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgb2xkRGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQsXHJcbiAgICAgICAgdHVwbGVzID0gW1xyXG4gICAgICAgICAgICAvLyBBY3Rpb24sIGFkZCBsaXN0ZW5lciwgY2FsbGJhY2tzLCAudGhlbiBoYW5kbGVycywgZmluYWwgc3RhdGVcclxuICAgICAgICAgICAgW1wicmVzb2x2ZVwiLCBcImRvbmVcIiwgalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCBcInJlc29sdmVkXCJdLFxyXG4gICAgICAgICAgICBbXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiXSxcclxuICAgICAgICAgICAgW1wibm90aWZ5XCIsIFwicHJvZ3Jlc3NcIiwgalF1ZXJ5LkNhbGxiYWNrcyhcIm1lbW9yeVwiKSxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5DYWxsYmFja3MoXCJtZW1vcnlcIildXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICBqUXVlcnkuRGVmZXJyZWQgPSBmdW5jdGlvbiAoZnVuYykge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG9sZERlZmVycmVkKCksXHJcbiAgICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblxyXG4gICAgICAgIGRlZmVycmVkLnBpcGUgPSBwcm9taXNlLnBpcGUgPSBmdW5jdGlvbiAoIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovKSB7XHJcbiAgICAgICAgICAgIHZhciBmbnMgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImRlZmVycmVkLnBpcGUoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiAobmV3RGVmZXIpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKHR1cGxlcywgZnVuY3Rpb24gKGksIHR1cGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0galF1ZXJ5LmlzRnVuY3Rpb24oZm5zW2ldKSAmJiBmbnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmVycmVkLmRvbmUoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVzb2x2ZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmVycmVkLmZhaWwoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVqZWN0IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVmZXJyZWQucHJvZ3Jlc3MoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIubm90aWZ5IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRbdHVwbGVbMV1dKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVybmVkICYmIGpRdWVyeS5pc0Z1bmN0aW9uKHJldHVybmVkLnByb21pc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lZC5wcm9taXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZG9uZShuZXdEZWZlci5yZXNvbHZlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKG5ld0RlZmVyLnJlamVjdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHJvZ3Jlc3MobmV3RGVmZXIubm90aWZ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RlZmVyW3R1cGxlWzBdICsgXCJXaXRoXCJdKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuID8gW3JldHVybmVkXSA6IGFyZ3VtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBmbnMgPSBudWxsO1xyXG4gICAgICAgICAgICB9KS5wcm9taXNlKCk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChmdW5jKSB7XHJcbiAgICAgICAgICAgIGZ1bmMuY2FsbChkZWZlcnJlZCwgZGVmZXJyZWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgcmV0dXJuIGpRdWVyeTtcclxufSk7XHJcblxufS5jYWxsKHdpbmRvdykpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5LW1pZ3JhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzVfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJqUXVlcnlcIixcImNvbW1vbmpzXCI6XCJqcXVlcnlcIixcImNvbW1vbmpzMlwiOlwianF1ZXJ5XCIsXCJhbWRcIjpcImpxdWVyeVwifVxuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9ICJdfQ=="]}