{"version":3,"sources":["dist/cdp.framework.jqm.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","doc","$","mobile","apply","undefined","jQuery","document","window","uuid","runiqueId","ui","extend","version","keyCode","BACKSPACE","COMMA","DELETE","DOWN","END","ENTER","ESCAPE","HOME","LEFT","PAGE_DOWN","PAGE_UP","PERIOD","RIGHT","SPACE","TAB","UP","fn","focus","orig","delay","each","elem","setTimeout","arguments","scrollParent","ie","test","css","parents","filter","eq","length","ownerDocument","uniqueId","id","removeUniqueId","removeAttr","focusable","element","isTabIndexNotNaN","map","mapName","img","nodeName","toLowerCase","parentNode","href","visible","disabled","expr","filters","addBack","data","createPseudo","dataName","match","isNaN","attr","tabbable","tabIndex","isTabIndexNaN","outerWidth","jquery","side","type","innerWidth","innerHeight","outerHeight","reduce","size","border","margin","parseFloat","selector","add","prevObject","removeData","key","camelCase","exec","navigator","userAgent","support","selectstart","createElement","disableSelection","bind","event","preventDefault","enableSelection","unbind","zIndex","position","value","parseInt","parent","plugin","option","set","proto","plugins","push","instance","args","allowDisconnected","nodeType","options","compensateToolbars","page","desiredHeight","pageParent","toolbarsAffectingHeight","noPadders","theElement","widgetOptions","toolbar","ns","updatePagePadding","externalHeaders","children","internalHeaders","externalFooters","internalFooters","concat","toArray","index","Math","max","behaviors","silentScroll","ypos","defaultHomeScroll","special","scrollstart","enabled","scrollTo","trigger","x","y","getClosestBaseUrl","ele","url","closest","jqmData","base","path","documentBase","hrefNoHash","dynamicBaseEnabled","isPath","makeUrlAbsolute","removeActiveLinkClass","forceRemoval","activeClickedLink","activePageClass","removeClass","activeBtnClass","getInheritedTheme","el","defaultTheme","e","ltr","re","className","enhanceable","elements","haveParents","hijackable","ignoreContentEnabled","count","$newSet","$element","excluded","getAttribute","getScreenHeight","height","resetActivePageHeight","pageHeight","pageOuterHeight","loading","loader","_widget","defaultHtml","returnValue","addDependents","newDependents","$elem","dependents","removeWithDependents","enhanceWithin","widgetElements","keepNative","keepNativeSelector","that","nojs","links","degradeInputsWithin","buttonMarkup","find","initSelector","not","jqmEnhanceable","fieldcontain","widgets","constructor","widgetName","getEncodedText","text","html","jqmHijackable","nativeElement","remove","matches","matchesSelector","node","subPageUrlKey","hideUrlBar","focusClass","ajaxEnabled","hashListeningEnabled","linkBindingEnabled","defaultPageTransition","maxTransitionWidth","minScrollBack","defaultDialogTransition","pageLoadErrorMessage","pageLoadErrorMessageTheme","phonegapNavigationEnabled","autoInitializePage","pushStateEnabled","hoverDelay","pageContainer","allowCrossDomainPages","dialogHashKey","slice","Array","_cleanData","cleanData","elems","triggerHandler","widget","fullName","existingConstructor","basePrototype","proxiedPrototype","namespace","split","Widget","_createWidget","_proto","_childConstructors","prop","isFunction","_super","_superApply","__super","__superApply","widgetEventPrefix","widgetFullName","child","childPrototype","bridge","target","input","inputIndex","inputLength","isPlainObject","isMethodCall","methodValue","error","charAt","pushStack","_init","defaultElement","create","eventNamespace","_getCreateOptions","bindings","hoverable","_on","destroy","style","defaultView","parentWindow","_create","_trigger","_getCreateEventData","noop","_destroy","parts","curOption","shift","pop","_setOptions","_setOption","toggleClass","enable","disable","suppressDisabledCheck","handlers","delegateElement","handler","handlerProxy","hasClass","guid","eventName","delegate","_off","join","undelegate","_delay","_hoverable","mouseenter","currentTarget","addClass","mouseleave","_focusable","focusin","focusout","callback","Event","originalEvent","isDefaultPrevented","show","hide","method","defaultEffect","effect","hasOptions","effectName","duration","isEmptyObject","complete","effects","easing","queue","next","nsNormalizeDict","oldFind","rbrace","jqmDataRE","JSON","parse","err","nsNormalize","closestPageData","$target","result","jqmRemoveData","context","ret","extra","indexOf","replace","rcapitals","replaceFunction","loaderClass","$html","theme","textVisible","fakeFixLoader","activeBtn","first","top","scrollTop","offset","checkLoaderPosition","screenHeight","proxy","resetHtml","msgText","textonly","message","loadSettings","appendTo","pagecontainer","str_hashchange","fake_onhashchange","doc_mode","documentMode","supports_onhashchange","get_fragment","location","setup","start","teardown","stop","self","timeout_id","last_hash","fn_retval","val","history_set","history_get","poll","clearTimeout","hash","history_hash","attachEvent","addEventListener","iframe","iframe_src","src","one","insertAfter","contentWindow","onpropertychange","propertyName","title","iframe_doc","domain","open","write","close","matchMedia","bool","docElem","documentElement","refNode","firstElementChild","firstChild","fakeBody","div","cssText","background","appendChild","q","innerHTML","insertBefore","offsetWidth","removeChild","media","touch","orientation","propExists","uc_prop","toUpperCase","substr","props","vendors","v","fbCSS","prependTo","webos","operamini","toString","bb","blackberry","nokiaLTE7_3","inlineSVG","w","svg","createElementNS","createSVGRect","opera","Image","onerror","onload","width","transform3dTest","mqProp","transforms","t","MozTransform","transform","append","getComputedStyle","getPropertyValue","baseTagTest","fauxBase","protocol","host","pathname","fauxEle","link","rebase","cssPointerEventsTest","supports","pointerEvents","boundingRect","getBoundingClientRect","browser","oldIE","a","all","fixedPosition","ua","platform","wkmatch","wkversion","ffmatch","ffversion","operammobilematch","omversion","pushState","history","search","mediaquery","cssPseudoElement","touchOverflow","cssTransform3d","boxShadow","dynamicBaseTag","cssPointerEvents","gradeA","ajaxBlacklist","WebKitPoint","$win","dummyFnToInitNavigate","beforenavigate","on","off","navigate","bound","originalEventName","isPushStateEnabled","isHashChangeEnabled","popstate","newEvent","beforeNavigate","state","historyState","hashchange","hashchangeState","$base","uiStateKey","urlParseRE","getLocation","parsedUrl","parseUrl","uri","doubleSlash","substring","getDocumentUrl","asParsedObject","documentUrl","parseLocation","hrefNoSearch","authority","username","password","hostname","port","directory","filename","makePathAbsolute","relPath","absPath","absStack","relStack","isSameDomain","absUrl1","absUrl2","isRelativeUrl","isAbsoluteUrl","relUrl","absUrl","relObj","absObj","hasPath","addSearchParams","params","u","param","convertUrlToDataUrl","isEmbeddedPage","decodeURIComponent","newPath","stripHash","clean","stripQueryParams","cleanHash","isHashValid","isExternal","hasProtocol","documentBaseDiffers","squash","resolutionUrl","cleanedUrl","stateIndex","docUrl","preservedHash","uiState","isPreservableHash","hashToSelector","hasHash","getFilePath","isFirstPageUrl","samePath","fp","firstPage","fpId","isPermittedCrossDomainRequest","reqUrl","getDocumentBase","History","stack","activeIndex","getActive","getLast","previousIndex","getNext","getPrev","clearForward","earlyReturn","entry","direct","opts","newActiveIndex","present","back","forward","missing","initialHref","Navigator","ignoreInitialHashChange","popstate.history","hashchange.history","replaceState","parsed","loc","resolved","go","noEvents","popstateEvent","isPopStateEvent","preventNextHashChange","preventHashAssignPopState","ignorePopState","stopImmediatePropagation","historyEntry","direction","animation","transition","testElement","vendorPrefixes","testName","j","prefix","cssTransitions","cssAnimations","animationComplete","fallbackTime","timer","eventBinding","animationType","defaultDuration","dataPropertyName","touchTargetPropertyName","virtualEventNames","touchEventProps","mouseHookProps","mouseHooks","mouseEventProps","activeDocHandlers","resetTimerID","startX","startY","didScroll","clickBlockList","blockMouseTriggers","blockTouchTriggers","eventCaptureSupported","$document","nextTouchID","lastTouchID","threshold","vmouse","moveDistanceThreshold","clickDistanceThreshold","resetTimerDuration","getNativeEvent","createVirtualEvent","eventType","oe","ne","ct","len","which","touches","changedTouches","getVirtualBindingFlags","flags","b","k","hasVirtualBinding","getClosestElementWithVirtualBinding","enableTouchBindings","disableTouchBindings","enableMouseBindings","disableMouseBindings","startResetTimer","clearResetTimer","triggerVirtualEvent","ve","mouseEventCallback","touchID","isPropagationStopped","stopPropagation","isImmediatePropagationStopped","handleTouchStart","pageX","pageY","handleScroll","handleTouchMove","didCancel","moveThreshold","abs","handleTouchEnd","clientX","clientY","hasVirtualBindings","dummyMouseHandler","getSpecialEventObject","realType","$this","cnt","supportTouch","scrollEvent","touchStartEvent","touchStopEvent","touchMoveEvent","attrFn","triggerCustomEvent","obj","bubble","originalType","dispatch","thisObject","scrolling","tap","tapholdThreshold","emitTapOnTaphold","isTaphold","origTarget","clearTapTimer","clearTapHandlers","clickHandler","swipe","scrollSupressionThreshold","durationThreshold","horizontalDistanceThreshold","verticalDistanceThreshold","winPageX","pageXOffset","winPageY","pageYOffset","floor","time","Date","getTime","coords","origin","handleSwipe","swipestart","swipestop","eventInProgress","events","emitted","move","scrollstop","taphold","swipeleft","swiperight","sourceEvent","throttledresize","throttle","curr","diff","lastCall","heldCall","win","event_name","get_orientation","last_orientation","initial_orientation_is_landscape","initial_orientation_is_default","portrait_map","0","180","ww","wh","landscape_threshold","-90","90","orientationchange","handleObj","old_handler","isPortrait","clientWidth","clientHeight","baseElement","linkSelector","rewrite","thisAttr","is","theLocation","thisUrl","reset","originalWidget","keepNativeFactoryDefault","domCache","keepNativeDefault","contentTheme","enhanced","_enhance","pagebeforehide","pagebeforeshow","dialog","attrPrefix","role","bindRemove","samePage","prEvent","_handlePageBeforeShow","setContainerBackground","removeContainerBackground","trim","globalValue","optionValue","newDefault","oldDefault","setLastScrollEnabled","pagechange","_disableRecordScroll","_enableRecordScroll","_afterContentChange","_recordScroll","active","_getActiveHistory","currentScroll","minScroll","defaultScroll","_getScroll","_getMinScroll","_getDefaultScroll","lastScroll","_delayedRecordScroll","_filterNavigateEvents","_getHash","_handleNavigate","getActivePage","activePage","_getInitialContent","_getHistory","_getDocumentBase","steps","change","changeHash","fromHashChange","_handleDestination","to","_transitionFromHistory","defaultTransition","_handleDialog","changePageOptions","activeContent","pageUrl","reverse","_changeContent","changePage","_getBase","_getNs","content","_include","settings","_find","fileUrl","_createFileUrl","dataUrl","_createDataUrl","initialContent","_getLoader","_showLoading","msg","_loadMsg","_hideLoading","_showError","_parse","_setLoadedTitle","newPageTitle","RegExp","$1","_isRewritableBaseTag","absoluteUrl","_triggerWithDeprecated","deprecatedEvent","_loadSuccess","triggerData","deferred","textStatus","xhr","pageElemRegex","dataUrlRegex","encodeURIComponent","prefetch","toPage","showLoadMsg","resolve","_loadDefaults","reloadPage","reload","loadMsgDelay","load","Deferred","reloadOptionExtension","_findBaseWithDefault","pblEvent","reject","promise","prevPage","fromPage","ajax","contentType","dataType","success","_loadError","errorThrown","plfEvent","_getTransitionHandler","_maybeDegradeTransition","transitionHandlers","defaultTransitionHandler","_triggerCssTransitionEvents","from","nextPage","_cssTransition","TransitionHandler","done","_releaseTransitionLock","isPageTransitioning","pageTransitionQueue","_removeActiveLinkClass","force","_loadUrl","fail","_triggerPageBeforeChange","returnEvents","unshift","defaults","activeIsInitialPage","historyDir","pageTitle","isDialog","alreadyThere","cssTransitionDeferred","beforeTransition","allowSamePageTransition","activeElement","blur","encodeURI","$to","$from","alreadyFocused","duplicateCachedPage","focusPage","closestBase","navreadyDeferred","domreadyDeferred","loadDeferred","pageIsFullyLoaded","$lastVClicked","findClosestLink","loadPage","container","nav","app","backHistory","autofocus","_registerInternalEvents","getAjaxFormData","$form","calculateOnly","formData","vclickedName","serializeArray","form","$btn","btnEls","needClosest","outer","$link","httpCleanup","baseUrl","useDefaultUrlHandling","urls","inArray","readyState","when","Transition","init","toPreClass","cleanFrom","beforeDoneIn","beforeDoneOut","beforeStartOut","doneIn","toggleViewportClass","toScroll","scrollPage","sequential","doneOut","reverseClass","none","preventFocus","startIn","hideIn","startOut","maxTransitionOverride","getMaxScrollForTransition","SerialTransition","ConcurrentTransition","defaultGetMaxScrollForTransition","simultaneous","transitionFallbacks","flip","flow","slide","slidedown","slidefade","slideup","turn","degradeInputs","color","date","datetime","datetime-local","email","month","number","range","tel","week","optType","hasType","findstr","repstr","clone","replaceWith","closeBtn","closeBtnText","overlayTheme","corners","_inner","_headerCloseButton","_setCloseBtn","wrapInner","class","closeButtonLocation","closeButtonText","currentOpts","dst","btn","_isCloseable","_handlePageBeforeHide","_handleVClickSubmit","attrs","vclick","submit","click","hist","rInitialLetter","iconposClass","iconpos","expandCueText","collapseCueText","collapsed","heading","collapsedIcon","expandedIcon","inset","mini","accordion","collapsibleset","_ui","_renderedOptions","_getOptions","anchor","status","_handleExpandCollapse","accordionWidget","collapsible","_themeClassFromOption","iconclass","contentThemeClass","originalHeading","placeholder","detach","refresh","_applyOptions","isCollapsed","newTheme","oldTheme","hasCorners","hasIcon","isCollapse","expand","collapse","contents","unwrap","uiScreenHiddenRegex","noHiddenClass","addFirstLastClasses","_getVisibles","$els","visibles","_addFirstLastClasses","$visibles","end","last","_removeFirstLastClasses","childCollapsiblesSelector","_handleCollapsibleExpand","closestCollapsible","siblings","_classes","collapsibleexpand","_refresh","themeClass","collapsiblesInSet","grid","$kids","gridCols","solo","iterator","letter","$navbar","$navbtns","icon","classes","getAttr","countTheme","dividerTheme","splitIcon","splitTheme","shadow","listviewClasses","_findFirstElementByTagName","nextProp","lcName","ucName","dict","_addThumbClasses","containers","_getChildrenByTagName","results","nextSibling","_beforeListviewRefresh","_afterListviewRefresh","buttonClass","pos","numli","item","itemClass","itemTheme","itemIcon","isDivider","startCount","newStartCount","splittheme","splitThemeClass","spliticon","altButtonClass","li","$list","ol","itemClassDict","countBubbles","countThemeClass","empty","defaultAutodividersSelector","elt","listview","autodividers","autodividersSelector","_replaceDividers","lis","dividerText","lastDividerText","list","divider","createTextNode","setAttribute","rdivider","rhidden","hideDividers","items","idx","hideDivider","formReset","_handleFormReset","escapeId","wrapperClass","inheritAttr","dataAttr","label","isParent","_findLabel","inputtype","checkedClass","uncheckedClass","labelIsParent","vmouseover","vmousedown","parentLabel","labelsList","labels","contains","getElementsByTagName","wrapAll","_wrapper","wrap","prepend","_handleInputFocus","_handleInputBlur","_handleInputVClick","_getInputSet","_updateAll","_handleLabelVMouseOver","_handleLabelVClick","_cacheVals","checked","formId","radio","radios","changeTriggered","checkboxradio","_reset","_hasIcon","controlgroup","controlgroupWidget","controlgroupConstructor","isChecked","addClasses","removeClasses","currentOptions","iconshadow","inline","wrapper","_button","iconClasses","_getIconClasses","originalElement","isDisabled","meta","disabledZoom","enabledZoom","disabledInitially","zoom","locked","lock","unlock","restore","preventFocusZoom","isSearch","isTextarea","tagName","isRange","inputNeedsWrap","_classesFromOptions","_autoCorrect","setOptions","elementClasses","_wrap","autocorrect","_handleBlur","_handleFocus","trackTheme","highlight","control","trackThemeClass","cornerClass","miniClass","cType","isToggleSwitch","isRangeslider","selectClass","controlID","$label","labelID","min","step","domHandle","handle","domSlider","slider","valuebg","bg","optionsCount","origTabIndex","activeClass","sliderImg","aria-valuemin","aria-valuemax","aria-valuenow","_value","aria-valuetext","aria-labelledby","dragging","beforeStart","userModified","mouseMoved","childNodes","_labels","keyup","vmouseup","_sliderVMouseDown","vmousemove","keydown","_setTheme","_setTrackTheme","_setCorners","_setMini","_setHighlight","_setDisabled","_controlChange","_controlKeyup","_controlBlur","_controlVMouseUp","_checkedRefresh","_handleVMouseDown","_handleKeydown","_keySliding","_handleKeyup","selectedIndex","_sliderVMouseUp","_preventDocumentDrag","isfromControl","preventInputUpdate","parentTheme","left","tol","pxStep","percent","isInput","optionElements","newval","valModStep","alignValue","percentPerStep","handlePercent","aPercent","bPercent","valueChanged","round","toFixed","ab","currentTheme","currentTrackTheme","newTrackTheme","popup","getPopup","popupEnabled","showValue","_currentValue","_popup","_popupVisible","_positionPopup","dstOffset","newValue","_showPopup","_hidePopup","onText","offText","flipswitch","_originalTabIndex","_left","_right","after","existingDirection","_toggle","_keydown","$el","elClass","_inputFirst","_inputLast","_label","_sliderWidgetFirst","_sliderWidgetLast","_sliderFirst","_sliderLast","firstHandle","_sliders","_targetVal","_sliderTarget","_proxy","slidebeforestart","slidestop","slidedrag","slidebeforechange","mousedown","_handleReset","_updateHighlight","_dragFirstHandle","_slidedrag","otherSlider","_slidestop","_slidebeforestart","_change","thisSlider","margin-left","textinput","clearBtn","clearBtnText","_addClearBtn","clearButton","_clearBtnClick","_clearBtn","_enhanceClear","_bindClearEvents","_toggleClear","cut","paste","_unbindClear","_destroyClear","_toggleClearClass","autogrow","keyupTimeoutBuffer","_autogrow","pageshow","popupbeforeposition","updatelayout","panelopen","_handleShow","_prepareHeightUpdate","_unbindAutogrow","keyupTimeout","_updateHeight","_timeout","paddingTop","paddingBottom","paddingHeight","scrollHeight","borderTop","borderBottom","borderHeight","min-height","max-height","hidePlaceholderMenuItems","closeText","nativeMenu","button","_focusButton","_selectOptions","select","_preExtension","selectId","buttonId","isMultiple","multiple","setButtonText","buttonCount","build","selected","selectedIndices","span","setButtonCount","_refreshButton","idref","fitSegmentInsideSegment","windowSize","segmentSize","desired","getWindowCoordinates","theWindow","scrollLeft","cx","cy","positionTo","tolerance","closeLinkSelector","closeLinkEvents","navigateEvents","closeEvents","dismissible","_handleDocumentVmousedown","theEvent","_isOpen","_ignoreResizeEvents","myId","_scrollTop","_page","_fallbackTransition","_currentTransition","_prerequisites","_tolerance","_resizeData","_ignoreResizeTo","_orientationchangeInProgress","screen","prev","getElementById","_applyTransition","_setTolerance","focusElement","resize","fragment","createDocumentFragment","_eatEventAndClose","_resizeScreen","popupHeight","documentHeight","_handleWindowKeyUp","_expectResizeEvent","windowCoordinates","timeoutId","_resizeTimeout","reposition","_stopIgnoringResizeEvents","_handleWindowResize","_handleWindowOrientationchange","_handleDocumentFocusIn","targetElement","_safelyBlur","newOptions","r","ar","String","_clampPopupWidth","infoOnly","menuSize","rectangle","rc","_calculateFinalLocation","clampInfo","_placementCoords","_createPrerequisites","screenPrerequisite","containerPrerequisite","whenDone","prerequisites","then","_animate","classToRemove","screenClassToAdd","applyTransition","containerClassToAdd","_desiredCoords","openOptions","pTo","_reposition","currentElement","_openPrerequisitesComplete","firstFocus","_open","androidBlacklist","androidmatch","andversion","chromematch","additionalCondition","_closePrerequisiteScreen","_closePrerequisiteContainer","_closePrerequisitesDone","_close","immediate","_unenhance","_closePopup","parsedDst","toUrl","_myUrl","_bindContainerClose","hashkey","currentIsDialog","urlHistory","urlAltered","handleLink","unfocusableItemSelector","goToAdjacentItem","adjacent","selectmenu","_handleSelectFocus","_handleButtonVclickKeydown","isOpen","_decideFormat","menuType","popupId","dialogId","_handleListFocus","tabindex","_handleListKeydown","_handleMenuPageHide","_delayedTrigger","thisPage","_handleHeaderCloseClick","_handleListItemClick","listItem","oldIndex","newIndex","_triggerChange","menuId","themeAttr","overlayThemeAttr","dividerThemeAttr","menuPage","listbox","header","headerTitle","menuPageContent","menuPageClose","headerClose","_origTabIndex","click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)","pagehide","popupafterclose","_popupClosed","_isRebuildRequired","indices","_buildList","_focusMenuItem","$window","selfListParent","menuHeight","btnOffset","popupafteropen","needPlaceholder","dataIcon","$options","numOptions","dataPrefix","dataIndexAttr","dataIconAttr","dataRoleAttr","dataPlaceholderAttr","isPlaceholderItem","optGroup","$option","optLabel","_removePlaceholderAttr","aria-haspopup","aria-owns","reverseBoolOptionMap","ui-shadow","ui-corner-all","ui-btn-inline","ui-shadow-icon","ui-mini","getAttrFixed","capitalLettersRE","optionsToClasses","existingClasses","classNameToOptions","unknownClass","alreadyEnhanced","noIcon","unknownClasses","camelCase2Hyphenated","overwriteClasses","retrievedOptions","optionKey","excludeInvisible","_childWidgets","_initialRefresh","groupLegend","childWrapper","callRefresh","els","buttons","addBackBtn","backBtnTheme","backBtnText","leftbtn","rightbtn","_updateBackButton","_addHeaderButtonClasses","_setRelative","_addHeadingClasses","_btnMarkup","headerAnchors","backButton","_backButton","attached","aria-level","visibleOnPageShow","disablePageZoom","fullscreen","tapToggle","tapToggleBlacklist","hideDuringFocus","trackPersistentToolbars","supportBlacklist","_makeFixed","_addTransitionClass","_bindPageEvents","_bindToggleHandlers","$page","tclass","webkitAnimationStart","animationstart","_handleAnimationStart","_handlePageShow","thisFooter","thisHeader","nextFooter","nextHeader","_visible","tbPage","_useTransition","notransition","scroll","elHeight","pHeight","viewportHeight","hideClass","outclass","toggle","delayShow","delayHide","isVisible","pageClasses","toolbarClasses","hasFixed","hasFullscreen","_workarounds","os","_bindScrollWorkaround","_bindListThumbWorkaround","_viewportOffset","viewportOffset","_triggerRedraw","ieHack","uiTemplate","getArrow","gd","arEls","arrow","_addArrow","_tryAnArrow","dir","best","desiredForArrow","tip","arFull","dimKey","guideDims","fst","arHalf","oDimKey","menuHalf","offsetFactor","contentBox","arrowOffsetFactor","snd","tipOffset","guideOffset","posProp","posVal","_getPlacementState","clamp","gdOffset","right","bottom","elOffset","bgRef","panel","panelOpen","panelClosed","panelFixed","panelInner","modal","modalOpen","pageWrapper","pageFixedToolbar","pageContentPrefix","animate","display","swipeClose","positionFixed","_closeLink","_parentPage","_modal","_panelInner","_fixedToolbars","parentPage","_openedPage","_getPage","_getPanelInner","_getFixedToolbars","_getWrapper","_addPanelClasses","_bindUpdateLayout","_bindCloseEvents","_bindLinkListeners","_createModal","_bindSwipeEvents","extFixedToolbars","intFixedToolbars","fixedToolbars","_getPosDisplayClasses","_getPanelClasses","panelClasses","_handleCloseClick","click a:jqmData(ajax='false')","_positionPanel","scrollToTop","panelInnerHeight","_unfixPanel","_fixPanel","_bindFixListener","_unbindFixListener","click a","_handleClick","panelId","area","_pageContentOpenClasses","_modalOpenClasses","_openPanel","panelclose","_closePanel","otherPanels","multiplePanels","table","headers","allHeaders","_setHeaders","trs","rebuild","columnCount","mode","columnBtnTheme","columnPopupTheme","columnBtnText","columnBtn","priorityPrefix","columnToggleTable","_menu","_id","_addToggles","_enhanceColToggle","_setupEvents","_setToggleState","change input","menu","keep","inputs","checkboxIndex","cells","priority","_menuInputChange","evt","_unlockCells","menuButton","before","hiddenColumns","checkbox","reflowTable","cellLabels","_updateReflow","colstart","hierarchyClass","iteration","_addLabels","defaultFilterCallback","searchValue","filterReveal","filterCallback","_search","_timer","_setInput","_filterItems","_onKeyUp","lastval","_getFilterableItems","filterItems","_refreshChildWidget","recognizedWidgets","keypress","_onKeyDown","_preventKeyPress","_onKeyPress","refilter","replaceSetOptions","_syncTextInputOptions","rDividerListItem","origDefaultFilterCallback","filterable","filterPlaceholder","filterTheme","createHandlers","_setWidget","_handleCreate","_isSearchInternal","updatePlaceholder","textinputOpts","_refreshingChildWidget","textinputOptions","tabId","rhash","getNextTabId","isLocal","heightStyle","activate","beforeActivate","beforeLoad","running","_processTabs","_initialActive","isArray","unique","tabs","sort","anchors","_findActive","locationHash","tab","_getPanelForTab","_tabKeydown","focusedTab","goingForward","_handlePageNav","activating","_activate","_focusNextTab","ctrlKey","_panelKeydown","altKey","_findNextTab","lastTabIndex","constrain","_setupDisabled","_setupHeightStyle","_tabId","_sanitizeSelector","tablist","aria-selected","panels","aria-expanded","aria-hidden","_getList","anchorId","originalAriaControls","_createPanel","aria-controls","maxHeight","_eventHandler","clickedIsActive","collapsing","toShow","toHide","eventData","oldTab","oldPanel","newTab","newPanel","abort","_show","_hide","_getIndex","num","merge","_ajaxSettings","statusText","response","jqXHR","beforeSend","ajaxSettings","iosorientationfixEnabled","z","aig","checkTilt","accelerationIncludingGravity","hideRenderingClass","initializePage","$pages","hashPage","CDP","Framework","Model","Backbone","Collection","View","Events","RESULT_CODE_BASE","_MODULE_RESULT_CODE_RANGE_CDP","FUNCTION_CODE_RANGE","LOCAL_CODE_BASE","RESULT_CODE","DECLARE_ERROR_CODE","CDP_FRAMEWORK","CORE_API","ROUTER","Platform","majorVersion","ltIE6","ltIE7","querySelectorAll","ltIE8","getElementsByClassName","ltIE9","uniqueID","gtIE10","Trident","Gecko","Presto","global","Blink","chrome","Webkit","Touch","ontouchstart","Mobile","ltAd4_4","EventSource","Pointer","pointerEnabled","MSPoniter","msPointerEnabled","Android","iOS","_vclickPatch","jquery_on","jquery_off","custom_on","types","_","custom_off","_apply_jqm_popup_createPrerequisites","_safeCreatePrerequisites","$mobile","_apply_jqm_popup_handleWindowResize","_safeHandleWindowResize","_mobilePopupPatch","jqueryMajor","jqmVersion","jqmMajor","jqmMiner","Patch","applyBeforeInit","isSupportedVclick","s_vclickEvent","applyAfterInit","Orientation","getOrientation","PORTRAIT","LANDSCAPE","Promise","waitForDeviceReady","cordova","_defaultBackButtonHandler","setBackButtonHandler","oldHandler","TAG","_dfInitialize","initialize","config","getConfig","applyPatch","applyJQueryConfig","applyJQueryMobileConfig","initializeI18N","i18n","always","info","localize","Router","anchorVclick","firstPageTransition","makeErrorInfo","ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED","console","warn","__WEBPACK_AMD_REQUIRE_ARRAY__","catch","ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED","isInitialized","waitForInitialize","_orientationListenerHolder","registerOrientationChangedListener","listener","unregisterOrientationChangedListener","_activePage","setupEventHandlers","oldBackButtonHandler","baseBackButtonHandler","onHardwareBackButton","oldRouteChangeHandler","setBeforeRouteChangeHandler","baseRouteChangeHandler","onBeforeRouteChange","_lastOrientation","setActivePage","getDefaultClickEvent","_pageConstructors","_pageInstances","registerPage","ctor","constructPages","forEach","disposePages","defConfig","ajaxSetup","cache","migrateMute","jquerymobile","transitionHandler","defaultHandler","fallbackResources","_this","keys","$mobile_1","Config","newOrientation","onOrientationChanged","getCurrentDocumentUrl","$activePage","_beforeRouteChange","_defaultBeforeRouteChange","$body","s_router","s_initOptions","s_defaultInitOptions","s_firstChangePage","s_loadUrl","loadUrl","customLoadUrl","onRouteSucceeded","s_back","customJqmBack","opt","bindEvents","register","route","restart","regexp","_routeToRegExp","pushContext","silent","pageConstruct","prevState","started","isRouting","s_lastNavigateInfo","inNavigation","initFirstPageIfNeeded","navOptions","s_defaultNavigateOptions","notifyBeforeRouteChange","calledBeforeRouteChange","backDestination","noHashChange","intent","positiveNavigate","subFlow","operation","startSubFlow","finishSubFlow","fragment_1","getFragment","s_rootContexts","ctx","findWhere","navigateFromTop","getJqmHistory","currentPage","_transition","_reverse","destStacks","SUBFLOW_PARAM","destBase","additionalDistance","isTopPage","exitApp","pushIntent","s_lastIntent","popIntent","getQueryParameters","beginSubFlow","commitSubFlow","cancelSubFlow","baseInfo","detectSubFlowBaseInfo","subFlowParam","isInSubFlow","has","some","fromHashChanged","registerPageStack","pageStack","withNavigate","newStacks","failed","makeStack","pathToJqmDataUrl","silentLength","finalIndex","handled","onRouteFailed","onAnchorVclicked","BACK_DESTINATION_URL","isJustBeforeVclicked","followAnchor","backDst","DATA_BACK_DESTINATION","DATA_NO_HASH_CHANGE","noHrefHandle","DATA_NO_VCLICK_HANDLE","needDefaultOperation","isBackButtonClicked","canResolveRoute","any","isBefore","now","s_lastClickedTime","DELAY_TIME","_i","queryParams","inAdditionalBack","decideDirection","additional","detectAdditionalBackDistance","subFlowInfo","isCurrent","treatUrlHistory","pageTransition","newPage","historyActiveIndex","distance","jqmDataUrl","fragment_2","retry","NAVIGATE_INTERVAL","MAX_RETRY_COUNT","_navigate","Page","_url","_$page","_$header","_$footer","_intent","newIntent","_update","_owner","onCommand","kind","onInitialize","onPageBeforeCreate","onPageInit","onPageBeforeShow","onPageShow","onPageBeforeHide","onPageHide","onPageRemove","_initialized","ev","pageInit","pageBeforeShow","pageShow","pageBeforeHide","pageHide","pageRemove","pageBeforeCreate","owner","_keepIntent","keepIntent","getDirection","prevIndex","migrateVersion","log","rbadVersions","migrateWarnings","warnedAbout","migrateTrace","migrateReset","migrateWarn","trace","migrateWarnProp","migrateWarnFunc","newFunc","compatMode","oldInit","oldIsNumeric","isNumeric","rattrHashTest","rattrHashGlob","arg1","querySelector","err1","op","err2","findProp","parseJSON","isNumeric2","realStringObj","oldValue","uniqueSort","pseudos","oldAjax","jQXHR","oldRemoveAttr","oldToggleClass","rmatchNonSpace","internalSwapCall","swap","oldHook","cssHooks","old","oldData","curData","hasData","sameKeys","oldTweenRun","Tween","run","oldEasing","fx","interval","requestAnimationFrame","oldLoad","oldEventAdd","originalFix","fix","fixHooks","fixHook","addProp","_migrated_","splice","ready","oldOffset","oldParam","traditional","ajaxTraditional","oldSelf","andSelf","oldDeferred","tuples","Callbacks","func","pipe","fns","newDefer","tuple","returned","progress","notify"],"mappings":"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","sourcesContent":["/*!\n * cdp.framework.jqm.js 2.0.0\n *\n * Date: 2017-08-22T06:21:34.964Z\n */\n\n(function webpackUniversalModuleDefinition(root, factory) {\n    if(typeof exports === 'object' && typeof module === 'object')\n        module.exports = factory(require(\"jquery\"), require(\"cdp.i18n\"), require(\"backbone\"));\n    else if(typeof define === 'function' && define.amd)\n        define([\"jquery\", \"cdp.i18n\", \"backbone\"], factory);\n    else if(typeof exports === 'object')\n        exports[\"Framework\"] = factory(require(\"jquery\"), require(\"cdp.i18n\"), require(\"backbone\"));\n    else\n        root[\"CDP\"] = root[\"CDP\"] || {}, root[\"CDP\"][\"Framework\"] = factory(root[\"jQuery\"], root[\"CDP\"], root[\"Backbone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/     // The module cache\n/******/     var installedModules = {};\n/******/\n/******/     // The require function\n/******/     function __webpack_require__(moduleId) {\n/******/\n/******/         // Check if module is in cache\n/******/         if(installedModules[moduleId]) {\n/******/             return installedModules[moduleId].exports;\n/******/         }\n/******/         // Create a new module (and put it into the cache)\n/******/         var module = installedModules[moduleId] = {\n/******/             i: moduleId,\n/******/             l: false,\n/******/             exports: {}\n/******/         };\n/******/\n/******/         // Execute the module function\n/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/         // Flag the module as loaded\n/******/         module.l = true;\n/******/\n/******/         // Return the exports of the module\n/******/         return module.exports;\n/******/     }\n/******/\n/******/\n/******/     // expose the modules object (__webpack_modules__)\n/******/     __webpack_require__.m = modules;\n/******/\n/******/     // expose the module cache\n/******/     __webpack_require__.c = installedModules;\n/******/\n/******/     // define getter function for harmony exports\n/******/     __webpack_require__.d = function(exports, name, getter) {\n/******/         if(!__webpack_require__.o(exports, name)) {\n/******/             Object.defineProperty(exports, name, {\n/******/                 configurable: false,\n/******/                 enumerable: true,\n/******/                 get: getter\n/******/             });\n/******/         }\n/******/     };\n/******/\n/******/     // getDefaultExport function for compatibility with non-harmony modules\n/******/     __webpack_require__.n = function(module) {\n/******/         var getter = module && module.__esModule ?\n/******/             function getDefault() { return module['default']; } :\n/******/             function getModuleExports() { return module; };\n/******/         __webpack_require__.d(getter, 'a', getter);\n/******/         return getter;\n/******/     };\n/******/\n/******/     // Object.prototype.hasOwnProperty.call\n/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/     // __webpack_public_path__\n/******/     __webpack_require__.p = \"\";\n/******/\n/******/     // Load entry module and return exports\n/******/     return __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n* jQuery Mobile 1.4.5\n* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC\n* http://jquerymobile.com\n*\n* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors\n* Released under the MIT license.\n* http://jquery.org/license\n*\n*/\n\n\n(function ( root, doc, factory ) {\n    if ( true ) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0) ], __WEBPACK_AMD_DEFINE_RESULT__ = function ( $ ) {\n            factory( $, root, doc );\n            return $.mobile;\n        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {\n        // Browser globals\n        factory( root.jQuery, root, doc );\n    }\n}( this, document, function ( jQuery, window, document, undefined ) {\n(function( $ ) {\n    $.mobile = {};\n}( jQuery ));\n\n/*!\n * jQuery UI Core c0ab71056b936627e8a7821f03c044aec6280a40\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n(function( $, undefined ) {\n\nvar uuid = 0,\n    runiqueId = /^ui-id-\\d+$/;\n\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\n$.ui = $.ui || {};\n\n$.extend( $.ui, {\n    version: \"c0ab71056b936627e8a7821f03c044aec6280a40\",\n\n    keyCode: {\n        BACKSPACE: 8,\n        COMMA: 188,\n        DELETE: 46,\n        DOWN: 40,\n        END: 35,\n        ENTER: 13,\n        ESCAPE: 27,\n        HOME: 36,\n        LEFT: 37,\n        PAGE_DOWN: 34,\n        PAGE_UP: 33,\n        PERIOD: 190,\n        RIGHT: 39,\n        SPACE: 32,\n        TAB: 9,\n        UP: 38\n    }\n});\n\n// plugins\n$.fn.extend({\n    focus: (function( orig ) {\n        return function( delay, fn ) {\n            return typeof delay === \"number\" ?\n                this.each(function() {\n                    var elem = this;\n                    setTimeout(function() {\n                        $( elem ).focus();\n                        if ( fn ) {\n                            fn.call( elem );\n                        }\n                    }, delay );\n                }) :\n                orig.apply( this, arguments );\n        };\n    })( $.fn.focus ),\n\n    scrollParent: function() {\n        var scrollParent;\n        if (($.ui.ie && (/(static|relative)/).test(this.css(\"position\"))) || (/absolute/).test(this.css(\"position\"))) {\n            scrollParent = this.parents().filter(function() {\n                return (/(relative|absolute|fixed)/).test($.css(this,\"position\")) && (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n            }).eq(0);\n        } else {\n            scrollParent = this.parents().filter(function() {\n                return (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n            }).eq(0);\n        }\n\n        return ( /fixed/ ).test( this.css( \"position\") ) || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;\n    },\n\n    uniqueId: function() {\n        return this.each(function() {\n            if ( !this.id ) {\n                this.id = \"ui-id-\" + (++uuid);\n            }\n        });\n    },\n\n    removeUniqueId: function() {\n        return this.each(function() {\n            if ( runiqueId.test( this.id ) ) {\n                $( this ).removeAttr( \"id\" );\n            }\n        });\n    }\n});\n\n// selectors\nfunction focusable( element, isTabIndexNotNaN ) {\n    var map, mapName, img,\n        nodeName = element.nodeName.toLowerCase();\n    if ( \"area\" === nodeName ) {\n        map = element.parentNode;\n        mapName = map.name;\n        if ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n            return false;\n        }\n        img = $( \"img[usemap=#\" + mapName + \"]\" )[0];\n        return !!img && visible( img );\n    }\n    return ( /input|select|textarea|button|object/.test( nodeName ) ?\n        !element.disabled :\n        \"a\" === nodeName ?\n            element.href || isTabIndexNotNaN :\n            isTabIndexNotNaN) &&\n        // the element and all of its ancestors must be visible\n        visible( element );\n}\n\nfunction visible( element ) {\n    return $.expr.filters.visible( element ) &&\n        !$( element ).parents().addBack().filter(function() {\n            return $.css( this, \"visibility\" ) === \"hidden\";\n        }).length;\n}\n\n$.extend( $.expr[ \":\" ], {\n    data: $.expr.createPseudo ?\n        $.expr.createPseudo(function( dataName ) {\n            return function( elem ) {\n                return !!$.data( elem, dataName );\n            };\n        }) :\n        // support: jQuery <1.8\n        function( elem, i, match ) {\n            return !!$.data( elem, match[ 3 ] );\n        },\n\n    focusable: function( element ) {\n        return focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\n    },\n\n    tabbable: function( element ) {\n        var tabIndex = $.attr( element, \"tabindex\" ),\n            isTabIndexNaN = isNaN( tabIndex );\n        return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\n    }\n});\n\n// support: jQuery <1.8\nif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\n    $.each( [ \"Width\", \"Height\" ], function( i, name ) {\n        var side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n            type = name.toLowerCase(),\n            orig = {\n                innerWidth: $.fn.innerWidth,\n                innerHeight: $.fn.innerHeight,\n                outerWidth: $.fn.outerWidth,\n                outerHeight: $.fn.outerHeight\n            };\n\n        function reduce( elem, size, border, margin ) {\n            $.each( side, function() {\n                size -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n                if ( border ) {\n                    size -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n                }\n                if ( margin ) {\n                    size -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n                }\n            });\n            return size;\n        }\n\n        $.fn[ \"inner\" + name ] = function( size ) {\n            if ( size === undefined ) {\n                return orig[ \"inner\" + name ].call( this );\n            }\n\n            return this.each(function() {\n                $( this ).css( type, reduce( this, size ) + \"px\" );\n            });\n        };\n\n        $.fn[ \"outer\" + name] = function( size, margin ) {\n            if ( typeof size !== \"number\" ) {\n                return orig[ \"outer\" + name ].call( this, size );\n            }\n\n            return this.each(function() {\n                $( this).css( type, reduce( this, size, true, margin ) + \"px\" );\n            });\n        };\n    });\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n    $.fn.addBack = function( selector ) {\n        return this.add( selector == null ?\n            this.prevObject : this.prevObject.filter( selector )\n        );\n    };\n}\n\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\nif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\n    $.fn.removeData = (function( removeData ) {\n        return function( key ) {\n            if ( arguments.length ) {\n                return removeData.call( this, $.camelCase( key ) );\n            } else {\n                return removeData.call( this );\n            }\n        };\n    })( $.fn.removeData );\n}\n\n\n\n\n\n// deprecated\n$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n$.support.selectstart = \"onselectstart\" in document.createElement( \"div\" );\n$.fn.extend({\n    disableSelection: function() {\n        return this.bind( ( $.support.selectstart ? \"selectstart\" : \"mousedown\" ) +\n            \".ui-disableSelection\", function( event ) {\n                event.preventDefault();\n            });\n    },\n\n    enableSelection: function() {\n        return this.unbind( \".ui-disableSelection\" );\n    },\n\n    zIndex: function( zIndex ) {\n        if ( zIndex !== undefined ) {\n            return this.css( \"zIndex\", zIndex );\n        }\n\n        if ( this.length ) {\n            var elem = $( this[ 0 ] ), position, value;\n            while ( elem.length && elem[ 0 ] !== document ) {\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\n                // This makes behavior of this function consistent across browsers\n                // WebKit always returns auto if the element is positioned\n                position = elem.css( \"position\" );\n                if ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n                    // IE returns 0 when zIndex is not specified\n                    // other browsers return a string\n                    // we ignore the case of nested elements with an explicit value of 0\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n                    value = parseInt( elem.css( \"zIndex\" ), 10 );\n                    if ( !isNaN( value ) && value !== 0 ) {\n                        return value;\n                    }\n                }\n                elem = elem.parent();\n            }\n        }\n\n        return 0;\n    }\n});\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\n$.ui.plugin = {\n    add: function( module, option, set ) {\n        var i,\n            proto = $.ui[ module ].prototype;\n        for ( i in set ) {\n            proto.plugins[ i ] = proto.plugins[ i ] || [];\n            proto.plugins[ i ].push( [ option, set[ i ] ] );\n        }\n    },\n    call: function( instance, name, args, allowDisconnected ) {\n        var i,\n            set = instance.plugins[ name ];\n\n        if ( !set ) {\n            return;\n        }\n\n        if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n            return;\n        }\n\n        for ( i = 0; i < set.length; i++ ) {\n            if ( instance.options[ set[ i ][ 0 ] ] ) {\n                set[ i ][ 1 ].apply( instance.element, args );\n            }\n        }\n    }\n};\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n\n    // Subtract the height of external toolbars from the page height, if the page does not have\n    // internal toolbars of the same type. We take care to use the widget options if we find a\n    // widget instance and the element's data-attributes otherwise.\n    var compensateToolbars = function( page, desiredHeight ) {\n        var pageParent = page.parent(),\n            toolbarsAffectingHeight = [],\n\n            // We use this function to filter fixed toolbars with option updatePagePadding set to\n            // true (which is the default) from our height subtraction, because fixed toolbars with\n            // option updatePagePadding set to true compensate for their presence by adding padding\n            // to the active page. We want to avoid double-counting by also subtracting their\n            // height from the desired page height.\n            noPadders = function() {\n                var theElement = $( this ),\n                    widgetOptions = $.mobile.toolbar && theElement.data( \"mobile-toolbar\" ) ?\n                        theElement.toolbar( \"option\" ) : {\n                            position: theElement.attr( \"data-\" + $.mobile.ns + \"position\" ),\n                            updatePagePadding: ( theElement.attr( \"data-\" + $.mobile.ns +\n                                \"update-page-padding\" ) !== false )\n                        };\n\n                return !( widgetOptions.position === \"fixed\" &&\n                    widgetOptions.updatePagePadding === true );\n            },\n            externalHeaders = pageParent.children( \":jqmData(role='header')\" ).filter( noPadders ),\n            internalHeaders = page.children( \":jqmData(role='header')\" ),\n            externalFooters = pageParent.children( \":jqmData(role='footer')\" ).filter( noPadders ),\n            internalFooters = page.children( \":jqmData(role='footer')\" );\n\n        // If we have no internal headers, but we do have external headers, then their height\n        // reduces the page height\n        if ( internalHeaders.length === 0 && externalHeaders.length > 0 ) {\n            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalHeaders.toArray() );\n        }\n\n        // If we have no internal footers, but we do have external footers, then their height\n        // reduces the page height\n        if ( internalFooters.length === 0 && externalFooters.length > 0 ) {\n            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalFooters.toArray() );\n        }\n\n        $.each( toolbarsAffectingHeight, function( index, value ) {\n            desiredHeight -= $( value ).outerHeight();\n        });\n\n        // Height must be at least zero\n        return Math.max( 0, desiredHeight );\n    };\n\n    $.extend( $.mobile, {\n        // define the window and the document objects\n        window: $( window ),\n        document: $( document ),\n\n        // TODO: Remove and use $.ui.keyCode directly\n        keyCode: $.ui.keyCode,\n\n        // Place to store various widget extensions\n        behaviors: {},\n\n        // Scroll page vertically: scroll to 0 to hide iOS address bar, or pass a Y value\n        silentScroll: function( ypos ) {\n            if ( $.type( ypos ) !== \"number\" ) {\n                ypos = $.mobile.defaultHomeScroll;\n            }\n\n            // prevent scrollstart and scrollstop events\n            $.event.special.scrollstart.enabled = false;\n\n            setTimeout(function() {\n                window.scrollTo( 0, ypos );\n                $.mobile.document.trigger( \"silentscroll\", { x: 0, y: ypos });\n            }, 20 );\n\n            setTimeout(function() {\n                $.event.special.scrollstart.enabled = true;\n            }, 150 );\n        },\n\n        getClosestBaseUrl: function( ele )    {\n            // Find the closest page and extract out its url.\n            var url = $( ele ).closest( \".ui-page\" ).jqmData( \"url\" ),\n                base = $.mobile.path.documentBase.hrefNoHash;\n\n            if ( !$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath( url ) ) {\n                url = base;\n            }\n\n            return $.mobile.path.makeUrlAbsolute( url, base );\n        },\n        removeActiveLinkClass: function( forceRemoval ) {\n            if ( !!$.mobile.activeClickedLink &&\n                ( !$.mobile.activeClickedLink.closest( \".\" + $.mobile.activePageClass ).length ||\n                    forceRemoval ) ) {\n\n                $.mobile.activeClickedLink.removeClass( $.mobile.activeBtnClass );\n            }\n            $.mobile.activeClickedLink = null;\n        },\n\n        // DEPRECATED in 1.4\n        // Find the closest parent with a theme class on it. Note that\n        // we are not using $.fn.closest() on purpose here because this\n        // method gets called quite a bit and we need it to be as fast\n        // as possible.\n        getInheritedTheme: function( el, defaultTheme ) {\n            var e = el[ 0 ],\n                ltr = \"\",\n                re = /ui-(bar|body|overlay)-([a-z])\\b/,\n                c, m;\n            while ( e ) {\n                c = e.className || \"\";\n                if ( c && ( m = re.exec( c ) ) && ( ltr = m[ 2 ] ) ) {\n                    // We found a parent with a theme class\n                    // on it so bail from this loop.\n                    break;\n                }\n\n                e = e.parentNode;\n            }\n            // Return the theme letter we found, if none, return the\n            // specified default.\n            return ltr || defaultTheme || \"a\";\n        },\n\n        enhanceable: function( elements ) {\n            return this.haveParents( elements, \"enhance\" );\n        },\n\n        hijackable: function( elements ) {\n            return this.haveParents( elements, \"ajax\" );\n        },\n\n        haveParents: function( elements, attr ) {\n            if ( !$.mobile.ignoreContentEnabled ) {\n                return elements;\n            }\n\n            var count = elements.length,\n                $newSet = $(),\n                e, $element, excluded,\n                i, c;\n\n            for ( i = 0; i < count; i++ ) {\n                $element = elements.eq( i );\n                excluded = false;\n                e = elements[ i ];\n\n                while ( e ) {\n                    c = e.getAttribute ? e.getAttribute( \"data-\" + $.mobile.ns + attr ) : \"\";\n\n                    if ( c === \"false\" ) {\n                        excluded = true;\n                        break;\n                    }\n\n                    e = e.parentNode;\n                }\n\n                if ( !excluded ) {\n                    $newSet = $newSet.add( $element );\n                }\n            }\n\n            return $newSet;\n        },\n\n        getScreenHeight: function() {\n            // Native innerHeight returns more accurate value for this across platforms,\n            // jQuery version is here as a normalized fallback for platforms like Symbian\n            return window.innerHeight || $.mobile.window.height();\n        },\n\n        //simply set the active page's minimum height to screen height, depending on orientation\n        resetActivePageHeight: function( height ) {\n            var page = $( \".\" + $.mobile.activePageClass ),\n                pageHeight = page.height(),\n                pageOuterHeight = page.outerHeight( true );\n\n            height = compensateToolbars( page,\n                ( typeof height === \"number\" ) ? height : $.mobile.getScreenHeight() );\n\n            // Remove any previous min-height setting\n            page.css( \"min-height\", \"\" );\n\n            // Set the minimum height only if the height as determined by CSS is insufficient\n            if ( page.height() < height ) {\n                page.css( \"min-height\", height - ( pageOuterHeight - pageHeight ) );\n            }\n        },\n\n        loading: function() {\n            // If this is the first call to this function, instantiate a loader widget\n            var loader = this.loading._widget || $( $.mobile.loader.prototype.defaultHtml ).loader(),\n\n                // Call the appropriate method on the loader\n                returnValue = loader.loader.apply( loader, arguments );\n\n            // Make sure the loader is retained for future calls to this function.\n            this.loading._widget = loader;\n\n            return returnValue;\n        }\n    });\n\n    $.addDependents = function( elem, newDependents ) {\n        var $elem = $( elem ),\n            dependents = $elem.jqmData( \"dependents\" ) || $();\n\n        $elem.jqmData( \"dependents\", $( dependents ).add( newDependents ) );\n    };\n\n    // plugins\n    $.fn.extend({\n        removeWithDependents: function() {\n            $.removeWithDependents( this );\n        },\n\n        // Enhance child elements\n        enhanceWithin: function() {\n            var index,\n                widgetElements = {},\n                keepNative = $.mobile.page.prototype.keepNativeSelector(),\n                that = this;\n\n            // Add no js class to elements\n            if ( $.mobile.nojs ) {\n                $.mobile.nojs( this );\n            }\n\n            // Bind links for ajax nav\n            if ( $.mobile.links ) {\n                $.mobile.links( this );\n            }\n\n            // Degrade inputs for styleing\n            if ( $.mobile.degradeInputsWithin ) {\n                $.mobile.degradeInputsWithin( this );\n            }\n\n            // Run buttonmarkup\n            if ( $.fn.buttonMarkup ) {\n                this.find( $.fn.buttonMarkup.initSelector ).not( keepNative )\n                .jqmEnhanceable().buttonMarkup();\n            }\n\n            // Add classes for fieldContain\n            if ( $.fn.fieldcontain ) {\n                this.find( \":jqmData(role='fieldcontain')\" ).not( keepNative )\n                .jqmEnhanceable().fieldcontain();\n            }\n\n            // Enhance widgets\n            $.each( $.mobile.widgets, function( name, constructor ) {\n\n                // If initSelector not false find elements\n                if ( constructor.initSelector ) {\n\n                    // Filter elements that should not be enhanced based on parents\n                    var elements = $.mobile.enhanceable( that.find( constructor.initSelector ) );\n\n                    // If any matching elements remain filter ones with keepNativeSelector\n                    if ( elements.length > 0 ) {\n\n                        // $.mobile.page.prototype.keepNativeSelector is deprecated this is just for backcompat\n                        // Switch to $.mobile.keepNative in 1.5 which is just a value not a function\n                        elements = elements.not( keepNative );\n                    }\n\n                    // Enhance whatever is left\n                    if ( elements.length > 0 ) {\n                        widgetElements[ constructor.prototype.widgetName ] = elements;\n                    }\n                }\n            });\n\n            for ( index in widgetElements ) {\n                widgetElements[ index ][ index ]();\n            }\n\n            return this;\n        },\n\n        addDependents: function( newDependents ) {\n            $.addDependents( this, newDependents );\n        },\n\n        // note that this helper doesn't attempt to handle the callback\n        // or setting of an html element's text, its only purpose is\n        // to return the html encoded version of the text in all cases. (thus the name)\n        getEncodedText: function() {\n            return $( \"<a>\" ).text( this.text() ).html();\n        },\n\n        // fluent helper function for the mobile namespaced equivalent\n        jqmEnhanceable: function() {\n            return $.mobile.enhanceable( this );\n        },\n\n        jqmHijackable: function() {\n            return $.mobile.hijackable( this );\n        }\n    });\n\n    $.removeWithDependents = function( nativeElement ) {\n        var element = $( nativeElement );\n\n        ( element.jqmData( \"dependents\" ) || $() ).remove();\n        element.remove();\n    };\n    $.addDependents = function( nativeElement, newDependents ) {\n        var element = $( nativeElement ),\n            dependents = element.jqmData( \"dependents\" ) || $();\n\n        element.jqmData( \"dependents\", $( dependents ).add( newDependents ) );\n    };\n\n    $.find.matches = function( expr, set ) {\n        return $.find( expr, null, null, set );\n    };\n\n    $.find.matchesSelector = function( node, expr ) {\n        return $.find( expr, null, null, [ node ] ).length > 0;\n    };\n\n})( jQuery, this );\n\n(function( $, window, undefined ) {\n    $.extend( $.mobile, {\n\n        // Version of the jQuery Mobile Framework\n        version: \"1.4.5\",\n\n        // Deprecated and no longer used in 1.4 remove in 1.5\n        // Define the url parameter used for referencing widget-generated sub-pages.\n        // Translates to example.html&ui-page=subpageIdentifier\n        // hash segment before &ui-page= is used to make Ajax request\n        subPageUrlKey: \"ui-page\",\n\n        hideUrlBar: true,\n\n        // Keepnative Selector\n        keepNative: \":jqmData(role='none'), :jqmData(role='nojs')\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class assigned to page currently in view, and during transitions\n        activePageClass: \"ui-page-active\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class used for \"active\" button state, from CSS framework\n        activeBtnClass: \"ui-btn-active\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class used for \"focus\" form element state, from CSS framework\n        focusClass: \"ui-focus\",\n\n        // Automatically handle clicks and form submissions through Ajax, when same-domain\n        ajaxEnabled: true,\n\n        // Automatically load and show pages based on location.hash\n        hashListeningEnabled: true,\n\n        // disable to prevent jquery from bothering with links\n        linkBindingEnabled: true,\n\n        // Set default page transition - 'none' for no transitions\n        defaultPageTransition: \"fade\",\n\n        // Set maximum window width for transitions to apply - 'false' for no limit\n        maxTransitionWidth: false,\n\n        // Minimum scroll distance that will be remembered when returning to a page\n        // Deprecated remove in 1.5\n        minScrollBack: 0,\n\n        // Set default dialog transition - 'none' for no transitions\n        defaultDialogTransition: \"pop\",\n\n        // Error response message - appears when an Ajax page request fails\n        pageLoadErrorMessage: \"Error Loading Page\",\n\n        // For error messages, which theme does the box use?\n        pageLoadErrorMessageTheme: \"a\",\n\n        // replace calls to window.history.back with phonegaps navigation helper\n        // where it is provided on the window object\n        phonegapNavigationEnabled: false,\n\n        //automatically initialize the DOM when it's ready\n        autoInitializePage: true,\n\n        pushStateEnabled: true,\n\n        // allows users to opt in to ignoring content by marking a parent element as\n        // data-ignored\n        ignoreContentEnabled: false,\n\n        buttonMarkup: {\n            hoverDelay: 200\n        },\n\n        // disable the alteration of the dynamic base tag or links in the case\n        // that a dynamic base tag isn't supported\n        dynamicBaseEnabled: true,\n\n        // default the property to remove dependency on assignment in init module\n        pageContainer: $(),\n\n        //enable cross-domain page support\n        allowCrossDomainPages: false,\n\n        dialogHashKey: \"&ui-state=dialog\"\n    });\n})( jQuery, this );\n\n/*!\n * jQuery UI Widget c0ab71056b936627e8a7821f03c044aec6280a40\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n(function( $, undefined ) {\n\nvar uuid = 0,\n    slice = Array.prototype.slice,\n    _cleanData = $.cleanData;\n$.cleanData = function( elems ) {\n    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n        try {\n            $( elem ).triggerHandler( \"remove\" );\n        // http://bugs.jquery.com/ticket/8235\n        } catch( e ) {}\n    }\n    _cleanData( elems );\n};\n\n$.widget = function( name, base, prototype ) {\n    var fullName, existingConstructor, constructor, basePrototype,\n        // proxiedPrototype allows the provided prototype to remain unmodified\n        // so that it can be used as a mixin for multiple widgets (#8876)\n        proxiedPrototype = {},\n        namespace = name.split( \".\" )[ 0 ];\n\n    name = name.split( \".\" )[ 1 ];\n    fullName = namespace + \"-\" + name;\n\n    if ( !prototype ) {\n        prototype = base;\n        base = $.Widget;\n    }\n\n    // create selector for plugin\n    $.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n        return !!$.data( elem, fullName );\n    };\n\n    $[ namespace ] = $[ namespace ] || {};\n    existingConstructor = $[ namespace ][ name ];\n    constructor = $[ namespace ][ name ] = function( options, element ) {\n        // allow instantiation without \"new\" keyword\n        if ( !this._createWidget ) {\n            return new constructor( options, element );\n        }\n\n        // allow instantiation without initializing for simple inheritance\n        // must use \"new\" keyword (the code above always passes args)\n        if ( arguments.length ) {\n            this._createWidget( options, element );\n        }\n    };\n    // extend with the existing constructor to carry over any static properties\n    $.extend( constructor, existingConstructor, {\n        version: prototype.version,\n        // copy the object used to create the prototype in case we need to\n        // redefine the widget later\n        _proto: $.extend( {}, prototype ),\n        // track widgets that inherit from this widget in case this widget is\n        // redefined after a widget inherits from it\n        _childConstructors: []\n    });\n\n    basePrototype = new base();\n    // we need to make the options hash a property directly on the new instance\n    // otherwise we'll modify the options hash on the prototype that we're\n    // inheriting from\n    basePrototype.options = $.widget.extend( {}, basePrototype.options );\n    $.each( prototype, function( prop, value ) {\n        if ( !$.isFunction( value ) ) {\n            proxiedPrototype[ prop ] = value;\n            return;\n        }\n        proxiedPrototype[ prop ] = (function() {\n            var _super = function() {\n                    return base.prototype[ prop ].apply( this, arguments );\n                },\n                _superApply = function( args ) {\n                    return base.prototype[ prop ].apply( this, args );\n                };\n            return function() {\n                var __super = this._super,\n                    __superApply = this._superApply,\n                    returnValue;\n\n                this._super = _super;\n                this._superApply = _superApply;\n\n                returnValue = value.apply( this, arguments );\n\n                this._super = __super;\n                this._superApply = __superApply;\n\n                return returnValue;\n            };\n        })();\n    });\n    constructor.prototype = $.widget.extend( basePrototype, {\n        // TODO: remove support for widgetEventPrefix\n        // always use the name + a colon as the prefix, e.g., draggable:start\n        // don't prefix for widgets that aren't DOM-based\n        widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\n    }, proxiedPrototype, {\n        constructor: constructor,\n        namespace: namespace,\n        widgetName: name,\n        widgetFullName: fullName\n    });\n\n    // If this widget is being redefined then we need to find all widgets that\n    // are inheriting from it and redefine all of them so that they inherit from\n    // the new version of this widget. We're essentially trying to replace one\n    // level in the prototype chain.\n    if ( existingConstructor ) {\n        $.each( existingConstructor._childConstructors, function( i, child ) {\n            var childPrototype = child.prototype;\n\n            // redefine the child widget using the same prototype that was\n            // originally used, but inherit from the new version of the base\n            $.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\n        });\n        // remove the list of existing child constructors from the old constructor\n        // so the old child constructors can be garbage collected\n        delete existingConstructor._childConstructors;\n    } else {\n        base._childConstructors.push( constructor );\n    }\n\n    $.widget.bridge( name, constructor );\n\n    return constructor;\n};\n\n$.widget.extend = function( target ) {\n    var input = slice.call( arguments, 1 ),\n        inputIndex = 0,\n        inputLength = input.length,\n        key,\n        value;\n    for ( ; inputIndex < inputLength; inputIndex++ ) {\n        for ( key in input[ inputIndex ] ) {\n            value = input[ inputIndex ][ key ];\n            if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n                // Clone objects\n                if ( $.isPlainObject( value ) ) {\n                    target[ key ] = $.isPlainObject( target[ key ] ) ?\n                        $.widget.extend( {}, target[ key ], value ) :\n                        // Don't extend strings, arrays, etc. with objects\n                        $.widget.extend( {}, value );\n                // Copy everything else by reference\n                } else {\n                    target[ key ] = value;\n                }\n            }\n        }\n    }\n    return target;\n};\n\n$.widget.bridge = function( name, object ) {\n    var fullName = object.prototype.widgetFullName || name;\n    $.fn[ name ] = function( options ) {\n        var isMethodCall = typeof options === \"string\",\n            args = slice.call( arguments, 1 ),\n            returnValue = this;\n\n        // allow multiple hashes to be passed on init\n        options = !isMethodCall && args.length ?\n            $.widget.extend.apply( null, [ options ].concat(args) ) :\n            options;\n\n        if ( isMethodCall ) {\n            this.each(function() {\n                var methodValue,\n                    instance = $.data( this, fullName );\n                if ( options === \"instance\" ) {\n                    returnValue = instance;\n                    return false;\n                }\n                if ( !instance ) {\n                    return $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\n                        \"attempted to call method '\" + options + \"'\" );\n                }\n                if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\n                    return $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\n                }\n                methodValue = instance[ options ].apply( instance, args );\n                if ( methodValue !== instance && methodValue !== undefined ) {\n                    returnValue = methodValue && methodValue.jquery ?\n                        returnValue.pushStack( methodValue.get() ) :\n                        methodValue;\n                    return false;\n                }\n            });\n        } else {\n            this.each(function() {\n                var instance = $.data( this, fullName );\n                if ( instance ) {\n                    instance.option( options || {} )._init();\n                } else {\n                    $.data( this, fullName, new object( options, this ) );\n                }\n            });\n        }\n\n        return returnValue;\n    };\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n    widgetName: \"widget\",\n    widgetEventPrefix: \"\",\n    defaultElement: \"<div>\",\n    options: {\n        disabled: false,\n\n        // callbacks\n        create: null\n    },\n    _createWidget: function( options, element ) {\n        element = $( element || this.defaultElement || this )[ 0 ];\n        this.element = $( element );\n        this.uuid = uuid++;\n        this.eventNamespace = \".\" + this.widgetName + this.uuid;\n        this.options = $.widget.extend( {},\n            this.options,\n            this._getCreateOptions(),\n            options );\n\n        this.bindings = $();\n        this.hoverable = $();\n        this.focusable = $();\n\n        if ( element !== this ) {\n            $.data( element, this.widgetFullName, this );\n            this._on( true, this.element, {\n                remove: function( event ) {\n                    if ( event.target === element ) {\n                        this.destroy();\n                    }\n                }\n            });\n            this.document = $( element.style ?\n                // element within the document\n                element.ownerDocument :\n                // element is window or document\n                element.document || element );\n            this.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n        }\n\n        this._create();\n        this._trigger( \"create\", null, this._getCreateEventData() );\n        this._init();\n    },\n    _getCreateOptions: $.noop,\n    _getCreateEventData: $.noop,\n    _create: $.noop,\n    _init: $.noop,\n\n    destroy: function() {\n        this._destroy();\n        // we can probably remove the unbind calls in 2.0\n        // all event bindings should go through this._on()\n        this.element\n            .unbind( this.eventNamespace )\n            .removeData( this.widgetFullName )\n            // support: jquery <1.6.3\n            // http://bugs.jquery.com/ticket/9413\n            .removeData( $.camelCase( this.widgetFullName ) );\n        this.widget()\n            .unbind( this.eventNamespace )\n            .removeAttr( \"aria-disabled\" )\n            .removeClass(\n                this.widgetFullName + \"-disabled \" +\n                \"ui-state-disabled\" );\n\n        // clean up events and states\n        this.bindings.unbind( this.eventNamespace );\n        this.hoverable.removeClass( \"ui-state-hover\" );\n        this.focusable.removeClass( \"ui-state-focus\" );\n    },\n    _destroy: $.noop,\n\n    widget: function() {\n        return this.element;\n    },\n\n    option: function( key, value ) {\n        var options = key,\n            parts,\n            curOption,\n            i;\n\n        if ( arguments.length === 0 ) {\n            // don't return a reference to the internal hash\n            return $.widget.extend( {}, this.options );\n        }\n\n        if ( typeof key === \"string\" ) {\n            // handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n            options = {};\n            parts = key.split( \".\" );\n            key = parts.shift();\n            if ( parts.length ) {\n                curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n                for ( i = 0; i < parts.length - 1; i++ ) {\n                    curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n                    curOption = curOption[ parts[ i ] ];\n                }\n                key = parts.pop();\n                if ( value === undefined ) {\n                    return curOption[ key ] === undefined ? null : curOption[ key ];\n                }\n                curOption[ key ] = value;\n            } else {\n                if ( value === undefined ) {\n                    return this.options[ key ] === undefined ? null : this.options[ key ];\n                }\n                options[ key ] = value;\n            }\n        }\n\n        this._setOptions( options );\n\n        return this;\n    },\n    _setOptions: function( options ) {\n        var key;\n\n        for ( key in options ) {\n            this._setOption( key, options[ key ] );\n        }\n\n        return this;\n    },\n    _setOption: function( key, value ) {\n        this.options[ key ] = value;\n\n        if ( key === \"disabled\" ) {\n            this.widget()\n                .toggleClass( this.widgetFullName + \"-disabled\", !!value );\n            this.hoverable.removeClass( \"ui-state-hover\" );\n            this.focusable.removeClass( \"ui-state-focus\" );\n        }\n\n        return this;\n    },\n\n    enable: function() {\n        return this._setOptions({ disabled: false });\n    },\n    disable: function() {\n        return this._setOptions({ disabled: true });\n    },\n\n    _on: function( suppressDisabledCheck, element, handlers ) {\n        var delegateElement,\n            instance = this;\n\n        // no suppressDisabledCheck flag, shuffle arguments\n        if ( typeof suppressDisabledCheck !== \"boolean\" ) {\n            handlers = element;\n            element = suppressDisabledCheck;\n            suppressDisabledCheck = false;\n        }\n\n        // no element argument, shuffle and use this.element\n        if ( !handlers ) {\n            handlers = element;\n            element = this.element;\n            delegateElement = this.widget();\n        } else {\n            // accept selectors, DOM elements\n            element = delegateElement = $( element );\n            this.bindings = this.bindings.add( element );\n        }\n\n        $.each( handlers, function( event, handler ) {\n            function handlerProxy() {\n                // allow widgets to customize the disabled handling\n                // - disabled as an array instead of boolean\n                // - disabled class as method for disabling individual parts\n                if ( !suppressDisabledCheck &&\n                        ( instance.options.disabled === true ||\n                            $( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n                    return;\n                }\n                return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                    .apply( instance, arguments );\n            }\n\n            // copy the guid so direct unbinding works\n            if ( typeof handler !== \"string\" ) {\n                handlerProxy.guid = handler.guid =\n                    handler.guid || handlerProxy.guid || $.guid++;\n            }\n\n            var match = event.match( /^(\\w+)\\s*(.*)$/ ),\n                eventName = match[1] + instance.eventNamespace,\n                selector = match[2];\n            if ( selector ) {\n                delegateElement.delegate( selector, eventName, handlerProxy );\n            } else {\n                element.bind( eventName, handlerProxy );\n            }\n        });\n    },\n\n    _off: function( element, eventName ) {\n        eventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) + this.eventNamespace;\n        element.unbind( eventName ).undelegate( eventName );\n    },\n\n    _delay: function( handler, delay ) {\n        function handlerProxy() {\n            return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                .apply( instance, arguments );\n        }\n        var instance = this;\n        return setTimeout( handlerProxy, delay || 0 );\n    },\n\n    _hoverable: function( element ) {\n        this.hoverable = this.hoverable.add( element );\n        this._on( element, {\n            mouseenter: function( event ) {\n                $( event.currentTarget ).addClass( \"ui-state-hover\" );\n            },\n            mouseleave: function( event ) {\n                $( event.currentTarget ).removeClass( \"ui-state-hover\" );\n            }\n        });\n    },\n\n    _focusable: function( element ) {\n        this.focusable = this.focusable.add( element );\n        this._on( element, {\n            focusin: function( event ) {\n                $( event.currentTarget ).addClass( \"ui-state-focus\" );\n            },\n            focusout: function( event ) {\n                $( event.currentTarget ).removeClass( \"ui-state-focus\" );\n            }\n        });\n    },\n\n    _trigger: function( type, event, data ) {\n        var prop, orig,\n            callback = this.options[ type ];\n\n        data = data || {};\n        event = $.Event( event );\n        event.type = ( type === this.widgetEventPrefix ?\n            type :\n            this.widgetEventPrefix + type ).toLowerCase();\n        // the original event may come from any element\n        // so we need to reset the target on the new event\n        event.target = this.element[ 0 ];\n\n        // copy original event properties over to the new event\n        orig = event.originalEvent;\n        if ( orig ) {\n            for ( prop in orig ) {\n                if ( !( prop in event ) ) {\n                    event[ prop ] = orig[ prop ];\n                }\n            }\n        }\n\n        this.element.trigger( event, data );\n        return !( $.isFunction( callback ) &&\n            callback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n            event.isDefaultPrevented() );\n    }\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n    $.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n        if ( typeof options === \"string\" ) {\n            options = { effect: options };\n        }\n        var hasOptions,\n            effectName = !options ?\n                method :\n                options === true || typeof options === \"number\" ?\n                    defaultEffect :\n                    options.effect || defaultEffect;\n        options = options || {};\n        if ( typeof options === \"number\" ) {\n            options = { duration: options };\n        }\n        hasOptions = !$.isEmptyObject( options );\n        options.complete = callback;\n        if ( options.delay ) {\n            element.delay( options.delay );\n        }\n        if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n            element[ method ]( options );\n        } else if ( effectName !== method && element[ effectName ] ) {\n            element[ effectName ]( options.duration, options.easing, callback );\n        } else {\n            element.queue(function( next ) {\n                $( this )[ method ]();\n                if ( callback ) {\n                    callback.call( element[ 0 ] );\n                }\n                next();\n            });\n        }\n    };\n});\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n    var nsNormalizeDict = {},\n        oldFind = $.find,\n        rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\n        jqmDataRE = /:jqmData\\(([^)]*)\\)/g;\n\n    $.extend( $.mobile, {\n\n        // Namespace used framework-wide for data-attrs. Default is no namespace\n\n        ns: \"\",\n\n        // Retrieve an attribute from an element and perform some massaging of the value\n\n        getAttribute: function( element, key ) {\n            var data;\n\n            element = element.jquery ? element[0] : element;\n\n            if ( element && element.getAttribute ) {\n                data = element.getAttribute( \"data-\" + $.mobile.ns + key );\n            }\n\n            // Copied from core's src/data.js:dataAttr()\n            // Convert from a string to a proper data type\n            try {\n                data = data === \"true\" ? true :\n                    data === \"false\" ? false :\n                    data === \"null\" ? null :\n                    // Only convert to a number if it doesn't change the string\n                    +data + \"\" === data ? +data :\n                    rbrace.test( data ) ? JSON.parse( data ) :\n                    data;\n            } catch( err ) {}\n\n            return data;\n        },\n\n        // Expose our cache for testing purposes.\n        nsNormalizeDict: nsNormalizeDict,\n\n        // Take a data attribute property, prepend the namespace\n        // and then camel case the attribute string. Add the result\n        // to our nsNormalizeDict so we don't have to do this again.\n        nsNormalize: function( prop ) {\n            return nsNormalizeDict[ prop ] ||\n                ( nsNormalizeDict[ prop ] = $.camelCase( $.mobile.ns + prop ) );\n        },\n\n        // Find the closest javascript page element to gather settings data jsperf test\n        // http://jsperf.com/single-complex-selector-vs-many-complex-selectors/edit\n        // possibly naive, but it shows that the parsing overhead for *just* the page selector vs\n        // the page and dialog selector is negligable. This could probably be speed up by\n        // doing a similar parent node traversal to the one found in the inherited theme code above\n        closestPageData: function( $target ) {\n            return $target\n                .closest( \":jqmData(role='page'), :jqmData(role='dialog')\" )\n                .data( \"mobile-page\" );\n        }\n\n    });\n\n    // Mobile version of data and removeData and hasData methods\n    // ensures all data is set and retrieved using jQuery Mobile's data namespace\n    $.fn.jqmData = function( prop, value ) {\n        var result;\n        if ( typeof prop !== \"undefined\" ) {\n            if ( prop ) {\n                prop = $.mobile.nsNormalize( prop );\n            }\n\n            // undefined is permitted as an explicit input for the second param\n            // in this case it returns the value and does not set it to undefined\n            if ( arguments.length < 2 || value === undefined ) {\n                result = this.data( prop );\n            } else {\n                result = this.data( prop, value );\n            }\n        }\n        return result;\n    };\n\n    $.jqmData = function( elem, prop, value ) {\n        var result;\n        if ( typeof prop !== \"undefined\" ) {\n            result = $.data( elem, prop ? $.mobile.nsNormalize( prop ) : prop, value );\n        }\n        return result;\n    };\n\n    $.fn.jqmRemoveData = function( prop ) {\n        return this.removeData( $.mobile.nsNormalize( prop ) );\n    };\n\n    $.jqmRemoveData = function( elem, prop ) {\n        return $.removeData( elem, $.mobile.nsNormalize( prop ) );\n    };\n\n    $.find = function( selector, context, ret, extra ) {\n        if ( selector.indexOf( \":jqmData\" ) > -1 ) {\n            selector = selector.replace( jqmDataRE, \"[data-\" + ( $.mobile.ns || \"\" ) + \"$1]\" );\n        }\n\n        return oldFind.call( this, selector, context, ret, extra );\n    };\n\n    $.extend( $.find, oldFind );\n\n})( jQuery, this );\n\n(function( $, undefined ) {\n\nvar rcapitals = /[A-Z]/g,\n    replaceFunction = function( c ) {\n        return \"-\" + c.toLowerCase();\n    };\n\n$.extend( $.Widget.prototype, {\n    _getCreateOptions: function() {\n        var option, value,\n            elem = this.element[ 0 ],\n            options = {};\n\n        //\n        if ( !$.mobile.getAttribute( elem, \"defaults\" ) ) {\n            for ( option in this.options ) {\n                value = $.mobile.getAttribute( elem, option.replace( rcapitals, replaceFunction ) );\n\n                if ( value != null ) {\n                    options[ option ] = value;\n                }\n            }\n        }\n\n        return options;\n    }\n});\n\n//TODO: Remove in 1.5 for backcompat only\n$.mobile.widget = $.Widget;\n\n})( jQuery );\n\n\n(function( $ ) {\n    // TODO move loader class down into the widget settings\n    var loaderClass = \"ui-loader\", $html = $( \"html\" );\n\n    $.widget( \"mobile.loader\", {\n        // NOTE if the global config settings are defined they will override these\n        //      options\n        options: {\n            // the theme for the loading message\n            theme: \"a\",\n\n            // whether the text in the loading message is shown\n            textVisible: false,\n\n            // custom html for the inner content of the loading message\n            html: \"\",\n\n            // the text to be displayed when the popup is shown\n            text: \"loading\"\n        },\n\n        defaultHtml: \"<div class='\" + loaderClass + \"'>\" +\n            \"<span class='ui-icon-loading'></span>\" +\n            \"<h1></h1>\" +\n            \"</div>\",\n\n        // For non-fixed supportin browsers. Position at y center (if scrollTop supported), above the activeBtn (if defined), or just 100px from top\n        fakeFixLoader: function() {\n            var activeBtn = $( \".\" + $.mobile.activeBtnClass ).first();\n\n            this.element\n                .css({\n                    top: $.support.scrollTop && this.window.scrollTop() + this.window.height() / 2 ||\n                        activeBtn.length && activeBtn.offset().top || 100\n                });\n        },\n\n        // check position of loader to see if it appears to be \"fixed\" to center\n        // if not, use abs positioning\n        checkLoaderPosition: function() {\n            var offset = this.element.offset(),\n                scrollTop = this.window.scrollTop(),\n                screenHeight = $.mobile.getScreenHeight();\n\n            if ( offset.top < scrollTop || ( offset.top - scrollTop ) > screenHeight ) {\n                this.element.addClass( \"ui-loader-fakefix\" );\n                this.fakeFixLoader();\n                this.window\n                    .unbind( \"scroll\", this.checkLoaderPosition )\n                    .bind( \"scroll\", $.proxy( this.fakeFixLoader, this ) );\n            }\n        },\n\n        resetHtml: function() {\n            this.element.html( $( this.defaultHtml ).html() );\n        },\n\n        // Turn on/off page loading message. Theme doubles as an object argument\n        // with the following shape: { theme: '', text: '', html: '', textVisible: '' }\n        // NOTE that the $.mobile.loading* settings and params past the first are deprecated\n        // TODO sweet jesus we need to break some of this out\n        show: function( theme, msgText, textonly ) {\n            var textVisible, message, loadSettings;\n\n            this.resetHtml();\n\n            // use the prototype options so that people can set them globally at\n            // mobile init. Consistency, it's what's for dinner\n            if ( $.type( theme ) === \"object\" ) {\n                loadSettings = $.extend( {}, this.options, theme );\n\n                theme = loadSettings.theme;\n            } else {\n                loadSettings = this.options;\n\n                // here we prefer the theme value passed as a string argument, then\n                // we prefer the global option because we can't use undefined default\n                // prototype options, then the prototype option\n                theme = theme || loadSettings.theme;\n            }\n\n            // set the message text, prefer the param, then the settings object\n            // then loading message\n            message = msgText || ( loadSettings.text === false ? \"\" : loadSettings.text );\n\n            // prepare the dom\n            $html.addClass( \"ui-loading\" );\n\n            textVisible = loadSettings.textVisible;\n\n            // add the proper css given the options (theme, text, etc)\n            // Force text visibility if the second argument was supplied, or\n            // if the text was explicitly set in the object args\n            this.element.attr(\"class\", loaderClass +\n                \" ui-corner-all ui-body-\" + theme +\n                \" ui-loader-\" + ( textVisible || msgText || theme.text ? \"verbose\" : \"default\" ) +\n                ( loadSettings.textonly || textonly ? \" ui-loader-textonly\" : \"\" ) );\n\n            // TODO verify that jquery.fn.html is ok to use in both cases here\n            //      this might be overly defensive in preventing unknowing xss\n            // if the html attribute is defined on the loading settings, use that\n            // otherwise use the fallbacks from above\n            if ( loadSettings.html ) {\n                this.element.html( loadSettings.html );\n            } else {\n                this.element.find( \"h1\" ).text( message );\n            }\n\n            // If the pagecontainer widget has been defined we may use the :mobile-pagecontainer\n            // and attach to the element on which the pagecontainer widget has been defined. If not,\n            // we attach to the body.\n            this.element.appendTo( $.mobile.pagecontainer ?\n                $( \":mobile-pagecontainer\" ) : $( \"body\" ) );\n\n            // check that the loader is visible\n            this.checkLoaderPosition();\n\n            // on scroll check the loader position\n            this.window.bind( \"scroll\", $.proxy( this.checkLoaderPosition, this ) );\n        },\n\n        hide: function() {\n            $html.removeClass( \"ui-loading\" );\n\n            if ( this.options.text ) {\n                this.element.removeClass( \"ui-loader-fakefix\" );\n            }\n\n            this.window.unbind( \"scroll\", this.fakeFixLoader );\n            this.window.unbind( \"scroll\", this.checkLoaderPosition );\n        }\n    });\n\n})(jQuery, this);\n\n\n/*!\n * jQuery hashchange event - v1.3 - 7/21/2010\n * http://benalman.com/projects/jquery-hashchange-plugin/\n * \n * Copyright (c) 2010 \"Cowboy\" Ben Alman\n * Dual licensed under the MIT and GPL licenses.\n * http://benalman.com/about/license/\n */\n\n// Script: jQuery hashchange event\n//\n// *Version: 1.3, Last updated: 7/21/2010*\n// \n// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/\n// GitHub       - http://github.com/cowboy/jquery-hashchange/\n// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js\n// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (0.8kb gzipped)\n// \n// About: License\n// \n// Copyright (c) 2010 \"Cowboy\" Ben Alman,\n// Dual licensed under the MIT and GPL licenses.\n// http://benalman.com/about/license/\n// \n// About: Examples\n// \n// These working examples, complete with fully commented code, illustrate a few\n// ways in which this plugin can be used.\n// \n// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/\n// document.domain - http://benalman.com/code/projects/jquery-hashchange/examples/document_domain/\n// \n// About: Support and Testing\n// \n// Information about what version or versions of jQuery this plugin has been\n// tested with, what browsers it has been tested in, and where the unit tests\n// reside (so you can test it yourself).\n// \n// jQuery Versions - 1.2.6, 1.3.2, 1.4.1, 1.4.2\n// Browsers Tested - Internet Explorer 6-8, Firefox 2-4, Chrome 5-6, Safari 3.2-5,\n//                   Opera 9.6-10.60, iPhone 3.1, Android 1.6-2.2, BlackBerry 4.6-5.\n// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/\n// \n// About: Known issues\n// \n// While this jQuery hashchange event implementation is quite stable and\n// robust, there are a few unfortunate browser bugs surrounding expected\n// hashchange event-based behaviors, independent of any JavaScript\n// window.onhashchange abstraction. See the following examples for more\n// information:\n// \n// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/\n// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/\n// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/\n// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/\n// \n// Also note that should a browser natively support the window.onhashchange \n// event, but not report that it does, the fallback polling loop will be used.\n// \n// About: Release History\n// \n// 1.3   - (7/21/2010) Reorganized IE6/7 Iframe code to make it more\n//         \"removable\" for mobile-only development. Added IE6/7 document.title\n//         support. Attempted to make Iframe as hidden as possible by using\n//         techniques from http://www.paciellogroup.com/blog/?p=604. Added \n//         support for the \"shortcut\" format $(window).hashchange( fn ) and\n//         $(window).hashchange() like jQuery provides for built-in events.\n//         Renamed jQuery.hashchangeDelay to <jQuery.fn.hashchange.delay> and\n//         lowered its default value to 50. Added <jQuery.fn.hashchange.domain>\n//         and <jQuery.fn.hashchange.src> properties plus document-domain.html\n//         file to address access denied issues when setting document.domain in\n//         IE6/7.\n// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin\n//         from a page on another domain would cause an error in Safari 4. Also,\n//         IE6/7 Iframe is now inserted after the body (this actually works),\n//         which prevents the page from scrolling when the event is first bound.\n//         Event can also now be bound before DOM ready, but it won't be usable\n//         before then in IE6/7.\n// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug\n//         where browser version is incorrectly reported as 8.0, despite\n//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.\n// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special\n//         window.onhashchange functionality into a separate plugin for users\n//         who want just the basic event & back button support, without all the\n//         extra awesomeness that BBQ provides. This plugin will be included as\n//         part of jQuery BBQ, but also be available separately.\n\n(function($,window,undefined){\n  '$:nomunge'; // Used by YUI compressor.\n  \n  // Reused string.\n  var str_hashchange = 'hashchange',\n    \n    // Method / object references.\n    doc = document,\n    fake_onhashchange,\n    special = $.event.special,\n    \n    // Does the browser support window.onhashchange? Note that IE8 running in\n    // IE7 compatibility mode reports true for 'onhashchange' in window, even\n    // though the event isn't supported, so also test document.documentMode.\n    doc_mode = doc.documentMode,\n    supports_onhashchange = 'on' + str_hashchange in window && ( doc_mode === undefined || doc_mode > 7 );\n  \n  // Get location.hash (or what you'd expect location.hash to be) sans any\n  // leading #. Thanks for making this necessary, Firefox!\n  function get_fragment( url ) {\n    url = url || location.href;\n    return '#' + url.replace( /^[^#]*#?(.*)$/, '$1' );\n  };\n  \n  // Method: jQuery.fn.hashchange\n  // \n  // Bind a handler to the window.onhashchange event or trigger all bound\n  // window.onhashchange event handlers. This behavior is consistent with\n  // jQuery's built-in event handlers.\n  // \n  // Usage:\n  // \n  // > jQuery(window).hashchange( [ handler ] );\n  // \n  // Arguments:\n  // \n  //  handler - (Function) Optional handler to be bound to the hashchange\n  //    event. This is a \"shortcut\" for the more verbose form:\n  //    jQuery(window).bind( 'hashchange', handler ). If handler is omitted,\n  //    all bound window.onhashchange event handlers will be triggered. This\n  //    is a shortcut for the more verbose\n  //    jQuery(window).trigger( 'hashchange' ). These forms are described in\n  //    the <hashchange event> section.\n  // \n  // Returns:\n  // \n  //  (jQuery) The initial jQuery collection of elements.\n  \n  // Allow the \"shortcut\" format $(elem).hashchange( fn ) for binding and\n  // $(elem).hashchange() for triggering, like jQuery does for built-in events.\n  $.fn[ str_hashchange ] = function( fn ) {\n    return fn ? this.bind( str_hashchange, fn ) : this.trigger( str_hashchange );\n  };\n  \n  // Property: jQuery.fn.hashchange.delay\n  // \n  // The numeric interval (in milliseconds) at which the <hashchange event>\n  // polling loop executes. Defaults to 50.\n  \n  // Property: jQuery.fn.hashchange.domain\n  // \n  // If you're setting document.domain in your JavaScript, and you want hash\n  // history to work in IE6/7, not only must this property be set, but you must\n  // also set document.domain BEFORE jQuery is loaded into the page. This\n  // property is only applicable if you are supporting IE6/7 (or IE8 operating\n  // in \"IE7 compatibility\" mode).\n  // \n  // In addition, the <jQuery.fn.hashchange.src> property must be set to the\n  // path of the included \"document-domain.html\" file, which can be renamed or\n  // modified if necessary (note that the document.domain specified must be the\n  // same in both your main JavaScript as well as in this file).\n  // \n  // Usage:\n  // \n  // jQuery.fn.hashchange.domain = document.domain;\n  \n  // Property: jQuery.fn.hashchange.src\n  // \n  // If, for some reason, you need to specify an Iframe src file (for example,\n  // when setting document.domain as in <jQuery.fn.hashchange.domain>), you can\n  // do so using this property. Note that when using this property, history\n  // won't be recorded in IE6/7 until the Iframe src file loads. This property\n  // is only applicable if you are supporting IE6/7 (or IE8 operating in \"IE7\n  // compatibility\" mode).\n  // \n  // Usage:\n  // \n  // jQuery.fn.hashchange.src = 'path/to/file.html';\n  \n  $.fn[ str_hashchange ].delay = 50;\n  /*\n  $.fn[ str_hashchange ].domain = null;\n  $.fn[ str_hashchange ].src = null;\n  */\n  \n  // Event: hashchange event\n  // \n  // Fired when location.hash changes. In browsers that support it, the native\n  // HTML5 window.onhashchange event is used, otherwise a polling loop is\n  // initialized, running every <jQuery.fn.hashchange.delay> milliseconds to\n  // see if the hash has changed. In IE6/7 (and IE8 operating in \"IE7\n  // compatibility\" mode), a hidden Iframe is created to allow the back button\n  // and hash-based history to work.\n  // \n  // Usage as described in <jQuery.fn.hashchange>:\n  // \n  // > // Bind an event handler.\n  // > jQuery(window).hashchange( function(e) {\n  // >   var hash = location.hash;\n  // >   ...\n  // > });\n  // > \n  // > // Manually trigger the event handler.\n  // > jQuery(window).hashchange();\n  // \n  // A more verbose usage that allows for event namespacing:\n  // \n  // > // Bind an event handler.\n  // > jQuery(window).bind( 'hashchange', function(e) {\n  // >   var hash = location.hash;\n  // >   ...\n  // > });\n  // > \n  // > // Manually trigger the event handler.\n  // > jQuery(window).trigger( 'hashchange' );\n  // \n  // Additional Notes:\n  // \n  // * The polling loop and Iframe are not created until at least one handler\n  //   is actually bound to the 'hashchange' event.\n  // * If you need the bound handler(s) to execute immediately, in cases where\n  //   a location.hash exists on page load, via bookmark or page refresh for\n  //   example, use jQuery(window).hashchange() or the more verbose \n  //   jQuery(window).trigger( 'hashchange' ).\n  // * The event can be bound before DOM ready, but since it won't be usable\n  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is\n  //   to bind it inside a DOM ready handler.\n  \n  // Override existing $.event.special.hashchange methods (allowing this plugin\n  // to be defined after jQuery BBQ in BBQ's source code).\n  special[ str_hashchange ] = $.extend( special[ str_hashchange ], {\n    \n    // Called only when the first 'hashchange' event is bound to window.\n    setup: function() {\n      // If window.onhashchange is supported natively, there's nothing to do..\n      if ( supports_onhashchange ) { return false; }\n      \n      // Otherwise, we need to create our own. And we don't want to call this\n      // until the user binds to the event, just in case they never do, since it\n      // will create a polling loop and possibly even a hidden Iframe.\n      $( fake_onhashchange.start );\n    },\n    \n    // Called only when the last 'hashchange' event is unbound from window.\n    teardown: function() {\n      // If window.onhashchange is supported natively, there's nothing to do..\n      if ( supports_onhashchange ) { return false; }\n      \n      // Otherwise, we need to stop ours (if possible).\n      $( fake_onhashchange.stop );\n    }\n    \n  });\n  \n  // fake_onhashchange does all the work of triggering the window.onhashchange\n  // event for browsers that don't natively support it, including creating a\n  // polling loop to watch for hash changes and in IE 6/7 creating a hidden\n  // Iframe to enable back and forward.\n  fake_onhashchange = (function(){\n    var self = {},\n      timeout_id,\n      \n      // Remember the initial hash so it doesn't get triggered immediately.\n      last_hash = get_fragment(),\n      \n      fn_retval = function(val){ return val; },\n      history_set = fn_retval,\n      history_get = fn_retval;\n    \n    // Start the polling loop.\n    self.start = function() {\n      timeout_id || poll();\n    };\n    \n    // Stop the polling loop.\n    self.stop = function() {\n      timeout_id && clearTimeout( timeout_id );\n      timeout_id = undefined;\n    };\n    \n    // This polling loop checks every $.fn.hashchange.delay milliseconds to see\n    // if location.hash has changed, and triggers the 'hashchange' event on\n    // window when necessary.\n    function poll() {\n      var hash = get_fragment(),\n        history_hash = history_get( last_hash );\n      \n      if ( hash !== last_hash ) {\n        history_set( last_hash = hash, history_hash );\n        \n        $(window).trigger( str_hashchange );\n        \n      } else if ( history_hash !== last_hash ) {\n        location.href = location.href.replace( /#.*/, '' ) + history_hash;\n      }\n      \n      timeout_id = setTimeout( poll, $.fn[ str_hashchange ].delay );\n    };\n    \n    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    // vvvvvvvvvvvvvvvvvvv REMOVE IF NOT SUPPORTING IE6/7/8 vvvvvvvvvvvvvvvvvvv\n    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    window.attachEvent && !window.addEventListener && !supports_onhashchange && (function(){\n      // Not only do IE6/7 need the \"magical\" Iframe treatment, but so does IE8\n      // when running in \"IE7 compatibility\" mode.\n      \n      var iframe,\n        iframe_src;\n      \n      // When the event is bound and polling starts in IE 6/7, create a hidden\n      // Iframe for history handling.\n      self.start = function(){\n        if ( !iframe ) {\n          iframe_src = $.fn[ str_hashchange ].src;\n          iframe_src = iframe_src && iframe_src + get_fragment();\n          \n          // Create hidden Iframe. Attempt to make Iframe as hidden as possible\n          // by using techniques from http://www.paciellogroup.com/blog/?p=604.\n          iframe = $('<iframe tabindex=\"-1\" title=\"empty\"/>').hide()\n            \n            // When Iframe has completely loaded, initialize the history and\n            // start polling.\n            .one( 'load', function(){\n              iframe_src || history_set( get_fragment() );\n              poll();\n            })\n            \n            // Load Iframe src if specified, otherwise nothing.\n            .attr( 'src', iframe_src || 'javascript:0' )\n            \n            // Append Iframe after the end of the body to prevent unnecessary\n            // initial page scrolling (yes, this works).\n            .insertAfter( 'body' )[0].contentWindow;\n          \n          // Whenever `document.title` changes, update the Iframe's title to\n          // prettify the back/next history menu entries. Since IE sometimes\n          // errors with \"Unspecified error\" the very first time this is set\n          // (yes, very useful) wrap this with a try/catch block.\n          doc.onpropertychange = function(){\n            try {\n              if ( event.propertyName === 'title' ) {\n                iframe.document.title = doc.title;\n              }\n            } catch(e) {}\n          };\n          \n        }\n      };\n      \n      // Override the \"stop\" method since an IE6/7 Iframe was created. Even\n      // if there are no longer any bound event handlers, the polling loop\n      // is still necessary for back/next to work at all!\n      self.stop = fn_retval;\n      \n      // Get history by looking at the hidden Iframe's location.hash.\n      history_get = function() {\n        return get_fragment( iframe.location.href );\n      };\n      \n      // Set a new history item by opening and then closing the Iframe\n      // document, *then* setting its location.hash. If document.domain has\n      // been set, update that as well.\n      history_set = function( hash, history_hash ) {\n        var iframe_doc = iframe.document,\n          domain = $.fn[ str_hashchange ].domain;\n        \n        if ( hash !== history_hash ) {\n          // Update Iframe with any initial `document.title` that might be set.\n          iframe_doc.title = doc.title;\n          \n          // Opening the Iframe's document after it has been closed is what\n          // actually adds a history entry.\n          iframe_doc.open();\n          \n          // Set document.domain for the Iframe document as well, if necessary.\n          domain && iframe_doc.write( '\\x3cscript>document.domain=\"' + domain + '\"\\x3c/script>' );\n          \n          iframe_doc.close();\n          \n          // Update the Iframe's hash, for great justice.\n          iframe.location.hash = hash;\n        }\n      };\n      \n    })();\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    // ^^^^^^^^^^^^^^^^^^^ REMOVE IF NOT SUPPORTING IE6/7/8 ^^^^^^^^^^^^^^^^^^^\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    \n    return self;\n  })();\n  \n})(jQuery,this);\n\n\n(function( $, undefined ) {\n\n    /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */\n    window.matchMedia = window.matchMedia || (function( doc, undefined ) {\n\n        var bool,\n            docElem = doc.documentElement,\n            refNode = docElem.firstElementChild || docElem.firstChild,\n            // fakeBody required for <FF4 when executed in <head>\n            fakeBody = doc.createElement( \"body\" ),\n            div = doc.createElement( \"div\" );\n\n        div.id = \"mq-test-1\";\n        div.style.cssText = \"position:absolute;top:-100em\";\n        fakeBody.style.background = \"none\";\n        fakeBody.appendChild(div);\n\n        return function(q){\n\n            div.innerHTML = \"&shy;<style media=\\\"\" + q + \"\\\"> #mq-test-1 { width: 42px; }</style>\";\n\n            docElem.insertBefore( fakeBody, refNode );\n            bool = div.offsetWidth === 42;\n            docElem.removeChild( fakeBody );\n\n            return {\n                matches: bool,\n                media: q\n            };\n\n        };\n\n    }( document ));\n\n    // $.mobile.media uses matchMedia to return a boolean.\n    $.mobile.media = function( q ) {\n        return window.matchMedia( q ).matches;\n    };\n\n})(jQuery);\n\n    (function( $, undefined ) {\n        var support = {\n            touch: \"ontouchend\" in document\n        };\n\n        $.mobile.support = $.mobile.support || {};\n        $.extend( $.support, support );\n        $.extend( $.mobile.support, support );\n    }( jQuery ));\n\n    (function( $, undefined ) {\n        $.extend( $.support, {\n            orientation: \"orientation\" in window && \"onorientationchange\" in window\n        });\n    }( jQuery ));\n\n(function( $, undefined ) {\n\n// thx Modernizr\nfunction propExists( prop ) {\n    var uc_prop = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),\n        props = ( prop + \" \" + vendors.join( uc_prop + \" \" ) + uc_prop ).split( \" \" ),\n        v;\n\n    for ( v in props ) {\n        if ( fbCSS[ props[ v ] ] !== undefined ) {\n            return true;\n        }\n    }\n}\n\nvar fakeBody = $( \"<body>\" ).prependTo( \"html\" ),\n    fbCSS = fakeBody[ 0 ].style,\n    vendors = [ \"Webkit\", \"Moz\", \"O\" ],\n    webos = \"palmGetResource\" in window, //only used to rule out scrollTop\n    operamini = window.operamini && ({}).toString.call( window.operamini ) === \"[object OperaMini]\",\n    bb = window.blackberry && !propExists( \"-webkit-transform\" ), //only used to rule out box shadow, as it's filled opaque on BB 5 and lower\n    nokiaLTE7_3;\n\n// inline SVG support test\nfunction inlineSVG() {\n    // Thanks Modernizr & Erik Dahlstrom\n    var w = window,\n        svg = !!w.document.createElementNS && !!w.document.createElementNS( \"http://www.w3.org/2000/svg\", \"svg\" ).createSVGRect && !( w.opera && navigator.userAgent.indexOf( \"Chrome\" ) === -1 ),\n        support = function( data ) {\n            if ( !( data && svg ) ) {\n                $( \"html\" ).addClass( \"ui-nosvg\" );\n            }\n        },\n        img = new w.Image();\n\n    img.onerror = function() {\n        support( false );\n    };\n    img.onload = function() {\n        support( img.width === 1 && img.height === 1 );\n    };\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n}\n\nfunction transform3dTest() {\n    var mqProp = \"transform-3d\",\n        // Because the `translate3d` test below throws false positives in Android:\n        ret = $.mobile.media( \"(-\" + vendors.join( \"-\" + mqProp + \"),(-\" ) + \"-\" + mqProp + \"),(\" + mqProp + \")\" ),\n        el, transforms, t;\n\n    if ( ret ) {\n        return !!ret;\n    }\n\n    el = document.createElement( \"div\" );\n    transforms = {\n        // Were omitting Opera for the time being; MS uses unprefixed.\n        \"MozTransform\": \"-moz-transform\",\n        \"transform\": \"transform\"\n    };\n\n    fakeBody.append( el );\n\n    for ( t in transforms ) {\n        if ( el.style[ t ] !== undefined ) {\n            el.style[ t ] = \"translate3d( 100px, 1px, 1px )\";\n            ret = window.getComputedStyle( el ).getPropertyValue( transforms[ t ] );\n        }\n    }\n    return ( !!ret && ret !== \"none\" );\n}\n\n// Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )\nfunction baseTagTest() {\n    var fauxBase = location.protocol + \"//\" + location.host + location.pathname + \"ui-dir/\",\n        base = $( \"head base\" ),\n        fauxEle = null,\n        href = \"\",\n        link, rebase;\n\n    if ( !base.length ) {\n        base = fauxEle = $( \"<base>\", { \"href\": fauxBase }).appendTo( \"head\" );\n    } else {\n        href = base.attr( \"href\" );\n    }\n\n    link = $( \"<a href='testurl' />\" ).prependTo( fakeBody );\n    rebase = link[ 0 ].href;\n    base[ 0 ].href = href || location.pathname;\n\n    if ( fauxEle ) {\n        fauxEle.remove();\n    }\n    return rebase.indexOf( fauxBase ) === 0;\n}\n\n// Thanks Modernizr\nfunction cssPointerEventsTest() {\n    var element = document.createElement( \"x\" ),\n        documentElement = document.documentElement,\n        getComputedStyle = window.getComputedStyle,\n        supports;\n\n    if ( !( \"pointerEvents\" in element.style ) ) {\n        return false;\n    }\n\n    element.style.pointerEvents = \"auto\";\n    element.style.pointerEvents = \"x\";\n    documentElement.appendChild( element );\n    supports = getComputedStyle &&\n    getComputedStyle( element, \"\" ).pointerEvents === \"auto\";\n    documentElement.removeChild( element );\n    return !!supports;\n}\n\nfunction boundingRect() {\n    var div = document.createElement( \"div\" );\n    return typeof div.getBoundingClientRect !== \"undefined\";\n}\n\n// non-UA-based IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683\n// allows for inclusion of IE 6+, including Windows Mobile 7\n$.extend( $.mobile, { browser: {} } );\n$.mobile.browser.oldIE = (function() {\n    var v = 3,\n        div = document.createElement( \"div\" ),\n        a = div.all || [];\n\n    do {\n        div.innerHTML = \"<!--[if gt IE \" + ( ++v ) + \"]><br><![endif]-->\";\n    } while( a[0] );\n\n    return v > 4 ? v : !v;\n})();\n\nfunction fixedPosition() {\n    var w = window,\n        ua = navigator.userAgent,\n        platform = navigator.platform,\n        // Rendering engine is Webkit, and capture major version\n        wkmatch = ua.match( /AppleWebKit\\/([0-9]+)/ ),\n        wkversion = !!wkmatch && wkmatch[ 1 ],\n        ffmatch = ua.match( /Fennec\\/([0-9]+)/ ),\n        ffversion = !!ffmatch && ffmatch[ 1 ],\n        operammobilematch = ua.match( /Opera Mobi\\/([0-9]+)/ ),\n        omversion = !!operammobilematch && operammobilematch[ 1 ];\n\n    if (\n        // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)\n        ( ( platform.indexOf( \"iPhone\" ) > -1 || platform.indexOf( \"iPad\" ) > -1  || platform.indexOf( \"iPod\" ) > -1 ) && wkversion && wkversion < 534 ) ||\n        // Opera Mini\n        ( w.operamini && ({}).toString.call( w.operamini ) === \"[object OperaMini]\" ) ||\n        ( operammobilematch && omversion < 7458 )    ||\n        //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)\n        ( ua.indexOf( \"Android\" ) > -1 && wkversion && wkversion < 533 ) ||\n        // Firefox Mobile before 6.0 -\n        ( ffversion && ffversion < 6 ) ||\n        // WebOS less than 3\n        ( \"palmGetResource\" in window && wkversion && wkversion < 534 )    ||\n        // MeeGo\n        ( ua.indexOf( \"MeeGo\" ) > -1 && ua.indexOf( \"NokiaBrowser/8.5.0\" ) > -1 ) ) {\n        return false;\n    }\n\n    return true;\n}\n\n$.extend( $.support, {\n    // Note, Chrome for iOS has an extremely quirky implementation of popstate.\n    // We've chosen to take the shortest path to a bug fix here for issue #5426\n    // See the following link for information about the regex chosen\n    // https://developers.google.com/chrome/mobile/docs/user-agent#chrome_for_ios_user-agent\n    pushState: \"pushState\" in history &&\n        \"replaceState\" in history &&\n        // When running inside a FF iframe, calling replaceState causes an error\n        !( window.navigator.userAgent.indexOf( \"Firefox\" ) >= 0 && window.top !== window ) &&\n        ( window.navigator.userAgent.search(/CriOS/) === -1 ),\n\n    mediaquery: $.mobile.media( \"only all\" ),\n    cssPseudoElement: !!propExists( \"content\" ),\n    touchOverflow: !!propExists( \"overflowScrolling\" ),\n    cssTransform3d: transform3dTest(),\n    boxShadow: !!propExists( \"boxShadow\" ) && !bb,\n    fixedPosition: fixedPosition(),\n    scrollTop: (\"pageXOffset\" in window ||\n        \"scrollTop\" in document.documentElement ||\n        \"scrollTop\" in fakeBody[ 0 ]) && !webos && !operamini,\n\n    dynamicBaseTag: baseTagTest(),\n    cssPointerEvents: cssPointerEventsTest(),\n    boundingRect: boundingRect(),\n    inlineSVG: inlineSVG\n});\n\nfakeBody.remove();\n\n// $.mobile.ajaxBlacklist is used to override ajaxEnabled on platforms that have known conflicts with hash history updates (BB5, Symbian)\n// or that generally work better browsing in regular http for full page refreshes (Opera Mini)\n// Note: This detection below is used as a last resort.\n// We recommend only using these detection methods when all other more reliable/forward-looking approaches are not possible\nnokiaLTE7_3 = (function() {\n\n    var ua = window.navigator.userAgent;\n\n    //The following is an attempt to match Nokia browsers that are running Symbian/s60, with webkit, version 7.3 or older\n    return ua.indexOf( \"Nokia\" ) > -1 &&\n            ( ua.indexOf( \"Symbian/3\" ) > -1 || ua.indexOf( \"Series60/5\" ) > -1 ) &&\n            ua.indexOf( \"AppleWebKit\" ) > -1 &&\n            ua.match( /(BrowserNG|NokiaBrowser)\\/7\\.[0-3]/ );\n})();\n\n// Support conditions that must be met in order to proceed\n// default enhanced qualifications are media query support OR IE 7+\n\n$.mobile.gradeA = function() {\n    return ( ( $.support.mediaquery && $.support.cssPseudoElement ) || $.mobile.browser.oldIE && $.mobile.browser.oldIE >= 8 ) && ( $.support.boundingRect || $.fn.jquery.match(/1\\.[0-7+]\\.[0-9+]?/) !== null );\n};\n\n$.mobile.ajaxBlacklist =\n            // BlackBerry browsers, pre-webkit\n            window.blackberry && !window.WebKitPoint ||\n            // Opera Mini\n            operamini ||\n            // Symbian webkits pre 7.3\n            nokiaLTE7_3;\n\n// Lastly, this workaround is the only way we've found so far to get pre 7.3 Symbian webkit devices\n// to render the stylesheets when they're referenced before this script, as we'd recommend doing.\n// This simply reappends the CSS in place, which for some reason makes it apply\nif ( nokiaLTE7_3 ) {\n    $(function() {\n        $( \"head link[rel='stylesheet']\" ).attr( \"rel\", \"alternate stylesheet\" ).attr( \"rel\", \"stylesheet\" );\n    });\n}\n\n// For ruling out shadows via css\nif ( !$.support.boxShadow ) {\n    $( \"html\" ).addClass( \"ui-noboxshadow\" );\n}\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n    var $win = $.mobile.window, self,\n        dummyFnToInitNavigate = function() {\n        };\n\n    $.event.special.beforenavigate = {\n        setup: function() {\n            $win.on( \"navigate\", dummyFnToInitNavigate );\n        },\n\n        teardown: function() {\n            $win.off( \"navigate\", dummyFnToInitNavigate );\n        }\n    };\n\n    $.event.special.navigate = self = {\n        bound: false,\n\n        pushStateEnabled: true,\n\n        originalEventName: undefined,\n\n        // If pushstate support is present and push state support is defined to\n        // be true on the mobile namespace.\n        isPushStateEnabled: function() {\n            return $.support.pushState &&\n                $.mobile.pushStateEnabled === true &&\n                this.isHashChangeEnabled();\n        },\n\n        // !! assumes mobile namespace is present\n        isHashChangeEnabled: function() {\n            return $.mobile.hashListeningEnabled === true;\n        },\n\n        // TODO a lot of duplication between popstate and hashchange\n        popstate: function( event ) {\n            var newEvent = new $.Event( \"navigate\" ),\n                beforeNavigate = new $.Event( \"beforenavigate\" ),\n                state = event.originalEvent.state || {};\n\n            beforeNavigate.originalEvent = event;\n            $win.trigger( beforeNavigate );\n\n            if ( beforeNavigate.isDefaultPrevented() ) {\n                return;\n            }\n\n            if ( event.historyState ) {\n                $.extend(state, event.historyState);\n            }\n\n            // Make sure the original event is tracked for the end\n            // user to inspect incase they want to do something special\n            newEvent.originalEvent = event;\n\n            // NOTE we let the current stack unwind because any assignment to\n            //      location.hash will stop the world and run this event handler. By\n            //      doing this we create a similar behavior to hashchange on hash\n            //      assignment\n            setTimeout(function() {\n                $win.trigger( newEvent, {\n                    state: state\n                });\n            }, 0);\n        },\n\n        hashchange: function( event /*, data */ ) {\n            var newEvent = new $.Event( \"navigate\" ),\n                beforeNavigate = new $.Event( \"beforenavigate\" );\n\n            beforeNavigate.originalEvent = event;\n            $win.trigger( beforeNavigate );\n\n            if ( beforeNavigate.isDefaultPrevented() ) {\n                return;\n            }\n\n            // Make sure the original event is tracked for the end\n            // user to inspect incase they want to do something special\n            newEvent.originalEvent = event;\n\n            // Trigger the hashchange with state provided by the user\n            // that altered the hash\n            $win.trigger( newEvent, {\n                // Users that want to fully normalize the two events\n                // will need to do history management down the stack and\n                // add the state to the event before this binding is fired\n                // TODO consider allowing for the explicit addition of callbacks\n                //      to be fired before this value is set to avoid event timing issues\n                state: event.hashchangeState || {}\n            });\n        },\n\n        // TODO We really only want to set this up once\n        //      but I'm not clear if there's a beter way to achieve\n        //      this with the jQuery special event structure\n        setup: function( /* data, namespaces */ ) {\n            if ( self.bound ) {\n                return;\n            }\n\n            self.bound = true;\n\n            if ( self.isPushStateEnabled() ) {\n                self.originalEventName = \"popstate\";\n                $win.bind( \"popstate.navigate\", self.popstate );\n            } else if ( self.isHashChangeEnabled() ) {\n                self.originalEventName = \"hashchange\";\n                $win.bind( \"hashchange.navigate\", self.hashchange );\n            }\n        }\n    };\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n        var path, $base, dialogHashKey = \"&ui-state=dialog\";\n\n        $.mobile.path = path = {\n            uiStateKey: \"&ui-state\",\n\n            // This scary looking regular expression parses an absolute URL or its relative\n            // variants (protocol, site, document, query, and hash), into the various\n            // components (protocol, host, path, query, fragment, etc that make up the\n            // URL as well as some other commonly used sub-parts. When used with RegExp.exec()\n            // or String.match, it parses the URL into a results array that looks like this:\n            //\n            //     [0]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread#msg-content\n            //     [1]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread\n            //     [2]: http://jblas:password@mycompany.com:8080/mail/inbox\n            //     [3]: http://jblas:password@mycompany.com:8080\n            //     [4]: http:\n            //     [5]: //\n            //     [6]: jblas:password@mycompany.com:8080\n            //     [7]: jblas:password\n            //     [8]: jblas\n            //     [9]: password\n            //    [10]: mycompany.com:8080\n            //    [11]: mycompany.com\n            //    [12]: 8080\n            //    [13]: /mail/inbox\n            //    [14]: /mail/\n            //    [15]: inbox\n            //    [16]: ?msg=1234&type=unread\n            //    [17]: #msg-content\n            //\n            urlParseRE: /^\\s*(((([^:\\/#\\?]+:)?(?:(\\/\\/)((?:(([^:@\\/#\\?]+)(?:\\:([^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((\\/?(?:[^\\/\\?#]+\\/+)*)([^\\?#]*)))?(\\?[^#]+)?)(#.*)?/,\n\n            // Abstraction to address xss (Issue #4787) by removing the authority in\n            // browsers that auto-decode it. All references to location.href should be\n            // replaced with a call to this method so that it can be dealt with properly here\n            getLocation: function( url ) {\n                var parsedUrl = this.parseUrl( url || location.href ),\n                    uri = url ? parsedUrl : location,\n\n                    // Make sure to parse the url or the location object for the hash because using\n                    // location.hash is autodecoded in firefox, the rest of the url should be from\n                    // the object (location unless we're testing) to avoid the inclusion of the\n                    // authority\n                    hash = parsedUrl.hash;\n\n                // mimic the browser with an empty string when the hash is empty\n                hash = hash === \"#\" ? \"\" : hash;\n\n                return uri.protocol +\n                    parsedUrl.doubleSlash +\n                    uri.host +\n\n                    // The pathname must start with a slash if there's a protocol, because you\n                    // can't have a protocol followed by a relative path. Also, it's impossible to\n                    // calculate absolute URLs from relative ones if the absolute one doesn't have\n                    // a leading \"/\".\n                    ( ( uri.protocol !== \"\" && uri.pathname.substring( 0, 1 ) !== \"/\" ) ?\n                        \"/\" : \"\" ) +\n                    uri.pathname +\n                    uri.search +\n                    hash;\n            },\n\n            //return the original document url\n            getDocumentUrl: function( asParsedObject ) {\n                return asParsedObject ? $.extend( {}, path.documentUrl ) : path.documentUrl.href;\n            },\n\n            parseLocation: function() {\n                return this.parseUrl( this.getLocation() );\n            },\n\n            //Parse a URL into a structure that allows easy access to\n            //all of the URL components by name.\n            parseUrl: function( url ) {\n                // If we're passed an object, we'll assume that it is\n                // a parsed url object and just return it back to the caller.\n                if ( $.type( url ) === \"object\" ) {\n                    return url;\n                }\n\n                var matches = path.urlParseRE.exec( url || \"\" ) || [];\n\n                    // Create an object that allows the caller to access the sub-matches\n                    // by name. Note that IE returns an empty string instead of undefined,\n                    // like all other browsers do, so we normalize everything so its consistent\n                    // no matter what browser we're running on.\n                    return {\n                        href:         matches[  0 ] || \"\",\n                        hrefNoHash:   matches[  1 ] || \"\",\n                        hrefNoSearch: matches[  2 ] || \"\",\n                        domain:       matches[  3 ] || \"\",\n                        protocol:     matches[  4 ] || \"\",\n                        doubleSlash:  matches[  5 ] || \"\",\n                        authority:    matches[  6 ] || \"\",\n                        username:     matches[  8 ] || \"\",\n                        password:     matches[  9 ] || \"\",\n                        host:         matches[ 10 ] || \"\",\n                        hostname:     matches[ 11 ] || \"\",\n                        port:         matches[ 12 ] || \"\",\n                        pathname:     matches[ 13 ] || \"\",\n                        directory:    matches[ 14 ] || \"\",\n                        filename:     matches[ 15 ] || \"\",\n                        search:       matches[ 16 ] || \"\",\n                        hash:         matches[ 17 ] || \"\"\n                    };\n            },\n\n            //Turn relPath into an asbolute path. absPath is\n            //an optional absolute path which describes what\n            //relPath is relative to.\n            makePathAbsolute: function( relPath, absPath ) {\n                var absStack,\n                    relStack,\n                    i, d;\n\n                if ( relPath && relPath.charAt( 0 ) === \"/\" ) {\n                    return relPath;\n                }\n\n                relPath = relPath || \"\";\n                absPath = absPath ? absPath.replace( /^\\/|(\\/[^\\/]*|[^\\/]+)$/g, \"\" ) : \"\";\n\n                absStack = absPath ? absPath.split( \"/\" ) : [];\n                relStack = relPath.split( \"/\" );\n\n                for ( i = 0; i < relStack.length; i++ ) {\n                    d = relStack[ i ];\n                    switch ( d ) {\n                        case \".\":\n                            break;\n                        case \"..\":\n                            if ( absStack.length ) {\n                                absStack.pop();\n                            }\n                            break;\n                        default:\n                            absStack.push( d );\n                            break;\n                    }\n                }\n                return \"/\" + absStack.join( \"/\" );\n            },\n\n            //Returns true if both urls have the same domain.\n            isSameDomain: function( absUrl1, absUrl2 ) {\n                return path.parseUrl( absUrl1 ).domain.toLowerCase() ===\n                    path.parseUrl( absUrl2 ).domain.toLowerCase();\n            },\n\n            //Returns true for any relative variant.\n            isRelativeUrl: function( url ) {\n                // All relative Url variants have one thing in common, no protocol.\n                return path.parseUrl( url ).protocol === \"\";\n            },\n\n            //Returns true for an absolute url.\n            isAbsoluteUrl: function( url ) {\n                return path.parseUrl( url ).protocol !== \"\";\n            },\n\n            //Turn the specified realtive URL into an absolute one. This function\n            //can handle all relative variants (protocol, site, document, query, fragment).\n            makeUrlAbsolute: function( relUrl, absUrl ) {\n                if ( !path.isRelativeUrl( relUrl ) ) {\n                    return relUrl;\n                }\n\n                if ( absUrl === undefined ) {\n                    absUrl = this.documentBase;\n                }\n\n                var relObj = path.parseUrl( relUrl ),\n                    absObj = path.parseUrl( absUrl ),\n                    protocol = relObj.protocol || absObj.protocol,\n                    doubleSlash = relObj.protocol ? relObj.doubleSlash : ( relObj.doubleSlash || absObj.doubleSlash ),\n                    authority = relObj.authority || absObj.authority,\n                    hasPath = relObj.pathname !== \"\",\n                    pathname = path.makePathAbsolute( relObj.pathname || absObj.filename, absObj.pathname ),\n                    search = relObj.search || ( !hasPath && absObj.search ) || \"\",\n                    hash = relObj.hash;\n\n                return protocol + doubleSlash + authority + pathname + search + hash;\n            },\n\n            //Add search (aka query) params to the specified url.\n            addSearchParams: function( url, params ) {\n                var u = path.parseUrl( url ),\n                    p = ( typeof params === \"object\" ) ? $.param( params ) : params,\n                    s = u.search || \"?\";\n                return u.hrefNoSearch + s + ( s.charAt( s.length - 1 ) !== \"?\" ? \"&\" : \"\" ) + p + ( u.hash || \"\" );\n            },\n\n            convertUrlToDataUrl: function( absUrl ) {\n                var result = absUrl,\n                    u = path.parseUrl( absUrl );\n\n                if ( path.isEmbeddedPage( u ) ) {\n                    // For embedded pages, remove the dialog hash key as in getFilePath(),\n                    // and remove otherwise the Data Url won't match the id of the embedded Page.\n                    result = u.hash\n                        .split( dialogHashKey )[0]\n                        .replace( /^#/, \"\" )\n                        .replace( /\\?.*$/, \"\" );\n                } else if ( path.isSameDomain( u, this.documentBase ) ) {\n                    result = u.hrefNoHash.replace( this.documentBase.domain, \"\" ).split( dialogHashKey )[0];\n                }\n\n                return window.decodeURIComponent( result );\n            },\n\n            //get path from current hash, or from a file path\n            get: function( newPath ) {\n                if ( newPath === undefined ) {\n                    newPath = path.parseLocation().hash;\n                }\n                return path.stripHash( newPath ).replace( /[^\\/]*\\.[^\\/*]+$/, \"\" );\n            },\n\n            //set location hash to path\n            set: function( path ) {\n                location.hash = path;\n            },\n\n            //test if a given url (string) is a path\n            //NOTE might be exceptionally naive\n            isPath: function( url ) {\n                return ( /\\// ).test( url );\n            },\n\n            //return a url path with the window's location protocol/hostname/pathname removed\n            clean: function( url ) {\n                return url.replace( this.documentBase.domain, \"\" );\n            },\n\n            //just return the url without an initial #\n            stripHash: function( url ) {\n                return url.replace( /^#/, \"\" );\n            },\n\n            stripQueryParams: function( url ) {\n                return url.replace( /\\?.*$/, \"\" );\n            },\n\n            //remove the preceding hash, any query params, and dialog notations\n            cleanHash: function( hash ) {\n                return path.stripHash( hash.replace( /\\?.*$/, \"\" ).replace( dialogHashKey, \"\" ) );\n            },\n\n            isHashValid: function( hash ) {\n                return ( /^#[^#]+$/ ).test( hash );\n            },\n\n            //check whether a url is referencing the same domain, or an external domain or different protocol\n            //could be mailto, etc\n            isExternal: function( url ) {\n                var u = path.parseUrl( url );\n\n                return !!( u.protocol &&\n                    ( u.domain.toLowerCase() !== this.documentUrl.domain.toLowerCase() ) );\n            },\n\n            hasProtocol: function( url ) {\n                return ( /^(:?\\w+:)/ ).test( url );\n            },\n\n            isEmbeddedPage: function( url ) {\n                var u = path.parseUrl( url );\n\n                //if the path is absolute, then we need to compare the url against\n                //both the this.documentUrl and the documentBase. The main reason for this\n                //is that links embedded within external documents will refer to the\n                //application document, whereas links embedded within the application\n                //document will be resolved against the document base.\n                if ( u.protocol !== \"\" ) {\n                    return ( !this.isPath(u.hash) && u.hash && ( u.hrefNoHash === this.documentUrl.hrefNoHash || ( this.documentBaseDiffers && u.hrefNoHash === this.documentBase.hrefNoHash ) ) );\n                }\n                return ( /^#/ ).test( u.href );\n            },\n\n            squash: function( url, resolutionUrl ) {\n                var href, cleanedUrl, search, stateIndex, docUrl,\n                    isPath = this.isPath( url ),\n                    uri = this.parseUrl( url ),\n                    preservedHash = uri.hash,\n                    uiState = \"\";\n\n                // produce a url against which we can resolve the provided path\n                if ( !resolutionUrl ) {\n                    if ( isPath ) {\n                        resolutionUrl = path.getLocation();\n                    } else {\n                        docUrl = path.getDocumentUrl( true );\n                        if ( path.isPath( docUrl.hash ) ) {\n                            resolutionUrl = path.squash( docUrl.href );\n                        } else {\n                            resolutionUrl = docUrl.href;\n                        }\n                    }\n                }\n\n                // If the url is anything but a simple string, remove any preceding hash\n                // eg #foo/bar -> foo/bar\n                //    #foo -> #foo\n                cleanedUrl = isPath ? path.stripHash( url ) : url;\n\n                // If the url is a full url with a hash check if the parsed hash is a path\n                // if it is, strip the #, and use it otherwise continue without change\n                cleanedUrl = path.isPath( uri.hash ) ? path.stripHash( uri.hash ) : cleanedUrl;\n\n                // Split the UI State keys off the href\n                stateIndex = cleanedUrl.indexOf( this.uiStateKey );\n\n                // store the ui state keys for use\n                if ( stateIndex > -1 ) {\n                    uiState = cleanedUrl.slice( stateIndex );\n                    cleanedUrl = cleanedUrl.slice( 0, stateIndex );\n                }\n\n                // make the cleanedUrl absolute relative to the resolution url\n                href = path.makeUrlAbsolute( cleanedUrl, resolutionUrl );\n\n                // grab the search from the resolved url since parsing from\n                // the passed url may not yield the correct result\n                search = this.parseUrl( href ).search;\n\n                // TODO all this crap is terrible, clean it up\n                if ( isPath ) {\n                    // reject the hash if it's a path or it's just a dialog key\n                    if ( path.isPath( preservedHash ) || preservedHash.replace(\"#\", \"\").indexOf( this.uiStateKey ) === 0) {\n                        preservedHash = \"\";\n                    }\n\n                    // Append the UI State keys where it exists and it's been removed\n                    // from the url\n                    if ( uiState && preservedHash.indexOf( this.uiStateKey ) === -1) {\n                        preservedHash += uiState;\n                    }\n\n                    // make sure that pound is on the front of the hash\n                    if ( preservedHash.indexOf( \"#\" ) === -1 && preservedHash !== \"\" ) {\n                        preservedHash = \"#\" + preservedHash;\n                    }\n\n                    // reconstruct each of the pieces with the new search string and hash\n                    href = path.parseUrl( href );\n                    href = href.protocol + href.doubleSlash + href.host + href.pathname + search +\n                        preservedHash;\n                } else {\n                    href += href.indexOf( \"#\" ) > -1 ? uiState : \"#\" + uiState;\n                }\n\n                return href;\n            },\n\n            isPreservableHash: function( hash ) {\n                return hash.replace( \"#\", \"\" ).indexOf( this.uiStateKey ) === 0;\n            },\n\n            // Escape weird characters in the hash if it is to be used as a selector\n            hashToSelector: function( hash ) {\n                var hasHash = ( hash.substring( 0, 1 ) === \"#\" );\n                if ( hasHash ) {\n                    hash = hash.substring( 1 );\n                }\n                return ( hasHash ? \"#\" : \"\" ) + hash.replace( /([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~])/g, \"\\\\$1\" );\n            },\n\n            // return the substring of a filepath before the dialogHashKey, for making a server\n            // request\n            getFilePath: function( path ) {\n                return path && path.split( dialogHashKey )[0];\n            },\n\n            // check if the specified url refers to the first page in the main\n            // application document.\n            isFirstPageUrl: function( url ) {\n                // We only deal with absolute paths.\n                var u = path.parseUrl( path.makeUrlAbsolute( url, this.documentBase ) ),\n\n                    // Does the url have the same path as the document?\n                    samePath = u.hrefNoHash === this.documentUrl.hrefNoHash ||\n                        ( this.documentBaseDiffers &&\n                            u.hrefNoHash === this.documentBase.hrefNoHash ),\n\n                    // Get the first page element.\n                    fp = $.mobile.firstPage,\n\n                    // Get the id of the first page element if it has one.\n                    fpId = fp && fp[0] ? fp[0].id : undefined;\n\n                // The url refers to the first page if the path matches the document and\n                // it either has no hash value, or the hash is exactly equal to the id\n                // of the first page element.\n                return samePath &&\n                    ( !u.hash ||\n                        u.hash === \"#\" ||\n                        ( fpId && u.hash.replace( /^#/, \"\" ) === fpId ) );\n            },\n\n            // Some embedded browsers, like the web view in Phone Gap, allow\n            // cross-domain XHR requests if the document doing the request was loaded\n            // via the file:// protocol. This is usually to allow the application to\n            // \"phone home\" and fetch app specific data. We normally let the browser\n            // handle external/cross-domain urls, but if the allowCrossDomainPages\n            // option is true, we will allow cross-domain http/https requests to go\n            // through our page loading logic.\n            isPermittedCrossDomainRequest: function( docUrl, reqUrl ) {\n                return $.mobile.allowCrossDomainPages &&\n                    (docUrl.protocol === \"file:\" || docUrl.protocol === \"content:\") &&\n                    reqUrl.search( /^https?:/ ) !== -1;\n            }\n        };\n\n        path.documentUrl = path.parseLocation();\n\n        $base = $( \"head\" ).find( \"base\" );\n\n        path.documentBase = $base.length ?\n            path.parseUrl( path.makeUrlAbsolute( $base.attr( \"href\" ), path.documentUrl.href ) ) :\n            path.documentUrl;\n\n        path.documentBaseDiffers = (path.documentUrl.hrefNoHash !== path.documentBase.hrefNoHash);\n\n        //return the original document base url\n        path.getDocumentBase = function( asParsedObject ) {\n            return asParsedObject ? $.extend( {}, path.documentBase ) : path.documentBase.href;\n        };\n\n        // DEPRECATED as of 1.4.0 - remove in 1.5.0\n        $.extend( $.mobile, {\n\n            //return the original document url\n            getDocumentUrl: path.getDocumentUrl,\n\n            //return the original document base url\n            getDocumentBase: path.getDocumentBase\n        });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    $.mobile.History = function( stack, index ) {\n        this.stack = stack || [];\n        this.activeIndex = index || 0;\n    };\n\n    $.extend($.mobile.History.prototype, {\n        getActive: function() {\n            return this.stack[ this.activeIndex ];\n        },\n\n        getLast: function() {\n            return this.stack[ this.previousIndex ];\n        },\n\n        getNext: function() {\n            return this.stack[ this.activeIndex + 1 ];\n        },\n\n        getPrev: function() {\n            return this.stack[ this.activeIndex - 1 ];\n        },\n\n        // addNew is used whenever a new page is added\n        add: function( url, data ) {\n            data = data || {};\n\n            //if there's forward history, wipe it\n            if ( this.getNext() ) {\n                this.clearForward();\n            }\n\n            // if the hash is included in the data make sure the shape\n            // is consistent for comparison\n            if ( data.hash && data.hash.indexOf( \"#\" ) === -1) {\n                data.hash = \"#\" + data.hash;\n            }\n\n            data.url = url;\n            this.stack.push( data );\n            this.activeIndex = this.stack.length - 1;\n        },\n\n        //wipe urls ahead of active index\n        clearForward: function() {\n            this.stack = this.stack.slice( 0, this.activeIndex + 1 );\n        },\n\n        find: function( url, stack, earlyReturn ) {\n            stack = stack || this.stack;\n\n            var entry, i, length = stack.length, index;\n\n            for ( i = 0; i < length; i++ ) {\n                entry = stack[i];\n\n                if ( decodeURIComponent(url) === decodeURIComponent(entry.url) ||\n                    decodeURIComponent(url) === decodeURIComponent(entry.hash) ) {\n                    index = i;\n\n                    if ( earlyReturn ) {\n                        return index;\n                    }\n                }\n            }\n\n            return index;\n        },\n\n        closest: function( url ) {\n            var closest, a = this.activeIndex;\n\n            // First, take the slice of the history stack before the current index and search\n            // for a url match. If one is found, we'll avoid avoid looking through forward history\n            // NOTE the preference for backward history movement is driven by the fact that\n            //      most mobile browsers only have a dedicated back button, and users rarely use\n            //      the forward button in desktop browser anyhow\n            closest = this.find( url, this.stack.slice(0, a) );\n\n            // If nothing was found in backward history check forward. The `true`\n            // value passed as the third parameter causes the find method to break\n            // on the first match in the forward history slice. The starting index\n            // of the slice must then be added to the result to get the element index\n            // in the original history stack :( :(\n            //\n            // TODO this is hyper confusing and should be cleaned up (ugh so bad)\n            if ( closest === undefined ) {\n                closest = this.find( url, this.stack.slice(a), true );\n                closest = closest === undefined ? closest : closest + a;\n            }\n\n            return closest;\n        },\n\n        direct: function( opts ) {\n            var newActiveIndex = this.closest( opts.url ), a = this.activeIndex;\n\n            // save new page index, null check to prevent falsey 0 result\n            // record the previous index for reference\n            if ( newActiveIndex !== undefined ) {\n                this.activeIndex = newActiveIndex;\n                this.previousIndex = a;\n            }\n\n            // invoke callbacks where appropriate\n            //\n            // TODO this is also convoluted and confusing\n            if ( newActiveIndex < a ) {\n                ( opts.present || opts.back || $.noop )( this.getActive(), \"back\" );\n            } else if ( newActiveIndex > a ) {\n                ( opts.present || opts.forward || $.noop )( this.getActive(), \"forward\" );\n            } else if ( newActiveIndex === undefined && opts.missing ) {\n                opts.missing( this.getActive() );\n            }\n        }\n    });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    var path = $.mobile.path,\n        initialHref = location.href;\n\n    $.mobile.Navigator = function( history ) {\n        this.history = history;\n        this.ignoreInitialHashChange = true;\n\n        $.mobile.window.bind({\n            \"popstate.history\": $.proxy( this.popstate, this ),\n            \"hashchange.history\": $.proxy( this.hashchange, this )\n        });\n    };\n\n    $.extend($.mobile.Navigator.prototype, {\n        squash: function( url, data ) {\n            var state, href, hash = path.isPath(url) ? path.stripHash(url) : url;\n\n            href = path.squash( url );\n\n            // make sure to provide this information when it isn't explicitly set in the\n            // data object that was passed to the squash method\n            state = $.extend({\n                hash: hash,\n                url: href\n            }, data);\n\n            // replace the current url with the new href and store the state\n            // Note that in some cases we might be replacing an url with the\n            // same url. We do this anyways because we need to make sure that\n            // all of our history entries have a state object associated with\n            // them. This allows us to work around the case where $.mobile.back()\n            // is called to transition from an external page to an embedded page.\n            // In that particular case, a hashchange event is *NOT* generated by the browser.\n            // Ensuring each history entry has a state object means that onPopState()\n            // will always trigger our hashchange callback even when a hashchange event\n            // is not fired.\n            window.history.replaceState( state, state.title || document.title, href );\n\n            return state;\n        },\n\n        hash: function( url, href ) {\n            var parsed, loc, hash, resolved;\n\n            // Grab the hash for recording. If the passed url is a path\n            // we used the parsed version of the squashed url to reconstruct,\n            // otherwise we assume it's a hash and store it directly\n            parsed = path.parseUrl( url );\n            loc = path.parseLocation();\n\n            if ( loc.pathname + loc.search === parsed.pathname + parsed.search ) {\n                // If the pathname and search of the passed url is identical to the current loc\n                // then we must use the hash. Otherwise there will be no event\n                // eg, url = \"/foo/bar?baz#bang\", location.href = \"http://example.com/foo/bar?baz\"\n                hash = parsed.hash ? parsed.hash : parsed.pathname + parsed.search;\n            } else if ( path.isPath(url) ) {\n                resolved = path.parseUrl( href );\n                // If the passed url is a path, make it domain relative and remove any trailing hash\n                hash = resolved.pathname + resolved.search + (path.isPreservableHash( resolved.hash )? resolved.hash.replace( \"#\", \"\" ) : \"\");\n            } else {\n                hash = url;\n            }\n\n            return hash;\n        },\n\n        // TODO reconsider name\n        go: function( url, data, noEvents ) {\n            var state, href, hash, popstateEvent,\n                isPopStateEvent = $.event.special.navigate.isPushStateEnabled();\n\n            // Get the url as it would look squashed on to the current resolution url\n            href = path.squash( url );\n\n            // sort out what the hash sould be from the url\n            hash = this.hash( url, href );\n\n            // Here we prevent the next hash change or popstate event from doing any\n            // history management. In the case of hashchange we don't swallow it\n            // if there will be no hashchange fired (since that won't reset the value)\n            // and will swallow the following hashchange\n            if ( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {\n                this.preventNextHashChange = noEvents;\n            }\n\n            // IMPORTANT in the case where popstate is supported the event will be triggered\n            //      directly, stopping further execution - ie, interupting the flow of this\n            //      method call to fire bindings at this expression. Below the navigate method\n            //      there is a binding to catch this event and stop its propagation.\n            //\n            //      We then trigger a new popstate event on the window with a null state\n            //      so that the navigate events can conclude their work properly\n            //\n            // if the url is a path we want to preserve the query params that are available on\n            // the current url.\n            this.preventHashAssignPopState = true;\n            window.location.hash = hash;\n\n            // If popstate is enabled and the browser triggers `popstate` events when the hash\n            // is set (this often happens immediately in browsers like Chrome), then the\n            // this flag will be set to false already. If it's a browser that does not trigger\n            // a `popstate` on hash assignement or `replaceState` then we need avoid the branch\n            // that swallows the event created by the popstate generated by the hash assignment\n            // At the time of this writing this happens with Opera 12 and some version of IE\n            this.preventHashAssignPopState = false;\n\n            state = $.extend({\n                url: href,\n                hash: hash,\n                title: document.title\n            }, data);\n\n            if ( isPopStateEvent ) {\n                popstateEvent = new $.Event( \"popstate\" );\n                popstateEvent.originalEvent = {\n                    type: \"popstate\",\n                    state: null\n                };\n\n                this.squash( url, state );\n\n                // Trigger a new faux popstate event to replace the one that we\n                // caught that was triggered by the hash setting above.\n                if ( !noEvents ) {\n                    this.ignorePopState = true;\n                    $.mobile.window.trigger( popstateEvent );\n                }\n            }\n\n            // record the history entry so that the information can be included\n            // in hashchange event driven navigate events in a similar fashion to\n            // the state that's provided by popstate\n            this.history.add( state.url, state );\n        },\n\n        // This binding is intended to catch the popstate events that are fired\n        // when execution of the `$.navigate` method stops at window.location.hash = url;\n        // and completely prevent them from propagating. The popstate event will then be\n        // retriggered after execution resumes\n        //\n        // TODO grab the original event here and use it for the synthetic event in the\n        //      second half of the navigate execution that will follow this binding\n        popstate: function( event ) {\n            var hash, state;\n\n            // Partly to support our test suite which manually alters the support\n            // value to test hashchange. Partly to prevent all around weirdness\n            if ( !$.event.special.navigate.isPushStateEnabled() ) {\n                return;\n            }\n\n            // If this is the popstate triggered by the actual alteration of the hash\n            // prevent it completely. History is tracked manually\n            if ( this.preventHashAssignPopState ) {\n                this.preventHashAssignPopState = false;\n                event.stopImmediatePropagation();\n                return;\n            }\n\n            // if this is the popstate triggered after the `replaceState` call in the go\n            // method, then simply ignore it. The history entry has already been captured\n            if ( this.ignorePopState ) {\n                this.ignorePopState = false;\n                return;\n            }\n\n            // If there is no state, and the history stack length is one were\n            // probably getting the page load popstate fired by browsers like chrome\n            // avoid it and set the one time flag to false.\n            // TODO: Do we really need all these conditions? Comparing location hrefs\n            // should be sufficient.\n            if ( !event.originalEvent.state &&\n                this.history.stack.length === 1 &&\n                this.ignoreInitialHashChange ) {\n                this.ignoreInitialHashChange = false;\n\n                if ( location.href === initialHref ) {\n                    event.preventDefault();\n                    return;\n                }\n            }\n\n            // account for direct manipulation of the hash. That is, we will receive a popstate\n            // when the hash is changed by assignment, and it won't have a state associated. We\n            // then need to squash the hash. See below for handling of hash assignment that\n            // matches an existing history entry\n            // TODO it might be better to only add to the history stack\n            //      when the hash is adjacent to the active history entry\n            hash = path.parseLocation().hash;\n            if ( !event.originalEvent.state && hash ) {\n                // squash the hash that's been assigned on the URL with replaceState\n                // also grab the resulting state object for storage\n                state = this.squash( hash );\n\n                // record the new hash as an additional history entry\n                // to match the browser's treatment of hash assignment\n                this.history.add( state.url, state );\n\n                // pass the newly created state information\n                // along with the event\n                event.historyState = state;\n\n                // do not alter history, we've added a new history entry\n                // so we know where we are\n                return;\n            }\n\n            // If all else fails this is a popstate that comes from the back or forward buttons\n            // make sure to set the state of our history stack properly, and record the directionality\n            this.history.direct({\n                url: (event.originalEvent.state || {}).url || hash,\n\n                // When the url is either forward or backward in history include the entry\n                // as data on the event object for merging as data in the navigate event\n                present: function( historyEntry, direction ) {\n                    // make sure to create a new object to pass down as the navigate event data\n                    event.historyState = $.extend({}, historyEntry);\n                    event.historyState.direction = direction;\n                }\n            });\n        },\n\n        // NOTE must bind before `navigate` special event hashchange binding otherwise the\n        //      navigation data won't be attached to the hashchange event in time for those\n        //      bindings to attach it to the `navigate` special event\n        // TODO add a check here that `hashchange.navigate` is bound already otherwise it's\n        //      broken (exception?)\n        hashchange: function( event ) {\n            var history, hash;\n\n            // If hashchange listening is explicitly disabled or pushstate is supported\n            // avoid making use of the hashchange handler.\n            if (!$.event.special.navigate.isHashChangeEnabled() ||\n                $.event.special.navigate.isPushStateEnabled() ) {\n                return;\n            }\n\n            // On occasion explicitly want to prevent the next hash from propogating because we only\n            // with to alter the url to represent the new state do so here\n            if ( this.preventNextHashChange ) {\n                this.preventNextHashChange = false;\n                event.stopImmediatePropagation();\n                return;\n            }\n\n            history = this.history;\n            hash = path.parseLocation().hash;\n\n            // If this is a hashchange caused by the back or forward button\n            // make sure to set the state of our history stack properly\n            this.history.direct({\n                url: hash,\n\n                // When the url is either forward or backward in history include the entry\n                // as data on the event object for merging as data in the navigate event\n                present: function( historyEntry, direction ) {\n                    // make sure to create a new object to pass down as the navigate event data\n                    event.hashchangeState = $.extend({}, historyEntry);\n                    event.hashchangeState.direction = direction;\n                },\n\n                // When we don't find a hash in our history clearly we're aiming to go there\n                // record the entry as new for future traversal\n                //\n                // NOTE it's not entirely clear that this is the right thing to do given that we\n                //      can't know the users intention. It might be better to explicitly _not_\n                //      support location.hash assignment in preference to $.navigate calls\n                // TODO first arg to add should be the href, but it causes issues in identifying\n                //      embeded pages\n                missing: function() {\n                    history.add( hash, {\n                        hash: hash,\n                        title: document.title\n                    });\n                }\n            });\n        }\n    });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    // TODO consider queueing navigation activity until previous activities have completed\n    //      so that end users don't have to think about it. Punting for now\n    // TODO !! move the event bindings into callbacks on the navigate event\n    $.mobile.navigate = function( url, data, noEvents ) {\n        $.mobile.navigate.navigator.go( url, data, noEvents );\n    };\n\n    // expose the history on the navigate method in anticipation of full integration with\n    // existing navigation functionalty that is tightly coupled to the history information\n    $.mobile.navigate.history = new $.mobile.History();\n\n    // instantiate an instance of the navigator for use within the $.navigate method\n    $.mobile.navigate.navigator = new $.mobile.Navigator( $.mobile.navigate.history );\n\n    var loc = $.mobile.path.parseLocation();\n    $.mobile.navigate.history.add( loc.href, {hash: loc.hash} );\n})( jQuery );\n\n\n(function( $, undefined ) {\n    var props = {\n            \"animation\": {},\n            \"transition\": {}\n        },\n        testElement = document.createElement( \"a\" ),\n        vendorPrefixes = [ \"\", \"webkit-\", \"moz-\", \"o-\" ];\n\n    $.each( [ \"animation\", \"transition\" ], function( i, test ) {\n\n        // Get correct name for test\n        var testName = ( i === 0 ) ? test + \"-\" + \"name\" : test;\n\n        $.each( vendorPrefixes, function( j, prefix ) {\n            if ( testElement.style[ $.camelCase( prefix + testName ) ] !== undefined ) {\n                 props[ test ][ \"prefix\" ] = prefix;\n                return false;\n            }\n        });\n\n        // Set event and duration names for later use\n        props[ test ][ \"duration\" ] =\n            $.camelCase( props[ test ][ \"prefix\" ] + test + \"-\" + \"duration\" );\n        props[ test ][ \"event\" ] =\n            $.camelCase( props[ test ][ \"prefix\" ] + test + \"-\" + \"end\" );\n\n        // All lower case if not a vendor prop\n        if ( props[ test ][ \"prefix\" ] === \"\" ) {\n            props[ test ][ \"event\" ] = props[ test ][ \"event\" ].toLowerCase();\n        }\n    });\n\n    // If a valid prefix was found then the it is supported by the browser\n    $.support.cssTransitions = ( props[ \"transition\" ][ \"prefix\" ] !== undefined );\n    $.support.cssAnimations = ( props[ \"animation\" ][ \"prefix\" ] !== undefined );\n\n    // Remove the testElement\n    $( testElement ).remove();\n\n    // Animation complete callback\n    $.fn.animationComplete = function( callback, type, fallbackTime ) {\n        var timer, duration,\n            that = this,\n            eventBinding = function() {\n\n                // Clear the timer so we don't call callback twice\n                clearTimeout( timer );\n                callback.apply( this, arguments );\n            },\n            animationType = ( !type || type === \"animation\" ) ? \"animation\" : \"transition\";\n\n        // Make sure selected type is supported by browser\n        if ( ( $.support.cssTransitions && animationType === \"transition\" ) ||\n            ( $.support.cssAnimations && animationType === \"animation\" ) ) {\n\n            // If a fallback time was not passed set one\n            if ( fallbackTime === undefined ) {\n\n                // Make sure the was not bound to document before checking .css\n                if ( $( this ).context !== document ) {\n\n                    // Parse the durration since its in second multiple by 1000 for milliseconds\n                    // Multiply by 3 to make sure we give the animation plenty of time.\n                    duration = parseFloat(\n                        $( this ).css( props[ animationType ].duration )\n                    ) * 3000;\n                }\n\n                // If we could not read a duration use the default\n                if ( duration === 0 || duration === undefined || isNaN( duration ) ) {\n                    duration = $.fn.animationComplete.defaultDuration;\n                }\n            }\n\n            // Sets up the fallback if event never comes\n            timer = setTimeout( function() {\n                $( that ).off( props[ animationType ].event, eventBinding );\n                callback.apply( that );\n            }, duration );\n\n            // Bind the event\n            return $( this ).one( props[ animationType ].event, eventBinding );\n        } else {\n\n            // CSS animation / transitions not supported\n            // Defer execution for consistency between webkit/non webkit\n            setTimeout( $.proxy( callback, this ), 0 );\n            return $( this );\n        }\n    };\n\n    // Allow default callback to be configured on mobileInit\n    $.fn.animationComplete.defaultDuration = 1000;\n})( jQuery );\n\n// This plugin is an experiment for abstracting away the touch and mouse\n// events so that developers don't have to worry about which method of input\n// the device their document is loaded on supports.\n//\n// The idea here is to allow the developer to register listeners for the\n// basic mouse events, such as mousedown, mousemove, mouseup, and click,\n// and the plugin will take care of registering the correct listeners\n// behind the scenes to invoke the listener at the fastest possible time\n// for that device, while still retaining the order of event firing in\n// the traditional mouse environment, should multiple handlers be registered\n// on the same element for different events.\n//\n// The current version exposes the following virtual events to jQuery bind methods:\n// \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\"\n\n(function( $, window, document, undefined ) {\n\nvar dataPropertyName = \"virtualMouseBindings\",\n    touchTargetPropertyName = \"virtualTouchID\",\n    virtualEventNames = \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\".split( \" \" ),\n    touchEventProps = \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\n    mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],\n    mouseEventProps = $.event.props.concat( mouseHookProps ),\n    activeDocHandlers = {},\n    resetTimerID = 0,\n    startX = 0,\n    startY = 0,\n    didScroll = false,\n    clickBlockList = [],\n    blockMouseTriggers = false,\n    blockTouchTriggers = false,\n    eventCaptureSupported = \"addEventListener\" in document,\n    $document = $( document ),\n    nextTouchID = 1,\n    lastTouchID = 0, threshold,\n    i;\n\n$.vmouse = {\n    moveDistanceThreshold: 10,\n    clickDistanceThreshold: 10,\n    resetTimerDuration: 1500\n};\n\nfunction getNativeEvent( event ) {\n\n    while ( event && typeof event.originalEvent !== \"undefined\" ) {\n        event = event.originalEvent;\n    }\n    return event;\n}\n\nfunction createVirtualEvent( event, eventType ) {\n\n    var t = event.type,\n        oe, props, ne, prop, ct, touch, i, j, len;\n\n    event = $.Event( event );\n    event.type = eventType;\n\n    oe = event.originalEvent;\n    props = $.event.props;\n\n    // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280\n    // https://github.com/jquery/jquery-mobile/issues/3280\n    if ( t.search( /^(mouse|click)/ ) > -1 ) {\n        props = mouseEventProps;\n    }\n\n    // copy original event properties over to the new event\n    // this would happen if we could call $.event.fix instead of $.Event\n    // but we don't have a way to force an event to be fixed multiple times\n    if ( oe ) {\n        for ( i = props.length, prop; i; ) {\n            prop = props[ --i ];\n            event[ prop ] = oe[ prop ];\n        }\n    }\n\n    // make sure that if the mouse and click virtual events are generated\n    // without a .which one is defined\n    if ( t.search(/mouse(down|up)|click/) > -1 && !event.which ) {\n        event.which = 1;\n    }\n\n    if ( t.search(/^touch/) !== -1 ) {\n        ne = getNativeEvent( oe );\n        t = ne.touches;\n        ct = ne.changedTouches;\n        touch = ( t && t.length ) ? t[0] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );\n\n        if ( touch ) {\n            for ( j = 0, len = touchEventProps.length; j < len; j++) {\n                prop = touchEventProps[ j ];\n                event[ prop ] = touch[ prop ];\n            }\n        }\n    }\n\n    return event;\n}\n\nfunction getVirtualBindingFlags( element ) {\n\n    var flags = {},\n        b, k;\n\n    while ( element ) {\n\n        b = $.data( element, dataPropertyName );\n\n        for (  k in b ) {\n            if ( b[ k ] ) {\n                flags[ k ] = flags.hasVirtualBinding = true;\n            }\n        }\n        element = element.parentNode;\n    }\n    return flags;\n}\n\nfunction getClosestElementWithVirtualBinding( element, eventType ) {\n    var b;\n    while ( element ) {\n\n        b = $.data( element, dataPropertyName );\n\n        if ( b && ( !eventType || b[ eventType ] ) ) {\n            return element;\n        }\n        element = element.parentNode;\n    }\n    return null;\n}\n\nfunction enableTouchBindings() {\n    blockTouchTriggers = false;\n}\n\nfunction disableTouchBindings() {\n    blockTouchTriggers = true;\n}\n\nfunction enableMouseBindings() {\n    lastTouchID = 0;\n    clickBlockList.length = 0;\n    blockMouseTriggers = false;\n\n    // When mouse bindings are enabled, our\n    // touch bindings are disabled.\n    disableTouchBindings();\n}\n\nfunction disableMouseBindings() {\n    // When mouse bindings are disabled, our\n    // touch bindings are enabled.\n    enableTouchBindings();\n}\n\nfunction startResetTimer() {\n    clearResetTimer();\n    resetTimerID = setTimeout( function() {\n        resetTimerID = 0;\n        enableMouseBindings();\n    }, $.vmouse.resetTimerDuration );\n}\n\nfunction clearResetTimer() {\n    if ( resetTimerID ) {\n        clearTimeout( resetTimerID );\n        resetTimerID = 0;\n    }\n}\n\nfunction triggerVirtualEvent( eventType, event, flags ) {\n    var ve;\n\n    if ( ( flags && flags[ eventType ] ) ||\n                ( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {\n\n        ve = createVirtualEvent( event, eventType );\n\n        $( event.target).trigger( ve );\n    }\n\n    return ve;\n}\n\nfunction mouseEventCallback( event ) {\n    var touchID = $.data( event.target, touchTargetPropertyName ),\n        ve;\n\n    if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {\n        ve = triggerVirtualEvent( \"v\" + event.type, event );\n        if ( ve ) {\n            if ( ve.isDefaultPrevented() ) {\n                event.preventDefault();\n            }\n            if ( ve.isPropagationStopped() ) {\n                event.stopPropagation();\n            }\n            if ( ve.isImmediatePropagationStopped() ) {\n                event.stopImmediatePropagation();\n            }\n        }\n    }\n}\n\nfunction handleTouchStart( event ) {\n\n    var touches = getNativeEvent( event ).touches,\n        target, flags, t;\n\n    if ( touches && touches.length === 1 ) {\n\n        target = event.target;\n        flags = getVirtualBindingFlags( target );\n\n        if ( flags.hasVirtualBinding ) {\n\n            lastTouchID = nextTouchID++;\n            $.data( target, touchTargetPropertyName, lastTouchID );\n\n            clearResetTimer();\n\n            disableMouseBindings();\n            didScroll = false;\n\n            t = getNativeEvent( event ).touches[ 0 ];\n            startX = t.pageX;\n            startY = t.pageY;\n\n            triggerVirtualEvent( \"vmouseover\", event, flags );\n            triggerVirtualEvent( \"vmousedown\", event, flags );\n        }\n    }\n}\n\nfunction handleScroll( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    if ( !didScroll ) {\n        triggerVirtualEvent( \"vmousecancel\", event, getVirtualBindingFlags( event.target ) );\n    }\n\n    didScroll = true;\n    startResetTimer();\n}\n\nfunction handleTouchMove( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    var t = getNativeEvent( event ).touches[ 0 ],\n        didCancel = didScroll,\n        moveThreshold = $.vmouse.moveDistanceThreshold,\n        flags = getVirtualBindingFlags( event.target );\n\n        didScroll = didScroll ||\n            ( Math.abs( t.pageX - startX ) > moveThreshold ||\n                Math.abs( t.pageY - startY ) > moveThreshold );\n\n    if ( didScroll && !didCancel ) {\n        triggerVirtualEvent( \"vmousecancel\", event, flags );\n    }\n\n    triggerVirtualEvent( \"vmousemove\", event, flags );\n    startResetTimer();\n}\n\nfunction handleTouchEnd( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    disableTouchBindings();\n\n    var flags = getVirtualBindingFlags( event.target ),\n        ve, t;\n    triggerVirtualEvent( \"vmouseup\", event, flags );\n\n    if ( !didScroll ) {\n        ve = triggerVirtualEvent( \"vclick\", event, flags );\n        if ( ve && ve.isDefaultPrevented() ) {\n            // The target of the mouse events that follow the touchend\n            // event don't necessarily match the target used during the\n            // touch. This means we need to rely on coordinates for blocking\n            // any click that is generated.\n            t = getNativeEvent( event ).changedTouches[ 0 ];\n            clickBlockList.push({\n                touchID: lastTouchID,\n                x: t.clientX,\n                y: t.clientY\n            });\n\n            // Prevent any mouse events that follow from triggering\n            // virtual event notifications.\n            blockMouseTriggers = true;\n        }\n    }\n    triggerVirtualEvent( \"vmouseout\", event, flags);\n    didScroll = false;\n\n    startResetTimer();\n}\n\nfunction hasVirtualBindings( ele ) {\n    var bindings = $.data( ele, dataPropertyName ),\n        k;\n\n    if ( bindings ) {\n        for ( k in bindings ) {\n            if ( bindings[ k ] ) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nfunction dummyMouseHandler() {}\n\nfunction getSpecialEventObject( eventType ) {\n    var realType = eventType.substr( 1 );\n\n    return {\n        setup: function(/* data, namespace */) {\n            // If this is the first virtual mouse binding for this element,\n            // add a bindings object to its data.\n\n            if ( !hasVirtualBindings( this ) ) {\n                $.data( this, dataPropertyName, {} );\n            }\n\n            // If setup is called, we know it is the first binding for this\n            // eventType, so initialize the count for the eventType to zero.\n            var bindings = $.data( this, dataPropertyName );\n            bindings[ eventType ] = true;\n\n            // If this is the first virtual mouse event for this type,\n            // register a global handler on the document.\n\n            activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;\n\n            if ( activeDocHandlers[ eventType ] === 1 ) {\n                $document.bind( realType, mouseEventCallback );\n            }\n\n            // Some browsers, like Opera Mini, won't dispatch mouse/click events\n            // for elements unless they actually have handlers registered on them.\n            // To get around this, we register dummy handlers on the elements.\n\n            $( this ).bind( realType, dummyMouseHandler );\n\n            // For now, if event capture is not supported, we rely on mouse handlers.\n            if ( eventCaptureSupported ) {\n                // If this is the first virtual mouse binding for the document,\n                // register our touchstart handler on the document.\n\n                activeDocHandlers[ \"touchstart\" ] = ( activeDocHandlers[ \"touchstart\" ] || 0) + 1;\n\n                if ( activeDocHandlers[ \"touchstart\" ] === 1 ) {\n                    $document.bind( \"touchstart\", handleTouchStart )\n                        .bind( \"touchend\", handleTouchEnd )\n\n                        // On touch platforms, touching the screen and then dragging your finger\n                        // causes the window content to scroll after some distance threshold is\n                        // exceeded. On these platforms, a scroll prevents a click event from being\n                        // dispatched, and on some platforms, even the touchend is suppressed. To\n                        // mimic the suppression of the click event, we need to watch for a scroll\n                        // event. Unfortunately, some platforms like iOS don't dispatch scroll\n                        // events until *AFTER* the user lifts their finger (touchend). This means\n                        // we need to watch both scroll and touchmove events to figure out whether\n                        // or not a scroll happenens before the touchend event is fired.\n\n                        .bind( \"touchmove\", handleTouchMove )\n                        .bind( \"scroll\", handleScroll );\n                }\n            }\n        },\n\n        teardown: function(/* data, namespace */) {\n            // If this is the last virtual binding for this eventType,\n            // remove its global handler from the document.\n\n            --activeDocHandlers[ eventType ];\n\n            if ( !activeDocHandlers[ eventType ] ) {\n                $document.unbind( realType, mouseEventCallback );\n            }\n\n            if ( eventCaptureSupported ) {\n                // If this is the last virtual mouse binding in existence,\n                // remove our document touchstart listener.\n\n                --activeDocHandlers[ \"touchstart\" ];\n\n                if ( !activeDocHandlers[ \"touchstart\" ] ) {\n                    $document.unbind( \"touchstart\", handleTouchStart )\n                        .unbind( \"touchmove\", handleTouchMove )\n                        .unbind( \"touchend\", handleTouchEnd )\n                        .unbind( \"scroll\", handleScroll );\n                }\n            }\n\n            var $this = $( this ),\n                bindings = $.data( this, dataPropertyName );\n\n            // teardown may be called when an element was\n            // removed from the DOM. If this is the case,\n            // jQuery core may have already stripped the element\n            // of any data bindings so we need to check it before\n            // using it.\n            if ( bindings ) {\n                bindings[ eventType ] = false;\n            }\n\n            // Unregister the dummy event handler.\n\n            $this.unbind( realType, dummyMouseHandler );\n\n            // If this is the last virtual mouse binding on the\n            // element, remove the binding data from the element.\n\n            if ( !hasVirtualBindings( this ) ) {\n                $this.removeData( dataPropertyName );\n            }\n        }\n    };\n}\n\n// Expose our custom events to the jQuery bind/unbind mechanism.\n\nfor ( i = 0; i < virtualEventNames.length; i++ ) {\n    $.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );\n}\n\n// Add a capture click handler to block clicks.\n// Note that we require event capture support for this so if the device\n// doesn't support it, we punt for now and rely solely on mouse events.\nif ( eventCaptureSupported ) {\n    document.addEventListener( \"click\", function( e ) {\n        var cnt = clickBlockList.length,\n            target = e.target,\n            x, y, ele, i, o, touchID;\n\n        if ( cnt ) {\n            x = e.clientX;\n            y = e.clientY;\n            threshold = $.vmouse.clickDistanceThreshold;\n\n            // The idea here is to run through the clickBlockList to see if\n            // the current click event is in the proximity of one of our\n            // vclick events that had preventDefault() called on it. If we find\n            // one, then we block the click.\n            //\n            // Why do we have to rely on proximity?\n            //\n            // Because the target of the touch event that triggered the vclick\n            // can be different from the target of the click event synthesized\n            // by the browser. The target of a mouse/click event that is synthesized\n            // from a touch event seems to be implementation specific. For example,\n            // some browsers will fire mouse/click events for a link that is near\n            // a touch event, even though the target of the touchstart/touchend event\n            // says the user touched outside the link. Also, it seems that with most\n            // browsers, the target of the mouse/click event is not calculated until the\n            // time it is dispatched, so if you replace an element that you touched\n            // with another element, the target of the mouse/click will be the new\n            // element underneath that point.\n            //\n            // Aside from proximity, we also check to see if the target and any\n            // of its ancestors were the ones that blocked a click. This is necessary\n            // because of the strange mouse/click target calculation done in the\n            // Android 2.1 browser, where if you click on an element, and there is a\n            // mouse/click handler on one of its ancestors, the target will be the\n            // innermost child of the touched element, even if that child is no where\n            // near the point of touch.\n\n            ele = target;\n\n            while ( ele ) {\n                for ( i = 0; i < cnt; i++ ) {\n                    o = clickBlockList[ i ];\n                    touchID = 0;\n\n                    if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||\n                                $.data( ele, touchTargetPropertyName ) === o.touchID ) {\n                        // XXX: We may want to consider removing matches from the block list\n                        //      instead of waiting for the reset timer to fire.\n                        e.preventDefault();\n                        e.stopPropagation();\n                        return;\n                    }\n                }\n                ele = ele.parentNode;\n            }\n        }\n    }, true);\n}\n})( jQuery, window, document );\n\n\n(function( $, window, undefined ) {\n    var $document = $( document ),\n        supportTouch = $.mobile.support.touch,\n        scrollEvent = \"touchmove scroll\",\n        touchStartEvent = supportTouch ? \"touchstart\" : \"mousedown\",\n        touchStopEvent = supportTouch ? \"touchend\" : \"mouseup\",\n        touchMoveEvent = supportTouch ? \"touchmove\" : \"mousemove\";\n\n    // setup new event shortcuts\n    $.each( ( \"touchstart touchmove touchend \" +\n        \"tap taphold \" +\n        \"swipe swipeleft swiperight \" +\n        \"scrollstart scrollstop\" ).split( \" \" ), function( i, name ) {\n\n        $.fn[ name ] = function( fn ) {\n            return fn ? this.bind( name, fn ) : this.trigger( name );\n        };\n\n        // jQuery < 1.8\n        if ( $.attrFn ) {\n            $.attrFn[ name ] = true;\n        }\n    });\n\n    function triggerCustomEvent( obj, eventType, event, bubble ) {\n        var originalType = event.type;\n        event.type = eventType;\n        if ( bubble ) {\n            $.event.trigger( event, undefined, obj );\n        } else {\n            $.event.dispatch.call( obj, event );\n        }\n        event.type = originalType;\n    }\n\n    // also handles scrollstop\n    $.event.special.scrollstart = {\n\n        enabled: true,\n        setup: function() {\n\n            var thisObject = this,\n                $this = $( thisObject ),\n                scrolling,\n                timer;\n\n            function trigger( event, state ) {\n                scrolling = state;\n                triggerCustomEvent( thisObject, scrolling ? \"scrollstart\" : \"scrollstop\", event );\n            }\n\n            // iPhone triggers scroll after a small delay; use touchmove instead\n            $this.bind( scrollEvent, function( event ) {\n\n                if ( !$.event.special.scrollstart.enabled ) {\n                    return;\n                }\n\n                if ( !scrolling ) {\n                    trigger( event, true );\n                }\n\n                clearTimeout( timer );\n                timer = setTimeout( function() {\n                    trigger( event, false );\n                }, 50 );\n            });\n        },\n        teardown: function() {\n            $( this ).unbind( scrollEvent );\n        }\n    };\n\n    // also handles taphold\n    $.event.special.tap = {\n        tapholdThreshold: 750,\n        emitTapOnTaphold: true,\n        setup: function() {\n            var thisObject = this,\n                $this = $( thisObject ),\n                isTaphold = false;\n\n            $this.bind( \"vmousedown\", function( event ) {\n                isTaphold = false;\n                if ( event.which && event.which !== 1 ) {\n                    return false;\n                }\n\n                var origTarget = event.target,\n                    timer;\n\n                function clearTapTimer() {\n                    clearTimeout( timer );\n                }\n\n                function clearTapHandlers() {\n                    clearTapTimer();\n\n                    $this.unbind( \"vclick\", clickHandler )\n                        .unbind( \"vmouseup\", clearTapTimer );\n                    $document.unbind( \"vmousecancel\", clearTapHandlers );\n                }\n\n                function clickHandler( event ) {\n                    clearTapHandlers();\n\n                    // ONLY trigger a 'tap' event if the start target is\n                    // the same as the stop target.\n                    if ( !isTaphold && origTarget === event.target ) {\n                        triggerCustomEvent( thisObject, \"tap\", event );\n                    } else if ( isTaphold ) {\n                        event.preventDefault();\n                    }\n                }\n\n                $this.bind( \"vmouseup\", clearTapTimer )\n                    .bind( \"vclick\", clickHandler );\n                $document.bind( \"vmousecancel\", clearTapHandlers );\n\n                timer = setTimeout( function() {\n                    if ( !$.event.special.tap.emitTapOnTaphold ) {\n                        isTaphold = true;\n                    }\n                    triggerCustomEvent( thisObject, \"taphold\", $.Event( \"taphold\", { target: origTarget } ) );\n                }, $.event.special.tap.tapholdThreshold );\n            });\n        },\n        teardown: function() {\n            $( this ).unbind( \"vmousedown\" ).unbind( \"vclick\" ).unbind( \"vmouseup\" );\n            $document.unbind( \"vmousecancel\" );\n        }\n    };\n\n    // Also handles swipeleft, swiperight\n    $.event.special.swipe = {\n\n        // More than this horizontal displacement, and we will suppress scrolling.\n        scrollSupressionThreshold: 30,\n\n        // More time than this, and it isn't a swipe.\n        durationThreshold: 1000,\n\n        // Swipe horizontal displacement must be more than this.\n        horizontalDistanceThreshold: 30,\n\n        // Swipe vertical displacement must be less than this.\n        verticalDistanceThreshold: 30,\n\n        getLocation: function ( event ) {\n            var winPageX = window.pageXOffset,\n                winPageY = window.pageYOffset,\n                x = event.clientX,\n                y = event.clientY;\n\n            if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||\n                event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {\n\n                // iOS4 clientX/clientY have the value that should have been\n                // in pageX/pageY. While pageX/page/ have the value 0\n                x = x - winPageX;\n                y = y - winPageY;\n            } else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {\n\n                // Some Android browsers have totally bogus values for clientX/Y\n                // when scrolling/zooming a page. Detectable since clientX/clientY\n                // should never be smaller than pageX/pageY minus page scroll\n                x = event.pageX - winPageX;\n                y = event.pageY - winPageY;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        },\n\n        start: function( event ) {\n            var data = event.originalEvent.touches ?\n                    event.originalEvent.touches[ 0 ] : event,\n                location = $.event.special.swipe.getLocation( data );\n            return {\n                        time: ( new Date() ).getTime(),\n                        coords: [ location.x, location.y ],\n                        origin: $( event.target )\n                    };\n        },\n\n        stop: function( event ) {\n            var data = event.originalEvent.touches ?\n                    event.originalEvent.touches[ 0 ] : event,\n                location = $.event.special.swipe.getLocation( data );\n            return {\n                        time: ( new Date() ).getTime(),\n                        coords: [ location.x, location.y ]\n                    };\n        },\n\n        handleSwipe: function( start, stop, thisObject, origTarget ) {\n            if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&\n                Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&\n                Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {\n                var direction = start.coords[0] > stop.coords[ 0 ] ? \"swipeleft\" : \"swiperight\";\n\n                triggerCustomEvent( thisObject, \"swipe\", $.Event( \"swipe\", { target: origTarget, swipestart: start, swipestop: stop }), true );\n                triggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );\n                return true;\n            }\n            return false;\n\n        },\n\n        // This serves as a flag to ensure that at most one swipe event event is\n        // in work at any given time\n        eventInProgress: false,\n\n        setup: function() {\n            var events,\n                thisObject = this,\n                $this = $( thisObject ),\n                context = {};\n\n            // Retrieve the events data for this element and add the swipe context\n            events = $.data( this, \"mobile-events\" );\n            if ( !events ) {\n                events = { length: 0 };\n                $.data( this, \"mobile-events\", events );\n            }\n            events.length++;\n            events.swipe = context;\n\n            context.start = function( event ) {\n\n                // Bail if we're already working on a swipe event\n                if ( $.event.special.swipe.eventInProgress ) {\n                    return;\n                }\n                $.event.special.swipe.eventInProgress = true;\n\n                var stop,\n                    start = $.event.special.swipe.start( event ),\n                    origTarget = event.target,\n                    emitted = false;\n\n                context.move = function( event ) {\n                    if ( !start || event.isDefaultPrevented() ) {\n                        return;\n                    }\n\n                    stop = $.event.special.swipe.stop( event );\n                    if ( !emitted ) {\n                        emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );\n                        if ( emitted ) {\n\n                            // Reset the context to make way for the next swipe event\n                            $.event.special.swipe.eventInProgress = false;\n                        }\n                    }\n                    // prevent scrolling\n                    if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {\n                        event.preventDefault();\n                    }\n                };\n\n                context.stop = function() {\n                        emitted = true;\n\n                        // Reset the context to make way for the next swipe event\n                        $.event.special.swipe.eventInProgress = false;\n                        $document.off( touchMoveEvent, context.move );\n                        context.move = null;\n                };\n\n                $document.on( touchMoveEvent, context.move )\n                    .one( touchStopEvent, context.stop );\n            };\n            $this.on( touchStartEvent, context.start );\n        },\n\n        teardown: function() {\n            var events, context;\n\n            events = $.data( this, \"mobile-events\" );\n            if ( events ) {\n                context = events.swipe;\n                delete events.swipe;\n                events.length--;\n                if ( events.length === 0 ) {\n                    $.removeData( this, \"mobile-events\" );\n                }\n            }\n\n            if ( context ) {\n                if ( context.start ) {\n                    $( this ).off( touchStartEvent, context.start );\n                }\n                if ( context.move ) {\n                    $document.off( touchMoveEvent, context.move );\n                }\n                if ( context.stop ) {\n                    $document.off( touchStopEvent, context.stop );\n                }\n            }\n        }\n    };\n    $.each({\n        scrollstop: \"scrollstart\",\n        taphold: \"tap\",\n        swipeleft: \"swipe.left\",\n        swiperight: \"swipe.right\"\n    }, function( event, sourceEvent ) {\n\n        $.event.special[ event ] = {\n            setup: function() {\n                $( this ).bind( sourceEvent, $.noop );\n            },\n            teardown: function() {\n                $( this ).unbind( sourceEvent );\n            }\n        };\n    });\n\n})( jQuery, this );\n\n\n    // throttled resize event\n    (function( $ ) {\n        $.event.special.throttledresize = {\n            setup: function() {\n                $( this ).bind( \"resize\", handler );\n            },\n            teardown: function() {\n                $( this ).unbind( \"resize\", handler );\n            }\n        };\n\n        var throttle = 250,\n            handler = function() {\n                curr = ( new Date() ).getTime();\n                diff = curr - lastCall;\n\n                if ( diff >= throttle ) {\n\n                    lastCall = curr;\n                    $( this ).trigger( \"throttledresize\" );\n\n                } else {\n\n                    if ( heldCall ) {\n                        clearTimeout( heldCall );\n                    }\n\n                    // Promise a held call will still execute\n                    heldCall = setTimeout( handler, throttle - diff );\n                }\n            },\n            lastCall = 0,\n            heldCall,\n            curr,\n            diff;\n    })( jQuery );\n\n\n(function( $, window ) {\n    var win = $( window ),\n        event_name = \"orientationchange\",\n        get_orientation,\n        last_orientation,\n        initial_orientation_is_landscape,\n        initial_orientation_is_default,\n        portrait_map = { \"0\": true, \"180\": true },\n        ww, wh, landscape_threshold;\n\n    // It seems that some device/browser vendors use window.orientation values 0 and 180 to\n    // denote the \"default\" orientation. For iOS devices, and most other smart-phones tested,\n    // the default orientation is always \"portrait\", but in some Android and RIM based tablets,\n    // the default orientation is \"landscape\". The following code attempts to use the window\n    // dimensions to figure out what the current orientation is, and then makes adjustments\n    // to the to the portrait_map if necessary, so that we can properly decode the\n    // window.orientation value whenever get_orientation() is called.\n    //\n    // Note that we used to use a media query to figure out what the orientation the browser\n    // thinks it is in:\n    //\n    //     initial_orientation_is_landscape = $.mobile.media(\"all and (orientation: landscape)\");\n    //\n    // but there was an iPhone/iPod Touch bug beginning with iOS 4.2, up through iOS 5.1,\n    // where the browser *ALWAYS* applied the landscape media query. This bug does not\n    // happen on iPad.\n\n    if ( $.support.orientation ) {\n\n        // Check the window width and height to figure out what the current orientation\n        // of the device is at this moment. Note that we've initialized the portrait map\n        // values to 0 and 180, *AND* we purposely check for landscape so that if we guess\n        // wrong, , we default to the assumption that portrait is the default orientation.\n        // We use a threshold check below because on some platforms like iOS, the iPhone\n        // form-factor can report a larger width than height if the user turns on the\n        // developer console. The actual threshold value is somewhat arbitrary, we just\n        // need to make sure it is large enough to exclude the developer console case.\n\n        ww = window.innerWidth || win.width();\n        wh = window.innerHeight || win.height();\n        landscape_threshold = 50;\n\n        initial_orientation_is_landscape = ww > wh && ( ww - wh ) > landscape_threshold;\n\n        // Now check to see if the current window.orientation is 0 or 180.\n        initial_orientation_is_default = portrait_map[ window.orientation ];\n\n        // If the initial orientation is landscape, but window.orientation reports 0 or 180, *OR*\n        // if the initial orientation is portrait, but window.orientation reports 90 or -90, we\n        // need to flip our portrait_map values because landscape is the default orientation for\n        // this device/browser.\n        if ( ( initial_orientation_is_landscape && initial_orientation_is_default ) || ( !initial_orientation_is_landscape && !initial_orientation_is_default ) ) {\n            portrait_map = { \"-90\": true, \"90\": true };\n        }\n    }\n\n    $.event.special.orientationchange = $.extend( {}, $.event.special.orientationchange, {\n        setup: function() {\n            // If the event is supported natively, return false so that jQuery\n            // will bind to the event using DOM methods.\n            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {\n                return false;\n            }\n\n            // Get the current orientation to avoid initial double-triggering.\n            last_orientation = get_orientation();\n\n            // Because the orientationchange event doesn't exist, simulate the\n            // event by testing window dimensions on resize.\n            win.bind( \"throttledresize\", handler );\n        },\n        teardown: function() {\n            // If the event is not supported natively, return false so that\n            // jQuery will unbind the event using DOM methods.\n            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {\n                return false;\n            }\n\n            // Because the orientationchange event doesn't exist, unbind the\n            // resize event handler.\n            win.unbind( \"throttledresize\", handler );\n        },\n        add: function( handleObj ) {\n            // Save a reference to the bound event handler.\n            var old_handler = handleObj.handler;\n\n            handleObj.handler = function( event ) {\n                // Modify event object, adding the .orientation property.\n                event.orientation = get_orientation();\n\n                // Call the originally-bound event handler and return its result.\n                return old_handler.apply( this, arguments );\n            };\n        }\n    });\n\n    // If the event is not supported natively, this handler will be bound to\n    // the window resize event to simulate the orientationchange event.\n    function handler() {\n        // Get the current orientation.\n        var orientation = get_orientation();\n\n        if ( orientation !== last_orientation ) {\n            // The orientation has changed, so trigger the orientationchange event.\n            last_orientation = orientation;\n            win.trigger( event_name );\n        }\n    }\n\n    // Get the current page orientation. This method is exposed publicly, should it\n    // be needed, as jQuery.event.special.orientationchange.orientation()\n    $.event.special.orientationchange.orientation = get_orientation = function() {\n        var isPortrait = true, elem = document.documentElement;\n\n        // prefer window orientation to the calculation based on screensize as\n        // the actual screen resize takes place before or after the orientation change event\n        // has been fired depending on implementation (eg android 2.3 is before, iphone after).\n        // More testing is required to determine if a more reliable method of determining the new screensize\n        // is possible when orientationchange is fired. (eg, use media queries + element + opacity)\n        if ( $.support.orientation ) {\n            // if the window orientation registers as 0 or 180 degrees report\n            // portrait, otherwise landscape\n            isPortrait = portrait_map[ window.orientation ];\n        } else {\n            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;\n        }\n\n        return isPortrait ? \"portrait\" : \"landscape\";\n    };\n\n    $.fn[ event_name ] = function( fn ) {\n        return fn ? this.bind( event_name, fn ) : this.trigger( event_name );\n    };\n\n    // jQuery < 1.8\n    if ( $.attrFn ) {\n        $.attrFn[ event_name ] = true;\n    }\n\n}( jQuery, this ));\n\n\n\n\n(function( $, undefined ) {\n\n    // existing base tag?\n    var baseElement = $( \"head\" ).children( \"base\" ),\n\n    // base element management, defined depending on dynamic base tag support\n    // TODO move to external widget\n    base = {\n\n        // define base element, for use in routing asset urls that are referenced\n        // in Ajax-requested markup\n        element: ( baseElement.length ? baseElement :\n            $( \"<base>\", { href: $.mobile.path.documentBase.hrefNoHash } ).prependTo( $( \"head\" ) ) ),\n\n        linkSelector: \"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]\",\n\n        // set the generated BASE element's href to a new page's base path\n        set: function( href ) {\n\n            // we should do nothing if the user wants to manage their url base\n            // manually\n            if ( !$.mobile.dynamicBaseEnabled ) {\n                return;\n            }\n\n            // we should use the base tag if we can manipulate it dynamically\n            if ( $.support.dynamicBaseTag ) {\n                base.element.attr( \"href\",\n                    $.mobile.path.makeUrlAbsolute( href, $.mobile.path.documentBase ) );\n            }\n        },\n\n        rewrite: function( href, page ) {\n            var newPath = $.mobile.path.get( href );\n\n            page.find( base.linkSelector ).each(function( i, link ) {\n                var thisAttr = $( link ).is( \"[href]\" ) ? \"href\" :\n                    $( link ).is( \"[src]\" ) ? \"src\" : \"action\",\n                theLocation = $.mobile.path.parseLocation(),\n                thisUrl = $( link ).attr( thisAttr );\n\n                // XXX_jblas: We need to fix this so that it removes the document\n                //            base URL, and then prepends with the new page URL.\n                // if full path exists and is same, chop it - helps IE out\n                thisUrl = thisUrl.replace( theLocation.protocol + theLocation.doubleSlash +\n                    theLocation.host + theLocation.pathname, \"\" );\n\n                if ( !/^(\\w+:|#|\\/)/.test( thisUrl ) ) {\n                    $( link ).attr( thisAttr, newPath + thisUrl );\n                }\n            });\n        },\n\n        // set the generated BASE element's href to a new page's base path\n        reset: function(/* href */) {\n            base.element.attr( \"href\", $.mobile.path.documentBase.hrefNoSearch );\n        }\n    };\n\n    $.mobile.base = base;\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n$.mobile.widgets = {};\n\nvar originalWidget = $.widget,\n\n    // Record the original, non-mobileinit-modified version of $.mobile.keepNative\n    // so we can later determine whether someone has modified $.mobile.keepNative\n    keepNativeFactoryDefault = $.mobile.keepNative;\n\n$.widget = (function( orig ) {\n    return function() {\n        var constructor = orig.apply( this, arguments ),\n            name = constructor.prototype.widgetName;\n\n        constructor.initSelector = ( ( constructor.prototype.initSelector !== undefined ) ?\n            constructor.prototype.initSelector : \":jqmData(role='\" + name + \"')\" );\n\n        $.mobile.widgets[ name ] = constructor;\n\n        return constructor;\n    };\n})( $.widget );\n\n// Make sure $.widget still has bridge and extend methods\n$.extend( $.widget, originalWidget );\n\n// For backcompat remove in 1.5\n$.mobile.document.on( \"create\", function( event ) {\n    $( event.target ).enhanceWithin();\n});\n\n$.widget( \"mobile.page\", {\n    options: {\n        theme: \"a\",\n        domCache: false,\n\n        // Deprecated in 1.4 remove in 1.5\n        keepNativeDefault: $.mobile.keepNative,\n\n        // Deprecated in 1.4 remove in 1.5\n        contentTheme: null,\n        enhanced: false\n    },\n\n    // DEPRECATED for > 1.4\n    // TODO remove at 1.5\n    _createWidget: function() {\n        $.Widget.prototype._createWidget.apply( this, arguments );\n        this._trigger( \"init\" );\n    },\n\n    _create: function() {\n        // If false is returned by the callbacks do not create the page\n        if ( this._trigger( \"beforecreate\" ) === false ) {\n            return false;\n        }\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( this.element, {\n            pagebeforehide: \"removeContainerBackground\",\n            pagebeforeshow: \"_handlePageBeforeShow\"\n        });\n\n        this.element.enhanceWithin();\n        // Dialog widget is deprecated in 1.4 remove this in 1.5\n        if ( $.mobile.getAttribute( this.element[0], \"role\" ) === \"dialog\" && $.mobile.dialog ) {\n            this.element.dialog();\n        }\n    },\n\n    _enhance: function () {\n        var attrPrefix = \"data-\" + $.mobile.ns,\n            self = this;\n\n        if ( this.options.role ) {\n            this.element.attr( \"data-\" + $.mobile.ns + \"role\", this.options.role );\n        }\n\n        this.element\n            .attr( \"tabindex\", \"0\" )\n            .addClass( \"ui-page ui-page-theme-\" + this.options.theme );\n\n        // Manipulation of content os Deprecated as of 1.4 remove in 1.5\n        this.element.find( \"[\" + attrPrefix + \"role='content']\" ).each( function() {\n            var $this = $( this ),\n                theme = this.getAttribute( attrPrefix + \"theme\" ) || undefined;\n                self.options.contentTheme = theme || self.options.contentTheme || ( self.options.dialog && self.options.theme ) || ( self.element.jqmData(\"role\") === \"dialog\" &&  self.options.theme );\n                $this.addClass( \"ui-content\" );\n                if ( self.options.contentTheme ) {\n                    $this.addClass( \"ui-body-\" + ( self.options.contentTheme ) );\n                }\n                // Add ARIA role\n                $this.attr( \"role\", \"main\" ).addClass( \"ui-content\" );\n        });\n    },\n\n    bindRemove: function( callback ) {\n        var page = this.element;\n\n        // when dom caching is not enabled or the page is embedded bind to remove the page on hide\n        if ( !page.data( \"mobile-page\" ).options.domCache &&\n            page.is( \":jqmData(external-page='true')\" ) ) {\n\n            // TODO use _on - that is, sort out why it doesn't work in this case\n            page.bind( \"pagehide.remove\", callback || function( e, data ) {\n\n                //check if this is a same page transition and if so don't remove the page\n                if( !data.samePage ){\n                    var $this = $( this ),\n                        prEvent = new $.Event( \"pageremove\" );\n\n                    $this.trigger( prEvent );\n\n                    if ( !prEvent.isDefaultPrevented() ) {\n                        $this.removeWithDependents();\n                    }\n                }\n            });\n        }\n    },\n\n    _setOptions: function( o ) {\n        if ( o.theme !== undefined ) {\n            this.element.removeClass( \"ui-page-theme-\" + this.options.theme ).addClass( \"ui-page-theme-\" + o.theme );\n        }\n\n        if ( o.contentTheme !== undefined ) {\n            this.element.find( \"[data-\" + $.mobile.ns + \"='content']\" ).removeClass( \"ui-body-\" + this.options.contentTheme )\n                .addClass( \"ui-body-\" + o.contentTheme );\n        }\n    },\n\n    _handlePageBeforeShow: function(/* e */) {\n        this.setContainerBackground();\n    },\n    // Deprecated in 1.4 remove in 1.5\n    removeContainerBackground: function() {\n        this.element.closest( \":mobile-pagecontainer\" ).pagecontainer({ \"theme\": \"none\" });\n    },\n    // Deprecated in 1.4 remove in 1.5\n    // set the page container background to the page theme\n    setContainerBackground: function( theme ) {\n        this.element.parent().pagecontainer( { \"theme\": theme || this.options.theme } );\n    },\n    // Deprecated in 1.4 remove in 1.5\n    keepNativeSelector: function() {\n        var options = this.options,\n            keepNative = $.trim( options.keepNative || \"\" ),\n            globalValue = $.trim( $.mobile.keepNative ),\n            optionValue = $.trim( options.keepNativeDefault ),\n\n            // Check if $.mobile.keepNative has changed from the factory default\n            newDefault = ( keepNativeFactoryDefault === globalValue ?\n                \"\" : globalValue ),\n\n            // If $.mobile.keepNative has not changed, use options.keepNativeDefault\n            oldDefault = ( newDefault === \"\" ? optionValue : \"\" );\n\n        // Concatenate keepNative selectors from all sources where the value has\n        // changed or, if nothing has changed, return the default\n        return ( ( keepNative ? [ keepNative ] : [] )\n            .concat( newDefault ? [ newDefault ] : [] )\n            .concat( oldDefault ? [ oldDefault ] : [] )\n            .join( \", \" ) );\n    }\n});\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.pagecontainer\", {\n        options: {\n            theme: \"a\"\n        },\n\n        initSelector: false,\n\n        _create: function() {\n            this._trigger( \"beforecreate\" );\n            this.setLastScrollEnabled = true;\n\n            this._on( this.window, {\n                // disable an scroll setting when a hashchange has been fired,\n                // this only works because the recording of the scroll position\n                // is delayed for 100ms after the browser might have changed the\n                // position because of the hashchange\n                navigate: \"_disableRecordScroll\",\n\n                // bind to scrollstop for the first page, \"pagechange\" won't be\n                // fired in that case\n                scrollstop: \"_delayedRecordScroll\"\n            });\n\n            // TODO consider moving the navigation handler OUT of widget into\n            //      some other object as glue between the navigate event and the\n            //      content widget load and change methods\n            this._on( this.window, { navigate: \"_filterNavigateEvents\" });\n\n            // TODO move from page* events to content* events\n            this._on({ pagechange: \"_afterContentChange\" });\n\n            // handle initial hashchange from chrome :(\n            this.window.one( \"navigate\", $.proxy(function() {\n                this.setLastScrollEnabled = true;\n            }, this));\n        },\n\n        _setOptions: function( options ) {\n            if ( options.theme !== undefined && options.theme !== \"none\" ) {\n                this.element.removeClass( \"ui-overlay-\" + this.options.theme )\n                    .addClass( \"ui-overlay-\" + options.theme );\n            } else if ( options.theme !== undefined ) {\n                this.element.removeClass( \"ui-overlay-\" + this.options.theme );\n            }\n\n            this._super( options );\n        },\n\n        _disableRecordScroll: function() {\n            this.setLastScrollEnabled = false;\n        },\n\n        _enableRecordScroll: function() {\n            this.setLastScrollEnabled = true;\n        },\n\n        // TODO consider the name here, since it's purpose specific\n        _afterContentChange: function() {\n            // once the page has changed, re-enable the scroll recording\n            this.setLastScrollEnabled = true;\n\n            // remove any binding that previously existed on the get scroll\n            // which may or may not be different than the scroll element\n            // determined for this page previously\n            this._off( this.window, \"scrollstop\" );\n\n            // determine and bind to the current scoll element which may be the\n            // window or in the case of touch overflow the element touch overflow\n            this._on( this.window, { scrollstop: \"_delayedRecordScroll\" });\n        },\n\n        _recordScroll: function() {\n            // this barrier prevents setting the scroll value based on\n            // the browser scrolling the window based on a hashchange\n            if ( !this.setLastScrollEnabled ) {\n                return;\n            }\n\n            var active = this._getActiveHistory(),\n                currentScroll, minScroll, defaultScroll;\n\n            if ( active ) {\n                currentScroll = this._getScroll();\n                minScroll = this._getMinScroll();\n                defaultScroll = this._getDefaultScroll();\n\n                // Set active page's lastScroll prop. If the location we're\n                // scrolling to is less than minScrollBack, let it go.\n                active.lastScroll = currentScroll < minScroll ? defaultScroll : currentScroll;\n            }\n        },\n\n        _delayedRecordScroll: function() {\n            setTimeout( $.proxy(this, \"_recordScroll\"), 100 );\n        },\n\n        _getScroll: function() {\n            return this.window.scrollTop();\n        },\n\n        _getMinScroll: function() {\n            return $.mobile.minScrollBack;\n        },\n\n        _getDefaultScroll: function() {\n            return $.mobile.defaultHomeScroll;\n        },\n\n        _filterNavigateEvents: function( e, data ) {\n            var url;\n\n            if ( e.originalEvent && e.originalEvent.isDefaultPrevented() ) {\n                return;\n            }\n\n            url = e.originalEvent.type.indexOf( \"hashchange\" ) > -1 ? data.state.hash : data.state.url;\n\n            if ( !url ) {\n                url = this._getHash();\n            }\n\n            if ( !url || url === \"#\" || url.indexOf( \"#\" + $.mobile.path.uiStateKey ) === 0 ) {\n                url = location.href;\n            }\n\n            this._handleNavigate( url, data.state );\n        },\n\n        _getHash: function() {\n            return $.mobile.path.parseLocation().hash;\n        },\n\n        // TODO active page should be managed by the container (ie, it should be a property)\n        getActivePage: function() {\n            return this.activePage;\n        },\n\n        // TODO the first page should be a property set during _create using the logic\n        //      that currently resides in init\n        _getInitialContent: function() {\n            return $.mobile.firstPage;\n        },\n\n        // TODO each content container should have a history object\n        _getHistory: function() {\n            return $.mobile.navigate.history;\n        },\n\n        _getActiveHistory: function() {\n            return this._getHistory().getActive();\n        },\n\n        // TODO the document base should be determined at creation\n        _getDocumentBase: function() {\n            return $.mobile.path.documentBase;\n        },\n\n        back: function() {\n            this.go( -1 );\n        },\n\n        forward: function() {\n            this.go( 1 );\n        },\n\n        go: function( steps ) {\n\n            //if hashlistening is enabled use native history method\n            if ( $.mobile.hashListeningEnabled ) {\n                window.history.go( steps );\n            } else {\n\n                //we are not listening to the hash so handle history internally\n                var activeIndex = $.mobile.navigate.history.activeIndex,\n                    index = activeIndex + parseInt( steps, 10 ),\n                    url = $.mobile.navigate.history.stack[ index ].url,\n                    direction = ( steps >= 1 )? \"forward\" : \"back\";\n\n                //update the history object\n                $.mobile.navigate.history.activeIndex = index;\n                $.mobile.navigate.history.previousIndex = activeIndex;\n\n                //change to the new page\n                this.change( url, { direction: direction, changeHash: false, fromHashChange: true } );\n            }\n        },\n\n        // TODO rename _handleDestination\n        _handleDestination: function( to ) {\n            var history;\n\n            // clean the hash for comparison if it's a url\n            if ( $.type(to) === \"string\" ) {\n                to = $.mobile.path.stripHash( to );\n            }\n\n            if ( to ) {\n                history = this._getHistory();\n\n                // At this point, 'to' can be one of 3 things, a cached page\n                // element from a history stack entry, an id, or site-relative /\n                // absolute URL. If 'to' is an id, we need to resolve it against\n                // the documentBase, not the location.href, since the hashchange\n                // could've been the result of a forward/backward navigation\n                // that crosses from an external page/dialog to an internal\n                // page/dialog.\n                //\n                // TODO move check to history object or path object?\n                to = !$.mobile.path.isPath( to ) ? ( $.mobile.path.makeUrlAbsolute( \"#\" + to, this._getDocumentBase() ) ) : to;\n            }\n            return to || this._getInitialContent();\n        },\n\n        _transitionFromHistory: function( direction, defaultTransition ) {\n            var history = this._getHistory(),\n                entry = ( direction === \"back\" ? history.getLast() : history.getActive() );\n\n            return ( entry && entry.transition ) || defaultTransition;\n        },\n\n        _handleDialog: function( changePageOptions, data ) {\n            var to, active, activeContent = this.getActivePage();\n\n            // If current active page is not a dialog skip the dialog and continue\n            // in the same direction\n            // Note: The dialog widget is deprecated as of 1.4.0 and will be removed in 1.5.0.\n            // Thus, as of 1.5.0 activeContent.data( \"mobile-dialog\" ) will always evaluate to\n            // falsy, so the second condition in the if-statement below can be removed altogether.\n            if ( activeContent && !activeContent.data( \"mobile-dialog\" ) ) {\n                // determine if we're heading forward or backward and continue\n                // accordingly past the current dialog\n                if ( data.direction === \"back\" ) {\n                    this.back();\n                } else {\n                    this.forward();\n                }\n\n                // prevent changePage call\n                return false;\n            } else {\n                // if the current active page is a dialog and we're navigating\n                // to a dialog use the dialog objected saved in the stack\n                to = data.pageUrl;\n                active = this._getActiveHistory();\n\n                // make sure to set the role, transition and reversal\n                // as most of this is lost by the domCache cleaning\n                $.extend( changePageOptions, {\n                    role: active.role,\n                    transition: this._transitionFromHistory(\n                        data.direction,\n                        changePageOptions.transition ),\n                    reverse: data.direction === \"back\"\n                });\n            }\n\n            return to;\n        },\n\n        _handleNavigate: function( url, data ) {\n            //find first page via hash\n            // TODO stripping the hash twice with handleUrl\n            var to = $.mobile.path.stripHash( url ), history = this._getHistory(),\n\n                // transition is false if it's the first page, undefined\n                // otherwise (and may be overridden by default)\n                transition = history.stack.length === 0 ? \"none\" :\n                    this._transitionFromHistory( data.direction ),\n\n                // default options for the changPage calls made after examining\n                // the current state of the page and the hash, NOTE that the\n                // transition is derived from the previous history entry\n                changePageOptions = {\n                    changeHash: false,\n                    fromHashChange: true,\n                    reverse: data.direction === \"back\"\n                };\n\n            $.extend( changePageOptions, data, {\n                transition: transition\n            });\n\n            // TODO move to _handleDestination ?\n            // If this isn't the first page, if the current url is a dialog hash\n            // key, and the initial destination isn't equal to the current target\n            // page, use the special dialog handling\n            if ( history.activeIndex > 0 &&\n                to.indexOf( $.mobile.dialogHashKey ) > -1 ) {\n\n                to = this._handleDialog( changePageOptions, data );\n\n                if ( to === false ) {\n                    return;\n                }\n            }\n\n            this._changeContent( this._handleDestination( to ), changePageOptions );\n        },\n\n        _changeContent: function( to, opts ) {\n            $.mobile.changePage( to, opts );\n        },\n\n        _getBase: function() {\n            return $.mobile.base;\n        },\n\n        _getNs: function() {\n            return $.mobile.ns;\n        },\n\n        _enhance: function( content, role ) {\n            // TODO consider supporting a custom callback, and passing in\n            // the settings which includes the role\n            return content.page({ role: role });\n        },\n\n        _include: function( page, settings ) {\n            // append to page and enhance\n            page.appendTo( this.element );\n\n            // use the page widget to enhance\n            this._enhance( page, settings.role );\n\n            // remove page on hide\n            page.page( \"bindRemove\" );\n        },\n\n        _find: function( absUrl ) {\n            // TODO consider supporting a custom callback\n            var fileUrl = this._createFileUrl( absUrl ),\n                dataUrl = this._createDataUrl( absUrl ),\n                page, initialContent = this._getInitialContent();\n\n            // Check to see if the page already exists in the DOM.\n            // NOTE do _not_ use the :jqmData pseudo selector because parenthesis\n            //      are a valid url char and it breaks on the first occurence\n            page = this.element\n                .children( \"[data-\" + this._getNs() +\n                    \"url='\" + $.mobile.path.hashToSelector( dataUrl ) + \"']\" );\n\n            // If we failed to find the page, check to see if the url is a\n            // reference to an embedded page. If so, it may have been dynamically\n            // injected by a developer, in which case it would be lacking a\n            // data-url attribute and in need of enhancement.\n            if ( page.length === 0 && dataUrl && !$.mobile.path.isPath( dataUrl ) ) {\n                page = this.element.children( $.mobile.path.hashToSelector(\"#\" + dataUrl) )\n                    .attr( \"data-\" + this._getNs() + \"url\", dataUrl )\n                    .jqmData( \"url\", dataUrl );\n            }\n\n            // If we failed to find a page in the DOM, check the URL to see if it\n            // refers to the first page in the application. Also check to make sure\n            // our cached-first-page is actually in the DOM. Some user deployed\n            // apps are pruning the first page from the DOM for various reasons.\n            // We check for this case here because we don't want a first-page with\n            // an id falling through to the non-existent embedded page error case.\n            if ( page.length === 0 &&\n                $.mobile.path.isFirstPageUrl( fileUrl ) &&\n                initialContent &&\n                initialContent.parent().length ) {\n                page = $( initialContent );\n            }\n\n            return page;\n        },\n\n        _getLoader: function() {\n            return $.mobile.loading();\n        },\n\n        _showLoading: function( delay, theme, msg, textonly ) {\n            // This configurable timeout allows cached pages a brief\n            // delay to load without showing a message\n            if ( this._loadMsg ) {\n                return;\n            }\n\n            this._loadMsg = setTimeout($.proxy(function() {\n                this._getLoader().loader( \"show\", theme, msg, textonly );\n                this._loadMsg = 0;\n            }, this), delay );\n        },\n\n        _hideLoading: function() {\n            // Stop message show timer\n            clearTimeout( this._loadMsg );\n            this._loadMsg = 0;\n\n            // Hide loading message\n            this._getLoader().loader( \"hide\" );\n        },\n\n        _showError: function() {\n            // make sure to remove the current loading message\n            this._hideLoading();\n\n            // show the error message\n            this._showLoading( 0, $.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true );\n\n            // hide the error message after a delay\n            // TODO configuration\n            setTimeout( $.proxy(this, \"_hideLoading\"), 1500 );\n        },\n\n        _parse: function( html, fileUrl ) {\n            // TODO consider allowing customization of this method. It's very JQM specific\n            var page, all = $( \"<div></div>\" );\n\n            //workaround to allow scripts to execute when included in page divs\n            all.get( 0 ).innerHTML = html;\n\n            page = all.find( \":jqmData(role='page'), :jqmData(role='dialog')\" ).first();\n\n            //if page elem couldn't be found, create one and insert the body element's contents\n            if ( !page.length ) {\n                page = $( \"<div data-\" + this._getNs() + \"role='page'>\" +\n                    ( html.split( /<\\/?body[^>]*>/gmi )[1] || \"\" ) +\n                    \"</div>\" );\n            }\n\n            // TODO tagging a page with external to make sure that embedded pages aren't\n            // removed by the various page handling code is bad. Having page handling code\n            // in many places is bad. Solutions post 1.0\n            page.attr( \"data-\" + this._getNs() + \"url\", this._createDataUrl( fileUrl ) )\n                .attr( \"data-\" + this._getNs() + \"external-page\", true );\n\n            return page;\n        },\n\n        _setLoadedTitle: function( page, html ) {\n            //page title regexp\n            var newPageTitle = html.match( /<title[^>]*>([^<]*)/ ) && RegExp.$1;\n\n            if ( newPageTitle && !page.jqmData(\"title\") ) {\n                newPageTitle = $( \"<div>\" + newPageTitle + \"</div>\" ).text();\n                page.jqmData( \"title\", newPageTitle );\n            }\n        },\n\n        _isRewritableBaseTag: function() {\n            return $.mobile.dynamicBaseEnabled && !$.support.dynamicBaseTag;\n        },\n\n        _createDataUrl: function( absoluteUrl ) {\n            return $.mobile.path.convertUrlToDataUrl( absoluteUrl );\n        },\n\n        _createFileUrl: function( absoluteUrl ) {\n            return $.mobile.path.getFilePath( absoluteUrl );\n        },\n\n        _triggerWithDeprecated: function( name, data, page ) {\n            var deprecatedEvent = $.Event( \"page\" + name ),\n                newEvent = $.Event( this.widgetName + name );\n\n            // DEPRECATED\n            // trigger the old deprecated event on the page if it's provided\n            ( page || this.element ).trigger( deprecatedEvent, data );\n\n            // use the widget trigger method for the new content* event\n            this._trigger( name, newEvent, data );\n\n            return {\n                deprecatedEvent: deprecatedEvent,\n                event: newEvent\n            };\n        },\n\n        // TODO it would be nice to split this up more but everything appears to be \"one off\"\n        //      or require ordering such that other bits are sprinkled in between parts that\n        //      could be abstracted out as a group\n        _loadSuccess: function( absUrl, triggerData, settings, deferred ) {\n            var fileUrl = this._createFileUrl( absUrl );\n\n            return $.proxy(function( html, textStatus, xhr ) {\n                //pre-parse html to check for a data-url,\n                //use it as the new fileUrl, base path, etc\n                var content,\n\n                    // TODO handle dialogs again\n                    pageElemRegex = new RegExp( \"(<[^>]+\\\\bdata-\" + this._getNs() + \"role=[\\\"']?page[\\\"']?[^>]*>)\" ),\n\n                    dataUrlRegex = new RegExp( \"\\\\bdata-\" + this._getNs() + \"url=[\\\"']?([^\\\"'>]*)[\\\"']?\" );\n\n                // data-url must be provided for the base tag so resource requests\n                // can be directed to the correct url. loading into a temprorary\n                // element makes these requests immediately\n                if ( pageElemRegex.test( html ) &&\n                    RegExp.$1 &&\n                    dataUrlRegex.test( RegExp.$1 ) &&\n                    RegExp.$1 ) {\n                    fileUrl = $.mobile.path.getFilePath( $(\"<div>\" + RegExp.$1 + \"</div>\").text() );\n\n                    // We specify that, if a data-url attribute is given on the page div, its value\n                    // must be given non-URL-encoded. However, in this part of the code, fileUrl is\n                    // assumed to be URL-encoded, so we URL-encode the retrieved value here\n                    fileUrl = this.window[ 0 ].encodeURIComponent( fileUrl );\n                }\n\n                //dont update the base tag if we are prefetching\n                if ( settings.prefetch === undefined ) {\n                    this._getBase().set( fileUrl );\n                }\n\n                content = this._parse( html, fileUrl );\n\n                this._setLoadedTitle( content, html );\n\n                // Add the content reference and xhr to our triggerData.\n                triggerData.xhr = xhr;\n                triggerData.textStatus = textStatus;\n\n                // DEPRECATED\n                triggerData.page = content;\n\n                triggerData.content = content;\n\n                triggerData.toPage = content;\n\n                // If the default behavior is prevented, stop here!\n                // Note that it is the responsibility of the listener/handler\n                // that called preventDefault(), to resolve/reject the\n                // deferred object within the triggerData.\n                if ( this._triggerWithDeprecated( \"load\", triggerData ).event.isDefaultPrevented() ) {\n                    return;\n                }\n\n                // rewrite src and href attrs to use a base url if the base tag won't work\n                if ( this._isRewritableBaseTag() && content ) {\n                    this._getBase().rewrite( fileUrl, content );\n                }\n\n                this._include( content, settings );\n\n                // Remove loading message.\n                if ( settings.showLoadMsg ) {\n                    this._hideLoading();\n                }\n\n                deferred.resolve( absUrl, settings, content );\n            }, this);\n        },\n\n        _loadDefaults: {\n            type: \"get\",\n            data: undefined,\n\n            // DEPRECATED\n            reloadPage: false,\n\n            reload: false,\n\n            // By default we rely on the role defined by the @data-role attribute.\n            role: undefined,\n\n            showLoadMsg: false,\n\n            // This delay allows loads that pull from browser cache to\n            // occur without showing the loading message.\n            loadMsgDelay: 50\n        },\n\n        load: function( url, options ) {\n            // This function uses deferred notifications to let callers\n            // know when the content is done loading, or if an error has occurred.\n            var deferred = ( options && options.deferred ) || $.Deferred(),\n\n                // Examining the option \"reloadPage\" passed by the user is deprecated as of 1.4.0\n                // and will be removed in 1.5.0.\n                // Copy option \"reloadPage\" to \"reload\", but only if option \"reload\" is not present\n                reloadOptionExtension =\n                    ( ( options && options.reload === undefined &&\n                        options.reloadPage !== undefined ) ?\n                            { reload: options.reloadPage } : {} ),\n\n                // The default load options with overrides specified by the caller.\n                settings = $.extend( {}, this._loadDefaults, options, reloadOptionExtension ),\n\n                // The DOM element for the content after it has been loaded.\n                content = null,\n\n                // The absolute version of the URL passed into the function. This\n                // version of the URL may contain dialog/subcontent params in it.\n                absUrl = $.mobile.path.makeUrlAbsolute( url, this._findBaseWithDefault() ),\n                fileUrl, dataUrl, pblEvent, triggerData;\n\n            // If the caller provided data, and we're using \"get\" request,\n            // append the data to the URL.\n            if ( settings.data && settings.type === \"get\" ) {\n                absUrl = $.mobile.path.addSearchParams( absUrl, settings.data );\n                settings.data = undefined;\n            }\n\n            // If the caller is using a \"post\" request, reload must be true\n            if ( settings.data && settings.type === \"post\" ) {\n                settings.reload = true;\n            }\n\n            // The absolute version of the URL minus any dialog/subcontent params.\n            // In otherwords the real URL of the content to be loaded.\n            fileUrl = this._createFileUrl( absUrl );\n\n            // The version of the Url actually stored in the data-url attribute of\n            // the content. For embedded content, it is just the id of the page. For\n            // content within the same domain as the document base, it is the site\n            // relative path. For cross-domain content (Phone Gap only) the entire\n            // absolute Url is used to load the content.\n            dataUrl = this._createDataUrl( absUrl );\n\n            content = this._find( absUrl );\n\n            // If it isn't a reference to the first content and refers to missing\n            // embedded content reject the deferred and return\n            if ( content.length === 0 &&\n                $.mobile.path.isEmbeddedPage(fileUrl) &&\n                !$.mobile.path.isFirstPageUrl(fileUrl) ) {\n                deferred.reject( absUrl, settings );\n                return deferred.promise();\n            }\n\n            // Reset base to the default document base\n            // TODO figure out why we doe this\n            this._getBase().reset();\n\n            // If the content we are interested in is already in the DOM,\n            // and the caller did not indicate that we should force a\n            // reload of the file, we are done. Resolve the deferrred so that\n            // users can bind to .done on the promise\n            if ( content.length && !settings.reload ) {\n                this._enhance( content, settings.role );\n                deferred.resolve( absUrl, settings, content );\n\n                //if we are reloading the content make sure we update\n                // the base if its not a prefetch\n                if ( !settings.prefetch ) {\n                    this._getBase().set(url);\n                }\n\n                return deferred.promise();\n            }\n\n            triggerData = {\n                url: url,\n                absUrl: absUrl,\n                toPage: url,\n                prevPage: options ? options.fromPage : undefined,\n                dataUrl: dataUrl,\n                deferred: deferred,\n                options: settings\n            };\n\n            // Let listeners know we're about to load content.\n            pblEvent = this._triggerWithDeprecated( \"beforeload\", triggerData );\n\n            // If the default behavior is prevented, stop here!\n            if ( pblEvent.deprecatedEvent.isDefaultPrevented() ||\n                pblEvent.event.isDefaultPrevented() ) {\n                return deferred.promise();\n            }\n\n            if ( settings.showLoadMsg ) {\n                this._showLoading( settings.loadMsgDelay );\n            }\n\n            // Reset base to the default document base.\n            // only reset if we are not prefetching\n            if ( settings.prefetch === undefined ) {\n                this._getBase().reset();\n            }\n\n            if ( !( $.mobile.allowCrossDomainPages ||\n                $.mobile.path.isSameDomain($.mobile.path.documentUrl, absUrl ) ) ) {\n                deferred.reject( absUrl, settings );\n                return deferred.promise();\n            }\n\n            // Load the new content.\n            $.ajax({\n                url: fileUrl,\n                type: settings.type,\n                data: settings.data,\n                contentType: settings.contentType,\n                dataType: \"html\",\n                success: this._loadSuccess( absUrl, triggerData, settings, deferred ),\n                error: this._loadError( absUrl, triggerData, settings, deferred )\n            });\n\n            return deferred.promise();\n        },\n\n        _loadError: function( absUrl, triggerData, settings, deferred ) {\n            return $.proxy(function( xhr, textStatus, errorThrown ) {\n                //set base back to current path\n                this._getBase().set( $.mobile.path.get() );\n\n                // Add error info to our triggerData.\n                triggerData.xhr = xhr;\n                triggerData.textStatus = textStatus;\n                triggerData.errorThrown = errorThrown;\n\n                // Let listeners know the page load failed.\n                var plfEvent = this._triggerWithDeprecated( \"loadfailed\", triggerData );\n\n                // If the default behavior is prevented, stop here!\n                // Note that it is the responsibility of the listener/handler\n                // that called preventDefault(), to resolve/reject the\n                // deferred object within the triggerData.\n                if ( plfEvent.deprecatedEvent.isDefaultPrevented() ||\n                    plfEvent.event.isDefaultPrevented() ) {\n                    return;\n                }\n\n                // Remove loading message.\n                if ( settings.showLoadMsg ) {\n                    this._showError();\n                }\n\n                deferred.reject( absUrl, settings );\n            }, this);\n        },\n\n        _getTransitionHandler: function( transition ) {\n            transition = $.mobile._maybeDegradeTransition( transition );\n\n            //find the transition handler for the specified transition. If there\n            //isn't one in our transitionHandlers dictionary, use the default one.\n            //call the handler immediately to kick-off the transition.\n            return $.mobile.transitionHandlers[ transition ] || $.mobile.defaultTransitionHandler;\n        },\n\n        // TODO move into transition handlers?\n        _triggerCssTransitionEvents: function( to, from, prefix ) {\n            var samePage = false;\n\n            prefix = prefix || \"\";\n\n            // TODO decide if these events should in fact be triggered on the container\n            if ( from ) {\n\n                //Check if this is a same page transition and tell the handler in page\n                if( to[0] === from[0] ){\n                    samePage = true;\n                }\n\n                //trigger before show/hide events\n                // TODO deprecate nextPage in favor of next\n                this._triggerWithDeprecated( prefix + \"hide\", {\n\n                    // Deprecated in 1.4 remove in 1.5\n                    nextPage: to,\n                    toPage: to,\n                    prevPage: from,\n                    samePage: samePage\n                }, from );\n            }\n\n            // TODO deprecate prevPage in favor of previous\n            this._triggerWithDeprecated( prefix + \"show\", {\n                prevPage: from || $( \"\" ),\n                toPage: to\n            }, to );\n        },\n\n        // TODO make private once change has been defined in the widget\n        _cssTransition: function( to, from, options ) {\n            var transition = options.transition,\n                reverse = options.reverse,\n                deferred = options.deferred,\n                TransitionHandler,\n                promise;\n\n            this._triggerCssTransitionEvents( to, from, \"before\" );\n\n            // TODO put this in a binding to events *outside* the widget\n            this._hideLoading();\n\n            TransitionHandler = this._getTransitionHandler( transition );\n\n            promise = ( new TransitionHandler( transition, reverse, to, from ) ).transition();\n\n            promise.done( $.proxy( function() {\n                this._triggerCssTransitionEvents( to, from );\n            }, this ));\n\n            // TODO temporary accomodation of argument deferred\n            promise.done(function() {\n                deferred.resolve.apply( deferred, arguments );\n            });\n        },\n\n        _releaseTransitionLock: function() {\n            //release transition lock so navigation is free again\n            isPageTransitioning = false;\n            if ( pageTransitionQueue.length > 0 ) {\n                $.mobile.changePage.apply( null, pageTransitionQueue.pop() );\n            }\n        },\n\n        _removeActiveLinkClass: function( force ) {\n            //clear out the active button state\n            $.mobile.removeActiveLinkClass( force );\n        },\n\n        _loadUrl: function( to, triggerData, settings ) {\n            // preserve the original target as the dataUrl value will be\n            // simplified eg, removing ui-state, and removing query params\n            // from the hash this is so that users who want to use query\n            // params have access to them in the event bindings for the page\n            // life cycle See issue #5085\n            settings.target = to;\n            settings.deferred = $.Deferred();\n\n            this.load( to, settings );\n\n            settings.deferred.done($.proxy(function( url, options, content ) {\n                isPageTransitioning = false;\n\n                // store the original absolute url so that it can be provided\n                // to events in the triggerData of the subsequent changePage call\n                options.absUrl = triggerData.absUrl;\n\n                this.transition( content, triggerData, options );\n            }, this));\n\n            settings.deferred.fail($.proxy(function(/* url, options */) {\n                this._removeActiveLinkClass( true );\n                this._releaseTransitionLock();\n                this._triggerWithDeprecated( \"changefailed\", triggerData );\n            }, this));\n        },\n\n        _triggerPageBeforeChange: function( to, triggerData, settings ) {\n            var returnEvents;\n\n            triggerData.prevPage = this.activePage;\n            $.extend( triggerData, {\n                toPage: to,\n                options: settings\n            });\n\n            // NOTE: preserve the original target as the dataUrl value will be\n            // simplified eg, removing ui-state, and removing query params from\n            // the hash this is so that users who want to use query params have\n            // access to them in the event bindings for the page life cycle\n            // See issue #5085\n            if ( $.type(to) === \"string\" ) {\n                // if the toPage is a string simply convert it\n                triggerData.absUrl = $.mobile.path.makeUrlAbsolute( to, this._findBaseWithDefault() );\n            } else {\n                // if the toPage is a jQuery object grab the absolute url stored\n                // in the loadPage callback where it exists\n                triggerData.absUrl = settings.absUrl;\n            }\n\n            // Let listeners know we're about to change the current page.\n            returnEvents = this._triggerWithDeprecated( \"beforechange\", triggerData );\n\n            // If the default behavior is prevented, stop here!\n            if ( returnEvents.event.isDefaultPrevented() ||\n                returnEvents.deprecatedEvent.isDefaultPrevented() ) {\n                return false;\n            }\n\n            return true;\n        },\n\n        change: function( to, options ) {\n            // If we are in the midst of a transition, queue the current request.\n            // We'll call changePage() once we're done with the current transition\n            // to service the request.\n            if ( isPageTransitioning ) {\n                pageTransitionQueue.unshift( arguments );\n                return;\n            }\n\n            var settings = $.extend( {}, $.mobile.changePage.defaults, options ),\n                triggerData = {};\n\n            // Make sure we have a fromPage.\n            settings.fromPage = settings.fromPage || this.activePage;\n\n            // if the page beforechange default is prevented return early\n            if ( !this._triggerPageBeforeChange(to, triggerData, settings) ) {\n                return;\n            }\n\n            // We allow \"pagebeforechange\" observers to modify the to in\n            // the trigger data to allow for redirects. Make sure our to is\n            // updated. We also need to re-evaluate whether it is a string,\n            // because an object can also be replaced by a string\n            to = triggerData.toPage;\n\n            // If the caller passed us a url, call loadPage()\n            // to make sure it is loaded into the DOM. We'll listen\n            // to the promise object it returns so we know when\n            // it is done loading or if an error ocurred.\n            if ( $.type(to) === \"string\" ) {\n                // Set the isPageTransitioning flag to prevent any requests from\n                // entering this method while we are in the midst of loading a page\n                // or transitioning.\n                isPageTransitioning = true;\n\n                this._loadUrl( to, triggerData, settings );\n            } else {\n                this.transition( to, triggerData, settings );\n            }\n        },\n\n        transition: function( toPage, triggerData, settings ) {\n            var fromPage, url, pageUrl, fileUrl,\n                active, activeIsInitialPage,\n                historyDir, pageTitle, isDialog,\n                alreadyThere, newPageTitle,\n                params,    cssTransitionDeferred,\n                beforeTransition;\n\n            // If we are in the midst of a transition, queue the current request.\n            // We'll call changePage() once we're done with the current transition\n            // to service the request.\n            if ( isPageTransitioning ) {\n                // make sure to only queue the to and settings values so the arguments\n                // work with a call to the change method\n                pageTransitionQueue.unshift( [toPage, settings] );\n                return;\n            }\n\n            // DEPRECATED - this call only, in favor of the before transition\n            // if the page beforechange default is prevented return early\n            if ( !this._triggerPageBeforeChange(toPage, triggerData, settings) ) {\n                return;\n            }\n\n            triggerData.prevPage = settings.fromPage;\n            // if the (content|page)beforetransition default is prevented return early\n            // Note, we have to check for both the deprecated and new events\n            beforeTransition = this._triggerWithDeprecated( \"beforetransition\", triggerData );\n            if (beforeTransition.deprecatedEvent.isDefaultPrevented() ||\n                beforeTransition.event.isDefaultPrevented() ) {\n                return;\n            }\n\n            // Set the isPageTransitioning flag to prevent any requests from\n            // entering this method while we are in the midst of loading a page\n            // or transitioning.\n            isPageTransitioning = true;\n\n            // If we are going to the first-page of the application, we need to make\n            // sure settings.dataUrl is set to the application document url. This allows\n            // us to avoid generating a document url with an id hash in the case where the\n            // first-page of the document has an id attribute specified.\n            if ( toPage[ 0 ] === $.mobile.firstPage[ 0 ] && !settings.dataUrl ) {\n                settings.dataUrl = $.mobile.path.documentUrl.hrefNoHash;\n            }\n\n            // The caller passed us a real page DOM element. Update our\n            // internal state and then trigger a transition to the page.\n            fromPage = settings.fromPage;\n            url = ( settings.dataUrl && $.mobile.path.convertUrlToDataUrl(settings.dataUrl) ) ||\n                toPage.jqmData( \"url\" );\n\n            // The pageUrl var is usually the same as url, except when url is obscured\n            // as a dialog url. pageUrl always contains the file path\n            pageUrl = url;\n            fileUrl = $.mobile.path.getFilePath( url );\n            active = $.mobile.navigate.history.getActive();\n            activeIsInitialPage = $.mobile.navigate.history.activeIndex === 0;\n            historyDir = 0;\n            pageTitle = document.title;\n            isDialog = ( settings.role === \"dialog\" ||\n                toPage.jqmData( \"role\" ) === \"dialog\" ) &&\n                toPage.jqmData( \"dialog\" ) !== true;\n\n            // By default, we prevent changePage requests when the fromPage and toPage\n            // are the same element, but folks that generate content\n            // manually/dynamically and reuse pages want to be able to transition to\n            // the same page. To allow this, they will need to change the default\n            // value of allowSamePageTransition to true, *OR*, pass it in as an\n            // option when they manually call changePage(). It should be noted that\n            // our default transition animations assume that the formPage and toPage\n            // are different elements, so they may behave unexpectedly. It is up to\n            // the developer that turns on the allowSamePageTransitiona option to\n            // either turn off transition animations, or make sure that an appropriate\n            // animation transition is used.\n            if ( fromPage && fromPage[0] === toPage[0] &&\n                !settings.allowSamePageTransition ) {\n\n                isPageTransitioning = false;\n                this._triggerWithDeprecated( \"transition\", triggerData );\n                this._triggerWithDeprecated( \"change\", triggerData );\n\n                // Even if there is no page change to be done, we should keep the\n                // urlHistory in sync with the hash changes\n                if ( settings.fromHashChange ) {\n                    $.mobile.navigate.history.direct({ url: url });\n                }\n\n                return;\n            }\n\n            // We need to make sure the page we are given has already been enhanced.\n            toPage.page({ role: settings.role });\n\n            // If the changePage request was sent from a hashChange event, check to\n            // see if the page is already within the urlHistory stack. If so, we'll\n            // assume the user hit the forward/back button and will try to match the\n            // transition accordingly.\n            if ( settings.fromHashChange ) {\n                historyDir = settings.direction === \"back\" ? -1 : 1;\n            }\n\n            // Kill the keyboard.\n            // XXX_jblas: We need to stop crawling the entire document to kill focus.\n            //            Instead, we should be tracking focus with a delegate()\n            //            handler so we already have the element in hand at this\n            //            point.\n            // Wrap this in a try/catch block since IE9 throw \"Unspecified error\" if\n            // document.activeElement is undefined when we are in an IFrame.\n            try {\n                if ( document.activeElement &&\n                    document.activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n                    $( document.activeElement ).blur();\n                } else {\n                    $( \"input:focus, textarea:focus, select:focus\" ).blur();\n                }\n            } catch( e ) {}\n\n            // Record whether we are at a place in history where a dialog used to be -\n            // if so, do not add a new history entry and do not change the hash either\n            alreadyThere = false;\n\n            // If we're displaying the page as a dialog, we don't want the url\n            // for the dialog content to be used in the hash. Instead, we want\n            // to append the dialogHashKey to the url of the current page.\n            if ( isDialog && active ) {\n                // on the initial page load active.url is undefined and in that case\n                // should be an empty string. Moving the undefined -> empty string back\n                // into urlHistory.addNew seemed imprudent given undefined better\n                // represents the url state\n\n                // If we are at a place in history that once belonged to a dialog, reuse\n                // this state without adding to urlHistory and without modifying the\n                // hash. However, if a dialog is already displayed at this point, and\n                // we're about to display another dialog, then we must add another hash\n                // and history entry on top so that one may navigate back to the\n                // original dialog\n                if ( active.url &&\n                    active.url.indexOf( $.mobile.dialogHashKey ) > -1 &&\n                    this.activePage &&\n                    !this.activePage.hasClass( \"ui-dialog\" ) &&\n                    $.mobile.navigate.history.activeIndex > 0 ) {\n\n                    settings.changeHash = false;\n                    alreadyThere = true;\n                }\n\n                // Normally, we tack on a dialog hash key, but if this is the location\n                // of a stale dialog, we reuse the URL from the entry\n                url = ( active.url || \"\" );\n\n                // account for absolute urls instead of just relative urls use as hashes\n                if ( !alreadyThere && url.indexOf(\"#\") > -1 ) {\n                    url += $.mobile.dialogHashKey;\n                } else {\n                    url += \"#\" + $.mobile.dialogHashKey;\n                }\n            }\n\n            // if title element wasn't found, try the page div data attr too\n            // If this is a deep-link or a reload ( active === undefined ) then just\n            // use pageTitle\n            newPageTitle = ( !active ) ? pageTitle : toPage.jqmData( \"title\" ) ||\n                toPage.children( \":jqmData(role='header')\" ).find( \".ui-title\" ).text();\n            if ( !!newPageTitle && pageTitle === document.title ) {\n                pageTitle = newPageTitle;\n            }\n            if ( !toPage.jqmData( \"title\" ) ) {\n                toPage.jqmData( \"title\", pageTitle );\n            }\n\n            // Make sure we have a transition defined.\n            settings.transition = settings.transition ||\n                ( ( historyDir && !activeIsInitialPage ) ? active.transition : undefined ) ||\n                ( isDialog ? $.mobile.defaultDialogTransition : $.mobile.defaultPageTransition );\n\n            //add page to history stack if it's not back or forward\n            if ( !historyDir && alreadyThere ) {\n                $.mobile.navigate.history.getActive().pageUrl = pageUrl;\n            }\n\n            // Set the location hash.\n            if ( url && !settings.fromHashChange ) {\n\n                // rebuilding the hash here since we loose it earlier on\n                // TODO preserve the originally passed in path\n                if ( !$.mobile.path.isPath( url ) && url.indexOf( \"#\" ) < 0 ) {\n                    url = \"#\" + url;\n                }\n\n                // TODO the property names here are just silly\n                params = {\n                    transition: settings.transition,\n                    title: pageTitle,\n                    pageUrl: pageUrl,\n                    role: settings.role\n                };\n\n                if ( settings.changeHash !== false && $.mobile.hashListeningEnabled ) {\n                    $.mobile.navigate( this.window[ 0 ].encodeURI( url ), params, true);\n                } else if ( toPage[ 0 ] !== $.mobile.firstPage[ 0 ] ) {\n                    $.mobile.navigate.history.add( url, params );\n                }\n            }\n\n            //set page title\n            document.title = pageTitle;\n\n            //set \"toPage\" as activePage deprecated in 1.4 remove in 1.5\n            $.mobile.activePage = toPage;\n\n            //new way to handle activePage\n            this.activePage = toPage;\n\n            // If we're navigating back in the URL history, set reverse accordingly.\n            settings.reverse = settings.reverse || historyDir < 0;\n\n            cssTransitionDeferred = $.Deferred();\n\n            this._cssTransition(toPage, fromPage, {\n                transition: settings.transition,\n                reverse: settings.reverse,\n                deferred: cssTransitionDeferred\n            });\n\n            cssTransitionDeferred.done($.proxy(function( name, reverse, $to, $from, alreadyFocused ) {\n                $.mobile.removeActiveLinkClass();\n\n                //if there's a duplicateCachedPage, remove it from the DOM now that it's hidden\n                if ( settings.duplicateCachedPage ) {\n                    settings.duplicateCachedPage.remove();\n                }\n\n                // despite visibility: hidden addresses issue #2965\n                // https://github.com/jquery/jquery-mobile/issues/2965\n                if ( !alreadyFocused ) {\n                    $.mobile.focusPage( toPage );\n                }\n\n                this._releaseTransitionLock();\n                this._triggerWithDeprecated( \"transition\", triggerData );\n                this._triggerWithDeprecated( \"change\", triggerData );\n            }, this));\n        },\n\n        // determine the current base url\n        _findBaseWithDefault: function() {\n            var closestBase = ( this.activePage &&\n            $.mobile.getClosestBaseUrl( this.activePage ) );\n        return closestBase || $.mobile.path.documentBase.hrefNoHash;\n        }\n    });\n\n    // The following handlers should be bound after mobileinit has been triggered\n    // the following deferred is resolved in the init file\n    $.mobile.navreadyDeferred = $.Deferred();\n\n    //these variables make all page containers use the same queue and only navigate one at a time\n    // queue to hold simultanious page transitions\n    var pageTransitionQueue = [],\n\n        // indicates whether or not page is in process of transitioning\n        isPageTransitioning = false;\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n        // resolved on domready\n    var domreadyDeferred = $.Deferred(),\n\n        // resolved and nulled on window.load()\n        loadDeferred = $.Deferred(),\n\n        // function that resolves the above deferred\n        pageIsFullyLoaded = function() {\n\n            // Resolve and null the deferred\n            loadDeferred.resolve();\n            loadDeferred = null;\n        },\n\n        documentUrl = $.mobile.path.documentUrl,\n\n        // used to track last vclicked element to make sure its value is added to form data\n        $lastVClicked = null;\n\n    /* Event Bindings - hashchange, submit, and click */\n    function findClosestLink( ele )    {\n        while ( ele ) {\n            // Look for the closest element with a nodeName of \"a\".\n            // Note that we are checking if we have a valid nodeName\n            // before attempting to access it. This is because the\n            // node we get called with could have originated from within\n            // an embedded SVG document where some symbol instance elements\n            // don't have nodeName defined on them, or strings are of type\n            // SVGAnimatedString.\n            if ( ( typeof ele.nodeName === \"string\" ) && ele.nodeName.toLowerCase() === \"a\" ) {\n                break;\n            }\n            ele = ele.parentNode;\n        }\n        return ele;\n    }\n\n    $.mobile.loadPage = function( url, opts ) {\n        var container;\n\n        opts = opts || {};\n        container = ( opts.pageContainer || $.mobile.pageContainer );\n\n        // create the deferred that will be supplied to loadPage callers\n        // and resolved by the content widget's load method\n        opts.deferred = $.Deferred();\n\n        // Preferring to allow exceptions for uninitialized opts.pageContainer\n        // widgets so we know if we need to force init here for users\n        container.pagecontainer( \"load\", url, opts );\n\n        // provide the deferred\n        return opts.deferred.promise();\n    };\n\n    //define vars for interal use\n\n    /* internal utility functions */\n\n    // NOTE Issue #4950 Android phonegap doesn't navigate back properly\n    //      when a full page refresh has taken place. It appears that hashchange\n    //      and replacestate history alterations work fine but we need to support\n    //      both forms of history traversal in our code that uses backward history\n    //      movement\n    $.mobile.back = function() {\n        var nav = window.navigator;\n\n        // if the setting is on and the navigator object is\n        // available use the phonegap navigation capability\n        if ( this.phonegapNavigationEnabled &&\n            nav &&\n            nav.app &&\n            nav.app.backHistory ) {\n            nav.app.backHistory();\n        } else {\n            $.mobile.pageContainer.pagecontainer( \"back\" );\n        }\n    };\n\n    // Direct focus to the page title, or otherwise first focusable element\n    $.mobile.focusPage = function ( page ) {\n        var autofocus = page.find( \"[autofocus]\" ),\n            pageTitle = page.find( \".ui-title:eq(0)\" );\n\n        if ( autofocus.length ) {\n            autofocus.focus();\n            return;\n        }\n\n        if ( pageTitle.length ) {\n            pageTitle.focus();\n        } else{\n            page.focus();\n        }\n    };\n\n    // No-op implementation of transition degradation\n    $.mobile._maybeDegradeTransition = $.mobile._maybeDegradeTransition || function( transition ) {\n        return transition;\n    };\n\n    // Exposed $.mobile methods\n\n    $.mobile.changePage = function( to, options ) {\n        $.mobile.pageContainer.pagecontainer( \"change\", to, options );\n    };\n\n    $.mobile.changePage.defaults = {\n        transition: undefined,\n        reverse: false,\n        changeHash: true,\n        fromHashChange: false,\n        role: undefined, // By default we rely on the role defined by the @data-role attribute.\n        duplicateCachedPage: undefined,\n        pageContainer: undefined,\n        showLoadMsg: true, //loading message shows by default when pages are being fetched during changePage\n        dataUrl: undefined,\n        fromPage: undefined,\n        allowSamePageTransition: false\n    };\n\n    $.mobile._registerInternalEvents = function() {\n        var getAjaxFormData = function( $form, calculateOnly ) {\n            var url, ret = true, formData, vclickedName, method;\n            if ( !$.mobile.ajaxEnabled ||\n                    // test that the form is, itself, ajax false\n                    $form.is( \":jqmData(ajax='false')\" ) ||\n                    // test that $.mobile.ignoreContentEnabled is set and\n                    // the form or one of it's parents is ajax=false\n                    !$form.jqmHijackable().length ||\n                    $form.attr( \"target\" ) ) {\n                return false;\n            }\n\n            url = ( $lastVClicked && $lastVClicked.attr( \"formaction\" ) ) ||\n                $form.attr( \"action\" );\n            method = ( $form.attr( \"method\" ) || \"get\" ).toLowerCase();\n\n            // If no action is specified, browsers default to using the\n            // URL of the document containing the form. Since we dynamically\n            // pull in pages from external documents, the form should submit\n            // to the URL for the source document of the page containing\n            // the form.\n            if ( !url ) {\n                // Get the @data-url for the page containing the form.\n                url = $.mobile.getClosestBaseUrl( $form );\n\n                // NOTE: If the method is \"get\", we need to strip off the query string\n                // because it will get replaced with the new form data. See issue #5710.\n                if ( method === \"get\" ) {\n                    url = $.mobile.path.parseUrl( url ).hrefNoSearch;\n                }\n\n                if ( url === $.mobile.path.documentBase.hrefNoHash ) {\n                    // The url we got back matches the document base,\n                    // which means the page must be an internal/embedded page,\n                    // so default to using the actual document url as a browser\n                    // would.\n                    url = documentUrl.hrefNoSearch;\n                }\n            }\n\n            url = $.mobile.path.makeUrlAbsolute(  url, $.mobile.getClosestBaseUrl( $form ) );\n\n            if ( ( $.mobile.path.isExternal( url ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, url ) ) ) {\n                return false;\n            }\n\n            if ( !calculateOnly ) {\n                formData = $form.serializeArray();\n\n                if ( $lastVClicked && $lastVClicked[ 0 ].form === $form[ 0 ] ) {\n                    vclickedName = $lastVClicked.attr( \"name\" );\n                    if ( vclickedName ) {\n                        // Make sure the last clicked element is included in the form\n                        $.each( formData, function( key, value ) {\n                            if ( value.name === vclickedName ) {\n                                // Unset vclickedName - we've found it in the serialized data already\n                                vclickedName = \"\";\n                                return false;\n                            }\n                        });\n                        if ( vclickedName ) {\n                            formData.push( { name: vclickedName, value: $lastVClicked.attr( \"value\" ) } );\n                        }\n                    }\n                }\n\n                ret = {\n                    url: url,\n                    options: {\n                        type:        method,\n                        data:        $.param( formData ),\n                        transition:    $form.jqmData( \"transition\" ),\n                        reverse:    $form.jqmData( \"direction\" ) === \"reverse\",\n                        reloadPage:    true\n                    }\n                };\n            }\n\n            return ret;\n        };\n\n        //bind to form submit events, handle with Ajax\n        $.mobile.document.delegate( \"form\", \"submit\", function( event ) {\n            var formData;\n\n            if ( !event.isDefaultPrevented() ) {\n                formData = getAjaxFormData( $( this ) );\n                if ( formData ) {\n                    $.mobile.changePage( formData.url, formData.options );\n                    event.preventDefault();\n                }\n            }\n        });\n\n        //add active state on vclick\n        $.mobile.document.bind( \"vclick\", function( event ) {\n            var $btn, btnEls, target = event.target, needClosest = false;\n            // if this isn't a left click we don't care. Its important to note\n            // that when the virtual event is generated it will create the which attr\n            if ( event.which > 1 || !$.mobile.linkBindingEnabled ) {\n                return;\n            }\n\n            // Record that this element was clicked, in case we need it for correct\n            // form submission during the \"submit\" handler above\n            $lastVClicked = $( target );\n\n            // Try to find a target element to which the active class will be applied\n            if ( $.data( target, \"mobile-button\" ) ) {\n                // If the form will not be submitted via AJAX, do not add active class\n                if ( !getAjaxFormData( $( target ).closest( \"form\" ), true ) ) {\n                    return;\n                }\n                // We will apply the active state to this button widget - the parent\n                // of the input that was clicked will have the associated data\n                if ( target.parentNode ) {\n                    target = target.parentNode;\n                }\n            } else {\n                target = findClosestLink( target );\n                if ( !( target && $.mobile.path.parseUrl( target.getAttribute( \"href\" ) || \"#\" ).hash !== \"#\" ) ) {\n                    return;\n                }\n\n                // TODO teach $.mobile.hijackable to operate on raw dom elements so the\n                // link wrapping can be avoided\n                if ( !$( target ).jqmHijackable().length ) {\n                    return;\n                }\n            }\n\n            // Avoid calling .closest by using the data set during .buttonMarkup()\n            // List items have the button data in the parent of the element clicked\n            if ( !!~target.className.indexOf( \"ui-link-inherit\" ) ) {\n                if ( target.parentNode ) {\n                    btnEls = $.data( target.parentNode, \"buttonElements\" );\n                }\n            // Otherwise, look for the data on the target itself\n            } else {\n                btnEls = $.data( target, \"buttonElements\" );\n            }\n            // If found, grab the button's outer element\n            if ( btnEls ) {\n                target = btnEls.outer;\n            } else {\n                needClosest = true;\n            }\n\n            $btn = $( target );\n            // If the outer element wasn't found by the our heuristics, use .closest()\n            if ( needClosest ) {\n                $btn = $btn.closest( \".ui-btn\" );\n            }\n\n            if ( $btn.length > 0 &&\n                !( $btn.hasClass( \"ui-state-disabled\" ||\n\n                    // DEPRECATED as of 1.4.0 - remove after 1.4.0 release\n                    // only ui-state-disabled should be present thereafter\n                    $btn.hasClass( \"ui-disabled\" ) ) ) ) {\n                $.mobile.removeActiveLinkClass( true );\n                $.mobile.activeClickedLink = $btn;\n                $.mobile.activeClickedLink.addClass( $.mobile.activeBtnClass );\n            }\n        });\n\n        // click routing - direct to HTTP or Ajax, accordingly\n        $.mobile.document.bind( \"click\", function( event ) {\n            if ( !$.mobile.linkBindingEnabled || event.isDefaultPrevented() ) {\n                return;\n            }\n\n            var link = findClosestLink( event.target ),\n                $link = $( link ),\n\n                //remove active link class if external (then it won't be there if you come back)\n                httpCleanup = function() {\n                    window.setTimeout(function() { $.mobile.removeActiveLinkClass( true ); }, 200 );\n                },\n                baseUrl, href,\n                useDefaultUrlHandling, isExternal,\n                transition, reverse, role;\n\n            // If a button was clicked, clean up the active class added by vclick above\n            if ( $.mobile.activeClickedLink &&\n                $.mobile.activeClickedLink[ 0 ] === event.target.parentNode ) {\n                httpCleanup();\n            }\n\n            // If there is no link associated with the click or its not a left\n            // click we want to ignore the click\n            // TODO teach $.mobile.hijackable to operate on raw dom elements so the link wrapping\n            // can be avoided\n            if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {\n                return;\n            }\n\n            //if there's a data-rel=back attr, go back in history\n            if ( $link.is( \":jqmData(rel='back')\" ) ) {\n                $.mobile.back();\n                return false;\n            }\n\n            baseUrl = $.mobile.getClosestBaseUrl( $link );\n\n            //get href, if defined, otherwise default to empty hash\n            href = $.mobile.path.makeUrlAbsolute( $link.attr( \"href\" ) || \"#\", baseUrl );\n\n            //if ajax is disabled, exit early\n            if ( !$.mobile.ajaxEnabled && !$.mobile.path.isEmbeddedPage( href ) ) {\n                httpCleanup();\n                //use default click handling\n                return;\n            }\n\n            // XXX_jblas: Ideally links to application pages should be specified as\n            //            an url to the application document with a hash that is either\n            //            the site relative path or id to the page. But some of the\n            //            internal code that dynamically generates sub-pages for nested\n            //            lists and select dialogs, just write a hash in the link they\n            //            create. This means the actual URL path is based on whatever\n            //            the current value of the base tag is at the time this code\n            //            is called.\n            if ( href.search( \"#\" ) !== -1 &&\n                !( $.mobile.path.isExternal( href ) && $.mobile.path.isAbsoluteUrl( href ) ) ) {\n\n                href = href.replace( /[^#]*#/, \"\" );\n                if ( !href ) {\n                    //link was an empty hash meant purely\n                    //for interaction, so we ignore it.\n                    event.preventDefault();\n                    return;\n                } else if ( $.mobile.path.isPath( href ) ) {\n                    //we have apath so make it the href we want to load.\n                    href = $.mobile.path.makeUrlAbsolute( href, baseUrl );\n                } else {\n                    //we have a simple id so use the documentUrl as its base.\n                    href = $.mobile.path.makeUrlAbsolute( \"#\" + href, documentUrl.hrefNoHash );\n                }\n            }\n\n            // Should we handle this link, or let the browser deal with it?\n            useDefaultUrlHandling = $link.is( \"[rel='external']\" ) || $link.is( \":jqmData(ajax='false')\" ) || $link.is( \"[target]\" );\n\n            // Some embedded browsers, like the web view in Phone Gap, allow cross-domain XHR\n            // requests if the document doing the request was loaded via the file:// protocol.\n            // This is usually to allow the application to \"phone home\" and fetch app specific\n            // data. We normally let the browser handle external/cross-domain urls, but if the\n            // allowCrossDomainPages option is true, we will allow cross-domain http/https\n            // requests to go through our page loading logic.\n\n            //check for protocol or rel and its not an embedded page\n            //TODO overlap in logic from isExternal, rel=external check should be\n            //     moved into more comprehensive isExternalLink\n            isExternal = useDefaultUrlHandling || ( $.mobile.path.isExternal( href ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, href ) );\n\n            if ( isExternal ) {\n                httpCleanup();\n                //use default click handling\n                return;\n            }\n\n            //use ajax\n            transition = $link.jqmData( \"transition\" );\n            reverse = $link.jqmData( \"direction\" ) === \"reverse\" ||\n                        // deprecated - remove by 1.0\n                        $link.jqmData( \"back\" );\n\n            //this may need to be more specific as we use data-rel more\n            role = $link.attr( \"data-\" + $.mobile.ns + \"rel\" ) || undefined;\n\n            $.mobile.changePage( href, { transition: transition, reverse: reverse, role: role, link: $link } );\n            event.preventDefault();\n        });\n\n        //prefetch pages when anchors with data-prefetch are encountered\n        $.mobile.document.delegate( \".ui-page\", \"pageshow.prefetch\", function() {\n            var urls = [];\n            $( this ).find( \"a:jqmData(prefetch)\" ).each(function() {\n                var $link = $( this ),\n                    url = $link.attr( \"href\" );\n\n                if ( url && $.inArray( url, urls ) === -1 ) {\n                    urls.push( url );\n\n                    $.mobile.loadPage( url, { role: $link.attr( \"data-\" + $.mobile.ns + \"rel\" ),prefetch: true } );\n                }\n            });\n        });\n\n        // TODO ensure that the navigate binding in the content widget happens at the right time\n        $.mobile.pageContainer.pagecontainer();\n\n        //set page min-heights to be device specific\n        $.mobile.document.bind( \"pageshow\", function() {\n\n            // We need to wait for window.load to make sure that styles have already been rendered,\n            // otherwise heights of external toolbars will have the wrong value\n            if ( loadDeferred ) {\n                loadDeferred.done( $.mobile.resetActivePageHeight );\n            } else {\n                $.mobile.resetActivePageHeight();\n            }\n        });\n        $.mobile.window.bind( \"throttledresize\", $.mobile.resetActivePageHeight );\n\n    };//navreadyDeferred done callback\n\n    $( function() { domreadyDeferred.resolve(); } );\n\n    // Account for the possibility that the load event has already fired\n    if ( document.readyState === \"complete\" ) {\n        pageIsFullyLoaded();\n    } else {\n        $.mobile.window.load( pageIsFullyLoaded );\n    }\n\n    $.when( domreadyDeferred, $.mobile.navreadyDeferred ).done( function() { $.mobile._registerInternalEvents(); } );\n})( jQuery );\n\n\n(function( $, window, undefined ) {\n\n    // TODO remove direct references to $.mobile and properties, we should\n    //      favor injection with params to the constructor\n    $.mobile.Transition = function() {\n        this.init.apply( this, arguments );\n    };\n\n    $.extend($.mobile.Transition.prototype, {\n        toPreClass: \" ui-page-pre-in\",\n\n        init: function( name, reverse, $to, $from ) {\n            $.extend(this, {\n                name: name,\n                reverse: reverse,\n                $to: $to,\n                $from: $from,\n                deferred: new $.Deferred()\n            });\n        },\n\n        cleanFrom: function() {\n            this.$from\n                .removeClass( $.mobile.activePageClass + \" out in reverse \" + this.name )\n                .height( \"\" );\n        },\n\n        // NOTE overridden by child object prototypes, noop'd here as defaults\n        beforeDoneIn: function() {},\n        beforeDoneOut: function() {},\n        beforeStartOut: function() {},\n\n        doneIn: function() {\n            this.beforeDoneIn();\n\n            this.$to.removeClass( \"out in reverse \" + this.name ).height( \"\" );\n\n            this.toggleViewportClass();\n\n            // In some browsers (iOS5), 3D transitions block the ability to scroll to the desired location during transition\n            // This ensures we jump to that spot after the fact, if we aren't there already.\n            if ( $.mobile.window.scrollTop() !== this.toScroll ) {\n                this.scrollPage();\n            }\n            if ( !this.sequential ) {\n                this.$to.addClass( $.mobile.activePageClass );\n            }\n            this.deferred.resolve( this.name, this.reverse, this.$to, this.$from, true );\n        },\n\n        doneOut: function( screenHeight, reverseClass, none, preventFocus ) {\n            this.beforeDoneOut();\n            this.startIn( screenHeight, reverseClass, none, preventFocus );\n        },\n\n        hideIn: function( callback ) {\n            // Prevent flickering in phonegap container: see comments at #4024 regarding iOS\n            this.$to.css( \"z-index\", -10 );\n            callback.call( this );\n            this.$to.css( \"z-index\", \"\" );\n        },\n\n        scrollPage: function() {\n            // By using scrollTo instead of silentScroll, we can keep things better in order\n            // Just to be precautios, disable scrollstart listening like silentScroll would\n            $.event.special.scrollstart.enabled = false;\n            //if we are hiding the url bar or the page was previously scrolled scroll to hide or return to position\n            if ( $.mobile.hideUrlBar || this.toScroll !== $.mobile.defaultHomeScroll ) {\n                window.scrollTo( 0, this.toScroll );\n            }\n\n            // reenable scrollstart listening like silentScroll would\n            setTimeout( function() {\n                $.event.special.scrollstart.enabled = true;\n            }, 150 );\n        },\n\n        startIn: function( screenHeight, reverseClass, none, preventFocus ) {\n            this.hideIn(function() {\n                this.$to.addClass( $.mobile.activePageClass + this.toPreClass );\n\n                // Send focus to page as it is now display: block\n                if ( !preventFocus ) {\n                    $.mobile.focusPage( this.$to );\n                }\n\n                // Set to page height\n                this.$to.height( screenHeight + this.toScroll );\n\n                if ( !none ) {\n                    this.scrollPage();\n                }\n            });\n\n            this.$to\n                .removeClass( this.toPreClass )\n                .addClass( this.name + \" in \" + reverseClass );\n\n            if ( !none ) {\n                this.$to.animationComplete( $.proxy(function() {\n                    this.doneIn();\n                }, this ));\n            } else {\n                this.doneIn();\n            }\n\n        },\n\n        startOut: function( screenHeight, reverseClass, none ) {\n            this.beforeStartOut( screenHeight, reverseClass, none );\n\n            // Set the from page's height and start it transitioning out\n            // Note: setting an explicit height helps eliminate tiling in the transitions\n            this.$from\n                .height( screenHeight + $.mobile.window.scrollTop() )\n                .addClass( this.name + \" out\" + reverseClass );\n        },\n\n        toggleViewportClass: function() {\n            $.mobile.pageContainer.toggleClass( \"ui-mobile-viewport-transitioning viewport-\" + this.name );\n        },\n\n        transition: function() {\n            // NOTE many of these could be calculated/recorded in the constructor, it's my\n            //      opinion that binding them as late as possible has value with regards to\n            //      better transitions with fewer bugs. Ie, it's not guaranteed that the\n            //      object will be created and transition will be run immediately after as\n            //      it is today. So we wait until transition is invoked to gather the following\n            var none,\n                reverseClass = this.reverse ? \" reverse\" : \"\",\n                screenHeight = $.mobile.getScreenHeight(),\n                maxTransitionOverride = $.mobile.maxTransitionWidth !== false &&\n                    $.mobile.window.width() > $.mobile.maxTransitionWidth;\n\n            this.toScroll = $.mobile.navigate.history.getActive().lastScroll || $.mobile.defaultHomeScroll;\n\n            none = !$.support.cssTransitions || !$.support.cssAnimations ||\n                maxTransitionOverride || !this.name || this.name === \"none\" ||\n                Math.max( $.mobile.window.scrollTop(), this.toScroll ) >\n                    $.mobile.getMaxScrollForTransition();\n\n            this.toggleViewportClass();\n\n            if ( this.$from && !none ) {\n                this.startOut( screenHeight, reverseClass, none );\n            } else {\n                this.doneOut( screenHeight, reverseClass, none, true );\n            }\n\n            return this.deferred.promise();\n        }\n    });\n})( jQuery, this );\n\n\n(function( $ ) {\n\n    $.mobile.SerialTransition = function() {\n        this.init.apply(this, arguments);\n    };\n\n    $.extend($.mobile.SerialTransition.prototype, $.mobile.Transition.prototype, {\n        sequential: true,\n\n        beforeDoneOut: function() {\n            if ( this.$from ) {\n                this.cleanFrom();\n            }\n        },\n\n        beforeStartOut: function( screenHeight, reverseClass, none ) {\n            this.$from.animationComplete($.proxy(function() {\n                this.doneOut( screenHeight, reverseClass, none );\n            }, this ));\n        }\n    });\n\n})( jQuery );\n\n\n(function( $ ) {\n\n    $.mobile.ConcurrentTransition = function() {\n        this.init.apply(this, arguments);\n    };\n\n    $.extend($.mobile.ConcurrentTransition.prototype, $.mobile.Transition.prototype, {\n        sequential: false,\n\n        beforeDoneIn: function() {\n            if ( this.$from ) {\n                this.cleanFrom();\n            }\n        },\n\n        beforeStartOut: function( screenHeight, reverseClass, none ) {\n            this.doneOut( screenHeight, reverseClass, none );\n        }\n    });\n\n})( jQuery );\n\n\n(function( $ ) {\n\n    // generate the handlers from the above\n    var defaultGetMaxScrollForTransition = function() {\n        return $.mobile.getScreenHeight() * 3;\n    };\n\n    //transition handler dictionary for 3rd party transitions\n    $.mobile.transitionHandlers = {\n        \"sequential\": $.mobile.SerialTransition,\n        \"simultaneous\": $.mobile.ConcurrentTransition\n    };\n\n    // Make our transition handler the public default.\n    $.mobile.defaultTransitionHandler = $.mobile.transitionHandlers.sequential;\n\n    $.mobile.transitionFallbacks = {};\n\n    // If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified\n    $.mobile._maybeDegradeTransition = function( transition ) {\n        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {\n            transition = $.mobile.transitionFallbacks[ transition ];\n        }\n\n        return transition;\n    };\n\n    // Set the getMaxScrollForTransition to default if no implementation was set by user\n    $.mobile.getMaxScrollForTransition = $.mobile.getMaxScrollForTransition || defaultGetMaxScrollForTransition;\n\n})( jQuery );\n\n/*\n* fallback transition for flip in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.flip = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for flow in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.flow = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for pop in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.pop = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slide in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n// Use the simultaneous transitions handler for slide transitions\n$.mobile.transitionHandlers.slide = $.mobile.transitionHandlers.simultaneous;\n\n// Set the slide transitions's fallback to \"fade\"\n$.mobile.transitionFallbacks.slide = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slidedown in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.slidedown = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slidefade in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n// Set the slide transitions's fallback to \"fade\"\n$.mobile.transitionFallbacks.slidefade = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slideup in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.slideup = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for turn in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.turn = \"fade\";\n\n})( jQuery, this );\n\n\n(function( $, undefined ) {\n\n$.mobile.degradeInputs = {\n    color: false,\n    date: false,\n    datetime: false,\n    \"datetime-local\": false,\n    email: false,\n    month: false,\n    number: false,\n    range: \"number\",\n    search: \"text\",\n    tel: false,\n    time: false,\n    url: false,\n    week: false\n};\n// Backcompat remove in 1.5\n$.mobile.page.prototype.options.degradeInputs = $.mobile.degradeInputs;\n\n// Auto self-init widgets\n$.mobile.degradeInputsWithin = function( target ) {\n\n    target = $( target );\n\n    // Degrade inputs to avoid poorly implemented native functionality\n    target.find( \"input\" ).not( $.mobile.page.prototype.keepNativeSelector() ).each(function() {\n        var element = $( this ),\n            type = this.getAttribute( \"type\" ),\n            optType = $.mobile.degradeInputs[ type ] || \"text\",\n            html, hasType, findstr, repstr;\n\n        if ( $.mobile.degradeInputs[ type ] ) {\n            html = $( \"<div>\" ).html( element.clone() ).html();\n            // In IE browsers, the type sometimes doesn't exist in the cloned markup, so we replace the closing tag instead\n            hasType = html.indexOf( \" type=\" ) > -1;\n            findstr = hasType ? /\\s+type=[\"']?\\w+['\"]?/ : /\\/?>/;\n            repstr = \" type=\\\"\" + optType + \"\\\" data-\" + $.mobile.ns + \"type=\\\"\" + type + \"\\\"\" + ( hasType ? \"\" : \">\" );\n\n            element.replaceWith( html.replace( findstr, repstr ) );\n        }\n    });\n\n};\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n\n$.widget( \"mobile.page\", $.mobile.page, {\n    options: {\n\n        // Accepts left, right and none\n        closeBtn: \"left\",\n        closeBtnText: \"Close\",\n        overlayTheme: \"a\",\n        corners: true,\n        dialog: false\n    },\n\n    _create: function() {\n        this._super();\n        if ( this.options.dialog ) {\n\n            $.extend( this, {\n                _inner: this.element.children(),\n                _headerCloseButton: null\n            });\n\n            if ( !this.options.enhanced ) {\n                this._setCloseBtn( this.options.closeBtn );\n            }\n        }\n    },\n\n    _enhance: function() {\n        this._super();\n\n        // Class the markup for dialog styling and wrap interior\n        if ( this.options.dialog ) {\n            this.element.addClass( \"ui-dialog\" )\n                .wrapInner( $( \"<div/>\", {\n\n                    // ARIA role\n                    \"role\" : \"dialog\",\n                    \"class\" : \"ui-dialog-contain ui-overlay-shadow\" +\n                        ( this.options.corners ? \" ui-corner-all\" : \"\" )\n                }));\n        }\n    },\n\n    _setOptions: function( options ) {\n        var closeButtonLocation, closeButtonText,\n            currentOpts = this.options;\n\n        if ( options.corners !== undefined ) {\n            this._inner.toggleClass( \"ui-corner-all\", !!options.corners );\n        }\n\n        if ( options.overlayTheme !== undefined ) {\n            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {\n                currentOpts.overlayTheme = options.overlayTheme;\n                this._handlePageBeforeShow();\n            }\n        }\n\n        if ( options.closeBtnText !== undefined ) {\n            closeButtonLocation = currentOpts.closeBtn;\n            closeButtonText = options.closeBtnText;\n        }\n\n        if ( options.closeBtn !== undefined ) {\n            closeButtonLocation = options.closeBtn;\n        }\n\n        if ( closeButtonLocation ) {\n            this._setCloseBtn( closeButtonLocation, closeButtonText );\n        }\n\n        this._super( options );\n    },\n\n    _handlePageBeforeShow: function () {\n        if ( this.options.overlayTheme && this.options.dialog ) {\n            this.removeContainerBackground();\n            this.setContainerBackground( this.options.overlayTheme );\n        } else {\n            this._super();\n        }\n    },\n\n    _setCloseBtn: function( location, text ) {\n        var dst,\n            btn = this._headerCloseButton;\n\n        // Sanitize value\n        location = \"left\" === location ? \"left\" : \"right\" === location ? \"right\" : \"none\";\n\n        if ( \"none\" === location ) {\n            if ( btn ) {\n                btn.remove();\n                btn = null;\n            }\n        } else if ( btn ) {\n            btn.removeClass( \"ui-btn-left ui-btn-right\" ).addClass( \"ui-btn-\" + location );\n            if ( text ) {\n                btn.text( text );\n            }\n        } else {\n            dst = this._inner.find( \":jqmData(role='header')\" ).first();\n            btn = $( \"<a></a>\", {\n                    \"href\": \"#\",\n                    \"class\": \"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-\" + location\n                })\n                .attr( \"data-\" + $.mobile.ns + \"rel\", \"back\" )\n                .text( text || this.options.closeBtnText || \"\" )\n                .prependTo( dst );\n        }\n\n        this._headerCloseButton = btn;\n    }\n});\n\n})( jQuery, this );\n\n(function( $, window, undefined ) {\n\n$.widget( \"mobile.dialog\", {\n    options: {\n\n        // Accepts left, right and none\n        closeBtn: \"left\",\n        closeBtnText: \"Close\",\n        overlayTheme: \"a\",\n        corners: true\n    },\n\n    // Override the theme set by the page plugin on pageshow\n    _handlePageBeforeShow: function() {\n        this._isCloseable = true;\n        if ( this.options.overlayTheme ) {\n            this.element\n                .page( \"removeContainerBackground\" )\n                .page( \"setContainerBackground\", this.options.overlayTheme );\n        }\n    },\n\n    _handlePageBeforeHide: function() {\n        this._isCloseable = false;\n    },\n\n    // click and submit events:\n    // - clicks and submits should use the closing transition that the dialog\n    //   opened with unless a data-transition is specified on the link/form\n    // - if the click was on the close button, or the link has a data-rel=\"back\"\n    //   it'll go back in history naturally\n    _handleVClickSubmit: function( event ) {\n        var attrs,\n            $target = $( event.target ).closest( event.type === \"vclick\" ? \"a\" : \"form\" );\n\n        if ( $target.length && !$target.jqmData( \"transition\" ) ) {\n            attrs = {};\n            attrs[ \"data-\" + $.mobile.ns + \"transition\" ] =\n                ( $.mobile.navigate.history.getActive() || {} )[ \"transition\" ] ||\n                $.mobile.defaultDialogTransition;\n            attrs[ \"data-\" + $.mobile.ns + \"direction\" ] = \"reverse\";\n            $target.attr( attrs );\n        }\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options;\n\n        // Class the markup for dialog styling and wrap interior\n        elem.addClass( \"ui-dialog\" )\n            .wrapInner( $( \"<div/>\", {\n\n                // ARIA role\n                \"role\" : \"dialog\",\n                \"class\" : \"ui-dialog-contain ui-overlay-shadow\" +\n                    ( !!opts.corners ? \" ui-corner-all\" : \"\" )\n            }));\n\n        $.extend( this, {\n            _isCloseable: false,\n            _inner: elem.children(),\n            _headerCloseButton: null\n        });\n\n        this._on( elem, {\n            vclick: \"_handleVClickSubmit\",\n            submit: \"_handleVClickSubmit\",\n            pagebeforeshow: \"_handlePageBeforeShow\",\n            pagebeforehide: \"_handlePageBeforeHide\"\n        });\n\n        this._setCloseBtn( opts.closeBtn );\n    },\n\n    _setOptions: function( options ) {\n        var closeButtonLocation, closeButtonText,\n            currentOpts = this.options;\n\n        if ( options.corners !== undefined ) {\n            this._inner.toggleClass( \"ui-corner-all\", !!options.corners );\n        }\n\n        if ( options.overlayTheme !== undefined ) {\n            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {\n                currentOpts.overlayTheme = options.overlayTheme;\n                this._handlePageBeforeShow();\n            }\n        }\n\n        if ( options.closeBtnText !== undefined ) {\n            closeButtonLocation = currentOpts.closeBtn;\n            closeButtonText = options.closeBtnText;\n        }\n\n        if ( options.closeBtn !== undefined ) {\n            closeButtonLocation = options.closeBtn;\n        }\n\n        if ( closeButtonLocation ) {\n            this._setCloseBtn( closeButtonLocation, closeButtonText );\n        }\n\n        this._super( options );\n    },\n\n    _setCloseBtn: function( location, text ) {\n        var dst,\n            btn = this._headerCloseButton;\n\n        // Sanitize value\n        location = \"left\" === location ? \"left\" : \"right\" === location ? \"right\" : \"none\";\n\n        if ( \"none\" === location ) {\n            if ( btn ) {\n                btn.remove();\n                btn = null;\n            }\n        } else if ( btn ) {\n            btn.removeClass( \"ui-btn-left ui-btn-right\" ).addClass( \"ui-btn-\" + location );\n            if ( text ) {\n                btn.text( text );\n            }\n        } else {\n            dst = this._inner.find( \":jqmData(role='header')\" ).first();\n            btn = $( \"<a></a>\", {\n                    \"role\": \"button\",\n                    \"href\": \"#\",\n                    \"class\": \"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-\" + location\n                })\n                .text( text || this.options.closeBtnText || \"\" )\n                .prependTo( dst );\n            this._on( btn, { click: \"close\" } );\n        }\n\n        this._headerCloseButton = btn;\n    },\n\n    // Close method goes back in history\n    close: function() {\n        var hist = $.mobile.navigate.history;\n\n        if ( this._isCloseable ) {\n            this._isCloseable = false;\n            // If the hash listening is enabled and there is at least one preceding history\n            // entry it's ok to go back. Initial pages with the dialog hash state are an example\n            // where the stack check is necessary\n            if ( $.mobile.hashListeningEnabled && hist.activeIndex > 0 ) {\n                $.mobile.back();\n            } else {\n                $.mobile.pageContainer.pagecontainer( \"back\" );\n            }\n        }\n    }\n});\n\n})( jQuery, this );\n\n(function( $, undefined ) {\n\nvar rInitialLetter = /([A-Z])/g,\n\n    // Construct iconpos class from iconpos value\n    iconposClass = function( iconpos ) {\n        return ( \"ui-btn-icon-\" + ( iconpos === null ? \"left\" : iconpos ) );\n    };\n\n$.widget( \"mobile.collapsible\", {\n    options: {\n        enhanced: false,\n        expandCueText: null,\n        collapseCueText: null,\n        collapsed: true,\n        heading: \"h1,h2,h3,h4,h5,h6,legend\",\n        collapsedIcon: null,\n        expandedIcon: null,\n        iconpos: null,\n        theme: null,\n        contentTheme: null,\n        inset: null,\n        corners: null,\n        mini: null\n    },\n\n    _create: function() {\n        var elem = this.element,\n            ui = {\n                accordion: elem\n                    .closest( \":jqmData(role='collapsible-set'),\" +\n                        \":jqmData(role='collapsibleset')\" +\n                        ( $.mobile.collapsibleset ? \", :mobile-collapsibleset\" :\n                            \"\" ) )\n                    .addClass( \"ui-collapsible-set\" )\n            };\n\n        this._ui = ui;\n        this._renderedOptions = this._getOptions( this.options );\n\n        if ( this.options.enhanced ) {\n            ui.heading = this.element.children( \".ui-collapsible-heading\" );\n            ui.content = ui.heading.next();\n            ui.anchor = ui.heading.children();\n            ui.status = ui.anchor.children( \".ui-collapsible-heading-status\" );\n        } else {\n            this._enhance( elem, ui );\n        }\n\n        this._on( ui.heading, {\n            \"tap\": function() {\n                ui.heading.find( \"a\" ).first().addClass( $.mobile.activeBtnClass );\n            },\n\n            \"click\": function( event ) {\n                this._handleExpandCollapse( !ui.heading.hasClass( \"ui-collapsible-heading-collapsed\" ) );\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n    },\n\n    // Adjust the keys inside options for inherited values\n    _getOptions: function( options ) {\n        var key,\n            accordion = this._ui.accordion,\n            accordionWidget = this._ui.accordionWidget;\n\n        // Copy options\n        options = $.extend( {}, options );\n\n        if ( accordion.length && !accordionWidget ) {\n            this._ui.accordionWidget =\n            accordionWidget = accordion.data( \"mobile-collapsibleset\" );\n        }\n\n        for ( key in options ) {\n\n            // Retrieve the option value first from the options object passed in and, if\n            // null, from the parent accordion or, if that's null too, or if there's no\n            // parent accordion, then from the defaults.\n            options[ key ] =\n                ( options[ key ] != null ) ? options[ key ] :\n                ( accordionWidget ) ? accordionWidget.options[ key ] :\n                accordion.length ? $.mobile.getAttribute( accordion[ 0 ],\n                    key.replace( rInitialLetter, \"-$1\" ).toLowerCase() ):\n                null;\n\n            if ( null == options[ key ] ) {\n                options[ key ] = $.mobile.collapsible.defaults[ key ];\n            }\n        }\n\n        return options;\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : prefix + value ) : \"\" );\n    },\n\n    _enhance: function( elem, ui ) {\n        var iconclass,\n            opts = this._renderedOptions,\n            contentThemeClass = this._themeClassFromOption( \"ui-body-\", opts.contentTheme );\n\n        elem.addClass( \"ui-collapsible \" +\n            ( opts.inset ? \"ui-collapsible-inset \" : \"\" ) +\n            ( opts.inset && opts.corners ? \"ui-corner-all \" : \"\" ) +\n            ( contentThemeClass ? \"ui-collapsible-themed-content \" : \"\" ) );\n        ui.originalHeading = elem.children( this.options.heading ).first(),\n        ui.content = elem\n            .wrapInner( \"<div \" +\n                \"class='ui-collapsible-content \" +\n                contentThemeClass + \"'></div>\" )\n            .children( \".ui-collapsible-content\" ),\n        ui.heading = ui.originalHeading;\n\n        // Replace collapsibleHeading if it's a legend\n        if ( ui.heading.is( \"legend\" ) ) {\n            ui.heading = $( \"<div role='heading'>\"+ ui.heading.html() +\"</div>\" );\n            ui.placeholder = $( \"<div><!-- placeholder for legend --></div>\" ).insertBefore( ui.originalHeading );\n            ui.originalHeading.remove();\n        }\n\n        iconclass = ( opts.collapsed ? ( opts.collapsedIcon ? \"ui-icon-\" + opts.collapsedIcon : \"\" ):\n            ( opts.expandedIcon ? \"ui-icon-\" + opts.expandedIcon : \"\" ) );\n\n        ui.status = $( \"<span class='ui-collapsible-heading-status'></span>\" );\n        ui.anchor = ui.heading\n            .detach()\n            //modify markup & attributes\n            .addClass( \"ui-collapsible-heading\" )\n            .append( ui.status )\n            .wrapInner( \"<a href='#' class='ui-collapsible-heading-toggle'></a>\" )\n            .find( \"a\" )\n                .first()\n                .addClass( \"ui-btn \" +\n                    ( iconclass ? iconclass + \" \" : \"\" ) +\n                    ( iconclass ? iconposClass( opts.iconpos ) +\n                        \" \" : \"\" ) +\n                    this._themeClassFromOption( \"ui-btn-\", opts.theme ) + \" \" +\n                    ( opts.mini ? \"ui-mini \" : \"\" ) );\n\n        //drop heading in before content\n        ui.heading.insertBefore( ui.content );\n\n        this._handleExpandCollapse( this.options.collapsed );\n\n        return ui;\n    },\n\n    refresh: function() {\n        this._applyOptions( this.options );\n        this._renderedOptions = this._getOptions( this.options );\n    },\n\n    _applyOptions: function( options ) {\n        var isCollapsed, newTheme, oldTheme, hasCorners, hasIcon,\n            elem = this.element,\n            currentOpts = this._renderedOptions,\n            ui = this._ui,\n            anchor = ui.anchor,\n            status = ui.status,\n            opts = this._getOptions( options );\n\n        // First and foremost we need to make sure the collapsible is in the proper\n        // state, in case somebody decided to change the collapsed option at the\n        // same time as another option\n        if ( options.collapsed !== undefined ) {\n            this._handleExpandCollapse( options.collapsed );\n        }\n\n        isCollapsed = elem.hasClass( \"ui-collapsible-collapsed\" );\n\n        // We only need to apply the cue text for the current state right away.\n        // The cue text for the alternate state will be stored in the options\n        // and applied the next time the collapsible's state is toggled\n        if ( isCollapsed ) {\n            if ( opts.expandCueText !== undefined ) {\n                status.text( opts.expandCueText );\n            }\n        } else {\n            if ( opts.collapseCueText !== undefined ) {\n                status.text( opts.collapseCueText );\n            }\n        }\n\n        // Update icon\n\n        // Is it supposed to have an icon?\n        hasIcon =\n\n            // If the collapsedIcon is being set, consult that\n            ( opts.collapsedIcon !== undefined ? opts.collapsedIcon !== false :\n\n                // Otherwise consult the existing option value\n                currentOpts.collapsedIcon !== false );\n\n\n        // If any icon-related options have changed, make sure the new icon\n        // state is reflected by first removing all icon-related classes\n        // reflecting the current state and then adding all icon-related\n        // classes for the new state\n        if ( !( opts.iconpos === undefined &&\n            opts.collapsedIcon === undefined &&\n            opts.expandedIcon === undefined ) ) {\n\n            // Remove all current icon-related classes\n            anchor.removeClass( [ iconposClass( currentOpts.iconpos ) ]\n                .concat( ( currentOpts.expandedIcon ?\n                    [ \"ui-icon-\" + currentOpts.expandedIcon ] : [] ) )\n                .concat( ( currentOpts.collapsedIcon ?\n                    [ \"ui-icon-\" + currentOpts.collapsedIcon ] : [] ) )\n                .join( \" \" ) );\n\n            // Add new classes if an icon is supposed to be present\n            if ( hasIcon ) {\n                anchor.addClass(\n                    [ iconposClass( opts.iconpos !== undefined ?\n                        opts.iconpos : currentOpts.iconpos ) ]\n                        .concat( isCollapsed ?\n                            [ \"ui-icon-\" + ( opts.collapsedIcon !== undefined ?\n                                opts.collapsedIcon :\n                                currentOpts.collapsedIcon ) ] :\n                            [ \"ui-icon-\" + ( opts.expandedIcon !== undefined ?\n                                opts.expandedIcon :\n                                currentOpts.expandedIcon ) ] )\n                        .join( \" \" ) );\n            }\n        }\n\n        if ( opts.theme !== undefined ) {\n            oldTheme = this._themeClassFromOption( \"ui-btn-\", currentOpts.theme );\n            newTheme = this._themeClassFromOption( \"ui-btn-\", opts.theme );\n            anchor.removeClass( oldTheme ).addClass( newTheme );\n        }\n\n        if ( opts.contentTheme !== undefined ) {\n            oldTheme = this._themeClassFromOption( \"ui-body-\",\n                currentOpts.contentTheme );\n            newTheme = this._themeClassFromOption( \"ui-body-\",\n                opts.contentTheme );\n            ui.content.removeClass( oldTheme ).addClass( newTheme );\n        }\n\n        if ( opts.inset !== undefined ) {\n            elem.toggleClass( \"ui-collapsible-inset\", opts.inset );\n            hasCorners = !!( opts.inset && ( opts.corners || currentOpts.corners ) );\n        }\n\n        if ( opts.corners !== undefined ) {\n            hasCorners = !!( opts.corners && ( opts.inset || currentOpts.inset ) );\n        }\n\n        if ( hasCorners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", hasCorners );\n        }\n\n        if ( opts.mini !== undefined ) {\n            anchor.toggleClass( \"ui-mini\", opts.mini );\n        }\n    },\n\n    _setOptions: function( options ) {\n        this._applyOptions( options );\n        this._super( options );\n        this._renderedOptions = this._getOptions( this.options );\n    },\n\n    _handleExpandCollapse: function( isCollapse ) {\n        var opts = this._renderedOptions,\n            ui = this._ui;\n\n        ui.status.text( isCollapse ? opts.expandCueText : opts.collapseCueText );\n        ui.heading\n            .toggleClass( \"ui-collapsible-heading-collapsed\", isCollapse )\n            .find( \"a\" ).first()\n            .toggleClass( \"ui-icon-\" + opts.expandedIcon, !isCollapse )\n\n            // logic or cause same icon for expanded/collapsed state would remove the ui-icon-class\n            .toggleClass( \"ui-icon-\" + opts.collapsedIcon, ( isCollapse || opts.expandedIcon === opts.collapsedIcon ) )\n            .removeClass( $.mobile.activeBtnClass );\n\n        this.element.toggleClass( \"ui-collapsible-collapsed\", isCollapse );\n        ui.content\n            .toggleClass( \"ui-collapsible-content-collapsed\", isCollapse )\n            .attr( \"aria-hidden\", isCollapse )\n            .trigger( \"updatelayout\" );\n        this.options.collapsed = isCollapse;\n        this._trigger( isCollapse ? \"collapse\" : \"expand\" );\n    },\n\n    expand: function() {\n        this._handleExpandCollapse( false );\n    },\n\n    collapse: function() {\n        this._handleExpandCollapse( true );\n    },\n\n    _destroy: function() {\n        var ui = this._ui,\n            opts = this.options;\n\n        if ( opts.enhanced ) {\n            return;\n        }\n\n        if ( ui.placeholder ) {\n            ui.originalHeading.insertBefore( ui.placeholder );\n            ui.placeholder.remove();\n            ui.heading.remove();\n        } else {\n            ui.status.remove();\n            ui.heading\n                .removeClass( \"ui-collapsible-heading ui-collapsible-heading-collapsed\" )\n                .children()\n                    .contents()\n                        .unwrap();\n        }\n\n        ui.anchor.contents().unwrap();\n        ui.content.contents().unwrap();\n        this.element\n            .removeClass( \"ui-collapsible ui-collapsible-collapsed \" +\n                \"ui-collapsible-themed-content ui-collapsible-inset ui-corner-all\" );\n    }\n});\n\n// Defaults to be used by all instances of collapsible if per-instance values\n// are unset or if nothing is specified by way of inheritance from an accordion.\n// Note that this hash does not contain options \"collapsed\" or \"heading\",\n// because those are not inheritable.\n$.mobile.collapsible.defaults = {\n    expandCueText: \" click to expand contents\",\n    collapseCueText: \" click to collapse contents\",\n    collapsedIcon: \"plus\",\n    contentTheme: \"inherit\",\n    expandedIcon: \"minus\",\n    iconpos: \"left\",\n    inset: true,\n    corners: true,\n    theme: \"inherit\",\n    mini: false\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar uiScreenHiddenRegex = /\\bui-screen-hidden\\b/;\nfunction noHiddenClass( elements ) {\n    var index,\n        length = elements.length,\n        result = [];\n\n    for ( index = 0; index < length; index++ ) {\n        if ( !elements[ index ].className.match( uiScreenHiddenRegex ) ) {\n            result.push( elements[ index ] );\n        }\n    }\n\n    return $( result );\n}\n\n$.mobile.behaviors.addFirstLastClasses = {\n    _getVisibles: function( $els, create ) {\n        var visibles;\n\n        if ( create ) {\n            visibles = noHiddenClass( $els );\n        } else {\n            visibles = $els.filter( \":visible\" );\n            if ( visibles.length === 0 ) {\n                visibles = noHiddenClass( $els );\n            }\n        }\n\n        return visibles;\n    },\n\n    _addFirstLastClasses: function( $els, $visibles, create ) {\n        $els.removeClass( \"ui-first-child ui-last-child\" );\n        $visibles.eq( 0 ).addClass( \"ui-first-child\" ).end().last().addClass( \"ui-last-child\" );\n        if ( !create ) {\n            this.element.trigger( \"updatelayout\" );\n        }\n    },\n\n    _removeFirstLastClasses: function( $els ) {\n        $els.removeClass( \"ui-first-child ui-last-child\" );\n    }\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar childCollapsiblesSelector = \":mobile-collapsible, \" + $.mobile.collapsible.initSelector;\n\n$.widget( \"mobile.collapsibleset\", $.extend( {\n\n    // The initSelector is deprecated as of 1.4.0. In 1.5.0 we will use\n    // :jqmData(role='collapsibleset') which will allow us to get rid of the line\n    // below altogether, because the autoinit will generate such an initSelector\n    initSelector: \":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')\",\n\n    options: $.extend( {\n        enhanced: false\n    }, $.mobile.collapsible.defaults ),\n\n    _handleCollapsibleExpand: function( event ) {\n        var closestCollapsible = $( event.target ).closest( \".ui-collapsible\" );\n\n        if ( closestCollapsible.parent().is( \":mobile-collapsibleset, :jqmData(role='collapsible-set')\" ) ) {\n            closestCollapsible\n                .siblings( \".ui-collapsible:not(.ui-collapsible-collapsed)\" )\n                .collapsible( \"collapse\" );\n        }\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options;\n\n        $.extend( this, {\n            _classes: \"\"\n        });\n\n        if ( !opts.enhanced ) {\n            elem.addClass( \"ui-collapsible-set \" +\n                this._themeClassFromOption( \"ui-group-theme-\", opts.theme ) + \" \" +\n                ( opts.corners && opts.inset ? \"ui-corner-all \" : \"\" ) );\n            this.element.find( $.mobile.collapsible.initSelector ).collapsible();\n        }\n\n        this._on( elem, { collapsibleexpand: \"_handleCollapsibleExpand\" } );\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : prefix + value ) : \"\" );\n    },\n\n    _init: function() {\n        this._refresh( true );\n\n        // Because the corners are handled by the collapsible itself and the default state is collapsed\n        // That was causing https://github.com/jquery/jquery-mobile/issues/4116\n        this.element\n            .children( childCollapsiblesSelector )\n            .filter( \":jqmData(collapsed='false')\" )\n            .collapsible( \"expand\" );\n    },\n\n    _setOptions: function( options ) {\n        var ret, hasCorners,\n            elem = this.element,\n            themeClass = this._themeClassFromOption( \"ui-group-theme-\", options.theme );\n\n        if ( themeClass ) {\n            elem\n                .removeClass( this._themeClassFromOption( \"ui-group-theme-\", this.options.theme ) )\n                .addClass( themeClass );\n        }\n\n        if ( options.inset !== undefined ) {\n            hasCorners = !!( options.inset && ( options.corners || this.options.corners ) );\n        }\n\n        if ( options.corners !== undefined ) {\n            hasCorners = !!( options.corners && ( options.inset || this.options.inset ) );\n        }\n\n        if ( hasCorners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", hasCorners );\n        }\n\n        ret = this._super( options );\n        this.element.children( \":mobile-collapsible\" ).collapsible( \"refresh\" );\n        return ret;\n    },\n\n    _destroy: function() {\n        var el = this.element;\n\n        this._removeFirstLastClasses( el.children( childCollapsiblesSelector ) );\n        el\n            .removeClass( \"ui-collapsible-set ui-corner-all \" +\n                this._themeClassFromOption( \"ui-group-theme-\", this.options.theme ) )\n            .children( \":mobile-collapsible\" )\n            .collapsible( \"destroy\" );\n    },\n\n    _refresh: function( create ) {\n        var collapsiblesInSet = this.element.children( childCollapsiblesSelector );\n\n        this.element.find( $.mobile.collapsible.initSelector ).not( \".ui-collapsible\" ).collapsible();\n\n        this._addFirstLastClasses( collapsiblesInSet, this._getVisibles( collapsiblesInSet, create ), create );\n    },\n\n    refresh: function() {\n        this._refresh( false );\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// Deprecated in 1.4\n$.fn.fieldcontain = function(/* options */) {\n    return this.addClass( \"ui-field-contain\" );\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.fn.grid = function( options ) {\n    return this.each(function() {\n\n        var $this = $( this ),\n            o = $.extend({\n                grid: null\n            }, options ),\n            $kids = $this.children(),\n            gridCols = { solo:1, a:2, b:3, c:4, d:5 },\n            grid = o.grid,\n            iterator,\n            letter;\n\n            if ( !grid ) {\n                if ( $kids.length <= 5 ) {\n                    for ( letter in gridCols ) {\n                        if ( gridCols[ letter ] === $kids.length ) {\n                            grid = letter;\n                        }\n                    }\n                } else {\n                    grid = \"a\";\n                    $this.addClass( \"ui-grid-duo\" );\n                }\n            }\n            iterator = gridCols[grid];\n\n        $this.addClass( \"ui-grid-\" + grid );\n\n        $kids.filter( \":nth-child(\" + iterator + \"n+1)\" ).addClass( \"ui-block-a\" );\n\n        if ( iterator > 1 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+2)\" ).addClass( \"ui-block-b\" );\n        }\n        if ( iterator > 2 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+3)\" ).addClass( \"ui-block-c\" );\n        }\n        if ( iterator > 3 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+4)\" ).addClass( \"ui-block-d\" );\n        }\n        if ( iterator > 4 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+5)\" ).addClass( \"ui-block-e\" );\n        }\n    });\n};\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.navbar\", {\n    options: {\n        iconpos: \"top\",\n        grid: null\n    },\n\n    _create: function() {\n\n        var $navbar = this.element,\n            $navbtns = $navbar.find( \"a, button\" ),\n            iconpos = $navbtns.filter( \":jqmData(icon)\" ).length ? this.options.iconpos : undefined;\n\n        $navbar.addClass( \"ui-navbar\" )\n            .attr( \"role\", \"navigation\" )\n            .find( \"ul\" )\n            .jqmEnhanceable()\n            .grid({ grid: this.options.grid });\n\n        $navbtns\n            .each( function() {\n                var icon = $.mobile.getAttribute( this, \"icon\" ),\n                    theme = $.mobile.getAttribute( this, \"theme\" ),\n                    classes = \"ui-btn\";\n\n                if ( theme ) {\n                    classes += \" ui-btn-\" + theme;\n                }\n                if ( icon ) {\n                    classes += \" ui-icon-\" + icon + \" ui-btn-icon-\" + iconpos;\n                }\n                $( this ).addClass( classes );\n            });\n\n        $navbar.delegate( \"a\", \"vclick\", function( /* event */ ) {\n            var activeBtn = $( this );\n\n            if ( !( activeBtn.hasClass( \"ui-state-disabled\" ) ||\n\n                // DEPRECATED as of 1.4.0 - remove after 1.4.0 release\n                // only ui-state-disabled should be present thereafter\n                activeBtn.hasClass( \"ui-disabled\" ) ||\n                activeBtn.hasClass( $.mobile.activeBtnClass ) ) ) {\n\n                $navbtns.removeClass( $.mobile.activeBtnClass );\n                activeBtn.addClass( $.mobile.activeBtnClass );\n\n                // The code below is a workaround to fix #1181\n                $( document ).one( \"pagehide\", function() {\n                    activeBtn.removeClass( $.mobile.activeBtnClass );\n                });\n            }\n        });\n\n        // Buttons in the navbar with ui-state-persist class should regain their active state before page show\n        $navbar.closest( \".ui-page\" ).bind( \"pagebeforeshow\", function() {\n            $navbtns.filter( \".ui-state-persist\" ).addClass( $.mobile.activeBtnClass );\n        });\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar getAttr = $.mobile.getAttribute;\n\n$.widget( \"mobile.listview\", $.extend( {\n\n    options: {\n        theme: null,\n        countTheme: null, /* Deprecated in 1.4 */\n        dividerTheme: null,\n        icon: \"carat-r\",\n        splitIcon: \"carat-r\",\n        splitTheme: null,\n        corners: true,\n        shadow: true,\n        inset: false\n    },\n\n    _create: function() {\n        var t = this,\n            listviewClasses = \"\";\n\n        listviewClasses += t.options.inset ? \" ui-listview-inset\" : \"\";\n\n        if ( !!t.options.inset ) {\n            listviewClasses += t.options.corners ? \" ui-corner-all\" : \"\";\n            listviewClasses += t.options.shadow ? \" ui-shadow\" : \"\";\n        }\n\n        // create listview markup\n        t.element.addClass( \" ui-listview\" + listviewClasses );\n\n        t.refresh( true );\n    },\n\n    // TODO: Remove in 1.5\n    _findFirstElementByTagName: function( ele, nextProp, lcName, ucName ) {\n        var dict = {};\n        dict[ lcName ] = dict[ ucName ] = true;\n        while ( ele ) {\n            if ( dict[ ele.nodeName ] ) {\n                return ele;\n            }\n            ele = ele[ nextProp ];\n        }\n        return null;\n    },\n    // TODO: Remove in 1.5\n    _addThumbClasses: function( containers ) {\n        var i, img, len = containers.length;\n        for ( i = 0; i < len; i++ ) {\n            img = $( this._findFirstElementByTagName( containers[ i ].firstChild, \"nextSibling\", \"img\", \"IMG\" ) );\n            if ( img.length ) {\n                $( this._findFirstElementByTagName( img[ 0 ].parentNode, \"parentNode\", \"li\", \"LI\" ) ).addClass( img.hasClass( \"ui-li-icon\" ) ? \"ui-li-has-icon\" : \"ui-li-has-thumb\" );\n            }\n        }\n    },\n\n    _getChildrenByTagName: function( ele, lcName, ucName ) {\n        var results = [],\n            dict = {};\n        dict[ lcName ] = dict[ ucName ] = true;\n        ele = ele.firstChild;\n        while ( ele ) {\n            if ( dict[ ele.nodeName ] ) {\n                results.push( ele );\n            }\n            ele = ele.nextSibling;\n        }\n        return $( results );\n    },\n\n    _beforeListviewRefresh: $.noop,\n    _afterListviewRefresh: $.noop,\n\n    refresh: function( create ) {\n        var buttonClass, pos, numli, item, itemClass, itemTheme, itemIcon, icon, a,\n            isDivider, startCount, newStartCount, value, last, splittheme, splitThemeClass, spliticon,\n            altButtonClass, dividerTheme, li,\n            o = this.options,\n            $list = this.element,\n            ol = !!$.nodeName( $list[ 0 ], \"ol\" ),\n            start = $list.attr( \"start\" ),\n            itemClassDict = {},\n            countBubbles = $list.find( \".ui-li-count\" ),\n            countTheme = getAttr( $list[ 0 ], \"counttheme\" ) || this.options.countTheme,\n            countThemeClass = countTheme ? \"ui-body-\" + countTheme : \"ui-body-inherit\";\n\n        if ( o.theme ) {\n            $list.addClass( \"ui-group-theme-\" + o.theme );\n        }\n\n        // Check if a start attribute has been set while taking a value of 0 into account\n        if ( ol && ( start || start === 0 ) ) {\n            startCount = parseInt( start, 10 ) - 1;\n            $list.css( \"counter-reset\", \"listnumbering \" + startCount );\n        }\n\n        this._beforeListviewRefresh();\n\n        li = this._getChildrenByTagName( $list[ 0 ], \"li\", \"LI\" );\n\n        for ( pos = 0, numli = li.length; pos < numli; pos++ ) {\n            item = li.eq( pos );\n            itemClass = \"\";\n\n            if ( create || item[ 0 ].className.search( /\\bui-li-static\\b|\\bui-li-divider\\b/ ) < 0 ) {\n                a = this._getChildrenByTagName( item[ 0 ], \"a\", \"A\" );\n                isDivider = ( getAttr( item[ 0 ], \"role\" ) === \"list-divider\" );\n                value = item.attr( \"value\" );\n                itemTheme = getAttr( item[ 0 ], \"theme\" );\n\n                if ( a.length && a[ 0 ].className.search( /\\bui-btn\\b/ ) < 0 && !isDivider ) {\n                    itemIcon = getAttr( item[ 0 ], \"icon\" );\n                    icon = ( itemIcon === false ) ? false : ( itemIcon || o.icon );\n\n                    // TODO: Remove in 1.5 together with links.js (links.js / .ui-link deprecated in 1.4)\n                    a.removeClass( \"ui-link\" );\n\n                    buttonClass = \"ui-btn\";\n\n                    if ( itemTheme ) {\n                        buttonClass += \" ui-btn-\" + itemTheme;\n                    }\n\n                    if ( a.length > 1 ) {\n                        itemClass = \"ui-li-has-alt\";\n\n                        last = a.last();\n                        splittheme = getAttr( last[ 0 ], \"theme\" ) || o.splitTheme || getAttr( item[ 0 ], \"theme\", true );\n                        splitThemeClass = splittheme ? \" ui-btn-\" + splittheme : \"\";\n                        spliticon = getAttr( last[ 0 ], \"icon\" ) || getAttr( item[ 0 ], \"icon\" ) || o.splitIcon;\n                        altButtonClass = \"ui-btn ui-btn-icon-notext ui-icon-\" + spliticon + splitThemeClass;\n\n                        last\n                            .attr( \"title\", $.trim( last.getEncodedText() ) )\n                            .addClass( altButtonClass )\n                            .empty();\n\n                        // Reduce to the first anchor, because only the first gets the buttonClass\n                        a = a.first();\n                    } else if ( icon ) {\n                        buttonClass += \" ui-btn-icon-right ui-icon-\" + icon;\n                    }\n\n                    // Apply buttonClass to the (first) anchor\n                    a.addClass( buttonClass );\n                } else if ( isDivider ) {\n                    dividerTheme = ( getAttr( item[ 0 ], \"theme\" ) || o.dividerTheme || o.theme );\n\n                    itemClass = \"ui-li-divider ui-bar-\" + ( dividerTheme ? dividerTheme : \"inherit\" );\n\n                    item.attr( \"role\", \"heading\" );\n                } else if ( a.length <= 0 ) {\n                    itemClass = \"ui-li-static ui-body-\" + ( itemTheme ? itemTheme : \"inherit\" );\n                }\n                if ( ol && value ) {\n                    newStartCount = parseInt( value , 10 ) - 1;\n\n                    item.css( \"counter-reset\", \"listnumbering \" + newStartCount );\n                }\n            }\n\n            // Instead of setting item class directly on the list item\n            // at this point in time, push the item into a dictionary\n            // that tells us what class to set on it so we can do this after this\n            // processing loop is finished.\n\n            if ( !itemClassDict[ itemClass ] ) {\n                itemClassDict[ itemClass ] = [];\n            }\n\n            itemClassDict[ itemClass ].push( item[ 0 ] );\n        }\n\n        // Set the appropriate listview item classes on each list item.\n        // The main reason we didn't do this\n        // in the for-loop above is because we can eliminate per-item function overhead\n        // by calling addClass() and children() once or twice afterwards. This\n        // can give us a significant boost on platforms like WP7.5.\n\n        for ( itemClass in itemClassDict ) {\n            $( itemClassDict[ itemClass ] ).addClass( itemClass );\n        }\n\n        countBubbles.each( function() {\n            $( this ).closest( \"li\" ).addClass( \"ui-li-has-count\" );\n        });\n        if ( countThemeClass ) {\n            countBubbles.not( \"[class*='ui-body-']\" ).addClass( countThemeClass );\n        }\n\n        // Deprecated in 1.4. From 1.5 you have to add class ui-li-has-thumb or ui-li-has-icon to the LI.\n        this._addThumbClasses( li );\n        this._addThumbClasses( li.find( \".ui-btn\" ) );\n\n        this._afterListviewRefresh();\n\n        this._addFirstLastClasses( li, this._getVisibles( li, create ), create );\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nfunction defaultAutodividersSelector( elt ) {\n    // look for the text in the given element\n    var text = $.trim( elt.text() ) || null;\n\n    if ( !text ) {\n        return null;\n    }\n\n    // create the text for the divider (first uppercased letter)\n    text = text.slice( 0, 1 ).toUpperCase();\n\n    return text;\n}\n\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        autodividers: false,\n        autodividersSelector: defaultAutodividersSelector\n    },\n\n    _beforeListviewRefresh: function() {\n        if ( this.options.autodividers ) {\n            this._replaceDividers();\n            this._superApply( arguments );\n        }\n    },\n\n    _replaceDividers: function() {\n        var i, lis, li, dividerText,\n            lastDividerText = null,\n            list = this.element,\n            divider;\n\n        list.children( \"li:jqmData(role='list-divider')\" ).remove();\n\n        lis = list.children( \"li\" );\n\n        for ( i = 0; i < lis.length ; i++ ) {\n            li = lis[ i ];\n            dividerText = this.options.autodividersSelector( $( li ) );\n\n            if ( dividerText && lastDividerText !== dividerText ) {\n                divider = document.createElement( \"li\" );\n                divider.appendChild( document.createTextNode( dividerText ) );\n                divider.setAttribute( \"data-\" + $.mobile.ns + \"role\", \"list-divider\" );\n                li.parentNode.insertBefore( divider, li );\n            }\n\n            lastDividerText = dividerText;\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar rdivider = /(^|\\s)ui-li-divider($|\\s)/,\n    rhidden = /(^|\\s)ui-screen-hidden($|\\s)/;\n\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        hideDividers: false\n    },\n\n    _afterListviewRefresh: function() {\n        var items, idx, item, hideDivider = true;\n\n        this._superApply( arguments );\n\n        if ( this.options.hideDividers ) {\n            items = this._getChildrenByTagName( this.element[ 0 ], \"li\", \"LI\" );\n            for ( idx = items.length - 1 ; idx > -1 ; idx-- ) {\n                item = items[ idx ];\n                if ( item.className.match( rdivider ) ) {\n                    if ( hideDivider ) {\n                        item.className = item.className + \" ui-screen-hidden\";\n                    }\n                    hideDivider = true;\n                } else {\n                    if ( !item.className.match( rhidden ) ) {\n                        hideDivider = false;\n                    }\n                }\n            }\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.nojs = function( target ) {\n    $( \":jqmData(role='nojs')\", target ).addClass( \"ui-nojs\" );\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.behaviors.formReset = {\n    _handleFormReset: function() {\n        this._on( this.element.closest( \"form\" ), {\n            reset: function() {\n                this._delay( \"_reset\" );\n            }\n        });\n    }\n};\n\n})( jQuery );\n\n/*\n* \"checkboxradio\" plugin\n*/\n\n(function( $, undefined ) {\n\nvar escapeId = $.mobile.path.hashToSelector;\n\n$.widget( \"mobile.checkboxradio\", $.extend( {\n\n    initSelector: \"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))\",\n\n    options: {\n        theme: \"inherit\",\n        mini: false,\n        wrapperClass: null,\n        enhanced: false,\n        iconpos: \"left\"\n\n    },\n    _create: function() {\n        var input = this.element,\n            o = this.options,\n            inheritAttr = function( input, dataAttr ) {\n                return input.jqmData( dataAttr ) ||\n                    input.closest( \"form, fieldset\" ).jqmData( dataAttr );\n            },\n            label = this.options.enhanced ?\n                {\n                    element: this.element.siblings( \"label\" ),\n                    isParent: false\n                } :\n                this._findLabel(),\n            inputtype = input[0].type,\n            checkedClass = \"ui-\" + inputtype + \"-on\",\n            uncheckedClass = \"ui-\" + inputtype + \"-off\";\n\n        if ( inputtype !== \"checkbox\" && inputtype !== \"radio\" ) {\n            return;\n        }\n\n        if ( this.element[0].disabled ) {\n            this.options.disabled = true;\n        }\n\n        o.iconpos = inheritAttr( input, \"iconpos\" ) ||\n            label.element.attr( \"data-\" + $.mobile.ns + \"iconpos\" ) || o.iconpos,\n\n        // Establish options\n        o.mini = inheritAttr( input, \"mini\" ) || o.mini;\n\n        // Expose for other methods\n        $.extend( this, {\n            input: input,\n            label: label.element,\n            labelIsParent: label.isParent,\n            inputtype: inputtype,\n            checkedClass: checkedClass,\n            uncheckedClass: uncheckedClass\n        });\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( label.element, {\n            vmouseover: \"_handleLabelVMouseOver\",\n            vclick: \"_handleLabelVClick\"\n        });\n\n        this._on( input, {\n            vmousedown: \"_cacheVals\",\n            vclick: \"_handleInputVClick\",\n            focus: \"_handleInputFocus\",\n            blur: \"_handleInputBlur\"\n        });\n\n        this._handleFormReset();\n        this.refresh();\n    },\n\n    _findLabel: function() {\n        var parentLabel, label, isParent,\n            input = this.element,\n            labelsList = input[ 0 ].labels;\n\n        if( labelsList && labelsList.length > 0 ) {\n            label = $( labelsList[ 0 ] );\n            isParent = $.contains( label[ 0 ], input[ 0 ] );\n        } else {\n            parentLabel = input.closest( \"label\" );\n            isParent = ( parentLabel.length > 0 );\n\n            // NOTE: Windows Phone could not find the label through a selector\n            // filter works though.\n            label = isParent ? parentLabel :\n                $( this.document[ 0 ].getElementsByTagName( \"label\" ) )\n                    .filter( \"[for='\" + escapeId( input[ 0 ].id ) + \"']\" )\n                    .first();\n        }\n\n        return {\n            element: label,\n            isParent: isParent\n        };\n    },\n\n    _enhance: function() {\n        this.label.addClass( \"ui-btn ui-corner-all\");\n\n        if ( this.labelIsParent ) {\n            this.input.add( this.label ).wrapAll( this._wrapper() );\n        } else {\n            //this.element.replaceWith( this.input.add( this.label ).wrapAll( this._wrapper() ) );\n            this.element.wrap( this._wrapper() );\n            this.element.parent().prepend( this.label );\n        }\n\n        // Wrap the input + label in a div\n\n        this._setOptions({\n            \"theme\": this.options.theme,\n            \"iconpos\": this.options.iconpos,\n            \"mini\": this.options.mini\n        });\n\n    },\n\n    _wrapper: function() {\n        return $( \"<div class='\"  +\n            ( this.options.wrapperClass ? this.options.wrapperClass : \"\" ) +\n            \" ui-\" + this.inputtype +\n            ( this.options.disabled ? \" ui-state-disabled\" : \"\" ) + \"' ></div>\" );\n    },\n\n    _handleInputFocus: function() {\n        this.label.addClass( $.mobile.focusClass );\n    },\n\n    _handleInputBlur: function() {\n        this.label.removeClass( $.mobile.focusClass );\n    },\n\n    _handleInputVClick: function() {\n        // Adds checked attribute to checked input when keyboard is used\n        this.element.prop( \"checked\", this.element.is( \":checked\" ) );\n        this._getInputSet().not( this.element ).prop( \"checked\", false );\n        this._updateAll( true );\n    },\n\n    _handleLabelVMouseOver: function( event ) {\n        if ( this.label.parent().hasClass( \"ui-state-disabled\" ) ) {\n            event.stopPropagation();\n        }\n    },\n\n    _handleLabelVClick: function( event ) {\n        var input = this.element;\n\n        if ( input.is( \":disabled\" ) ) {\n            event.preventDefault();\n            return;\n        }\n\n        this._cacheVals();\n\n        input.prop( \"checked\", this.inputtype === \"radio\" && true || !input.prop( \"checked\" ) );\n\n        // trigger click handler's bound directly to the input as a substitute for\n        // how label clicks behave normally in the browsers\n        // TODO: it would be nice to let the browser's handle the clicks and pass them\n        //       through to the associate input. we can swallow that click at the parent\n        //       wrapper element level\n        input.triggerHandler( \"click\" );\n\n        // Input set for common radio buttons will contain all the radio\n        // buttons, but will not for checkboxes. clearing the checked status\n        // of other radios ensures the active button state is applied properly\n        this._getInputSet().not( input ).prop( \"checked\", false );\n\n        this._updateAll();\n        return false;\n    },\n\n    _cacheVals: function() {\n        this._getInputSet().each( function() {\n            $( this ).attr(\"data-\" + $.mobile.ns + \"cacheVal\", this.checked );\n        });\n    },\n\n    // Returns those radio buttons that are supposed to be in the same group as\n    // this radio button. In the case of a checkbox or a radio lacking a name\n    // attribute, it returns this.element.\n    _getInputSet: function() {\n        var selector, formId,\n            radio = this.element[ 0 ],\n            name = radio.name,\n            form = radio.form,\n            doc = this.element.parents().last().get( 0 ),\n\n            // A radio is always a member of its own group\n            radios = this.element;\n\n        // Only start running selectors if this is an attached radio button with a name\n        if ( name && this.inputtype === \"radio\" && doc ) {\n            selector = \"input[type='radio'][name='\" + escapeId( name ) + \"']\";\n\n            // If we're inside a form\n            if ( form ) {\n                formId = form.getAttribute( \"id\" );\n\n                // If the form has an ID, collect radios scattered throught the document which\n                // nevertheless are part of the form by way of the value of their form attribute\n                if ( formId ) {\n                    radios = $( selector + \"[form='\" + escapeId( formId ) + \"']\", doc );\n                }\n\n                // Also add to those the radios in the form itself\n                radios = $( form ).find( selector ).filter( function() {\n\n                    // Some radios inside the form may belong to some other form by virtue of\n                    // having a form attribute defined on them, so we must filter them out here\n                    return ( this.form === form );\n                }).add( radios );\n\n            // If we're outside a form\n            } else {\n\n                // Collect all those radios which are also outside of a form and match our name\n                radios = $( selector, doc ).filter( function() {\n                    return !this.form;\n                });\n            }\n        }\n        return radios;\n    },\n\n    _updateAll: function( changeTriggered ) {\n        var self = this;\n\n        this._getInputSet().each( function() {\n            var $this = $( this );\n\n            if ( ( this.checked || self.inputtype === \"checkbox\" ) && !changeTriggered ) {\n                $this.trigger( \"change\" );\n            }\n        })\n        .checkboxradio( \"refresh\" );\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    // Is the widget supposed to display an icon?\n    _hasIcon: function() {\n        var controlgroup, controlgroupWidget,\n            controlgroupConstructor = $.mobile.controlgroup;\n\n        // If the controlgroup widget is defined ...\n        if ( controlgroupConstructor ) {\n            controlgroup = this.element.closest(\n                \":mobile-controlgroup,\" +\n                controlgroupConstructor.prototype.initSelector );\n\n            // ... and the checkbox is in a controlgroup ...\n            if ( controlgroup.length > 0 ) {\n\n                // ... look for a controlgroup widget instance, and ...\n                controlgroupWidget = $.data( controlgroup[ 0 ], \"mobile-controlgroup\" );\n\n                // ... if found, decide based on the option value, ...\n                return ( ( controlgroupWidget ? controlgroupWidget.options.type :\n\n                    // ... otherwise decide based on the \"type\" data attribute.\n                    controlgroup.attr( \"data-\" + $.mobile.ns + \"type\" ) ) !== \"horizontal\" );\n            }\n        }\n\n        // Normally, the widget displays an icon.\n        return true;\n    },\n\n    refresh: function() {\n        var isChecked = this.element[ 0 ].checked,\n            active = $.mobile.activeBtnClass,\n            iconposClass = \"ui-btn-icon-\" + this.options.iconpos,\n            addClasses = [],\n            removeClasses = [];\n\n        if ( this._hasIcon() ) {\n            removeClasses.push( active );\n            addClasses.push( iconposClass );\n        } else {\n            removeClasses.push( iconposClass );\n            ( isChecked ? addClasses : removeClasses ).push( active );\n        }\n\n        if ( isChecked ) {\n            addClasses.push( this.checkedClass );\n            removeClasses.push( this.uncheckedClass );\n        } else {\n            addClasses.push( this.uncheckedClass );\n            removeClasses.push( this.checkedClass );\n        }\n\n        this.widget().toggleClass( \"ui-state-disabled\", this.element.prop( \"disabled\" ) );\n\n        this.label\n            .addClass( addClasses.join( \" \" ) )\n            .removeClass( removeClasses.join( \" \" ) );\n    },\n\n    widget: function() {\n        return this.label.parent();\n    },\n\n    _setOptions: function( options ) {\n        var label = this.label,\n            currentOptions = this.options,\n            outer = this.widget(),\n            hasIcon = this._hasIcon();\n\n        if ( options.disabled !== undefined ) {\n            this.input.prop( \"disabled\", !!options.disabled );\n            outer.toggleClass( \"ui-state-disabled\", !!options.disabled );\n        }\n        if ( options.mini !== undefined ) {\n            outer.toggleClass( \"ui-mini\", !!options.mini );\n        }\n        if ( options.theme !== undefined ) {\n            label\n                .removeClass( \"ui-btn-\" + currentOptions.theme )\n                .addClass( \"ui-btn-\" + options.theme );\n        }\n        if ( options.wrapperClass !== undefined ) {\n            outer\n                .removeClass( currentOptions.wrapperClass )\n                .addClass( options.wrapperClass );\n        }\n        if ( options.iconpos !== undefined && hasIcon ) {\n            label.removeClass( \"ui-btn-icon-\" + currentOptions.iconpos ).addClass( \"ui-btn-icon-\" + options.iconpos );\n        } else if ( !hasIcon ) {\n            label.removeClass( \"ui-btn-icon-\" + currentOptions.iconpos );\n        }\n        this._super( options );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.button\", {\n\n    initSelector: \"input[type='button'], input[type='submit'], input[type='reset']\",\n\n    options: {\n        theme: null,\n        icon: null,\n        iconpos: \"left\",\n        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */\n        corners: true,\n        shadow: true,\n        inline: null,\n        mini: null,\n        wrapperClass: null,\n        enhanced: false\n    },\n\n    _create: function() {\n\n        if ( this.element.is( \":disabled\" ) ) {\n            this.options.disabled = true;\n        }\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        $.extend( this, {\n            wrapper: this.element.parent()\n        });\n\n        this._on( {\n            focus: function() {\n                this.widget().addClass( $.mobile.focusClass );\n            },\n\n            blur: function() {\n                this.widget().removeClass( $.mobile.focusClass );\n            }\n        });\n\n        this.refresh( true );\n    },\n\n    _enhance: function() {\n        this.element.wrap( this._button() );\n    },\n\n    _button: function() {\n        var options = this.options,\n            iconClasses = this._getIconClasses( this.options );\n\n        return $(\"<div class='ui-btn ui-input-btn\" +\n            ( options.wrapperClass ? \" \" + options.wrapperClass : \"\" ) +\n            ( options.theme ? \" ui-btn-\" + options.theme : \"\" ) +\n            ( options.corners ? \" ui-corner-all\" : \"\" ) +\n            ( options.shadow ? \" ui-shadow\" : \"\" ) +\n            ( options.inline ? \" ui-btn-inline\" : \"\" ) +\n            ( options.mini ? \" ui-mini\" : \"\" ) +\n            ( options.disabled ? \" ui-state-disabled\" : \"\" ) +\n            ( iconClasses ? ( \" \" + iconClasses ) : \"\" ) +\n            \"' >\" + this.element.val() + \"</div>\" );\n    },\n\n    widget: function() {\n        return this.wrapper;\n    },\n\n    _destroy: function() {\n            this.element.insertBefore( this.wrapper );\n            this.wrapper.remove();\n    },\n\n    _getIconClasses: function( options ) {\n        return ( options.icon ? ( \"ui-icon-\" + options.icon +\n            ( options.iconshadow ? \" ui-shadow-icon\" : \"\" ) + /* TODO: Deprecated in 1.4, remove in 1.5. */\n            \" ui-btn-icon-\" + options.iconpos ) : \"\" );\n    },\n\n    _setOptions: function( options ) {\n        var outer = this.widget();\n\n        if ( options.theme !== undefined ) {\n            outer\n                .removeClass( this.options.theme )\n                .addClass( \"ui-btn-\" + options.theme );\n        }\n        if ( options.corners !== undefined ) {\n            outer.toggleClass( \"ui-corner-all\", options.corners );\n        }\n        if ( options.shadow !== undefined ) {\n            outer.toggleClass( \"ui-shadow\", options.shadow );\n        }\n        if ( options.inline !== undefined ) {\n            outer.toggleClass( \"ui-btn-inline\", options.inline );\n        }\n        if ( options.mini !== undefined ) {\n            outer.toggleClass( \"ui-mini\", options.mini );\n        }\n        if ( options.disabled !== undefined ) {\n            this.element.prop( \"disabled\", options.disabled );\n            outer.toggleClass( \"ui-state-disabled\", options.disabled );\n        }\n\n        if ( options.icon !== undefined ||\n                options.iconshadow !== undefined || /* TODO: Deprecated in 1.4, remove in 1.5. */\n                options.iconpos !== undefined ) {\n            outer\n                .removeClass( this._getIconClasses( this.options ) )\n                .addClass( this._getIconClasses(\n                    $.extend( {}, this.options, options ) ) );\n        }\n\n        this._super( options );\n    },\n\n    refresh: function( create ) {\n        var originalElement,\n            isDisabled = this.element.prop( \"disabled\" );\n\n        if ( this.options.icon && this.options.iconpos === \"notext\" && this.element.attr( \"title\" ) ) {\n            this.element.attr( \"title\", this.element.val() );\n        }\n        if ( !create ) {\n            originalElement = this.element.detach();\n            $( this.wrapper ).text( this.element.val() ).append( originalElement );\n        }\n        if ( this.options.disabled !== isDisabled ) {\n            this._setOptions({ disabled: isDisabled });\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $ ) {\n    var    meta = $( \"meta[name=viewport]\" ),\n        initialContent = meta.attr( \"content\" ),\n        disabledZoom = initialContent + \",maximum-scale=1, user-scalable=no\",\n        enabledZoom = initialContent + \",maximum-scale=10, user-scalable=yes\",\n        disabledInitially = /(user-scalable[\\s]*=[\\s]*no)|(maximum-scale[\\s]*=[\\s]*1)[$,\\s]/.test( initialContent );\n\n    $.mobile.zoom = $.extend( {}, {\n        enabled: !disabledInitially,\n        locked: false,\n        disable: function( lock ) {\n            if ( !disabledInitially && !$.mobile.zoom.locked ) {\n                meta.attr( \"content\", disabledZoom );\n                $.mobile.zoom.enabled = false;\n                $.mobile.zoom.locked = lock || false;\n            }\n        },\n        enable: function( unlock ) {\n            if ( !disabledInitially && ( !$.mobile.zoom.locked || unlock === true ) ) {\n                meta.attr( \"content\", enabledZoom );\n                $.mobile.zoom.enabled = true;\n                $.mobile.zoom.locked = false;\n            }\n        },\n        restore: function() {\n            if ( !disabledInitially ) {\n                meta.attr( \"content\", initialContent );\n                $.mobile.zoom.enabled = true;\n            }\n        }\n    });\n\n}( jQuery ));\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.textinput\", {\n    initSelector: \"input[type='text'],\" +\n        \"input[type='search'],\" +\n        \":jqmData(type='search'),\" +\n        \"input[type='number'],\" +\n        \":jqmData(type='number'),\" +\n        \"input[type='password'],\" +\n        \"input[type='email'],\" +\n        \"input[type='url'],\" +\n        \"input[type='tel'],\" +\n        \"textarea,\" +\n        \"input[type='time'],\" +\n        \"input[type='date'],\" +\n        \"input[type='month'],\" +\n        \"input[type='week'],\" +\n        \"input[type='datetime'],\" +\n        \"input[type='datetime-local'],\" +\n        \"input[type='color'],\" +\n        \"input:not([type]),\" +\n        \"input[type='file']\",\n\n    options: {\n        theme: null,\n        corners: true,\n        mini: false,\n        // This option defaults to true on iOS devices.\n        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( \"AppleWebKit\" ) > -1,\n        wrapperClass: \"\",\n        enhanced: false\n    },\n\n    _create: function() {\n\n        var options = this.options,\n            isSearch = this.element.is( \"[type='search'], :jqmData(type='search')\" ),\n            isTextarea = this.element[ 0 ].tagName === \"TEXTAREA\",\n            isRange = this.element.is( \"[data-\" + ( $.mobile.ns || \"\" ) + \"type='range']\" ),\n            inputNeedsWrap = ( (this.element.is( \"input\" ) ||\n                this.element.is( \"[data-\" + ( $.mobile.ns || \"\" ) + \"type='search']\" ) ) &&\n                    !isRange );\n\n        if ( this.element.prop( \"disabled\" ) ) {\n            options.disabled = true;\n        }\n\n        $.extend( this, {\n            classes: this._classesFromOptions(),\n            isSearch: isSearch,\n            isTextarea: isTextarea,\n            isRange: isRange,\n            inputNeedsWrap: inputNeedsWrap\n        });\n\n        this._autoCorrect();\n\n        if ( !options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( {\n            \"focus\": \"_handleFocus\",\n            \"blur\": \"_handleBlur\"\n        });\n\n    },\n\n    refresh: function() {\n        this.setOptions({\n            \"disabled\" : this.element.is( \":disabled\" )\n        });\n    },\n\n    _enhance: function() {\n        var elementClasses = [];\n\n        if ( this.isTextarea ) {\n            elementClasses.push( \"ui-input-text\" );\n        }\n\n        if ( this.isTextarea || this.isRange ) {\n            elementClasses.push( \"ui-shadow-inset\" );\n        }\n\n        //\"search\" and \"text\" input widgets\n        if ( this.inputNeedsWrap ) {\n            this.element.wrap( this._wrap() );\n        } else {\n            elementClasses = elementClasses.concat( this.classes );\n        }\n\n        this.element.addClass( elementClasses.join( \" \" ) );\n    },\n\n    widget: function() {\n        return ( this.inputNeedsWrap ) ? this.element.parent() : this.element;\n    },\n\n    _classesFromOptions: function() {\n        var options = this.options,\n            classes = [];\n\n        classes.push( \"ui-body-\" + ( ( options.theme === null ) ? \"inherit\" : options.theme ) );\n        if ( options.corners ) {\n            classes.push( \"ui-corner-all\" );\n        }\n        if ( options.mini ) {\n            classes.push( \"ui-mini\" );\n        }\n        if ( options.disabled ) {\n            classes.push( \"ui-state-disabled\" );\n        }\n        if ( options.wrapperClass ) {\n            classes.push( options.wrapperClass );\n        }\n\n        return classes;\n    },\n\n    _wrap: function() {\n        return $( \"<div class='\" +\n            ( this.isSearch ? \"ui-input-search \" : \"ui-input-text \" ) +\n            this.classes.join( \" \" ) + \" \" +\n            \"ui-shadow-inset'></div>\" );\n    },\n\n    _autoCorrect: function() {\n        // XXX: Temporary workaround for issue 785 (Apple bug 8910589).\n        //      Turn off autocorrect and autocomplete on non-iOS 5 devices\n        //      since the popup they use can't be dismissed by the user. Note\n        //      that we test for the presence of the feature by looking for\n        //      the autocorrect property on the input element. We currently\n        //      have no test for iOS 5 or newer so we're temporarily using\n        //      the touchOverflow support flag for jQM 1.0. Yes, I feel dirty.\n        //      - jblas\n        if ( typeof this.element[0].autocorrect !== \"undefined\" &&\n            !$.support.touchOverflow ) {\n\n            // Set the attribute instead of the property just in case there\n            // is code that attempts to make modifications via HTML.\n            this.element[0].setAttribute( \"autocorrect\", \"off\" );\n            this.element[0].setAttribute( \"autocomplete\", \"off\" );\n        }\n    },\n\n    _handleBlur: function() {\n        this.widget().removeClass( $.mobile.focusClass );\n        if ( this.options.preventFocusZoom ) {\n            $.mobile.zoom.enable( true );\n        }\n    },\n\n    _handleFocus: function() {\n        // In many situations, iOS will zoom into the input upon tap, this\n        // prevents that from happening\n        if ( this.options.preventFocusZoom ) {\n            $.mobile.zoom.disable( true );\n        }\n        this.widget().addClass( $.mobile.focusClass );\n    },\n\n    _setOptions: function ( options ) {\n        var outer = this.widget();\n\n        this._super( options );\n\n        if ( !( options.disabled === undefined &&\n            options.mini === undefined &&\n            options.corners === undefined &&\n            options.theme === undefined &&\n            options.wrapperClass === undefined ) ) {\n\n            outer.removeClass( this.classes.join( \" \" ) );\n            this.classes = this._classesFromOptions();\n            outer.addClass( this.classes.join( \" \" ) );\n        }\n\n        if ( options.disabled !== undefined ) {\n            this.element.prop( \"disabled\", !!options.disabled );\n        }\n    },\n\n    _destroy: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n        if ( this.inputNeedsWrap ) {\n            this.element.unwrap();\n        }\n        this.element.removeClass( \"ui-input-text \" + this.classes.join( \" \" ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.slider\", $.extend( {\n    initSelector: \"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')\",\n\n    widgetEventPrefix: \"slide\",\n\n    options: {\n        theme: null,\n        trackTheme: null,\n        corners: true,\n        mini: false,\n        highlight: false\n    },\n\n    _create: function() {\n\n        // TODO: Each of these should have comments explain what they're for\n        var self = this,\n            control = this.element,\n            trackTheme = this.options.trackTheme || $.mobile.getAttribute( control[ 0 ], \"theme\" ),\n            trackThemeClass = trackTheme ? \" ui-bar-\" + trackTheme : \" ui-bar-inherit\",\n            cornerClass = ( this.options.corners || control.jqmData( \"corners\" ) ) ? \" ui-corner-all\" : \"\",\n            miniClass = ( this.options.mini || control.jqmData( \"mini\" ) ) ? \" ui-mini\" : \"\",\n            cType = control[ 0 ].nodeName.toLowerCase(),\n            isToggleSwitch = ( cType === \"select\" ),\n            isRangeslider = control.parent().is( \":jqmData(role='rangeslider')\" ),\n            selectClass = ( isToggleSwitch ) ? \"ui-slider-switch\" : \"\",\n            controlID = control.attr( \"id\" ),\n            $label = $( \"[for='\" + controlID + \"']\" ),\n            labelID = $label.attr( \"id\" ) || controlID + \"-label\",\n            min = !isToggleSwitch ? parseFloat( control.attr( \"min\" ) ) : 0,\n            max =  !isToggleSwitch ? parseFloat( control.attr( \"max\" ) ) : control.find( \"option\" ).length-1,\n            step = window.parseFloat( control.attr( \"step\" ) || 1 ),\n            domHandle = document.createElement( \"a\" ),\n            handle = $( domHandle ),\n            domSlider = document.createElement( \"div\" ),\n            slider = $( domSlider ),\n            valuebg = this.options.highlight && !isToggleSwitch ? (function() {\n                var bg = document.createElement( \"div\" );\n                bg.className = \"ui-slider-bg \" + $.mobile.activeBtnClass;\n                return $( bg ).prependTo( slider );\n            })() : false,\n            options,\n            wrapper,\n            j, length,\n            i, optionsCount, origTabIndex,\n            side, activeClass, sliderImg;\n\n        $label.attr( \"id\", labelID );\n        this.isToggleSwitch = isToggleSwitch;\n\n        domHandle.setAttribute( \"href\", \"#\" );\n        domSlider.setAttribute( \"role\", \"application\" );\n        domSlider.className = [ this.isToggleSwitch ? \"ui-slider ui-slider-track ui-shadow-inset \" : \"ui-slider-track ui-shadow-inset \", selectClass, trackThemeClass, cornerClass, miniClass ].join( \"\" );\n        domHandle.className = \"ui-slider-handle\";\n        domSlider.appendChild( domHandle );\n\n        handle.attr({\n            \"role\": \"slider\",\n            \"aria-valuemin\": min,\n            \"aria-valuemax\": max,\n            \"aria-valuenow\": this._value(),\n            \"aria-valuetext\": this._value(),\n            \"title\": this._value(),\n            \"aria-labelledby\": labelID\n        });\n\n        $.extend( this, {\n            slider: slider,\n            handle: handle,\n            control: control,\n            type: cType,\n            step: step,\n            max: max,\n            min: min,\n            valuebg: valuebg,\n            isRangeslider: isRangeslider,\n            dragging: false,\n            beforeStart: null,\n            userModified: false,\n            mouseMoved: false\n        });\n\n        if ( isToggleSwitch ) {\n            // TODO: restore original tabindex (if any) in a destroy method\n            origTabIndex = control.attr( \"tabindex\" );\n            if ( origTabIndex ) {\n                handle.attr( \"tabindex\", origTabIndex );\n            }\n            control.attr( \"tabindex\", \"-1\" ).focus(function() {\n                $( this ).blur();\n                handle.focus();\n            });\n\n            wrapper = document.createElement( \"div\" );\n            wrapper.className = \"ui-slider-inneroffset\";\n\n            for ( j = 0, length = domSlider.childNodes.length; j < length; j++ ) {\n                wrapper.appendChild( domSlider.childNodes[j] );\n            }\n\n            domSlider.appendChild( wrapper );\n\n            // slider.wrapInner( \"<div class='ui-slider-inneroffset'></div>\" );\n\n            // make the handle move with a smooth transition\n            handle.addClass( \"ui-slider-handle-snapping\" );\n\n            options = control.find( \"option\" );\n\n            for ( i = 0, optionsCount = options.length; i < optionsCount; i++ ) {\n                side = !i ? \"b\" : \"a\";\n                activeClass = !i ? \"\" : \" \" + $.mobile.activeBtnClass;\n                sliderImg = document.createElement( \"span\" );\n\n                sliderImg.className = [ \"ui-slider-label ui-slider-label-\", side, activeClass ].join( \"\" );\n                sliderImg.setAttribute( \"role\", \"img\" );\n                sliderImg.appendChild( document.createTextNode( options[i].innerHTML ) );\n                $( sliderImg ).prependTo( slider );\n            }\n\n            self._labels = $( \".ui-slider-label\", slider );\n\n        }\n\n        // monitor the input for updated values\n        control.addClass( isToggleSwitch ? \"ui-slider-switch\" : \"ui-slider-input\" );\n\n        this._on( control, {\n            \"change\": \"_controlChange\",\n            \"keyup\": \"_controlKeyup\",\n            \"blur\": \"_controlBlur\",\n            \"vmouseup\": \"_controlVMouseUp\"\n        });\n\n        slider.bind( \"vmousedown\", $.proxy( this._sliderVMouseDown, this ) )\n            .bind( \"vclick\", false );\n\n        // We have to instantiate a new function object for the unbind to work properly\n        // since the method itself is defined in the prototype (causing it to unbind everything)\n        this._on( document, { \"vmousemove\": \"_preventDocumentDrag\" });\n        this._on( slider.add( document ), { \"vmouseup\": \"_sliderVMouseUp\" });\n\n        slider.insertAfter( control );\n\n        // wrap in a div for styling purposes\n        if ( !isToggleSwitch && !isRangeslider ) {\n            wrapper = this.options.mini ? \"<div class='ui-slider ui-mini'>\" : \"<div class='ui-slider'>\";\n\n            control.add( slider ).wrapAll( wrapper );\n        }\n\n        // bind the handle event callbacks and set the context to the widget instance\n        this._on( this.handle, {\n            \"vmousedown\": \"_handleVMouseDown\",\n            \"keydown\": \"_handleKeydown\",\n            \"keyup\": \"_handleKeyup\"\n        });\n\n        this.handle.bind( \"vclick\", false );\n\n        this._handleFormReset();\n\n        this.refresh( undefined, undefined, true );\n    },\n\n    _setOptions: function( options ) {\n        if ( options.theme !== undefined ) {\n            this._setTheme( options.theme );\n        }\n\n        if ( options.trackTheme !== undefined ) {\n            this._setTrackTheme( options.trackTheme );\n        }\n\n        if ( options.corners !== undefined ) {\n            this._setCorners( options.corners );\n        }\n\n        if ( options.mini !== undefined ) {\n            this._setMini( options.mini );\n        }\n\n        if ( options.highlight !== undefined ) {\n            this._setHighlight( options.highlight );\n        }\n\n        if ( options.disabled !== undefined ) {\n            this._setDisabled( options.disabled );\n        }\n        this._super( options );\n    },\n\n    _controlChange: function( event ) {\n        // if the user dragged the handle, the \"change\" event was triggered from inside refresh(); don't call refresh() again\n        if ( this._trigger( \"controlchange\", event ) === false ) {\n            return false;\n        }\n        if ( !this.mouseMoved ) {\n            this.refresh( this._value(), true );\n        }\n    },\n\n    _controlKeyup: function(/* event */) { // necessary?\n        this.refresh( this._value(), true, true );\n    },\n\n    _controlBlur: function(/* event */) {\n        this.refresh( this._value(), true );\n    },\n\n    // it appears the clicking the up and down buttons in chrome on\n    // range/number inputs doesn't trigger a change until the field is\n    // blurred. Here we check thif the value has changed and refresh\n    _controlVMouseUp: function(/* event */) {\n        this._checkedRefresh();\n    },\n\n    // NOTE force focus on handle\n    _handleVMouseDown: function(/* event */) {\n        this.handle.focus();\n    },\n\n    _handleKeydown: function( event ) {\n        var index = this._value();\n        if ( this.options.disabled ) {\n            return;\n        }\n\n        // In all cases prevent the default and mark the handle as active\n        switch ( event.keyCode ) {\n            case $.mobile.keyCode.HOME:\n            case $.mobile.keyCode.END:\n            case $.mobile.keyCode.PAGE_UP:\n            case $.mobile.keyCode.PAGE_DOWN:\n            case $.mobile.keyCode.UP:\n            case $.mobile.keyCode.RIGHT:\n            case $.mobile.keyCode.DOWN:\n            case $.mobile.keyCode.LEFT:\n                event.preventDefault();\n\n                if ( !this._keySliding ) {\n                    this._keySliding = true;\n                    this.handle.addClass( \"ui-state-active\" ); /* TODO: We don't use this class for styling. Do we need to add it? */\n                }\n\n                break;\n        }\n\n        // move the slider according to the keypress\n        switch ( event.keyCode ) {\n            case $.mobile.keyCode.HOME:\n                this.refresh( this.min );\n                break;\n            case $.mobile.keyCode.END:\n                this.refresh( this.max );\n                break;\n            case $.mobile.keyCode.PAGE_UP:\n            case $.mobile.keyCode.UP:\n            case $.mobile.keyCode.RIGHT:\n                this.refresh( index + this.step );\n                break;\n            case $.mobile.keyCode.PAGE_DOWN:\n            case $.mobile.keyCode.DOWN:\n            case $.mobile.keyCode.LEFT:\n                this.refresh( index - this.step );\n                break;\n        }\n    }, // remove active mark\n\n    _handleKeyup: function(/* event */) {\n        if ( this._keySliding ) {\n            this._keySliding = false;\n            this.handle.removeClass( \"ui-state-active\" ); /* See comment above. */\n        }\n    },\n\n    _sliderVMouseDown: function( event ) {\n        // NOTE: we don't do this in refresh because we still want to\n        //       support programmatic alteration of disabled inputs\n        if ( this.options.disabled || !( event.which === 1 || event.which === 0 || event.which === undefined ) ) {\n            return false;\n        }\n        if ( this._trigger( \"beforestart\", event ) === false ) {\n            return false;\n        }\n        this.dragging = true;\n        this.userModified = false;\n        this.mouseMoved = false;\n\n        if ( this.isToggleSwitch ) {\n            this.beforeStart = this.element[0].selectedIndex;\n        }\n\n        this.refresh( event );\n        this._trigger( \"start\" );\n        return false;\n    },\n\n    _sliderVMouseUp: function() {\n        if ( this.dragging ) {\n            this.dragging = false;\n\n            if ( this.isToggleSwitch ) {\n                // make the handle move with a smooth transition\n                this.handle.addClass( \"ui-slider-handle-snapping\" );\n\n                if ( this.mouseMoved ) {\n                    // this is a drag, change the value only if user dragged enough\n                    if ( this.userModified ) {\n                        this.refresh( this.beforeStart === 0 ? 1 : 0 );\n                    } else {\n                        this.refresh( this.beforeStart );\n                    }\n                } else {\n                    // this is just a click, change the value\n                    this.refresh( this.beforeStart === 0 ? 1 : 0 );\n                }\n            }\n\n            this.mouseMoved = false;\n            this._trigger( \"stop\" );\n            return false;\n        }\n    },\n\n    _preventDocumentDrag: function( event ) {\n            // NOTE: we don't do this in refresh because we still want to\n            //       support programmatic alteration of disabled inputs\n            if ( this._trigger( \"drag\", event ) === false) {\n                return false;\n            }\n            if ( this.dragging && !this.options.disabled ) {\n\n                // this.mouseMoved must be updated before refresh() because it will be used in the control \"change\" event\n                this.mouseMoved = true;\n\n                if ( this.isToggleSwitch ) {\n                    // make the handle move in sync with the mouse\n                    this.handle.removeClass( \"ui-slider-handle-snapping\" );\n                }\n\n                this.refresh( event );\n\n                // only after refresh() you can calculate this.userModified\n                this.userModified = this.beforeStart !== this.element[0].selectedIndex;\n                return false;\n            }\n        },\n\n    _checkedRefresh: function() {\n        if ( this.value !== this._value() ) {\n            this.refresh( this._value() );\n        }\n    },\n\n    _value: function() {\n        return  this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat( this.element.val() ) ;\n    },\n\n    _reset: function() {\n        this.refresh( undefined, false, true );\n    },\n\n    refresh: function( val, isfromControl, preventInputUpdate ) {\n        // NOTE: we don't return here because we want to support programmatic\n        //       alteration of the input value, which should still update the slider\n\n        var self = this,\n            parentTheme = $.mobile.getAttribute( this.element[ 0 ], \"theme\" ),\n            theme = this.options.theme || parentTheme,\n            themeClass =  theme ? \" ui-btn-\" + theme : \"\",\n            trackTheme = this.options.trackTheme || parentTheme,\n            trackThemeClass = trackTheme ? \" ui-bar-\" + trackTheme : \" ui-bar-inherit\",\n            cornerClass = this.options.corners ? \" ui-corner-all\" : \"\",\n            miniClass = this.options.mini ? \" ui-mini\" : \"\",\n            left, width, data, tol,\n            pxStep, percent,\n            control, isInput, optionElements, min, max, step,\n            newval, valModStep, alignValue, percentPerStep,\n            handlePercent, aPercent, bPercent,\n            valueChanged;\n\n        self.slider[0].className = [ this.isToggleSwitch ? \"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset\" : \"ui-slider-track ui-shadow-inset\", trackThemeClass, cornerClass, miniClass ].join( \"\" );\n        if ( this.options.disabled || this.element.prop( \"disabled\" ) ) {\n            this.disable();\n        }\n\n        // set the stored value for comparison later\n        this.value = this._value();\n        if ( this.options.highlight && !this.isToggleSwitch && this.slider.find( \".ui-slider-bg\" ).length === 0 ) {\n            this.valuebg = (function() {\n                var bg = document.createElement( \"div\" );\n                bg.className = \"ui-slider-bg \" + $.mobile.activeBtnClass;\n                return $( bg ).prependTo( self.slider );\n            })();\n        }\n        this.handle.addClass( \"ui-btn\" + themeClass + \" ui-shadow\" );\n\n        control = this.element;\n        isInput = !this.isToggleSwitch;\n        optionElements = isInput ? [] : control.find( \"option\" );\n        min =  isInput ? parseFloat( control.attr( \"min\" ) ) : 0;\n        max = isInput ? parseFloat( control.attr( \"max\" ) ) : optionElements.length - 1;\n        step = ( isInput && parseFloat( control.attr( \"step\" ) ) > 0 ) ? parseFloat( control.attr( \"step\" ) ) : 1;\n\n        if ( typeof val === \"object\" ) {\n            data = val;\n            // a slight tolerance helped get to the ends of the slider\n            tol = 8;\n\n            left = this.slider.offset().left;\n            width = this.slider.width();\n            pxStep = width/((max-min)/step);\n            if ( !this.dragging ||\n                    data.pageX < left - tol ||\n                    data.pageX > left + width + tol ) {\n                return;\n            }\n            if ( pxStep > 1 ) {\n                percent = ( ( data.pageX - left ) / width ) * 100;\n            } else {\n                percent = Math.round( ( ( data.pageX - left ) / width ) * 100 );\n            }\n        } else {\n            if ( val == null ) {\n                val = isInput ? parseFloat( control.val() || 0 ) : control[0].selectedIndex;\n            }\n            percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;\n        }\n\n        if ( isNaN( percent ) ) {\n            return;\n        }\n\n        newval = ( percent / 100 ) * ( max - min ) + min;\n\n        //from jQuery UI slider, the following source will round to the nearest step\n        valModStep = ( newval - min ) % step;\n        alignValue = newval - valModStep;\n\n        if ( Math.abs( valModStep ) * 2 >= step ) {\n            alignValue += ( valModStep > 0 ) ? step : ( -step );\n        }\n\n        percentPerStep = 100/((max-min)/step);\n        // Since JavaScript has problems with large floats, round\n        // the final value to 5 digits after the decimal point (see jQueryUI: #4124)\n        newval = parseFloat( alignValue.toFixed(5) );\n\n        if ( typeof pxStep === \"undefined\" ) {\n            pxStep = width / ( (max-min) / step );\n        }\n        if ( pxStep > 1 && isInput ) {\n            percent = ( newval - min ) * percentPerStep * ( 1 / step );\n        }\n        if ( percent < 0 ) {\n            percent = 0;\n        }\n\n        if ( percent > 100 ) {\n            percent = 100;\n        }\n\n        if ( newval < min ) {\n            newval = min;\n        }\n\n        if ( newval > max ) {\n            newval = max;\n        }\n\n        this.handle.css( \"left\", percent + \"%\" );\n\n        this.handle[0].setAttribute( \"aria-valuenow\", isInput ? newval : optionElements.eq( newval ).attr( \"value\" ) );\n\n        this.handle[0].setAttribute( \"aria-valuetext\", isInput ? newval : optionElements.eq( newval ).getEncodedText() );\n\n        this.handle[0].setAttribute( \"title\", isInput ? newval : optionElements.eq( newval ).getEncodedText() );\n\n        if ( this.valuebg ) {\n            this.valuebg.css( \"width\", percent + \"%\" );\n        }\n\n        // drag the label widths\n        if ( this._labels ) {\n            handlePercent = this.handle.width() / this.slider.width() * 100;\n            aPercent = percent && handlePercent + ( 100 - handlePercent ) * percent / 100;\n            bPercent = percent === 100 ? 0 : Math.min( handlePercent + 100 - aPercent, 100 );\n\n            this._labels.each(function() {\n                var ab = $( this ).hasClass( \"ui-slider-label-a\" );\n                $( this ).width( ( ab ? aPercent : bPercent  ) + \"%\" );\n            });\n        }\n\n        if ( !preventInputUpdate ) {\n            valueChanged = false;\n\n            // update control\"s value\n            if ( isInput ) {\n                valueChanged = parseFloat( control.val() ) !== newval;\n                control.val( newval );\n            } else {\n                valueChanged = control[ 0 ].selectedIndex !== newval;\n                control[ 0 ].selectedIndex = newval;\n            }\n            if ( this._trigger( \"beforechange\", val ) === false) {\n                    return false;\n            }\n            if ( !isfromControl && valueChanged ) {\n                control.trigger( \"change\" );\n            }\n        }\n    },\n\n    _setHighlight: function( value ) {\n        value = !!value;\n        if ( value ) {\n            this.options.highlight = !!value;\n            this.refresh();\n        } else if ( this.valuebg ) {\n            this.valuebg.remove();\n            this.valuebg = false;\n        }\n    },\n\n    _setTheme: function( value ) {\n        this.handle\n            .removeClass( \"ui-btn-\" + this.options.theme )\n            .addClass( \"ui-btn-\" + value );\n\n        var currentTheme = this.options.theme ? this.options.theme : \"inherit\",\n            newTheme = value ? value : \"inherit\";\n\n        this.control\n            .removeClass( \"ui-body-\" + currentTheme )\n            .addClass( \"ui-body-\" + newTheme );\n    },\n\n    _setTrackTheme: function( value ) {\n        var currentTrackTheme = this.options.trackTheme ? this.options.trackTheme : \"inherit\",\n            newTrackTheme = value ? value : \"inherit\";\n\n        this.slider\n            .removeClass( \"ui-body-\" + currentTrackTheme )\n            .addClass( \"ui-body-\" + newTrackTheme );\n    },\n\n    _setMini: function( value ) {\n        value = !!value;\n        if ( !this.isToggleSwitch && !this.isRangeslider ) {\n            this.slider.parent().toggleClass( \"ui-mini\", value );\n            this.element.toggleClass( \"ui-mini\", value );\n        }\n        this.slider.toggleClass( \"ui-mini\", value );\n    },\n\n    _setCorners: function( value ) {\n        this.slider.toggleClass( \"ui-corner-all\", value );\n\n        if ( !this.isToggleSwitch ) {\n            this.control.toggleClass( \"ui-corner-all\", value );\n        }\n    },\n\n    _setDisabled: function( value ) {\n        value = !!value;\n        this.element.prop( \"disabled\", value );\n        this.slider\n            .toggleClass( \"ui-state-disabled\", value )\n            .attr( \"aria-disabled\", value );\n\n        this.element.toggleClass( \"ui-state-disabled\", value );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar popup;\n\nfunction getPopup() {\n    if ( !popup ) {\n        popup = $( \"<div></div>\", {\n            \"class\": \"ui-slider-popup ui-shadow ui-corner-all\"\n        });\n    }\n    return popup.clone();\n}\n\n$.widget( \"mobile.slider\", $.mobile.slider, {\n    options: {\n        popupEnabled: false,\n        showValue: false\n    },\n\n    _create: function() {\n        this._super();\n\n        $.extend( this, {\n            _currentValue: null,\n            _popup: null,\n            _popupVisible: false\n        });\n\n        this._setOption( \"popupEnabled\", this.options.popupEnabled );\n\n        this._on( this.handle, { \"vmousedown\" : \"_showPopup\" } );\n        this._on( this.slider.add( this.document ), { \"vmouseup\" : \"_hidePopup\" } );\n        this._refresh();\n    },\n\n    // position the popup centered 5px above the handle\n    _positionPopup: function() {\n        var dstOffset = this.handle.offset();\n\n        this._popup.offset( {\n            left: dstOffset.left + ( this.handle.width() - this._popup.width() ) / 2,\n            top: dstOffset.top - this._popup.outerHeight() - 5\n        });\n    },\n\n    _setOption: function( key, value ) {\n        this._super( key, value );\n\n        if ( key === \"showValue\" ) {\n            this.handle.html( value && !this.options.mini ? this._value() : \"\" );\n        } else if ( key === \"popupEnabled\" ) {\n            if ( value && !this._popup ) {\n                this._popup = getPopup()\n                    .addClass( \"ui-body-\" + ( this.options.theme || \"a\" ) )\n                    .hide()\n                    .insertBefore( this.element );\n            }\n        }\n    },\n\n    // show value on the handle and in popup\n    refresh: function() {\n        this._super.apply( this, arguments );\n        this._refresh();\n    },\n\n    _refresh: function() {\n        var o = this.options, newValue;\n\n        if ( o.popupEnabled ) {\n            // remove the title attribute from the handle (which is\n            // responsible for the annoying tooltip); NB we have\n            // to do it here as the jqm slider sets it every time\n            // the slider's value changes :(\n            this.handle.removeAttr( \"title\" );\n        }\n\n        newValue = this._value();\n        if ( newValue === this._currentValue ) {\n            return;\n        }\n        this._currentValue = newValue;\n\n        if ( o.popupEnabled && this._popup ) {\n            this._positionPopup();\n            this._popup.html( newValue );\n        }\n\n        if ( o.showValue && !this.options.mini ) {\n            this.handle.html( newValue );\n        }\n    },\n\n    _showPopup: function() {\n        if ( this.options.popupEnabled && !this._popupVisible ) {\n            this.handle.html( \"\" );\n            this._popup.show();\n            this._positionPopup();\n            this._popupVisible = true;\n        }\n    },\n\n    _hidePopup: function() {\n        var o = this.options;\n\n        if ( o.popupEnabled && this._popupVisible ) {\n            if ( o.showValue && !o.mini ) {\n                this.handle.html( this._value() );\n            }\n            this._popup.hide();\n            this._popupVisible = false;\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.flipswitch\", $.extend({\n\n    options: {\n        onText: \"On\",\n        offText: \"Off\",\n        theme: null,\n        enhanced: false,\n        wrapperClass: null,\n        corners: true,\n        mini: false\n    },\n\n    _create: function() {\n            if ( !this.options.enhanced ) {\n                this._enhance();\n            } else {\n                $.extend( this, {\n                    flipswitch: this.element.parent(),\n                    on: this.element.find( \".ui-flipswitch-on\" ).eq( 0 ),\n                    off: this.element.find( \".ui-flipswitch-off\" ).eq(0),\n                    type: this.element.get( 0 ).tagName\n                });\n            }\n\n            this._handleFormReset();\n\n            // Transfer tabindex to \"on\" element and make input unfocusable\n            this._originalTabIndex = this.element.attr( \"tabindex\" );\n            if ( this._originalTabIndex != null ) {\n                this.on.attr( \"tabindex\", this._originalTabIndex );\n            }\n            this.element.attr( \"tabindex\", \"-1\" );\n            this._on({\n                \"focus\" : \"_handleInputFocus\"\n            });\n\n            if ( this.element.is( \":disabled\" ) ) {\n                this._setOptions({\n                    \"disabled\": true\n                });\n            }\n\n            this._on( this.flipswitch, {\n                \"click\": \"_toggle\",\n                \"swipeleft\": \"_left\",\n                \"swiperight\": \"_right\"\n            });\n\n            this._on( this.on, {\n                \"keydown\": \"_keydown\"\n            });\n\n            this._on( {\n                \"change\": \"refresh\"\n            });\n    },\n\n    _handleInputFocus: function() {\n        this.on.focus();\n    },\n\n    widget: function() {\n        return this.flipswitch;\n    },\n\n    _left: function() {\n        this.flipswitch.removeClass( \"ui-flipswitch-active\" );\n        if ( this.type === \"SELECT\" ) {\n            this.element.get( 0 ).selectedIndex = 0;\n        } else {\n            this.element.prop( \"checked\", false );\n        }\n        this.element.trigger( \"change\" );\n    },\n\n    _right: function() {\n        this.flipswitch.addClass( \"ui-flipswitch-active\" );\n        if ( this.type === \"SELECT\" ) {\n            this.element.get( 0 ).selectedIndex = 1;\n        } else {\n            this.element.prop( \"checked\", true );\n        }\n        this.element.trigger( \"change\" );\n    },\n\n    _enhance: function() {\n        var flipswitch = $( \"<div>\" ),\n            options = this.options,\n            element = this.element,\n            theme = options.theme ? options.theme : \"inherit\",\n\n            // The \"on\" button is an anchor so it's focusable\n            on = $( \"<a></a>\", {\n                \"href\": \"#\"\n            }),\n            off = $( \"<span></span>\" ),\n            type = element.get( 0 ).tagName,\n            onText = ( type === \"INPUT\" ) ?\n                options.onText : element.find( \"option\" ).eq( 1 ).text(),\n            offText = ( type === \"INPUT\" ) ?\n                options.offText : element.find( \"option\" ).eq( 0 ).text();\n\n            on\n                .addClass( \"ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit\" )\n                .text( onText );\n            off\n                .addClass( \"ui-flipswitch-off\" )\n                .text( offText );\n\n            flipswitch\n                .addClass( \"ui-flipswitch ui-shadow-inset \" +\n                    \"ui-bar-\" + theme + \" \" +\n                    ( options.wrapperClass ? options.wrapperClass : \"\" ) + \" \" +\n                    ( ( element.is( \":checked\" ) ||\n                        element\n                            .find( \"option\" )\n                            .eq( 1 )\n                            .is( \":selected\" ) ) ? \"ui-flipswitch-active\" : \"\" ) +\n                    ( element.is(\":disabled\") ? \" ui-state-disabled\": \"\") +\n                    ( options.corners ? \" ui-corner-all\": \"\" ) +\n                    ( options.mini ? \" ui-mini\": \"\" ) )\n                .append( on, off );\n\n            element\n                .addClass( \"ui-flipswitch-input\" )\n                .after( flipswitch )\n                .appendTo( flipswitch );\n\n        $.extend( this, {\n            flipswitch: flipswitch,\n            on: on,\n            off: off,\n            type: type\n        });\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    refresh: function() {\n        var direction,\n            existingDirection = this.flipswitch.hasClass( \"ui-flipswitch-active\" ) ? \"_right\" : \"_left\";\n\n        if ( this.type === \"SELECT\" ) {\n            direction = ( this.element.get( 0 ).selectedIndex > 0 ) ? \"_right\": \"_left\";\n        } else {\n            direction = this.element.prop( \"checked\" ) ? \"_right\": \"_left\";\n        }\n\n        if ( direction !== existingDirection ) {\n            this[ direction ]();\n        }\n    },\n\n    _toggle: function() {\n        var direction = this.flipswitch.hasClass( \"ui-flipswitch-active\" ) ? \"_left\" : \"_right\";\n\n        this[ direction ]();\n    },\n\n    _keydown: function( e ) {\n        if ( e.which === $.mobile.keyCode.LEFT ) {\n            this._left();\n        } else if ( e.which === $.mobile.keyCode.RIGHT ) {\n            this._right();\n        } else if ( e.which === $.mobile.keyCode.SPACE ) {\n            this._toggle();\n            e.preventDefault();\n        }\n    },\n\n    _setOptions: function( options ) {\n        if ( options.theme !== undefined ) {\n            var currentTheme = options.theme ? options.theme : \"inherit\",\n                newTheme = options.theme ? options.theme : \"inherit\";\n\n            this.widget()\n                .removeClass( \"ui-bar-\" + currentTheme )\n                .addClass( \"ui-bar-\" + newTheme );\n        }\n        if ( options.onText !== undefined ) {\n            this.on.text( options.onText );\n        }\n        if ( options.offText !== undefined ) {\n            this.off.text( options.offText );\n        }\n        if ( options.disabled !== undefined ) {\n            this.widget().toggleClass( \"ui-state-disabled\", options.disabled );\n        }\n        if ( options.mini !== undefined ) {\n            this.widget().toggleClass( \"ui-mini\", options.mini );\n        }\n        if ( options.corners !== undefined ) {\n            this.widget().toggleClass( \"ui-corner-all\", options.corners );\n        }\n\n        this._super( options );\n    },\n\n    _destroy: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n        if ( this._originalTabIndex != null ) {\n            this.element.attr( \"tabindex\", this._originalTabIndex );\n        } else {\n            this.element.removeAttr( \"tabindex\" );\n        }\n        this.on.remove();\n        this.off.remove();\n        this.element.unwrap();\n        this.flipswitch.remove();\n        this.removeClass( \"ui-flipswitch-input\" );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n    $.widget( \"mobile.rangeslider\", $.extend( {\n\n        options: {\n            theme: null,\n            trackTheme: null,\n            corners: true,\n            mini: false,\n            highlight: true\n        },\n\n        _create: function() {\n            var $el = this.element,\n            elClass = this.options.mini ? \"ui-rangeslider ui-mini\" : \"ui-rangeslider\",\n            _inputFirst = $el.find( \"input\" ).first(),\n            _inputLast = $el.find( \"input\" ).last(),\n            _label = $el.find( \"label\" ).first(),\n            _sliderWidgetFirst = $.data( _inputFirst.get( 0 ), \"mobile-slider\" ) ||\n                $.data( _inputFirst.slider().get( 0 ), \"mobile-slider\" ),\n            _sliderWidgetLast = $.data( _inputLast.get(0), \"mobile-slider\" ) ||\n                $.data( _inputLast.slider().get( 0 ), \"mobile-slider\" ),\n            _sliderFirst = _sliderWidgetFirst.slider,\n            _sliderLast = _sliderWidgetLast.slider,\n            firstHandle = _sliderWidgetFirst.handle,\n            _sliders = $( \"<div class='ui-rangeslider-sliders' />\" ).appendTo( $el );\n\n            _inputFirst.addClass( \"ui-rangeslider-first\" );\n            _inputLast.addClass( \"ui-rangeslider-last\" );\n            $el.addClass( elClass );\n\n            _sliderFirst.appendTo( _sliders );\n            _sliderLast.appendTo( _sliders );\n            _label.insertBefore( $el );\n            firstHandle.prependTo( _sliderLast );\n\n            $.extend( this, {\n                _inputFirst: _inputFirst,\n                _inputLast: _inputLast,\n                _sliderFirst: _sliderFirst,\n                _sliderLast: _sliderLast,\n                _label: _label,\n                _targetVal: null,\n                _sliderTarget: false,\n                _sliders: _sliders,\n                _proxy: false\n            });\n\n            this.refresh();\n            this._on( this.element.find( \"input.ui-slider-input\" ), {\n                \"slidebeforestart\": \"_slidebeforestart\",\n                \"slidestop\": \"_slidestop\",\n                \"slidedrag\": \"_slidedrag\",\n                \"slidebeforechange\": \"_change\",\n                \"blur\": \"_change\",\n                \"keyup\": \"_change\"\n            });\n            this._on({\n                \"mousedown\":\"_change\"\n            });\n            this._on( this.element.closest( \"form\" ), {\n                \"reset\":\"_handleReset\"\n            });\n            this._on( firstHandle, {\n                \"vmousedown\": \"_dragFirstHandle\"\n            });\n        },\n        _handleReset: function() {\n            var self = this;\n            //we must wait for the stack to unwind before updateing other wise sliders will not have updated yet\n            setTimeout( function() {\n                self._updateHighlight();\n            },0);\n        },\n\n        _dragFirstHandle: function( event ) {\n            //if the first handle is dragged send the event to the first slider\n            $.data( this._inputFirst.get(0), \"mobile-slider\" ).dragging = true;\n            $.data( this._inputFirst.get(0), \"mobile-slider\" ).refresh( event );\n            $.data( this._inputFirst.get(0), \"mobile-slider\" )._trigger( \"start\" );\n            return false;\n        },\n\n        _slidedrag: function( event ) {\n            var first = $( event.target ).is( this._inputFirst ),\n                otherSlider = ( first ) ? this._inputLast : this._inputFirst;\n\n            this._sliderTarget = false;\n            //if the drag was initiated on an extreme and the other handle is focused send the events to\n            //the closest handle\n            if ( ( this._proxy === \"first\" && first ) || ( this._proxy === \"last\" && !first ) ) {\n                $.data( otherSlider.get(0), \"mobile-slider\" ).dragging = true;\n                $.data( otherSlider.get(0), \"mobile-slider\" ).refresh( event );\n                return false;\n            }\n        },\n\n        _slidestop: function( event ) {\n            var first = $( event.target ).is( this._inputFirst );\n\n            this._proxy = false;\n            //this stops dragging of the handle and brings the active track to the front\n            //this makes clicks on the track go the the last handle used\n            this.element.find( \"input\" ).trigger( \"vmouseup\" );\n            this._sliderFirst.css( \"z-index\", first ? 1 : \"\" );\n        },\n\n        _slidebeforestart: function( event ) {\n            this._sliderTarget = false;\n            //if the track is the target remember this and the original value\n            if ( $( event.originalEvent.target ).hasClass( \"ui-slider-track\" ) ) {\n                this._sliderTarget = true;\n                this._targetVal = $( event.target ).val();\n            }\n        },\n\n        _setOptions: function( options ) {\n            if ( options.theme !== undefined ) {\n                this._setTheme( options.theme );\n            }\n\n            if ( options.trackTheme !== undefined ) {\n                this._setTrackTheme( options.trackTheme );\n            }\n\n            if ( options.mini !== undefined ) {\n                this._setMini( options.mini );\n            }\n\n            if ( options.highlight !== undefined ) {\n                this._setHighlight( options.highlight );\n            }\n\n            if ( options.disabled !== undefined ) {\n                this._setDisabled( options.disabled );\n            }\n\n            this._super( options );\n            this.refresh();\n        },\n\n        refresh: function() {\n            var $el = this.element,\n                o = this.options;\n\n            if ( this._inputFirst.is( \":disabled\" ) || this._inputLast.is( \":disabled\" ) ) {\n                this.options.disabled = true;\n            }\n\n            $el.find( \"input\" ).slider({\n                theme: o.theme,\n                trackTheme: o.trackTheme,\n                disabled: o.disabled,\n                corners: o.corners,\n                mini: o.mini,\n                highlight: o.highlight\n            }).slider( \"refresh\" );\n            this._updateHighlight();\n        },\n\n        _change: function( event ) {\n            if ( event.type === \"keyup\" ) {\n                this._updateHighlight();\n                return false;\n            }\n\n            var self = this,\n                min = parseFloat( this._inputFirst.val(), 10 ),\n                max = parseFloat( this._inputLast.val(), 10 ),\n                first = $( event.target ).hasClass( \"ui-rangeslider-first\" ),\n                thisSlider = first ? this._inputFirst : this._inputLast,\n                otherSlider = first ? this._inputLast : this._inputFirst;\n\n            if ( ( this._inputFirst.val() > this._inputLast.val() && event.type === \"mousedown\" && !$(event.target).hasClass(\"ui-slider-handle\")) ) {\n                thisSlider.blur();\n            } else if ( event.type === \"mousedown\" ) {\n                return;\n            }\n            if ( min > max && !this._sliderTarget ) {\n                //this prevents min from being greater then max\n                thisSlider.val( first ? max: min ).slider( \"refresh\" );\n                this._trigger( \"normalize\" );\n            } else if ( min > max ) {\n                //this makes it so clicks on the target on either extreme go to the closest handle\n                thisSlider.val( this._targetVal ).slider( \"refresh\" );\n\n                //You must wait for the stack to unwind so first slider is updated before updating second\n                setTimeout( function() {\n                    otherSlider.val( first ? min: max ).slider( \"refresh\" );\n                    $.data( otherSlider.get(0), \"mobile-slider\" ).handle.focus();\n                    self._sliderFirst.css( \"z-index\", first ? \"\" : 1 );\n                    self._trigger( \"normalize\" );\n                }, 0 );\n                this._proxy = ( first ) ? \"first\" : \"last\";\n            }\n            //fixes issue where when both _sliders are at min they cannot be adjusted\n            if ( min === max ) {\n                $.data( thisSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", 1 );\n                $.data( otherSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", 0 );\n            } else {\n                $.data( otherSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", \"\" );\n                $.data( thisSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", \"\" );\n            }\n\n            this._updateHighlight();\n\n            if ( min >= max ) {\n                return false;\n            }\n        },\n\n        _updateHighlight: function() {\n            var min = parseInt( $.data( this._inputFirst.get(0), \"mobile-slider\" ).handle.get(0).style.left, 10 ),\n                max = parseInt( $.data( this._inputLast.get(0), \"mobile-slider\" ).handle.get(0).style.left, 10 ),\n                width = (max - min);\n\n            this.element.find( \".ui-slider-bg\" ).css({\n                \"margin-left\": min + \"%\",\n                \"width\": width + \"%\"\n            });\n        },\n\n        _setTheme: function( value ) {\n            this._inputFirst.slider( \"option\", \"theme\", value );\n            this._inputLast.slider( \"option\", \"theme\", value );\n        },\n\n        _setTrackTheme: function( value ) {\n            this._inputFirst.slider( \"option\", \"trackTheme\", value );\n            this._inputLast.slider( \"option\", \"trackTheme\", value );\n        },\n\n        _setMini: function( value ) {\n            this._inputFirst.slider( \"option\", \"mini\", value );\n            this._inputLast.slider( \"option\", \"mini\", value );\n            this.element.toggleClass( \"ui-mini\", !!value );\n        },\n\n        _setHighlight: function( value ) {\n            this._inputFirst.slider( \"option\", \"highlight\", value );\n            this._inputLast.slider( \"option\", \"highlight\", value );\n        },\n\n        _setDisabled: function( value ) {\n            this._inputFirst.prop( \"disabled\", value );\n            this._inputLast.prop( \"disabled\", value );\n        },\n\n        _destroy: function() {\n            this._label.prependTo( this.element );\n            this.element.removeClass( \"ui-rangeslider ui-mini\" );\n            this._inputFirst.after( this._sliderFirst );\n            this._inputLast.after( this._sliderLast );\n            this._sliders.remove();\n            this.element.find( \"input\" ).removeClass( \"ui-rangeslider-first ui-rangeslider-last\" ).slider( \"destroy\" );\n        }\n\n    }, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.textinput\", $.mobile.textinput, {\n        options: {\n            clearBtn: false,\n            clearBtnText: \"Clear text\"\n        },\n\n        _create: function() {\n            this._super();\n\n            if ( this.isSearch ) {\n                this.options.clearBtn = true;\n            }\n\n            if ( !!this.options.clearBtn && this.inputNeedsWrap ) {\n                this._addClearBtn();\n            }\n        },\n\n        clearButton: function() {\n            return $( \"<a href='#' tabindex='-1' aria-hidden='true' \" +\n                \"class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'>\" +\n                \"</a>\" )\n                    .attr( \"title\", this.options.clearBtnText )\n                    .text( this.options.clearBtnText );\n        },\n\n        _clearBtnClick: function( event ) {\n            this.element.val( \"\" )\n                    .focus()\n                    .trigger( \"change\" );\n\n            this._clearBtn.addClass( \"ui-input-clear-hidden\" );\n            event.preventDefault();\n        },\n\n        _addClearBtn: function() {\n\n            if ( !this.options.enhanced ) {\n                this._enhanceClear();\n            }\n\n            $.extend( this, {\n                _clearBtn: this.widget().find(\"a.ui-input-clear\")\n            });\n\n            this._bindClearEvents();\n\n            this._toggleClear();\n\n        },\n\n        _enhanceClear: function() {\n\n            this.clearButton().appendTo( this.widget() );\n            this.widget().addClass( \"ui-input-has-clear\" );\n\n        },\n\n        _bindClearEvents: function() {\n\n            this._on( this._clearBtn, {\n                \"click\": \"_clearBtnClick\"\n            });\n\n            this._on({\n                \"keyup\": \"_toggleClear\",\n                \"change\": \"_toggleClear\",\n                \"input\": \"_toggleClear\",\n                \"focus\": \"_toggleClear\",\n                \"blur\": \"_toggleClear\",\n                \"cut\": \"_toggleClear\",\n                \"paste\": \"_toggleClear\"\n\n            });\n\n        },\n\n        _unbindClear: function() {\n            this._off( this._clearBtn, \"click\");\n            this._off( this.element, \"keyup change input focus blur cut paste\" );\n        },\n\n        _setOptions: function( options ) {\n            this._super( options );\n\n            if ( options.clearBtn !== undefined &&\n                !this.element.is( \"textarea, :jqmData(type='range')\" ) ) {\n                if ( options.clearBtn ) {\n                    this._addClearBtn();\n                } else {\n                    this._destroyClear();\n                }\n            }\n\n            if ( options.clearBtnText !== undefined && this._clearBtn !== undefined ) {\n                this._clearBtn.text( options.clearBtnText )\n                    .attr(\"title\", options.clearBtnText);\n            }\n        },\n\n        _toggleClear: function() {\n            this._delay( \"_toggleClearClass\", 0 );\n        },\n\n        _toggleClearClass: function() {\n            this._clearBtn.toggleClass( \"ui-input-clear-hidden\", !this.element.val() );\n        },\n\n        _destroyClear: function() {\n            this.widget().removeClass( \"ui-input-has-clear\" );\n            this._unbindClear();\n            this._clearBtn.remove();\n        },\n\n        _destroy: function() {\n            this._super();\n            if ( this.options.clearBtn ) {\n                this._destroyClear();\n            }\n        }\n\n    });\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.textinput\", $.mobile.textinput, {\n        options: {\n            autogrow:true,\n            keyupTimeoutBuffer: 100\n        },\n\n        _create: function() {\n            this._super();\n\n            if ( this.options.autogrow && this.isTextarea ) {\n                this._autogrow();\n            }\n        },\n\n        _autogrow: function() {\n            this.element.addClass( \"ui-textinput-autogrow\" );\n\n            this._on({\n                \"keyup\": \"_timeout\",\n                \"change\": \"_timeout\",\n                \"input\": \"_timeout\",\n                \"paste\": \"_timeout\"\n            });\n\n            // Attach to the various you-have-become-visible notifications that the\n            // various framework elements emit.\n            // TODO: Remove all but the updatelayout handler once #6426 is fixed.\n            this._on( true, this.document, {\n\n                // TODO: Move to non-deprecated event\n                \"pageshow\": \"_handleShow\",\n                \"popupbeforeposition\": \"_handleShow\",\n                \"updatelayout\": \"_handleShow\",\n                \"panelopen\": \"_handleShow\"\n            });\n        },\n\n        // Synchronously fix the widget height if this widget's parents are such\n        // that they show/hide content at runtime. We still need to check whether\n        // the widget is actually visible in case it is contained inside multiple\n        // such containers. For example: panel contains collapsible contains\n        // autogrow textinput. The panel may emit \"panelopen\" indicating that its\n        // content has become visible, but the collapsible is still collapsed, so\n        // the autogrow textarea is still not visible.\n        _handleShow: function( event ) {\n            if ( $.contains( event.target, this.element[ 0 ] ) &&\n                this.element.is( \":visible\" ) ) {\n\n                if ( event.type !== \"popupbeforeposition\" ) {\n                    this.element\n                        .addClass( \"ui-textinput-autogrow-resize\" )\n                        .animationComplete(\n                            $.proxy( function() {\n                                this.element.removeClass( \"ui-textinput-autogrow-resize\" );\n                            }, this ),\n                        \"transition\" );\n                }\n                this._prepareHeightUpdate();\n            }\n        },\n\n        _unbindAutogrow: function() {\n            this.element.removeClass( \"ui-textinput-autogrow\" );\n            this._off( this.element, \"keyup change input paste\" );\n            this._off( this.document,\n                \"pageshow popupbeforeposition updatelayout panelopen\" );\n        },\n\n        keyupTimeout: null,\n\n        _prepareHeightUpdate: function( delay ) {\n            if ( this.keyupTimeout ) {\n                clearTimeout( this.keyupTimeout );\n            }\n            if ( delay === undefined ) {\n                this._updateHeight();\n            } else {\n                this.keyupTimeout = this._delay( \"_updateHeight\", delay );\n            }\n        },\n\n        _timeout: function() {\n            this._prepareHeightUpdate( this.options.keyupTimeoutBuffer );\n        },\n\n        _updateHeight: function() {\n            var paddingTop, paddingBottom, paddingHeight, scrollHeight, clientHeight,\n                borderTop, borderBottom, borderHeight, height,\n                scrollTop = this.window.scrollTop();\n            this.keyupTimeout = 0;\n\n            // IE8 textareas have the onpage property - others do not\n            if ( !( \"onpage\" in this.element[ 0 ] ) ) {\n                this.element.css({\n                    \"height\": 0,\n                    \"min-height\": 0,\n                    \"max-height\": 0\n                });\n            }\n\n            scrollHeight = this.element[ 0 ].scrollHeight;\n            clientHeight = this.element[ 0 ].clientHeight;\n            borderTop = parseFloat( this.element.css( \"border-top-width\" ) );\n            borderBottom = parseFloat( this.element.css( \"border-bottom-width\" ) );\n            borderHeight = borderTop + borderBottom;\n            height = scrollHeight + borderHeight + 15;\n\n            // Issue 6179: Padding is not included in scrollHeight and\n            // clientHeight by Firefox if no scrollbar is visible. Because\n            // textareas use the border-box box-sizing model, padding should be\n            // included in the new (assigned) height. Because the height is set\n            // to 0, clientHeight == 0 in Firefox. Therefore, we can use this to\n            // check if padding must be added.\n            if ( clientHeight === 0 ) {\n                paddingTop = parseFloat( this.element.css( \"padding-top\" ) );\n                paddingBottom = parseFloat( this.element.css( \"padding-bottom\" ) );\n                paddingHeight = paddingTop + paddingBottom;\n\n                height += paddingHeight;\n            }\n\n            this.element.css({\n                \"height\": height,\n                \"min-height\": \"\",\n                \"max-height\": \"\"\n            });\n\n            this.window.scrollTop( scrollTop );\n        },\n\n        refresh: function() {\n            if ( this.options.autogrow && this.isTextarea ) {\n                this._updateHeight();\n            }\n        },\n\n        _setOptions: function( options ) {\n\n            this._super( options );\n\n            if ( options.autogrow !== undefined && this.isTextarea ) {\n                if ( options.autogrow ) {\n                    this._autogrow();\n                } else {\n                    this._unbindAutogrow();\n                }\n            }\n        }\n\n    });\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.selectmenu\", $.extend( {\n    initSelector: \"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )\",\n\n    options: {\n        theme: null,\n        icon: \"carat-d\",\n        iconpos: \"right\",\n        inline: false,\n        corners: true,\n        shadow: true,\n        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */\n        overlayTheme: null,\n        dividerTheme: null,\n        hidePlaceholderMenuItems: true,\n        closeText: \"Close\",\n        nativeMenu: true,\n        // This option defaults to true on iOS devices.\n        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( \"AppleWebKit\" ) > -1,\n        mini: false\n    },\n\n    _button: function() {\n        return $( \"<div/>\" );\n    },\n\n    _setDisabled: function( value ) {\n        this.element.attr( \"disabled\", value );\n        this.button.attr( \"aria-disabled\", value );\n        return this._setOption( \"disabled\", value );\n    },\n\n    _focusButton : function() {\n        var self = this;\n\n        setTimeout( function() {\n            self.button.focus();\n        }, 40);\n    },\n\n    _selectOptions: function() {\n        return this.select.find( \"option\" );\n    },\n\n    // setup items that are generally necessary for select menu extension\n    _preExtension: function() {\n        var inline = this.options.inline || this.element.jqmData( \"inline\" ),\n            mini = this.options.mini || this.element.jqmData( \"mini\" ),\n            classes = \"\";\n        // TODO: Post 1.1--once we have time to test thoroughly--any classes manually applied to the original element should be carried over to the enhanced element, with an `-enhanced` suffix. See https://github.com/jquery/jquery-mobile/issues/3577\n        /* if ( $el[0].className.length ) {\n            classes = $el[0].className;\n        } */\n        if ( !!~this.element[0].className.indexOf( \"ui-btn-left\" ) ) {\n            classes = \" ui-btn-left\";\n        }\n\n        if (  !!~this.element[0].className.indexOf( \"ui-btn-right\" ) ) {\n            classes = \" ui-btn-right\";\n        }\n\n        if ( inline ) {\n            classes += \" ui-btn-inline\";\n        }\n        if ( mini ) {\n            classes += \" ui-mini\";\n        }\n\n        this.select = this.element.removeClass( \"ui-btn-left ui-btn-right\" ).wrap( \"<div class='ui-select\" + classes + \"'>\" );\n        this.selectId  = this.select.attr( \"id\" ) || ( \"select-\" + this.uuid );\n        this.buttonId = this.selectId + \"-button\";\n        this.label = $( \"label[for='\"+ this.selectId +\"']\" );\n        this.isMultiple = this.select[ 0 ].multiple;\n    },\n\n    _destroy: function() {\n        var wrapper = this.element.parents( \".ui-select\" );\n        if ( wrapper.length > 0 ) {\n            if ( wrapper.is( \".ui-btn-left, .ui-btn-right\" ) ) {\n                this.element.addClass( wrapper.hasClass( \"ui-btn-left\" ) ? \"ui-btn-left\" : \"ui-btn-right\" );\n            }\n            this.element.insertAfter( wrapper );\n            wrapper.remove();\n        }\n    },\n\n    _create: function() {\n        this._preExtension();\n\n        this.button = this._button();\n\n        var self = this,\n\n            options = this.options,\n\n            iconpos = options.icon ? ( options.iconpos || this.select.jqmData( \"iconpos\" ) ) : false,\n\n            button = this.button\n                .insertBefore( this.select )\n                .attr( \"id\", this.buttonId )\n                .addClass( \"ui-btn\" +\n                    ( options.icon ? ( \" ui-icon-\" + options.icon + \" ui-btn-icon-\" + iconpos +\n                    ( options.iconshadow ? \" ui-shadow-icon\" : \"\" ) ) :    \"\" ) + /* TODO: Remove in 1.5. */\n                    ( options.theme ? \" ui-btn-\" + options.theme : \"\" ) +\n                    ( options.corners ? \" ui-corner-all\" : \"\" ) +\n                    ( options.shadow ? \" ui-shadow\" : \"\" ) );\n\n        this.setButtonText();\n\n        // Opera does not properly support opacity on select elements\n        // In Mini, it hides the element, but not its text\n        // On the desktop,it seems to do the opposite\n        // for these reasons, using the nativeMenu option results in a full native select in Opera\n        if ( options.nativeMenu && window.opera && window.opera.version ) {\n            button.addClass( \"ui-select-nativeonly\" );\n        }\n\n        // Add counter for multi selects\n        if ( this.isMultiple ) {\n            this.buttonCount = $( \"<span>\" )\n                .addClass( \"ui-li-count ui-body-inherit\" )\n                .hide()\n                .appendTo( button.addClass( \"ui-li-has-count\" ) );\n        }\n\n        // Disable if specified\n        if ( options.disabled || this.element.attr( \"disabled\" )) {\n            this.disable();\n        }\n\n        // Events on native select\n        this.select.change(function() {\n            self.refresh();\n\n            if ( !!options.nativeMenu ) {\n                self._delay( function() {\n                    self.select.blur();\n                });\n            }\n        });\n\n        this._handleFormReset();\n\n        this._on( this.button, {\n            keydown: \"_handleKeydown\"\n        });\n\n        this.build();\n    },\n\n    build: function() {\n        var self = this;\n\n        this.select\n            .appendTo( self.button )\n            .bind( \"vmousedown\", function() {\n                // Add active class to button\n                self.button.addClass( $.mobile.activeBtnClass );\n            })\n            .bind( \"focus\", function() {\n                self.button.addClass( $.mobile.focusClass );\n            })\n            .bind( \"blur\", function() {\n                self.button.removeClass( $.mobile.focusClass );\n            })\n            .bind( \"focus vmouseover\", function() {\n                self.button.trigger( \"vmouseover\" );\n            })\n            .bind( \"vmousemove\", function() {\n                // Remove active class on scroll/touchmove\n                self.button.removeClass( $.mobile.activeBtnClass );\n            })\n            .bind( \"change blur vmouseout\", function() {\n                self.button.trigger( \"vmouseout\" )\n                    .removeClass( $.mobile.activeBtnClass );\n            });\n\n        // In many situations, iOS will zoom into the select upon tap, this prevents that from happening\n        self.button.bind( \"vmousedown\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.label.bind( \"click focus\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.select.bind( \"focus\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.button.bind( \"mouseup\", function() {\n            if ( self.options.preventFocusZoom ) {\n                setTimeout(function() {\n                    $.mobile.zoom.enable( true );\n                }, 0 );\n            }\n        });\n        self.select.bind( \"blur\", function() {\n            if ( self.options.preventFocusZoom ) {\n                $.mobile.zoom.enable( true );\n            }\n        });\n\n    },\n\n    selected: function() {\n        return this._selectOptions().filter( \":selected\" );\n    },\n\n    selectedIndices: function() {\n        var self = this;\n\n        return this.selected().map(function() {\n            return self._selectOptions().index( this );\n        }).get();\n    },\n\n    setButtonText: function() {\n        var self = this,\n            selected = this.selected(),\n            text = this.placeholder,\n            span = $( document.createElement( \"span\" ) );\n\n        this.button.children( \"span\" ).not( \".ui-li-count\" ).remove().end().end().prepend( (function() {\n            if ( selected.length ) {\n                text = selected.map(function() {\n                    return $( this ).text();\n                }).get().join( \", \" );\n            } else {\n                text = self.placeholder;\n            }\n\n            if ( text ) {\n                span.text( text );\n            } else {\n\n                // Set the contents to &nbsp; which we write as &#160; to be XHTML compliant - see gh-6699\n                span.html( \"&#160;\" );\n            }\n\n            // TODO possibly aggregate multiple select option classes\n            return span\n                .addClass( self.select.attr( \"class\" ) )\n                .addClass( selected.attr( \"class\" ) )\n                .removeClass( \"ui-screen-hidden\" );\n        })());\n    },\n\n    setButtonCount: function() {\n        var selected = this.selected();\n\n        // multiple count inside button\n        if ( this.isMultiple ) {\n            this.buttonCount[ selected.length > 1 ? \"show\" : \"hide\" ]().text( selected.length );\n        }\n    },\n\n    _handleKeydown: function( /* event */ ) {\n        this._delay( \"_refreshButton\" );\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    _refreshButton: function() {\n        this.setButtonText();\n        this.setButtonCount();\n    },\n\n    refresh: function() {\n        this._refreshButton();\n    },\n\n    // open and close preserved in native selects\n    // to simplify users code when looping over selects\n    open: $.noop,\n    close: $.noop,\n\n    disable: function() {\n        this._setDisabled( true );\n        this.button.addClass( \"ui-state-disabled\" );\n    },\n\n    enable: function() {\n        this._setDisabled( false );\n        this.button.removeClass( \"ui-state-disabled\" );\n    }\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.links = function( target ) {\n\n    //links within content areas, tests included with page\n    $( target )\n        .find( \"a\" )\n        .jqmEnhanceable()\n        .filter( \":jqmData(rel='popup')[href][href!='']\" )\n        .each( function() {\n            // Accessibility info for popups\n            var element = this,\n                idref = element.getAttribute( \"href\" ).substring( 1 );\n\n            if ( idref ) {\n                element.setAttribute( \"aria-haspopup\", true );\n                element.setAttribute( \"aria-owns\", idref );\n                element.setAttribute( \"aria-expanded\", false );\n            }\n        })\n        .end()\n        .not( \".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')\" )\n        .addClass( \"ui-link\" );\n\n};\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\nfunction fitSegmentInsideSegment( windowSize, segmentSize, offset, desired ) {\n    var returnValue = desired;\n\n    if ( windowSize < segmentSize ) {\n        // Center segment if it's bigger than the window\n        returnValue = offset + ( windowSize - segmentSize ) / 2;\n    } else {\n        // Otherwise center it at the desired coordinate while keeping it completely inside the window\n        returnValue = Math.min( Math.max( offset, desired - segmentSize / 2 ), offset + windowSize - segmentSize );\n    }\n\n    return returnValue;\n}\n\nfunction getWindowCoordinates( theWindow ) {\n    return {\n        x: theWindow.scrollLeft(),\n        y: theWindow.scrollTop(),\n        cx: ( theWindow[ 0 ].innerWidth || theWindow.width() ),\n        cy: ( theWindow[ 0 ].innerHeight || theWindow.height() )\n    };\n}\n\n$.widget( \"mobile.popup\", {\n    options: {\n        wrapperClass: null,\n        theme: null,\n        overlayTheme: null,\n        shadow: true,\n        corners: true,\n        transition: \"none\",\n        positionTo: \"origin\",\n        tolerance: null,\n        closeLinkSelector: \"a:jqmData(rel='back')\",\n        closeLinkEvents: \"click.popup\",\n        navigateEvents: \"navigate.popup\",\n        closeEvents: \"navigate.popup pagebeforechange.popup\",\n        dismissible: true,\n        enhanced: false,\n\n        // NOTE Windows Phone 7 has a scroll position caching issue that\n        //      requires us to disable popup history management by default\n        //      https://github.com/jquery/jquery-mobile/issues/4784\n        //\n        // NOTE this option is modified in _create!\n        history: !$.mobile.browser.oldIE\n    },\n\n    // When the user depresses the mouse/finger on an element inside the popup while the popup is\n    // open, we ignore resize events for a short while. This prevents #6961.\n    _handleDocumentVmousedown: function( theEvent ) {\n        if ( this._isOpen && $.contains( this._ui.container[ 0 ], theEvent.target ) ) {\n            this._ignoreResizeEvents();\n        }\n    },\n\n    _create: function() {\n        var theElement = this.element,\n            myId = theElement.attr( \"id\" ),\n            currentOptions = this.options;\n\n        // We need to adjust the history option to be false if there's no AJAX nav.\n        // We can't do it in the option declarations because those are run before\n        // it is determined whether there shall be AJAX nav.\n        currentOptions.history = currentOptions.history && $.mobile.ajaxEnabled && $.mobile.hashListeningEnabled;\n\n        this._on( this.document, {\n            \"vmousedown\": \"_handleDocumentVmousedown\"\n        });\n\n        // Define instance variables\n        $.extend( this, {\n            _scrollTop: 0,\n            _page: theElement.closest( \".ui-page\" ),\n            _ui: null,\n            _fallbackTransition: \"\",\n            _currentTransition: false,\n            _prerequisites: null,\n            _isOpen: false,\n            _tolerance: null,\n            _resizeData: null,\n            _ignoreResizeTo: 0,\n            _orientationchangeInProgress: false\n        });\n\n        if ( this._page.length === 0 ) {\n            this._page = $( \"body\" );\n        }\n\n        if ( currentOptions.enhanced ) {\n            this._ui = {\n                container: theElement.parent(),\n                screen: theElement.parent().prev(),\n                placeholder: $( this.document[ 0 ].getElementById( myId + \"-placeholder\" ) )\n            };\n        } else {\n            this._ui = this._enhance( theElement, myId );\n            this._applyTransition( currentOptions.transition );\n        }\n        this\n            ._setTolerance( currentOptions.tolerance )\n            ._ui.focusElement = this._ui.container;\n\n        // Event handlers\n        this._on( this._ui.screen, { \"vclick\": \"_eatEventAndClose\" } );\n        this._on( this.window, {\n            orientationchange: $.proxy( this, \"_handleWindowOrientationchange\" ),\n            resize: $.proxy( this, \"_handleWindowResize\" ),\n            keyup: $.proxy( this, \"_handleWindowKeyUp\" )\n        });\n        this._on( this.document, { \"focusin\": \"_handleDocumentFocusIn\" } );\n    },\n\n    _enhance: function( theElement, myId ) {\n        var currentOptions = this.options,\n            wrapperClass = currentOptions.wrapperClass,\n            ui = {\n                screen: $( \"<div class='ui-screen-hidden ui-popup-screen \" +\n                this._themeClassFromOption( \"ui-overlay-\", currentOptions.overlayTheme ) + \"'></div>\" ),\n                placeholder: $( \"<div style='display: none;'><!-- placeholder --></div>\" ),\n                container: $( \"<div class='ui-popup-container ui-popup-hidden ui-popup-truncate\" +\n                    ( wrapperClass ? ( \" \" + wrapperClass ) : \"\" ) + \"'></div>\" )\n            },\n            fragment = this.document[ 0 ].createDocumentFragment();\n\n        fragment.appendChild( ui.screen[ 0 ] );\n        fragment.appendChild( ui.container[ 0 ] );\n\n        if ( myId ) {\n            ui.screen.attr( \"id\", myId + \"-screen\" );\n            ui.container.attr( \"id\", myId + \"-popup\" );\n            ui.placeholder\n                .attr( \"id\", myId + \"-placeholder\" )\n                .html( \"<!-- placeholder for \" + myId + \" -->\" );\n        }\n\n        // Apply the proto\n        this._page[ 0 ].appendChild( fragment );\n        // Leave a placeholder where the element used to be\n        ui.placeholder.insertAfter( theElement );\n        theElement\n            .detach()\n            .addClass( \"ui-popup \" +\n                this._themeClassFromOption( \"ui-body-\", currentOptions.theme ) + \" \" +\n                ( currentOptions.shadow ? \"ui-overlay-shadow \" : \"\" ) +\n                ( currentOptions.corners ? \"ui-corner-all \" : \"\" ) )\n            .appendTo( ui.container );\n\n        return ui;\n    },\n\n    _eatEventAndClose: function( theEvent ) {\n        theEvent.preventDefault();\n        theEvent.stopImmediatePropagation();\n        if ( this.options.dismissible ) {\n            this.close();\n        }\n        return false;\n    },\n\n    // Make sure the screen covers the entire document - CSS is sometimes not\n    // enough to accomplish this.\n    _resizeScreen: function() {\n        var screen = this._ui.screen,\n            popupHeight = this._ui.container.outerHeight( true ),\n            screenHeight = screen.removeAttr( \"style\" ).height(),\n\n            // Subtracting 1 here is necessary for an obscure Andrdoid 4.0 bug where\n            // the browser hangs if the screen covers the entire document :/\n            documentHeight = this.document.height() - 1;\n\n        if ( screenHeight < documentHeight ) {\n            screen.height( documentHeight );\n        } else if ( popupHeight > screenHeight ) {\n            screen.height( popupHeight );\n        }\n    },\n\n    _handleWindowKeyUp: function( theEvent ) {\n        if ( this._isOpen && theEvent.keyCode === $.mobile.keyCode.ESCAPE ) {\n            return this._eatEventAndClose( theEvent );\n        }\n    },\n\n    _expectResizeEvent: function() {\n        var windowCoordinates = getWindowCoordinates( this.window );\n\n        if ( this._resizeData ) {\n            if ( windowCoordinates.x === this._resizeData.windowCoordinates.x &&\n                windowCoordinates.y === this._resizeData.windowCoordinates.y &&\n                windowCoordinates.cx === this._resizeData.windowCoordinates.cx &&\n                windowCoordinates.cy === this._resizeData.windowCoordinates.cy ) {\n                // timeout not refreshed\n                return false;\n            } else {\n                // clear existing timeout - it will be refreshed below\n                clearTimeout( this._resizeData.timeoutId );\n            }\n        }\n\n        this._resizeData = {\n            timeoutId: this._delay( \"_resizeTimeout\", 200 ),\n            windowCoordinates: windowCoordinates\n        };\n\n        return true;\n    },\n\n    _resizeTimeout: function() {\n        if ( this._isOpen ) {\n            if ( !this._expectResizeEvent() ) {\n                if ( this._ui.container.hasClass( \"ui-popup-hidden\" ) ) {\n                    // effectively rapid-open the popup while leaving the screen intact\n                    this._ui.container.removeClass( \"ui-popup-hidden ui-popup-truncate\" );\n                    this.reposition( { positionTo: \"window\" } );\n                    this._ignoreResizeEvents();\n                }\n\n                this._resizeScreen();\n                this._resizeData = null;\n                this._orientationchangeInProgress = false;\n            }\n        } else {\n            this._resizeData = null;\n            this._orientationchangeInProgress = false;\n        }\n    },\n\n    _stopIgnoringResizeEvents: function() {\n        this._ignoreResizeTo = 0;\n    },\n\n    _ignoreResizeEvents: function() {\n        if ( this._ignoreResizeTo ) {\n            clearTimeout( this._ignoreResizeTo );\n        }\n        this._ignoreResizeTo = this._delay( \"_stopIgnoringResizeEvents\", 1000 );\n    },\n\n    _handleWindowResize: function(/* theEvent */) {\n        if ( this._isOpen && this._ignoreResizeTo === 0 ) {\n            if ( ( this._expectResizeEvent() || this._orientationchangeInProgress ) &&\n                !this._ui.container.hasClass( \"ui-popup-hidden\" ) ) {\n                // effectively rapid-close the popup while leaving the screen intact\n                this._ui.container\n                    .addClass( \"ui-popup-hidden ui-popup-truncate\" )\n                    .removeAttr( \"style\" );\n            }\n        }\n    },\n\n    _handleWindowOrientationchange: function(/* theEvent */) {\n        if ( !this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0 ) {\n            this._expectResizeEvent();\n            this._orientationchangeInProgress = true;\n        }\n    },\n\n    // When the popup is open, attempting to focus on an element that is not a\n    // child of the popup will redirect focus to the popup\n    _handleDocumentFocusIn: function( theEvent ) {\n        var target,\n            targetElement = theEvent.target,\n            ui = this._ui;\n\n        if ( !this._isOpen ) {\n            return;\n        }\n\n        if ( targetElement !== ui.container[ 0 ] ) {\n            target = $( targetElement );\n            if ( !$.contains( ui.container[ 0 ], targetElement ) ) {\n                $( this.document[ 0 ].activeElement ).one( \"focus\", $.proxy( function() {\n                    this._safelyBlur( targetElement );\n                }, this ) );\n                ui.focusElement.focus();\n                theEvent.preventDefault();\n                theEvent.stopImmediatePropagation();\n                return false;\n            } else if ( ui.focusElement[ 0 ] === ui.container[ 0 ] ) {\n                ui.focusElement = target;\n            }\n        }\n\n        this._ignoreResizeEvents();\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : ( prefix + value ) ) : ( prefix + \"inherit\" ) );\n    },\n\n    _applyTransition: function( value ) {\n        if ( value ) {\n            this._ui.container.removeClass( this._fallbackTransition );\n            if ( value !== \"none\" ) {\n                this._fallbackTransition = $.mobile._maybeDegradeTransition( value );\n                if ( this._fallbackTransition === \"none\" ) {\n                    this._fallbackTransition = \"\";\n                }\n                this._ui.container.addClass( this._fallbackTransition );\n            }\n        }\n\n        return this;\n    },\n\n    _setOptions: function( newOptions ) {\n        var currentOptions = this.options,\n            theElement = this.element,\n            screen = this._ui.screen;\n\n        if ( newOptions.wrapperClass !== undefined ) {\n            this._ui.container\n                .removeClass( currentOptions.wrapperClass )\n                .addClass( newOptions.wrapperClass );\n        }\n\n        if ( newOptions.theme !== undefined ) {\n            theElement\n                .removeClass( this._themeClassFromOption( \"ui-body-\", currentOptions.theme ) )\n                .addClass( this._themeClassFromOption( \"ui-body-\", newOptions.theme ) );\n        }\n\n        if ( newOptions.overlayTheme !== undefined ) {\n            screen\n                .removeClass( this._themeClassFromOption( \"ui-overlay-\", currentOptions.overlayTheme ) )\n                .addClass( this._themeClassFromOption( \"ui-overlay-\", newOptions.overlayTheme ) );\n\n            if ( this._isOpen ) {\n                screen.addClass( \"in\" );\n            }\n        }\n\n        if ( newOptions.shadow !== undefined ) {\n            theElement.toggleClass( \"ui-overlay-shadow\", newOptions.shadow );\n        }\n\n        if ( newOptions.corners !== undefined ) {\n            theElement.toggleClass( \"ui-corner-all\", newOptions.corners );\n        }\n\n        if ( newOptions.transition !== undefined ) {\n            if ( !this._currentTransition ) {\n                this._applyTransition( newOptions.transition );\n            }\n        }\n\n        if ( newOptions.tolerance !== undefined ) {\n            this._setTolerance( newOptions.tolerance );\n        }\n\n        if ( newOptions.disabled !== undefined ) {\n            if ( newOptions.disabled ) {\n                this.close();\n            }\n        }\n\n        return this._super( newOptions );\n    },\n\n    _setTolerance: function( value ) {\n        var tol = { t: 30, r: 15, b: 30, l: 15 },\n            ar;\n\n        if ( value !== undefined ) {\n            ar = String( value ).split( \",\" );\n\n            $.each( ar, function( idx, val ) { ar[ idx ] = parseInt( val, 10 ); } );\n\n            switch( ar.length ) {\n                // All values are to be the same\n                case 1:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = tol.r = tol.b = tol.l = ar[ 0 ];\n                    }\n                    break;\n\n                // The first value denotes top/bottom tolerance, and the second value denotes left/right tolerance\n                case 2:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = tol.b = ar[ 0 ];\n                    }\n                    if ( !isNaN( ar[ 1 ] ) ) {\n                        tol.l = tol.r = ar[ 1 ];\n                    }\n                    break;\n\n                // The array contains values in the order top, right, bottom, left\n                case 4:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = ar[ 0 ];\n                    }\n                    if ( !isNaN( ar[ 1 ] ) ) {\n                        tol.r = ar[ 1 ];\n                    }\n                    if ( !isNaN( ar[ 2 ] ) ) {\n                        tol.b = ar[ 2 ];\n                    }\n                    if ( !isNaN( ar[ 3 ] ) ) {\n                        tol.l = ar[ 3 ];\n                    }\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        this._tolerance = tol;\n        return this;\n    },\n\n    _clampPopupWidth: function( infoOnly ) {\n        var menuSize,\n            windowCoordinates = getWindowCoordinates( this.window ),\n            // rectangle within which the popup must fit\n            rectangle = {\n                x: this._tolerance.l,\n                y: windowCoordinates.y + this._tolerance.t,\n                cx: windowCoordinates.cx - this._tolerance.l - this._tolerance.r,\n                cy: windowCoordinates.cy - this._tolerance.t - this._tolerance.b\n            };\n\n        if ( !infoOnly ) {\n            // Clamp the width of the menu before grabbing its size\n            this._ui.container.css( \"max-width\", rectangle.cx );\n        }\n\n        menuSize = {\n            cx: this._ui.container.outerWidth( true ),\n            cy: this._ui.container.outerHeight( true )\n        };\n\n        return { rc: rectangle, menuSize: menuSize };\n    },\n\n    _calculateFinalLocation: function( desired, clampInfo ) {\n        var returnValue,\n            rectangle = clampInfo.rc,\n            menuSize = clampInfo.menuSize;\n\n        // Center the menu over the desired coordinates, while not going outside\n        // the window tolerances. This will center wrt. the window if the popup is\n        // too large.\n        returnValue = {\n            left: fitSegmentInsideSegment( rectangle.cx, menuSize.cx, rectangle.x, desired.x ),\n            top: fitSegmentInsideSegment( rectangle.cy, menuSize.cy, rectangle.y, desired.y )\n        };\n\n        // Make sure the top of the menu is visible\n        returnValue.top = Math.max( 0, returnValue.top );\n\n        // If the height of the menu is smaller than the height of the document\n        // align the bottom with the bottom of the document\n\n        returnValue.top -= Math.min( returnValue.top,\n            Math.max( 0, returnValue.top + menuSize.cy - this.document.height() ) );\n\n        return returnValue;\n    },\n\n    // Try and center the overlay over the given coordinates\n    _placementCoords: function( desired ) {\n        return this._calculateFinalLocation( desired, this._clampPopupWidth() );\n    },\n\n    _createPrerequisites: function( screenPrerequisite, containerPrerequisite, whenDone ) {\n        var prerequisites,\n            self = this;\n\n        // It is important to maintain both the local variable prerequisites and\n        // self._prerequisites. The local variable remains in the closure of the\n        // functions which call the callbacks passed in. The comparison between the\n        // local variable and self._prerequisites is necessary, because once a\n        // function has been passed to .animationComplete() it will be called next\n        // time an animation completes, even if that's not the animation whose end\n        // the function was supposed to catch (for example, if an abort happens\n        // during the opening animation, the .animationComplete handler is not\n        // called for that animation anymore, but the handler remains attached, so\n        // it is called the next time the popup is opened - making it stale.\n        // Comparing the local variable prerequisites to the widget-level variable\n        // self._prerequisites ensures that callbacks triggered by a stale\n        // .animationComplete will be ignored.\n\n        prerequisites = {\n            screen: $.Deferred(),\n            container: $.Deferred()\n        };\n\n        prerequisites.screen.then( function() {\n            if ( prerequisites === self._prerequisites ) {\n                screenPrerequisite();\n            }\n        });\n\n        prerequisites.container.then( function() {\n            if ( prerequisites === self._prerequisites ) {\n                containerPrerequisite();\n            }\n        });\n\n        $.when( prerequisites.screen, prerequisites.container ).done( function() {\n            if ( prerequisites === self._prerequisites ) {\n                self._prerequisites = null;\n                whenDone();\n            }\n        });\n\n        self._prerequisites = prerequisites;\n    },\n\n    _animate: function( args ) {\n        // NOTE before removing the default animation of the screen\n        //      this had an animate callback that would resolve the deferred\n        //      now the deferred is resolved immediately\n        // TODO remove the dependency on the screen deferred\n        this._ui.screen\n            .removeClass( args.classToRemove )\n            .addClass( args.screenClassToAdd );\n\n        args.prerequisites.screen.resolve();\n\n        if ( args.transition && args.transition !== \"none\" ) {\n            if ( args.applyTransition ) {\n                this._applyTransition( args.transition );\n            }\n            if ( this._fallbackTransition ) {\n                this._ui.container\n                    .addClass( args.containerClassToAdd )\n                    .removeClass( args.classToRemove )\n                    .animationComplete( $.proxy( args.prerequisites.container, \"resolve\" ) );\n                return;\n            }\n        }\n        this._ui.container.removeClass( args.classToRemove );\n        args.prerequisites.container.resolve();\n    },\n\n    // The desired coordinates passed in will be returned untouched if no reference element can be identified via\n    // desiredPosition.positionTo. Nevertheless, this function ensures that its return value always contains valid\n    // x and y coordinates by specifying the center middle of the window if the coordinates are absent.\n    // options: { x: coordinate, y: coordinate, positionTo: string: \"origin\", \"window\", or jQuery selector\n    _desiredCoords: function( openOptions ) {\n        var offset,\n            dst = null,\n            windowCoordinates = getWindowCoordinates( this.window ),\n            x = openOptions.x,\n            y = openOptions.y,\n            pTo = openOptions.positionTo;\n\n        // Establish which element will serve as the reference\n        if ( pTo && pTo !== \"origin\" ) {\n            if ( pTo === \"window\" ) {\n                x = windowCoordinates.cx / 2 + windowCoordinates.x;\n                y = windowCoordinates.cy / 2 + windowCoordinates.y;\n            } else {\n                try {\n                    dst = $( pTo );\n                } catch( err ) {\n                    dst = null;\n                }\n                if ( dst ) {\n                    dst.filter( \":visible\" );\n                    if ( dst.length === 0 ) {\n                        dst = null;\n                    }\n                }\n            }\n        }\n\n        // If an element was found, center over it\n        if ( dst ) {\n            offset = dst.offset();\n            x = offset.left + dst.outerWidth() / 2;\n            y = offset.top + dst.outerHeight() / 2;\n        }\n\n        // Make sure x and y are valid numbers - center over the window\n        if ( $.type( x ) !== \"number\" || isNaN( x ) ) {\n            x = windowCoordinates.cx / 2 + windowCoordinates.x;\n        }\n        if ( $.type( y ) !== \"number\" || isNaN( y ) ) {\n            y = windowCoordinates.cy / 2 + windowCoordinates.y;\n        }\n\n        return { x: x, y: y };\n    },\n\n    _reposition: function( openOptions ) {\n        // We only care about position-related parameters for repositioning\n        openOptions = {\n            x: openOptions.x,\n            y: openOptions.y,\n            positionTo: openOptions.positionTo\n        };\n        this._trigger( \"beforeposition\", undefined, openOptions );\n        this._ui.container.offset( this._placementCoords( this._desiredCoords( openOptions ) ) );\n    },\n\n    reposition: function( openOptions ) {\n        if ( this._isOpen ) {\n            this._reposition( openOptions );\n        }\n    },\n\n    _safelyBlur: function( currentElement ){\n        if ( currentElement !== this.window[ 0 ] &&\n            currentElement.nodeName.toLowerCase() !== \"body\" ) {\n                $( currentElement ).blur();\n        }\n    },\n\n    _openPrerequisitesComplete: function() {\n        var id = this.element.attr( \"id\" ),\n            firstFocus = this._ui.container.find( \":focusable\" ).first();\n\n        this._ui.container.addClass( \"ui-popup-active\" );\n        this._isOpen = true;\n        this._resizeScreen();\n\n        // Check to see if currElement is not a child of the container.  If it's not, blur\n        if ( !$.contains( this._ui.container[ 0 ], this.document[ 0 ].activeElement ) ) {\n            this._safelyBlur( this.document[ 0 ].activeElement );\n        }\n        if ( firstFocus.length > 0 ) {\n            this._ui.focusElement = firstFocus;\n        }\n        this._ignoreResizeEvents();\n        if ( id ) {\n            this.document.find( \"[aria-haspopup='true'][aria-owns='\" +  id + \"']\" ).attr( \"aria-expanded\", true );\n        }\n        this._trigger( \"afteropen\" );\n    },\n\n    _open: function( options ) {\n        var openOptions = $.extend( {}, this.options, options ),\n            // TODO move blacklist to private method\n            androidBlacklist = ( function() {\n                var ua = navigator.userAgent,\n                    // Rendering engine is Webkit, and capture major version\n                    wkmatch = ua.match( /AppleWebKit\\/([0-9\\.]+)/ ),\n                    wkversion = !!wkmatch && wkmatch[ 1 ],\n                    androidmatch = ua.match( /Android (\\d+(?:\\.\\d+))/ ),\n                    andversion = !!androidmatch && androidmatch[ 1 ],\n                    chromematch = ua.indexOf( \"Chrome\" ) > -1;\n\n                // Platform is Android, WebKit version is greater than 534.13 ( Android 3.2.1 ) and not Chrome.\n                if ( androidmatch !== null && andversion === \"4.0\" && wkversion && wkversion > 534.13 && !chromematch ) {\n                    return true;\n                }\n                return false;\n            }());\n\n        // Count down to triggering \"popupafteropen\" - we have two prerequisites:\n        // 1. The popup window animation completes (container())\n        // 2. The screen opacity animation completes (screen())\n        this._createPrerequisites(\n            $.noop,\n            $.noop,\n            $.proxy( this, \"_openPrerequisitesComplete\" ) );\n\n        this._currentTransition = openOptions.transition;\n        this._applyTransition( openOptions.transition );\n\n        this._ui.screen.removeClass( \"ui-screen-hidden\" );\n        this._ui.container.removeClass( \"ui-popup-truncate\" );\n\n        // Give applications a chance to modify the contents of the container before it appears\n        this._reposition( openOptions );\n\n        this._ui.container.removeClass( \"ui-popup-hidden\" );\n\n        if ( this.options.overlayTheme && androidBlacklist ) {\n            /* TODO: The native browser on Android 4.0.X (\"Ice Cream Sandwich\") suffers from an issue where the popup overlay appears to be z-indexed above the popup itself when certain other styles exist on the same page -- namely, any element set to `position: fixed` and certain types of input. These issues are reminiscent of previously uncovered bugs in older versions of Android's native browser: https://github.com/scottjehl/Device-Bugs/issues/3\n            This fix closes the following bugs ( I use \"closes\" with reluctance, and stress that this issue should be revisited as soon as possible ):\n            https://github.com/jquery/jquery-mobile/issues/4816\n            https://github.com/jquery/jquery-mobile/issues/4844\n            https://github.com/jquery/jquery-mobile/issues/4874\n            */\n\n            // TODO sort out why this._page isn't working\n            this.element.closest( \".ui-page\" ).addClass( \"ui-popup-open\" );\n        }\n        this._animate({\n            additionalCondition: true,\n            transition: openOptions.transition,\n            classToRemove: \"\",\n            screenClassToAdd: \"in\",\n            containerClassToAdd: \"in\",\n            applyTransition: false,\n            prerequisites: this._prerequisites\n        });\n    },\n\n    _closePrerequisiteScreen: function() {\n        this._ui.screen\n            .removeClass( \"out\" )\n            .addClass( \"ui-screen-hidden\" );\n    },\n\n    _closePrerequisiteContainer: function() {\n        this._ui.container\n            .removeClass( \"reverse out\" )\n            .addClass( \"ui-popup-hidden ui-popup-truncate\" )\n            .removeAttr( \"style\" );\n    },\n\n    _closePrerequisitesDone: function() {\n        var container = this._ui.container,\n            id = this.element.attr( \"id\" );\n\n        // remove the global mutex for popups\n        $.mobile.popup.active = undefined;\n\n        // Blur elements inside the container, including the container\n        $( \":focus\", container[ 0 ] ).add( container[ 0 ] ).blur();\n\n        if ( id ) {\n            this.document.find( \"[aria-haspopup='true'][aria-owns='\" +  id + \"']\" ).attr( \"aria-expanded\", false );\n        }\n\n        // alert users that the popup is closed\n        this._trigger( \"afterclose\" );\n    },\n\n    _close: function( immediate ) {\n        this._ui.container.removeClass( \"ui-popup-active\" );\n        this._page.removeClass( \"ui-popup-open\" );\n\n        this._isOpen = false;\n\n        // Count down to triggering \"popupafterclose\" - we have two prerequisites:\n        // 1. The popup window reverse animation completes (container())\n        // 2. The screen opacity animation completes (screen())\n        this._createPrerequisites(\n            $.proxy( this, \"_closePrerequisiteScreen\" ),\n            $.proxy( this, \"_closePrerequisiteContainer\" ),\n            $.proxy( this, \"_closePrerequisitesDone\" ) );\n\n        this._animate( {\n            additionalCondition: this._ui.screen.hasClass( \"in\" ),\n            transition: ( immediate ? \"none\" : ( this._currentTransition ) ),\n            classToRemove: \"in\",\n            screenClassToAdd: \"out\",\n            containerClassToAdd: \"reverse out\",\n            applyTransition: true,\n            prerequisites: this._prerequisites\n        });\n    },\n\n    _unenhance: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n\n        // Put the element back to where the placeholder was and remove the \"ui-popup\" class\n        this._setOptions( { theme: $.mobile.popup.prototype.options.theme } );\n        this.element\n            // Cannot directly insertAfter() - we need to detach() first, because\n            // insertAfter() will do nothing if the payload div was not attached\n            // to the DOM at the time the widget was created, and so the payload\n            // will remain inside the container even after we call insertAfter().\n            // If that happens and we remove the container a few lines below, we\n            // will cause an infinite recursion - #5244\n            .detach()\n            .insertAfter( this._ui.placeholder )\n            .removeClass( \"ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit\" );\n        this._ui.screen.remove();\n        this._ui.container.remove();\n        this._ui.placeholder.remove();\n    },\n\n    _destroy: function() {\n        if ( $.mobile.popup.active === this ) {\n            this.element.one( \"popupafterclose\", $.proxy( this, \"_unenhance\" ) );\n            this.close();\n        } else {\n            this._unenhance();\n        }\n\n        return this;\n    },\n\n    _closePopup: function( theEvent, data ) {\n        var parsedDst, toUrl,\n            currentOptions = this.options,\n            immediate = false;\n\n        if ( ( theEvent && theEvent.isDefaultPrevented() ) || $.mobile.popup.active !== this ) {\n            return;\n        }\n\n        // restore location on screen\n        window.scrollTo( 0, this._scrollTop );\n\n        if ( theEvent && theEvent.type === \"pagebeforechange\" && data ) {\n            // Determine whether we need to rapid-close the popup, or whether we can\n            // take the time to run the closing transition\n            if ( typeof data.toPage === \"string\" ) {\n                parsedDst = data.toPage;\n            } else {\n                parsedDst = data.toPage.jqmData( \"url\" );\n            }\n            parsedDst = $.mobile.path.parseUrl( parsedDst );\n            toUrl = parsedDst.pathname + parsedDst.search + parsedDst.hash;\n\n            if ( this._myUrl !== $.mobile.path.makeUrlAbsolute( toUrl ) ) {\n                // Going to a different page - close immediately\n                immediate = true;\n            } else {\n                theEvent.preventDefault();\n            }\n        }\n\n        // remove nav bindings\n        this.window.off( currentOptions.closeEvents );\n        // unbind click handlers added when history is disabled\n        this.element.undelegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents );\n\n        this._close( immediate );\n    },\n\n    // any navigation event after a popup is opened should close the popup\n    // NOTE the pagebeforechange is bound to catch navigation events that don't\n    //      alter the url (eg, dialogs from popups)\n    _bindContainerClose: function() {\n        this.window\n            .on( this.options.closeEvents, $.proxy( this, \"_closePopup\" ) );\n    },\n\n    widget: function() {\n        return this._ui.container;\n    },\n\n    // TODO no clear deliniation of what should be here and\n    // what should be in _open. Seems to be \"visual\" vs \"history\" for now\n    open: function( options ) {\n        var url, hashkey, activePage, currentIsDialog, hasHash, urlHistory,\n            self = this,\n            currentOptions = this.options;\n\n        // make sure open is idempotent\n        if ( $.mobile.popup.active || currentOptions.disabled ) {\n            return this;\n        }\n\n        // set the global popup mutex\n        $.mobile.popup.active = this;\n        this._scrollTop = this.window.scrollTop();\n\n        // if history alteration is disabled close on navigate events\n        // and leave the url as is\n        if ( !( currentOptions.history ) ) {\n            self._open( options );\n            self._bindContainerClose();\n\n            // When histoy is disabled we have to grab the data-rel\n            // back link clicks so we can close the popup instead of\n            // relying on history to do it for us\n            self.element\n                .delegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents, function( theEvent ) {\n                    self.close();\n                    theEvent.preventDefault();\n                });\n\n            return this;\n        }\n\n        // cache some values for min/readability\n        urlHistory = $.mobile.navigate.history;\n        hashkey = $.mobile.dialogHashKey;\n        activePage = $.mobile.activePage;\n        currentIsDialog = ( activePage ? activePage.hasClass( \"ui-dialog\" ) : false );\n        this._myUrl = url = urlHistory.getActive().url;\n        hasHash = ( url.indexOf( hashkey ) > -1 ) && !currentIsDialog && ( urlHistory.activeIndex > 0 );\n\n        if ( hasHash ) {\n            self._open( options );\n            self._bindContainerClose();\n            return this;\n        }\n\n        // if the current url has no dialog hash key proceed as normal\n        // otherwise, if the page is a dialog simply tack on the hash key\n        if ( url.indexOf( hashkey ) === -1 && !currentIsDialog ) {\n            url = url + (url.indexOf( \"#\" ) > -1 ? hashkey : \"#\" + hashkey);\n        } else {\n            url = $.mobile.path.parseLocation().hash + hashkey;\n        }\n\n        // swallow the the initial navigation event, and bind for the next\n        this.window.one( \"beforenavigate\", function( theEvent ) {\n            theEvent.preventDefault();\n            self._open( options );\n            self._bindContainerClose();\n        });\n\n        this.urlAltered = true;\n        $.mobile.navigate( url, { role: \"dialog\" } );\n\n        return this;\n    },\n\n    close: function() {\n        // make sure close is idempotent\n        if ( $.mobile.popup.active !== this ) {\n            return this;\n        }\n\n        this._scrollTop = this.window.scrollTop();\n\n        if ( this.options.history && this.urlAltered ) {\n            $.mobile.back();\n            this.urlAltered = false;\n        } else {\n            // simulate the nav bindings having fired\n            this._closePopup();\n        }\n\n        return this;\n    }\n});\n\n// TODO this can be moved inside the widget\n$.mobile.popup.handleLink = function( $link ) {\n    var offset,\n        path = $.mobile.path,\n\n        // NOTE make sure to get only the hash from the href because ie7 (wp7)\n        //      returns the absolute href in this case ruining the element selection\n        popup = $( path.hashToSelector( path.parseUrl( $link.attr( \"href\" ) ).hash ) ).first();\n\n    if ( popup.length > 0 && popup.data( \"mobile-popup\" ) ) {\n        offset = $link.offset();\n        popup.popup( \"open\", {\n            x: offset.left + $link.outerWidth() / 2,\n            y: offset.top + $link.outerHeight() / 2,\n            transition: $link.jqmData( \"transition\" ),\n            positionTo: $link.jqmData( \"position-to\" )\n        });\n    }\n\n    //remove after delay\n    setTimeout( function() {\n        $link.removeClass( $.mobile.activeBtnClass );\n    }, 300 );\n};\n\n// TODO move inside _create\n$.mobile.document.on( \"pagebeforechange\", function( theEvent, data ) {\n    if ( data.options.role === \"popup\" ) {\n        $.mobile.popup.handleLink( data.options.link );\n        theEvent.preventDefault();\n    }\n});\n\n})( jQuery );\n\n/*\n* custom \"selectmenu\" plugin\n*/\n\n(function( $, undefined ) {\n\nvar unfocusableItemSelector = \".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')\",\n    goToAdjacentItem = function( item, target, direction ) {\n        var adjacent = item[ direction + \"All\" ]()\n            .not( unfocusableItemSelector )\n            .first();\n\n        // if there's a previous option, focus it\n        if ( adjacent.length ) {\n            target\n                .blur()\n                .attr( \"tabindex\", \"-1\" );\n\n            adjacent.find( \"a\" ).first().focus();\n        }\n    };\n\n$.widget( \"mobile.selectmenu\", $.mobile.selectmenu, {\n    _create: function() {\n        var o = this.options;\n\n        // Custom selects cannot exist inside popups, so revert the \"nativeMenu\"\n        // option to true if a parent is a popup\n        o.nativeMenu = o.nativeMenu || ( this.element.parents( \":jqmData(role='popup'),:mobile-popup\" ).length > 0 );\n\n        return this._super();\n    },\n\n    _handleSelectFocus: function() {\n        this.element.blur();\n        this.button.focus();\n    },\n\n    _handleKeydown: function( event ) {\n        this._super( event );\n        this._handleButtonVclickKeydown( event );\n    },\n\n    _handleButtonVclickKeydown: function( event ) {\n        if ( this.options.disabled || this.isOpen || this.options.nativeMenu ) {\n            return;\n        }\n\n        if (event.type === \"vclick\" ||\n                event.keyCode && (event.keyCode === $.mobile.keyCode.ENTER || event.keyCode === $.mobile.keyCode.SPACE)) {\n\n            this._decideFormat();\n            if ( this.menuType === \"overlay\" ) {\n                this.button.attr( \"href\", \"#\" + this.popupId ).attr( \"data-\" + ( $.mobile.ns || \"\" ) + \"rel\", \"popup\" );\n            } else {\n                this.button.attr( \"href\", \"#\" + this.dialogId ).attr( \"data-\" + ( $.mobile.ns || \"\" ) + \"rel\", \"dialog\" );\n            }\n            this.isOpen = true;\n            // Do not prevent default, so the navigation may have a chance to actually open the chosen format\n        }\n    },\n\n    _handleListFocus: function( e ) {\n        var params = ( e.type === \"focusin\" ) ?\n            { tabindex: \"0\", event: \"vmouseover\" }:\n            { tabindex: \"-1\", event: \"vmouseout\" };\n\n        $( e.target )\n            .attr( \"tabindex\", params.tabindex )\n            .trigger( params.event );\n    },\n\n    _handleListKeydown: function( event ) {\n        var target = $( event.target ),\n            li = target.closest( \"li\" );\n\n        // switch logic based on which key was pressed\n        switch ( event.keyCode ) {\n            // up or left arrow keys\n        case 38:\n            goToAdjacentItem( li, target, \"prev\" );\n            return false;\n            // down or right arrow keys\n        case 40:\n            goToAdjacentItem( li, target, \"next\" );\n            return false;\n            // If enter or space is pressed, trigger click\n        case 13:\n        case 32:\n            target.trigger( \"click\" );\n            return false;\n        }\n    },\n\n    _handleMenuPageHide: function() {\n\n        // After the dialog's done, we may want to trigger change if the value has actually changed\n        this._delayedTrigger();\n\n        // TODO centralize page removal binding / handling in the page plugin.\n        // Suggestion from @jblas to do refcounting\n        //\n        // TODO extremely confusing dependency on the open method where the pagehide.remove\n        // bindings are stripped to prevent the parent page from disappearing. The way\n        // we're keeping pages in the DOM right now sucks\n        //\n        // rebind the page remove that was unbound in the open function\n        // to allow for the parent page removal from actions other than the use\n        // of a dialog sized custom select\n        //\n        // doing this here provides for the back button on the custom select dialog\n        this.thisPage.page( \"bindRemove\" );\n    },\n\n    _handleHeaderCloseClick: function() {\n        if ( this.menuType === \"overlay\" ) {\n            this.close();\n            return false;\n        }\n    },\n\n    _handleListItemClick: function( event ) {\n        var listItem = $( event.target ).closest( \"li\" ),\n\n            // Index of option tag to be selected\n            oldIndex = this.select[ 0 ].selectedIndex,\n            newIndex = $.mobile.getAttribute( listItem, \"option-index\" ),\n            option = this._selectOptions().eq( newIndex )[ 0 ];\n\n        // Toggle selected status on the tag for multi selects\n        option.selected = this.isMultiple ? !option.selected : true;\n\n        // Toggle checkbox class for multiple selects\n        if ( this.isMultiple ) {\n            listItem.find( \"a\" )\n                .toggleClass( \"ui-checkbox-on\", option.selected )\n                .toggleClass( \"ui-checkbox-off\", !option.selected );\n        }\n\n        // If it's not a multiple select, trigger change after it has finished closing\n        if ( !this.isMultiple && oldIndex !== newIndex ) {\n            this._triggerChange = true;\n        }\n\n        // Trigger change if it's a multiple select\n        // Hide custom select for single selects only - otherwise focus clicked item\n        // We need to grab the clicked item the hard way, because the list may have been rebuilt\n        if ( this.isMultiple ) {\n            this.select.trigger( \"change\" );\n            this.list.find( \"li:not(.ui-li-divider)\" ).eq( newIndex )\n                .find( \"a\" ).first().focus();\n        }\n        else {\n            this.close();\n        }\n\n        event.preventDefault();\n    },\n\n    build: function() {\n        var selectId, popupId, dialogId, label, thisPage, isMultiple, menuId,\n            themeAttr, overlayTheme, overlayThemeAttr, dividerThemeAttr,\n            menuPage, listbox, list, header, headerTitle, menuPageContent,\n            menuPageClose, headerClose,\n            o = this.options;\n\n        if ( o.nativeMenu ) {\n            return this._super();\n        }\n\n        selectId = this.selectId;\n        popupId = selectId + \"-listbox\";\n        dialogId = selectId + \"-dialog\";\n        label = this.label;\n        thisPage = this.element.closest( \".ui-page\" );\n        isMultiple = this.element[ 0 ].multiple;\n        menuId = selectId + \"-menu\";\n        themeAttr = o.theme ? ( \" data-\" + $.mobile.ns + \"theme='\" + o.theme + \"'\" ) : \"\";\n        overlayTheme = o.overlayTheme || o.theme || null;\n        overlayThemeAttr = overlayTheme ? ( \" data-\" + $.mobile.ns +\n            \"overlay-theme='\" + overlayTheme + \"'\" ) : \"\";\n        dividerThemeAttr = ( o.dividerTheme && isMultiple ) ? ( \" data-\" + $.mobile.ns + \"divider-theme='\" + o.dividerTheme + \"'\" ) : \"\";\n        menuPage = $( \"<div data-\" + $.mobile.ns + \"role='dialog' class='ui-selectmenu' id='\" + dialogId + \"'\" + themeAttr + overlayThemeAttr + \">\" +\n            \"<div data-\" + $.mobile.ns + \"role='header'>\" +\n            \"<div class='ui-title'></div>\"+\n            \"</div>\"+\n            \"<div data-\" + $.mobile.ns + \"role='content'></div>\"+\n            \"</div>\" );\n        listbox = $( \"<div\" + themeAttr + overlayThemeAttr + \" id='\" + popupId +\n                \"' class='ui-selectmenu'></div>\" )\n            .insertAfter( this.select )\n            .popup();\n        list = $( \"<ul class='ui-selectmenu-list' id='\" + menuId + \"' role='listbox' aria-labelledby='\" + this.buttonId + \"'\" + themeAttr + dividerThemeAttr + \"></ul>\" ).appendTo( listbox );\n        header = $( \"<div class='ui-header ui-bar-\" + ( o.theme ? o.theme : \"inherit\" ) + \"'></div>\" ).prependTo( listbox );\n        headerTitle = $( \"<h1 class='ui-title'></h1>\" ).appendTo( header );\n\n        if ( this.isMultiple ) {\n            headerClose = $( \"<a>\", {\n                \"role\": \"button\",\n                \"text\": o.closeText,\n                \"href\": \"#\",\n                \"class\": \"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete\"\n            }).appendTo( header );\n        }\n\n        $.extend( this, {\n            selectId: selectId,\n            menuId: menuId,\n            popupId: popupId,\n            dialogId: dialogId,\n            thisPage: thisPage,\n            menuPage: menuPage,\n            label: label,\n            isMultiple: isMultiple,\n            theme: o.theme,\n            listbox: listbox,\n            list: list,\n            header: header,\n            headerTitle: headerTitle,\n            headerClose: headerClose,\n            menuPageContent: menuPageContent,\n            menuPageClose: menuPageClose,\n            placeholder: \"\"\n        });\n\n        // Create list from select, update state\n        this.refresh();\n\n        if ( this._origTabIndex === undefined ) {\n            // Map undefined to false, because this._origTabIndex === undefined\n            // indicates that we have not yet checked whether the select has\n            // originally had a tabindex attribute, whereas false indicates that\n            // we have checked the select for such an attribute, and have found\n            // none present.\n            this._origTabIndex = ( this.select[ 0 ].getAttribute( \"tabindex\" ) === null ) ? false : this.select.attr( \"tabindex\" );\n        }\n        this.select.attr( \"tabindex\", \"-1\" );\n        this._on( this.select, { focus : \"_handleSelectFocus\" } );\n\n        // Button events\n        this._on( this.button, {\n            vclick: \"_handleButtonVclickKeydown\"\n        });\n\n        // Events for list items\n        this.list.attr( \"role\", \"listbox\" );\n        this._on( this.list, {\n            \"focusin\": \"_handleListFocus\",\n            \"focusout\": \"_handleListFocus\",\n            \"keydown\": \"_handleListKeydown\",\n            \"click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)\": \"_handleListItemClick\"\n        });\n\n        // button refocus ensures proper height calculation\n        // by removing the inline style and ensuring page inclusion\n        this._on( this.menuPage, { pagehide: \"_handleMenuPageHide\" } );\n\n        // Events on the popup\n        this._on( this.listbox, { popupafterclose: \"_popupClosed\" } );\n\n        // Close button on small overlays\n        if ( this.isMultiple ) {\n            this._on( this.headerClose, { click: \"_handleHeaderCloseClick\" } );\n        }\n\n        return this;\n    },\n\n    _popupClosed: function() {\n        this.close();\n        this._delayedTrigger();\n    },\n\n    _delayedTrigger: function() {\n        if ( this._triggerChange ) {\n            this.element.trigger( \"change\" );\n        }\n        this._triggerChange = false;\n    },\n\n    _isRebuildRequired: function() {\n        var list = this.list.find( \"li\" ),\n            options = this._selectOptions().not( \".ui-screen-hidden\" );\n\n        // TODO exceedingly naive method to determine difference\n        // ignores value changes etc in favor of a forcedRebuild\n        // from the user in the refresh method\n        return options.text() !== list.text();\n    },\n\n    selected: function() {\n        return this._selectOptions().filter( \":selected:not( :jqmData(placeholder='true') )\" );\n    },\n\n    refresh: function( force ) {\n        var self, indices;\n\n        if ( this.options.nativeMenu ) {\n            return this._super( force );\n        }\n\n        self = this;\n        if ( force || this._isRebuildRequired() ) {\n            self._buildList();\n        }\n\n        indices = this.selectedIndices();\n\n        self.setButtonText();\n        self.setButtonCount();\n\n        self.list.find( \"li:not(.ui-li-divider)\" )\n            .find( \"a\" ).removeClass( $.mobile.activeBtnClass ).end()\n            .attr( \"aria-selected\", false )\n            .each(function( i ) {\n                var item = $( this );\n                if ( $.inArray( i, indices ) > -1 ) {\n\n                    // Aria selected attr\n                    item.attr( \"aria-selected\", true );\n\n                    // Multiple selects: add the \"on\" checkbox state to the icon\n                    if ( self.isMultiple ) {\n                        item.find( \"a\" ).removeClass( \"ui-checkbox-off\" ).addClass( \"ui-checkbox-on\" );\n                    } else {\n                        if ( item.hasClass( \"ui-screen-hidden\" ) ) {\n                            item.next().find( \"a\" ).addClass( $.mobile.activeBtnClass );\n                        } else {\n                            item.find( \"a\" ).addClass( $.mobile.activeBtnClass );\n                        }\n                    }\n                } else if ( self.isMultiple ) {\n                    item.find( \"a\" ).removeClass( \"ui-checkbox-on\" ).addClass( \"ui-checkbox-off\" );\n                }\n            });\n    },\n\n    close: function() {\n        if ( this.options.disabled || !this.isOpen ) {\n            return;\n        }\n\n        var self = this;\n\n        if ( self.menuType === \"page\" ) {\n            self.menuPage.dialog( \"close\" );\n            self.list.appendTo( self.listbox );\n        } else {\n            self.listbox.popup( \"close\" );\n        }\n\n        self._focusButton();\n        // allow the dialog to be closed again\n        self.isOpen = false;\n    },\n\n    open: function() {\n        this.button.click();\n    },\n\n    _focusMenuItem: function() {\n        var selector = this.list.find( \"a.\" + $.mobile.activeBtnClass );\n        if ( selector.length === 0 ) {\n            selector = this.list.find( \"li:not(\" + unfocusableItemSelector + \") a.ui-btn\" );\n        }\n        selector.first().focus();\n    },\n\n    _decideFormat: function() {\n        var self = this,\n            $window = this.window,\n            selfListParent = self.list.parent(),\n            menuHeight = selfListParent.outerHeight(),\n            scrollTop = $window.scrollTop(),\n            btnOffset = self.button.offset().top,\n            screenHeight = $window.height();\n\n        if ( menuHeight > screenHeight - 80 || !$.support.scrollTop ) {\n\n            self.menuPage.appendTo( $.mobile.pageContainer ).page();\n            self.menuPageContent = self.menuPage.find( \".ui-content\" );\n            self.menuPageClose = self.menuPage.find( \".ui-header a\" );\n\n            // prevent the parent page from being removed from the DOM,\n            // otherwise the results of selecting a list item in the dialog\n            // fall into a black hole\n            self.thisPage.unbind( \"pagehide.remove\" );\n\n            //for WebOS/Opera Mini (set lastscroll using button offset)\n            if ( scrollTop === 0 && btnOffset > screenHeight ) {\n                self.thisPage.one( \"pagehide\", function() {\n                    $( this ).jqmData( \"lastScroll\", btnOffset );\n                });\n            }\n\n            self.menuPage.one( {\n                pageshow: $.proxy( this, \"_focusMenuItem\" ),\n                pagehide: $.proxy( this, \"close\" )\n            });\n\n            self.menuType = \"page\";\n            self.menuPageContent.append( self.list );\n            self.menuPage\n                .find( \"div .ui-title\" )\n                    .text( self.label.getEncodedText() || self.placeholder );\n        } else {\n            self.menuType = \"overlay\";\n\n            self.listbox.one( { popupafteropen: $.proxy( this, \"_focusMenuItem\" ) } );\n        }\n    },\n\n    _buildList: function() {\n        var self = this,\n            o = this.options,\n            placeholder = this.placeholder,\n            needPlaceholder = true,\n            dataIcon = \"false\",\n            $options, numOptions, select,\n            dataPrefix = \"data-\" + $.mobile.ns,\n            dataIndexAttr = dataPrefix + \"option-index\",\n            dataIconAttr = dataPrefix + \"icon\",\n            dataRoleAttr = dataPrefix + \"role\",\n            dataPlaceholderAttr = dataPrefix + \"placeholder\",\n            fragment = document.createDocumentFragment(),\n            isPlaceholderItem = false,\n            optGroup,\n            i,\n            option, $option, parent, text, anchor, classes,\n            optLabel, divider, item;\n\n        self.list.empty().filter( \".ui-listview\" ).listview( \"destroy\" );\n        $options = this._selectOptions();\n        numOptions = $options.length;\n        select = this.select[ 0 ];\n\n        for ( i = 0; i < numOptions;i++, isPlaceholderItem = false) {\n            option = $options[i];\n            $option = $( option );\n\n            // Do not create options based on ui-screen-hidden select options\n            if ( $option.hasClass( \"ui-screen-hidden\" ) ) {\n                continue;\n            }\n\n            parent = option.parentNode;\n            classes = [];\n\n            // Although using .text() here raises the risk that, when we later paste this into the\n            // list item we end up pasting possibly malicious things like <script> tags, that risk\n            // only arises if we do something like $( \"<li><a href='#'>\" + text + \"</a></li>\" ). We\n            // don't do that. We do document.createTextNode( text ) instead, which guarantees that\n            // whatever we paste in will end up as text, with characters like <, > and & escaped.\n            text = $option.text();\n            anchor = document.createElement( \"a\" );\n            anchor.setAttribute( \"href\", \"#\" );\n            anchor.appendChild( document.createTextNode( text ) );\n\n            // Are we inside an optgroup?\n            if ( parent !== select && parent.nodeName.toLowerCase() === \"optgroup\" ) {\n                optLabel = parent.getAttribute( \"label\" );\n                if ( optLabel !== optGroup ) {\n                    divider = document.createElement( \"li\" );\n                    divider.setAttribute( dataRoleAttr, \"list-divider\" );\n                    divider.setAttribute( \"role\", \"option\" );\n                    divider.setAttribute( \"tabindex\", \"-1\" );\n                    divider.appendChild( document.createTextNode( optLabel ) );\n                    fragment.appendChild( divider );\n                    optGroup = optLabel;\n                }\n            }\n\n            if ( needPlaceholder && ( !option.getAttribute( \"value\" ) || text.length === 0 || $option.jqmData( \"placeholder\" ) ) ) {\n                needPlaceholder = false;\n                isPlaceholderItem = true;\n\n                // If we have identified a placeholder, record the fact that it was\n                // us who have added the placeholder to the option and mark it\n                // retroactively in the select as well\n                if ( null === option.getAttribute( dataPlaceholderAttr ) ) {\n                    this._removePlaceholderAttr = true;\n                }\n                option.setAttribute( dataPlaceholderAttr, true );\n                if ( o.hidePlaceholderMenuItems ) {\n                    classes.push( \"ui-screen-hidden\" );\n                }\n                if ( placeholder !== text ) {\n                    placeholder = self.placeholder = text;\n                }\n            }\n\n            item = document.createElement( \"li\" );\n            if ( option.disabled ) {\n                classes.push( \"ui-state-disabled\" );\n                item.setAttribute( \"aria-disabled\", true );\n            }\n            item.setAttribute( dataIndexAttr, i );\n            item.setAttribute( dataIconAttr, dataIcon );\n            if ( isPlaceholderItem ) {\n                item.setAttribute( dataPlaceholderAttr, true );\n            }\n            item.className = classes.join( \" \" );\n            item.setAttribute( \"role\", \"option\" );\n            anchor.setAttribute( \"tabindex\", \"-1\" );\n            if ( this.isMultiple ) {\n                $( anchor ).addClass( \"ui-btn ui-checkbox-off ui-btn-icon-right\" );\n            }\n\n            item.appendChild( anchor );\n            fragment.appendChild( item );\n        }\n\n        self.list[0].appendChild( fragment );\n\n        // Hide header if it's not a multiselect and there's no placeholder\n        if ( !this.isMultiple && !placeholder.length ) {\n            this.header.addClass( \"ui-screen-hidden\" );\n        } else {\n            this.headerTitle.text( this.placeholder );\n        }\n\n        // Now populated, create listview\n        self.list.listview();\n    },\n\n    _button: function() {\n        return this.options.nativeMenu ?\n            this._super() :\n            $( \"<a>\", {\n                \"href\": \"#\",\n                \"role\": \"button\",\n                // TODO value is undefined at creation\n                \"id\": this.buttonId,\n                \"aria-haspopup\": \"true\",\n\n                // TODO value is undefined at creation\n                \"aria-owns\": this.menuId\n            });\n    },\n\n    _destroy: function() {\n\n        if ( !this.options.nativeMenu ) {\n            this.close();\n\n            // Restore the tabindex attribute to its original value\n            if ( this._origTabIndex !== undefined ) {\n                if ( this._origTabIndex !== false ) {\n                    this.select.attr( \"tabindex\", this._origTabIndex );\n                } else {\n                    this.select.removeAttr( \"tabindex\" );\n                }\n            }\n\n            // Remove the placeholder attribute if we were the ones to add it\n            if ( this._removePlaceholderAttr ) {\n                this._selectOptions().removeAttr( \"data-\" + $.mobile.ns + \"placeholder\" );\n            }\n\n            // Remove the popup\n            this.listbox.remove();\n\n            // Remove the dialog\n            this.menuPage.remove();\n        }\n\n        // Chain up\n        this._super();\n    }\n});\n\n})( jQuery );\n\n\n// buttonMarkup is deprecated as of 1.4.0 and will be removed in 1.5.0.\n\n(function( $, undefined ) {\n\n// General policy: Do not access data-* attributes except during enhancement.\n// In all other cases we determine the state of the button exclusively from its\n// className. That's why optionsToClasses expects a full complement of options,\n// and the jQuery plugin completes the set of options from the default values.\n\n// Map classes to buttonMarkup boolean options - used in classNameToOptions()\nvar reverseBoolOptionMap = {\n        \"ui-shadow\" : \"shadow\",\n        \"ui-corner-all\" : \"corners\",\n        \"ui-btn-inline\" : \"inline\",\n        \"ui-shadow-icon\" : \"iconshadow\", /* TODO: Remove in 1.5 */\n        \"ui-mini\" : \"mini\"\n    },\n    getAttrFixed = function() {\n        var ret = $.mobile.getAttribute.apply( this, arguments );\n\n        return ( ret == null ? undefined : ret );\n    },\n    capitalLettersRE = /[A-Z]/g;\n\n// optionsToClasses:\n// @options: A complete set of options to convert to class names.\n// @existingClasses: extra classes to add to the result\n//\n// Converts @options to buttonMarkup classes and returns the result as an array\n// that can be converted to an element's className with .join( \" \" ). All\n// possible options must be set inside @options. Use $.fn.buttonMarkup.defaults\n// to get a complete set and use $.extend to override your choice of options\n// from that set.\nfunction optionsToClasses( options, existingClasses ) {\n    var classes = existingClasses ? existingClasses : [];\n\n    // Add classes to the array - first ui-btn\n    classes.push( \"ui-btn\" );\n\n    // If there is a theme\n    if ( options.theme ) {\n        classes.push( \"ui-btn-\" + options.theme );\n    }\n\n    // If there's an icon, add the icon-related classes\n    if ( options.icon ) {\n        classes = classes.concat([\n            \"ui-icon-\" + options.icon,\n            \"ui-btn-icon-\" + options.iconpos\n        ]);\n        if ( options.iconshadow ) {\n            classes.push( \"ui-shadow-icon\" ); /* TODO: Remove in 1.5 */\n        }\n    }\n\n    // Add the appropriate class for each boolean option\n    if ( options.inline ) {\n        classes.push( \"ui-btn-inline\" );\n    }\n    if ( options.shadow ) {\n        classes.push( \"ui-shadow\" );\n    }\n    if ( options.corners ) {\n        classes.push( \"ui-corner-all\" );\n    }\n    if ( options.mini ) {\n        classes.push( \"ui-mini\" );\n    }\n\n    // Create a string from the array and return it\n    return classes;\n}\n\n// classNameToOptions:\n// @classes: A string containing a .className-style space-separated class list\n//\n// Loops over @classes and calculates an options object based on the\n// buttonMarkup-related classes it finds. It records unrecognized classes in an\n// array.\n//\n// Returns: An object containing the following items:\n//\n// \"options\": buttonMarkup options found to be present because of the\n// presence/absence of corresponding classes\n//\n// \"unknownClasses\": a string containing all the non-buttonMarkup-related\n// classes found in @classes\n//\n// \"alreadyEnhanced\": A boolean indicating whether the ui-btn class was among\n// those found to be present\nfunction classNameToOptions( classes ) {\n    var idx, map, unknownClass,\n        alreadyEnhanced = false,\n        noIcon = true,\n        o = {\n            icon: \"\",\n            inline: false,\n            shadow: false,\n            corners: false,\n            iconshadow: false,\n            mini: false\n        },\n        unknownClasses = [];\n\n    classes = classes.split( \" \" );\n\n    // Loop over the classes\n    for ( idx = 0 ; idx < classes.length ; idx++ ) {\n\n        // Assume it's an unrecognized class\n        unknownClass = true;\n\n        // Recognize boolean options from the presence of classes\n        map = reverseBoolOptionMap[ classes[ idx ] ];\n        if ( map !== undefined ) {\n            unknownClass = false;\n            o[ map ] = true;\n\n        // Recognize the presence of an icon and establish the icon position\n        } else if ( classes[ idx ].indexOf( \"ui-btn-icon-\" ) === 0 ) {\n            unknownClass = false;\n            noIcon = false;\n            o.iconpos = classes[ idx ].substring( 12 );\n\n        // Establish which icon is present\n        } else if ( classes[ idx ].indexOf( \"ui-icon-\" ) === 0 ) {\n            unknownClass = false;\n            o.icon = classes[ idx ].substring( 8 );\n\n        // Establish the theme - this recognizes one-letter theme swatch names\n        } else if ( classes[ idx ].indexOf( \"ui-btn-\" ) === 0 && classes[ idx ].length === 8 ) {\n            unknownClass = false;\n            o.theme = classes[ idx ].substring( 7 );\n\n        // Recognize that this element has already been buttonMarkup-enhanced\n        } else if ( classes[ idx ] === \"ui-btn\" ) {\n            unknownClass = false;\n            alreadyEnhanced = true;\n        }\n\n        // If this class has not been recognized, add it to the list\n        if ( unknownClass ) {\n            unknownClasses.push( classes[ idx ] );\n        }\n    }\n\n    // If a \"ui-btn-icon-*\" icon position class is absent there cannot be an icon\n    if ( noIcon ) {\n        o.icon = \"\";\n    }\n\n    return {\n        options: o,\n        unknownClasses: unknownClasses,\n        alreadyEnhanced: alreadyEnhanced\n    };\n}\n\nfunction camelCase2Hyphenated( c ) {\n    return \"-\" + c.toLowerCase();\n}\n\n// $.fn.buttonMarkup:\n// DOM: gets/sets .className\n//\n// @options: options to apply to the elements in the jQuery object\n// @overwriteClasses: boolean indicating whether to honour existing classes\n//\n// Calculates the classes to apply to the elements in the jQuery object based on\n// the options passed in. If @overwriteClasses is true, it sets the className\n// property of each element in the jQuery object to the buttonMarkup classes\n// it calculates based on the options passed in.\n//\n// If you wish to preserve any classes that are already present on the elements\n// inside the jQuery object, including buttonMarkup-related classes that were\n// added by a previous call to $.fn.buttonMarkup() or during page enhancement\n// then you should omit @overwriteClasses or set it to false.\n$.fn.buttonMarkup = function( options, overwriteClasses ) {\n    var idx, data, el, retrievedOptions, optionKey,\n        defaults = $.fn.buttonMarkup.defaults;\n\n    for ( idx = 0 ; idx < this.length ; idx++ ) {\n        el = this[ idx ];\n        data = overwriteClasses ?\n\n            // Assume this element is not enhanced and ignore its classes\n            { alreadyEnhanced: false, unknownClasses: [] } :\n\n            // Otherwise analyze existing classes to establish existing options and\n            // classes\n            classNameToOptions( el.className );\n\n        retrievedOptions = $.extend( {},\n\n            // If the element already has the class ui-btn, then we assume that\n            // it has passed through buttonMarkup before - otherwise, the options\n            // returned by classNameToOptions do not correctly reflect the state of\n            // the element\n            ( data.alreadyEnhanced ? data.options : {} ),\n\n            // Finally, apply the options passed in\n            options );\n\n        // If this is the first call on this element, retrieve remaining options\n        // from the data-attributes\n        if ( !data.alreadyEnhanced ) {\n            for ( optionKey in defaults ) {\n                if ( retrievedOptions[ optionKey ] === undefined ) {\n                    retrievedOptions[ optionKey ] = getAttrFixed( el,\n                        optionKey.replace( capitalLettersRE, camelCase2Hyphenated )\n                    );\n                }\n            }\n        }\n\n        el.className = optionsToClasses(\n\n            // Merge all the options and apply them as classes\n            $.extend( {},\n\n                // The defaults form the basis\n                defaults,\n\n                // Add the computed options\n                retrievedOptions\n            ),\n\n            // ... and re-apply any unrecognized classes that were found\n            data.unknownClasses ).join( \" \" );\n        if ( el.tagName.toLowerCase() !== \"button\" ) {\n            el.setAttribute( \"role\", \"button\" );\n        }\n    }\n\n    return this;\n};\n\n// buttonMarkup defaults. This must be a complete set, i.e., a value must be\n// given here for all recognized options\n$.fn.buttonMarkup.defaults = {\n    icon: \"\",\n    iconpos: \"left\",\n    theme: null,\n    inline: false,\n    shadow: true,\n    corners: true,\n    iconshadow: false, /* TODO: Remove in 1.5. Option deprecated in 1.4. */\n    mini: false\n};\n\n$.extend( $.fn.buttonMarkup, {\n    initSelector: \"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)\"\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.controlgroup\", $.extend( {\n    options: {\n        enhanced: false,\n        theme: null,\n        shadow: false,\n        corners: true,\n        excludeInvisible: true,\n        type: \"vertical\",\n        mini: false\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options,\n            keepNative = $.mobile.page.prototype.keepNativeSelector();\n\n        // Run buttonmarkup\n        if ( $.fn.buttonMarkup ) {\n            this.element\n                .find( $.fn.buttonMarkup.initSelector )\n                .not( keepNative )\n                .buttonMarkup();\n        }\n        // Enhance child widgets\n        $.each( this._childWidgets, $.proxy( function( number, widgetName ) {\n            if ( $.mobile[ widgetName ] ) {\n                this.element\n                    .find( $.mobile[ widgetName ].initSelector )\n                    .not( keepNative )[ widgetName ]();\n            }\n        }, this ));\n\n        $.extend( this, {\n            _ui: null,\n            _initialRefresh: true\n        });\n\n        if ( opts.enhanced ) {\n            this._ui = {\n                groupLegend: elem.children( \".ui-controlgroup-label\" ).children(),\n                childWrapper: elem.children( \".ui-controlgroup-controls\" )\n            };\n        } else {\n            this._ui = this._enhance();\n        }\n\n    },\n\n    _childWidgets: [ \"checkboxradio\", \"selectmenu\", \"button\" ],\n\n    _themeClassFromOption: function( value ) {\n        return ( value ? ( value === \"none\" ? \"\" : \"ui-group-theme-\" + value ) : \"\" );\n    },\n\n    _enhance: function() {\n        var elem = this.element,\n            opts = this.options,\n            ui = {\n                groupLegend: elem.children( \"legend\" ),\n                childWrapper: elem\n                    .addClass( \"ui-controlgroup \" +\n                        \"ui-controlgroup-\" +\n                            ( opts.type === \"horizontal\" ? \"horizontal\" : \"vertical\" ) + \" \" +\n                        this._themeClassFromOption( opts.theme ) + \" \" +\n                        ( opts.corners ? \"ui-corner-all \" : \"\" ) +\n                        ( opts.mini ? \"ui-mini \" : \"\" ) )\n                    .wrapInner( \"<div \" +\n                        \"class='ui-controlgroup-controls \" +\n                            ( opts.shadow === true ? \"ui-shadow\" : \"\" ) + \"'></div>\" )\n                    .children()\n            };\n\n        if ( ui.groupLegend.length > 0 ) {\n            $( \"<div role='heading' class='ui-controlgroup-label'></div>\" )\n                .append( ui.groupLegend )\n                .prependTo( elem );\n        }\n\n        return ui;\n    },\n\n    _init: function() {\n        this.refresh();\n    },\n\n    _setOptions: function( options ) {\n        var callRefresh, returnValue,\n            elem = this.element;\n\n        // Must have one of horizontal or vertical\n        if ( options.type !== undefined ) {\n            elem\n                .removeClass( \"ui-controlgroup-horizontal ui-controlgroup-vertical\" )\n                .addClass( \"ui-controlgroup-\" + ( options.type === \"horizontal\" ? \"horizontal\" : \"vertical\" ) );\n            callRefresh = true;\n        }\n\n        if ( options.theme !== undefined ) {\n            elem\n                .removeClass( this._themeClassFromOption( this.options.theme ) )\n                .addClass( this._themeClassFromOption( options.theme ) );\n        }\n\n        if ( options.corners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", options.corners );\n        }\n\n        if ( options.mini !== undefined ) {\n            elem.toggleClass( \"ui-mini\", options.mini );\n        }\n\n        if ( options.shadow !== undefined ) {\n            this._ui.childWrapper.toggleClass( \"ui-shadow\", options.shadow );\n        }\n\n        if ( options.excludeInvisible !== undefined ) {\n            this.options.excludeInvisible = options.excludeInvisible;\n            callRefresh = true;\n        }\n\n        returnValue = this._super( options );\n\n        if ( callRefresh ) {\n            this.refresh();\n        }\n\n        return returnValue;\n    },\n\n    container: function() {\n        return this._ui.childWrapper;\n    },\n\n    refresh: function() {\n        var $el = this.container(),\n            els = $el.find( \".ui-btn\" ).not( \".ui-slider-handle\" ),\n            create = this._initialRefresh;\n        if ( $.mobile.checkboxradio ) {\n            $el.find( \":mobile-checkboxradio\" ).checkboxradio( \"refresh\" );\n        }\n        this._addFirstLastClasses( els,\n            this.options.excludeInvisible ? this._getVisibles( els, create ) : els,\n            create );\n        this._initialRefresh = false;\n    },\n\n    // Caveat: If the legend is not the first child of the controlgroup at enhance\n    // time, it will be after _destroy().\n    _destroy: function() {\n        var ui, buttons,\n            opts = this.options;\n\n        if ( opts.enhanced ) {\n            return this;\n        }\n\n        ui = this._ui;\n        buttons = this.element\n            .removeClass( \"ui-controlgroup \" +\n                \"ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini \" +\n                this._themeClassFromOption( opts.theme ) )\n            .find( \".ui-btn\" )\n            .not( \".ui-slider-handle\" );\n\n        this._removeFirstLastClasses( buttons );\n\n        ui.groupLegend.unwrap();\n        ui.childWrapper.children().unwrap();\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})(jQuery);\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.toolbar\", {\n        initSelector: \":jqmData(role='footer'), :jqmData(role='header')\",\n\n        options: {\n            theme: null,\n            addBackBtn: false,\n            backBtnTheme: null,\n            backBtnText: \"Back\"\n        },\n\n        _create: function() {\n            var leftbtn, rightbtn,\n                role =  this.element.is( \":jqmData(role='header')\" ) ? \"header\" : \"footer\",\n                page = this.element.closest( \".ui-page\" );\n            if ( page.length === 0 ) {\n                page = false;\n                this._on( this.document, {\n                    \"pageshow\": \"refresh\"\n                });\n            }\n            $.extend( this, {\n                role: role,\n                page: page,\n                leftbtn: leftbtn,\n                rightbtn: rightbtn\n            });\n            this.element.attr( \"role\", role === \"header\" ? \"banner\" : \"contentinfo\" ).addClass( \"ui-\" + role );\n            this.refresh();\n            this._setOptions( this.options );\n        },\n        _setOptions: function( o ) {\n            if ( o.addBackBtn !== undefined ) {\n                this._updateBackButton();\n            }\n            if ( o.backBtnTheme != null ) {\n                this.element\n                    .find( \".ui-toolbar-back-btn\" )\n                    .addClass( \"ui-btn ui-btn-\" + o.backBtnTheme );\n            }\n            if ( o.backBtnText !== undefined ) {\n                this.element.find( \".ui-toolbar-back-btn .ui-btn-text\" ).text( o.backBtnText );\n            }\n            if ( o.theme !== undefined ) {\n                var currentTheme = this.options.theme ? this.options.theme : \"inherit\",\n                    newTheme = o.theme ? o.theme : \"inherit\";\n\n                this.element.removeClass( \"ui-bar-\" + currentTheme ).addClass( \"ui-bar-\" + newTheme );\n            }\n\n            this._super( o );\n        },\n        refresh: function() {\n            if ( this.role === \"header\" ) {\n                this._addHeaderButtonClasses();\n            }\n            if ( !this.page ) {\n                this._setRelative();\n                if ( this.role === \"footer\" ) {\n                    this.element.appendTo( \"body\" );\n                } else if ( this.role === \"header\" ) {\n                    this._updateBackButton();\n                }\n            }\n            this._addHeadingClasses();\n            this._btnMarkup();\n        },\n\n        //we only want this to run on non fixed toolbars so make it easy to override\n        _setRelative: function() {\n            $( \"[data-\"+ $.mobile.ns + \"role='page']\" ).css({ \"position\": \"relative\" });\n        },\n\n        // Deprecated in 1.4. As from 1.5 button classes have to be present in the markup.\n        _btnMarkup: function() {\n            this.element\n                .children( \"a\" )\n                .filter( \":not([data-\" + $.mobile.ns + \"role='none'])\" )\n                .attr( \"data-\" + $.mobile.ns + \"role\", \"button\" );\n            this.element.trigger( \"create\" );\n        },\n        // Deprecated in 1.4. As from 1.5 ui-btn-left/right classes have to be present in the markup.\n        _addHeaderButtonClasses: function() {\n            var headerAnchors = this.element.children( \"a, button\" );\n\n            // Do not mistake a back button for a left toolbar button\n            this.leftbtn = headerAnchors.hasClass( \"ui-btn-left\" ) &&\n                !headerAnchors.hasClass( \"ui-toolbar-back-btn\" );\n\n            this.rightbtn = headerAnchors.hasClass( \"ui-btn-right\" );\n\n            // Filter out right buttons and back buttons\n            this.leftbtn = this.leftbtn ||\n                headerAnchors.eq( 0 )\n                    .not( \".ui-btn-right,.ui-toolbar-back-btn\" )\n                    .addClass( \"ui-btn-left\" )\n                    .length;\n\n            this.rightbtn = this.rightbtn || headerAnchors.eq( 1 ).addClass( \"ui-btn-right\" ).length;\n        },\n        _updateBackButton: function() {\n            var backButton,\n                options = this.options,\n                theme = options.backBtnTheme || options.theme;\n\n            // Retrieve the back button or create a new, empty one\n            backButton = this._backButton = ( this._backButton || {} );\n\n            // We add a back button only if the option to do so is on\n            if ( this.options.addBackBtn &&\n\n                    // This must also be a header toolbar\n                    this.role === \"header\" &&\n\n                    // There must be multiple pages in the DOM\n                    $( \".ui-page\" ).length > 1 &&\n                    ( this.page ?\n\n                        // If the toolbar is internal the page's URL must differ from the hash\n                        ( this.page[ 0 ].getAttribute( \"data-\" + $.mobile.ns + \"url\" ) !==\n                            $.mobile.path.stripHash( location.hash ) ) :\n\n                        // Otherwise, if the toolbar is external there must be at least one\n                        // history item to which one can go back\n                        ( $.mobile.navigate && $.mobile.navigate.history &&\n                            $.mobile.navigate.history.activeIndex > 0 ) ) &&\n\n                    // The toolbar does not have a left button\n                    !this.leftbtn ) {\n\n                // Skip back button creation if one is already present\n                if ( !backButton.attached ) {\n                    this.backButton = backButton.element = ( backButton.element ||\n                        $( \"<a role='button' href='javascript:void(0);' \" +\n                            \"class='ui-btn ui-corner-all ui-shadow ui-btn-left \" +\n                                ( theme ? \"ui-btn-\" + theme + \" \" : \"\" ) +\n                                \"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' \" +\n                            \"data-\" + $.mobile.ns + \"rel='back'>\" + options.backBtnText +\n                            \"</a>\" ) )\n                            .prependTo( this.element );\n                    backButton.attached = true;\n                }\n\n            // If we are not adding a back button, then remove the one present, if any\n            } else if ( backButton.element ) {\n                backButton.element.detach();\n                backButton.attached = false;\n            }\n        },\n        _addHeadingClasses: function() {\n            this.element.children( \"h1, h2, h3, h4, h5, h6\" )\n                .addClass( \"ui-title\" )\n                // Regardless of h element number in src, it becomes h1 for the enhanced page\n                .attr({\n                    \"role\": \"heading\",\n                    \"aria-level\": \"1\"\n                });\n        },\n        _destroy: function() {\n            var currentTheme;\n\n            this.element.children( \"h1, h2, h3, h4, h5, h6\" )\n                .removeClass( \"ui-title\" )\n                .removeAttr( \"role\" )\n                .removeAttr( \"aria-level\" );\n\n            if ( this.role === \"header\" ) {\n                this.element.children( \"a, button\" )\n                    .removeClass( \"ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all\" );\n                if ( this.backButton) {\n                    this.backButton.remove();\n                }\n            }\n\n            currentTheme = this.options.theme ? this.options.theme : \"inherit\";\n            this.element.removeClass( \"ui-bar-\" + currentTheme );\n\n            this.element.removeClass( \"ui-\" + this.role ).removeAttr( \"role\" );\n        }\n    });\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.toolbar\", $.mobile.toolbar, {\n        options: {\n            position:null,\n            visibleOnPageShow: true,\n            disablePageZoom: true,\n            transition: \"slide\", //can be none, fade, slide (slide maps to slideup or slidedown)\n            fullscreen: false,\n            tapToggle: true,\n            tapToggleBlacklist: \"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open\",\n            hideDuringFocus: \"input, textarea, select\",\n            updatePagePadding: true,\n            trackPersistentToolbars: true,\n\n            // Browser detection! Weeee, here we go...\n            // Unfortunately, position:fixed is costly, not to mention probably impossible, to feature-detect accurately.\n            // Some tests exist, but they currently return false results in critical devices and browsers, which could lead to a broken experience.\n            // Testing fixed positioning is also pretty obtrusive to page load, requiring injected elements and scrolling the window\n            // The following function serves to rule out some popular browsers with known fixed-positioning issues\n            // This is a plugin option like any other, so feel free to improve or overwrite it\n            supportBlacklist: function() {\n                return !$.support.fixedPosition;\n            }\n        },\n\n        _create: function() {\n            this._super();\n            this.pagecontainer = $( \":mobile-pagecontainer\" );\n            if ( this.options.position === \"fixed\" && !this.options.supportBlacklist() ) {\n                this._makeFixed();\n            }\n        },\n\n        _makeFixed: function() {\n            this.element.addClass( \"ui-\"+ this.role +\"-fixed\" );\n            this.updatePagePadding();\n            this._addTransitionClass();\n            this._bindPageEvents();\n            this._bindToggleHandlers();\n        },\n\n        _setOptions: function( o ) {\n            if ( o.position === \"fixed\" && this.options.position !== \"fixed\" ) {\n                this._makeFixed();\n            }\n            if ( this.options.position === \"fixed\" && !this.options.supportBlacklist() ) {\n                var $page = ( !!this.page )? this.page: ( $(\".ui-page-active\").length > 0 )? $(\".ui-page-active\"): $(\".ui-page\").eq(0);\n\n                if ( o.fullscreen !== undefined) {\n                    if ( o.fullscreen ) {\n                        this.element.addClass( \"ui-\"+ this.role +\"-fullscreen\" );\n                        $page.addClass( \"ui-page-\" + this.role + \"-fullscreen\" );\n                    }\n                    // If not fullscreen, add class to page to set top or bottom padding\n                    else {\n                        this.element.removeClass( \"ui-\"+ this.role +\"-fullscreen\" );\n                        $page.removeClass( \"ui-page-\" + this.role + \"-fullscreen\" ).addClass( \"ui-page-\" + this.role+ \"-fixed\" );\n                    }\n                }\n            }\n            this._super(o);\n        },\n\n        _addTransitionClass: function() {\n            var tclass = this.options.transition;\n\n            if ( tclass && tclass !== \"none\" ) {\n                // use appropriate slide for header or footer\n                if ( tclass === \"slide\" ) {\n                    tclass = this.element.hasClass( \"ui-header\" ) ? \"slidedown\" : \"slideup\";\n                }\n\n                this.element.addClass( tclass );\n            }\n        },\n\n        _bindPageEvents: function() {\n            var page = ( !!this.page )? this.element.closest( \".ui-page\" ): this.document;\n            //page event bindings\n            // Fixed toolbars require page zoom to be disabled, otherwise usability issues crop up\n            // This method is meant to disable zoom while a fixed-positioned toolbar page is visible\n            this._on( page , {\n                \"pagebeforeshow\": \"_handlePageBeforeShow\",\n                \"webkitAnimationStart\":\"_handleAnimationStart\",\n                \"animationstart\":\"_handleAnimationStart\",\n                \"updatelayout\": \"_handleAnimationStart\",\n                \"pageshow\": \"_handlePageShow\",\n                \"pagebeforehide\": \"_handlePageBeforeHide\"\n            });\n        },\n\n        _handlePageBeforeShow: function( ) {\n            var o = this.options;\n            if ( o.disablePageZoom ) {\n                $.mobile.zoom.disable( true );\n            }\n            if ( !o.visibleOnPageShow ) {\n                this.hide( true );\n            }\n        },\n\n        _handleAnimationStart: function() {\n            if ( this.options.updatePagePadding ) {\n                this.updatePagePadding( ( !!this.page )? this.page: \".ui-page-active\" );\n            }\n        },\n\n        _handlePageShow: function() {\n            this.updatePagePadding( ( !!this.page )? this.page: \".ui-page-active\" );\n            if ( this.options.updatePagePadding ) {\n                this._on( this.window, { \"throttledresize\": \"updatePagePadding\" } );\n            }\n        },\n\n        _handlePageBeforeHide: function( e, ui ) {\n            var o = this.options,\n                thisFooter, thisHeader, nextFooter, nextHeader;\n\n            if ( o.disablePageZoom ) {\n                $.mobile.zoom.enable( true );\n            }\n            if ( o.updatePagePadding ) {\n                this._off( this.window, \"throttledresize\" );\n            }\n\n            if ( o.trackPersistentToolbars ) {\n                thisFooter = $( \".ui-footer-fixed:jqmData(id)\", this.page );\n                thisHeader = $( \".ui-header-fixed:jqmData(id)\", this.page );\n                nextFooter = thisFooter.length && ui.nextPage && $( \".ui-footer-fixed:jqmData(id='\" + thisFooter.jqmData( \"id\" ) + \"')\", ui.nextPage ) || $();\n                nextHeader = thisHeader.length && ui.nextPage && $( \".ui-header-fixed:jqmData(id='\" + thisHeader.jqmData( \"id\" ) + \"')\", ui.nextPage ) || $();\n\n                if ( nextFooter.length || nextHeader.length ) {\n\n                    nextFooter.add( nextHeader ).appendTo( $.mobile.pageContainer );\n\n                    ui.nextPage.one( \"pageshow\", function() {\n                        nextHeader.prependTo( this );\n                        nextFooter.appendTo( this );\n                    });\n                }\n            }\n        },\n\n        _visible: true,\n\n        // This will set the content element's top or bottom padding equal to the toolbar's height\n        updatePagePadding: function( tbPage ) {\n            var $el = this.element,\n                header = ( this.role ===\"header\" ),\n                pos = parseFloat( $el.css( header ? \"top\" : \"bottom\" ) );\n\n            // This behavior only applies to \"fixed\", not \"fullscreen\"\n            if ( this.options.fullscreen ) { return; }\n            // tbPage argument can be a Page object or an event, if coming from throttled resize.\n            tbPage = ( tbPage && tbPage.type === undefined && tbPage ) || this.page || $el.closest( \".ui-page\" );\n            tbPage = ( !!this.page )? this.page: \".ui-page-active\";\n            $( tbPage ).css( \"padding-\" + ( header ? \"top\" : \"bottom\" ), $el.outerHeight() + pos );\n        },\n\n        _useTransition: function( notransition ) {\n            var $win = this.window,\n                $el = this.element,\n                scroll = $win.scrollTop(),\n                elHeight = $el.height(),\n                pHeight = ( !!this.page )? $el.closest( \".ui-page\" ).height():$(\".ui-page-active\").height(),\n                viewportHeight = $.mobile.getScreenHeight();\n\n            return !notransition &&\n                ( this.options.transition && this.options.transition !== \"none\" &&\n                (\n                    ( this.role === \"header\" && !this.options.fullscreen && scroll > elHeight ) ||\n                    ( this.role === \"footer\" && !this.options.fullscreen && scroll + viewportHeight < pHeight - elHeight )\n                ) || this.options.fullscreen\n                );\n        },\n\n        show: function( notransition ) {\n            var hideClass = \"ui-fixed-hidden\",\n                $el = this.element;\n\n            if ( this._useTransition( notransition ) ) {\n                $el\n                    .removeClass( \"out \" + hideClass )\n                    .addClass( \"in\" )\n                    .animationComplete(function () {\n                        $el.removeClass( \"in\" );\n                    });\n            }\n            else {\n                $el.removeClass( hideClass );\n            }\n            this._visible = true;\n        },\n\n        hide: function( notransition ) {\n            var hideClass = \"ui-fixed-hidden\",\n                $el = this.element,\n                // if it's a slide transition, our new transitions need the reverse class as well to slide outward\n                outclass = \"out\" + ( this.options.transition === \"slide\" ? \" reverse\" : \"\" );\n\n            if ( this._useTransition( notransition ) ) {\n                $el\n                    .addClass( outclass )\n                    .removeClass( \"in\" )\n                    .animationComplete(function() {\n                        $el.addClass( hideClass ).removeClass( outclass );\n                    });\n            }\n            else {\n                $el.addClass( hideClass ).removeClass( outclass );\n            }\n            this._visible = false;\n        },\n\n        toggle: function() {\n            this[ this._visible ? \"hide\" : \"show\" ]();\n        },\n\n        _bindToggleHandlers: function() {\n            var self = this,\n                o = self.options,\n                delayShow, delayHide,\n                isVisible = true,\n                page = ( !!this.page )? this.page: $(\".ui-page\");\n\n            // tap toggle\n            page\n                .bind( \"vclick\", function( e ) {\n                    if ( o.tapToggle && !$( e.target ).closest( o.tapToggleBlacklist ).length ) {\n                        self.toggle();\n                    }\n                })\n                .bind( \"focusin focusout\", function( e ) {\n                    //this hides the toolbars on a keyboard pop to give more screen room and prevent ios bug which\n                    //positions fixed toolbars in the middle of the screen on pop if the input is near the top or\n                    //bottom of the screen addresses issues #4410 Footer navbar moves up when clicking on a textbox in an Android environment\n                    //and issue #4113 Header and footer change their position after keyboard popup - iOS\n                    //and issue #4410 Footer navbar moves up when clicking on a textbox in an Android environment\n                    if ( screen.width < 1025 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( \".ui-header-fixed, .ui-footer-fixed\" ).length ) {\n                        //Fix for issue #4724 Moving through form in Mobile Safari with \"Next\" and \"Previous\" system\n                        //controls causes fixed position, tap-toggle false Header to reveal itself\n                        // isVisible instead of self._visible because the focusin and focusout events fire twice at the same time\n                        // Also use a delay for hiding the toolbars because on Android native browser focusin is direclty followed\n                        // by a focusout when a native selects opens and the other way around when it closes.\n                        if ( e.type === \"focusout\" && !isVisible ) {\n                            isVisible = true;\n                            //wait for the stack to unwind and see if we have jumped to another input\n                            clearTimeout( delayHide );\n                            delayShow = setTimeout( function() {\n                                self.show();\n                            }, 0 );\n                        } else if ( e.type === \"focusin\" && !!isVisible ) {\n                            //if we have jumped to another input clear the time out to cancel the show.\n                            clearTimeout( delayShow );\n                            isVisible = false;\n                            delayHide = setTimeout( function() {\n                                self.hide();\n                            }, 0 );\n                        }\n                    }\n                });\n        },\n\n        _setRelative: function() {\n            if( this.options.position !== \"fixed\" ){\n                $( \"[data-\"+ $.mobile.ns + \"role='page']\" ).css({ \"position\": \"relative\" });\n            }\n        },\n\n        _destroy: function() {\n            var pageClasses, toolbarClasses, hasFixed, header, hasFullscreen,\n                page = this.pagecontainer.pagecontainer( \"getActivePage\" );\n\n            this._super();\n            if ( this.options.position === \"fixed\" ) {\n                hasFixed = $(  \"body>.ui-\" + this.role + \"-fixed\" )\n                            .add( page.find( \".ui-\" + this.options.role + \"-fixed\" ) )\n                            .not( this.element ).length > 0;\n                hasFullscreen = $(  \"body>.ui-\" + this.role + \"-fixed\" )\n                            .add( page.find( \".ui-\" + this.options.role + \"-fullscreen\" ) )\n                            .not( this.element ).length > 0;\n                toolbarClasses =  \"ui-header-fixed ui-footer-fixed ui-header-fullscreen in out\" +\n                    \" ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden\";\n                this.element.removeClass( toolbarClasses );\n                if ( !hasFullscreen ) {\n                    pageClasses = \"ui-page-\" + this.role + \"-fullscreen\";\n                }\n                if ( !hasFixed ) {\n                    header = this.role === \"header\";\n                    pageClasses += \" ui-page-\" + this.role + \"-fixed\";\n                    page.css( \"padding-\" + ( header ? \"top\" : \"bottom\" ), \"\" );\n                }\n                page.removeClass( pageClasses );\n            }\n        }\n\n    });\n})( jQuery );\n\n(function( $, undefined ) {\n    $.widget( \"mobile.toolbar\", $.mobile.toolbar, {\n\n        _makeFixed: function() {\n            this._super();\n            this._workarounds();\n        },\n\n        //check the browser and version and run needed workarounds\n        _workarounds: function() {\n            var ua = navigator.userAgent,\n            platform = navigator.platform,\n            // Rendering engine is Webkit, and capture major version\n            wkmatch = ua.match( /AppleWebKit\\/([0-9]+)/ ),\n            wkversion = !!wkmatch && wkmatch[ 1 ],\n            os = null,\n            self = this;\n            //set the os we are working in if it dosent match one with workarounds return\n            if ( platform.indexOf( \"iPhone\" ) > -1 || platform.indexOf( \"iPad\" ) > -1  || platform.indexOf( \"iPod\" ) > -1 ) {\n                os = \"ios\";\n            } else if ( ua.indexOf( \"Android\" ) > -1 ) {\n                os = \"android\";\n            } else {\n                return;\n            }\n            //check os version if it dosent match one with workarounds return\n            if ( os === \"ios\" ) {\n                //iOS  workarounds\n                self._bindScrollWorkaround();\n            } else if ( os === \"android\" && wkversion && wkversion < 534 ) {\n                //Android 2.3 run all Android 2.3 workaround\n                self._bindScrollWorkaround();\n                self._bindListThumbWorkaround();\n            } else {\n                return;\n            }\n        },\n\n        //Utility class for checking header and footer positions relative to viewport\n        _viewportOffset: function() {\n            var $el = this.element,\n                header = $el.hasClass( \"ui-header\" ),\n                offset = Math.abs( $el.offset().top - this.window.scrollTop() );\n            if ( !header ) {\n                offset = Math.round( offset - this.window.height() + $el.outerHeight() ) - 60;\n            }\n            return offset;\n        },\n\n        //bind events for _triggerRedraw() function\n        _bindScrollWorkaround: function() {\n            var self = this;\n            //bind to scrollstop and check if the toolbars are correctly positioned\n            this._on( this.window, { scrollstop: function() {\n                var viewportOffset = self._viewportOffset();\n                //check if the header is visible and if its in the right place\n                if ( viewportOffset > 2 && self._visible ) {\n                    self._triggerRedraw();\n                }\n            }});\n        },\n\n        //this addresses issue #4250 Persistent footer instability in v1.1 with long select lists in Android 2.3.3\n        //and issue #3748 Android 2.x: Page transitions broken when fixed toolbars used\n        //the absolutely positioned thumbnail in a list view causes problems with fixed position buttons above in a nav bar\n        //setting the li's to -webkit-transform:translate3d(0,0,0); solves this problem to avoide potential issues in other\n        //platforms we scope this with the class ui-android-2x-fix\n        _bindListThumbWorkaround: function() {\n            this.element.closest( \".ui-page\" ).addClass( \"ui-android-2x-fixed\" );\n        },\n        //this addresses issues #4337 Fixed header problem after scrolling content on iOS and Android\n        //and device bugs project issue #1 Form elements can lose click hit area in position: fixed containers.\n        //this also addresses not on fixed toolbars page in docs\n        //adding 1px of padding to the bottom then removing it causes a \"redraw\"\n        //which positions the toolbars correctly (they will always be visually correct)\n        _triggerRedraw: function() {\n            var paddingBottom = parseFloat( $( \".ui-page-active\" ).css( \"padding-bottom\" ) );\n            //trigger page redraw to fix incorrectly positioned fixed elements\n            $( \".ui-page-active\" ).css( \"padding-bottom\", ( paddingBottom + 1 ) + \"px\" );\n            //if the padding is reset with out a timeout the reposition will not occure.\n            //this is independant of JQM the browser seems to need the time to react.\n            setTimeout( function() {\n                $( \".ui-page-active\" ).css( \"padding-bottom\", paddingBottom + \"px\" );\n            }, 0 );\n        },\n\n        destroy: function() {\n            this._super();\n            //Remove the class we added to the page previously in android 2.x\n            this.element.closest( \".ui-page-active\" ).removeClass( \"ui-android-2x-fix\" );\n        }\n    });\n\n})( jQuery );\n\n\n( function( $, undefined ) {\n\nvar ieHack = ( $.mobile.browser.oldIE && $.mobile.browser.oldIE <= 8 ),\n    uiTemplate = $(\n        \"<div class='ui-popup-arrow-guide'></div>\" +\n        \"<div class='ui-popup-arrow-container\" + ( ieHack ? \" ie\" : \"\" ) + \"'>\" +\n            \"<div class='ui-popup-arrow'></div>\" +\n        \"</div>\"\n    );\n\nfunction getArrow() {\n    var clone = uiTemplate.clone(),\n        gd = clone.eq( 0 ),\n        ct = clone.eq( 1 ),\n        ar = ct.children();\n\n    return { arEls: ct.add( gd ), gd: gd, ct: ct, ar: ar };\n}\n\n$.widget( \"mobile.popup\", $.mobile.popup, {\n    options: {\n\n        arrow: \"\"\n    },\n\n    _create: function() {\n        var ar,\n            ret = this._super();\n\n        if ( this.options.arrow ) {\n            this._ui.arrow = ar = this._addArrow();\n        }\n\n        return ret;\n    },\n\n    _addArrow: function() {\n        var theme,\n            opts = this.options,\n            ar = getArrow();\n\n        theme = this._themeClassFromOption( \"ui-body-\", opts.theme );\n        ar.ar.addClass( theme + ( opts.shadow ? \" ui-overlay-shadow\" : \"\" ) );\n        ar.arEls.hide().appendTo( this.element );\n\n        return ar;\n    },\n\n    _unenhance: function() {\n        var ar = this._ui.arrow;\n\n        if ( ar ) {\n            ar.arEls.remove();\n        }\n\n        return this._super();\n    },\n\n    // Pretend to show an arrow described by @p and @dir and calculate the\n    // distance from the desired point. If a best-distance is passed in, return\n    // the minimum of the one passed in and the one calculated.\n    _tryAnArrow: function( p, dir, desired, s, best ) {\n        var result, r, diff, desiredForArrow = {}, tip = {};\n\n        // If the arrow has no wiggle room along the edge of the popup, it cannot\n        // be displayed along the requested edge without it sticking out.\n        if ( s.arFull[ p.dimKey ] > s.guideDims[ p.dimKey ] ) {\n            return best;\n        }\n\n        desiredForArrow[ p.fst ] = desired[ p.fst ] +\n            ( s.arHalf[ p.oDimKey ] + s.menuHalf[ p.oDimKey ] ) * p.offsetFactor -\n            s.contentBox[ p.fst ] + ( s.clampInfo.menuSize[ p.oDimKey ] - s.contentBox[ p.oDimKey ] ) * p.arrowOffsetFactor;\n        desiredForArrow[ p.snd ] = desired[ p.snd ];\n\n        result = s.result || this._calculateFinalLocation( desiredForArrow, s.clampInfo );\n        r = { x: result.left, y: result.top };\n\n        tip[ p.fst ] = r[ p.fst ] + s.contentBox[ p.fst ] + p.tipOffset;\n        tip[ p.snd ] = Math.max( result[ p.prop ] + s.guideOffset[ p.prop ] + s.arHalf[ p.dimKey ],\n            Math.min( result[ p.prop ] + s.guideOffset[ p.prop ] + s.guideDims[ p.dimKey ] - s.arHalf[ p.dimKey ],\n                desired[ p.snd ] ) );\n\n        diff = Math.abs( desired.x - tip.x ) + Math.abs( desired.y - tip.y );\n        if ( !best || diff < best.diff ) {\n            // Convert tip offset to coordinates inside the popup\n            tip[ p.snd ] -= s.arHalf[ p.dimKey ] + result[ p.prop ] + s.contentBox[ p.snd ];\n            best = { dir: dir, diff: diff, result: result, posProp: p.prop, posVal: tip[ p.snd ] };\n        }\n\n        return best;\n    },\n\n    _getPlacementState: function( clamp ) {\n        var offset, gdOffset,\n            ar = this._ui.arrow,\n            state = {\n                clampInfo: this._clampPopupWidth( !clamp ),\n                arFull: { cx: ar.ct.width(), cy: ar.ct.height() },\n                guideDims: { cx: ar.gd.width(), cy: ar.gd.height() },\n                guideOffset: ar.gd.offset()\n            };\n\n        offset = this.element.offset();\n\n        ar.gd.css( { left: 0, top: 0, right: 0, bottom: 0 } );\n        gdOffset = ar.gd.offset();\n        state.contentBox = {\n            x: gdOffset.left - offset.left,\n            y: gdOffset.top - offset.top,\n            cx: ar.gd.width(),\n            cy: ar.gd.height()\n        };\n        ar.gd.removeAttr( \"style\" );\n\n        // The arrow box moves between guideOffset and guideOffset + guideDims - arFull\n        state.guideOffset = { left: state.guideOffset.left - offset.left, top: state.guideOffset.top - offset.top };\n        state.arHalf = { cx: state.arFull.cx / 2, cy: state.arFull.cy / 2 };\n        state.menuHalf = { cx: state.clampInfo.menuSize.cx / 2, cy: state.clampInfo.menuSize.cy / 2 };\n\n        return state;\n    },\n\n    _placementCoords: function( desired ) {\n        var state, best, params, elOffset, bgRef,\n            optionValue = this.options.arrow,\n            ar = this._ui.arrow;\n\n        if ( !ar ) {\n            return this._super( desired );\n        }\n\n        ar.arEls.show();\n\n        bgRef = {};\n        state = this._getPlacementState( true );\n        params = {\n            \"l\": { fst: \"x\", snd: \"y\", prop: \"top\", dimKey: \"cy\", oDimKey: \"cx\", offsetFactor: 1, tipOffset:  -state.arHalf.cx, arrowOffsetFactor: 0 },\n            \"r\": { fst: \"x\", snd: \"y\", prop: \"top\", dimKey: \"cy\", oDimKey: \"cx\", offsetFactor: -1, tipOffset: state.arHalf.cx + state.contentBox.cx, arrowOffsetFactor: 1 },\n            \"b\": { fst: \"y\", snd: \"x\", prop: \"left\", dimKey: \"cx\", oDimKey: \"cy\", offsetFactor: -1, tipOffset: state.arHalf.cy + state.contentBox.cy, arrowOffsetFactor: 1 },\n            \"t\": { fst: \"y\", snd: \"x\", prop: \"left\", dimKey: \"cx\", oDimKey: \"cy\", offsetFactor: 1, tipOffset: -state.arHalf.cy, arrowOffsetFactor: 0 }\n        };\n\n        // Try each side specified in the options to see on which one the arrow\n        // should be placed such that the distance between the tip of the arrow and\n        // the desired coordinates is the shortest.\n        $.each( ( optionValue === true ? \"l,t,r,b\" : optionValue ).split( \",\" ),\n            $.proxy( function( key, value ) {\n                best = this._tryAnArrow( params[ value ], value, desired, state, best );\n            }, this ) );\n\n        // Could not place the arrow along any of the edges - behave as if showing\n        // the arrow was turned off.\n        if ( !best ) {\n            ar.arEls.hide();\n            return this._super( desired );\n        }\n\n        // Move the arrow into place\n        ar.ct\n            .removeClass( \"ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b\" )\n            .addClass( \"ui-popup-arrow-\" + best.dir )\n            .removeAttr( \"style\" ).css( best.posProp, best.posVal )\n            .show();\n\n        // Do not move/size the background div on IE, because we use the arrow div for background as well.\n        if ( !ieHack ) {\n            elOffset = this.element.offset();\n            bgRef[ params[ best.dir ].fst ] = ar.ct.offset();\n            bgRef[ params[ best.dir ].snd ] = {\n                left: elOffset.left + state.contentBox.x,\n                top: elOffset.top + state.contentBox.y\n            };\n        }\n\n        return best.result;\n    },\n\n    _setOptions: function( opts ) {\n        var newTheme,\n            oldTheme = this.options.theme,\n            ar = this._ui.arrow,\n            ret = this._super( opts );\n\n        if ( opts.arrow !== undefined ) {\n            if ( !ar && opts.arrow ) {\n                this._ui.arrow = this._addArrow();\n\n                // Important to return here so we don't set the same options all over\n                // again below.\n                return;\n            } else if ( ar && !opts.arrow ) {\n                ar.arEls.remove();\n                this._ui.arrow = null;\n            }\n        }\n\n        // Reassign with potentially new arrow\n        ar = this._ui.arrow;\n\n        if ( ar ) {\n            if ( opts.theme !== undefined ) {\n                oldTheme = this._themeClassFromOption( \"ui-body-\", oldTheme );\n                newTheme = this._themeClassFromOption( \"ui-body-\", opts.theme );\n                ar.ar.removeClass( oldTheme ).addClass( newTheme );\n            }\n\n            if ( opts.shadow !== undefined ) {\n                ar.ar.toggleClass( \"ui-overlay-shadow\", opts.shadow );\n            }\n        }\n\n        return ret;\n    },\n\n    _destroy: function() {\n        var ar = this._ui.arrow;\n\n        if ( ar ) {\n            ar.arEls.remove();\n        }\n\n        return this._super();\n    }\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.panel\", {\n    options: {\n        classes: {\n            panel: \"ui-panel\",\n            panelOpen: \"ui-panel-open\",\n            panelClosed: \"ui-panel-closed\",\n            panelFixed: \"ui-panel-fixed\",\n            panelInner: \"ui-panel-inner\",\n            modal: \"ui-panel-dismiss\",\n            modalOpen: \"ui-panel-dismiss-open\",\n            pageContainer: \"ui-panel-page-container\",\n            pageWrapper: \"ui-panel-wrapper\",\n            pageFixedToolbar: \"ui-panel-fixed-toolbar\",\n            pageContentPrefix: \"ui-panel-page-content\", /* Used for wrapper and fixed toolbars position, display and open classes. */\n            animate: \"ui-panel-animate\"\n        },\n        animate: true,\n        theme: null,\n        position: \"left\",\n        dismissible: true,\n        display: \"reveal\", //accepts reveal, push, overlay\n        swipeClose: true,\n        positionFixed: false\n    },\n\n    _closeLink: null,\n    _parentPage: null,\n    _page: null,\n    _modal: null,\n    _panelInner: null,\n    _wrapper: null,\n    _fixedToolbars: null,\n\n    _create: function() {\n        var el = this.element,\n            parentPage = el.closest( \".ui-page, :jqmData(role='page')\" );\n\n        // expose some private props to other methods\n        $.extend( this, {\n            _closeLink: el.find( \":jqmData(rel='close')\" ),\n            _parentPage: ( parentPage.length > 0 ) ? parentPage : false,\n            _openedPage: null,\n            _page: this._getPage,\n            _panelInner: this._getPanelInner(),\n            _fixedToolbars: this._getFixedToolbars\n        });\n        if ( this.options.display !== \"overlay\" ){\n            this._getWrapper();\n        }\n        this._addPanelClasses();\n\n        // if animating, add the class to do so\n        if ( $.support.cssTransform3d && !!this.options.animate ) {\n            this.element.addClass( this.options.classes.animate );\n        }\n\n        this._bindUpdateLayout();\n        this._bindCloseEvents();\n        this._bindLinkListeners();\n        this._bindPageEvents();\n\n        if ( !!this.options.dismissible ) {\n            this._createModal();\n        }\n\n        this._bindSwipeEvents();\n    },\n\n    _getPanelInner: function() {\n        var panelInner = this.element.find( \".\" + this.options.classes.panelInner );\n\n        if ( panelInner.length === 0 ) {\n            panelInner = this.element.children().wrapAll( \"<div class='\" + this.options.classes.panelInner + \"' />\" ).parent();\n        }\n\n        return panelInner;\n    },\n\n    _createModal: function() {\n        var self = this,\n            target = self._parentPage ? self._parentPage.parent() : self.element.parent();\n\n        self._modal = $( \"<div class='\" + self.options.classes.modal + \"'></div>\" )\n            .on( \"mousedown\", function() {\n                self.close();\n            })\n            .appendTo( target );\n    },\n\n    _getPage: function() {\n        var page = this._openedPage || this._parentPage || $( \".\" + $.mobile.activePageClass );\n\n        return page;\n    },\n\n    _getWrapper: function() {\n        var wrapper = this._page().find( \".\" + this.options.classes.pageWrapper );\n        if ( wrapper.length === 0 ) {\n            wrapper = this._page().children( \".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)\" )\n                .wrapAll( \"<div class='\" + this.options.classes.pageWrapper + \"'></div>\" )\n                .parent();\n        }\n\n        this._wrapper = wrapper;\n    },\n\n    _getFixedToolbars: function() {\n        var extFixedToolbars = $( \"body\" ).children( \".ui-header-fixed, .ui-footer-fixed\" ),\n            intFixedToolbars = this._page().find( \".ui-header-fixed, .ui-footer-fixed\" ),\n            fixedToolbars = extFixedToolbars.add( intFixedToolbars ).addClass( this.options.classes.pageFixedToolbar );\n\n        return fixedToolbars;\n    },\n\n    _getPosDisplayClasses: function( prefix ) {\n        return prefix + \"-position-\" + this.options.position + \" \" + prefix + \"-display-\" + this.options.display;\n    },\n\n    _getPanelClasses: function() {\n        var panelClasses = this.options.classes.panel +\n            \" \" + this._getPosDisplayClasses( this.options.classes.panel ) +\n            \" \" + this.options.classes.panelClosed +\n            \" \" + \"ui-body-\" + ( this.options.theme ? this.options.theme : \"inherit\" );\n\n        if ( !!this.options.positionFixed ) {\n            panelClasses += \" \" + this.options.classes.panelFixed;\n        }\n\n        return panelClasses;\n    },\n\n    _addPanelClasses: function() {\n        this.element.addClass( this._getPanelClasses() );\n    },\n\n    _handleCloseClick: function( event ) {\n        if ( !event.isDefaultPrevented() ) {\n            this.close();\n        }\n    },\n\n    _bindCloseEvents: function() {\n        this._on( this._closeLink, {\n            \"click\": \"_handleCloseClick\"\n        });\n\n        this._on({\n            \"click a:jqmData(ajax='false')\": \"_handleCloseClick\"\n        });\n    },\n\n    _positionPanel: function( scrollToTop ) {\n        var self = this,\n            panelInnerHeight = self._panelInner.outerHeight(),\n            expand = panelInnerHeight > $.mobile.getScreenHeight();\n\n        if ( expand || !self.options.positionFixed ) {\n            if ( expand ) {\n                self._unfixPanel();\n                $.mobile.resetActivePageHeight( panelInnerHeight );\n            }\n            if ( scrollToTop ) {\n                this.window[ 0 ].scrollTo( 0, $.mobile.defaultHomeScroll );\n            }\n        } else {\n            self._fixPanel();\n        }\n    },\n\n    _bindFixListener: function() {\n        this._on( $( window ), { \"throttledresize\": \"_positionPanel\" });\n    },\n\n    _unbindFixListener: function() {\n        this._off( $( window ), \"throttledresize\" );\n    },\n\n    _unfixPanel: function() {\n        if ( !!this.options.positionFixed && $.support.fixedPosition ) {\n            this.element.removeClass( this.options.classes.panelFixed );\n        }\n    },\n\n    _fixPanel: function() {\n        if ( !!this.options.positionFixed && $.support.fixedPosition ) {\n            this.element.addClass( this.options.classes.panelFixed );\n        }\n    },\n\n    _bindUpdateLayout: function() {\n        var self = this;\n\n        self.element.on( \"updatelayout\", function(/* e */) {\n            if ( self._open ) {\n                self._positionPanel();\n            }\n        });\n    },\n\n    _bindLinkListeners: function() {\n        this._on( \"body\", {\n            \"click a\": \"_handleClick\"\n        });\n\n    },\n\n    _handleClick: function( e ) {\n        var link,\n            panelId = this.element.attr( \"id\" );\n\n        if ( e.currentTarget.href.split( \"#\" )[ 1 ] === panelId && panelId !== undefined ) {\n\n            e.preventDefault();\n            link = $( e.target );\n            if ( link.hasClass( \"ui-btn\" ) ) {\n                link.addClass( $.mobile.activeBtnClass );\n                this.element.one( \"panelopen panelclose\", function() {\n                    link.removeClass( $.mobile.activeBtnClass );\n                });\n            }\n            this.toggle();\n        }\n    },\n\n    _bindSwipeEvents: function() {\n        var self = this,\n            area = self._modal ? self.element.add( self._modal ) : self.element;\n\n        // on swipe, close the panel\n        if ( !!self.options.swipeClose ) {\n            if ( self.options.position === \"left\" ) {\n                area.on( \"swipeleft.panel\", function(/* e */) {\n                    self.close();\n                });\n            } else {\n                area.on( \"swiperight.panel\", function(/* e */) {\n                    self.close();\n                });\n            }\n        }\n    },\n\n    _bindPageEvents: function() {\n        var self = this;\n\n        this.document\n            // Close the panel if another panel on the page opens\n            .on( \"panelbeforeopen\", function( e ) {\n                if ( self._open && e.target !== self.element[ 0 ] ) {\n                    self.close();\n                }\n            })\n            // On escape, close? might need to have a target check too...\n            .on( \"keyup.panel\", function( e ) {\n                if ( e.keyCode === 27 && self._open ) {\n                    self.close();\n                }\n            });\n        if ( !this._parentPage && this.options.display !== \"overlay\" ) {\n            this._on( this.document, {\n                \"pageshow\": function() {\n                    this._openedPage = null;\n                    this._getWrapper();\n                }\n            });\n        }\n        // Clean up open panels after page hide\n        if ( self._parentPage ) {\n            this.document.on( \"pagehide\", \":jqmData(role='page')\", function() {\n                if ( self._open ) {\n                    self.close( true );\n                }\n            });\n        } else {\n            this.document.on( \"pagebeforehide\", function() {\n                if ( self._open ) {\n                    self.close( true );\n                }\n            });\n        }\n    },\n\n    // state storage of open or closed\n    _open: false,\n    _pageContentOpenClasses: null,\n    _modalOpenClasses: null,\n\n    open: function( immediate ) {\n        if ( !this._open ) {\n            var self = this,\n                o = self.options,\n\n                _openPanel = function() {\n                    self._off( self.document , \"panelclose\" );\n                    self._page().jqmData( \"panel\", \"open\" );\n\n                    if ( $.support.cssTransform3d && !!o.animate && o.display !== \"overlay\" ) {\n                        self._wrapper.addClass( o.classes.animate );\n                        self._fixedToolbars().addClass( o.classes.animate );\n                    }\n\n                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {\n                        ( self._wrapper || self.element )\n                            .animationComplete( complete, \"transition\" );\n                    } else {\n                        setTimeout( complete, 0 );\n                    }\n\n                    if ( o.theme && o.display !== \"overlay\" ) {\n                        self._page().parent()\n                            .addClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                    }\n\n                    self.element\n                        .removeClass( o.classes.panelClosed )\n                        .addClass( o.classes.panelOpen );\n\n                    self._positionPanel( true );\n\n                    self._pageContentOpenClasses = self._getPosDisplayClasses( o.classes.pageContentPrefix );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._page().parent().addClass( o.classes.pageContainer );\n                        self._wrapper.addClass( self._pageContentOpenClasses );\n                        self._fixedToolbars().addClass( self._pageContentOpenClasses );\n                    }\n\n                    self._modalOpenClasses = self._getPosDisplayClasses( o.classes.modal ) + \" \" + o.classes.modalOpen;\n                    if ( self._modal ) {\n                        self._modal\n                            .addClass( self._modalOpenClasses )\n                            .height( Math.max( self._modal.height(), self.document.height() ) );\n                    }\n                },\n                complete = function() {\n\n                    // Bail if the panel was closed before the opening animation has completed\n                    if ( !self._open ) {\n                        return;\n                    }\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._wrapper.addClass( o.classes.pageContentPrefix + \"-open\" );\n                        self._fixedToolbars().addClass( o.classes.pageContentPrefix + \"-open\" );\n                    }\n\n                    self._bindFixListener();\n\n                    self._trigger( \"open\" );\n\n                    self._openedPage = self._page();\n                };\n\n            self._trigger( \"beforeopen\" );\n\n            if ( self._page().jqmData( \"panel\" ) === \"open\" ) {\n                self._on( self.document, {\n                    \"panelclose\": _openPanel\n                });\n            } else {\n                _openPanel();\n            }\n\n            self._open = true;\n        }\n    },\n\n    close: function( immediate ) {\n        if ( this._open ) {\n            var self = this,\n                o = this.options,\n\n                _closePanel = function() {\n\n                    self.element.removeClass( o.classes.panelOpen );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._wrapper.removeClass( self._pageContentOpenClasses );\n                        self._fixedToolbars().removeClass( self._pageContentOpenClasses );\n                    }\n\n                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {\n                        ( self._wrapper || self.element )\n                            .animationComplete( complete, \"transition\" );\n                    } else {\n                        setTimeout( complete, 0 );\n                    }\n\n                    if ( self._modal ) {\n                        self._modal\n                            .removeClass( self._modalOpenClasses )\n                            .height( \"\" );\n                    }\n                },\n                complete = function() {\n                    if ( o.theme && o.display !== \"overlay\" ) {\n                        self._page().parent().removeClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                    }\n\n                    self.element.addClass( o.classes.panelClosed );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._page().parent().removeClass( o.classes.pageContainer );\n                        self._wrapper.removeClass( o.classes.pageContentPrefix + \"-open\" );\n                        self._fixedToolbars().removeClass( o.classes.pageContentPrefix + \"-open\" );\n                    }\n\n                    if ( $.support.cssTransform3d && !!o.animate && o.display !== \"overlay\" ) {\n                        self._wrapper.removeClass( o.classes.animate );\n                        self._fixedToolbars().removeClass( o.classes.animate );\n                    }\n\n                    self._fixPanel();\n                    self._unbindFixListener();\n                    $.mobile.resetActivePageHeight();\n\n                    self._page().jqmRemoveData( \"panel\" );\n\n                    self._trigger( \"close\" );\n\n                    self._openedPage = null;\n                };\n\n            self._trigger( \"beforeclose\" );\n\n            _closePanel();\n\n            self._open = false;\n        }\n    },\n\n    toggle: function() {\n        this[ this._open ? \"close\" : \"open\" ]();\n    },\n\n    _destroy: function() {\n        var otherPanels,\n        o = this.options,\n        multiplePanels = ( $( \"body > :mobile-panel\" ).length + $.mobile.activePage.find( \":mobile-panel\" ).length ) > 1;\n\n        if ( o.display !== \"overlay\" ) {\n\n            //  remove the wrapper if not in use by another panel\n            otherPanels = $( \"body > :mobile-panel\" ).add( $.mobile.activePage.find( \":mobile-panel\" ) );\n            if ( otherPanels.not( \".ui-panel-display-overlay\" ).not( this.element ).length === 0 ) {\n                this._wrapper.children().unwrap();\n            }\n\n            if ( this._open ) {\n\n                this._fixedToolbars().removeClass( o.classes.pageContentPrefix + \"-open\" );\n\n                if ( $.support.cssTransform3d && !!o.animate ) {\n                    this._fixedToolbars().removeClass( o.classes.animate );\n                }\n\n                this._page().parent().removeClass( o.classes.pageContainer );\n\n                if ( o.theme ) {\n                    this._page().parent().removeClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                }\n            }\n        }\n\n        if ( !multiplePanels ) {\n\n            this.document.off( \"panelopen panelclose\" );\n\n        }\n\n        if ( this._open ) {\n            this._page().jqmRemoveData( \"panel\" );\n        }\n\n        this._panelInner.children().unwrap();\n\n        this.element\n            .removeClass( [ this._getPanelClasses(), o.classes.panelOpen, o.classes.animate ].join( \" \" ) )\n            .off( \"swipeleft.panel swiperight.panel\" )\n            .off( \"panelbeforeopen\" )\n            .off( \"panelhide\" )\n            .off( \"keyup.panel\" )\n            .off( \"updatelayout\" );\n\n        if ( this._modal ) {\n            this._modal.remove();\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", {\n    options: {\n        classes: {\n            table: \"ui-table\"\n        },\n        enhanced: false\n    },\n\n    _create: function() {\n        if ( !this.options.enhanced ) {\n            this.element.addClass( this.options.classes.table );\n        }\n\n        // extend here, assign on refresh > _setHeaders\n        $.extend( this, {\n\n            // Expose headers and allHeaders properties on the widget\n            // headers references the THs within the first TR in the table\n            headers: undefined,\n\n            // allHeaders references headers, plus all THs in the thead, which may\n            // include several rows, or not\n            allHeaders: undefined\n        });\n\n        this._refresh( true );\n    },\n\n    _setHeaders: function() {\n        var trs = this.element.find( \"thead tr\" );\n\n        this.headers = this.element.find( \"tr:eq(0)\" ).children();\n        this.allHeaders = this.headers.add( trs.children() );\n    },\n\n    refresh: function() {\n        this._refresh();\n    },\n\n    rebuild: $.noop,\n\n    _refresh: function( /* create */ ) {\n        var table = this.element,\n            trs = table.find( \"thead tr\" );\n\n        // updating headers on refresh (fixes #5880)\n        this._setHeaders();\n\n        // Iterate over the trs\n        trs.each( function() {\n            var columnCount = 0;\n\n            // Iterate over the children of the tr\n            $( this ).children().each( function() {\n                var span = parseInt( this.getAttribute( \"colspan\" ), 10 ),\n                    selector = \":nth-child(\" + ( columnCount + 1 ) + \")\",\n                    j;\n\n                this.setAttribute( \"data-\" + $.mobile.ns + \"colstart\", columnCount + 1 );\n\n                if ( span ) {\n                    for( j = 0; j < span - 1; j++ ) {\n                        columnCount++;\n                        selector += \", :nth-child(\" + ( columnCount + 1 ) + \")\";\n                    }\n                }\n\n                // Store \"cells\" data on header as a reference to all cells in the\n                // same column as this TH\n                $( this ).jqmData( \"cells\", table.find( \"tr\" ).not( trs.eq( 0 ) ).not( this ).children( selector ) );\n\n                columnCount++;\n            });\n        });\n    }\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", $.mobile.table, {\n    options: {\n        mode: \"columntoggle\",\n        columnBtnTheme: null,\n        columnPopupTheme: null,\n        columnBtnText: \"Columns...\",\n        classes: $.extend( $.mobile.table.prototype.options.classes, {\n            popup: \"ui-table-columntoggle-popup\",\n            columnBtn: \"ui-table-columntoggle-btn\",\n            priorityPrefix: \"ui-table-priority-\",\n            columnToggleTable: \"ui-table-columntoggle\"\n        })\n    },\n\n    _create: function() {\n        this._super();\n\n        if ( this.options.mode !== \"columntoggle\" ) {\n            return;\n        }\n\n        $.extend( this, {\n            _menu: null\n        });\n\n        if ( this.options.enhanced ) {\n            this._menu = $( this.document[ 0 ].getElementById( this._id() + \"-popup\" ) ).children().first();\n            this._addToggles( this._menu, true );\n        } else {\n            this._menu = this._enhanceColToggle();\n            this.element.addClass( this.options.classes.columnToggleTable );\n        }\n\n        this._setupEvents();\n\n        this._setToggleState();\n    },\n\n    _id: function() {\n        return ( this.element.attr( \"id\" ) || ( this.widgetName + this.uuid ) );\n    },\n\n    _setupEvents: function() {\n        //NOTE: inputs are bound in bindToggles,\n        // so it can be called on refresh, too\n\n        // update column toggles on resize\n        this._on( this.window, {\n            throttledresize: \"_setToggleState\"\n        });\n        this._on( this._menu, {\n            \"change input\": \"_menuInputChange\"\n        });\n    },\n\n    _addToggles: function( menu, keep ) {\n        var inputs,\n            checkboxIndex = 0,\n            opts = this.options,\n            container = menu.controlgroup( \"container\" );\n\n        // allow update of menu on refresh (fixes #5880)\n        if ( keep ) {\n            inputs = menu.find( \"input\" );\n        } else {\n            container.empty();\n        }\n\n        // create the hide/show toggles\n        this.headers.not( \"td\" ).each( function() {\n            var input, cells,\n                header = $( this ),\n                priority = $.mobile.getAttribute( this, \"priority\" );\n\n            if ( priority ) {\n                cells = header.add( header.jqmData( \"cells\" ) );\n                cells.addClass( opts.classes.priorityPrefix + priority );\n\n                // Make sure the (new?) checkbox is associated with its header via .jqmData() and\n                // that, vice versa, the header is also associated with the checkbox\n                input = ( keep ? inputs.eq( checkboxIndex++ ) :\n                    $(\"<label><input type='checkbox' checked />\" +\n                        ( header.children( \"abbr\" ).first().attr( \"title\" ) ||\n                            header.text() ) +\n                        \"</label>\" )\n                        .appendTo( container )\n                        .children( 0 )\n                        .checkboxradio( {\n                            theme: opts.columnPopupTheme\n                        }) )\n\n                        // Associate the header with the checkbox\n                        .jqmData( \"header\", header )\n                        .jqmData( \"cells\", cells );\n\n                // Associate the checkbox with the header\n                header.jqmData( \"input\", input );\n            }\n        });\n\n        // set bindings here\n        if ( !keep ) {\n            menu.controlgroup( \"refresh\" );\n        }\n    },\n\n    _menuInputChange: function( evt ) {\n        var input = $( evt.target ),\n            checked = input[ 0 ].checked;\n\n        input.jqmData( \"cells\" )\n            .toggleClass( \"ui-table-cell-hidden\", !checked )\n            .toggleClass( \"ui-table-cell-visible\", checked );\n    },\n\n    _unlockCells: function( cells ) {\n        // allow hide/show via CSS only = remove all toggle-locks\n        cells.removeClass( \"ui-table-cell-hidden ui-table-cell-visible\");\n    },\n\n    _enhanceColToggle: function() {\n        var id , menuButton, popup, menu,\n            table = this.element,\n            opts = this.options,\n            ns = $.mobile.ns,\n            fragment = this.document[ 0 ].createDocumentFragment();\n\n        id = this._id() + \"-popup\";\n        menuButton = $( \"<a href='#\" + id + \"' \" +\n            \"class='\" + opts.classes.columnBtn + \" ui-btn \" +\n            \"ui-btn-\" + ( opts.columnBtnTheme || \"a\" ) +\n            \" ui-corner-all ui-shadow ui-mini' \" +\n            \"data-\" + ns + \"rel='popup'>\" + opts.columnBtnText + \"</a>\" );\n        popup = $( \"<div class='\" + opts.classes.popup + \"' id='\" + id + \"'></div>\" );\n        menu = $( \"<fieldset></fieldset>\" ).controlgroup();\n\n        // set extension here, send \"false\" to trigger build/rebuild\n        this._addToggles( menu, false );\n\n        menu.appendTo( popup );\n\n        fragment.appendChild( popup[ 0 ] );\n        fragment.appendChild( menuButton[ 0 ] );\n        table.before( fragment );\n\n        popup.popup();\n\n        return menu;\n    },\n\n    rebuild: function() {\n        this._super();\n\n        if ( this.options.mode === \"columntoggle\" ) {\n            // NOTE: rebuild passes \"false\", while refresh passes \"undefined\"\n            // both refresh the table, but inside addToggles, !false will be true,\n            // so a rebuild call can be indentified\n            this._refresh( false );\n        }\n    },\n\n    _refresh: function( create ) {\n        var headers, hiddenColumns, index;\n\n        // Calling _super() here updates this.headers\n        this._super( create );\n\n        if ( !create && this.options.mode === \"columntoggle\" ) {\n            headers = this.headers;\n            hiddenColumns = [];\n\n            // Find the index of the column header associated with each old checkbox among the\n            // post-refresh headers and, if the header is still there, make sure the corresponding\n            // column will be hidden if the pre-refresh checkbox indicates that the column is\n            // hidden by recording its index in the array of hidden columns.\n            this._menu.find( \"input\" ).each( function() {\n                var input = $( this ),\n                    header = input.jqmData( \"header\" ),\n                    index = headers.index( header[ 0 ] );\n\n                if ( index > -1 && !input.prop( \"checked\" ) ) {\n\n                    // The column header associated with /this/ checkbox is still present in the\n                    // post-refresh table and the checkbox is not checked, so the column associated\n                    // with this column header is currently hidden. Let's record that.\n                    hiddenColumns.push( index );\n                }\n            });\n\n            // columns not being replaced must be cleared from input toggle-locks\n            this._unlockCells( this.element.find( \".ui-table-cell-hidden, \" +\n                \".ui-table-cell-visible\" ) );\n\n            // update columntoggles and cells\n            this._addToggles( this._menu, create );\n\n            // At this point all columns are visible, so uncheck the checkboxes that correspond to\n            // those columns we've found to be hidden\n            for ( index = hiddenColumns.length - 1 ; index > -1 ; index-- ) {\n                headers.eq( hiddenColumns[ index ] ).jqmData( \"input\" )\n                    .prop( \"checked\", false )\n                    .checkboxradio( \"refresh\" )\n                    .trigger( \"change\" );\n            }\n        }\n    },\n\n    _setToggleState: function() {\n        this._menu.find( \"input\" ).each( function() {\n            var checkbox = $( this );\n\n            this.checked = checkbox.jqmData( \"cells\" ).eq( 0 ).css( \"display\" ) === \"table-cell\";\n            checkbox.checkboxradio( \"refresh\" );\n        });\n    },\n\n    _destroy: function() {\n        this._super();\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", $.mobile.table, {\n    options: {\n        mode: \"reflow\",\n        classes: $.extend( $.mobile.table.prototype.options.classes, {\n            reflowTable: \"ui-table-reflow\",\n            cellLabels: \"ui-table-cell-label\"\n        })\n    },\n\n    _create: function() {\n        this._super();\n\n        // If it's not reflow mode, return here.\n        if ( this.options.mode !== \"reflow\" ) {\n            return;\n        }\n\n        if ( !this.options.enhanced ) {\n            this.element.addClass( this.options.classes.reflowTable );\n\n            this._updateReflow();\n        }\n    },\n\n    rebuild: function() {\n        this._super();\n\n        if ( this.options.mode === \"reflow\" ) {\n            this._refresh( false );\n        }\n    },\n\n    _refresh: function( create ) {\n        this._super( create );\n        if ( !create && this.options.mode === \"reflow\" ) {\n            this._updateReflow( );\n        }\n    },\n\n    _updateReflow: function() {\n        var table = this,\n            opts = this.options;\n\n        // get headers in reverse order so that top-level headers are appended last\n        $( table.allHeaders.get().reverse() ).each( function() {\n            var cells = $( this ).jqmData( \"cells\" ),\n                colstart = $.mobile.getAttribute( this, \"colstart\" ),\n                hierarchyClass = cells.not( this ).filter( \"thead th\" ).length && \" ui-table-cell-label-top\",\n                contents = $( this ).clone().contents(),\n                iteration, filter;\n\n                if ( contents.length > 0  ) {\n\n                    if ( hierarchyClass ) {\n                        iteration = parseInt( this.getAttribute( \"colspan\" ), 10 );\n                        filter = \"\";\n\n                        if ( iteration ) {\n                            filter = \"td:nth-child(\"+ iteration +\"n + \" + ( colstart ) +\")\";\n                        }\n\n                        table._addLabels( cells.filter( filter ),\n                            opts.classes.cellLabels + hierarchyClass, contents );\n                    } else {\n                        table._addLabels( cells, opts.classes.cellLabels, contents );\n                    }\n\n                }\n        });\n    },\n\n    _addLabels: function( cells, label, contents ) {\n        if ( contents.length === 1 && contents[ 0 ].nodeName.toLowerCase() === \"abbr\" ) {\n            contents = contents.eq( 0 ).attr( \"title\" );\n        }\n        // .not fixes #6006\n        cells\n            .not( \":has(b.\" + label + \")\" )\n                .prepend( $( \"<b class='\" + label + \"'></b>\" ).append( contents ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// TODO rename filterCallback/deprecate and default to the item itself as the first argument\nvar defaultFilterCallback = function( index, searchValue ) {\n    return ( ( \"\" + ( $.mobile.getAttribute( this, \"filtertext\" ) || $( this ).text() ) )\n        .toLowerCase().indexOf( searchValue ) === -1 );\n};\n\n$.widget( \"mobile.filterable\", {\n\n    initSelector: \":jqmData(filter='true')\",\n\n    options: {\n        filterReveal: false,\n        filterCallback: defaultFilterCallback,\n        enhanced: false,\n        input: null,\n        children: \"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio\"\n    },\n\n    _create: function() {\n        var opts = this.options;\n\n        $.extend( this, {\n            _search: null,\n            _timer: 0\n        });\n\n        this._setInput( opts.input );\n        if ( !opts.enhanced ) {\n            this._filterItems( ( ( this._search && this._search.val() ) || \"\" ).toLowerCase() );\n        }\n    },\n\n    _onKeyUp: function() {\n        var val, lastval,\n            search = this._search;\n\n        if ( search ) {\n            val = search.val().toLowerCase(),\n            lastval = $.mobile.getAttribute( search[ 0 ], \"lastval\" ) + \"\";\n\n            if ( lastval && lastval === val ) {\n                // Execute the handler only once per value change\n                return;\n            }\n\n            if ( this._timer ) {\n                window.clearTimeout( this._timer );\n                this._timer = 0;\n            }\n\n            this._timer = this._delay( function() {\n                if ( this._trigger( \"beforefilter\", null, { input: search } ) === false ) {\n                    return false;\n                }\n\n                // Change val as lastval for next execution\n                search[ 0 ].setAttribute( \"data-\" + $.mobile.ns + \"lastval\", val );\n\n                this._filterItems( val );\n                this._timer = 0;\n            }, 250 );\n        }\n    },\n\n    _getFilterableItems: function() {\n        var elem = this.element,\n            children = this.options.children,\n            items = !children ? { length: 0 }:\n                $.isFunction( children ) ? children():\n                children.nodeName ? $( children ):\n                children.jquery ? children:\n                this.element.find( children );\n\n        if ( items.length === 0 ) {\n            items = elem.children();\n        }\n\n        return items;\n    },\n\n    _filterItems: function( val ) {\n        var idx, callback, length, dst,\n            show = [],\n            hide = [],\n            opts = this.options,\n            filterItems = this._getFilterableItems();\n\n        if ( val != null ) {\n            callback = opts.filterCallback || defaultFilterCallback;\n            length = filterItems.length;\n\n            // Partition the items into those to be hidden and those to be shown\n            for ( idx = 0 ; idx < length ; idx++ ) {\n                dst = ( callback.call( filterItems[ idx ], idx, val ) ) ? hide : show;\n                dst.push( filterItems[ idx ] );\n            }\n        }\n\n        // If nothing is hidden, then the decision whether to hide or show the items\n        // is based on the \"filterReveal\" option.\n        if ( hide.length === 0 ) {\n            filterItems[ ( opts.filterReveal && val.length === 0 ) ?\n                \"addClass\" : \"removeClass\" ]( \"ui-screen-hidden\" );\n        } else {\n            $( hide ).addClass( \"ui-screen-hidden\" );\n            $( show ).removeClass( \"ui-screen-hidden\" );\n        }\n\n        this._refreshChildWidget();\n\n        this._trigger( \"filter\", null, {\n            items: filterItems\n        });\n    },\n\n    // The Default implementation of _refreshChildWidget attempts to call\n    // refresh on collapsibleset, controlgroup, selectmenu, or listview\n    _refreshChildWidget: function() {\n        var widget, idx,\n            recognizedWidgets = [ \"collapsibleset\", \"selectmenu\", \"controlgroup\", \"listview\" ];\n\n        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {\n            widget = recognizedWidgets[ idx ];\n            if ( $.mobile[ widget ] ) {\n                widget = this.element.data( \"mobile-\" + widget );\n                if ( widget && $.isFunction( widget.refresh ) ) {\n                    widget.refresh();\n                }\n            }\n        }\n    },\n\n    // TODO: When the input is not internal, do not even store it in this._search\n    _setInput: function ( selector ) {\n        var search = this._search;\n\n        // Stop a pending filter operation\n        if ( this._timer ) {\n            window.clearTimeout( this._timer );\n            this._timer = 0;\n        }\n\n        if ( search ) {\n            this._off( search, \"keyup change input\" );\n            search = null;\n        }\n\n        if ( selector ) {\n            search = selector.jquery ? selector:\n                selector.nodeName ? $( selector ):\n                this.document.find( selector );\n\n            this._on( search, {\n                keydown: \"_onKeyDown\",\n                keypress: \"_onKeyPress\",\n                keyup: \"_onKeyUp\",\n                change: \"_onKeyUp\",\n                input: \"_onKeyUp\"\n            });\n        }\n\n        this._search = search;\n    },\n\n    // Prevent form submission\n    _onKeyDown: function( event ) {\n        if ( event.keyCode === $.ui.keyCode.ENTER ) {\n            event.preventDefault();\n            this._preventKeyPress = true;\n        }\n    },\n\n    _onKeyPress: function( event ) {\n        if ( this._preventKeyPress ) {\n            event.preventDefault();\n            this._preventKeyPress = false;\n        }\n    },\n\n    _setOptions: function( options ) {\n        var refilter = !( ( options.filterReveal === undefined ) &&\n                ( options.filterCallback === undefined ) &&\n                ( options.children === undefined ) );\n\n        this._super( options );\n\n        if ( options.input !== undefined ) {\n            this._setInput( options.input );\n            refilter = true;\n        }\n\n        if ( refilter ) {\n            this.refresh();\n        }\n    },\n\n    _destroy: function() {\n        var opts = this.options,\n            items = this._getFilterableItems();\n\n        if ( opts.enhanced ) {\n            items.toggleClass( \"ui-screen-hidden\", opts.filterReveal );\n        } else {\n            items.removeClass( \"ui-screen-hidden\" );\n        }\n    },\n\n    refresh: function() {\n        if ( this._timer ) {\n            window.clearTimeout( this._timer );\n            this._timer = 0;\n        }\n        this._filterItems( ( ( this._search && this._search.val() ) || \"\" ).toLowerCase() );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// Create a function that will replace the _setOptions function of a widget,\n// and will pass the options on to the input of the filterable.\nvar replaceSetOptions = function( self, orig ) {\n        return function( options ) {\n            orig.call( this, options );\n            self._syncTextInputOptions( options );\n        };\n    },\n    rDividerListItem = /(^|\\s)ui-li-divider(\\s|$)/,\n    origDefaultFilterCallback = $.mobile.filterable.prototype.options.filterCallback;\n\n// Override the default filter callback with one that does not hide list dividers\n$.mobile.filterable.prototype.options.filterCallback = function( index, searchValue ) {\n    return !this.className.match( rDividerListItem ) &&\n        origDefaultFilterCallback.call( this, index, searchValue );\n};\n\n$.widget( \"mobile.filterable\", $.mobile.filterable, {\n    options: {\n        filterPlaceholder: \"Filter items...\",\n        filterTheme: null\n    },\n\n    _create: function() {\n        var idx, widgetName,\n            elem = this.element,\n            recognizedWidgets = [ \"collapsibleset\", \"selectmenu\", \"controlgroup\", \"listview\" ],\n            createHandlers = {};\n\n        this._super();\n\n        $.extend( this, {\n            _widget: null\n        });\n\n        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {\n            widgetName = recognizedWidgets[ idx ];\n            if ( $.mobile[ widgetName ] ) {\n                if ( this._setWidget( elem.data( \"mobile-\" + widgetName ) ) ) {\n                    break;\n                } else {\n                    createHandlers[ widgetName + \"create\" ] = \"_handleCreate\";\n                }\n            }\n        }\n\n        if ( !this._widget ) {\n            this._on( elem, createHandlers );\n        }\n    },\n\n    _handleCreate: function( evt ) {\n        this._setWidget( this.element.data( \"mobile-\" + evt.type.substring( 0, evt.type.length - 6 ) ) );\n    },\n\n    _trigger: function( type, event, data ) {\n        if ( this._widget && this._widget.widgetFullName === \"mobile-listview\" &&\n            type === \"beforefilter\" ) {\n\n            // Also trigger listviewbeforefilter if this widget is also a listview\n            this._widget._trigger( \"beforefilter\", event, data );\n        }\n\n        // Passing back the response enables calling preventDefault()\n        return this._super( type, event, data );\n    },\n\n    _setWidget: function( widget ) {\n        if ( !this._widget && widget ) {\n            this._widget = widget;\n            this._widget._setOptions = replaceSetOptions( this, this._widget._setOptions );\n        }\n\n        if ( !!this._widget ) {\n            this._syncTextInputOptions( this._widget.options );\n            if ( this._widget.widgetName === \"listview\" ) {\n                this._widget.options.hideDividers = true;\n                this._widget.element.listview( \"refresh\" );\n            }\n        }\n\n        return !!this._widget;\n    },\n\n    _isSearchInternal: function() {\n        return ( this._search && this._search.jqmData( \"ui-filterable-\" + this.uuid + \"-internal\" ) );\n    },\n\n    _setInput: function( selector ) {\n        var opts = this.options,\n            updatePlaceholder = true,\n            textinputOpts = {};\n\n        if ( !selector ) {\n            if ( this._isSearchInternal() ) {\n\n                // Ignore the call to set a new input if the selector goes to falsy and\n                // the current textinput is already of the internally generated variety.\n                return;\n            } else {\n\n                // Generating a new textinput widget. No need to set the placeholder\n                // further down the function.\n                updatePlaceholder = false;\n                selector = $( \"<input \" +\n                    \"data-\" + $.mobile.ns + \"type='search' \" +\n                    \"placeholder='\" + opts.filterPlaceholder + \"'></input>\" )\n                    .jqmData( \"ui-filterable-\" + this.uuid + \"-internal\", true );\n                $( \"<form class='ui-filterable'></form>\" )\n                    .append( selector )\n                    .submit( function( evt ) {\n                        evt.preventDefault();\n                        selector.blur();\n                    })\n                    .insertBefore( this.element );\n                if ( $.mobile.textinput ) {\n                    if ( this.options.filterTheme != null ) {\n                        textinputOpts[ \"theme\" ] = opts.filterTheme;\n                    }\n\n                    selector.textinput( textinputOpts );\n                }\n            }\n        }\n\n        this._super( selector );\n\n        if ( this._isSearchInternal() && updatePlaceholder ) {\n            this._search.attr( \"placeholder\", this.options.filterPlaceholder );\n        }\n    },\n\n    _setOptions: function( options ) {\n        var ret = this._super( options );\n\n        // Need to set the filterPlaceholder after having established the search input\n        if ( options.filterPlaceholder !== undefined ) {\n            if ( this._isSearchInternal() ) {\n                this._search.attr( \"placeholder\", options.filterPlaceholder );\n            }\n        }\n\n        if ( options.filterTheme !== undefined && this._search && $.mobile.textinput ) {\n            this._search.textinput( \"option\", \"theme\", options.filterTheme );\n        }\n\n        return ret;\n    },\n\n    // The listview implementation accompanying this filterable backcompat layer will call\n    // filterable.refresh() after it's done refreshing the listview to make sure the filterable\n    // filters out any new items added. However, when the listview refresh has been initiated by\n    // the filterable itself, then such filtering has already taken place, and calling the\n    // filterable's refresh() method will cause an infinite recursion. We stop this by setting a\n    // flag that will cause the filterable's refresh() method to short-circuit.\n    _refreshChildWidget: function() {\n        this._refreshingChildWidget = true;\n        this._superApply( arguments );\n        this._refreshingChildWidget = false;\n    },\n\n    refresh: function() {\n        if ( !this._refreshingChildWidget ) {\n            this._superApply( arguments );\n        }\n    },\n\n    _destroy: function() {\n        if ( this._isSearchInternal() ) {\n            this._search.remove();\n        }\n        this._super();\n    },\n\n    _syncTextInputOptions: function( options ) {\n        var idx,\n            textinputOptions = {};\n\n        // We only sync options if the filterable's textinput is of the internally\n        // generated variety, rather than one specified by the user.\n        if ( this._isSearchInternal() && $.mobile.textinput ) {\n\n            // Apply only the options understood by textinput\n            for ( idx in $.mobile.textinput.prototype.options ) {\n                if ( options[ idx ] !== undefined ) {\n                    if ( idx === \"theme\" && this.options.filterTheme != null ) {\n                        textinputOptions[ idx ] = this.options.filterTheme;\n                    } else {\n                        textinputOptions[ idx ] = options[ idx ];\n                    }\n                }\n            }\n            this._search.textinput( \"option\", textinputOptions );\n        }\n    }\n});\n\n// Instantiate a filterable on a listview that has the data-filter=\"true\" attribute\n// This is not necessary for static content, because the auto-enhance takes care of instantiating\n// the filterable upon encountering data-filter=\"true\". However, because of 1.3.x it is expected\n// that a listview with data-filter=\"true\" will be filterable even if you just instantiate a\n// listview on it. The extension below ensures that this continues to happen in 1.4.x.\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        filter: false\n    },\n    _create: function() {\n        if ( this.options.filter === true &&\n                !this.element.data( \"mobile-filterable\" ) ) {\n            this.element.filterable();\n        }\n        return this._super();\n    },\n\n    refresh: function() {\n        var filterable;\n\n        this._superApply( arguments );\n\n        if ( this.options.filter === true ) {\n            filterable = this.element.data( \"mobile-filterable\" );\n\n            if ( filterable ) {\n                filterable.refresh();\n            }\n        }\n    }\n});\n\n})( jQuery );\n\n/*!\n * jQuery UI Tabs fadf2b312a05040436451c64bbfaf4814bc62c56\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tabs/\n *\n * Depends:\n *    jquery.ui.core.js\n *    jquery.ui.widget.js\n */\n(function( $, undefined ) {\n\nvar tabId = 0,\n    rhash = /#.*$/;\n\nfunction getNextTabId() {\n    return ++tabId;\n}\n\nfunction isLocal( anchor ) {\n    return anchor.hash.length > 1 &&\n        decodeURIComponent( anchor.href.replace( rhash, \"\" ) ) ===\n            decodeURIComponent( location.href.replace( rhash, \"\" ) );\n}\n\n$.widget( \"ui.tabs\", {\n    version: \"fadf2b312a05040436451c64bbfaf4814bc62c56\",\n    delay: 300,\n    options: {\n        active: null,\n        collapsible: false,\n        event: \"click\",\n        heightStyle: \"content\",\n        hide: null,\n        show: null,\n\n        // callbacks\n        activate: null,\n        beforeActivate: null,\n        beforeLoad: null,\n        load: null\n    },\n\n    _create: function() {\n        var that = this,\n            options = this.options;\n\n        this.running = false;\n\n        this.element\n            .addClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all\" )\n            .toggleClass( \"ui-tabs-collapsible\", options.collapsible )\n            // Prevent users from focusing disabled tabs via click\n            .delegate( \".ui-tabs-nav > li\", \"mousedown\" + this.eventNamespace, function( event ) {\n                if ( $( this ).is( \".ui-state-disabled\" ) ) {\n                    event.preventDefault();\n                }\n            })\n            // support: IE <9\n            // Preventing the default action in mousedown doesn't prevent IE\n            // from focusing the element, so if the anchor gets focused, blur.\n            // We don't have to worry about focusing the previously focused\n            // element since clicking on a non-focusable element should focus\n            // the body anyway.\n            .delegate( \".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function() {\n                if ( $( this ).closest( \"li\" ).is( \".ui-state-disabled\" ) ) {\n                    this.blur();\n                }\n            });\n\n        this._processTabs();\n        options.active = this._initialActive();\n\n        // Take disabling tabs via class attribute from HTML\n        // into account and update option properly.\n        if ( $.isArray( options.disabled ) ) {\n            options.disabled = $.unique( options.disabled.concat(\n                $.map( this.tabs.filter( \".ui-state-disabled\" ), function( li ) {\n                    return that.tabs.index( li );\n                })\n            ) ).sort();\n        }\n\n        // check for length avoids error when initializing empty list\n        if ( this.options.active !== false && this.anchors.length ) {\n            this.active = this._findActive( options.active );\n        } else {\n            this.active = $();\n        }\n\n        this._refresh();\n\n        if ( this.active.length ) {\n            this.load( options.active );\n        }\n    },\n\n    _initialActive: function() {\n        var active = this.options.active,\n            collapsible = this.options.collapsible,\n            locationHash = location.hash.substring( 1 );\n\n        if ( active === null ) {\n            // check the fragment identifier in the URL\n            if ( locationHash ) {\n                this.tabs.each(function( i, tab ) {\n                    if ( $( tab ).attr( \"aria-controls\" ) === locationHash ) {\n                        active = i;\n                        return false;\n                    }\n                });\n            }\n\n            // check for a tab marked active via a class\n            if ( active === null ) {\n                active = this.tabs.index( this.tabs.filter( \".ui-tabs-active\" ) );\n            }\n\n            // no active tab, set to false\n            if ( active === null || active === -1 ) {\n                active = this.tabs.length ? 0 : false;\n            }\n        }\n\n        // handle numbers: negative, out of range\n        if ( active !== false ) {\n            active = this.tabs.index( this.tabs.eq( active ) );\n            if ( active === -1 ) {\n                active = collapsible ? false : 0;\n            }\n        }\n\n        // don't allow collapsible: false and active: false\n        if ( !collapsible && active === false && this.anchors.length ) {\n            active = 0;\n        }\n\n        return active;\n    },\n\n    _getCreateEventData: function() {\n        return {\n            tab: this.active,\n            panel: !this.active.length ? $() : this._getPanelForTab( this.active )\n        };\n    },\n\n    _tabKeydown: function( event ) {\n        var focusedTab = $( this.document[0].activeElement ).closest( \"li\" ),\n            selectedIndex = this.tabs.index( focusedTab ),\n            goingForward = true;\n\n        if ( this._handlePageNav( event ) ) {\n            return;\n        }\n\n        switch ( event.keyCode ) {\n            case $.ui.keyCode.RIGHT:\n            case $.ui.keyCode.DOWN:\n                selectedIndex++;\n                break;\n            case $.ui.keyCode.UP:\n            case $.ui.keyCode.LEFT:\n                goingForward = false;\n                selectedIndex--;\n                break;\n            case $.ui.keyCode.END:\n                selectedIndex = this.anchors.length - 1;\n                break;\n            case $.ui.keyCode.HOME:\n                selectedIndex = 0;\n                break;\n            case $.ui.keyCode.SPACE:\n                // Activate only, no collapsing\n                event.preventDefault();\n                clearTimeout( this.activating );\n                this._activate( selectedIndex );\n                return;\n            case $.ui.keyCode.ENTER:\n                // Toggle (cancel delayed activation, allow collapsing)\n                event.preventDefault();\n                clearTimeout( this.activating );\n                // Determine if we should collapse or activate\n                this._activate( selectedIndex === this.options.active ? false : selectedIndex );\n                return;\n            default:\n                return;\n        }\n\n        // Focus the appropriate tab, based on which key was pressed\n        event.preventDefault();\n        clearTimeout( this.activating );\n        selectedIndex = this._focusNextTab( selectedIndex, goingForward );\n\n        // Navigating with control key will prevent automatic activation\n        if ( !event.ctrlKey ) {\n            // Update aria-selected immediately so that AT think the tab is already selected.\n            // Otherwise AT may confuse the user by stating that they need to activate the tab,\n            // but the tab will already be activated by the time the announcement finishes.\n            focusedTab.attr( \"aria-selected\", \"false\" );\n            this.tabs.eq( selectedIndex ).attr( \"aria-selected\", \"true\" );\n\n            this.activating = this._delay(function() {\n                this.option( \"active\", selectedIndex );\n            }, this.delay );\n        }\n    },\n\n    _panelKeydown: function( event ) {\n        if ( this._handlePageNav( event ) ) {\n            return;\n        }\n\n        // Ctrl+up moves focus to the current tab\n        if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {\n            event.preventDefault();\n            this.active.focus();\n        }\n    },\n\n    // Alt+page up/down moves focus to the previous/next tab (and activates)\n    _handlePageNav: function( event ) {\n        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {\n            this._activate( this._focusNextTab( this.options.active - 1, false ) );\n            return true;\n        }\n        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {\n            this._activate( this._focusNextTab( this.options.active + 1, true ) );\n            return true;\n        }\n    },\n\n    _findNextTab: function( index, goingForward ) {\n        var lastTabIndex = this.tabs.length - 1;\n\n        function constrain() {\n            if ( index > lastTabIndex ) {\n                index = 0;\n            }\n            if ( index < 0 ) {\n                index = lastTabIndex;\n            }\n            return index;\n        }\n\n        while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {\n            index = goingForward ? index + 1 : index - 1;\n        }\n\n        return index;\n    },\n\n    _focusNextTab: function( index, goingForward ) {\n        index = this._findNextTab( index, goingForward );\n        this.tabs.eq( index ).focus();\n        return index;\n    },\n\n    _setOption: function( key, value ) {\n        if ( key === \"active\" ) {\n            // _activate() will handle invalid values and update this.options\n            this._activate( value );\n            return;\n        }\n\n        if ( key === \"disabled\" ) {\n            // don't use the widget factory's disabled handling\n            this._setupDisabled( value );\n            return;\n        }\n\n        this._super( key, value);\n\n        if ( key === \"collapsible\" ) {\n            this.element.toggleClass( \"ui-tabs-collapsible\", value );\n            // Setting collapsible: false while collapsed; open first panel\n            if ( !value && this.options.active === false ) {\n                this._activate( 0 );\n            }\n        }\n\n        if ( key === \"event\" ) {\n            this._setupEvents( value );\n        }\n\n        if ( key === \"heightStyle\" ) {\n            this._setupHeightStyle( value );\n        }\n    },\n\n    _tabId: function( tab ) {\n        return tab.attr( \"aria-controls\" ) || \"ui-tabs-\" + getNextTabId();\n    },\n\n    _sanitizeSelector: function( hash ) {\n        return hash ? hash.replace( /[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\" ) : \"\";\n    },\n\n    refresh: function() {\n        var options = this.options,\n            lis = this.tablist.children( \":has(a[href])\" );\n\n        // get disabled tabs from class attribute from HTML\n        // this will get converted to a boolean if needed in _refresh()\n        options.disabled = $.map( lis.filter( \".ui-state-disabled\" ), function( tab ) {\n            return lis.index( tab );\n        });\n\n        this._processTabs();\n\n        // was collapsed or no tabs\n        if ( options.active === false || !this.anchors.length ) {\n            options.active = false;\n            this.active = $();\n        // was active, but active tab is gone\n        } else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {\n            // all remaining tabs are disabled\n            if ( this.tabs.length === options.disabled.length ) {\n                options.active = false;\n                this.active = $();\n            // activate previous tab\n            } else {\n                this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );\n            }\n        // was active, active tab still exists\n        } else {\n            // make sure active index is correct\n            options.active = this.tabs.index( this.active );\n        }\n\n        this._refresh();\n    },\n\n    _refresh: function() {\n        this._setupDisabled( this.options.disabled );\n        this._setupEvents( this.options.event );\n        this._setupHeightStyle( this.options.heightStyle );\n\n        this.tabs.not( this.active ).attr({\n            \"aria-selected\": \"false\",\n            tabIndex: -1\n        });\n        this.panels.not( this._getPanelForTab( this.active ) )\n            .hide()\n            .attr({\n                \"aria-expanded\": \"false\",\n                \"aria-hidden\": \"true\"\n            });\n\n        // Make sure one tab is in the tab order\n        if ( !this.active.length ) {\n            this.tabs.eq( 0 ).attr( \"tabIndex\", 0 );\n        } else {\n            this.active\n                .addClass( \"ui-tabs-active ui-state-active\" )\n                .attr({\n                    \"aria-selected\": \"true\",\n                    tabIndex: 0\n                });\n            this._getPanelForTab( this.active )\n                .show()\n                .attr({\n                    \"aria-expanded\": \"true\",\n                    \"aria-hidden\": \"false\"\n                });\n        }\n    },\n\n    _processTabs: function() {\n        var that = this;\n\n        this.tablist = this._getList()\n            .addClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n            .attr( \"role\", \"tablist\" );\n\n        this.tabs = this.tablist.find( \"> li:has(a[href])\" )\n            .addClass( \"ui-state-default ui-corner-top\" )\n            .attr({\n                role: \"tab\",\n                tabIndex: -1\n            });\n\n        this.anchors = this.tabs.map(function() {\n                return $( \"a\", this )[ 0 ];\n            })\n            .addClass( \"ui-tabs-anchor\" )\n            .attr({\n                role: \"presentation\",\n                tabIndex: -1\n            });\n\n        this.panels = $();\n\n        this.anchors.each(function( i, anchor ) {\n            var selector, panel, panelId,\n                anchorId = $( anchor ).uniqueId().attr( \"id\" ),\n                tab = $( anchor ).closest( \"li\" ),\n                originalAriaControls = tab.attr( \"aria-controls\" );\n\n            // inline tab\n            if ( isLocal( anchor ) ) {\n                selector = anchor.hash;\n                panel = that.element.find( that._sanitizeSelector( selector ) );\n            // remote tab\n            } else {\n                panelId = that._tabId( tab );\n                selector = \"#\" + panelId;\n                panel = that.element.find( selector );\n                if ( !panel.length ) {\n                    panel = that._createPanel( panelId );\n                    panel.insertAfter( that.panels[ i - 1 ] || that.tablist );\n                }\n                panel.attr( \"aria-live\", \"polite\" );\n            }\n\n            if ( panel.length) {\n                that.panels = that.panels.add( panel );\n            }\n            if ( originalAriaControls ) {\n                tab.data( \"ui-tabs-aria-controls\", originalAriaControls );\n            }\n            tab.attr({\n                \"aria-controls\": selector.substring( 1 ),\n                \"aria-labelledby\": anchorId\n            });\n            panel.attr( \"aria-labelledby\", anchorId );\n        });\n\n        this.panels\n            .addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n            .attr( \"role\", \"tabpanel\" );\n    },\n\n    // allow overriding how to find the list for rare usage scenarios (#7715)\n    _getList: function() {\n        return this.element.find( \"ol,ul\" ).eq( 0 );\n    },\n\n    _createPanel: function( id ) {\n        return $( \"<div>\" )\n            .attr( \"id\", id )\n            .addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n            .data( \"ui-tabs-destroy\", true );\n    },\n\n    _setupDisabled: function( disabled ) {\n        if ( $.isArray( disabled ) ) {\n            if ( !disabled.length ) {\n                disabled = false;\n            } else if ( disabled.length === this.anchors.length ) {\n                disabled = true;\n            }\n        }\n\n        // disable tabs\n        for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {\n            if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {\n                $( li )\n                    .addClass( \"ui-state-disabled\" )\n                    .attr( \"aria-disabled\", \"true\" );\n            } else {\n                $( li )\n                    .removeClass( \"ui-state-disabled\" )\n                    .removeAttr( \"aria-disabled\" );\n            }\n        }\n\n        this.options.disabled = disabled;\n    },\n\n    _setupEvents: function( event ) {\n        var events = {\n            click: function( event ) {\n                event.preventDefault();\n            }\n        };\n        if ( event ) {\n            $.each( event.split(\" \"), function( index, eventName ) {\n                events[ eventName ] = \"_eventHandler\";\n            });\n        }\n\n        this._off( this.anchors.add( this.tabs ).add( this.panels ) );\n        this._on( this.anchors, events );\n        this._on( this.tabs, { keydown: \"_tabKeydown\" } );\n        this._on( this.panels, { keydown: \"_panelKeydown\" } );\n\n        this._focusable( this.tabs );\n        this._hoverable( this.tabs );\n    },\n\n    _setupHeightStyle: function( heightStyle ) {\n        var maxHeight,\n            parent = this.element.parent();\n\n        if ( heightStyle === \"fill\" ) {\n            maxHeight = parent.height();\n            maxHeight -= this.element.outerHeight() - this.element.height();\n\n            this.element.siblings( \":visible\" ).each(function() {\n                var elem = $( this ),\n                    position = elem.css( \"position\" );\n\n                if ( position === \"absolute\" || position === \"fixed\" ) {\n                    return;\n                }\n                maxHeight -= elem.outerHeight( true );\n            });\n\n            this.element.children().not( this.panels ).each(function() {\n                maxHeight -= $( this ).outerHeight( true );\n            });\n\n            this.panels.each(function() {\n                $( this ).height( Math.max( 0, maxHeight -\n                    $( this ).innerHeight() + $( this ).height() ) );\n            })\n            .css( \"overflow\", \"auto\" );\n        } else if ( heightStyle === \"auto\" ) {\n            maxHeight = 0;\n            this.panels.each(function() {\n                maxHeight = Math.max( maxHeight, $( this ).height( \"\" ).height() );\n            }).height( maxHeight );\n        }\n    },\n\n    _eventHandler: function( event ) {\n        var options = this.options,\n            active = this.active,\n            anchor = $( event.currentTarget ),\n            tab = anchor.closest( \"li\" ),\n            clickedIsActive = tab[ 0 ] === active[ 0 ],\n            collapsing = clickedIsActive && options.collapsible,\n            toShow = collapsing ? $() : this._getPanelForTab( tab ),\n            toHide = !active.length ? $() : this._getPanelForTab( active ),\n            eventData = {\n                oldTab: active,\n                oldPanel: toHide,\n                newTab: collapsing ? $() : tab,\n                newPanel: toShow\n            };\n\n        event.preventDefault();\n\n        if ( tab.hasClass( \"ui-state-disabled\" ) ||\n                // tab is already loading\n                tab.hasClass( \"ui-tabs-loading\" ) ||\n                // can't switch durning an animation\n                this.running ||\n                // click on active header, but not collapsible\n                ( clickedIsActive && !options.collapsible ) ||\n                // allow canceling activation\n                ( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n            return;\n        }\n\n        options.active = collapsing ? false : this.tabs.index( tab );\n\n        this.active = clickedIsActive ? $() : tab;\n        if ( this.xhr ) {\n            this.xhr.abort();\n        }\n\n        if ( !toHide.length && !toShow.length ) {\n            $.error( \"jQuery UI Tabs: Mismatching fragment identifier.\" );\n        }\n\n        if ( toShow.length ) {\n            this.load( this.tabs.index( tab ), event );\n        }\n        this._toggle( event, eventData );\n    },\n\n    // handles show/hide for selecting tabs\n    _toggle: function( event, eventData ) {\n        var that = this,\n            toShow = eventData.newPanel,\n            toHide = eventData.oldPanel;\n\n        this.running = true;\n\n        function complete() {\n            that.running = false;\n            that._trigger( \"activate\", event, eventData );\n        }\n\n        function show() {\n            eventData.newTab.closest( \"li\" ).addClass( \"ui-tabs-active ui-state-active\" );\n\n            if ( toShow.length && that.options.show ) {\n                that._show( toShow, that.options.show, complete );\n            } else {\n                toShow.show();\n                complete();\n            }\n        }\n\n        // start out by hiding, then showing, then completing\n        if ( toHide.length && this.options.hide ) {\n            this._hide( toHide, this.options.hide, function() {\n                eventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n                show();\n            });\n        } else {\n            eventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n            toHide.hide();\n            show();\n        }\n\n        toHide.attr({\n            \"aria-expanded\": \"false\",\n            \"aria-hidden\": \"true\"\n        });\n        eventData.oldTab.attr( \"aria-selected\", \"false\" );\n        // If we're switching tabs, remove the old tab from the tab order.\n        // If we're opening from collapsed state, remove the previous tab from the tab order.\n        // If we're collapsing, then keep the collapsing tab in the tab order.\n        if ( toShow.length && toHide.length ) {\n            eventData.oldTab.attr( \"tabIndex\", -1 );\n        } else if ( toShow.length ) {\n            this.tabs.filter(function() {\n                return $( this ).attr( \"tabIndex\" ) === 0;\n            })\n            .attr( \"tabIndex\", -1 );\n        }\n\n        toShow.attr({\n            \"aria-expanded\": \"true\",\n            \"aria-hidden\": \"false\"\n        });\n        eventData.newTab.attr({\n            \"aria-selected\": \"true\",\n            tabIndex: 0\n        });\n    },\n\n    _activate: function( index ) {\n        var anchor,\n            active = this._findActive( index );\n\n        // trying to activate the already active panel\n        if ( active[ 0 ] === this.active[ 0 ] ) {\n            return;\n        }\n\n        // trying to collapse, simulate a click on the current active header\n        if ( !active.length ) {\n            active = this.active;\n        }\n\n        anchor = active.find( \".ui-tabs-anchor\" )[ 0 ];\n        this._eventHandler({\n            target: anchor,\n            currentTarget: anchor,\n            preventDefault: $.noop\n        });\n    },\n\n    _findActive: function( index ) {\n        return index === false ? $() : this.tabs.eq( index );\n    },\n\n    _getIndex: function( index ) {\n        // meta-function to give users option to provide a href string instead of a numerical index.\n        if ( typeof index === \"string\" ) {\n            index = this.anchors.index( this.anchors.filter( \"[href$='\" + index + \"']\" ) );\n        }\n\n        return index;\n    },\n\n    _destroy: function() {\n        if ( this.xhr ) {\n            this.xhr.abort();\n        }\n\n        this.element.removeClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\" );\n\n        this.tablist\n            .removeClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n            .removeAttr( \"role\" );\n\n        this.anchors\n            .removeClass( \"ui-tabs-anchor\" )\n            .removeAttr( \"role\" )\n            .removeAttr( \"tabIndex\" )\n            .removeUniqueId();\n\n        this.tabs.add( this.panels ).each(function() {\n            if ( $.data( this, \"ui-tabs-destroy\" ) ) {\n                $( this ).remove();\n            } else {\n                $( this )\n                    .removeClass( \"ui-state-default ui-state-active ui-state-disabled \" +\n                        \"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\" )\n                    .removeAttr( \"tabIndex\" )\n                    .removeAttr( \"aria-live\" )\n                    .removeAttr( \"aria-busy\" )\n                    .removeAttr( \"aria-selected\" )\n                    .removeAttr( \"aria-labelledby\" )\n                    .removeAttr( \"aria-hidden\" )\n                    .removeAttr( \"aria-expanded\" )\n                    .removeAttr( \"role\" );\n            }\n        });\n\n        this.tabs.each(function() {\n            var li = $( this ),\n                prev = li.data( \"ui-tabs-aria-controls\" );\n            if ( prev ) {\n                li\n                    .attr( \"aria-controls\", prev )\n                    .removeData( \"ui-tabs-aria-controls\" );\n            } else {\n                li.removeAttr( \"aria-controls\" );\n            }\n        });\n\n        this.panels.show();\n\n        if ( this.options.heightStyle !== \"content\" ) {\n            this.panels.css( \"height\", \"\" );\n        }\n    },\n\n    enable: function( index ) {\n        var disabled = this.options.disabled;\n        if ( disabled === false ) {\n            return;\n        }\n\n        if ( index === undefined ) {\n            disabled = false;\n        } else {\n            index = this._getIndex( index );\n            if ( $.isArray( disabled ) ) {\n                disabled = $.map( disabled, function( num ) {\n                    return num !== index ? num : null;\n                });\n            } else {\n                disabled = $.map( this.tabs, function( li, num ) {\n                    return num !== index ? num : null;\n                });\n            }\n        }\n        this._setupDisabled( disabled );\n    },\n\n    disable: function( index ) {\n        var disabled = this.options.disabled;\n        if ( disabled === true ) {\n            return;\n        }\n\n        if ( index === undefined ) {\n            disabled = true;\n        } else {\n            index = this._getIndex( index );\n            if ( $.inArray( index, disabled ) !== -1 ) {\n                return;\n            }\n            if ( $.isArray( disabled ) ) {\n                disabled = $.merge( [ index ], disabled ).sort();\n            } else {\n                disabled = [ index ];\n            }\n        }\n        this._setupDisabled( disabled );\n    },\n\n    load: function( index, event ) {\n        index = this._getIndex( index );\n        var that = this,\n            tab = this.tabs.eq( index ),\n            anchor = tab.find( \".ui-tabs-anchor\" ),\n            panel = this._getPanelForTab( tab ),\n            eventData = {\n                tab: tab,\n                panel: panel\n            };\n\n        // not remote\n        if ( isLocal( anchor[ 0 ] ) ) {\n            return;\n        }\n\n        this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );\n\n        // support: jQuery <1.8\n        // jQuery <1.8 returns false if the request is canceled in beforeSend,\n        // but as of 1.8, $.ajax() always returns a jqXHR object.\n        if ( this.xhr && this.xhr.statusText !== \"canceled\" ) {\n            tab.addClass( \"ui-tabs-loading\" );\n            panel.attr( \"aria-busy\", \"true\" );\n\n            this.xhr\n                .success(function( response ) {\n                    // support: jQuery <1.8\n                    // http://bugs.jquery.com/ticket/11778\n                    setTimeout(function() {\n                        panel.html( response );\n                        that._trigger( \"load\", event, eventData );\n                    }, 1 );\n                })\n                .complete(function( jqXHR, status ) {\n                    // support: jQuery <1.8\n                    // http://bugs.jquery.com/ticket/11778\n                    setTimeout(function() {\n                        if ( status === \"abort\" ) {\n                            that.panels.stop( false, true );\n                        }\n\n                        tab.removeClass( \"ui-tabs-loading\" );\n                        panel.removeAttr( \"aria-busy\" );\n\n                        if ( jqXHR === that.xhr ) {\n                            delete that.xhr;\n                        }\n                    }, 1 );\n                });\n        }\n    },\n\n    _ajaxSettings: function( anchor, event, eventData ) {\n        var that = this;\n        return {\n            url: anchor.attr( \"href\" ),\n            beforeSend: function( jqXHR, settings ) {\n                return that._trigger( \"beforeLoad\", event,\n                    $.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );\n            }\n        };\n    },\n\n    _getPanelForTab: function( tab ) {\n        var id = $( tab ).attr( \"aria-controls\" );\n        return this.element.find( this._sanitizeSelector( \"#\" + id ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n})( jQuery );\n\n(function( $, window ) {\n\n    $.mobile.iosorientationfixEnabled = true;\n\n    // This fix addresses an iOS bug, so return early if the UA claims it's something else.\n    var ua = navigator.userAgent,\n        zoom,\n        evt, x, y, z, aig;\n    if ( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test( ua ) && ua.indexOf( \"AppleWebKit\" ) > -1 ) ) {\n        $.mobile.iosorientationfixEnabled = false;\n        return;\n    }\n\n    zoom = $.mobile.zoom;\n\n    function checkTilt( e ) {\n        evt = e.originalEvent;\n        aig = evt.accelerationIncludingGravity;\n\n        x = Math.abs( aig.x );\n        y = Math.abs( aig.y );\n        z = Math.abs( aig.z );\n\n        // If portrait orientation and in one of the danger zones\n        if ( !window.orientation && ( x > 7 || ( ( z > 6 && y < 8 || z < 8 && y > 6 ) && x > 5 ) ) ) {\n                if ( zoom.enabled ) {\n                    zoom.disable();\n                }\n        }    else if ( !zoom.enabled ) {\n                zoom.enable();\n        }\n    }\n\n    $.mobile.document.on( \"mobileinit\", function() {\n        if ( $.mobile.iosorientationfixEnabled ) {\n            $.mobile.window\n                .bind( \"orientationchange.iosorientationfix\", zoom.enable )\n                .bind( \"devicemotion.iosorientationfix\", checkTilt );\n        }\n    });\n\n}( jQuery, this ));\n\n(function( $, window, undefined ) {\n    var    $html = $( \"html\" ),\n        $window = $.mobile.window;\n\n    //remove initial build class (only present on first pageshow)\n    function hideRenderingClass() {\n        $html.removeClass( \"ui-mobile-rendering\" );\n    }\n\n    // trigger mobileinit event - useful hook for configuring $.mobile settings before they're used\n    $( window.document ).trigger( \"mobileinit\" );\n\n    // support conditions\n    // if device support condition(s) aren't met, leave things as they are -> a basic, usable experience,\n    // otherwise, proceed with the enhancements\n    if ( !$.mobile.gradeA() ) {\n        return;\n    }\n\n    // override ajaxEnabled on platforms that have known conflicts with hash history updates\n    // or generally work better browsing in regular http for full page refreshes (BB5, Opera Mini)\n    if ( $.mobile.ajaxBlacklist ) {\n        $.mobile.ajaxEnabled = false;\n    }\n\n    // Add mobile, initial load \"rendering\" classes to docEl\n    $html.addClass( \"ui-mobile ui-mobile-rendering\" );\n\n    // This is a fallback. If anything goes wrong (JS errors, etc), or events don't fire,\n    // this ensures the rendering class is removed after 5 seconds, so content is visible and accessible\n    setTimeout( hideRenderingClass, 5000 );\n\n    $.extend( $.mobile, {\n        // find and enhance the pages in the dom and transition to the first page.\n        initializePage: function() {\n            // find present pages\n            var path = $.mobile.path,\n                $pages = $( \":jqmData(role='page'), :jqmData(role='dialog')\" ),\n                hash = path.stripHash( path.stripQueryParams(path.parseLocation().hash) ),\n                theLocation = $.mobile.path.parseLocation(),\n                hashPage = hash ? document.getElementById( hash ) : undefined;\n\n            // if no pages are found, create one with body's inner html\n            if ( !$pages.length ) {\n                $pages = $( \"body\" ).wrapInner( \"<div data-\" + $.mobile.ns + \"role='page'></div>\" ).children( 0 );\n            }\n\n            // add dialogs, set data-url attrs\n            $pages.each(function() {\n                var $this = $( this );\n\n                // unless the data url is already set set it to the pathname\n                if ( !$this[ 0 ].getAttribute( \"data-\" + $.mobile.ns + \"url\" ) ) {\n                    $this.attr( \"data-\" + $.mobile.ns + \"url\", $this.attr( \"id\" ) ||\n                        path.convertUrlToDataUrl( theLocation.pathname + theLocation.search ) );\n                }\n            });\n\n            // define first page in dom case one backs out to the directory root (not always the first page visited, but defined as fallback)\n            $.mobile.firstPage = $pages.first();\n\n            // define page container\n            $.mobile.pageContainer = $.mobile.firstPage\n                .parent()\n                .addClass( \"ui-mobile-viewport\" )\n                .pagecontainer();\n\n            // initialize navigation events now, after mobileinit has occurred and the page container\n            // has been created but before the rest of the library is alerted to that fact\n            $.mobile.navreadyDeferred.resolve();\n\n            // alert listeners that the pagecontainer has been determined for binding\n            // to events triggered on it\n            $window.trigger( \"pagecontainercreate\" );\n\n            // cue page loading message\n            $.mobile.loading( \"show\" );\n\n            //remove initial build class (only present on first pageshow)\n            hideRenderingClass();\n\n            // if hashchange listening is disabled, there's no hash deeplink,\n            // the hash is not valid (contains more than one # or does not start with #)\n            // or there is no page with that hash, change to the first page in the DOM\n            // Remember, however, that the hash can also be a path!\n            if ( ! ( $.mobile.hashListeningEnabled &&\n                $.mobile.path.isHashValid( location.hash ) &&\n                ( $( hashPage ).is( \":jqmData(role='page')\" ) ||\n                    $.mobile.path.isPath( hash ) ||\n                    hash === $.mobile.dialogHashKey ) ) ) {\n\n                // make sure to set initial popstate state if it exists\n                // so that navigation back to the initial page works properly\n                if ( $.event.special.navigate.isPushStateEnabled() ) {\n                    $.mobile.navigate.navigator.squash( path.parseLocation().href );\n                }\n\n                $.mobile.changePage( $.mobile.firstPage, {\n                    transition: \"none\",\n                    reverse: true,\n                    changeHash: false,\n                    fromHashChange: true\n                });\n            } else {\n                // trigger hashchange or navigate to squash and record the correct\n                // history entry for an initial hash path\n                if ( !$.event.special.navigate.isPushStateEnabled() ) {\n                    $window.trigger( \"hashchange\", [true] );\n                } else {\n                    // TODO figure out how to simplify this interaction with the initial history entry\n                    // at the bottom js/navigate/navigate.js\n                    $.mobile.navigate.history.stack = [];\n                    $.mobile.navigate( $.mobile.path.isPath( location.hash ) ? location.hash : location.href );\n                }\n            }\n        }\n    });\n\n    $(function() {\n        //Run inlineSVG support test\n        $.support.inlineSVG();\n\n        // check which scrollTop value should be used by scrolling to 1 immediately at domready\n        // then check what the scroll top is. Android will report 0... others 1\n        // note that this initial scroll won't hide the address bar. It's just for the check.\n\n        // hide iOS browser chrome on load if hideUrlBar is true this is to try and do it as soon as possible\n        if ( $.mobile.hideUrlBar ) {\n            window.scrollTo( 0, 1 );\n        }\n\n        // if defaultHomeScroll hasn't been set yet, see if scrollTop is 1\n        // it should be 1 in most browsers, but android treats 1 as 0 (for hiding addr bar)\n        // so if it's 1, use 0 from now on\n        $.mobile.defaultHomeScroll = ( !$.support.scrollTop || $.mobile.window.scrollTop() === 1 ) ? 0 : 1;\n\n        //dom-ready inits\n        if ( $.mobile.autoInitializePage ) {\n            $.mobile.initializePage();\n        }\n\n        // window load event\n        // hide iOS browser chrome on load if hideUrlBar is true this is as fall back incase we were too early before\n        if ( $.mobile.hideUrlBar ) {\n            $window.load( $.mobile.silentScroll );\n        }\n\n        if ( !$.support.cssPointerEvents ) {\n            // IE and Opera don't support CSS pointer-events: none that we use to disable link-based buttons\n            // by adding the 'ui-disabled' class to them. Using a JavaScript workaround for those browser.\n            // https://github.com/jquery/jquery-mobile/issues/3558\n\n            // DEPRECATED as of 1.4.0 - remove ui-disabled after 1.4.0 release\n            // only ui-state-disabled should be present thereafter\n            $.mobile.document.delegate( \".ui-state-disabled,.ui-disabled\", \"vclick\",\n                function( e ) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            );\n        }\n    });\n}( jQuery, this ));\n\n\n}));\n\n}.call(window));\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return factory(root.CDP || (root.CDP = {})); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.Framework = CDP.Framework || {};\n/// <reference types=\"backbone\" />\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        Framework.Model = Backbone.Model;\n        Framework.Collection = Backbone.Collection;\n        Framework.View = Backbone.View;\n        Framework.Events = Backbone.Events;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    /**\n     * @enum  RESULT_CODE_BASE\n     * @brief \n     */\n    var RESULT_CODE_BASE;\n    (function (RESULT_CODE_BASE) {\n        RESULT_CODE_BASE[RESULT_CODE_BASE[\"CDP_FRAMEWORK_DECLARERATION\"] = 0] = \"CDP_FRAMEWORK_DECLARERATION\";\n        RESULT_CODE_BASE[RESULT_CODE_BASE[\"CDP_FRAMEWORK\"] = 4 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = \"CDP_FRAMEWORK\";\n    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));\n    ///////////////////////////////////////////////////////////////////////\n    // module error declaration:\n    var FUNCTION_CODE_RANGE = 10;\n    /**\n     * @enum  LOCAL_CODE_BASE\n     * @brief cdp.framework.jqm \n     */\n    var LOCAL_CODE_BASE;\n    (function (LOCAL_CODE_BASE) {\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"CORE_API\"] = 0] = \"CORE_API\";\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"ROUTER\"] = 1 * FUNCTION_CODE_RANGE] = \"ROUTER\";\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"PAGE\"] = 2 * FUNCTION_CODE_RANGE] = \"PAGE\";\n    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));\n    /* tslint:disable:max-line-length */\n    /**\n     * @enum  RESULT_CODE\n     * @brief cdp.framework.jqm \n     */\n    var RESULT_CODE;\n    (function (RESULT_CODE) {\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_FRAMEWORK_DECLARATION\"] = 0] = \"ERROR_CDP_FRAMEWORK_DECLARATION\";\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED\"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_FRAMEWORK, LOCAL_CODE_BASE.CORE_API + 1, \"framework initialize failed.\")] = \"ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED\";\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED\"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_FRAMEWORK, LOCAL_CODE_BASE.ROUTER + 1, \"router initialize failed.\")] = \"ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED\";\n    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));\n    /* tslint:enable:max-line-length */\n})(CDP || (CDP = {}));\n/* tslint:disable:max-line-length */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * platform \n         * [] https://w3g.jp/blog/tools/js_browser_sniffing\n         */\n        Framework.Platform = (function () {\n            var ua = navigator.userAgent.toLowerCase();\n            var majorVersion = function (browser) {\n                var version = ua.match(new RegExp(\"(\" + browser + \")( |/)([0-9]+)\"));\n                if (!version || version.length < 4) {\n                    return 0;\n                }\n                return parseInt(version[3], 10);\n            };\n            return {\n                ltIE6: typeof window.addEventListener === \"undefined\" && typeof document.documentElement.style.maxHeight === \"undefined\",\n                ltIE7: typeof window.addEventListener === \"undefined\" && typeof document.querySelectorAll === \"undefined\",\n                ltIE8: typeof window.addEventListener === \"undefined\" && typeof document.getElementsByClassName === \"undefined\",\n                ltIE9: document.uniqueID && typeof window.matchMedia === \"undefined\",\n                gtIE10: document.uniqueID && window.matchMedia,\n                Trident: document.uniqueID,\n                Gecko: \"MozAppearance\" in document.documentElement.style,\n                Presto: CDP.global.opera,\n                Blink: CDP.global.chrome,\n                Webkit: typeof CDP.global.chrome === \"undefined\" && \"WebkitAppearance\" in document.documentElement.style,\n                Touch: typeof CDP.global.ontouchstart !== \"undefined\",\n                Mobile: (typeof CDP.global.orientation !== \"undefined\") || (ua.indexOf(\"Windows Phone\") !== -1),\n                ltAd4_4: typeof CDP.global.orientation !== \"undefined\" && (typeof CDP.global.EventSource === \"undefined\" || 30 > majorVersion(\"chrome\")),\n                Pointer: CDP.global.navigator.pointerEnabled,\n                MSPoniter: CDP.global.navigator.msPointerEnabled,\n                Android: (ua.indexOf(\"android\") !== -1),\n                iOS: (ua.indexOf(\"iphone\") !== -1 || ua.indexOf(\"ipad\") !== -1 || ua.indexOf(\"ipod\") !== -1),\n            };\n        })();\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n/* tslint:disable:typedef no-bitwise */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * vclick patch\n         */\n        var _vclickPatch = function () {\n            var jquery_on = $.fn.on, jquery_off = $.fn.off;\n            var custom_on = function (types, selector, data, fn, /*INTERNAL*/ one) {\n                if (typeof types === \"string\") {\n                    types = types.replace(/vclick/g, \"click\");\n                }\n                return _.bind(jquery_on, this)(types, selector, data, fn, one);\n            };\n            var custom_off = function (types, selector, fn) {\n                if (typeof types === \"string\") {\n                    types = types.replace(/vclick/g, \"click\");\n                }\n                return _.bind(jquery_off, this)(types, selector, fn);\n            };\n            // replace functions.\n            $.fn.on = custom_on;\n            $.fn.off = custom_off;\n        };\n        /**\n         * $.mobile.widget.popup patch for \"_createPrerequisites\"\n         *\n         * patch code from jqm 1.5\n         * https://github.com/jquery/jquery-mobile/commit/d34c86ae14d4ea603357be5e326de1fb8c31dbf9\n         */\n        var _apply_jqm_popup_createPrerequisites = function () {\n            var _safeCreatePrerequisites = function (screenPrerequisite, containerPrerequisite, whenDone) {\n                var prerequisites;\n                var self = this;\n                prerequisites = {\n                    screen: $.Deferred(),\n                    container: $.Deferred()\n                };\n                prerequisites.screen.done(function () {\n                    if (prerequisites === self._prerequisites) {\n                        screenPrerequisite();\n                    }\n                });\n                prerequisites.container.done(function () {\n                    if (prerequisites === self._prerequisites) {\n                        containerPrerequisite();\n                    }\n                });\n                $.when(prerequisites.screen, prerequisites.container).done(function () {\n                    if (prerequisites === self._prerequisites) {\n                        self._prerequisites = null;\n                        whenDone();\n                    }\n                });\n                self._prerequisites = prerequisites;\n            };\n            var $mobile = $.mobile;\n            if ($mobile.widgets && $mobile.widgets.popup) {\n                $mobile.widgets.popup.prototype._createPrerequisites = _safeCreatePrerequisites;\n            }\n        };\n        /**\n         * $.mobile.widget.popup patch for \"_handleWindowResize\"\n         *\n         * patch code from stack overflow\n         * https://stackoverflow.com/questions/27090445/jqmobile-re-positions-popup-window-every-time-when-android-opens-own-virtual-key\n         */\n        var _apply_jqm_popup_handleWindowResize = function () {\n            var _safeHandleWindowResize = function () {\n                if (this._isOpen && this._ignoreResizeTo === 0) {\n                    if ((this._expectResizeEvent() || this._orientationchangeInProgress) &&\n                        !this._ui.container.hasClass(\"ui-popup-hidden\")) {\n                        // effectively rapid-close the popup while leaving the screen intact\n                        //judge user is in input mode or not.\n                        if (!($(\":focus\").is(\"input\") || $(\":focus\").is(\"textarea\"))) {\n                            this._ui.container\n                                .addClass(\"ui-popup-hidden ui-popup-truncate\")\n                                .removeAttr(\"style\");\n                        }\n                    }\n                }\n            };\n            var $mobile = $.mobile;\n            if ($mobile.widgets && $mobile.widgets.popup) {\n                $mobile.widgets.popup.prototype._handleWindowResize = _safeHandleWindowResize;\n            }\n        };\n        /**\n         * $.mobile.widget.popup patch\n         */\n        var _mobilePopupPatch = function () {\n            var jqueryMajor = ~~$.fn.jquery.split(\".\")[0];\n            var jqmVersion = $.mobile.version.split(\".\");\n            var jqmMajor = ~~jqmVersion[0];\n            var jqmMiner = ~~jqmVersion[1];\n            if (3 <= jqueryMajor && jqmMajor < 2 && jqmMiner < 5) {\n                _apply_jqm_popup_createPrerequisites();\n                _apply_jqm_popup_handleWindowResize();\n            }\n        };\n        //___________________________________________________________________________________________________________________//\n        /**\n         * @class Patch\n         * @brief patch class for jqm framework.\n         *       [review] vclick \n         */\n        var Patch = /** @class */ (function () {\n            function Patch() {\n            }\n            ///////////////////////////////////////////////////////////////////////\n            // public static methods\n            /**\n             * \\~english\n             * Apply patch before initialize.\n             *\n             * \\~japanese\n             * \n             */\n            Patch.applyBeforeInit = function () {\n                if (!Patch.isSupportedVclick()) {\n                    _vclickPatch();\n                    Patch.s_vclickEvent = \"click\";\n                }\n            };\n            /**\n             * \\~english\n             * Apply patch after initialize.\n             *\n             * \\~japanese\n             * \n             */\n            Patch.applyAfterInit = function () {\n                _mobilePopupPatch();\n            };\n            /**\n             * \\~english\n             * if \"vclick\" event is unsupported, returns false. ex: Android 4.4 (Kitkat)\n             *\n             * \\~japanese\n             * \"vclick\" event  platform (KitKat)  false \n             * jQM  version up \n             */\n            Patch.isSupportedVclick = function () {\n                // for Android 4.4+ (Kitkat )\n                if (Framework.Platform.Android && !Framework.Platform.ltAd4_4) {\n                    return false;\n                }\n                return true;\n            };\n            Patch.s_vclickEvent = \"vclick\";\n            return Patch;\n        }());\n        Framework.Patch = Patch;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * @enum Orientation\n         */\n        var Orientation;\n        (function (Orientation) {\n            Orientation[Orientation[\"PORTRAIT\"] = 0] = \"PORTRAIT\";\n            Orientation[Orientation[\"LANDSCAPE\"] = 1] = \"LANDSCAPE\";\n        })(Orientation = Framework.Orientation || (Framework.Orientation = {}));\n        /**\n         * \\~english\n         * Get Orientation enum code\n         *\n         * @return {Number} Orientation Code.\n         *\n         * \\~japanese\n         * Orientation \n         *\n         * @return {Number} Orientation Code.\n         */\n        function getOrientation() {\n            var $window = $(window);\n            return ($window.width() < $window.height()) ? Orientation.PORTRAIT : Orientation.LANDSCAPE;\n        }\n        Framework.getOrientation = getOrientation;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n/* tslint:disable:max-line-length forin no-bitwise */\nvar CDP;\n(function (CDP) {\n    var Promise = CDP.Promise;\n    /**\n     * \\~english\n     * The function returned Promise waits until PhoneGap is ready.\n     * [Note] emulate when PC enviroment.\n     *\n     * \\~japanese\n     * PhoneGap \n     * PC \n     */\n    function waitForDeviceReady() {\n        return new Promise(function (resolve) {\n            if (!CDP.Framework.Platform.Mobile) {\n                setTimeout(function () {\n                    resolve();\n                }, 100);\n            }\n            else {\n                if (null == CDP.global.cordova || null == CDP.global.cordova.exec) {\n                    $(document).one(\"deviceready\", function () {\n                        resolve();\n                    });\n                }\n                else {\n                    resolve();\n                }\n            }\n        });\n    }\n    CDP.waitForDeviceReady = waitForDeviceReady;\n    var _defaultBackButtonHandler = null;\n    /**\n     * \\~english\n     * Setup H/W Back key handler.\n     *\n     * @param  {Function} handler function.\n     * @return {Function} old handler function.\n     *\n     * \\~japanese\n     *\n     * @param  {Function} handler .\n     * @return {Function}  handler.\n     */\n    function setBackButtonHandler(handler) {\n        var oldHandler = _defaultBackButtonHandler;\n        _defaultBackButtonHandler = handler;\n        return oldHandler;\n    }\n    CDP.setBackButtonHandler = setBackButtonHandler;\n    // back key handler implement.\n    (function () {\n        waitForDeviceReady()\n            .then(function () {\n            $(document).on(\"backbutton\", function (event) {\n                if (_defaultBackButtonHandler) {\n                    _defaultBackButtonHandler(event);\n                }\n            });\n        });\n    })();\n    //___________________________________________________________________________________________________________________//\n    var Framework;\n    (function (Framework) {\n        var TAG = \"[CDP.Framework] \";\n        var _dfInitialize = $.Deferred();\n        /**\n         * \\~english\n         * Initialization function of Framework.\n         *\n         * \\~japanese\n         * Framework \n         *\n         * @param options {FrameworkOptions} [in] options object.\n         */\n        function initialize(options) {\n            if (\"pending\" !== _dfInitialize.state()) {\n                return _dfInitialize.promise();\n            }\n            // CDP \n            // console  jQuery  WinRT \n            CDP.initialize({\n                success: function () {\n                    var config = getConfig(options);\n                    // Framework  Patch  (Framework )\n                    if (config.applyPatch) {\n                        Framework.Patch.applyBeforeInit();\n                    }\n                    // config : jquery\n                    config.applyJQueryConfig();\n                    // jQuery Mobile \n                    $(document).on(\"mobileinit\", function () {\n                        // config : jquery mobile\n                        config.applyJQueryMobileConfig();\n                        // cdp.i18n \n                        CDP.initializeI18N(config.i18n)\n                            .always(function (info) {\n                            // i18next . info  array .\n                            $(document)\n                                .one(\"pagebeforechange\", function (event, data) {\n                                data.options.showLoadMsg = false;\n                            })\n                                .on(\"pagebeforecreate\", function (event) {\n                                // i18nexthtml fragment\n                                $(event.target).localize();\n                            });\n                            // Router \n                            if (Framework.Router.initialize({\n                                anchorVclick: config.anchorVclick,\n                                firstPageTransition: config.firstPageTransition,\n                            })) {\n                                // Framework  Patch  (Framework )\n                                if (config.applyPatch) {\n                                    Framework.Patch.applyAfterInit();\n                                }\n                                _dfInitialize.resolve();\n                            }\n                            else {\n                                _dfInitialize.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED, TAG, \"error. CDP.Framework.Router.initialize() failed.\"));\n                                _dfInitialize = $.Deferred();\n                            }\n                        });\n                    });\n                    {\n                        // jquery 3+\n                        var jqueryMajor = ~~$.fn.jquery.split(\".\")[0];\n                        if (3 <= jqueryMajor) {\n                            if (4 <= jqueryMajor) {\n                                console.warn(TAG + \"jquery-migrate for 3.0.0+ in use.\");\n                            }\n                            new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(5)]; (function () {\n                                new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(1)];}).catch(__webpack_require__.oe);\n                            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);\n                        }\n                        else {\n                            new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(1)];}).catch(__webpack_require__.oe);\n                        }\n                    }\n                },\n                fail: function (error) {\n                    _dfInitialize.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED, TAG, \"error. CDP.initialize() failed.\", error));\n                    _dfInitialize = $.Deferred();\n                },\n            });\n            return _dfInitialize.promise();\n        }\n        Framework.initialize = initialize;\n        /**\n         * \\~english\n         * Check for initialization status.\n         *\n         * @return {Boolean} true: initialized / false: uninitialized\n         *\n         * \\~japanese\n         * \n         *\n         * @return {Boolean} true:  / false: \n         */\n        function isInitialized() {\n            return \"resolved\" === _dfInitialize.state();\n        }\n        Framework.isInitialized = isInitialized;\n        /**\n         * \\~english\n         * Wait for initialization status.\n         *\n         * @return {IPromiseBase<void>}\n         *\n         * \\~japanese\n         * \n         *\n         * @return {IPromiseBase<void>}\n         */\n        function waitForInitialize() {\n            return _dfInitialize.promise();\n        }\n        Framework.waitForInitialize = waitForInitialize;\n        var _orientationListenerHolder = {};\n        /**\n         * \\~english\n         * Register IOrientationChangedListener to framework.\n         *\n         * @param key      {String}                      [in] ID key\n         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance\n         *\n         * \\~japanese\n         * IOrientationChangedListener  Framework \n         *\n         * @param key      {String}                      [in] ID key\n         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance\n         */\n        function registerOrientationChangedListener(key, listener) {\n            _orientationListenerHolder[key] = listener;\n        }\n        Framework.registerOrientationChangedListener = registerOrientationChangedListener;\n        /**\n         * \\~english\n         * Unregister IOrientationChangedListener from framework.\n         *\n         * @param key {String} [in] ID key\n         *\n         * \\~japanese\n         * IOrientationChangedListener  Framework \n         *\n         * @param key {String} [in] ID key\n         */\n        function unregisterOrientationChangedListener(key) {\n            delete _orientationListenerHolder[key];\n        }\n        Framework.unregisterOrientationChangedListener = unregisterOrientationChangedListener;\n        var _activePage = null;\n        /**\n         * \\~english\n         * Setup event handlers when after router initialized.\n         *\n         * @private\n         *\n         * \\~japanese\n         * . Router  Framework .\n         *\n         * @private\n         */\n        function setupEventHandlers() {\n            (function () {\n                var oldBackButtonHandler = CDP.setBackButtonHandler(null);\n                var baseBackButtonHandler = function (event) {\n                    if (_activePage && _activePage.onHardwareBackButton(event)) {\n                        // \n                        return;\n                    }\n                    else {\n                        oldBackButtonHandler(event);\n                    }\n                };\n                CDP.setBackButtonHandler(baseBackButtonHandler);\n            })();\n            (function () {\n                var oldRouteChangeHandler = CDP.Framework.setBeforeRouteChangeHandler(null);\n                var baseRouteChangeHandler = function () {\n                    if (_activePage) {\n                        return _activePage.onBeforeRouteChange();\n                    }\n                    else {\n                        return oldRouteChangeHandler();\n                    }\n                };\n                CDP.Framework.setBeforeRouteChangeHandler(baseRouteChangeHandler);\n            })();\n        }\n        Framework.setupEventHandlers = setupEventHandlers;\n        var _lastOrientation = null;\n        /**\n         * \\~english\n         * Setup active IPage instance.\n         *\n         * @private\n         * @param page {IPage} [in] IPage instance.\n         *\n         * \\~japanese\n         * active Page . Framework .\n         *\n         * @private\n         * @param page {IPage} [in] IPage instance.\n         */\n        function setActivePage(page) {\n            _activePage = page;\n            if (_activePage) {\n                _lastOrientation = Framework.getOrientation();\n            }\n        }\n        Framework.setActivePage = setActivePage;\n        /**\n         * \\~english\n         * Reterns framework default click event string.\n         *\n         * @private\n         *\n         * \\~japanese\n         * Framework \n         *\n         * @private\n         * @return {String} \"vclick\" / \"click\"\n         */\n        function getDefaultClickEvent() {\n            return Framework.Patch.s_vclickEvent;\n        }\n        Framework.getDefaultClickEvent = getDefaultClickEvent;\n        var _pageConstructors = [];\n        var _pageInstances = [];\n        /**\n         * Page \n         * constructor . bind \n         *\n         * @param {constructor} ctor [in] \n         */\n        function registerPage(ctor) {\n            _pageConstructors.push(ctor);\n        }\n        Framework.registerPage = registerPage;\n        /**\n         * Page \n         */\n        function constructPages() {\n            _pageConstructors.forEach(function (ctor) {\n                _pageInstances.push(new ctor());\n            });\n            _pageConstructors = [];\n        }\n        Framework.constructPages = constructPages;\n        /**\n         * Page \n         */\n        function disposePages() {\n            _pageInstances = [];\n        }\n        Framework.disposePages = disposePages;\n        /**\n         * \\~english\n         * Get Config object.\n         *\n         * @private\n         * @return {FrameworkOptions} Config object.\n         *\n         * \\~japanese\n         * Config object \n         *\n         * @private\n         * @return {FrameworkOptions} Config object.\n         */\n        function getConfig(options) {\n            var defConfig = {\n                // for fail safe, default settings.\n                jquery: {\n                    ajaxSetup: { cache: false },\n                    migrateMute: true,\n                },\n                jquerymobile: {\n                    allowCrossDomainPages: true,\n                    defaultPageTransition: \"platform-default\",\n                    defaultDialogTransition: \"platform-default\",\n                    hashListeningEnabled: false,\n                    pushStateEnabled: false,\n                    // @see jquery.mobile.js LINE 6394\n                    transitionHandler: {\n                        defaultHandler: \"simultaneous\",\n                        sequential: [\"fade\", \"flip\", \"flow\"],\n                        simultaneous: [],\n                    },\n                },\n                i18n: {\n                    fallbackResources: {},\n                    options: {},\n                },\n                applyPatch: true,\n                anchorVclick: true,\n                firstPageTransition: false,\n                applyJQueryConfig: function () {\n                    var _this = this;\n                    Object.keys(this.jquery).forEach(function (key) {\n                        if (\"ajaxSetup\" === key) {\n                            $.ajaxSetup(_this.jquery.ajaxSetup);\n                        }\n                        else {\n                            $[key] = _this.jquery[key];\n                        }\n                    });\n                },\n                applyJQueryMobileConfig: function () {\n                    var _this = this;\n                    $.mobile.loader.prototype.options.text = undefined;\n                    Object.keys(this.jquerymobile).forEach(function (key) {\n                        if (\"transitionHandler\" === key) {\n                            var $mobile_1 = $.mobile;\n                            // default handler\n                            $mobile_1.defaultTransitionHandler\n                                = $mobile_1.transitionHandlers[_this.jquerymobile.transitionHandler.defaultHandler];\n                            // simultaneous handler\n                            _this.jquerymobile.transitionHandler.simultaneous.forEach(function (transition) {\n                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.simultaneous;\n                            });\n                            // sequential handler\n                            _this.jquerymobile.transitionHandler.sequential.forEach(function (transition) {\n                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.sequential;\n                            });\n                        }\n                        else {\n                            $.mobile[key] = _this.jquerymobile[key];\n                        }\n                    });\n                },\n            };\n            return $.extend(true, {}, defConfig, CDP.Config, options);\n        }\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        // resize handler\n        $(window).on(\"resize\", function (event) {\n            var newOrientation = Framework.getOrientation();\n            if (_lastOrientation !== newOrientation) {\n                for (var key in _orientationListenerHolder) {\n                    _orientationListenerHolder[key].onOrientationChanged(newOrientation);\n                }\n                if (_activePage) {\n                    _activePage.onOrientationChanged(newOrientation);\n                }\n                _lastOrientation = newOrientation;\n            }\n        });\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n/* tslint:disable:max-line-length no-string-literal */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        var Promise = CDP.Promise;\n        var TAG = \"[CDP.Framework.Router] \";\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        /**\n         * \\~english\n         * Convert path to URL.\n         * If the path starts from \"/\", the function translate the path as child folder of \"web root\".\n         * Otherwise, it interprets as relative path from current page.\n         * [Note] This behavior go along with jQM, NOT with require.toUrl().\n         *\n         * @param path {String} [in] path string\n         *\n         * \\~japanese\n         * path  URL \n         * \"/\"  web root URL\n         * jQM require.toUrl() \n         *\n         * @param path {String} [in] \n         */\n        function toUrl(path) {\n            if (null != path[0] && \"/\" === path[0]) {\n                return CDP.toUrl(path);\n            }\n            else {\n                return $.mobile.path.makeUrlAbsolute(path, getCurrentDocumentUrl());\n            }\n        }\n        Framework.toUrl = toUrl;\n        /**\n         * \\~english\n         * Get current document url.\n         *\n         * @private\n         *\n         * \\~japanese\n         *  URL \n         *\n         * @private\n         */\n        function getCurrentDocumentUrl() {\n            var $activePage = $(\"body\").pagecontainer(\"getActivePage\");\n            if (null == $activePage) {\n                return $.mobile.path.documentBase.hrefNoHash;\n            }\n            var base = $.mobile.path.documentBase.hrefNoHash;\n            var url = $.mobile.activePage.closest(\".ui-page\").jqmData(\"url\");\n            if (!url || !$.mobile.path.isPath(url)) {\n                url = base;\n            }\n            return $.mobile.path.makeUrlAbsolute(url, base);\n        }\n        /**\n         * \\~english\n         * Default \"before route change\" handler.\n         *\n         * @private\n         *\n         * \\~japanese\n         *  \"before route change\" \n         *\n         * @private\n         */\n        var _beforeRouteChange = function () {\n            return Promise.resolve();\n        };\n        // default \"before route change\" hanndler\n        var _defaultBeforeRouteChange = _beforeRouteChange;\n        /**\n         * \\~english\n         * Setup \"before route change\" handler.\n         *\n         * @param  {Function} handler function.\n         * @return {Function} old handler function.\n         *\n         * \\~japanese\n         * \"before route change\" \n         *\n         * @param  {Function} handler .\n         * @return {Function}  handler.\n         */\n        function setBeforeRouteChangeHandler(handler) {\n            if (null == handler) {\n                return _beforeRouteChange;\n            }\n            else {\n                var oldHandler = _beforeRouteChange;\n                _beforeRouteChange = handler;\n                return oldHandler;\n            }\n        }\n        Framework.setBeforeRouteChangeHandler = setBeforeRouteChangeHandler;\n        //___________________________________________________________________________________________________________________//\n        /**\n         * \\~english\n         * @class Router\n         * @brief Router class for adjusting jQueryMobile functions and Backbone.Router functions.\n         *        Even if Backbone.Router does not start routing, natigate() method works good with jQM framework.\n         *\n         * \\~japanese\n         * @class Router\n         * @brief jQueryMobile  Backbone.Router  Router \n         *        navigate()  jQM \n         */\n        var Router = /** @class */ (function () {\n            function Router() {\n            }\n            ///////////////////////////////////////////////////////////////////////\n            // public static methods\n            /**\n             * \\~english\n             * for initialize Router. this function is called in framework.\n             *\n             * @return {Boolean} true: succeeded / false: failed.\n             *\n             * \\~japanese\n             * \n             * \n             *\n             * @param  options {Object} [in] \n             * @return {Boolean} \n             */\n            Router.initialize = function (options) {\n                var $body = $(\"body\");\n                if (!!Router.s_router) {\n                    console.warn(TAG + \"logic error. initialize call twice.\");\n                    return false;\n                }\n                Router.s_initOptions = $.extend({}, Router.s_defaultInitOptions, options);\n                if (Router.s_initOptions.firstPageTransition) {\n                    Router.s_firstChangePage = false;\n                }\n                // Backbone.Router route \n                Router.s_loadUrl = _.bind(Backbone.history.loadUrl, Backbone.history);\n                Backbone.history.loadUrl = Router.customLoadUrl;\n                Router.s_router = new Backbone.Router();\n                Router.s_router.on(\"route\", Router.onRouteSucceeded);\n                // Backbone.Router $.mobile.back() []\n                if (!$.mobile.hashListeningEnabled) {\n                    Router.s_back = _.bind($.mobile.back, $.mobile);\n                    $.mobile.back = Router.customJqmBack;\n                }\n                // changePage \n                if (null == $.mobile.changePage) {\n                    $.mobile.changePage = function (to, opt) {\n                        $body.pagecontainer(\"change\", to, opt);\n                    };\n                }\n                Router.bindEvents();\n                // Framework \n                Framework.setupEventHandlers();\n                return true;\n            };\n            /**\n             * \\~english\n             * Register to Router.\n             *\n             * @param route    {String}   [in] route string, it can be regular expression.\n             * @param page     {String}   [in] page template path.\n             * @param top      {Boolean}  [in] set \"true\" if application's top view. (optional)\n             * @param callback {Function} [in] callback for custom page transition. If you don't want to trigger jQM.changePage(), return true by this callback. (optional)\n             * @return {Router} Router instance.\n             *\n             * \\~japanese\n             * \n             *\n             * @param route    {String}   [in]  / \n             * @param page     {String}   [in] page template path. \n             * @param top      {Boolean}  [in] Top  true  ()\n             * @param callback {Function} [in]  true  changePage  ()\n             * @return {Router}  method chain any cast \n             */\n            Router.register = function (route, page, top, callback) {\n                if (top === void 0) { top = false; }\n                // Backbone.Router  history \n                var restart = Router.stop();\n                var name = route + page;\n                var context = {\n                    route: route,\n                    regexp: Router.s_router._routeToRegExp(route),\n                    page: page,\n                    top: top,\n                    callback: callback || function () { return false; }\n                };\n                if (Router.pushContext(name, context)) {\n                    Router.s_router.route(route, name, function () { });\n                }\n                if (restart) {\n                    // \n                    Router.start({ silent: true, pageConstruct: false });\n                }\n                return Router;\n            };\n            /**\n             * \\~english\n             * Start listening hash change.\n             * It should be called after register().\n             *\n             * @param options {Object} [in] options object for Backbone.History.\n             *\n             * \\~japanese\n             * \n             * \n             *\n             * @param options {Object} [in] Backbone.History \n             */\n            Router.start = function (options) {\n                var opt = $.extend({ pageConstruct: true }, options);\n                if (opt.pageConstruct) {\n                    Framework.constructPages();\n                }\n                if ($.mobile.hashListeningEnabled) {\n                    console.error(TAG + \"setting error. confict: $.mobile.hashListeningEnabled = true, cannot start.\");\n                    return;\n                }\n                Backbone.history.start(opt);\n            };\n            /**\n             * \\~english\n             * Stop listening hash change.\n             *\n             * @return {Boolean} previous status.\n             *\n             * \\~japanese\n             * \n             *\n             * @return {Boolean} \n             */\n            Router.stop = function () {\n                var prevState = Backbone.History.started;\n                Backbone.history.stop();\n                return prevState;\n            };\n            /**\n             * \\~english\n             * Check routing status.\n             *\n             * @return {Boolean} true: routing / false: not routing\n             *\n             * \\~japanese\n             * \n             *\n             * @return {Boolean} true:  / false: \n             */\n            Router.isRouting = function () {\n                return Backbone.History.started;\n            };\n            /**\n             * \\~english\n             * URL navigation.\n             *\n             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)\n             * @param transition {String}          [in] set a transition string (optional)\n             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)\n             *\n             * \\~japanese\n             * URL\n             *\n             * @param url        {String}          [in]  URL  (//)\n             * @param transition {String}          [in] transition  effect  ()\n             * @param reverse    {Boolean}         [in] transition  direction  true:reverse/false: ()\n             * @param options    {NavigateOptions} [in] Backbone.Router.navigate()  ()\n             */\n            Router.navigate = function (url, transition, reverse, options) {\n                if (!!Router.s_lastNavigateInfo.inNavigation) {\n                    //  Navigation \n                    console.warn(TAG + \"Router.navigate() called in navigation proc.\");\n                    return;\n                }\n                else if (Router.initFirstPageIfNeeded(url)) {\n                    return;\n                }\n                var navOptions = $.extend({}, Router.s_defaultNavigateOptions, options);\n                // . Sub Flow .\n                var notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;\n                Router.s_lastNavigateInfo = {\n                    url: url,\n                    transition: transition,\n                    reverse: reverse,\n                    backDestination: navOptions.backDestination,\n                    noHashChange: navOptions.noHashChange,\n                    intent: navOptions.intent || {},\n                    positiveNavigate: true,\n                    calledBeforeRouteChange: true,\n                    inNavigation: true,\n                };\n                // \n                notifyBeforeRouteChange()\n                    .fail(function () {\n                    // beforeRouteChange() error \n                    console.error(TAG + \"before route change call, failed.\");\n                })\n                    .always(function () {\n                    if (Router.isRouting() && !Router.s_lastNavigateInfo.noHashChange) {\n                        if (navOptions.subFlow) {\n                            switch (navOptions.subFlow.operation) {\n                                case \"begin\":\n                                    Router.startSubFlow(navOptions.subFlow);\n                                    break;\n                                case \"end\":\n                                    Router.finishSubFlow(navOptions);\n                                    return; // navigation \n                                default:\n                                    console.warn(TAG + \"unknown subFlow.operation. operation: \" + navOptions.subFlow.operation);\n                                    break;\n                            }\n                        }\n                        var result = Backbone.history.navigate(url, navOptions);\n                        // Backbone.history.loadUrl() , navigation \n                        if (!result || \"string\" === typeof result) {\n                            Router.s_lastNavigateInfo.inNavigation = false;\n                        }\n                    }\n                    else {\n                        if (navOptions.subFlow) {\n                            console.warn(TAG + \"subFlow only supported under routing and hash change condition.\");\n                        }\n                        var fragment_1 = Backbone.history.getFragment(url);\n                        var context = void 0;\n                        if (Router.s_lastNavigateInfo.noHashChange) {\n                            // noHashChange \n                            context = _.find(Router.s_rootContexts, function (ctx) {\n                                return ctx.regexp.test(fragment_1);\n                            });\n                        }\n                        else {\n                            // Backbone.Router \n                            context = _.findWhere(Router.s_rootContexts, { route: fragment_1 });\n                        }\n                        if (context) {\n                            url = context.page;\n                        }\n                        Router.changePage(url);\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Navigate from Top Page.\n             * If SubFlow set up, the param is cleared.\n             *\n             * @param to         {String|PageStack|PageStack[]} [in] set a navigate URL or PageStackOptions object or array.\n             * @param transition {String}                       [in] set a transition string (optional)\n             * @param reverse    {Boolean}                      [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             * @param options    {NavigateOptions}              [in] set a options object for Backbone.Router.navigate(). (optional)\n             *\n             * \\~japanese\n             * \n             * SubFlow \n             *\n             * @param to         {String|PageStack|PageStack[]} [in]  URL / PageStackOptions /\n             * @param transition {String}                       [in] transition  effect  ()\n             * @param reverse    {Boolean}                      [in] transition  direction  true:reverse/false: ()\n             * @param options    {NavigateOptions}              [in] Backbone.Router.navigate()  ()\n             */\n            Router.navigateFromTop = function (to, transition, reverse, options) {\n                var stack = Router.getJqmHistory().stack;\n                var currentPage = stack[Router.getJqmHistory().activeIndex];\n                var _transition = transition || currentPage.transition;\n                var _reverse = (null != reverse) ? reverse : true;\n                var destStacks = (function () {\n                    if (!to) {\n                        return null;\n                    }\n                    else if (\"string\" === typeof to) {\n                        return [{ route: to }];\n                    }\n                    else if (to instanceof Array) {\n                        return to;\n                    }\n                    else {\n                        return [to];\n                    }\n                })();\n                //  SubFlow \n                stack.forEach(function (value) {\n                    delete value[Router.SUBFLOW_PARAM];\n                });\n                //  SubFlow \n                stack[0][Router.SUBFLOW_PARAM] = {\n                    operation: \"begin\",\n                    destBase: stack[0].hash,\n                    destStacks: destStacks,\n                    additionalDistance: 0,\n                };\n                Router.navigate(null, _transition, _reverse, $.extend({}, options, {\n                    subFlow: {\n                        operation: \"end\",\n                    }\n                }));\n            };\n            /**\n             * \\~english\n             * Back to previous history.\n             * It's same as browser back button's behaviour.\n             * [Note] If set the jQM: data-rel=\"back\", work as well.\n             *\n             * \\~japanese\n             * \n             * \n             * jQM: data-rel=\"back\" \n             */\n            Router.back = function () {\n                if (!!Router.s_lastNavigateInfo.inNavigation) {\n                    //  Navigation \n                    console.warn(TAG + \"Router.back() called in navigation proc.\");\n                    return;\n                }\n                else if (Router.isTopPage()) {\n                    // Top \n                    var app = navigator.app || {};\n                    if (!!app.exitApp) {\n                        app.exitApp(); // note: never exit on iOS\n                        return;\n                    }\n                }\n                Router.s_lastNavigateInfo = {\n                    inNavigation: true,\n                    calledBeforeRouteChange: true,\n                };\n                // \n                _beforeRouteChange()\n                    .then(function () {\n                    $.mobile.back();\n                })\n                    .fail(function () {\n                    console.error(\"before route change call, failed.\");\n                    Router.s_lastNavigateInfo = {};\n                });\n            };\n            /**\n             * \\~english\n             * Store Intent object.\n             *\n             * \\~japanese\n             * Intent \n             */\n            Router.pushIntent = function (intent) {\n                Router.s_lastIntent = $.extend(true, Router.s_lastIntent, intent);\n            };\n            /**\n             * \\~english\n             * Get Intent object.\n             *\n             * \\~japanese\n             * Intent \n             */\n            Router.popIntent = function () {\n                var intent = Router.s_lastIntent;\n                Router.s_lastIntent = {};\n                return intent;\n            };\n            /**\n             * \\~english\n             * Get query parameters.\n             *\n             * \\~japanese\n             * query parameter \n             *  (pagebeforecreate  pagechange)\n             */\n            Router.getQueryParameters = function () {\n                if (Router.s_lastNavigateInfo.intent && Router.s_lastNavigateInfo.intent.params) {\n                    return Router.s_lastNavigateInfo.intent.params[\"queryParams\"];\n                }\n                else {\n                    return null;\n                }\n            };\n            /**\n             * \\~english\n             * Begin sub flow transaction.\n             *\n             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)\n             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)\n             * @param transition {String}          [in] set a transition string (optional)\n             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             *\n             * \\~japanese\n             * sub flow .\n             * navigate()  \n             *\n             * @param url        {String}          [in]  URL  (//)\n             * @param options    {NavigateOptions} [in] Backbone.Router.navigate()  ()\n             * @param transition {String}          [in] transition  effect  ()\n             * @param reverse    {Boolean}         [in] transition  direction  true:reverse/false: ()\n             */\n            Router.beginSubFlow = function (url, options, transition, reverse) {\n                var opt = $.extend({}, options);\n                opt.subFlow = opt.subFlow || { operation: \"begin\" };\n                if (\"begin\" !== opt.subFlow.operation) {\n                    console.error(TAG + \"logic error. invalid subflow operation. [operation: \" + opt.subFlow.operation + \"]\");\n                    return;\n                }\n                Router.navigate(url, transition, reverse, opt);\n            };\n            /**\n             * \\~english\n             * Commit sub flow transaction.\n             *\n             * @param transition {String}  [in] set a transition string (optional)\n             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse / false:nomal (optional)\n             *\n             * \\~japanese\n             * sub flow .\n             * navigate()  \n             *\n             * @param transition {String}  [in] transition  effect  ()\n             * @param reverse    {Boolean} [in] transition  direction  true:reverse/false: ()\n             */\n            Router.commitSubFlow = function (transition, reverse) {\n                Router.navigate(null, transition, reverse, {\n                    subFlow: {\n                        operation: \"end\",\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Cancel sub flow transaction.\n             *\n             * @param transition {String}  [in] set a transition string (optional)\n             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse[default] / false:nomal (optional)\n             *\n             * \\~japanese\n             * sub flow .\n             * navigate()  \n             *\n             * @param transition {String}  [in] transition  effect  ()\n             * @param reverse    {Boolean} [in] transition  direction  true:reverse[]/false: ()\n             */\n            Router.cancelSubFlow = function (transition, reverse) {\n                // \n                var baseInfo = Router.detectSubFlowBaseInfo();\n                baseInfo.subFlowParam.additionalDistance = 0;\n                Router.navigate(null, transition, (null != reverse) ? reverse : true, {\n                    subFlow: {\n                        operation: \"end\",\n                        destStacks: null,\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Check in sub flow.\n             *\n             * \\~japanese\n             * sub flow \n             */\n            Router.isInSubFlow = function () {\n                var stack = Router.getJqmHistory().stack;\n                var has = _.some(stack, function (value) {\n                    return !!value[Router.SUBFLOW_PARAM];\n                });\n                return has;\n            };\n            /**\n             * \\~english\n             * Check from hash changed navigation.\n             *\n             * \\~japanese\n             * Hash  Navigate \n             * \"pagechange\" \n             */\n            Router.fromHashChanged = function () {\n                // positiveNavigate = false \n                return Router.s_lastNavigateInfo.inNavigation && (null == Router.s_lastNavigateInfo.positiveNavigate);\n            };\n            Router.registerPageStack = function (pageStack, withNavigate, options) {\n                var newStacks = [];\n                var failed = false;\n                pageStack = (pageStack instanceof Array) ? pageStack : [pageStack];\n                withNavigate = (null == withNavigate) ? false : withNavigate;\n                (function () {\n                    var makeStack = function (info) {\n                        var url;\n                        var fragment = Backbone.history.getFragment(info.route);\n                        var context = _.find(Router.s_rootContexts, function (ctx) {\n                            return ctx.regexp.test(fragment);\n                        });\n                        if (!context) {\n                            console.warn(TAG + \"route is not registered. route: \" + info.route);\n                            return null;\n                        }\n                        else {\n                            url = Router.pathToJqmDataUrl(context.page);\n                        }\n                        var stack = {\n                            route: info.route,\n                            pageUrl: url,\n                            title: info.title,\n                            transition: info.transition,\n                            url: url,\n                        };\n                        return stack;\n                    };\n                    for (var i = 0, n = pageStack.length; i < n; i++) {\n                        var stack = makeStack(pageStack[i]);\n                        if (!stack) {\n                            failed = true;\n                            break;\n                        }\n                        else {\n                            newStacks.push(stack);\n                        }\n                    }\n                })();\n                if (failed) {\n                    return false;\n                }\n                (function () {\n                    // Router \n                    var restart = Router.stop();\n                    var silentLength = newStacks.length - 1;\n                    var finalIndex = newStacks.length - 1;\n                    Router.getJqmHistory().clearForward();\n                    for (var i = 0, n = silentLength; i < n; i++) {\n                        location.hash = newStacks[i].route;\n                        Router.getJqmHistory().stack.push(newStacks[i]);\n                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;\n                    }\n                    // final stack with navigate\n                    if (withNavigate) {\n                        var transition = (function () {\n                            if (null != Router.s_lastNavigateInfo.transition) {\n                                return Router.s_lastNavigateInfo.transition;\n                            }\n                            else {\n                                return newStacks[finalIndex].transition;\n                            }\n                        })();\n                        var reverse = (function () {\n                            if (null != Router.s_lastNavigateInfo.reverse) {\n                                return Router.s_lastNavigateInfo.reverse;\n                            }\n                            else {\n                                return false;\n                            }\n                        })();\n                        restart = false;\n                        Router.start({ silent: true });\n                        Router.navigate(newStacks[finalIndex].route, transition, reverse, options);\n                    }\n                    else {\n                        location.hash = newStacks[finalIndex].route;\n                        Router.getJqmHistory().stack.push(newStacks[finalIndex]);\n                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;\n                    }\n                    // Router \n                    if (restart) {\n                        Router.start({ silent: true });\n                    }\n                })();\n                return true;\n            };\n            /**\n             * \\~english\n             * Get jQM's history object\n             *\n             * \\~japanese\n             * jQM  History \n             *\n             */\n            Router.getJqmHistory = function () {\n                return $.mobile.navigate.history;\n            };\n            ///////////////////////////////////////////////////////////////////////\n            // private static methods\n            /**\n             * \\~english\n             * Override: Backbone.History.loadUrl().\n             *\n             * @private\n             *\n             * \\~japanese\n             * Backbone.History.loadUrl() \n             *\n             * @private\n             */\n            Router.customLoadUrl = function (fragment) {\n                var handled = Router.s_loadUrl(fragment);\n                if (!handled) {\n                    Router.onRouteFailed(fragment);\n                }\n                return true;\n            };\n            /**\n             * \\~english\n             * Override: $.mobile.back().\n             *\n             * fail safe processing.\n             *  If using Backbone's Router,\n             *  this class unuses history object of jQuery Mobile 1.4,\n             *  and standardize as browser back button's behaviour. (jQM 1.3 comparable)\n             *\n             * @private\n             *\n             * \\~japanese\n             * $.mobile.back() \n             *\n             * [TBD] fail safe \n             *  Backbone  Router \n             *  jQuery Mobile 1.4  History \n             *  1.3 []\n             *\n             * @private\n             */\n            Router.customJqmBack = function () {\n                if (Router.isRouting()) {\n                    history.back();\n                }\n                else {\n                    // jQM \n                    Router.s_back();\n                }\n            };\n            /**\n             * \\~english\n             * Bind events.\n             *\n             * @private\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             */\n            Router.bindEvents = function () {\n                $(document)\n                    .one(\"pagechange\", function () {\n                    if (Router.s_initOptions.anchorVclick) {\n                        // anchor vclick\n                        $(document).on(\"vclick\", \"[href]\", function (event) {\n                            Router.onAnchorVclicked(event);\n                        });\n                    }\n                })\n                    .on(\"pagebeforeshow\", function (event) {\n                    // \"data-back-dst\"  page \n                    if (null != Router.s_lastNavigateInfo.backDestination) {\n                        var active = Router.getJqmHistory().getActive();\n                        active[Router.BACK_DESTINATION_URL] = Router.s_lastNavigateInfo.backDestination;\n                    }\n                })\n                    .on(\"pageshow\", function (event) {\n                    var active = Router.getJqmHistory().getActive();\n                    if (active[Router.SUBFLOW_PARAM]) {\n                        delete active[Router.SUBFLOW_PARAM];\n                    }\n                })\n                    .on(\"pagechange pagecontainerloadfailed\", function (event) {\n                    Router.s_lastNavigateInfo = {};\n                });\n                // back key assign\n                CDP.setBackButtonHandler(Router.back);\n            };\n            /**\n             * \\~english\n             * Store the RootContext.\n             *\n             * @private\n             * @param name    {String}       [in] name of route\n             * @param context {RouteContext} [in] context object\n             * @return true: succeeded / false: already registered\n             *\n             * \\~japanese\n             * RootContext \n             *\n             * @private\n             * @param name    {String}       [in] route \n             * @param context {RouteContext} [in] context \n             * @return true:  / false: \n             */\n            Router.pushContext = function (name, context) {\n                if (!!Router.s_rootContexts[name]) {\n                    console.error(TAG + \"logic error. route is already registered. name: \" + name);\n                    return false;\n                }\n                Router.s_rootContexts[name] = context;\n                return true;\n            };\n            /**\n             * \\~english\n             * Check if $.mobile.initializePage() is called or not, and call it if needed.\n             *\n             * @private\n             * @param url {String}  [in] set a navigate URL. (relative path / absolute path / fragment)\n             *\n             * \\~japanese\n             * $.mobile.initializePage() \n             *\n             * @private\n             * @param url {String} [in]  URL  (//)\n             */\n            Router.initFirstPageIfNeeded = function (url) {\n                if (!$.mobile.autoInitializePage) {\n                    $(document).one(\"pagebeforechange\", function (event, data) {\n                        data.toPage = Framework.toUrl(url);\n                    });\n                    $.mobile.initializePage();\n                    $.mobile.autoInitializePage = true;\n                    return true;\n                }\n                return false;\n            };\n            /**\n             * \\~english\n             * Check for current page is top.\n             *\n             * @private\n             * @return true: top page / false: not top page\n             *\n             * \\~japanese\n             *  top \n             *\n             * @private\n             * @return true: top  / false: top \n             */\n            Router.isTopPage = function () {\n                var fragment = Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash);\n                var context = _.find(Router.s_rootContexts, function (ctx) {\n                    return ctx.regexp.test(fragment);\n                });\n                return (null == context) ? false : context.top;\n            };\n            /**\n             * \\~english\n             * Called when anchor received \"vclick\" event.\n             *\n             * @private\n             * @return true: need default processing / false: need custom processing\n             *\n             * \\~japanese\n             * anchor  vclick \n             *\n             * @private\n             * @return true: default  / false: \n             */\n            Router.onAnchorVclicked = function (event) {\n                if (Router.isJustBeforeVclicked()) {\n                    event.preventDefault();\n                    return false;\n                }\n                return Router.followAnchor(event);\n            };\n            /**\n             * \\~english\n             * Anchor processing.\n             *\n             * @private\n             *\n             * \\~japanese\n             * anchor \n             *\n             * @private\n             */\n            Router.followAnchor = function (event) {\n                var $target = $(event.currentTarget);\n                var url = $target.jqmData(\"href\") || $target.attr(\"href\");\n                var transition = $target.jqmData(\"transition\");\n                var direction = $target.jqmData(\"direction\");\n                var backDst = $target.attr(Router.DATA_BACK_DESTINATION);\n                var noHashChange = $target.attr(Router.DATA_NO_HASH_CHANGE) ?\n                    $target.attr(Router.DATA_NO_HASH_CHANGE) === \"true\" : false;\n                var noHrefHandle = $target.attr(Router.DATA_NO_VCLICK_HANDLE) ?\n                    $target.attr(Router.DATA_NO_VCLICK_HANDLE) === \"true\" : false;\n                /*\n                 * - \n                 * - jQM \n                 * \n                 */\n                if (noHrefHandle || Router.needDefaultOperation(url)) {\n                    return true;\n                }\n                // custom behavier\n                event.preventDefault();\n                if (Router.isBackButtonClicked(event)) {\n                    Router.back();\n                }\n                else {\n                    Router.navigate(url, transition, !!direction, { noHashChange: noHashChange, backDestination: backDst });\n                }\n                return false;\n            };\n            /**\n             * \\~english\n             * Check default processing needed.\n             *\n             * @private\n             * @param  url {String} [in] url string\n             * @return true: need default processing / false: need not\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             * @param  url {String} [in] url \n             * @return true:  / false: \n             */\n            Router.needDefaultOperation = function (url) {\n                if (!url || (\"#\" === url)) {\n                    return true;\n                }\n                else if (\"#\" === url[0]) {\n                    return !Router.canResolveRoute(url);\n                }\n                else {\n                    return false;\n                }\n            };\n            /**\n             * \\~english\n             * Check status of Backbone.Router if they can resolve route.\n             *\n             * @private\n             * @param  url {String} [in] url \n             * @return true: can resolve / false: can not\n             *\n             * \\~japanese\n             * Backbone.Router  route \n             *\n             * @private\n             * @param  url {String} [in] url \n             * @return true:  / false: \n             */\n            Router.canResolveRoute = function (url) {\n                var fragment = Backbone.history.getFragment(url);\n                return _.any(Backbone.history.handlers, function (handler) {\n                    if (handler.route.test(fragment)) {\n                        return true;\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Check \"vclick\" fired at the last minute.\n             *\n             * @private\n             *\n             * \\~japanese\n             *  vclick \n             *\n             * @private\n             */\n            Router.isJustBeforeVclicked = function () {\n                var isBefore = (Date.now() - Router.s_lastClickedTime) < Router.DELAY_TIME * 2;\n                Router.s_lastClickedTime = Date.now();\n                return isBefore;\n            };\n            /**\n             * \\~english\n             * Check back button clicked.\n             *\n             * @private\n             *\n             * \\~japanese\n             * Back Button \n             *\n             * @private\n             */\n            Router.isBackButtonClicked = function (event) {\n                if ($(event.currentTarget).jqmData(\"rel\") === \"back\") {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            };\n            /**\n             * \\~english\n             * It called on succeed routing triggered by changing hash.\n             *\n             * @private\n             * @param name {String} [in] name of route\n             * @param args {Array}  [in] array of paramter\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             * @param name {String} [in] route page \n             * @param args {Array}  [in] \n             */\n            Router.onRouteSucceeded = function (name) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                var context = Router.s_rootContexts[name];\n                if (!!context) {\n                    var intent = { params: { queryParams: args } };\n                    Router.s_lastNavigateInfo.inNavigation = true;\n                    if (null != Router.s_lastNavigateInfo.intent) {\n                        intent.params = $.extend({}, intent.params, Router.s_lastNavigateInfo.intent.params || {});\n                    }\n                    Router.s_lastNavigateInfo.intent = $.extend({}, Router.s_lastNavigateInfo.intent, intent);\n                    var handled = context.callback(args);\n                    if (!handled) {\n                        Router.changePage(context.page);\n                    }\n                }\n            };\n            /**\n             * \\~english\n             * It called on failed routing triggered by changing hash.\n             *\n             * @private\n             * @param name {String} [in] name of route\n             * @param args {Array}  [in] array of paramter\n             *\n             * \\~japanese\n             * \n             *\n             * @private\n             * @param name {String} [in] route page \n             * @param args {Array}  [in] \n             */\n            Router.onRouteFailed = function (fragment) {\n                Router.s_lastNavigateInfo.inNavigation = true;\n                if (null == fragment) {\n                    fragment = Backbone.history.getFragment();\n                }\n                // route \n                if (Router.s_lastNavigateInfo.positiveNavigate) {\n                    var context = Router.s_rootContexts[fragment];\n                    if (null == context) {\n                        context = {\n                            route: fragment,\n                            regexp: Router.s_router._routeToRegExp(fragment),\n                            page: Router.s_lastNavigateInfo.url,\n                            top: false,\n                            callback: null,\n                        };\n                        Router.pushContext(fragment, context);\n                    }\n                }\n                // fragment  path \n                var path = fragment;\n                if (null != Router.s_rootContexts[fragment]) {\n                    path = Router.s_rootContexts[fragment].page;\n                }\n                Router.changePage(path);\n            };\n            /**\n             * \\~english\n             * This function just calls jQuery Mobile's navigation method.\n             *\n             * @private\n             * @param path {String} [in] to page path\n             *\n             * \\~japanese\n             * jQuery Mobile \n             *\n             * @private\n             * @param path {String} [in] \n             */\n            Router.changePage = function (path) {\n                var notifyBeforeRouteChange;\n                // data-rel=\"back\", , H/W Back Key \n                if (!Router.s_lastNavigateInfo.positiveNavigate) {\n                    if (Router.s_lastNavigateInfo.inAdditionalBack) {\n                        Router.s_lastNavigateInfo.inAdditionalBack = false;\n                    }\n                    else {\n                        Router.decideDirection(path);\n                        // \n                        var additional = Router.detectAdditionalBackDistance();\n                        if (0 < additional) {\n                            // 2 hash change .\n                            Router.s_lastNavigateInfo.inAdditionalBack = true;\n                            Router.getJqmHistory().activeIndex -= additional;\n                            history.go(-additional);\n                            return;\n                        }\n                    }\n                    //  subflow param \n                    var subFlowInfo = Router.detectSubFlowBaseInfo();\n                    if (subFlowInfo.isCurrent) {\n                        delete subFlowInfo.stack[Router.SUBFLOW_PARAM];\n                    }\n                }\n                else {\n                    //  previousIndex \n                    Router.getJqmHistory().previousIndex = Router.getJqmHistory().activeIndex;\n                }\n                // . .\n                notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;\n                notifyBeforeRouteChange()\n                    .then(function () {\n                    // \n                    if (Router.s_lastNavigateInfo.intent) {\n                        Router.pushIntent(Router.s_lastNavigateInfo.intent);\n                    }\n                    Router.treatUrlHistory();\n                    var pageTransition = (function () {\n                        if (Router.s_lastNavigateInfo.transition) {\n                            return Router.s_lastNavigateInfo.transition;\n                        }\n                        else if (Router.s_firstChangePage) {\n                            Router.s_firstChangePage = false;\n                            return \"none\"; // splash \n                        }\n                        else {\n                            return $.mobile.defaultPageTransition;\n                        }\n                    })();\n                    $.mobile.changePage(Framework.toUrl(path), {\n                        showLoadMsg: false,\n                        allowSamePageTransition: true,\n                        transition: pageTransition,\n                        reverse: Router.s_lastNavigateInfo.reverse,\n                        fromHashChange: !Router.s_lastNavigateInfo.positiveNavigate,\n                        changeHash: !Router.s_lastNavigateInfo.noHashChange,\n                    });\n                })\n                    .fail(function () {\n                    console.error(TAG + \"before route change call, failed.\");\n                    Router.s_lastNavigateInfo = {};\n                });\n            };\n            /**\n             * \\~english\n             * Decide direction parameter.\n             * It's as same as jQM internal implement. (imperfection)\n             *\n             * @private\n             * @param path {String} [in] to page path\n             *\n             * \\~japanese\n             * direction \n             * jQM  ()\n             *\n             * @private\n             * @param path {String} [in] \n             */\n            Router.decideDirection = function (path) {\n                var url = $.mobile.path.convertUrlToDataUrl(Framework.toUrl(path));\n                if (null == Router.s_lastNavigateInfo.transition) {\n                    Router.s_lastNavigateInfo.transition = Router.getJqmHistory().getActive().transition;\n                }\n                Router.getJqmHistory().direct({\n                    url: url,\n                    present: function (newPage, direction) {\n                        switch (direction) {\n                            case \"back\":\n                                if (null == Router.s_lastNavigateInfo.reverse) {\n                                    Router.s_lastNavigateInfo.reverse = true;\n                                }\n                                break;\n                            case \"forward\":\n                                if (null == Router.s_lastNavigateInfo.transition) {\n                                    Router.s_lastNavigateInfo.transition = newPage.transition;\n                                }\n                                break;\n                            default:\n                                console.warn(TAG + \"unknown direction: \" + direction);\n                                break;\n                        }\n                    },\n                    missing: function () {\n                        //  URL \n                        if (1 === Router.getJqmHistory().activeIndex) {\n                            Router.getJqmHistory().previousIndex = 1;\n                            Router.getJqmHistory().activeIndex = 0;\n                            if (null == Router.s_lastNavigateInfo.reverse) {\n                                Router.s_lastNavigateInfo.reverse = true;\n                            }\n                        }\n                        else if (0 !== Router.getJqmHistory().activeIndex) {\n                            console.warn(TAG + \"unknown direction.\");\n                        }\n                    }\n                });\n            };\n            /**\n             * \\~english\n             * Return additional back distance count when back destination set.\n             * (const function)\n             *\n             * @private\n             * @return {Number} count of additiona back distance.\n             *\n             * \\~japanese\n             *  Back \n             * ( Router )\n             *\n             * @private\n             * @return {String}  Back .\n             */\n            Router.detectAdditionalBackDistance = function () {\n                var stack = Router.getJqmHistory().stack;\n                var historyActiveIndex = Router.getJqmHistory().activeIndex; // decideDirection()  Router.getJqmHistory().direct() history  activeIndex \n                var previousIndex = Router.getJqmHistory().previousIndex; // []\n                var i, backDst, distance, fragment, context, jqmDataUrl;\n                // check \"operation\". [] clearForward() \n                if (!Router.s_lastNavigateInfo.reverse || null == previousIndex || !stack[previousIndex]) {\n                    return 0;\n                }\n                // \"backDst exists\". []\n                backDst = stack[previousIndex][Router.BACK_DESTINATION_URL];\n                if ((null == backDst)) {\n                    return 0;\n                }\n                fragment = Backbone.history.getFragment(backDst);\n                // \n                if (\"\" === fragment) {\n                    return historyActiveIndex;\n                }\n                // rootContext  path \n                context = _.find(Router.s_rootContexts, function (ctx) {\n                    return ctx.regexp.test(fragment);\n                });\n                if (null == context) {\n                    console.warn(TAG + \"back destination is not registered. back-dst: \" + backDst);\n                    return 0;\n                }\n                // dataUrl  jQM History \n                jqmDataUrl = Router.pathToJqmDataUrl(context.page);\n                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {\n                    if (jqmDataUrl === stack[i].pageUrl) {\n                        break;\n                    }\n                }\n                if (i < 0) {\n                    console.warn(TAG + \"back destination does not exist in history. back-dst: \" + backDst);\n                    return 0;\n                }\n                return distance;\n            };\n            /**\n             * \\~english\n             * Start sub flow\n             * Attach SubFlowParam to jqm history stack object.\n             *\n             * @param subFlowParam {SubFlowParam} [in] Sub Flow parameter\n             *\n             * \\~japanese\n             * Sub Flow \n             * SubFlowParam  jqm history stack \n             *\n             * @param subFlowParam {SubFlowParam} [in] Sub Flow \n             */\n            Router.startSubFlow = function (subFlowParam) {\n                var active = Router.getJqmHistory().getActive();\n                var param = subFlowParam;\n                if (subFlowParam.destBase) {\n                    var distance = 0;\n                    var fragment_2 = Backbone.history.getFragment(subFlowParam.destBase);\n                    var context = _.find(Router.s_rootContexts, function (ctx) {\n                        return ctx.regexp.test(fragment_2);\n                    });\n                    if (null == context) {\n                        console.warn(TAG + \"base destination is not registered. destBase: \" + subFlowParam.destBase);\n                        return;\n                    }\n                    // dataUrl  jQM History \n                    var jqmDataUrl = Router.pathToJqmDataUrl(context.page);\n                    var stack = Router.getJqmHistory().stack;\n                    for (var i = Router.getJqmHistory().activeIndex; 0 <= i; i--, distance++) {\n                        if (jqmDataUrl === stack[i].pageUrl) {\n                            param.additionalDistance = distance;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    param.destBase = location.hash;\n                    param.additionalDistance = 0;\n                }\n                active[Router.SUBFLOW_PARAM] = param;\n            };\n            /**\n             * \\~english\n             * End sub flow\n             * navigate and delete SubFlowParam from jqm history stack object.\n             *\n             * @param navOptions {NavigateOptions} [in] Sub Flow parameter\n             *\n             * \\~japanese\n             * Sub Flow \n             *  SubFlowParam  jqm history stack \n             *\n             * @param navOptions {NavigateOptions} [in] Sub Flow \n             */\n            Router.finishSubFlow = function (options) {\n                var navOptions = $.extend(true, {}, options);\n                var baseInfo = Router.detectSubFlowBaseInfo();\n                // \"end\" \n                var param = $.extend({}, baseInfo.subFlowParam, navOptions.subFlow);\n                var distance = baseInfo.distance;\n                var stack = baseInfo.stack;\n                var retry = 0;\n                var NAVIGATE_INTERVAL = 100;\n                var MAX_RETRY_COUNT = 10;\n                // hash  navigate \n                var _navigate = function () {\n                    if (MAX_RETRY_COUNT <= retry) {\n                        console.error(TAG + \"reached navigate max retry count.\");\n                        Router.s_lastNavigateInfo = {};\n                    }\n                    else if (param.destBase !== location.hash) {\n                        retry++;\n                        setTimeout(_navigate, NAVIGATE_INTERVAL);\n                    }\n                    else {\n                        Router.s_lastNavigateInfo.inNavigation = false;\n                        Router.registerPageStack(param.destStacks, true, navOptions);\n                    }\n                };\n                if (stack) {\n                    delete stack[Router.SUBFLOW_PARAM];\n                    Router.getJqmHistory().activeIndex -= distance;\n                    Router.getJqmHistory().clearForward();\n                    if (param.destStacks) {\n                        Router.stop();\n                        // iOS  index.html  history.go(0) .\n                        // , .\n                        if (0 !== distance) {\n                            history.go(-distance);\n                        }\n                        delete navOptions.subFlow; // subFlow \n                        setTimeout(_navigate, 0);\n                    }\n                    else {\n                        Router.s_lastNavigateInfo.positiveNavigate = false;\n                        history.go(-distance);\n                    }\n                }\n                else {\n                    console.warn(TAG + \"subFlow begin status does not exist in history.\");\n                    Router.s_lastNavigateInfo = {};\n                }\n            };\n            /**\n             * \\~english\n             * Return destination Sub Flow information.\n             * (const function)\n             *\n             * @private\n             * @return {Object} sub flow info.\n             *\n             * \\~japanese\n             * Sub Flow \n             * ( Router )\n             *\n             * @private\n             * @return {Object} Sub Flow .\n             */\n            Router.detectSubFlowBaseInfo = function () {\n                var stack = Router.getJqmHistory().stack;\n                var historyActiveIndex = Router.getJqmHistory().activeIndex;\n                var i, distance;\n                var param = {};\n                var target;\n                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {\n                    if (stack[i][Router.SUBFLOW_PARAM]) {\n                        target = stack[i];\n                        param = stack[i][Router.SUBFLOW_PARAM];\n                        break;\n                    }\n                }\n                if (null == param.additionalDistance) {\n                    param.additionalDistance = 0;\n                }\n                return {\n                    stack: target,\n                    subFlowParam: param,\n                    distance: distance + param.additionalDistance,\n                    isCurrent: (function () {\n                        if (target && 0 === distance) {\n                            return true;\n                        }\n                        else {\n                            return false;\n                        }\n                    })(),\n                };\n            };\n            /**\n             * \\~english\n             * Convert path to jQM dataUrl.\n             *\n             * @private\n             * @return {String} jQM data url.\n             *\n             * \\~japanese\n             *  jQM dataUrl \n             *\n             * @private\n             * @return {String} jQM data url.\n             */\n            Router.pathToJqmDataUrl = function (path) {\n                var url = Framework.toUrl(path);\n                var dataUrl = $.mobile.path.convertUrlToDataUrl(url);\n                return dataUrl;\n            };\n            /**\n             * \\~english\n             * Update jQM urlHistory by window.history object.\n             * To be natural browsing history behavior, application needs to update jQM urlHistory\n             * when clicking back or next button of browser. (imperfection for decideDirection())\n             *\n             * @private\n             *\n             * \\~japanese\n             *  jQM urlHistory \n             * []/[]jQM urlHistory (decideDirection() )\n             *\n             * @private\n             */\n            Router.treatUrlHistory = function () {\n                if (Router.s_lastNavigateInfo.positiveNavigate || history.length < Router.getJqmHistory().stack.length) {\n                    Router.getJqmHistory().clearForward();\n                }\n            };\n            Router.s_initOptions = {};\n            Router.s_router = null;\n            Router.s_rootContexts = {};\n            Router.s_lastNavigateInfo = {};\n            Router.s_lastClickedTime = null;\n            Router.s_lastIntent = {};\n            Router.s_firstChangePage = true;\n            Router.s_loadUrl = null;\n            Router.s_back = null;\n            Router.DELAY_TIME = 200; // TBD: \n            Router.DATA_BACK_DESTINATION = \"data-back-dst\";\n            Router.DATA_NO_HASH_CHANGE = \"data-no-hash-change\";\n            Router.DATA_NO_VCLICK_HANDLE = \"data-no-vclick-handle\";\n            Router.BACK_DESTINATION_URL = \"backDstUrl\";\n            Router.SUBFLOW_PARAM = \"subFlowParam\";\n            Router.s_defaultInitOptions = {\n                anchorVclick: true,\n                firstPageTransition: false,\n            };\n            Router.s_defaultNavigateOptions = {\n                trigger: true,\n                replace: false,\n                intent: null,\n            };\n            return Router;\n        }());\n        Framework.Router = Router;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        var Promise = CDP.Promise;\n        var TAG = \"[CDP.Framework.Page] \";\n        /**\n         * \\~english\n         * @class Page\n         * @brief Base class of all page unit.\n         *\n         * \\~japanese\n         * @class Page\n         * @brief \n         */\n        var Page = /** @class */ (function () {\n            //////////////////////////////////////////\n            // public methods\n            /**\n             * \\~english\n             * constructor\n             *\n             * @param _url    {String}               [in] page's URL\n             * @param _id     {String}               [in] page's ID\n             * @param options {PageConstructOptions} [in] options\n             *\n             * \\~japanese\n             * constructor\n             *\n             * @param _url    {String}               [in]  URL\n             * @param _id     {String}               [in]  ID\n             * @param options {PageConstructOptions} [in] \n             */\n            function Page(_url, _id, options) {\n                this._url = _url;\n                this._id = _id;\n                this.setup(options);\n            }\n            Object.defineProperty(Page.prototype, \"active\", {\n                //////////////////////////////////////////\n                // public accessor\n                get: function () { return !!this._$page && this._$page.hasClass(\"ui-page-active\"); },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"url\", {\n                get: function () { return this._url; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"id\", {\n                get: function () { return this._id; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$page\", {\n                get: function () { return this._$page; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$header\", {\n                get: function () { return this._$header; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$footer\", {\n                get: function () { return this._$footer; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"intent\", {\n                get: function () { return this._intent; },\n                set: function (newIntent) { this._intent = newIntent; this._intent._update = true; },\n                enumerable: true,\n                configurable: true\n            });\n            //////////////////////////////////////////\n            // public Event Handler\n            //! Orientation \n            Page.prototype.onOrientationChanged = function (newOrientation) {\n                if (this._owner) {\n                    this._owner.onOrientationChanged(newOrientation);\n                }\n            };\n            //! H/W Back Button \n            Page.prototype.onHardwareBackButton = function (event) {\n                if (this._owner) {\n                    return this._owner.onHardwareBackButton(event);\n                }\n                else {\n                    return false;\n                }\n            };\n            //! Router \"before route change\" \n            Page.prototype.onBeforeRouteChange = function () {\n                if (this._owner) {\n                    return this._owner.onBeforeRouteChange();\n                }\n                else {\n                    return Promise.resolve();\n                }\n            };\n            //! \n            Page.prototype.onCommand = function (event, kind) {\n                if (this._owner) {\n                    return this._owner.onCommand(event, kind);\n                }\n                else {\n                    return false;\n                }\n            };\n            //!  OnPageInit() \n            Page.prototype.onInitialize = function (event) {\n                if (this._owner) {\n                    this._owner.onInitialize(event);\n                }\n            };\n            //! jQM event: \"pagebeforecreate\" \n            Page.prototype.onPageBeforeCreate = function (event) {\n                if (this._owner) {\n                    this._owner.onPageBeforeCreate(event);\n                }\n            };\n            //! jQM event: \"pagecreate\" (:\"pageinit\") \n            Page.prototype.onPageInit = function (event) {\n                if (this._owner) {\n                    this._owner.onPageInit(event);\n                }\n            };\n            //! jQM event: \"pagebeforeshow\" \n            Page.prototype.onPageBeforeShow = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageBeforeShow(event, data);\n                }\n            };\n            //! jQM event: \"pagecontainershow\" (:\"pageshow\") \n            Page.prototype.onPageShow = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageShow(event, data);\n                }\n            };\n            //! jQM event: \"pagebeforehide\" \n            Page.prototype.onPageBeforeHide = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageBeforeHide(event, data);\n                }\n            };\n            //! jQM event: \"pagecontainerhide\" (:\"pagehide\") \n            Page.prototype.onPageHide = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageHide(event, data);\n                }\n            };\n            //! jQM event: \"pageremove\" \n            Page.prototype.onPageRemove = function (event) {\n                if (this._owner) {\n                    this._owner.onPageRemove(event);\n                }\n            };\n            //////////////////////////////////////////\n            // private methods\n            //! mixin \n            Page.prototype.setup = function (options) {\n                var _this = this;\n                // mixin destination \n                this._initialized = false;\n                this._intent = null;\n                // \n                var selector = \"#\" + this._id;\n                $(document)\n                    .off(\"pagebeforecreate\", selector)\n                    .on(\"pagebeforecreate\", selector, function (event) {\n                    _this._$page = $(selector).first();\n                    _this._$header = _this._$page.children(\":jqmData(role=header)\").first();\n                    _this._$footer = _this._$page.children(\":jqmData(role=footer)\").first();\n                    _this._$page\n                        .on(\"pagecreate\", function (ev) {\n                        _this.pageInit(ev);\n                    })\n                        .on(\"pagebeforeshow\", function (ev, data) {\n                        _this.pageBeforeShow(ev, data);\n                    })\n                        .on(\"pageshow\", function (ev, data) {\n                        _this.pageShow(ev, data);\n                    })\n                        .on(\"pagebeforehide\", function (ev, data) {\n                        _this.pageBeforeHide(ev, data);\n                    })\n                        .on(\"pagehide\", function (ev, data) {\n                        _this.pageHide(ev, data);\n                    })\n                        .on(\"pageremove\", function (ev) {\n                        _this.pageRemove(ev);\n                    });\n                    _this.pageBeforeCreate(event);\n                });\n                options = options || {};\n                // owner \n                this._owner = options.owner;\n                // intent \n                this._keepIntent = options.keepIntent;\n                // Router \n                if (null == options.route) {\n                    options.route = this._id;\n                }\n                Framework.Router.register(options.route, this._url, options.top, options.callback);\n            };\n            //! PageTransitionDirection \n            Page.prototype.getDirection = function () {\n                var activeIndex = Framework.Router.getJqmHistory().activeIndex;\n                var prevIndex = Framework.Router.getJqmHistory().previousIndex;\n                if (null == activeIndex || null == prevIndex) {\n                    return \"unknown\";\n                }\n                else if (prevIndex === activeIndex) {\n                    return \"same\";\n                }\n                else if (activeIndex < prevIndex) {\n                    return \"back\";\n                }\n                else {\n                    return \"forward\";\n                }\n            };\n            Page.prototype.pageBeforeCreate = function (event) {\n                this.onPageBeforeCreate(event);\n            };\n            Page.prototype.pageInit = function (event) {\n                if (!this._initialized) {\n                    this.onInitialize(event);\n                    this._initialized = true;\n                }\n                this.onPageInit(event);\n            };\n            Page.prototype.pageBeforeShow = function (event, data) {\n                Framework.setActivePage(this);\n                this._intent = Framework.Router.popIntent();\n                this.onPageBeforeShow(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageShow = function (event, data) {\n                this.onPageShow(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageBeforeHide = function (event, data) {\n                this.onPageBeforeHide(event, $.extend(data, { direction: this.getDirection() }));\n                if (null != this._intent && (this._keepIntent || this._intent._update)) {\n                    delete this._intent._update;\n                    Framework.Router.pushIntent(this._intent);\n                }\n                else if (Framework.Router.fromHashChanged() && Framework.Router.isInSubFlow()) {\n                    Framework.Router.pushIntent(this._intent);\n                }\n                this._intent = null;\n                Framework.setActivePage(null);\n            };\n            Page.prototype.pageHide = function (event, data) {\n                this.onPageHide(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageRemove = function (event) {\n                this.onPageRemove(event);\n                this._$page.off();\n                this._$page = null;\n                this._$header.off();\n                this._$header = null;\n                this._$footer.off();\n                this._$footer = null;\n            };\n            return Page;\n        }());\n        Framework.Page = Page;\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        /*\n         * jQM1.4 duplicate  \"pageshow\", \"pagehide\" \n         * http://jquerymobile.com/upgrade-guide/1.4/#navigation\n         *\n         * \n         * Forum \n         * https://github.com/jquery/jquery-mobile/issues/6865\n         *\n         * [] \n         *  - (1.4+) http://jqmtricks.wordpress.com/2014/03/26/jquery-mobile-page-events/\n         *  - (~1.3) http://dev.screw-axis.com/doc/jquery_mobile/resources/cheatsheet/\n         *\n         * \n         *\n         * \"pagehide\" \n         * DOM onPageHide() \n         *\n         * \n         * onPageBeforeHide()  post  onPageHide() ()\n         *\n         * 2015/03/25 :\n         * . jQM1.6 \n         *  jQM1.4  plugin  cdp.framework.jqm \n         *  https://github.com/arschmitz/jquery-mobile-onpage\n         *\n         * \n         * https://github.com/jquery/jquery-mobile/issues/7283#issuecomment-40746622\n         */\n        /*\n            // bind \"pagecontainershow\", and \"pagecontainerhide\".\n            (() => {\n                let $body: any = $(\"body\");\n                $(document)\n                    .on(\"pagecontainershow\", (event: JQuery.Event, data: ShowEventData) => {\n                        if (0 < data.prevPage.length) {\n                            // \"pagecontainershow\"  \"pagecontainerhide\"  DOM \n                            let $prevpage = $(\"#\" + data.prevPage[0].id);\n                            $prevpage.trigger(\"_pagehide\", data);\n                        }\n                        // \"pagecontainershow\"  \"pageshow\" \n                        let pageId = $body.pagecontainer(\"getActivePage\").prop(\"id\");\n                        let $page = $(\"#\" + pageId);\n                        $page.trigger(\"_pageshow\", data);\n                    })\n                    .on(\"pagecontainerhide\", (event: JQuery.Event, data: HideEventData) => {\n                        // \"pagecontainerhide\"  DOM page \n                        //let pageId = $body.pagecontainer('getActivePage').prop(\"id\");\n                        //let $page = $(\"#\" + pageId);\n                        //$page.trigger(\"_pagehide\", data);\n                    })\n                    .on(\"pagecontainertransition\", (event: JQuery.Event, data: any) => {\n                        // \"pagecontainertransition\"  toPage \n                    })\n                ;\n            })();\n        */\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\nreturn CDP.Framework; }));\n\n}.call(window));\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n * jQuery Migrate - v3.0.1-hotfix - 2017-01-11\n * Copyright jQuery Foundation and other contributors\n */\n; (function (factory) {\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {\n            return factory($, window);\n        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else if (typeof module === \"object\" && module.exports) {\n        // Node/CommonJS\n        // eslint-disable-next-line no-undef\n        module.exports = factory(require(\"jquery\"), window);\n    } else {\n        // Browser globals\n        factory(jQuery, window);\n    }\n})(function (jQuery, window) {\n    \"use strict\";\n\n    jQuery.migrateVersion = \"3.0.1-hotfix\"; // with hotfix\n\n    /* exported migrateWarn, migrateWarnFunc, migrateWarnProp */\n\n    (function () {\n\n        // Support: IE9 only\n        // IE9 only creates console object when dev tools are first opened\n        // Also, avoid Function#bind here to simplify PhantomJS usage\n        var log = window.console && window.console.log &&\n            function () {\n                window.console.log.apply(window.console, arguments);\n            },\n            rbadVersions = /^[12]\\./;\n\n        if (!log) {\n            return;\n        }\n\n        // Need jQuery 3.0.0+ and no older Migrate loaded\n        if (!jQuery || rbadVersions.test(jQuery.fn.jquery)) {\n            log(\"JQMIGRATE: jQuery 3.0.0+ REQUIRED\");\n        }\n        if (jQuery.migrateWarnings) {\n            log(\"JQMIGRATE: Migrate plugin loaded multiple times\");\n        }\n\n        // Show a message on the console so devs know we're active\n        if (!jQuery.migrateMute) {\n            log(\"JQMIGRATE: Migrate is installed\" +\n                (jQuery.migrateMute ? \"\" : \" with logging active\") +\n                \", version \" + jQuery.migrateVersion);\n        }\n    })();\n\n    var warnedAbout = {};\n\n    // List of warnings already given; public read only\n    jQuery.migrateWarnings = [];\n\n    // Set to false to disable traces that appear with warnings\n    if (jQuery.migrateTrace === undefined) {\n        jQuery.migrateTrace = true;\n    }\n\n    // Forget any warnings we've already given; public\n    jQuery.migrateReset = function () {\n        warnedAbout = {};\n        jQuery.migrateWarnings.length = 0;\n    };\n\n    function migrateWarn(msg) {\n        var console = window.console;\n        if (!warnedAbout[msg]) {\n            warnedAbout[msg] = true;\n            jQuery.migrateWarnings.push(msg);\n            if (console && console.warn && !jQuery.migrateMute) {\n                console.warn(\"JQMIGRATE: \" + msg);\n                if (jQuery.migrateTrace && console.trace) {\n                    console.trace();\n                }\n            }\n        }\n    }\n\n    function migrateWarnProp(obj, prop, value, msg) {\n        Object.defineProperty(obj, prop, {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                migrateWarn(msg);\n                return value;\n            },\n            set: function (newValue) {\n                migrateWarn(msg);\n                value = newValue;\n            }\n        });\n    }\n\n    function migrateWarnFunc(obj, prop, newFunc, msg) {\n        obj[prop] = function () {\n            migrateWarn(msg);\n            return newFunc.apply(this, arguments);\n        };\n    }\n\n    if (window.document.compatMode === \"BackCompat\") {\n        // JQuery has never supported or tested Quirks Mode\n        migrateWarn(\"jQuery is not compatible with Quirks Mode\");\n    }\n\n\n    var oldInit = jQuery.fn.init,\n        oldIsNumeric = jQuery.isNumeric,\n        oldFind = jQuery.find,\n        rattrHashTest = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/,\n        rattrHashGlob = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/g;\n\n    jQuery.fn.init = function (arg1) {\n        var args = Array.prototype.slice.call(arguments);\n\n        if (typeof arg1 === \"string\" && arg1 === \"#\") {\n            // JQuery( \"#\" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0\n            migrateWarn(\"jQuery( '#' ) is not a valid selector\");\n            args[0] = [];\n        }\n\n        return oldInit.apply(this, args);\n    };\n    jQuery.fn.init.prototype = jQuery.fn;\n\n    jQuery.find = function (selector) {\n        var args = Array.prototype.slice.call(arguments);\n\n        // Support: PhantomJS 1.x\n        // String#match fails to match when used with a //g RegExp, only on some strings\n        if (typeof selector === \"string\" && rattrHashTest.test(selector)) {\n            // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0\n            // First see if qS thinks it's a valid selector, if so avoid a false positive\n            try {\n                window.document.querySelector(selector);\n            } catch (err1) {\n                // Didn't *look* valid to qSA, warn and try quoting what we think is the value\n                selector = selector.replace(rattrHashGlob, function (_, attr, op, value) {\n                    return \"[\" + attr + op + \"\\\"\" + value + \"\\\"]\";\n                });\n\n                // If the regexp *may* have created an invalid selector, don't update it\n                // Note that there may be false alarms if selector uses jQuery extensions\n                try {\n                    window.document.querySelector(selector);\n                    migrateWarn(\"Attribute selector with '#' must be quoted: \" + args[0]);\n                    args[0] = selector;\n                } catch (err2) {\n                    migrateWarn(\"Attribute selector with '#' was not fixed: \" + args[0]);\n                }\n            }\n        }\n\n        return oldFind.apply(this, args);\n    };\n\n    // Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)\n    var findProp;\n    for (findProp in oldFind) {\n        if (Object.prototype.hasOwnProperty.call(oldFind, findProp)) {\n            jQuery.find[findProp] = oldFind[findProp];\n        }\n    }\n\n    // The number of elements contained in the matched element set\n    jQuery.fn.size = function () {\n        migrateWarn(\"jQuery.fn.size() is deprecated and removed; use the .length property\");\n        return this.length;\n    };\n\n    jQuery.parseJSON = function () {\n        migrateWarn(\"jQuery.parseJSON is deprecated; use JSON.parse\");\n        return JSON.parse.apply(null, arguments);\n    };\n\n    jQuery.isNumeric = function (val) {\n        // The jQuery 2.2.3 implementation of isNumeric\n        function isNumeric2(obj) {\n            var realStringObj = obj && obj.toString();\n            return !jQuery.isArray(obj) && (realStringObj - parseFloat(realStringObj) + 1) >= 0;\n        }\n\n        var newValue = oldIsNumeric(val),\n            oldValue = isNumeric2(val);\n\n        if (newValue !== oldValue) {\n            migrateWarn(\"jQuery.isNumeric() should not be called on constructed objects\");\n        }\n\n        return oldValue;\n    };\n\n    migrateWarnFunc(jQuery, \"unique\", jQuery.uniqueSort,\n        \"jQuery.unique is deprecated; use jQuery.uniqueSort\");\n\n    // Now jQuery.expr.pseudos is the standard incantation\n    migrateWarnProp(jQuery.expr, \"filters\", jQuery.expr.pseudos,\n        \"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos\");\n    migrateWarnProp(jQuery.expr, \":\", jQuery.expr.pseudos,\n        \"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos\");\n\n\n    var oldAjax = jQuery.ajax;\n\n    jQuery.ajax = function () {\n        var jQXHR = oldAjax.apply(this, arguments);\n\n        // Be sure we got a jQXHR (e.g., not sync)\n        if (jQXHR.promise) {\n            migrateWarnFunc(jQXHR, \"success\", jQXHR.done,\n                \"jQXHR.success is deprecated and removed\");\n            migrateWarnFunc(jQXHR, \"error\", jQXHR.fail,\n                \"jQXHR.error is deprecated and removed\");\n            migrateWarnFunc(jQXHR, \"complete\", jQXHR.always,\n                \"jQXHR.complete is deprecated and removed\");\n        }\n\n        return jQXHR;\n    };\n\n\n    var oldRemoveAttr = jQuery.fn.removeAttr,\n        oldToggleClass = jQuery.fn.toggleClass,\n        rmatchNonSpace = /\\S+/g;\n\n    jQuery.fn.removeAttr = function (name) {\n        var self = this;\n\n        jQuery.each(name.match(rmatchNonSpace), function (i, attr) {\n            if (jQuery.expr.match.bool.test(attr)) {\n                migrateWarn(\"jQuery.fn.removeAttr no longer sets boolean properties: \" + attr);\n                self.prop(attr, false);\n            }\n        });\n\n        return oldRemoveAttr.apply(this, arguments);\n    };\n\n    jQuery.fn.toggleClass = function (state) {\n        // Only deprecating no-args or single boolean arg\n        if (state !== undefined && typeof state !== \"boolean\") {\n            return oldToggleClass.apply(this, arguments);\n        }\n\n        migrateWarn(\"jQuery.fn.toggleClass( boolean ) is deprecated\");\n\n        // Toggle entire class name of each element\n        return this.each(function () {\n            var className = this.getAttribute && this.getAttribute(\"class\") || \"\";\n\n            if (className) {\n                jQuery.data(this, \"__className__\", className);\n            }\n\n            // If the element has a class name or if we're passed `false`,\n            // then remove the whole classname (if there was one, the above saved it).\n            // Otherwise bring back whatever was previously saved (if anything),\n            // falling back to the empty string if nothing was stored.\n            if (this.setAttribute) {\n                this.setAttribute(\"class\",\n                    className || state === false ?\n                    \"\" :\n                    jQuery.data(this, \"__className__\") || \"\"\n                );\n            }\n        });\n    };\n\n\n    var internalSwapCall = false;\n\n    // If this version of jQuery has .swap(), don't false-alarm on internal uses\n    if (jQuery.swap) {\n        jQuery.each([\"height\", \"width\", \"reliableMarginRight\"], function (_, name) {\n            var oldHook = jQuery.cssHooks[name] && jQuery.cssHooks[name].get;\n\n            if (oldHook) {\n                jQuery.cssHooks[name].get = function () {\n                    var ret;\n\n                    internalSwapCall = true;\n                    ret = oldHook.apply(this, arguments);\n                    internalSwapCall = false;\n                    return ret;\n                };\n            }\n        });\n    }\n\n    jQuery.swap = function (elem, options, callback, args) {\n        var ret, name,\n            old = {};\n\n        if (!internalSwapCall) {\n            migrateWarn(\"jQuery.swap() is undocumented and deprecated\");\n        }\n\n        // Remember the old values, and insert the new ones\n        for (name in options) {\n            old[name] = elem.style[name];\n            elem.style[name] = options[name];\n        }\n\n        ret = callback.apply(elem, args || []);\n\n        // Revert the old values\n        for (name in options) {\n            elem.style[name] = old[name];\n        }\n\n        return ret;\n    };\n\n    var oldData = jQuery.data;\n\n    jQuery.data = function (elem, name, value) {\n        var curData;\n\n        // Name can be an object, and each entry in the object is meant to be set as data\n        if (name && typeof name === \"object\" && arguments.length === 2) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            var sameKeys = {};\n            for (var key in name) {\n                if (key !== jQuery.camelCase(key)) {\n                    migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + key);\n                    curData[key] = name[key];\n                } else {\n                    sameKeys[key] = name[key];\n                }\n            }\n\n            oldData.call(this, elem, sameKeys);\n\n            return name;\n        }\n\n        // If the name is transformed, look for the un-transformed name in the data object\n        if (name && typeof name === \"string\" && name !== jQuery.camelCase(name)) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            if (curData && name in curData) {\n                migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + name);\n                if (arguments.length > 2) {\n                    curData[name] = value;\n                }\n                return curData[name];\n            }\n        }\n\n        return oldData.apply(this, arguments);\n    };\n\n    var oldTweenRun = jQuery.Tween.prototype.run;\n\n    jQuery.Tween.prototype.run = function () {\n        if (jQuery.easing[this.easing].length > 1) {\n            migrateWarn(\n                \"easing function \" +\n                \"\\\"jQuery.easing.\" + this.easing.toString() +\n                \"\\\" should use only first argument\"\n            );\n\n            var oldEasing = jQuery.easing[this.easing];\n            jQuery.easing[this.easing] = function (percent) {\n                return oldEasing.call(jQuery.easing, percent, percent, 0, 1, 1);\n            }.bind(this);\n        }\n\n        oldTweenRun.apply(this, arguments);\n    };\n\n    jQuery.fx.interval = jQuery.fx.interval || 13;\n\n    // Support: IE9, Android <=4.4\n    // Avoid false positives on browsers that lack rAF\n    if (window.requestAnimationFrame) {\n        migrateWarnProp(jQuery.fx, \"interval\", jQuery.fx.interval,\n            \"jQuery.fx.interval is deprecated\");\n    }\n\n    var oldLoad = jQuery.fn.load,\n        oldEventAdd = jQuery.event.add,\n        originalFix = jQuery.event.fix;\n\n    jQuery.event.props = [];\n    jQuery.event.fixHooks = {};\n\n    migrateWarnProp(jQuery.event.props, \"concat\", jQuery.event.props.concat,\n        \"jQuery.event.props.concat() is deprecated and removed\");\n\n    jQuery.event.fix = function (originalEvent) {\n        var event,\n            type = originalEvent.type,\n            fixHook = this.fixHooks[type],\n            props = jQuery.event.props;\n\n        if (props.length) {\n            migrateWarn(\"jQuery.event.props are deprecated and removed: \" + props.join());\n            while (props.length) {\n                jQuery.event.addProp(props.pop());\n            }\n        }\n\n        if (fixHook && !fixHook._migrated_) {\n            fixHook._migrated_ = true;\n            migrateWarn(\"jQuery.event.fixHooks are deprecated and removed: \" + type);\n            if ((props = fixHook.props) && props.length) {\n                while (props.length) {\n                    jQuery.event.addProp(props.pop());\n                }\n            }\n        }\n\n        event = originalFix.call(this, originalEvent);\n\n        return fixHook && fixHook.filter ? fixHook.filter(event, originalEvent) : event;\n    };\n\n    jQuery.event.add = function (elem, types) {\n        // This misses the multiple-types case but that seems awfully rare\n        if (elem === window && types === \"load\" && window.document.readyState === \"complete\") {\n            migrateWarn(\"jQuery(window).on('load'...) called after load event occurred\");\n        }\n        return oldEventAdd.apply(this, arguments);\n    };\n\n    jQuery.each([\"load\", \"unload\", \"error\"], function (_, name) {\n\n        jQuery.fn[name] = function () {\n            var args = Array.prototype.slice.call(arguments, 0);\n\n            // If this is an ajax load() the first arg should be the string URL;\n            // technically this could also be the \"Anything\" arg of the event .load()\n            // which just goes to show why this dumb signature has been deprecated!\n            // jQuery custom builds that exclude the Ajax module justifiably die here.\n            if (name === \"load\" && typeof args[0] === \"string\") {\n                return oldLoad.apply(this, args);\n            }\n\n            migrateWarn(\"jQuery.fn.\" + name + \"() is deprecated\");\n\n            args.splice(0, 0, name);\n            if (arguments.length) {\n                return this.on.apply(this, args);\n            }\n\n            // Use .triggerHandler here because:\n            // - load and unload events don't need to bubble, only applied to window or image\n            // - error event should not bubble to window, although it does pre-1.7\n            // See http://bugs.jquery.com/ticket/11820\n            this.triggerHandler.apply(this, args);\n            return this;\n        };\n\n    });\n\n    // Trigger \"ready\" event only once, on document ready\n    jQuery(function () {\n        jQuery(window.document).triggerHandler(\"ready\");\n    });\n\n    jQuery.event.special.ready = {\n        setup: function () {\n            if (this === window.document) {\n                migrateWarn(\"'ready' event is deprecated\");\n            }\n        }\n    };\n\n    jQuery.fn.extend({\n        bind: function (types, data, fn) {\n            migrateWarn(\"jQuery.fn.bind() is deprecated\");\n            return this.on(types, null, data, fn);\n        },\n        unbind: function (types, fn) {\n            migrateWarn(\"jQuery.fn.unbind() is deprecated\");\n            return this.off(types, null, fn);\n        },\n        delegate: function (selector, types, data, fn) {\n            migrateWarn(\"jQuery.fn.delegate() is deprecated\");\n            return this.on(types, selector, data, fn);\n        },\n        undelegate: function (selector, types, fn) {\n            migrateWarn(\"jQuery.fn.undelegate() is deprecated\");\n            return arguments.length === 1 ?\n                this.off(selector, \"**\") :\n                this.off(types, selector || \"**\", fn);\n        }\n    });\n\n\n    var oldOffset = jQuery.fn.offset;\n\n    jQuery.fn.offset = function () {\n        var docElem,\n            elem = this[0],\n            origin = { top: 0, left: 0 };\n\n        if (!elem || !elem.nodeType) {\n            migrateWarn(\"jQuery.fn.offset() requires a valid DOM element\");\n            return origin;\n        }\n\n        docElem = (elem.ownerDocument || window.document).documentElement;\n        if (!jQuery.contains(docElem, elem)) {\n            migrateWarn(\"jQuery.fn.offset() requires an element connected to a document\");\n            return origin;\n        }\n\n        return oldOffset.apply(this, arguments);\n    };\n\n\n    var oldParam = jQuery.param;\n\n    jQuery.param = function (data, traditional) {\n        var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\n        if (traditional === undefined && ajaxTraditional) {\n            migrateWarn(\"jQuery.param() no longer uses jQuery.ajaxSettings.traditional\");\n            traditional = ajaxTraditional;\n        }\n\n        return oldParam.call(this, data, traditional);\n    };\n\n    var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\n\n    jQuery.fn.andSelf = function () {\n        migrateWarn(\"jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()\");\n        return oldSelf.apply(this, arguments);\n    };\n\n\n    var oldDeferred = jQuery.Deferred,\n        tuples = [\n            // Action, add listener, callbacks, .then handlers, final state\n            [\"resolve\", \"done\", jQuery.Callbacks(\"once memory\"),\n                jQuery.Callbacks(\"once memory\"), \"resolved\"],\n            [\"reject\", \"fail\", jQuery.Callbacks(\"once memory\"),\n                jQuery.Callbacks(\"once memory\"), \"rejected\"],\n            [\"notify\", \"progress\", jQuery.Callbacks(\"memory\"),\n                jQuery.Callbacks(\"memory\")]\n        ];\n\n    jQuery.Deferred = function (func) {\n        var deferred = oldDeferred(),\n            promise = deferred.promise();\n\n        deferred.pipe = promise.pipe = function ( /* fnDone, fnFail, fnProgress */) {\n            var fns = arguments;\n\n            migrateWarn(\"deferred.pipe() is deprecated\");\n\n            return jQuery.Deferred(function (newDefer) {\n                jQuery.each(tuples, function (i, tuple) {\n                    var fn = jQuery.isFunction(fns[i]) && fns[i];\n\n                    // Deferred.done(function() { bind to newDefer or newDefer.resolve })\n                    // deferred.fail(function() { bind to newDefer or newDefer.reject })\n                    // deferred.progress(function() { bind to newDefer or newDefer.notify })\n                    deferred[tuple[1]](function () {\n                        var returned = fn && fn.apply(this, arguments);\n                        if (returned && jQuery.isFunction(returned.promise)) {\n                            returned.promise()\n                                .done(newDefer.resolve)\n                                .fail(newDefer.reject)\n                                .progress(newDefer.notify);\n                        } else {\n                            newDefer[tuple[0] + \"With\"](\n                                this === promise ? newDefer.promise() : this,\n                                fn ? [returned] : arguments\n                            );\n                        }\n                    });\n                });\n                fns = null;\n            }).promise();\n\n        };\n\n        if (func) {\n            func.call(deferred, deferred);\n        }\n\n        return deferred;\n    };\n\n\n    return jQuery;\n});\n\n}.call(window));\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjNTZlZjEzNzMxOTVmNzlhYWQ5YiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvIHtcInJvb3RcIjpcImpRdWVyeVwiLFwiY29tbW9uanNcIjpcImpxdWVyeVwiLFwiY29tbW9uanMyXCI6XCJqcXVlcnlcIixcImFtZFwiOlwianF1ZXJ5XCJ9Iiwid2VicGFjazovLy9leHRlcm5hbC9qcXVlcnkvc2NyaXB0cy9qcXVlcnkubW9iaWxlLmpzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvSW50ZXJmYWNlcy50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0Vycm9yRGVmcy50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL1BsYXRmb3JtLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGF0Y2gudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9PcmllbnRhdGlvbi50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0NvcmVBUEkudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Sb3V0ZXIudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYWdlLnRzIiwid2VicGFjazovLy9leHRlcm5hbC8ge1wicm9vdFwiOlwiQ0RQXCIsXCJjb21tb25qc1wiOlwiY2RwLmkxOG5cIixcImNvbW1vbmpzMlwiOlwiY2RwLmkxOG5cIixcImFtZFwiOlwiY2RwLmkxOG5cIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsLyB7XCJyb290XCI6XCJCYWNrYm9uZVwiLFwiY29tbW9uanNcIjpcImJhY2tib25lXCIsXCJjb21tb25qczJcIjpcImJhY2tib25lXCIsXCJhbWRcIjpcImJhY2tib25lXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbC9qcXVlcnkvc2NyaXB0cy9qcXVlcnktbWlncmF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7QUM3REEsK0M7Ozs7OztBQ0FBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFBQTtBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7Ozs7OztBQU1BO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5QkFBeUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEUsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJCQUEyQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFD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RUE7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCOztBQUUvQjtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUVGO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7O0FBSUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsV0FBVyxFQUFFO0FBQ2xGLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHVDQUF1QztBQUN2Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOzs7O0FBSUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBLGVBQWUsWUFBWTtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZDQUE2QyxTQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxlQUFlO0FBQ2Y7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFlBQVksOEJBQThCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLHFCQUFxQjtBQUMxRixLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdFQUFnRSx5REFBeUQ7QUFDekgsbUVBQW1FLHlEQUF5RDtBQUM1SDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7QUFLRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOENBQThDOztBQUUvRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGlFQUFpRSxrQkFBa0I7QUFDbkYsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyx1Q0FBdUM7QUFDL0UsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvQ0FBb0M7O0FBRS9EO0FBQ0EsYUFBYSxvQ0FBb0M7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIscUNBQXFDO0FBQ2hFLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLGdFQUFnRTtBQUN2RjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQyxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZCQUE2QixLQUFLOztBQUUxQztBQUNBLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFdBQVc7QUFDbEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixzQkFBc0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsMkRBQTJEO0FBQ2xGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtB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QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLGdEQUFnRDtBQUNuRSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUMsYUFBYTtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsV0FBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSw4Q0FBOEMsa0JBQWtCO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHVDQUF1QztBQUM5RCxxQ0FBcUMsZ0NBQWdDOztBQUVyRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLDRGQUE0RjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLHVDQUF1QztBQUN2QztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtDQUErQztBQUMvQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsMEJBQTBCLDhCQUE4QjtBQUN4RCwrQ0FBK0MsNEJBQTRCO0FBQzNFO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUosaUNBQWlDLHlCQUF5QjtBQUMxRCxzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLGdDQUFnQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsc0NBQXNDO0FBQ2xFLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxhQUFhLDZCQUE2QjtBQUMxQzs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxpQ0FBaUMsRUFBRTs7QUFFeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixnREFBZ0Q7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkJBQTJCLGlCQUFpQjs7QUFFNUM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLElBQUkscUNBQXFDO0FBQ3pDLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBLGdCQUFnQix1QkFBdUI7O0FBRXZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQixvQkFBb0I7QUFDcEM7QUFDQTs7QUFFQTtBQUNBLElBQUksNkNBQTZDOztBQUVqRDtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qzs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0Esb0RBQW9ELHlCQUF5QjtBQUM3RSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkRBQTJEOztBQUUzRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUNBQXlDO0FBQ3JFO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxxREFBcUQseUJBQXlCO0FBQzlFO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQzs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHdDQUF3QztBQUNyRCxnQkFBZ0Isd0NBQXdDO0FBQ3hEO0FBQ0E7O0FBRUE7O0FBRUEsY0FBYyx1Q0FBdUM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QjtBQUN2QixrQkFBa0I7QUFDbEIsb0JBQW9COztBQUVwQjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsb0lBQW9JO0FBQzdJLFNBQVMseUpBQXlKO0FBQ2xLLFNBQVMsMEpBQTBKO0FBQ25LLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSwwQkFBMEIsc0NBQXNDO0FBQ2hFLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtDQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdEQUFnRCxhQUFhLEVBQUU7QUFDL0QsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IseUJBQXlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRCwwQkFBMEIsMkJBQTJCOztBQUVyRDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0NBQXdDO0FBQ3hEO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOzs7QUFHRCxDQUFDOztBQUVELENBQUMsZTs7Ozs7Ozs7Ozs7QUNsbWVELGtDQUFrQztBQUVsQyxJQUFVLEdBQUcsQ0FrbkJaO0FBbG5CRCxXQUFVLEdBQUc7SUFBQyxhQUFTLENBa25CdEI7SUFsbkJhLG9CQUFTO1FBSU4sZUFBSyxHQUF3QyxRQUFRLENBQUMsS0FBSyxDQUFDO1FBRTVELG9CQUFVLEdBQW1DLFFBQVEsQ0FBQyxVQUFVLENBQUM7UUFFakUsY0FBSSxHQUF5QyxRQUFRLENBQUMsSUFBSSxDQUFDO1FBRTNELGdCQUFNLEdBQXVDLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUF3bUI5RSxDQUFDLEVBbG5CYSxTQUFTLEdBQVQsYUFBUyxLQUFULGFBQVMsUUFrbkJ0QjtBQUFELENBQUMsRUFsbkJTLEdBQUcsS0FBSCxHQUFHLFFBa25CWjtBQ3BuQkQsSUFBVSxHQUFHLENBcUNaO0FBckNELFdBQVUsR0FBRztJQUVUOzs7T0FHRztJQUNILElBQVksZ0JBR1g7SUFIRCxXQUFZLGdCQUFnQjtRQUN4QixxR0FBK0I7UUFDL0IscURBQWdCLENBQUMsR0FBRyxpQ0FBNkI7SUFDckQsQ0FBQyxFQUhXLGdCQUFnQixHQUFoQixvQkFBZ0IsS0FBaEIsb0JBQWdCLFFBRzNCO0lBRUQsdUVBQXVFO0lBQ3ZFLDRCQUE0QjtJQUU1QixJQUFNLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztJQUUvQjs7O09BR0c7SUFDSCxJQUFLLGVBSUo7SUFKRCxXQUFLLGVBQWU7UUFDaEIsNkRBQWU7UUFDZiw0Q0FBYyxDQUFDLEdBQUcsbUJBQW1CO1FBQ3JDLDBDQUFjLENBQUMsR0FBRyxtQkFBbUI7SUFDekMsQ0FBQyxFQUpJLGVBQWUsS0FBZixlQUFlLFFBSW5CO0lBRUQsb0NBQW9DO0lBQ3BDOzs7T0FHRztJQUNILElBQVksV0FJWDtJQUpELFdBQVksV0FBVztRQUNuQixtR0FBbUQ7UUFDbkQsbUVBQWtELHNCQUFrQixDQUFDLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxlQUFlLENBQUMsUUFBUSxHQUFHLENBQUMsRUFBRSw4QkFBOEIsQ0FBQztRQUNsSywwRUFBa0Qsc0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxFQUFFLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLDJCQUEyQixDQUFDO0lBQ2pLLENBQUMsRUFKVyxXQUFXLEdBQVgsZUFBVyxLQUFYLGVBQVcsUUFJdEI7SUFDRCxtQ0FBbUM7QUFDdkMsQ0FBQyxFQXJDUyxHQUFHLEtBQUgsR0FBRyxRQXFDWjtBQ3JDRCxvQ0FBb0M7QUFFcEMsSUFBVSxHQUFHLENBcUNaO0FBckNELFdBQVUsR0FBRztJQUFDLGFBQVMsQ0FxQ3RCO0lBckNhLG9CQUFTO1FBRW5COzs7V0FHRztRQUNVLGtCQUFRLEdBQUcsQ0FBQztZQUNyQixJQUFNLEVBQUUsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBRTdDLElBQU0sWUFBWSxHQUFHLFVBQVUsT0FBZTtnQkFDMUMsSUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEdBQUcsT0FBTyxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQztnQkFDdkUsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNqQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNiLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDcEMsQ0FBQyxDQUFDO1lBRUYsTUFBTSxDQUFDO2dCQUNILEtBQUssRUFBRSxPQUFPLE1BQU0sQ0FBQyxnQkFBZ0IsS0FBSyxXQUFXLElBQUksT0FBYSxRQUFRLENBQUMsZUFBZ0IsQ0FBQyxLQUFLLENBQUMsU0FBUyxLQUFLLFdBQVc7Z0JBQy9ILEtBQUssRUFBRSxPQUFPLE1BQU0sQ0FBQyxnQkFBZ0IsS0FBSyxXQUFXLElBQUksT0FBTyxRQUFRLENBQUMsZ0JBQWdCLEtBQUssV0FBVztnQkFDekcsS0FBSyxFQUFFLE9BQU8sTUFBTSxDQUFDLGdCQUFnQixLQUFLLFdBQVcsSUFBSSxPQUFPLFFBQVEsQ0FBQyxzQkFBc0IsS0FBSyxXQUFXO2dCQUMvRyxLQUFLLEVBQVEsUUFBUyxDQUFDLFFBQVEsSUFBSSxPQUFPLE1BQU0sQ0FBQyxVQUFVLEtBQUssV0FBVztnQkFDM0UsTUFBTSxFQUFRLFFBQVMsQ0FBQyxRQUFRLElBQUksTUFBTSxDQUFDLFVBQVU7Z0JBQ3JELE9BQU8sRUFBUSxRQUFTLENBQUMsUUFBUTtnQkFDakMsS0FBSyxFQUFFLGVBQWUsSUFBVSxRQUFRLENBQUMsZUFBZ0IsQ0FBQyxLQUFLO2dCQUMvRCxNQUFNLEVBQUUsVUFBTSxDQUFDLEtBQUs7Z0JBQ3BCLEtBQUssRUFBRSxVQUFNLENBQUMsTUFBTTtnQkFDcEIsTUFBTSxFQUFFLE9BQU8sVUFBTSxDQUFDLE1BQU0sS0FBSyxXQUFXLElBQUksa0JBQWtCLElBQVUsUUFBUSxDQUFDLGVBQWdCLENBQUMsS0FBSztnQkFDM0csS0FBSyxFQUFFLE9BQU8sVUFBTSxDQUFDLFlBQVksS0FBSyxXQUFXO2dCQUNqRCxNQUFNLEVBQUUsQ0FBQyxPQUFPLFVBQU0sQ0FBQyxXQUFXLEtBQUssV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUMzRixPQUFPLEVBQUUsT0FBTyxVQUFNLENBQUMsV0FBVyxLQUFLLFdBQVcsSUFBSSxDQUFDLE9BQU8sVUFBTSxDQUFDLFdBQVcsS0FBSyxXQUFXLElBQUksRUFBRSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDaEksT0FBTyxFQUFFLFVBQU0sQ0FBQyxTQUFTLENBQUMsY0FBYztnQkFDeEMsU0FBUyxFQUFFLFVBQU0sQ0FBQyxTQUFTLENBQUMsZ0JBQWdCO2dCQUM1QyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUN2QyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzthQUMvRixDQUFDO1FBQ04sQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNULENBQUMsRUFyQ2EsU0FBUyxHQUFULGFBQVMsS0FBVCxhQUFTLFFBcUN0QjtBQUFELENBQUMsRUFyQ1MsR0FBRyxLQUFILEdBQUcsUUFxQ1o7QUN2Q0QsdUNBQXVDO0FBRXZDLElBQVUsR0FBRyxDQTBLWjtBQTFLRCxXQUFVLEdBQUc7SUFBQyxhQUFTLENBMEt0QjtJQTFLYSxvQkFBUztRQUVuQjs7V0FFRztRQUNILElBQU0sWUFBWSxHQUFHO1lBQ2pCLElBQU0sU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUNyQixVQUFVLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUM7WUFFMUIsSUFBTSxTQUFTLEdBQUcsVUFBVSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsWUFBWSxDQUFDLEdBQUc7Z0JBQ25FLEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQzVCLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDOUMsQ0FBQztnQkFDRCxNQUFNLENBQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzFFLENBQUMsQ0FBQztZQUVGLElBQU0sVUFBVSxHQUFHLFVBQVUsS0FBSyxFQUFFLFFBQVEsRUFBRSxFQUFFO2dCQUM1QyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUssS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUM1QixLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLENBQUM7Z0JBQ0QsTUFBTSxDQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBRSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDaEUsQ0FBQyxDQUFDO1lBRUYscUJBQXFCO1lBQ2YsQ0FBQyxDQUFDLEVBQUcsQ0FBQyxFQUFFLEdBQUcsU0FBUyxDQUFDO1lBQ3JCLENBQUMsQ0FBQyxFQUFHLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQztRQUNqQyxDQUFDLENBQUM7UUFFRjs7Ozs7V0FLRztRQUNILElBQU0sb0NBQW9DLEdBQUc7WUFDekMsSUFBTSx3QkFBd0IsR0FBRyxVQUFVLGtCQUF1QixFQUFFLHFCQUEwQixFQUFFLFFBQWE7Z0JBQ3pHLElBQUksYUFBYSxDQUFDO2dCQUNsQixJQUFNLElBQUksR0FBUSxJQUFJLENBQUM7Z0JBRXZCLGFBQWEsR0FBRztvQkFDWixNQUFNLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRTtvQkFDcEIsU0FBUyxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUU7aUJBQzFCLENBQUM7Z0JBRUYsYUFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBQ3RCLEVBQUUsQ0FBQyxDQUFDLGFBQWEsS0FBSyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQzt3QkFDeEMsa0JBQWtCLEVBQUUsQ0FBQztvQkFDekIsQ0FBQztnQkFDTCxDQUFDLENBQUMsQ0FBQztnQkFFSCxhQUFhLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQztvQkFDekIsRUFBRSxDQUFDLENBQUMsYUFBYSxLQUFLLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO3dCQUN4QyxxQkFBcUIsRUFBRSxDQUFDO29CQUM1QixDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO2dCQUVILENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDO29CQUN2RCxFQUFFLENBQUMsQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7d0JBQ3hDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO3dCQUMzQixRQUFRLEVBQUUsQ0FBQztvQkFDZixDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO2dCQUVILElBQUksQ0FBQyxjQUFjLEdBQUcsYUFBYSxDQUFDO1lBQ3hDLENBQUMsQ0FBQztZQUVGLElBQU0sT0FBTyxHQUFRLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDOUIsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQzNDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsR0FBRyx3QkFBd0IsQ0FBQztZQUNwRixDQUFDO1FBQ0wsQ0FBQyxDQUFDO1FBRUY7Ozs7O1dBS0c7UUFDSCxJQUFNLG1DQUFtQyxHQUFHO1lBQ3hDLElBQU0sdUJBQXVCLEdBQUc7Z0JBQzVCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLGVBQWUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUM3QyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLElBQUksQ0FBQyw0QkFBNEIsQ0FBQzt3QkFDaEUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ2xELG9FQUFvRTt3QkFDcEUscUNBQXFDO3dCQUNyQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUMzRCxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVM7aUNBQ2IsUUFBUSxDQUFDLG1DQUFtQyxDQUFDO2lDQUM3QyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7d0JBQzdCLENBQUM7b0JBQ0wsQ0FBQztnQkFDTCxDQUFDO1lBQ0wsQ0FBQyxDQUFDO1lBRUYsSUFBTSxPQUFPLEdBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUM5QixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDM0MsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLG1CQUFtQixHQUFHLHVCQUF1QixDQUFDO1lBQ2xGLENBQUM7UUFDTCxDQUFDLENBQUM7UUFFRjs7V0FFRztRQUNILElBQU0saUJBQWlCLEdBQUc7WUFDdEIsSUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxJQUFNLFVBQVUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0MsSUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQyxJQUFNLFFBQVEsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRWpDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLElBQUksUUFBUSxHQUFHLENBQUMsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsb0NBQW9DLEVBQUUsQ0FBQztnQkFDdkMsbUNBQW1DLEVBQUUsQ0FBQztZQUMxQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO1FBRUYsdUhBQXVIO1FBRXZIOzs7O1dBSUc7UUFDSDtZQUFBO1lBK0NBLENBQUM7WUEzQ0csdUVBQXVFO1lBQ3ZFLHdCQUF3QjtZQUV4Qjs7Ozs7O2VBTUc7WUFDVyxxQkFBZSxHQUE3QjtnQkFDSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDN0IsWUFBWSxFQUFFLENBQUM7b0JBQ2YsS0FBSyxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUM7Z0JBQ2xDLENBQUM7WUFDTCxDQUFDO1lBRUQ7Ozs7OztlQU1HO1lBQ1csb0JBQWMsR0FBNUI7Z0JBQ0ksaUJBQWlCLEVBQUUsQ0FBQztZQUN4QixDQUFDO1lBRUQ7Ozs7Ozs7ZUFPRztZQUNXLHVCQUFpQixHQUEvQjtnQkFDSSw4QkFBOEI7Z0JBQzlCLEVBQUUsQ0FBQyxDQUFDLGtCQUFRLENBQUMsT0FBTyxJQUFJLENBQUMsa0JBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUN4QyxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNqQixDQUFDO2dCQUNELE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDaEIsQ0FBQztZQTVDTSxtQkFBYSxHQUFHLFFBQVEsQ0FBQztZQTZDcEMsWUFBQztTQUFBO1FBL0NZLGVBQUssUUErQ2pCO0lBQ0wsQ0FBQyxFQTFLYSxTQUFTLEdBQVQsYUFBUyxLQUFULGFBQVMsUUEwS3RCO0FBQUQsQ0FBQyxFQTFLUyxHQUFHLEtBQUgsR0FBRyxRQTBLWjtBQzVLRCxJQUFVLEdBQUcsQ0F3Qlo7QUF4QkQsV0FBVSxHQUFHO0lBQUMsYUFBUyxDQXdCdEI7SUF4QmEsb0JBQVM7UUFDbkI7O1dBRUc7UUFDSCxJQUFZLFdBR1g7UUFIRCxXQUFZLFdBQVc7WUFDbkIscURBQVk7WUFDWix1REFBYTtRQUNqQixDQUFDLEVBSFcsV0FBVyxHQUFYLHFCQUFXLEtBQVgscUJBQVcsUUFHdEI7UUFFRDs7Ozs7Ozs7OztXQVVHO1FBQ0g7WUFDSSxJQUFNLE9BQU8sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQztRQUMvRixDQUFDO1FBSGUsd0JBQWMsaUJBRzdCO0lBQ0wsQ0FBQyxFQXhCYSxTQUFTLEdBQVQsYUFBUyxLQUFULGFBQVMsUUF3QnRCO0FBQUQsQ0FBQyxFQXhCUyxHQUFHLEtBQUgsR0FBRyxRQXdCWjtBQ3hCdUQ7QUFDeEQscURBQXFEO0FBRXJELElBQVUsR0FBRyxDQXlkWjtBQXpkRCxXQUFVLEdBQUc7SUFFVCxJQUFPLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO0lBRTdCOzs7Ozs7OztPQVFHO0lBQ0g7UUFDSSxNQUFNLENBQUMsSUFBSSxPQUFPLENBQU8sVUFBQyxPQUFPO1lBQzdCLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDakMsVUFBVSxDQUFDO29CQUNQLE9BQU8sRUFBRSxDQUFDO2dCQUNkLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNaLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksVUFBTSxDQUFDLE9BQU8sSUFBSSxJQUFJLElBQUksVUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUN4RCxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRTt3QkFDM0IsT0FBTyxFQUFFLENBQUM7b0JBQ2QsQ0FBQyxDQUFDLENBQUM7Z0JBQ1AsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixPQUFPLEVBQUUsQ0FBQztnQkFDZCxDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQWhCZSxzQkFBa0IscUJBZ0JqQztJQUVELElBQUkseUJBQXlCLEdBQW1DLElBQUksQ0FBQztJQUVyRTs7Ozs7Ozs7Ozs7T0FXRztJQUNILDhCQUFxQyxPQUF1QztRQUN4RSxJQUFNLFVBQVUsR0FBRyx5QkFBeUIsQ0FBQztRQUM3Qyx5QkFBeUIsR0FBRyxPQUFPLENBQUM7UUFDcEMsTUFBTSxDQUFDLFVBQVUsQ0FBQztJQUN0QixDQUFDO0lBSmUsd0JBQW9CLHVCQUluQztJQUVELDhCQUE4QjtJQUM5QixDQUFDO1FBQ0csa0JBQWtCLEVBQUU7YUFDZixJQUFJLENBQUM7WUFDRixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFDLEtBQW1CO2dCQUM3QyxFQUFFLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUM7b0JBQzVCLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNyQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztJQUNYLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFHTCx1SEFBdUg7SUFHdkgsSUFBaUIsU0FBUyxDQXFaekI7SUFyWkQsV0FBaUIsU0FBUztRQXFDdEIsSUFBTSxHQUFHLEdBQUcsa0JBQWtCLENBQUM7UUFFL0IsSUFBSSxhQUFhLEdBQXlCLENBQUMsQ0FBQyxRQUFRLEVBQVEsQ0FBQztRQUU3RDs7Ozs7Ozs7V0FRRztRQUNILG9CQUEyQixPQUEwQjtZQUNqRCxFQUFFLENBQUMsQ0FBQyxTQUFTLEtBQUssYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxDQUFNLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN4QyxDQUFDO1lBRUQsYUFBYTtZQUNiLDRDQUE0QztZQUM1QyxHQUFHLENBQUMsVUFBVSxDQUFDO2dCQUNYLE9BQU8sRUFBRTtvQkFDTCxJQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBRWxDLHlDQUF5QztvQkFDekMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7d0JBQ3BCLFNBQVMsQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLENBQUM7b0JBQ3RDLENBQUM7b0JBRUQscUJBQXFCO29CQUNyQixNQUFNLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztvQkFFM0IscUJBQXFCO29CQUNyQixDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRTt3QkFDekIsNEJBQTRCO3dCQUM1QixNQUFNLENBQUMsdUJBQXVCLEVBQUUsQ0FBQzt3QkFFakMsZ0JBQWdCO3dCQUNoQixHQUFHLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7NkJBQzFCLE1BQU0sQ0FBQyxVQUFDLElBQUk7NEJBQ1QsMERBQTBEOzRCQUMxRCxDQUFDLENBQUMsUUFBUSxDQUFDO2lDQUNOLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxVQUFDLEtBQW1CLEVBQUUsSUFBUztnQ0FDaEMsSUFBSSxDQUFDLE9BQVEsQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDOzRCQUMxRCxDQUFDLENBQUM7aUNBQ0QsRUFBRSxDQUFDLGtCQUFrQixFQUFFLFVBQUMsS0FBbUI7Z0NBQ3hDLG9DQUFvQztnQ0FDOUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs0QkFDdEMsQ0FBQyxDQUFDLENBQ0w7NEJBRUQsY0FBYzs0QkFDZCxFQUFFLENBQUMsQ0FBQyxnQkFBTSxDQUFDLFVBQVUsQ0FBQztnQ0FDbEIsWUFBWSxFQUFFLE1BQU0sQ0FBQyxZQUFZO2dDQUNqQyxtQkFBbUIsRUFBRSxNQUFNLENBQUMsbUJBQW1COzZCQUNsRCxDQUFDLENBQUMsQ0FBQyxDQUFDO2dDQUNELHlDQUF5QztnQ0FDekMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7b0NBQ3BCLFNBQVMsQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7Z0NBQ3JDLENBQUM7Z0NBQ0QsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDOzRCQUM1QixDQUFDOzRCQUFDLElBQUksQ0FBQyxDQUFDO2dDQUNKLGFBQWEsQ0FBQyxNQUFNLENBQUMsaUJBQWEsQ0FDOUIsZUFBVyxDQUFDLDRDQUE0QyxFQUN4RCxHQUFHLEVBQ0gsa0RBQWtELENBQ3JELENBQUMsQ0FBQztnQ0FDSCxhQUFhLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBUSxDQUFDOzRCQUN2QyxDQUFDO3dCQUNMLENBQUMsQ0FBQyxDQUFDO29CQUNYLENBQUMsQ0FBQyxDQUFDO29CQUVILENBQUM7d0JBQ0csWUFBWTt3QkFDWixJQUFNLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUNoRCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQzs0QkFDbkIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0NBQ25CLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLG1DQUFtQyxDQUFDLENBQUM7NEJBQzVELENBQUM7NEJBQ0QsZ0VBQVEscUNBQUMsc0JBQWdCLENBQUMsR0FBRTtnQ0FDeEIsK0RBQVEsQ0FBQyxzQkFBZSxDQUFDLGlDQUFDLENBQUM7NEJBQy9CLEMsNkNBQUMsZ0NBQUMsQ0FBQzt3QkFDUCxDQUFDO3dCQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNKLCtEQUFRLENBQUMsc0JBQWUsQ0FBQyxpQ0FBQyxDQUFDO3dCQUMvQixDQUFDO29CQUNMLENBQUM7Z0JBQ0wsQ0FBQztnQkFDRCxJQUFJLEVBQUUsVUFBQyxLQUFnQjtvQkFDbkIsYUFBYSxDQUFDLE1BQU0sQ0FBQyxpQkFBYSxDQUM5QixlQUFXLENBQUMscUNBQXFDLEVBQ2pELEdBQUcsRUFDSCxpQ0FBaUMsRUFDakMsS0FBSyxDQUNSLENBQUMsQ0FBQztvQkFDSCxhQUFhLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBUSxDQUFDO2dCQUN2QyxDQUFDO2FBQ0osQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFNLGFBQWEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN4QyxDQUFDO1FBdEZlLG9CQUFVLGFBc0Z6QjtRQUVEOzs7Ozs7Ozs7O1dBVUc7UUFDSDtZQUNJLE1BQU0sQ0FBQyxVQUFVLEtBQUssYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2hELENBQUM7UUFGZSx1QkFBYSxnQkFFNUI7UUFFRDs7Ozs7Ozs7OztXQVVHO1FBQ0g7WUFDSSxNQUFNLENBQU0sYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3hDLENBQUM7UUFGZSwyQkFBaUIsb0JBRWhDO1FBRUQsSUFBTSwwQkFBMEIsR0FBOEIsRUFBRSxDQUFDO1FBRWpFOzs7Ozs7Ozs7Ozs7V0FZRztRQUNILDRDQUFtRCxHQUFXLEVBQUUsUUFBcUM7WUFDakcsMEJBQTBCLENBQUMsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDO1FBQy9DLENBQUM7UUFGZSw0Q0FBa0MscUNBRWpEO1FBRUQ7Ozs7Ozs7Ozs7V0FVRztRQUNILDhDQUFxRCxHQUFXO1lBQzVELE9BQU8sMEJBQTBCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDM0MsQ0FBQztRQUZlLDhDQUFvQyx1Q0FFbkQ7UUFFRCxJQUFJLFdBQVcsR0FBVSxJQUFJLENBQUM7UUFFOUI7Ozs7Ozs7Ozs7V0FVRztRQUNIO1lBQ0ksQ0FBQztnQkFDRyxJQUFNLG9CQUFvQixHQUFHLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDNUQsSUFBTSxxQkFBcUIsR0FBRyxVQUFDLEtBQW9CO29CQUMvQyxFQUFFLENBQUMsQ0FBQyxXQUFXLElBQUksV0FBVyxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDekQsc0NBQXNDO3dCQUN0QyxNQUFNLENBQUM7b0JBQ1gsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDSixvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDaEMsQ0FBQztnQkFDTCxDQUFDLENBQUM7Z0JBQ0YsR0FBRyxDQUFDLG9CQUFvQixDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFDcEQsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNMLENBQUM7Z0JBQ0csSUFBTSxxQkFBcUIsR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM5RSxJQUFNLHNCQUFzQixHQUFHO29CQUMzQixFQUFFLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO3dCQUNkLE1BQU0sQ0FBQyxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztvQkFDN0MsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDSixNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztvQkFDbkMsQ0FBQztnQkFDTCxDQUFDLENBQUM7Z0JBQ0YsR0FBRyxDQUFDLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQ3RFLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDVCxDQUFDO1FBeEJlLDRCQUFrQixxQkF3QmpDO1FBRUQsSUFBSSxnQkFBZ0IsR0FBZ0IsSUFBSSxDQUFDO1FBRXpDOzs7Ozs7Ozs7Ozs7V0FZRztRQUNILHVCQUE4QixJQUFXO1lBQ3JDLFdBQVcsR0FBRyxJQUFJLENBQUM7WUFDbkIsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFDZCxnQkFBZ0IsR0FBRyx3QkFBYyxFQUFFLENBQUM7WUFDeEMsQ0FBQztRQUNMLENBQUM7UUFMZSx1QkFBYSxnQkFLNUI7UUFFRDs7Ozs7Ozs7Ozs7V0FXRztRQUNIO1lBQ0ksTUFBTSxDQUFDLGVBQUssQ0FBQyxhQUFhLENBQUM7UUFDL0IsQ0FBQztRQUZlLDhCQUFvQix1QkFFbkM7UUFFRCxJQUFJLGlCQUFpQixHQUF3QixFQUFFLENBQUM7UUFDaEQsSUFBSSxjQUFjLEdBQVksRUFBRSxDQUFDO1FBRWpDOzs7OztXQUtHO1FBQ0gsc0JBQTZCLElBQXFCO1lBQzlDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBRmUsc0JBQVksZUFFM0I7UUFFRDs7V0FFRztRQUNIO1lBQ0ksaUJBQWlCLENBQUMsT0FBTyxDQUFDLFVBQUMsSUFBUztnQkFDaEMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7WUFDcEMsQ0FBQyxDQUFDLENBQUM7WUFDSCxpQkFBaUIsR0FBRyxFQUFFLENBQUM7UUFDM0IsQ0FBQztRQUxlLHdCQUFjLGlCQUs3QjtRQUVEOztXQUVHO1FBQ0g7WUFDSSxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLENBQUM7UUFGZSxzQkFBWSxlQUUzQjtRQUVEOzs7Ozs7Ozs7Ozs7V0FZRztRQUNILG1CQUFtQixPQUF5QjtZQUN4QyxJQUFNLFNBQVMsR0FBRztnQkFDZCxtQ0FBbUM7Z0JBQ25DLE1BQU0sRUFBRTtvQkFDSixTQUFTLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFO29CQUMzQixXQUFXLEVBQUUsSUFBSTtpQkFDcEI7Z0JBRUQsWUFBWSxFQUFFO29CQUNWLHFCQUFxQixFQUFFLElBQUk7b0JBQzNCLHFCQUFxQixFQUFFLGtCQUFrQjtvQkFDekMsdUJBQXVCLEVBQUUsa0JBQWtCO29CQUMzQyxvQkFBb0IsRUFBRSxLQUFLO29CQUMzQixnQkFBZ0IsRUFBRSxLQUFLO29CQUN2QixrQ0FBa0M7b0JBQ2xDLGlCQUFpQixFQUFFO3dCQUNmLGNBQWMsRUFBRSxjQUFjO3dCQUM5QixVQUFVLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQzt3QkFDcEMsWUFBWSxFQUFFLEVBQUU7cUJBQ25CO2lCQUNKO2dCQUVELElBQUksRUFBRTtvQkFDRixpQkFBaUIsRUFBRSxFQUFFO29CQUNyQixPQUFPLEVBQUUsRUFBRTtpQkFDZDtnQkFFRCxVQUFVLEVBQUUsSUFBSTtnQkFDaEIsWUFBWSxFQUFFLElBQUk7Z0JBQ2xCLG1CQUFtQixFQUFFLEtBQUs7Z0JBRTFCLGlCQUFpQixFQUFFO29CQUFBLGlCQVFsQjtvQkFQRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFHO3dCQUNqQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFDdEIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO3dCQUN2QyxDQUFDO3dCQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNKLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO3dCQUM5QixDQUFDO29CQUNMLENBQUMsQ0FBQyxDQUFDO2dCQUNQLENBQUM7Z0JBRUQsdUJBQXVCLEVBQUU7b0JBQUEsaUJBb0J4QjtvQkFuQkcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDO29CQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFHO3dCQUN2QyxFQUFFLENBQUMsQ0FBQyxtQkFBbUIsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUM5QixJQUFNLFNBQU8sR0FBUSxDQUFDLENBQUMsTUFBTSxDQUFDOzRCQUM5QixrQkFBa0I7NEJBQ2xCLFNBQU8sQ0FBQyx3QkFBd0I7a0NBQzFCLFNBQU8sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxDQUFDOzRCQUNyRix1QkFBdUI7NEJBQ3ZCLEtBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxVQUFDLFVBQVU7Z0NBQ2hFLFNBQU8sQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsR0FBRyxTQUFPLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUFDOzRCQUNyRixDQUFDLENBQUMsQ0FBQzs0QkFDSCxxQkFBcUI7NEJBQ3JCLEtBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFDLFVBQVU7Z0NBQzlELFNBQU8sQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsR0FBRyxTQUFPLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDOzRCQUNuRixDQUFDLENBQUMsQ0FBQzt3QkFDUCxDQUFDO3dCQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNKLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQzt3QkFDM0MsQ0FBQztvQkFDTCxDQUFDLENBQUMsQ0FBQztnQkFDUCxDQUFDO2FBQ0osQ0FBQztZQUVGLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDOUQsQ0FBQztRQUVELHVFQUF1RTtRQUN2RSxrQkFBa0I7UUFFbEIsaUJBQWlCO1FBQ2pCLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFVBQUMsS0FBbUI7WUFDdkMsSUFBTSxjQUFjLEdBQUcsd0JBQWMsRUFBRSxDQUFDO1lBQ3hDLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixLQUFLLGNBQWMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLEdBQUcsQ0FBQyxDQUFDLElBQU0sR0FBRyxJQUFJLDBCQUEwQixDQUFDLENBQUMsQ0FBQztvQkFDM0MsMEJBQTBCLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQ3pFLENBQUM7Z0JBQ0QsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztvQkFDZCxXQUFXLENBQUMsb0JBQW9CLENBQUMsY0FBYyxDQUFDLENBQUM7Z0JBQ3JELENBQUM7Z0JBQ0QsZ0JBQWdCLEdBQUcsY0FBYyxDQUFDO1lBQ3RDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsRUFyWmdCLFNBQVMsR0FBVCxhQUFTLEtBQVQsYUFBUyxRQXFaekI7QUFDTCxDQUFDLEVBemRTLEdBQUcsS0FBSCxHQUFHLFFBeWRaO0FDNWR1RDtBQUN4RCxzREFBc0Q7QUFFdEQsSUFBVSxHQUFHLENBbW1EWjtBQW5tREQsV0FBVSxHQUFHO0lBQUMsYUFBUyxDQW1tRHRCO0lBbm1EYSxvQkFBUztRQUVuQixJQUFPLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO1FBRTdCLElBQU0sR0FBRyxHQUFHLHlCQUF5QixDQUFDO1FBRXRDLHVFQUF1RTtRQUN2RSxrQkFBa0I7UUFFbEI7Ozs7Ozs7Ozs7Ozs7OztXQWVHO1FBQ0gsZUFBc0IsSUFBWTtZQUM5QixFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMzQixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUscUJBQXFCLEVBQUUsQ0FBQyxDQUFDO1lBQ3hFLENBQUM7UUFDTCxDQUFDO1FBTmUsZUFBSyxRQU1wQjtRQUVEOzs7Ozs7Ozs7O1dBVUc7UUFDSDtZQUNJLElBQU0sV0FBVyxHQUFTLENBQUMsQ0FBQyxNQUFNLENBQUUsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDcEUsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RCLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1lBQ2pELENBQUM7WUFFRCxJQUFNLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1lBQ25ELElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFakUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ2YsQ0FBQztZQUVELE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BELENBQUM7UUFFRDs7Ozs7Ozs7OztXQVVHO1FBQ0gsSUFBSSxrQkFBa0IsR0FBRztZQUNyQixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzdCLENBQUMsQ0FBQztRQUVGLHlDQUF5QztRQUN6QyxJQUFNLHlCQUF5QixHQUFHLGtCQUFrQixDQUFDO1FBRXJEOzs7Ozs7Ozs7Ozs7V0FZRztRQUNILHFDQUE0QyxPQUFnQztZQUN4RSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDbEIsTUFBTSxDQUFDLGtCQUFrQixDQUFDO1lBQzlCLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixJQUFNLFVBQVUsR0FBRyxrQkFBa0IsQ0FBQztnQkFDdEMsa0JBQWtCLEdBQUcsT0FBTyxDQUFDO2dCQUM3QixNQUFNLENBQUMsVUFBVSxDQUFDO1lBQ3RCLENBQUM7UUFDTCxDQUFDO1FBUmUscUNBQTJCLDhCQVExQztRQW1GRCx1SEFBdUg7UUFFdkg7Ozs7Ozs7Ozs7V0FVRztRQUNIO1lBQUE7WUErNUNBLENBQUM7WUFsNENHLHVFQUF1RTtZQUN2RSx3QkFBd0I7WUFFeEI7Ozs7Ozs7Ozs7OztlQVlHO1lBQ1csaUJBQVUsR0FBeEIsVUFBeUIsT0FBb0I7Z0JBQ3pDLElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDeEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUNwQixPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxxQ0FBcUMsQ0FBQyxDQUFDO29CQUMxRCxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNqQixDQUFDO2dCQUVELE1BQU0sQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLG9CQUFvQixFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUMxRSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQztvQkFDM0MsTUFBTSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztnQkFDckMsQ0FBQztnQkFFRCwyREFBMkQ7Z0JBQzNELE1BQU0sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ3RFLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUM7Z0JBQ2hELE1BQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ3hDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFFckQsNkRBQTZEO2dCQUM3RCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO29CQUNqQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUNoRCxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO2dCQUN6QyxDQUFDO2dCQUVELG1CQUFtQjtnQkFDbkIsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztvQkFDOUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsVUFBQyxFQUFPLEVBQUUsR0FBdUI7d0JBQzdDLEtBQU0sQ0FBQyxhQUFhLENBQUMsUUFBUSxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDbEQsQ0FBQyxDQUFDO2dCQUNOLENBQUM7Z0JBRUQsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDO2dCQUNwQix5QkFBeUI7Z0JBQ3pCLFNBQVMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO2dCQUUvQixNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ2hCLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7O2VBa0JHO1lBQ1csZUFBUSxHQUF0QixVQUF1QixLQUFhLEVBQUUsSUFBWSxFQUFFLEdBQW9CLEVBQUUsUUFBc0M7Z0JBQTVELGlDQUFvQjtnQkFDcEUsdUNBQXVDO2dCQUN2QyxJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBRTlCLElBQU0sSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQzFCLElBQU0sT0FBTyxHQUFpQjtvQkFDMUIsS0FBSyxFQUFFLEtBQUs7b0JBQ1osTUFBTSxFQUFRLE1BQU0sQ0FBQyxRQUFTLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQztvQkFDcEQsSUFBSSxFQUFFLElBQUk7b0JBQ1YsR0FBRyxFQUFFLEdBQUc7b0JBQ1IsUUFBUSxFQUFFLFFBQVEsSUFBSSxjQUFjLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2lCQUN0RCxDQUFDO2dCQUVGLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDcEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxjQUFrQixDQUFDLENBQUMsQ0FBQztnQkFDNUQsQ0FBQztnQkFFRCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUNWLGdCQUFnQjtvQkFDaEIsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQ3pELENBQUM7Z0JBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUNsQixDQUFDO1lBRUQ7Ozs7Ozs7Ozs7OztlQVlHO1lBQ1csWUFBSyxHQUFuQixVQUFvQixPQUF1QjtnQkFDdkMsSUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDdkQsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7b0JBQ3BCLFNBQVMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDL0IsQ0FBQztnQkFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUMsQ0FBQztvQkFDaEMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsNkVBQTZFLENBQUMsQ0FBQztvQkFDbkcsTUFBTSxDQUFDO2dCQUNYLENBQUM7Z0JBQ0QsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDaEMsQ0FBQztZQUVEOzs7Ozs7Ozs7O2VBVUc7WUFDVyxXQUFJLEdBQWxCO2dCQUNJLElBQU0sU0FBUyxHQUFTLFFBQVEsQ0FBQyxPQUFRLENBQUMsT0FBTyxDQUFDO2dCQUNsRCxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUN4QixNQUFNLENBQUMsU0FBUyxDQUFDO1lBQ3JCLENBQUM7WUFFRDs7Ozs7Ozs7OztlQVVHO1lBQ1csZ0JBQVMsR0FBdkI7Z0JBQ0ksTUFBTSxDQUFPLFFBQVEsQ0FBQyxPQUFRLENBQUMsT0FBTyxDQUFDO1lBQzNDLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7Ozs7OztlQWdCRztZQUNXLGVBQVEsR0FBdEIsVUFBdUIsR0FBVyxFQUFFLFVBQW1CLEVBQUUsT0FBaUIsRUFBRSxPQUF5QjtnQkFDakcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO29CQUMzQyx5QkFBeUI7b0JBQ3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLDhDQUE4QyxDQUFDLENBQUM7b0JBQ25FLE1BQU0sQ0FBQztnQkFDWCxDQUFDO2dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUMzQyxNQUFNLENBQUM7Z0JBQ1gsQ0FBQztnQkFFRCxJQUFNLFVBQVUsR0FBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLHdCQUF3QixFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUUzRiwyREFBMkQ7Z0JBQzNELElBQU0sdUJBQXVCLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDLHVCQUF1QixHQUFHLHlCQUF5QixHQUFHLGtCQUFrQixDQUFDO2dCQUVuSSxNQUFNLENBQUMsa0JBQWtCLEdBQUc7b0JBQ3hCLEdBQUcsRUFBRSxHQUFHO29CQUNSLFVBQVUsRUFBRSxVQUFVO29CQUN0QixPQUFPLEVBQUUsT0FBTztvQkFDaEIsZUFBZSxFQUFFLFVBQVUsQ0FBQyxlQUFlO29CQUMzQyxZQUFZLEVBQUUsVUFBVSxDQUFDLFlBQVk7b0JBQ3JDLE1BQU0sRUFBRSxVQUFVLENBQUMsTUFBTSxJQUFJLEVBQUU7b0JBQy9CLGdCQUFnQixFQUFFLElBQUk7b0JBQ3RCLHVCQUF1QixFQUFFLElBQUk7b0JBQzdCLFlBQVksRUFBRSxJQUFJO2lCQUNyQixDQUFDO2dCQUVGLFlBQVk7Z0JBQ1osdUJBQXVCLEVBQUU7cUJBQ3BCLElBQUksQ0FBQztvQkFDRiw4REFBOEQ7b0JBQzlELE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLG1DQUFtQyxDQUFDLENBQUM7Z0JBQzdELENBQUMsQ0FBQztxQkFDRCxNQUFNLENBQUM7b0JBQ0osRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7d0JBQ2hFLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOzRCQUNyQixNQUFNLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0NBQ25DLEtBQUssT0FBTztvQ0FDUixNQUFNLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQ0FDeEMsS0FBSyxDQUFDO2dDQUNWLEtBQUssS0FBSztvQ0FDTixNQUFNLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO29DQUNqQyxNQUFNLENBQUMsQ0FBQyxtQkFBbUI7Z0NBQy9CO29DQUNJLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLHdDQUF3QyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7b0NBQzVGLEtBQUssQ0FBQzs0QkFDZCxDQUFDO3dCQUNMLENBQUM7d0JBQ0QsSUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO3dCQUMxRCx5REFBeUQ7d0JBQ3pELEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLFFBQVEsS0FBSyxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUM7NEJBQ3hDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO3dCQUNuRCxDQUFDO29CQUNMLENBQUM7b0JBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ0osRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7NEJBQ3JCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLGlFQUFpRSxDQUFDLENBQUM7d0JBQzFGLENBQUM7d0JBQ0QsSUFBTSxVQUFRLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7d0JBQ25ELElBQUksT0FBTyxTQUFjLENBQUM7d0JBQzFCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOzRCQUN6Qyx3QkFBd0I7NEJBQ3hCLE9BQU8sR0FBaUIsQ0FBQyxDQUFDLElBQUksQ0FBTSxNQUFNLENBQUMsY0FBYyxFQUFFLFVBQUMsR0FBUTtnQ0FDaEUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVEsQ0FBQyxDQUFDOzRCQUNyQyxDQUFDLENBQUMsQ0FBQzt3QkFDUCxDQUFDO3dCQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNKLDJCQUEyQjs0QkFDM0IsT0FBTyxHQUFpQixDQUFDLENBQUMsU0FBUyxDQUFNLE1BQU0sQ0FBQyxjQUFjLEVBQUUsRUFBRSxLQUFLLEVBQUUsVUFBUSxFQUFFLENBQUMsQ0FBQzt3QkFDekYsQ0FBQzt3QkFDRCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOzRCQUNWLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO3dCQUN2QixDQUFDO3dCQUNELE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQzNCLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDWCxDQUFDO1lBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQWtCRztZQUNXLHNCQUFlLEdBQTdCLFVBQ0ksRUFBcUMsRUFDckMsVUFBbUIsRUFDbkIsT0FBaUIsRUFDakIsT0FBeUI7Z0JBRXpCLElBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxLQUFLLENBQUM7Z0JBQzNDLElBQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQzlELElBQU0sV0FBVyxHQUFHLFVBQVUsSUFBSSxXQUFXLENBQUMsVUFBVSxDQUFDO2dCQUN6RCxJQUFNLFFBQVEsR0FBRyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDO2dCQUNwRCxJQUFNLFVBQVUsR0FBZ0IsQ0FBQztvQkFDN0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBQ2hCLENBQUM7b0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7d0JBQ2hDLE1BQU0sQ0FBYyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ3hDLENBQUM7b0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsWUFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDO3dCQUM3QixNQUFNLENBQUMsRUFBRSxDQUFDO29CQUNkLENBQUM7b0JBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ0osTUFBTSxDQUFjLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQzdCLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFFTCxvQkFBb0I7Z0JBQ3BCLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBQyxLQUFLO29CQUNoQixPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQ3ZDLENBQUMsQ0FBQyxDQUFDO2dCQUVILDBCQUEwQjtnQkFDMUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRztvQkFDN0IsU0FBUyxFQUFFLE9BQU87b0JBQ2xCLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtvQkFDdkIsVUFBVSxFQUFFLFVBQVU7b0JBQ3RCLGtCQUFrQixFQUFFLENBQUM7aUJBQ3hCLENBQUM7Z0JBRUYsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUU7b0JBQy9ELE9BQU8sRUFBRTt3QkFDTCxTQUFTLEVBQUUsS0FBSztxQkFDbkI7aUJBQ0osQ0FBQyxDQUFDLENBQUM7WUFDUixDQUFDO1lBRUQ7Ozs7Ozs7Ozs7ZUFVRztZQUNXLFdBQUksR0FBbEI7Z0JBQ0ksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO29CQUMzQyx5QkFBeUI7b0JBQ3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLDBDQUEwQyxDQUFDLENBQUM7b0JBQy9ELE1BQU0sQ0FBQztnQkFDWCxDQUFDO2dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUM1QixxQkFBcUI7b0JBQ3JCLElBQU0sR0FBRyxHQUFTLFNBQVUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDO29CQUN2QyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7d0JBQ2hCLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFJLDBCQUEwQjt3QkFDNUMsTUFBTSxDQUFDO29CQUNYLENBQUM7Z0JBQ0wsQ0FBQztnQkFFRCxNQUFNLENBQUMsa0JBQWtCLEdBQUc7b0JBQ3hCLFlBQVksRUFBRSxJQUFJO29CQUNsQix1QkFBdUIsRUFBRSxJQUFJO2lCQUNoQyxDQUFDO2dCQUVGLFlBQVk7Z0JBQ1osa0JBQWtCLEVBQUU7cUJBQ2YsSUFBSSxDQUFDO29CQUNGLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ3BCLENBQUMsQ0FBQztxQkFDRCxJQUFJLENBQUM7b0JBQ0YsT0FBTyxDQUFDLEtBQUssQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO29CQUNuRCxNQUFNLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO2dCQUNuQyxDQUFDLENBQUMsQ0FBQztZQUNYLENBQUM7WUFFRDs7Ozs7O2VBTUc7WUFDVyxpQkFBVSxHQUF4QixVQUF5QixNQUFjO2dCQUNuQyxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDdEUsQ0FBQztZQUVEOzs7Ozs7ZUFNRztZQUNXLGdCQUFTLEdBQXZCO2dCQUNJLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7Z0JBQ25DLE1BQU0sQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO2dCQUN6QixNQUFNLENBQUMsTUFBTSxDQUFDO1lBQ2xCLENBQUM7WUFFRDs7Ozs7OztlQU9HO1lBQ1cseUJBQWtCLEdBQWhDO2dCQUNJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUM5RSxNQUFNLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQ2xFLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ0osTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDaEIsQ0FBQztZQUNMLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7ZUFpQkc7WUFDVyxtQkFBWSxHQUExQixVQUEyQixHQUFXLEVBQUUsT0FBd0IsRUFBRSxVQUFtQixFQUFFLE9BQWlCO2dCQUNwRyxJQUFNLEdBQUcsR0FBb0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25ELEdBQUcsQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sSUFBSSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsQ0FBQztnQkFDcEQsRUFBRSxDQUFDLENBQUMsT0FBTyxLQUFLLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDcEMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsc0RBQXNELEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLENBQUM7b0JBQzFHLE1BQU0sQ0FBQztnQkFDWCxDQUFDO2dCQUNELE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDbkQsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7O2VBYUc7WUFDVyxvQkFBYSxHQUEzQixVQUE0QixVQUFtQixFQUFFLE9BQWlCO2dCQUM5RCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFO29CQUN2QyxPQUFPLEVBQUU7d0JBQ0wsU0FBUyxFQUFFLEtBQUs7cUJBQ25CO2lCQUNKLENBQUMsQ0FBQztZQUNQLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7OztlQWFHO1lBQ1csb0JBQWEsR0FBM0IsVUFBNEIsVUFBbUIsRUFBRSxPQUFpQjtnQkFDOUQsWUFBWTtnQkFDWixJQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztnQkFDaEQsUUFBUSxDQUFDLFlBQVksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUM7Z0JBQzdDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFDNUIsQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsT0FBTyxHQUFHLElBQUksRUFDbEM7b0JBQ0ksT0FBTyxFQUFFO3dCQUNMLFNBQVMsRUFBRSxLQUFLO3dCQUNoQixVQUFVLEVBQUUsSUFBSTtxQkFDbkI7aUJBQ0osQ0FBQyxDQUFDO1lBQ1gsQ0FBQztZQUVEOzs7Ozs7ZUFNRztZQUNXLGtCQUFXLEdBQXpCO2dCQUNJLElBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxLQUFLLENBQUM7Z0JBQzNDLElBQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFVBQUMsS0FBSztvQkFDNUIsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUN6QyxDQUFDLENBQUMsQ0FBQztnQkFDSCxNQUFNLENBQUMsR0FBRyxDQUFDO1lBQ2YsQ0FBQztZQUVEOzs7Ozs7O2VBT0c7WUFDVyxzQkFBZSxHQUE3QjtnQkFDSSxpQ0FBaUM7Z0JBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsWUFBWSxJQUFJLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQzFHLENBQUM7WUF1QmEsd0JBQWlCLEdBQS9CLFVBQWdDLFNBQWMsRUFBRSxZQUFzQixFQUFFLE9BQXlCO2dCQUM3RixJQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7Z0JBQ3JCLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQztnQkFFbkIsU0FBUyxHQUFHLENBQUMsU0FBUyxZQUFZLEtBQUssQ0FBQyxHQUFHLFNBQVMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUNuRSxZQUFZLEdBQUcsQ0FBQyxJQUFJLElBQUksWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLFlBQVksQ0FBQztnQkFFN0QsQ0FBQztvQkFDRyxJQUFNLFNBQVMsR0FBRyxVQUFDLElBQWU7d0JBQzlCLElBQUksR0FBVyxDQUFDO3dCQUVoQixJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQzFELElBQU0sT0FBTyxHQUFpQixDQUFDLENBQUMsSUFBSSxDQUFNLE1BQU0sQ0FBQyxjQUFjLEVBQUUsVUFBQyxHQUFROzRCQUN0RSxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7d0JBQ3JDLENBQUMsQ0FBQyxDQUFDO3dCQUNILEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzs0QkFDWCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxrQ0FBa0MsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3BFLE1BQU0sQ0FBQyxJQUFJLENBQUM7d0JBQ2hCLENBQUM7d0JBQUMsSUFBSSxDQUFDLENBQUM7NEJBQ0osR0FBRyxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ2hELENBQUM7d0JBRUQsSUFBTSxLQUFLLEdBQUc7NEJBQ1YsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLOzRCQUNqQixPQUFPLEVBQUUsR0FBRzs0QkFDWixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7NEJBQ2pCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTs0QkFDM0IsR0FBRyxFQUFFLEdBQUc7eUJBQ1gsQ0FBQzt3QkFDRixNQUFNLENBQUMsS0FBSyxDQUFDO29CQUNqQixDQUFDLENBQUM7b0JBRUYsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQzt3QkFDL0MsSUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUN0QyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7NEJBQ1QsTUFBTSxHQUFHLElBQUksQ0FBQzs0QkFDZCxLQUFLLENBQUM7d0JBQ1YsQ0FBQzt3QkFBQyxJQUFJLENBQUMsQ0FBQzs0QkFDSixTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUMxQixDQUFDO29CQUNMLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFFTCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNULE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ2pCLENBQUM7Z0JBRUQsQ0FBQztvQkFDRyxhQUFhO29CQUNiLElBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDNUIsSUFBTSxZQUFZLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7b0JBQzFDLElBQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO29CQUV4QyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7b0JBRXRDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQzt3QkFDM0MsUUFBUSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO3dCQUNuQyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDaEQsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7b0JBQ2pGLENBQUM7b0JBRUQsNEJBQTRCO29CQUM1QixFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO3dCQUNmLElBQU0sVUFBVSxHQUFHLENBQUM7NEJBQ2hCLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztnQ0FDL0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUM7NEJBQ2hELENBQUM7NEJBQUMsSUFBSSxDQUFDLENBQUM7Z0NBQ0osTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxVQUFVLENBQUM7NEJBQzVDLENBQUM7d0JBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQzt3QkFFTCxJQUFNLE9BQU8sR0FBRyxDQUFDOzRCQUNiLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQ0FDNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUM7NEJBQzdDLENBQUM7NEJBQUMsSUFBSSxDQUFDLENBQUM7Z0NBQ0osTUFBTSxDQUFDLEtBQUssQ0FBQzs0QkFDakIsQ0FBQzt3QkFDTCxDQUFDLENBQUMsRUFBRSxDQUFDO3dCQUVMLE9BQU8sR0FBRyxLQUFLLENBQUM7d0JBQ2hCLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQzt3QkFDL0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7b0JBQy9FLENBQUM7b0JBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ0osUUFBUSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsS0FBSyxDQUFDO3dCQUM1QyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQzt3QkFDekQsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7b0JBQ2pGLENBQUM7b0JBRUQsYUFBYTtvQkFDYixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO3dCQUNWLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztvQkFDbkMsQ0FBQztnQkFDTCxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUVMLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDaEIsQ0FBQztZQUVEOzs7Ozs7O2VBT0c7WUFDVyxvQkFBYSxHQUEzQjtnQkFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1lBQ3JDLENBQUM7WUFFRCx1RUFBdUU7WUFDdkUseUJBQXlCO1lBRXpCOzs7Ozs7Ozs7O2VBVUc7WUFDWSxvQkFBYSxHQUE1QixVQUE2QixRQUFnQjtnQkFDekMsSUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDM0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUNYLE1BQU0sQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ25DLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNoQixDQUFDO1lBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2VBb0JHO1lBQ1ksb0JBQWEsR0FBNUI7Z0JBQ0ksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDckIsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNuQixDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLFdBQVc7b0JBQ1gsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUNwQixDQUFDO1lBQ0wsQ0FBQztZQUVEOzs7Ozs7Ozs7O2VBVUc7WUFDWSxpQkFBVSxHQUF6QjtnQkFDSSxDQUFDLENBQUMsUUFBUSxDQUFDO3FCQUNOLEdBQUcsQ0FBQyxZQUFZLEVBQUU7b0JBQ2YsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO3dCQUNwQyxnQkFBZ0I7d0JBQ2hCLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxVQUFDLEtBQW1COzRCQUNuRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ25DLENBQUMsQ0FBQyxDQUFDO29CQUNQLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDO3FCQUNELEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxVQUFDLEtBQW1CO29CQUN0Qyw2QkFBNkI7b0JBQzdCLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsa0JBQWtCLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQzt3QkFDcEQsSUFBTSxNQUFNLEdBQVcsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO3dCQUMxRCxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsQ0FBQztvQkFDcEYsQ0FBQztnQkFDTCxDQUFDLENBQUM7cUJBQ0QsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFDLEtBQW1CO29CQUNoQyxJQUFNLE1BQU0sR0FBVyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7b0JBQzFELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUMvQixPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7b0JBQ3hDLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDO3FCQUNELEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxVQUFDLEtBQW1CO29CQUMxRCxNQUFNLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO2dCQUNuQyxDQUFDLENBQUMsQ0FDRDtnQkFFTCxrQkFBa0I7Z0JBQ2xCLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUMsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7Ozs7O2VBZ0JHO1lBQ1ksa0JBQVcsR0FBMUIsVUFBMkIsSUFBWSxFQUFFLE9BQXFCO2dCQUMxRCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2hDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLGtEQUFrRCxHQUFHLElBQUksQ0FBQyxDQUFDO29CQUMvRSxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNqQixDQUFDO2dCQUNELE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDO2dCQUN0QyxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ2hCLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7O2VBWUc7WUFDWSw0QkFBcUIsR0FBcEMsVUFBcUMsR0FBVztnQkFDNUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQztvQkFDL0IsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRSxVQUFDLEtBQW1CLEVBQUUsSUFBUzt3QkFDL0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUN2QyxDQUFDLENBQUMsQ0FBQztvQkFDSCxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDO29CQUMxQixDQUFDLENBQUMsTUFBTSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztvQkFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDaEIsQ0FBQztnQkFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ2pCLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7O2VBWUc7WUFDWSxnQkFBUyxHQUF4QjtnQkFDSSxJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUMxRixJQUFNLE9BQU8sR0FBaUIsQ0FBQyxDQUFDLElBQUksQ0FBTSxNQUFNLENBQUMsY0FBYyxFQUFFLFVBQUMsR0FBUTtvQkFDdEUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNyQyxDQUFDLENBQUMsQ0FBQztnQkFDSCxNQUFNLENBQUMsQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsS0FBSyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDbkQsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7ZUFZRztZQUNZLHVCQUFnQixHQUEvQixVQUFnQyxLQUFtQjtnQkFDL0MsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNoQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7b0JBQ3ZCLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ2pCLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdEMsQ0FBQztZQUVEOzs7Ozs7Ozs7O2VBVUc7WUFDWSxtQkFBWSxHQUEzQixVQUE0QixLQUFtQjtnQkFDM0MsSUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFDdkMsSUFBTSxHQUFHLEdBQVcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNwRSxJQUFNLFVBQVUsR0FBVyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUN6RCxJQUFNLFNBQVMsR0FBVyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUN2RCxJQUFNLE9BQU8sR0FBUSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2dCQUNoRSxJQUFNLFlBQVksR0FBWSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQztvQkFDbEUsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsS0FBSyxNQUFNLEdBQUcsS0FBSyxDQUFDO2dCQUNoRSxJQUFNLFlBQVksR0FBWSxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztvQkFDcEUsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsS0FBSyxNQUFNLEdBQUcsS0FBSyxDQUFDO2dCQUVsRTs7OzttQkFJRztnQkFDSCxFQUFFLENBQUMsQ0FBQyxZQUFZLElBQUksTUFBTSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbkQsTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDaEIsQ0FBQztnQkFFRCxrQkFBa0I7Z0JBQ2xCLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFFdkIsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDcEMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNsQixDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztnQkFDNUcsQ0FBQztnQkFFRCxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ2pCLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7Ozs7ZUFjRztZQUNZLDJCQUFvQixHQUFuQyxVQUFvQyxHQUFXO2dCQUMzQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUM7Z0JBQ2hCLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QixNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QyxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ2pCLENBQUM7WUFDTCxDQUFDO1lBRUQ7Ozs7Ozs7Ozs7Ozs7O2VBY0c7WUFDWSxzQkFBZSxHQUE5QixVQUErQixHQUFXO2dCQUN0QyxJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDbkQsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsVUFBVSxPQUFZO29CQUMxRCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBQ2hCLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDUCxDQUFDO1lBRUQ7Ozs7Ozs7Ozs7ZUFVRztZQUNZLDJCQUFvQixHQUFuQztnQkFDSSxJQUFNLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztnQkFDakYsTUFBTSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFDdEMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUNwQixDQUFDO1lBRUQ7Ozs7Ozs7Ozs7ZUFVRztZQUNZLDBCQUFtQixHQUFsQyxVQUFtQyxLQUFtQjtnQkFDbEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDbkQsTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDaEIsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNqQixDQUFDO1lBQ0wsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7OztlQWNHO1lBQ1ksdUJBQWdCLEdBQS9CLFVBQWdDLElBQVk7Z0JBQUUsY0FBYztxQkFBZCxVQUFjLEVBQWQscUJBQWMsRUFBZCxJQUFjO29CQUFkLDZCQUFjOztnQkFDeEQsSUFBTSxPQUFPLEdBQWlCLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzFELEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUNaLElBQU0sTUFBTSxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxFQUFFLENBQUM7b0JBQ2pELE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO29CQUM5QyxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7d0JBQzNDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUMsQ0FBQztvQkFDL0YsQ0FBQztvQkFDRCxNQUFNLENBQUMsa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7b0JBQzFGLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzt3QkFDWCxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDcEMsQ0FBQztnQkFDTCxDQUFDO1lBQ0wsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7OztlQWNHO1lBQ1ksb0JBQWEsR0FBNUIsVUFBNkIsUUFBZ0I7Z0JBQ3pDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO2dCQUM5QyxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQztvQkFDbkIsUUFBUSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzlDLENBQUM7Z0JBRUQseUJBQXlCO2dCQUN6QixFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO29CQUM3QyxJQUFJLE9BQU8sR0FBaUIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDNUQsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7d0JBQ2xCLE9BQU8sR0FBRzs0QkFDTixLQUFLLEVBQUUsUUFBUTs0QkFDZixNQUFNLEVBQVEsTUFBTSxDQUFDLFFBQVMsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDOzRCQUN2RCxJQUFJLEVBQUUsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEdBQUc7NEJBQ25DLEdBQUcsRUFBRSxLQUFLOzRCQUNWLFFBQVEsRUFBRSxJQUFJO3lCQUNqQixDQUFDO3dCQUNGLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO29CQUMxQyxDQUFDO2dCQUNMLENBQUM7Z0JBRUQsdUJBQXVCO2dCQUN2QixJQUFJLElBQUksR0FBRyxRQUFRLENBQUM7Z0JBQ3BCLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDMUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUNoRCxDQUFDO2dCQUVELE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDNUIsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7ZUFZRztZQUNZLGlCQUFVLEdBQXpCLFVBQTBCLElBQVk7Z0JBQ2xDLElBQUksdUJBQWdELENBQUM7Z0JBRXJELGtEQUFrRDtnQkFDbEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO29CQUM5QyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO3dCQUM3QyxNQUFNLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO29CQUN2RCxDQUFDO29CQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNKLE1BQU0sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzdCLFlBQVk7d0JBQ1osSUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLDRCQUE0QixFQUFFLENBQUM7d0JBQ3pELEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDOzRCQUNqQiwrQkFBK0I7NEJBQy9CLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7NEJBQ2xELE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxXQUFXLElBQUksVUFBVSxDQUFDOzRCQUNqRCxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7NEJBQ3hCLE1BQU0sQ0FBQzt3QkFDWCxDQUFDO29CQUNMLENBQUM7b0JBRUQsa0NBQWtDO29CQUNsQyxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMscUJBQXFCLEVBQUUsQ0FBQztvQkFDbkQsRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7d0JBQ3hCLE9BQU8sV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7b0JBQ25ELENBQUM7Z0JBQ0wsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSiw2QkFBNkI7b0JBQzdCLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFdBQVcsQ0FBQztnQkFDOUUsQ0FBQztnQkFFRCxnREFBZ0Q7Z0JBQ2hELHVCQUF1QixHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyx1QkFBdUIsR0FBRyx5QkFBeUIsR0FBRyxrQkFBa0IsQ0FBQztnQkFFN0gsdUJBQXVCLEVBQUU7cUJBQ3BCLElBQUksQ0FBQztvQkFDRixPQUFPO29CQUNQLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO3dCQUNuQyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDeEQsQ0FBQztvQkFFRCxNQUFNLENBQUMsZUFBZSxFQUFFLENBQUM7b0JBRXpCLElBQU0sY0FBYyxHQUFHLENBQUM7d0JBQ3BCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDOzRCQUN2QyxNQUFNLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQzt3QkFDaEQsQ0FBQzt3QkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQzs0QkFDbEMsTUFBTSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQzs0QkFDakMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFFLGVBQWU7d0JBQ25DLENBQUM7d0JBQUMsSUFBSSxDQUFDLENBQUM7NEJBQ0osTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUM7d0JBQzFDLENBQUM7b0JBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFFTCxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO3dCQUN2QyxXQUFXLEVBQUUsS0FBSzt3QkFDbEIsdUJBQXVCLEVBQUUsSUFBSTt3QkFDN0IsVUFBVSxFQUFFLGNBQWM7d0JBQzFCLE9BQU8sRUFBRSxNQUFNLENBQUMsa0JBQWtCLENBQUMsT0FBTzt3QkFDMUMsY0FBYyxFQUFFLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLGdCQUFnQjt3QkFDM0QsVUFBVSxFQUFFLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFlBQVk7cUJBQ3RELENBQUMsQ0FBQztnQkFDUCxDQUFDLENBQUM7cUJBQ0QsSUFBSSxDQUFDO29CQUNGLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLG1DQUFtQyxDQUFDLENBQUM7b0JBQ3pELE1BQU0sQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUM7Z0JBQ25DLENBQUMsQ0FBQyxDQUFDO1lBQ1gsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7OztlQWNHO1lBQ1ksc0JBQWUsR0FBOUIsVUFBK0IsSUFBWTtnQkFDdkMsSUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUVyRSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7b0JBQy9DLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLFVBQVUsQ0FBQztnQkFDekYsQ0FBQztnQkFFRCxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsTUFBTSxDQUFDO29CQUMxQixHQUFHLEVBQUUsR0FBRztvQkFDUixPQUFPLEVBQUUsVUFBVSxPQUFZLEVBQUUsU0FBaUI7d0JBQzlDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7NEJBQ2hCLEtBQUssTUFBTTtnQ0FDUCxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0NBQzVDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2dDQUM3QyxDQUFDO2dDQUNELEtBQUssQ0FBQzs0QkFDVixLQUFLLFNBQVM7Z0NBQ1YsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO29DQUMvQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7Z0NBQzlELENBQUM7Z0NBQ0QsS0FBSyxDQUFDOzRCQUNWO2dDQUNJLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLHFCQUFxQixHQUFHLFNBQVMsQ0FBQyxDQUFDO2dDQUN0RCxLQUFLLENBQUM7d0JBQ2QsQ0FBQztvQkFDTCxDQUFDO29CQUNELE9BQU8sRUFBRTt3QkFDTCx5QkFBeUI7d0JBQ3pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQzs0QkFDM0MsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7NEJBQ3pDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDOzRCQUN2QyxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksTUFBTSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0NBQzVDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDOzRCQUM3QyxDQUFDO3dCQUNMLENBQUM7d0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQzs0QkFDbEQsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsb0JBQW9CLENBQUMsQ0FBQzt3QkFDN0MsQ0FBQztvQkFDTCxDQUFDO2lCQUNKLENBQUMsQ0FBQztZQUNQLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7Ozs7ZUFjRztZQUNZLG1DQUE0QixHQUEzQztnQkFDSSxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDO2dCQUMzQyxJQUFNLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBSSw0RkFBNEY7Z0JBQzlKLElBQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBTyxvQkFBb0I7Z0JBQ3RGLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUM7Z0JBRXhELDBEQUEwRDtnQkFDMUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsT0FBTyxJQUFJLElBQUksSUFBSSxhQUFhLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN2RixNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNiLENBQUM7Z0JBRUQsdUNBQXVDO2dCQUN2QyxPQUFPLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO2dCQUM1RCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3BCLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsQ0FBQztnQkFFRCxRQUFRLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBRWpELFFBQVE7Z0JBQ1IsRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ2xCLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztnQkFDOUIsQ0FBQztnQkFFRCwyQkFBMkI7Z0JBQzNCLE9BQU8sR0FBaUIsQ0FBQyxDQUFDLElBQUksQ0FBTSxNQUFNLENBQUMsY0FBYyxFQUFFLFVBQUMsR0FBUTtvQkFDaEUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNyQyxDQUFDLENBQUMsQ0FBQztnQkFDSCxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztvQkFDbEIsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsZ0RBQWdELEdBQUcsT0FBTyxDQUFDLENBQUM7b0JBQy9FLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsQ0FBQztnQkFFRCw4QkFBOEI7Z0JBQzlCLFVBQVUsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNuRCxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLEVBQUUsUUFBUSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFHLFFBQVEsRUFBRSxFQUFFLENBQUM7b0JBQ2xFLEVBQUUsQ0FBQyxDQUFDLFVBQVUsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzt3QkFDbEMsS0FBSyxDQUFDO29CQUNWLENBQUM7Z0JBQ0wsQ0FBQztnQkFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDUixPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyx3REFBd0QsR0FBRyxPQUFPLENBQUMsQ0FBQztvQkFDdkYsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDYixDQUFDO2dCQUVELE1BQU0sQ0FBQyxRQUFRLENBQUM7WUFDcEIsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7ZUFZRztZQUNZLG1CQUFZLEdBQTNCLFVBQTRCLFlBQTBCO2dCQUNsRCxJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ2xELElBQU0sS0FBSyxHQUFtQixZQUFZLENBQUM7Z0JBQzNDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUN4QixJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7b0JBQ2pCLElBQU0sVUFBUSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDckUsSUFBTSxPQUFPLEdBQWlCLENBQUMsQ0FBQyxJQUFJLENBQU0sTUFBTSxDQUFDLGNBQWMsRUFBRSxVQUFDLEdBQVE7d0JBQ3RFLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFRLENBQUMsQ0FBQztvQkFDckMsQ0FBQyxDQUFDLENBQUM7b0JBQ0gsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUM7d0JBQ2xCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLGdEQUFnRCxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQzt3QkFDN0YsTUFBTSxDQUFDO29CQUNYLENBQUM7b0JBRUQsOEJBQThCO29CQUM5QixJQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN6RCxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDO29CQUMzQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUcsUUFBUSxFQUFFLEVBQUUsQ0FBQzt3QkFDeEUsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOzRCQUNsQyxLQUFLLENBQUMsa0JBQWtCLEdBQUcsUUFBUSxDQUFDOzRCQUNwQyxLQUFLLENBQUM7d0JBQ1YsQ0FBQztvQkFDTCxDQUFDO2dCQUNMLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ0osS0FBSyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO29CQUMvQixLQUFLLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDO2dCQUNqQyxDQUFDO2dCQUVELE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBQ3pDLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7O2VBWUc7WUFDWSxvQkFBYSxHQUE1QixVQUE2QixPQUF3QjtnQkFDakQsSUFBTSxVQUFVLEdBQW9CLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDaEUsSUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLHFCQUFxQixFQUFFLENBQUM7Z0JBQ2hELHNCQUFzQjtnQkFDdEIsSUFBTSxLQUFLLEdBQWlCLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNwRixJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO2dCQUNuQyxJQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDO2dCQUM3QixJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQ2QsSUFBTSxpQkFBaUIsR0FBRyxHQUFHLENBQUM7Z0JBQzlCLElBQU0sZUFBZSxHQUFHLEVBQUUsQ0FBQztnQkFFM0IsOEJBQThCO2dCQUM5QixJQUFNLFNBQVMsR0FBRztvQkFDZCxFQUFFLENBQUMsQ0FBQyxlQUFlLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQzt3QkFDM0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsbUNBQW1DLENBQUMsQ0FBQzt3QkFDekQsTUFBTSxDQUFDLGtCQUFrQixHQUFHLEVBQUUsQ0FBQztvQkFDbkMsQ0FBQztvQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsS0FBSyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzt3QkFDMUMsS0FBSyxFQUFFLENBQUM7d0JBQ1IsVUFBVSxDQUFDLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO29CQUM3QyxDQUFDO29CQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNKLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO3dCQUMvQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7b0JBQ2pFLENBQUM7Z0JBQ0wsQ0FBQyxDQUFDO2dCQUVGLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ1IsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO29CQUVuQyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsV0FBVyxJQUFJLFFBQVEsQ0FBQztvQkFDL0MsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO29CQUV0QyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQzt3QkFDbkIsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO3dCQUNkLDBEQUEwRDt3QkFDMUQsc0NBQXNDO3dCQUN0QyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQzs0QkFDakIsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUMxQixDQUFDO3dCQUNELE9BQU8sVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFJLG1CQUFtQjt3QkFDakQsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDN0IsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDSixNQUFNLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO3dCQUNuRCxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQzFCLENBQUM7Z0JBQ0wsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxpREFBaUQsQ0FBQyxDQUFDO29CQUN0RSxNQUFNLENBQUMsa0JBQWtCLEdBQUcsRUFBRSxDQUFDO2dCQUNuQyxDQUFDO1lBQ0wsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7OztlQWNHO1lBQ1ksNEJBQXFCLEdBQXBDO2dCQUNJLElBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxLQUFLLENBQUM7Z0JBQzNDLElBQU0sa0JBQWtCLEdBQUcsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLFdBQVcsQ0FBQztnQkFDOUQsSUFBSSxDQUFTLEVBQUUsUUFBZ0IsQ0FBQztnQkFDaEMsSUFBSSxLQUFLLEdBQW1DLEVBQUUsQ0FBQztnQkFDL0MsSUFBSSxNQUFjLENBQUM7Z0JBRW5CLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsRUFBRSxRQUFRLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUcsUUFBUSxFQUFFLEVBQUUsQ0FBQztvQkFDbEUsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ2pDLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQ2xCLEtBQUssR0FBbUIsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQzt3QkFDdkQsS0FBSyxDQUFDO29CQUNWLENBQUM7Z0JBQ0wsQ0FBQztnQkFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQztvQkFDbkMsS0FBSyxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQztnQkFDakMsQ0FBQztnQkFFRCxNQUFNLENBQUM7b0JBQ0gsS0FBSyxFQUFFLE1BQU07b0JBQ2IsWUFBWSxFQUFFLEtBQUs7b0JBQ25CLFFBQVEsRUFBRSxRQUFRLEdBQUcsS0FBSyxDQUFDLGtCQUFrQjtvQkFDN0MsU0FBUyxFQUFFLENBQUM7d0JBQ1IsRUFBRSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDOzRCQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDO3dCQUNoQixDQUFDO3dCQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNKLE1BQU0sQ0FBQyxLQUFLLENBQUM7d0JBQ2pCLENBQUM7b0JBQ0wsQ0FBQyxDQUFDLEVBQUU7aUJBQ1AsQ0FBQztZQUNOLENBQUM7WUFFRDs7Ozs7Ozs7Ozs7O2VBWUc7WUFDWSx1QkFBZ0IsR0FBL0IsVUFBZ0MsSUFBWTtnQkFDeEMsSUFBTSxHQUFHLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEMsSUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3ZELE1BQU0sQ0FBQyxPQUFPLENBQUM7WUFDbkIsQ0FBQztZQUVEOzs7Ozs7Ozs7Ozs7O2VBYUc7WUFDWSxzQkFBZSxHQUE5QjtnQkFDSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ3JHLE1BQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFDMUMsQ0FBQztZQUNMLENBQUM7WUE1NUNjLG9CQUFhLEdBQWdCLEVBQUUsQ0FBQztZQUNoQyxlQUFRLEdBQW9CLElBQUksQ0FBQztZQUNqQyxxQkFBYyxHQUFXLEVBQUUsQ0FBQztZQUM1Qix5QkFBa0IsR0FBaUIsRUFBRSxDQUFDO1lBQ3RDLHdCQUFpQixHQUFXLElBQUksQ0FBQztZQUNqQyxtQkFBWSxHQUFXLEVBQUUsQ0FBQztZQUMxQix3QkFBaUIsR0FBWSxJQUFJLENBQUM7WUFDbEMsZ0JBQVMsR0FBa0MsSUFBSSxDQUFDO1lBQ2hELGFBQU0sR0FBZSxJQUFJLENBQUM7WUFDMUIsaUJBQVUsR0FBRyxHQUFHLENBQUMsQ0FBUSxXQUFXO1lBQ3BDLDRCQUFxQixHQUFHLGVBQWUsQ0FBQztZQUN4QywwQkFBbUIsR0FBRyxxQkFBcUIsQ0FBQztZQUM1Qyw0QkFBcUIsR0FBRyx1QkFBdUIsQ0FBQztZQUNoRCwyQkFBb0IsR0FBRyxZQUFZLENBQUM7WUFDcEMsb0JBQWEsR0FBRyxjQUFjLENBQUM7WUFFL0IsMkJBQW9CLEdBQWdCO2dCQUMvQyxZQUFZLEVBQUUsSUFBSTtnQkFDbEIsbUJBQW1CLEVBQUUsS0FBSzthQUM3QixDQUFDO1lBRWEsK0JBQXdCLEdBQW9CO2dCQUN2RCxPQUFPLEVBQUUsSUFBSTtnQkFDYixPQUFPLEVBQUUsS0FBSztnQkFDZCxNQUFNLEVBQUUsSUFBSTthQUNmLENBQUM7WUFvNENOLGFBQUM7U0FBQTtRQS81Q1ksZ0JBQU0sU0ErNUNsQjtJQUNMLENBQUMsRUFubURhLFNBQVMsR0FBVCxhQUFTLEtBQVQsYUFBUyxRQW1tRHRCO0FBQUQsQ0FBQyxFQW5tRFMsR0FBRyxLQUFILEdBQUcsUUFtbURaO0FDdG1ERCxJQUFVLEdBQUcsQ0FrV1o7QUFsV0QsV0FBVSxHQUFHO0lBQUMsYUFBUyxDQWtXdEI7SUFsV2Esb0JBQVM7UUFFbkIsSUFBTyxPQUFPLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQztRQUU3QixJQUFNLEdBQUcsR0FBRyx1QkFBdUIsQ0FBQztRQXNCcEM7Ozs7Ozs7O1dBUUc7UUFDSDtZQWFJLDBDQUEwQztZQUMxQyxpQkFBaUI7WUFFakI7Ozs7Ozs7Ozs7Ozs7O2VBY0c7WUFDSCxjQUFvQixJQUFZLEVBQVUsR0FBVyxFQUFFLE9BQThCO2dCQUFqRSxTQUFJLEdBQUosSUFBSSxDQUFRO2dCQUFVLFFBQUcsR0FBSCxHQUFHLENBQVE7Z0JBQ2pELElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEIsQ0FBQztZQUtELHNCQUFJLHdCQUFNO2dCQUhWLDBDQUEwQztnQkFDMUMsa0JBQWtCO3FCQUVsQixjQUFrQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFHLENBQUM7OztlQUFBO1lBQ3JHLHNCQUFJLHFCQUFHO3FCQUFQLGNBQWtDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQWlELENBQUM7OztlQUFBO1lBQ3JHLHNCQUFJLG9CQUFFO3FCQUFOLGNBQWtDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQWtELENBQUM7OztlQUFBO1lBQ3JHLHNCQUFJLHVCQUFLO3FCQUFULGNBQWtDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQStDLENBQUM7OztlQUFBO1lBQ3JHLHNCQUFJLHlCQUFPO3FCQUFYLGNBQWtDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQTZDLENBQUM7OztlQUFBO1lBQ3JHLHNCQUFJLHlCQUFPO3FCQUFYLGNBQWtDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQTZDLENBQUM7OztlQUFBO1lBQ3JHLHNCQUFJLHdCQUFNO3FCQUFWLGNBQWtDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQThDLENBQUM7cUJBQ3JHLFVBQVcsU0FBaUIsSUFBTSxJQUFJLENBQUMsT0FBTyxHQUFRLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFPLENBQUM7OztlQURBO1lBR3JHLDBDQUEwQztZQUMxQyx1QkFBdUI7WUFFdkIsc0JBQXNCO1lBQ2YsbUNBQW9CLEdBQTNCLFVBQTRCLGNBQTJCO2dCQUNuRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLGNBQWMsQ0FBQyxDQUFDO2dCQUNyRCxDQUFDO1lBQ0wsQ0FBQztZQUVELHdCQUF3QjtZQUNqQixtQ0FBb0IsR0FBM0IsVUFBNEIsS0FBb0I7Z0JBQzVDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNkLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNuRCxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQ2pCLENBQUM7WUFDTCxDQUFDO1lBRUQscUNBQXFDO1lBQzlCLGtDQUFtQixHQUExQjtnQkFDSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDZCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2dCQUM3QyxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQzdCLENBQUM7WUFDTCxDQUFDO1lBRUQsYUFBYTtZQUNOLHdCQUFTLEdBQWhCLFVBQWlCLEtBQW9CLEVBQUUsSUFBYTtnQkFDaEQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ2QsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDOUMsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNqQixDQUFDO1lBQ0wsQ0FBQztZQUVELGlDQUFpQztZQUMxQiwyQkFBWSxHQUFuQixVQUFvQixLQUFtQjtnQkFDbkMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3BDLENBQUM7WUFDTCxDQUFDO1lBRUQscUNBQXFDO1lBQzlCLGlDQUFrQixHQUF6QixVQUEwQixLQUFtQjtnQkFDekMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDMUMsQ0FBQztZQUNMLENBQUM7WUFFRCw4Q0FBOEM7WUFDdkMseUJBQVUsR0FBakIsVUFBa0IsS0FBbUI7Z0JBQ2pDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNsQyxDQUFDO1lBQ0wsQ0FBQztZQUVELG1DQUFtQztZQUM1QiwrQkFBZ0IsR0FBdkIsVUFBd0IsS0FBbUIsRUFBRSxJQUFvQjtnQkFDN0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ2QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzlDLENBQUM7WUFDTCxDQUFDO1lBRUQscURBQXFEO1lBQzlDLHlCQUFVLEdBQWpCLFVBQWtCLEtBQW1CLEVBQUUsSUFBb0I7Z0JBQ3ZELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDeEMsQ0FBQztZQUNMLENBQUM7WUFFRCxtQ0FBbUM7WUFDNUIsK0JBQWdCLEdBQXZCLFVBQXdCLEtBQW1CLEVBQUUsSUFBb0I7Z0JBQzdELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNkLElBQUksQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUM5QyxDQUFDO1lBQ0wsQ0FBQztZQUVELHFEQUFxRDtZQUM5Qyx5QkFBVSxHQUFqQixVQUFrQixLQUFtQixFQUFFLElBQW9CO2dCQUN2RCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQ3hDLENBQUM7WUFDTCxDQUFDO1lBRUQsK0JBQStCO1lBQ3hCLDJCQUFZLEdBQW5CLFVBQW9CLEtBQW1CO2dCQUNuQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztvQkFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDcEMsQ0FBQztZQUNMLENBQUM7WUFFRCwwQ0FBMEM7WUFDMUMsa0JBQWtCO1lBRWxCLG9CQUFvQjtZQUNaLG9CQUFLLEdBQWIsVUFBYyxPQUE2QjtnQkFBM0MsaUJBaURDO2dCQWhERywyQkFBMkI7Z0JBQzNCLElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO2dCQUMxQixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztnQkFFcEIsV0FBVztnQkFDWCxJQUFNLFFBQVEsR0FBVyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDeEMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztxQkFDTixHQUFHLENBQUMsa0JBQWtCLEVBQUUsUUFBUSxDQUFDO3FCQUNqQyxFQUFFLENBQUMsa0JBQWtCLEVBQUUsUUFBUSxFQUFFLFVBQUMsS0FBbUI7b0JBQ2xELEtBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO29CQUNsQyxLQUFJLENBQUMsUUFBUSxHQUFHLEtBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ3RFLEtBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztvQkFDdEUsS0FBSSxDQUFDLE1BQU07eUJBQ04sRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFDLEVBQWdCO3dCQUMvQixLQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN0QixDQUFDLENBQUM7eUJBQ0QsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFVBQUMsRUFBZ0IsRUFBRSxJQUFtQjt3QkFDeEQsS0FBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ2xDLENBQUMsQ0FBQzt5QkFFRCxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQUMsRUFBZ0IsRUFBRSxJQUFtQjt3QkFDbEQsS0FBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQzVCLENBQUMsQ0FBQzt5QkFDRCxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBQyxFQUFnQixFQUFFLElBQW1CO3dCQUN4RCxLQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDbEMsQ0FBQyxDQUFDO3lCQUVELEVBQUUsQ0FBQyxVQUFVLEVBQUUsVUFBQyxFQUFnQixFQUFFLElBQW1CO3dCQUNsRCxLQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDNUIsQ0FBQyxDQUFDO3lCQUNELEVBQUUsQ0FBQyxZQUFZLEVBQUUsVUFBQyxFQUFnQjt3QkFDL0IsS0FBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDeEIsQ0FBQyxDQUFDLENBQUM7b0JBQ1AsS0FBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNqQyxDQUFDLENBQUMsQ0FBQztnQkFFUCxPQUFPLEdBQUcsT0FBTyxJQUFJLEVBQUUsQ0FBQztnQkFFeEIsV0FBVztnQkFDWCxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7Z0JBQzVCLFlBQVk7Z0JBQ1osSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO2dCQUV0QyxhQUFhO2dCQUNiLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDeEIsT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUM3QixDQUFDO2dCQUNELGdCQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM3RSxDQUFDO1lBRUQsK0JBQStCO1lBQ3ZCLDJCQUFZLEdBQXBCO2dCQUNJLElBQU0sV0FBVyxHQUFHLGdCQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsV0FBVyxDQUFDO2dCQUN2RCxJQUFNLFNBQVMsR0FBRyxnQkFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLGFBQWEsQ0FBQztnQkFFdkQsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLFdBQVcsSUFBSSxJQUFJLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDM0MsTUFBTSxDQUFDLFNBQVMsQ0FBQztnQkFDckIsQ0FBQztnQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUM7b0JBQ25DLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2xCLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDO29CQUNqQyxNQUFNLENBQUMsTUFBTSxDQUFDO2dCQUNsQixDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE1BQU0sQ0FBQyxTQUFTLENBQUM7Z0JBQ3JCLENBQUM7WUFDTCxDQUFDO1lBRU8sK0JBQWdCLEdBQXhCLFVBQXlCLEtBQW1CO2dCQUN4QyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMsQ0FBQztZQUVPLHVCQUFRLEdBQWhCLFVBQWlCLEtBQW1CO2dCQUNoQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO29CQUNyQixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztnQkFDN0IsQ0FBQztnQkFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNCLENBQUM7WUFFTyw2QkFBYyxHQUF0QixVQUF1QixLQUFtQixFQUFFLElBQW1CO2dCQUMzRCxTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM5QixJQUFJLENBQUMsT0FBTyxHQUFrQixnQkFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUNqRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNyRixDQUFDO1lBRU8sdUJBQVEsR0FBaEIsVUFBaUIsS0FBbUIsRUFBRSxJQUFtQjtnQkFDckQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQy9FLENBQUM7WUFFTyw2QkFBYyxHQUF0QixVQUF1QixLQUFtQixFQUFFLElBQW1CO2dCQUMzRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDakYsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNyRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO29CQUM1QixnQkFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ3BDLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGdCQUFNLENBQUMsZUFBZSxFQUFFLElBQUksZ0JBQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQzFELGdCQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDcEMsQ0FBQztnQkFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztnQkFDcEIsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxDQUFDO1lBRU8sdUJBQVEsR0FBaEIsVUFBaUIsS0FBbUIsRUFBRSxJQUFtQjtnQkFDckQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQy9FLENBQUM7WUFFTyx5QkFBVSxHQUFsQixVQUFtQixLQUFtQjtnQkFDbEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dCQUNyQixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUN6QixDQUFDO1lBQ0wsV0FBQztRQUFELENBQUM7UUFsUVksY0FBSSxPQWtRaEI7UUFFRCx1RUFBdUU7UUFDdkUsa0JBQWtCO1FBRWxCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0EyQkc7UUFDUDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1VBMkJFO0lBQ0YsQ0FBQyxFQWxXYSxTQUFTLEdBQVQsYUFBUyxLQUFULGFBQVMsUUFrV3RCO0FBQUQsQ0FBQyxFQWxXUyxHQUFHLEtBQUgsR0FBRyxRQWtXWjs7Ozs7Ozs7OztBQ2xXRCwrQzs7Ozs7O0FDQUEsK0M7Ozs7OztBQ0FBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQUE7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQSwyQ0FBMkM7O0FBRTNDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQSxzQ0FBc0M7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7O0FBRUE7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQzs7QUFFckM7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLHdDQUF3Qzs7O0FBR3hDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7OztBQUdMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjs7QUFFdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpREFBaUQsdUNBQXVDO0FBQ3hGLGlEQUFpRCxzQ0FBc0M7QUFDdkYscURBQXFELHNDQUFzQztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDLGUiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIiksIHJlcXVpcmUoXCJjZHAuaTE4blwiKSwgcmVxdWlyZShcImJhY2tib25lXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImpxdWVyeVwiLCBcImNkcC5pMThuXCIsIFwiYmFja2JvbmVcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRnJhbWV3b3JrXCJdID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpLCByZXF1aXJlKFwiY2RwLmkxOG5cIiksIHJlcXVpcmUoXCJiYWNrYm9uZVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiQ0RQXCJdID0gcm9vdFtcIkNEUFwiXSB8fCB7fSwgcm9vdFtcIkNEUFwiXVtcIkZyYW1ld29ya1wiXSA9IGZhY3Rvcnkocm9vdFtcImpRdWVyeVwiXSwgcm9vdFtcIkNEUFwiXSwgcm9vdFtcIkJhY2tib25lXCJdKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYzU2ZWYxMzczMTk1Zjc5YWFkOWIiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcImpRdWVyeVwiLFwiY29tbW9uanNcIjpcImpxdWVyeVwiLFwiY29tbW9uanMyXCI6XCJqcXVlcnlcIixcImFtZFwiOlwianF1ZXJ5XCJ9XG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbihmdW5jdGlvbigpIHtcblxuLyohXHJcbiogalF1ZXJ5IE1vYmlsZSAxLjQuNVxyXG4qIEdpdCBIRUFEIGhhc2g6IDY4ZTU1ZTc4YjI5MjYzNGQzOTkxYzc5NWYwNmY1ZTM3YTUxMmRlY2MgPD4gRGF0ZTogRnJpIE9jdCAzMSAyMDE0IDE3OjMzOjMwIFVUQ1xyXG4qIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tXHJcbipcclxuKiBDb3B5cmlnaHQgMjAxMCwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXJjb250cmlidXRvcnNcclxuKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4qXHJcbiovXHJcblxyXG5cclxuKGZ1bmN0aW9uICggcm9vdCwgZG9jLCBmYWN0b3J5ICkge1xyXG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XHJcblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcblx0XHRkZWZpbmUoIFsgXCJqcXVlcnlcIiBdLCBmdW5jdGlvbiAoICQgKSB7XHJcblx0XHRcdGZhY3RvcnkoICQsIHJvb3QsIGRvYyApO1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGU7XHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXHJcblx0XHRmYWN0b3J5KCByb290LmpRdWVyeSwgcm9vdCwgZG9jICk7XHJcblx0fVxyXG59KCB0aGlzLCBkb2N1bWVudCwgZnVuY3Rpb24gKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cdCQubW9iaWxlID0ge307XHJcbn0oIGpRdWVyeSApKTtcclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgVUkgQ29yZSBjMGFiNzEwNTZiOTM2NjI3ZThhNzgyMWYwM2MwNDRhZWM2MjgwYTQwXHJcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS9cclxuICovXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHV1aWQgPSAwLFxyXG5cdHJ1bmlxdWVJZCA9IC9edWktaWQtXFxkKyQvO1xyXG5cclxuLy8gJC51aSBtaWdodCBleGlzdCBmcm9tIGNvbXBvbmVudHMgd2l0aCBubyBkZXBlbmRlbmNpZXMsIGUuZy4sICQudWkucG9zaXRpb25cclxuJC51aSA9ICQudWkgfHwge307XHJcblxyXG4kLmV4dGVuZCggJC51aSwge1xyXG5cdHZlcnNpb246IFwiYzBhYjcxMDU2YjkzNjYyN2U4YTc4MjFmMDNjMDQ0YWVjNjI4MGE0MFwiLFxyXG5cclxuXHRrZXlDb2RlOiB7XHJcblx0XHRCQUNLU1BBQ0U6IDgsXHJcblx0XHRDT01NQTogMTg4LFxyXG5cdFx0REVMRVRFOiA0NixcclxuXHRcdERPV046IDQwLFxyXG5cdFx0RU5EOiAzNSxcclxuXHRcdEVOVEVSOiAxMyxcclxuXHRcdEVTQ0FQRTogMjcsXHJcblx0XHRIT01FOiAzNixcclxuXHRcdExFRlQ6IDM3LFxyXG5cdFx0UEFHRV9ET1dOOiAzNCxcclxuXHRcdFBBR0VfVVA6IDMzLFxyXG5cdFx0UEVSSU9EOiAxOTAsXHJcblx0XHRSSUdIVDogMzksXHJcblx0XHRTUEFDRTogMzIsXHJcblx0XHRUQUI6IDksXHJcblx0XHRVUDogMzhcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gcGx1Z2luc1xyXG4kLmZuLmV4dGVuZCh7XHJcblx0Zm9jdXM6IChmdW5jdGlvbiggb3JpZyApIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbiggZGVsYXksIGZuICkge1xyXG5cdFx0XHRyZXR1cm4gdHlwZW9mIGRlbGF5ID09PSBcIm51bWJlclwiID9cclxuXHRcdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQkKCBlbGVtICkuZm9jdXMoKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBmbiApIHtcclxuXHRcdFx0XHRcdFx0XHRmbi5jYWxsKCBlbGVtICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIGRlbGF5ICk7XHJcblx0XHRcdFx0fSkgOlxyXG5cdFx0XHRcdG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0fTtcclxuXHR9KSggJC5mbi5mb2N1cyApLFxyXG5cclxuXHRzY3JvbGxQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNjcm9sbFBhcmVudDtcclxuXHRcdGlmICgoJC51aS5pZSAmJiAoLyhzdGF0aWN8cmVsYXRpdmUpLykudGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKSkgfHwgKC9hYnNvbHV0ZS8pLnRlc3QodGhpcy5jc3MoXCJwb3NpdGlvblwiKSkpIHtcclxuXHRcdFx0c2Nyb2xsUGFyZW50ID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAoLyhyZWxhdGl2ZXxhYnNvbHV0ZXxmaXhlZCkvKS50ZXN0KCQuY3NzKHRoaXMsXCJwb3NpdGlvblwiKSkgJiYgKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpO1xyXG5cdFx0XHR9KS5lcSgwKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNjcm9sbFBhcmVudCA9IHRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpO1xyXG5cdFx0XHR9KS5lcSgwKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gKCAvZml4ZWQvICkudGVzdCggdGhpcy5jc3MoIFwicG9zaXRpb25cIikgKSB8fCAhc2Nyb2xsUGFyZW50Lmxlbmd0aCA/ICQoIHRoaXNbIDAgXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgOiBzY3JvbGxQYXJlbnQ7XHJcblx0fSxcclxuXHJcblx0dW5pcXVlSWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5pZCApIHtcclxuXHRcdFx0XHR0aGlzLmlkID0gXCJ1aS1pZC1cIiArICgrK3V1aWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRyZW1vdmVVbmlxdWVJZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHJ1bmlxdWVJZC50ZXN0KCB0aGlzLmlkICkgKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoIFwiaWRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gc2VsZWN0b3JzXHJcbmZ1bmN0aW9uIGZvY3VzYWJsZSggZWxlbWVudCwgaXNUYWJJbmRleE5vdE5hTiApIHtcclxuXHR2YXIgbWFwLCBtYXBOYW1lLCBpbWcsXHJcblx0XHRub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHRpZiAoIFwiYXJlYVwiID09PSBub2RlTmFtZSApIHtcclxuXHRcdG1hcCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHRcdG1hcE5hbWUgPSBtYXAubmFtZTtcclxuXHRcdGlmICggIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJtYXBcIiApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0aW1nID0gJCggXCJpbWdbdXNlbWFwPSNcIiArIG1hcE5hbWUgKyBcIl1cIiApWzBdO1xyXG5cdFx0cmV0dXJuICEhaW1nICYmIHZpc2libGUoIGltZyApO1xyXG5cdH1cclxuXHRyZXR1cm4gKCAvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3QoIG5vZGVOYW1lICkgP1xyXG5cdFx0IWVsZW1lbnQuZGlzYWJsZWQgOlxyXG5cdFx0XCJhXCIgPT09IG5vZGVOYW1lID9cclxuXHRcdFx0ZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOlxyXG5cdFx0XHRpc1RhYkluZGV4Tm90TmFOKSAmJlxyXG5cdFx0Ly8gdGhlIGVsZW1lbnQgYW5kIGFsbCBvZiBpdHMgYW5jZXN0b3JzIG11c3QgYmUgdmlzaWJsZVxyXG5cdFx0dmlzaWJsZSggZWxlbWVudCApO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2aXNpYmxlKCBlbGVtZW50ICkge1xyXG5cdHJldHVybiAkLmV4cHIuZmlsdGVycy52aXNpYmxlKCBlbGVtZW50ICkgJiZcclxuXHRcdCEkKCBlbGVtZW50ICkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLmNzcyggdGhpcywgXCJ2aXNpYmlsaXR5XCIgKSA9PT0gXCJoaWRkZW5cIjtcclxuXHRcdH0pLmxlbmd0aDtcclxufVxyXG5cclxuJC5leHRlbmQoICQuZXhwclsgXCI6XCIgXSwge1xyXG5cdGRhdGE6ICQuZXhwci5jcmVhdGVQc2V1ZG8gP1xyXG5cdFx0JC5leHByLmNyZWF0ZVBzZXVkbyhmdW5jdGlvbiggZGF0YU5hbWUgKSB7XHJcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcclxuXHRcdFx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIGRhdGFOYW1lICk7XHJcblx0XHRcdH07XHJcblx0XHR9KSA6XHJcblx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGksIG1hdGNoICkge1xyXG5cdFx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIG1hdGNoWyAzIF0gKTtcclxuXHRcdH0sXHJcblxyXG5cdGZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRyZXR1cm4gZm9jdXNhYmxlKCBlbGVtZW50LCAhaXNOYU4oICQuYXR0ciggZWxlbWVudCwgXCJ0YWJpbmRleFwiICkgKSApO1xyXG5cdH0sXHJcblxyXG5cdHRhYmJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHZhciB0YWJJbmRleCA9ICQuYXR0ciggZWxlbWVudCwgXCJ0YWJpbmRleFwiICksXHJcblx0XHRcdGlzVGFiSW5kZXhOYU4gPSBpc05hTiggdGFiSW5kZXggKTtcclxuXHRcdHJldHVybiAoIGlzVGFiSW5kZXhOYU4gfHwgdGFiSW5kZXggPj0gMCApICYmIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzVGFiSW5kZXhOYU4gKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuaWYgKCAhJCggXCI8YT5cIiApLm91dGVyV2lkdGgoIDEgKS5qcXVlcnkgKSB7XHJcblx0JC5lYWNoKCBbIFwiV2lkdGhcIiwgXCJIZWlnaHRcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcclxuXHRcdHZhciBzaWRlID0gbmFtZSA9PT0gXCJXaWR0aFwiID8gWyBcIkxlZnRcIiwgXCJSaWdodFwiIF0gOiBbIFwiVG9wXCIsIFwiQm90dG9tXCIgXSxcclxuXHRcdFx0dHlwZSA9IG5hbWUudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0b3JpZyA9IHtcclxuXHRcdFx0XHRpbm5lcldpZHRoOiAkLmZuLmlubmVyV2lkdGgsXHJcblx0XHRcdFx0aW5uZXJIZWlnaHQ6ICQuZm4uaW5uZXJIZWlnaHQsXHJcblx0XHRcdFx0b3V0ZXJXaWR0aDogJC5mbi5vdXRlcldpZHRoLFxyXG5cdFx0XHRcdG91dGVySGVpZ2h0OiAkLmZuLm91dGVySGVpZ2h0XHJcblx0XHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVkdWNlKCBlbGVtLCBzaXplLCBib3JkZXIsIG1hcmdpbiApIHtcclxuXHRcdFx0JC5lYWNoKCBzaWRlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIHRoaXMgKSApIHx8IDA7XHJcblx0XHRcdFx0aWYgKCBib3JkZXIgKSB7XHJcblx0XHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgdGhpcyArIFwiV2lkdGhcIiApICkgfHwgMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBtYXJnaW4gKSB7XHJcblx0XHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcIm1hcmdpblwiICsgdGhpcyApICkgfHwgMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm4gc2l6ZTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmZuWyBcImlubmVyXCIgKyBuYW1lIF0gPSBmdW5jdGlvbiggc2l6ZSApIHtcclxuXHRcdFx0aWYgKCBzaXplID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG9yaWdbIFwiaW5uZXJcIiArIG5hbWUgXS5jYWxsKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplICkgKyBcInB4XCIgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCQuZm5bIFwib3V0ZXJcIiArIG5hbWVdID0gZnVuY3Rpb24oIHNpemUsIG1hcmdpbiApIHtcclxuXHRcdFx0aWYgKCB0eXBlb2Ygc2l6ZSAhPT0gXCJudW1iZXJcIiApIHtcclxuXHRcdFx0XHRyZXR1cm4gb3JpZ1sgXCJvdXRlclwiICsgbmFtZSBdLmNhbGwoIHRoaXMsIHNpemUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzKS5jc3MoIHR5cGUsIHJlZHVjZSggdGhpcywgc2l6ZSwgdHJ1ZSwgbWFyZ2luICkgKyBcInB4XCIgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cdH0pO1xyXG59XHJcblxyXG4vLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5pZiAoICEkLmZuLmFkZEJhY2sgKSB7XHJcblx0JC5mbi5hZGRCYWNrID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xyXG5cdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cclxuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxyXG5cdFx0KTtcclxuXHR9O1xyXG59XHJcblxyXG4vLyBzdXBwb3J0OiBqUXVlcnkgMS42LjEsIDEuNi4yIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC85NDEzKVxyXG5pZiAoICQoIFwiPGE+XCIgKS5kYXRhKCBcImEtYlwiLCBcImFcIiApLnJlbW92ZURhdGEoIFwiYS1iXCIgKS5kYXRhKCBcImEtYlwiICkgKSB7XHJcblx0JC5mbi5yZW1vdmVEYXRhID0gKGZ1bmN0aW9uKCByZW1vdmVEYXRhICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBrZXkgKSB7XHJcblx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzLCAkLmNhbWVsQ2FzZSgga2V5ICkgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSkoICQuZm4ucmVtb3ZlRGF0YSApO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gZGVwcmVjYXRlZFxyXG4kLnVpLmllID0gISEvbXNpZSBbXFx3Ll0rLy5leGVjKCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgKTtcclxuXHJcbiQuc3VwcG9ydC5zZWxlY3RzdGFydCA9IFwib25zZWxlY3RzdGFydFwiIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuJC5mbi5leHRlbmQoe1xyXG5cdGRpc2FibGVTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuYmluZCggKCAkLnN1cHBvcnQuc2VsZWN0c3RhcnQgPyBcInNlbGVjdHN0YXJ0XCIgOiBcIm1vdXNlZG93blwiICkgK1xyXG5cdFx0XHRcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRlbmFibGVTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMudW5iaW5kKCBcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIgKTtcclxuXHR9LFxyXG5cclxuXHR6SW5kZXg6IGZ1bmN0aW9uKCB6SW5kZXggKSB7XHJcblx0XHRpZiAoIHpJbmRleCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5jc3MoIFwiekluZGV4XCIsIHpJbmRleCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5sZW5ndGggKSB7XHJcblx0XHRcdHZhciBlbGVtID0gJCggdGhpc1sgMCBdICksIHBvc2l0aW9uLCB2YWx1ZTtcclxuXHRcdFx0d2hpbGUgKCBlbGVtLmxlbmd0aCAmJiBlbGVtWyAwIF0gIT09IGRvY3VtZW50ICkge1xyXG5cdFx0XHRcdC8vIElnbm9yZSB6LWluZGV4IGlmIHBvc2l0aW9uIGlzIHNldCB0byBhIHZhbHVlIHdoZXJlIHotaW5kZXggaXMgaWdub3JlZCBieSB0aGUgYnJvd3NlclxyXG5cdFx0XHRcdC8vIFRoaXMgbWFrZXMgYmVoYXZpb3Igb2YgdGhpcyBmdW5jdGlvbiBjb25zaXN0ZW50IGFjcm9zcyBicm93c2Vyc1xyXG5cdFx0XHRcdC8vIFdlYktpdCBhbHdheXMgcmV0dXJucyBhdXRvIGlmIHRoZSBlbGVtZW50IGlzIHBvc2l0aW9uZWRcclxuXHRcdFx0XHRwb3NpdGlvbiA9IGVsZW0uY3NzKCBcInBvc2l0aW9uXCIgKTtcclxuXHRcdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwicmVsYXRpdmVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdFx0Ly8gSUUgcmV0dXJucyAwIHdoZW4gekluZGV4IGlzIG5vdCBzcGVjaWZpZWRcclxuXHRcdFx0XHRcdC8vIG90aGVyIGJyb3dzZXJzIHJldHVybiBhIHN0cmluZ1xyXG5cdFx0XHRcdFx0Ly8gd2UgaWdub3JlIHRoZSBjYXNlIG9mIG5lc3RlZCBlbGVtZW50cyB3aXRoIGFuIGV4cGxpY2l0IHZhbHVlIG9mIDBcclxuXHRcdFx0XHRcdC8vIDxkaXYgc3R5bGU9XCJ6LWluZGV4OiAtMTA7XCI+PGRpdiBzdHlsZT1cInotaW5kZXg6IDA7XCI+PC9kaXY+PC9kaXY+XHJcblx0XHRcdFx0XHR2YWx1ZSA9IHBhcnNlSW50KCBlbGVtLmNzcyggXCJ6SW5kZXhcIiApLCAxMCApO1xyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIHZhbHVlICkgJiYgdmFsdWUgIT09IDAgKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxlbSA9IGVsZW0ucGFyZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gMDtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gJC51aS5wbHVnaW4gaXMgZGVwcmVjYXRlZC4gVXNlICQud2lkZ2V0KCkgZXh0ZW5zaW9ucyBpbnN0ZWFkLlxyXG4kLnVpLnBsdWdpbiA9IHtcclxuXHRhZGQ6IGZ1bmN0aW9uKCBtb2R1bGUsIG9wdGlvbiwgc2V0ICkge1xyXG5cdFx0dmFyIGksXHJcblx0XHRcdHByb3RvID0gJC51aVsgbW9kdWxlIF0ucHJvdG90eXBlO1xyXG5cdFx0Zm9yICggaSBpbiBzZXQgKSB7XHJcblx0XHRcdHByb3RvLnBsdWdpbnNbIGkgXSA9IHByb3RvLnBsdWdpbnNbIGkgXSB8fCBbXTtcclxuXHRcdFx0cHJvdG8ucGx1Z2luc1sgaSBdLnB1c2goIFsgb3B0aW9uLCBzZXRbIGkgXSBdICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRjYWxsOiBmdW5jdGlvbiggaW5zdGFuY2UsIG5hbWUsIGFyZ3MsIGFsbG93RGlzY29ubmVjdGVkICkge1xyXG5cdFx0dmFyIGksXHJcblx0XHRcdHNldCA9IGluc3RhbmNlLnBsdWdpbnNbIG5hbWUgXTtcclxuXHJcblx0XHRpZiAoICFzZXQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICFhbGxvd0Rpc2Nvbm5lY3RlZCAmJiAoICFpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZSB8fCBpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gMTEgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRpZiAoIGluc3RhbmNlLm9wdGlvbnNbIHNldFsgaSBdWyAwIF0gXSApIHtcclxuXHRcdFx0XHRzZXRbIGkgXVsgMSBdLmFwcGx5KCBpbnN0YW5jZS5lbGVtZW50LCBhcmdzICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvLyBTdWJ0cmFjdCB0aGUgaGVpZ2h0IG9mIGV4dGVybmFsIHRvb2xiYXJzIGZyb20gdGhlIHBhZ2UgaGVpZ2h0LCBpZiB0aGUgcGFnZSBkb2VzIG5vdCBoYXZlXHJcblx0Ly8gaW50ZXJuYWwgdG9vbGJhcnMgb2YgdGhlIHNhbWUgdHlwZS4gV2UgdGFrZSBjYXJlIHRvIHVzZSB0aGUgd2lkZ2V0IG9wdGlvbnMgaWYgd2UgZmluZCBhXHJcblx0Ly8gd2lkZ2V0IGluc3RhbmNlIGFuZCB0aGUgZWxlbWVudCdzIGRhdGEtYXR0cmlidXRlcyBvdGhlcndpc2UuXHJcblx0dmFyIGNvbXBlbnNhdGVUb29sYmFycyA9IGZ1bmN0aW9uKCBwYWdlLCBkZXNpcmVkSGVpZ2h0ICkge1xyXG5cdFx0dmFyIHBhZ2VQYXJlbnQgPSBwYWdlLnBhcmVudCgpLFxyXG5cdFx0XHR0b29sYmFyc0FmZmVjdGluZ0hlaWdodCA9IFtdLFxyXG5cclxuXHRcdFx0Ly8gV2UgdXNlIHRoaXMgZnVuY3Rpb24gdG8gZmlsdGVyIGZpeGVkIHRvb2xiYXJzIHdpdGggb3B0aW9uIHVwZGF0ZVBhZ2VQYWRkaW5nIHNldCB0b1xyXG5cdFx0XHQvLyB0cnVlICh3aGljaCBpcyB0aGUgZGVmYXVsdCkgZnJvbSBvdXIgaGVpZ2h0IHN1YnRyYWN0aW9uLCBiZWNhdXNlIGZpeGVkIHRvb2xiYXJzIHdpdGhcclxuXHRcdFx0Ly8gb3B0aW9uIHVwZGF0ZVBhZ2VQYWRkaW5nIHNldCB0byB0cnVlIGNvbXBlbnNhdGUgZm9yIHRoZWlyIHByZXNlbmNlIGJ5IGFkZGluZyBwYWRkaW5nXHJcblx0XHRcdC8vIHRvIHRoZSBhY3RpdmUgcGFnZS4gV2Ugd2FudCB0byBhdm9pZCBkb3VibGUtY291bnRpbmcgYnkgYWxzbyBzdWJ0cmFjdGluZyB0aGVpclxyXG5cdFx0XHQvLyBoZWlnaHQgZnJvbSB0aGUgZGVzaXJlZCBwYWdlIGhlaWdodC5cclxuXHRcdFx0bm9QYWRkZXJzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHRoZUVsZW1lbnQgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHR3aWRnZXRPcHRpb25zID0gJC5tb2JpbGUudG9vbGJhciAmJiB0aGVFbGVtZW50LmRhdGEoIFwibW9iaWxlLXRvb2xiYXJcIiApID9cclxuXHRcdFx0XHRcdFx0dGhlRWxlbWVudC50b29sYmFyKCBcIm9wdGlvblwiICkgOiB7XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IHRoZUVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInBvc2l0aW9uXCIgKSxcclxuXHRcdFx0XHRcdFx0XHR1cGRhdGVQYWdlUGFkZGluZzogKCB0aGVFbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICtcclxuXHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlLXBhZ2UtcGFkZGluZ1wiICkgIT09IGZhbHNlIClcclxuXHRcdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0cmV0dXJuICEoIHdpZGdldE9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJlxyXG5cdFx0XHRcdFx0d2lkZ2V0T3B0aW9ucy51cGRhdGVQYWdlUGFkZGluZyA9PT0gdHJ1ZSApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRleHRlcm5hbEhlYWRlcnMgPSBwYWdlUGFyZW50LmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maWx0ZXIoIG5vUGFkZGVycyApLFxyXG5cdFx0XHRpbnRlcm5hbEhlYWRlcnMgPSBwYWdlLmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKSxcclxuXHRcdFx0ZXh0ZXJuYWxGb290ZXJzID0gcGFnZVBhcmVudC5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdmb290ZXInKVwiICkuZmlsdGVyKCBub1BhZGRlcnMgKSxcclxuXHRcdFx0aW50ZXJuYWxGb290ZXJzID0gcGFnZS5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdmb290ZXInKVwiICk7XHJcblxyXG5cdFx0Ly8gSWYgd2UgaGF2ZSBubyBpbnRlcm5hbCBoZWFkZXJzLCBidXQgd2UgZG8gaGF2ZSBleHRlcm5hbCBoZWFkZXJzLCB0aGVuIHRoZWlyIGhlaWdodFxyXG5cdFx0Ly8gcmVkdWNlcyB0aGUgcGFnZSBoZWlnaHRcclxuXHRcdGlmICggaW50ZXJuYWxIZWFkZXJzLmxlbmd0aCA9PT0gMCAmJiBleHRlcm5hbEhlYWRlcnMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0dG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQgPSB0b29sYmFyc0FmZmVjdGluZ0hlaWdodC5jb25jYXQoIGV4dGVybmFsSGVhZGVycy50b0FycmF5KCkgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB3ZSBoYXZlIG5vIGludGVybmFsIGZvb3RlcnMsIGJ1dCB3ZSBkbyBoYXZlIGV4dGVybmFsIGZvb3RlcnMsIHRoZW4gdGhlaXIgaGVpZ2h0XHJcblx0XHQvLyByZWR1Y2VzIHRoZSBwYWdlIGhlaWdodFxyXG5cdFx0aWYgKCBpbnRlcm5hbEZvb3RlcnMubGVuZ3RoID09PSAwICYmIGV4dGVybmFsRm9vdGVycy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHR0b29sYmFyc0FmZmVjdGluZ0hlaWdodCA9IHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0LmNvbmNhdCggZXh0ZXJuYWxGb290ZXJzLnRvQXJyYXkoKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZWFjaCggdG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XHJcblx0XHRcdGRlc2lyZWRIZWlnaHQgLT0gJCggdmFsdWUgKS5vdXRlckhlaWdodCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSGVpZ2h0IG11c3QgYmUgYXQgbGVhc3QgemVyb1xyXG5cdFx0cmV0dXJuIE1hdGgubWF4KCAwLCBkZXNpcmVkSGVpZ2h0ICk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblx0XHQvLyBkZWZpbmUgdGhlIHdpbmRvdyBhbmQgdGhlIGRvY3VtZW50IG9iamVjdHNcclxuXHRcdHdpbmRvdzogJCggd2luZG93ICksXHJcblx0XHRkb2N1bWVudDogJCggZG9jdW1lbnQgKSxcclxuXHJcblx0XHQvLyBUT0RPOiBSZW1vdmUgYW5kIHVzZSAkLnVpLmtleUNvZGUgZGlyZWN0bHlcclxuXHRcdGtleUNvZGU6ICQudWkua2V5Q29kZSxcclxuXHJcblx0XHQvLyBQbGFjZSB0byBzdG9yZSB2YXJpb3VzIHdpZGdldCBleHRlbnNpb25zXHJcblx0XHRiZWhhdmlvcnM6IHt9LFxyXG5cclxuXHRcdC8vIFNjcm9sbCBwYWdlIHZlcnRpY2FsbHk6IHNjcm9sbCB0byAwIHRvIGhpZGUgaU9TIGFkZHJlc3MgYmFyLCBvciBwYXNzIGEgWSB2YWx1ZVxyXG5cdFx0c2lsZW50U2Nyb2xsOiBmdW5jdGlvbiggeXBvcyApIHtcclxuXHRcdFx0aWYgKCAkLnR5cGUoIHlwb3MgKSAhPT0gXCJudW1iZXJcIiApIHtcclxuXHRcdFx0XHR5cG9zID0gJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHByZXZlbnQgc2Nyb2xsc3RhcnQgYW5kIHNjcm9sbHN0b3AgZXZlbnRzXHJcblx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgeXBvcyApO1xyXG5cdFx0XHRcdCQubW9iaWxlLmRvY3VtZW50LnRyaWdnZXIoIFwic2lsZW50c2Nyb2xsXCIsIHsgeDogMCwgeTogeXBvcyB9KTtcclxuXHRcdFx0fSwgMjAgKTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9LCAxNTAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0Q2xvc2VzdEJhc2VVcmw6IGZ1bmN0aW9uKCBlbGUgKVx0e1xyXG5cdFx0XHQvLyBGaW5kIHRoZSBjbG9zZXN0IHBhZ2UgYW5kIGV4dHJhY3Qgb3V0IGl0cyB1cmwuXHJcblx0XHRcdHZhciB1cmwgPSAkKCBlbGUgKS5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5qcW1EYXRhKCBcInVybFwiICksXHJcblx0XHRcdFx0YmFzZSA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcblxyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5keW5hbWljQmFzZUVuYWJsZWQgfHwgIXVybCB8fCAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIHVybCApICkge1xyXG5cdFx0XHRcdHVybCA9IGJhc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdXJsLCBiYXNlICk7XHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlQWN0aXZlTGlua0NsYXNzOiBmdW5jdGlvbiggZm9yY2VSZW1vdmFsICkge1xyXG5cdFx0XHRpZiAoICEhJC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgJiZcclxuXHRcdFx0XHQoICEkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluay5jbG9zZXN0KCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApLmxlbmd0aCB8fFxyXG5cdFx0XHRcdFx0Zm9yY2VSZW1vdmFsICkgKSB7XHJcblxyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rID0gbnVsbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gREVQUkVDQVRFRCBpbiAxLjRcclxuXHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgcGFyZW50IHdpdGggYSB0aGVtZSBjbGFzcyBvbiBpdC4gTm90ZSB0aGF0XHJcblx0XHQvLyB3ZSBhcmUgbm90IHVzaW5nICQuZm4uY2xvc2VzdCgpIG9uIHB1cnBvc2UgaGVyZSBiZWNhdXNlIHRoaXNcclxuXHRcdC8vIG1ldGhvZCBnZXRzIGNhbGxlZCBxdWl0ZSBhIGJpdCBhbmQgd2UgbmVlZCBpdCB0byBiZSBhcyBmYXN0XHJcblx0XHQvLyBhcyBwb3NzaWJsZS5cclxuXHRcdGdldEluaGVyaXRlZFRoZW1lOiBmdW5jdGlvbiggZWwsIGRlZmF1bHRUaGVtZSApIHtcclxuXHRcdFx0dmFyIGUgPSBlbFsgMCBdLFxyXG5cdFx0XHRcdGx0ciA9IFwiXCIsXHJcblx0XHRcdFx0cmUgPSAvdWktKGJhcnxib2R5fG92ZXJsYXkpLShbYS16XSlcXGIvLFxyXG5cdFx0XHRcdGMsIG07XHJcblx0XHRcdHdoaWxlICggZSApIHtcclxuXHRcdFx0XHRjID0gZS5jbGFzc05hbWUgfHwgXCJcIjtcclxuXHRcdFx0XHRpZiAoIGMgJiYgKCBtID0gcmUuZXhlYyggYyApICkgJiYgKCBsdHIgPSBtWyAyIF0gKSApIHtcclxuXHRcdFx0XHRcdC8vIFdlIGZvdW5kIGEgcGFyZW50IHdpdGggYSB0aGVtZSBjbGFzc1xyXG5cdFx0XHRcdFx0Ly8gb24gaXQgc28gYmFpbCBmcm9tIHRoaXMgbG9vcC5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZSA9IGUucGFyZW50Tm9kZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBSZXR1cm4gdGhlIHRoZW1lIGxldHRlciB3ZSBmb3VuZCwgaWYgbm9uZSwgcmV0dXJuIHRoZVxyXG5cdFx0XHQvLyBzcGVjaWZpZWQgZGVmYXVsdC5cclxuXHRcdFx0cmV0dXJuIGx0ciB8fCBkZWZhdWx0VGhlbWUgfHwgXCJhXCI7XHJcblx0XHR9LFxyXG5cclxuXHRcdGVuaGFuY2VhYmxlOiBmdW5jdGlvbiggZWxlbWVudHMgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmhhdmVQYXJlbnRzKCBlbGVtZW50cywgXCJlbmhhbmNlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlqYWNrYWJsZTogZnVuY3Rpb24oIGVsZW1lbnRzICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyggZWxlbWVudHMsIFwiYWpheFwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhdmVQYXJlbnRzOiBmdW5jdGlvbiggZWxlbWVudHMsIGF0dHIgKSB7XHJcblx0XHRcdGlmICggISQubW9iaWxlLmlnbm9yZUNvbnRlbnRFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybiBlbGVtZW50cztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoLFxyXG5cdFx0XHRcdCRuZXdTZXQgPSAkKCksXHJcblx0XHRcdFx0ZSwgJGVsZW1lbnQsIGV4Y2x1ZGVkLFxyXG5cdFx0XHRcdGksIGM7XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGNvdW50OyBpKysgKSB7XHJcblx0XHRcdFx0JGVsZW1lbnQgPSBlbGVtZW50cy5lcSggaSApO1xyXG5cdFx0XHRcdGV4Y2x1ZGVkID0gZmFsc2U7XHJcblx0XHRcdFx0ZSA9IGVsZW1lbnRzWyBpIF07XHJcblxyXG5cdFx0XHRcdHdoaWxlICggZSApIHtcclxuXHRcdFx0XHRcdGMgPSBlLmdldEF0dHJpYnV0ZSA/IGUuZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIGF0dHIgKSA6IFwiXCI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBjID09PSBcImZhbHNlXCIgKSB7XHJcblx0XHRcdFx0XHRcdGV4Y2x1ZGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0ZSA9IGUucGFyZW50Tm9kZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggIWV4Y2x1ZGVkICkge1xyXG5cdFx0XHRcdFx0JG5ld1NldCA9ICRuZXdTZXQuYWRkKCAkZWxlbWVudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuICRuZXdTZXQ7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldFNjcmVlbkhlaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIE5hdGl2ZSBpbm5lckhlaWdodCByZXR1cm5zIG1vcmUgYWNjdXJhdGUgdmFsdWUgZm9yIHRoaXMgYWNyb3NzIHBsYXRmb3JtcyxcclxuXHRcdFx0Ly8galF1ZXJ5IHZlcnNpb24gaXMgaGVyZSBhcyBhIG5vcm1hbGl6ZWQgZmFsbGJhY2sgZm9yIHBsYXRmb3JtcyBsaWtlIFN5bWJpYW5cclxuXHRcdFx0cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCB8fCAkLm1vYmlsZS53aW5kb3cuaGVpZ2h0KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vc2ltcGx5IHNldCB0aGUgYWN0aXZlIHBhZ2UncyBtaW5pbXVtIGhlaWdodCB0byBzY3JlZW4gaGVpZ2h0LCBkZXBlbmRpbmcgb24gb3JpZW50YXRpb25cclxuXHRcdHJlc2V0QWN0aXZlUGFnZUhlaWdodDogZnVuY3Rpb24oIGhlaWdodCApIHtcclxuXHRcdFx0dmFyIHBhZ2UgPSAkKCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApLFxyXG5cdFx0XHRcdHBhZ2VIZWlnaHQgPSBwYWdlLmhlaWdodCgpLFxyXG5cdFx0XHRcdHBhZ2VPdXRlckhlaWdodCA9IHBhZ2Uub3V0ZXJIZWlnaHQoIHRydWUgKTtcclxuXHJcblx0XHRcdGhlaWdodCA9IGNvbXBlbnNhdGVUb29sYmFycyggcGFnZSxcclxuXHRcdFx0XHQoIHR5cGVvZiBoZWlnaHQgPT09IFwibnVtYmVyXCIgKSA/IGhlaWdodCA6ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpICk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYW55IHByZXZpb3VzIG1pbi1oZWlnaHQgc2V0dGluZ1xyXG5cdFx0XHRwYWdlLmNzcyggXCJtaW4taGVpZ2h0XCIsIFwiXCIgKTtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgbWluaW11bSBoZWlnaHQgb25seSBpZiB0aGUgaGVpZ2h0IGFzIGRldGVybWluZWQgYnkgQ1NTIGlzIGluc3VmZmljaWVudFxyXG5cdFx0XHRpZiAoIHBhZ2UuaGVpZ2h0KCkgPCBoZWlnaHQgKSB7XHJcblx0XHRcdFx0cGFnZS5jc3MoIFwibWluLWhlaWdodFwiLCBoZWlnaHQgLSAoIHBhZ2VPdXRlckhlaWdodCAtIHBhZ2VIZWlnaHQgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsIHRvIHRoaXMgZnVuY3Rpb24sIGluc3RhbnRpYXRlIGEgbG9hZGVyIHdpZGdldFxyXG5cdFx0XHR2YXIgbG9hZGVyID0gdGhpcy5sb2FkaW5nLl93aWRnZXQgfHwgJCggJC5tb2JpbGUubG9hZGVyLnByb3RvdHlwZS5kZWZhdWx0SHRtbCApLmxvYWRlcigpLFxyXG5cclxuXHRcdFx0XHQvLyBDYWxsIHRoZSBhcHByb3ByaWF0ZSBtZXRob2Qgb24gdGhlIGxvYWRlclxyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gbG9hZGVyLmxvYWRlci5hcHBseSggbG9hZGVyLCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgbG9hZGVyIGlzIHJldGFpbmVkIGZvciBmdXR1cmUgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbi5cclxuXHRcdFx0dGhpcy5sb2FkaW5nLl93aWRnZXQgPSBsb2FkZXI7XHJcblxyXG5cdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQuYWRkRGVwZW5kZW50cyA9IGZ1bmN0aW9uKCBlbGVtLCBuZXdEZXBlbmRlbnRzICkge1xyXG5cdFx0dmFyICRlbGVtID0gJCggZWxlbSApLFxyXG5cdFx0XHRkZXBlbmRlbnRzID0gJGVsZW0uanFtRGF0YSggXCJkZXBlbmRlbnRzXCIgKSB8fCAkKCk7XHJcblxyXG5cdFx0JGVsZW0uanFtRGF0YSggXCJkZXBlbmRlbnRzXCIsICQoIGRlcGVuZGVudHMgKS5hZGQoIG5ld0RlcGVuZGVudHMgKSApO1xyXG5cdH07XHJcblxyXG5cdC8vIHBsdWdpbnNcclxuXHQkLmZuLmV4dGVuZCh7XHJcblx0XHRyZW1vdmVXaXRoRGVwZW5kZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQucmVtb3ZlV2l0aERlcGVuZGVudHMoIHRoaXMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRW5oYW5jZSBjaGlsZCBlbGVtZW50c1xyXG5cdFx0ZW5oYW5jZVdpdGhpbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBpbmRleCxcclxuXHRcdFx0XHR3aWRnZXRFbGVtZW50cyA9IHt9LFxyXG5cdFx0XHRcdGtlZXBOYXRpdmUgPSAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IoKSxcclxuXHRcdFx0XHR0aGF0ID0gdGhpcztcclxuXHJcblx0XHRcdC8vIEFkZCBubyBqcyBjbGFzcyB0byBlbGVtZW50c1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLm5vanMgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUubm9qcyggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBCaW5kIGxpbmtzIGZvciBhamF4IG5hdlxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmxpbmtzICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmxpbmtzKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERlZ3JhZGUgaW5wdXRzIGZvciBzdHlsZWluZ1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLmRlZ3JhZGVJbnB1dHNXaXRoaW4gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuZGVncmFkZUlucHV0c1dpdGhpbiggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSdW4gYnV0dG9ubWFya3VwXHJcblx0XHRcdGlmICggJC5mbi5idXR0b25NYXJrdXAgKSB7XHJcblx0XHRcdFx0dGhpcy5maW5kKCAkLmZuLmJ1dHRvbk1hcmt1cC5pbml0U2VsZWN0b3IgKS5ub3QoIGtlZXBOYXRpdmUgKVxyXG5cdFx0XHRcdC5qcW1FbmhhbmNlYWJsZSgpLmJ1dHRvbk1hcmt1cCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBZGQgY2xhc3NlcyBmb3IgZmllbGRDb250YWluXHJcblx0XHRcdGlmICggJC5mbi5maWVsZGNvbnRhaW4gKSB7XHJcblx0XHRcdFx0dGhpcy5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J2ZpZWxkY29udGFpbicpXCIgKS5ub3QoIGtlZXBOYXRpdmUgKVxyXG5cdFx0XHRcdC5qcW1FbmhhbmNlYWJsZSgpLmZpZWxkY29udGFpbigpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBFbmhhbmNlIHdpZGdldHNcclxuXHRcdFx0JC5lYWNoKCAkLm1vYmlsZS53aWRnZXRzLCBmdW5jdGlvbiggbmFtZSwgY29uc3RydWN0b3IgKSB7XHJcblxyXG5cdFx0XHRcdC8vIElmIGluaXRTZWxlY3RvciBub3QgZmFsc2UgZmluZCBlbGVtZW50c1xyXG5cdFx0XHRcdGlmICggY29uc3RydWN0b3IuaW5pdFNlbGVjdG9yICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIEZpbHRlciBlbGVtZW50cyB0aGF0IHNob3VsZCBub3QgYmUgZW5oYW5jZWQgYmFzZWQgb24gcGFyZW50c1xyXG5cdFx0XHRcdFx0dmFyIGVsZW1lbnRzID0gJC5tb2JpbGUuZW5oYW5jZWFibGUoIHRoYXQuZmluZCggY29uc3RydWN0b3IuaW5pdFNlbGVjdG9yICkgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBJZiBhbnkgbWF0Y2hpbmcgZWxlbWVudHMgcmVtYWluIGZpbHRlciBvbmVzIHdpdGgga2VlcE5hdGl2ZVNlbGVjdG9yXHJcblx0XHRcdFx0XHRpZiAoIGVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IgaXMgZGVwcmVjYXRlZCB0aGlzIGlzIGp1c3QgZm9yIGJhY2tjb21wYXRcclxuXHRcdFx0XHRcdFx0Ly8gU3dpdGNoIHRvICQubW9iaWxlLmtlZXBOYXRpdmUgaW4gMS41IHdoaWNoIGlzIGp1c3QgYSB2YWx1ZSBub3QgYSBmdW5jdGlvblxyXG5cdFx0XHRcdFx0XHRlbGVtZW50cyA9IGVsZW1lbnRzLm5vdCgga2VlcE5hdGl2ZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEVuaGFuY2Ugd2hhdGV2ZXIgaXMgbGVmdFxyXG5cdFx0XHRcdFx0aWYgKCBlbGVtZW50cy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRcdFx0XHR3aWRnZXRFbGVtZW50c1sgY29uc3RydWN0b3IucHJvdG90eXBlLndpZGdldE5hbWUgXSA9IGVsZW1lbnRzO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB3aWRnZXRFbGVtZW50cyApIHtcclxuXHRcdFx0XHR3aWRnZXRFbGVtZW50c1sgaW5kZXggXVsgaW5kZXggXSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkRGVwZW5kZW50czogZnVuY3Rpb24oIG5ld0RlcGVuZGVudHMgKSB7XHJcblx0XHRcdCQuYWRkRGVwZW5kZW50cyggdGhpcywgbmV3RGVwZW5kZW50cyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBub3RlIHRoYXQgdGhpcyBoZWxwZXIgZG9lc24ndCBhdHRlbXB0IHRvIGhhbmRsZSB0aGUgY2FsbGJhY2tcclxuXHRcdC8vIG9yIHNldHRpbmcgb2YgYW4gaHRtbCBlbGVtZW50J3MgdGV4dCwgaXRzIG9ubHkgcHVycG9zZSBpc1xyXG5cdFx0Ly8gdG8gcmV0dXJuIHRoZSBodG1sIGVuY29kZWQgdmVyc2lvbiBvZiB0aGUgdGV4dCBpbiBhbGwgY2FzZXMuICh0aHVzIHRoZSBuYW1lKVxyXG5cdFx0Z2V0RW5jb2RlZFRleHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJCggXCI8YT5cIiApLnRleHQoIHRoaXMudGV4dCgpICkuaHRtbCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBmbHVlbnQgaGVscGVyIGZ1bmN0aW9uIGZvciB0aGUgbW9iaWxlIG5hbWVzcGFjZWQgZXF1aXZhbGVudFxyXG5cdFx0anFtRW5oYW5jZWFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZW5oYW5jZWFibGUoIHRoaXMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0anFtSGlqYWNrYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5oaWphY2thYmxlKCB0aGlzICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQucmVtb3ZlV2l0aERlcGVuZGVudHMgPSBmdW5jdGlvbiggbmF0aXZlRWxlbWVudCApIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCggbmF0aXZlRWxlbWVudCApO1xyXG5cclxuXHRcdCggZWxlbWVudC5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiApIHx8ICQoKSApLnJlbW92ZSgpO1xyXG5cdFx0ZWxlbWVudC5yZW1vdmUoKTtcclxuXHR9O1xyXG5cdCQuYWRkRGVwZW5kZW50cyA9IGZ1bmN0aW9uKCBuYXRpdmVFbGVtZW50LCBuZXdEZXBlbmRlbnRzICkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKCBuYXRpdmVFbGVtZW50ICksXHJcblx0XHRcdGRlcGVuZGVudHMgPSBlbGVtZW50LmpxbURhdGEoIFwiZGVwZW5kZW50c1wiICkgfHwgJCgpO1xyXG5cclxuXHRcdGVsZW1lbnQuanFtRGF0YSggXCJkZXBlbmRlbnRzXCIsICQoIGRlcGVuZGVudHMgKS5hZGQoIG5ld0RlcGVuZGVudHMgKSApO1xyXG5cdH07XHJcblxyXG5cdCQuZmluZC5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIHNldCApIHtcclxuXHRcdHJldHVybiAkLmZpbmQoIGV4cHIsIG51bGwsIG51bGwsIHNldCApO1xyXG5cdH07XHJcblxyXG5cdCQuZmluZC5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggbm9kZSwgZXhwciApIHtcclxuXHRcdHJldHVybiAkLmZpbmQoIGV4cHIsIG51bGwsIG51bGwsIFsgbm9kZSBdICkubGVuZ3RoID4gMDtcclxuXHR9O1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHJcblx0XHQvLyBWZXJzaW9uIG9mIHRoZSBqUXVlcnkgTW9iaWxlIEZyYW1ld29ya1xyXG5cdFx0dmVyc2lvbjogXCIxLjQuNVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBEZWZpbmUgdGhlIHVybCBwYXJhbWV0ZXIgdXNlZCBmb3IgcmVmZXJlbmNpbmcgd2lkZ2V0LWdlbmVyYXRlZCBzdWItcGFnZXMuXHJcblx0XHQvLyBUcmFuc2xhdGVzIHRvIGV4YW1wbGUuaHRtbCZ1aS1wYWdlPXN1YnBhZ2VJZGVudGlmaWVyXHJcblx0XHQvLyBoYXNoIHNlZ21lbnQgYmVmb3JlICZ1aS1wYWdlPSBpcyB1c2VkIHRvIG1ha2UgQWpheCByZXF1ZXN0XHJcblx0XHRzdWJQYWdlVXJsS2V5OiBcInVpLXBhZ2VcIixcclxuXHJcblx0XHRoaWRlVXJsQmFyOiB0cnVlLFxyXG5cclxuXHRcdC8vIEtlZXBuYXRpdmUgU2VsZWN0b3JcclxuXHRcdGtlZXBOYXRpdmU6IFwiOmpxbURhdGEocm9sZT0nbm9uZScpLCA6anFtRGF0YShyb2xlPSdub2pzJylcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBDbGFzcyBhc3NpZ25lZCB0byBwYWdlIGN1cnJlbnRseSBpbiB2aWV3LCBhbmQgZHVyaW5nIHRyYW5zaXRpb25zXHJcblx0XHRhY3RpdmVQYWdlQ2xhc3M6IFwidWktcGFnZS1hY3RpdmVcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBDbGFzcyB1c2VkIGZvciBcImFjdGl2ZVwiIGJ1dHRvbiBzdGF0ZSwgZnJvbSBDU1MgZnJhbWV3b3JrXHJcblx0XHRhY3RpdmVCdG5DbGFzczogXCJ1aS1idG4tYWN0aXZlXCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gQ2xhc3MgdXNlZCBmb3IgXCJmb2N1c1wiIGZvcm0gZWxlbWVudCBzdGF0ZSwgZnJvbSBDU1MgZnJhbWV3b3JrXHJcblx0XHRmb2N1c0NsYXNzOiBcInVpLWZvY3VzXCIsXHJcblxyXG5cdFx0Ly8gQXV0b21hdGljYWxseSBoYW5kbGUgY2xpY2tzIGFuZCBmb3JtIHN1Ym1pc3Npb25zIHRocm91Z2ggQWpheCwgd2hlbiBzYW1lLWRvbWFpblxyXG5cdFx0YWpheEVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gQXV0b21hdGljYWxseSBsb2FkIGFuZCBzaG93IHBhZ2VzIGJhc2VkIG9uIGxvY2F0aW9uLmhhc2hcclxuXHRcdGhhc2hMaXN0ZW5pbmdFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIGRpc2FibGUgdG8gcHJldmVudCBqcXVlcnkgZnJvbSBib3RoZXJpbmcgd2l0aCBsaW5rc1xyXG5cdFx0bGlua0JpbmRpbmdFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIFNldCBkZWZhdWx0IHBhZ2UgdHJhbnNpdGlvbiAtICdub25lJyBmb3Igbm8gdHJhbnNpdGlvbnNcclxuXHRcdGRlZmF1bHRQYWdlVHJhbnNpdGlvbjogXCJmYWRlXCIsXHJcblxyXG5cdFx0Ly8gU2V0IG1heGltdW0gd2luZG93IHdpZHRoIGZvciB0cmFuc2l0aW9ucyB0byBhcHBseSAtICdmYWxzZScgZm9yIG5vIGxpbWl0XHJcblx0XHRtYXhUcmFuc2l0aW9uV2lkdGg6IGZhbHNlLFxyXG5cclxuXHRcdC8vIE1pbmltdW0gc2Nyb2xsIGRpc3RhbmNlIHRoYXQgd2lsbCBiZSByZW1lbWJlcmVkIHdoZW4gcmV0dXJuaW5nIHRvIGEgcGFnZVxyXG5cdFx0Ly8gRGVwcmVjYXRlZCByZW1vdmUgaW4gMS41XHJcblx0XHRtaW5TY3JvbGxCYWNrOiAwLFxyXG5cclxuXHRcdC8vIFNldCBkZWZhdWx0IGRpYWxvZyB0cmFuc2l0aW9uIC0gJ25vbmUnIGZvciBubyB0cmFuc2l0aW9uc1xyXG5cdFx0ZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246IFwicG9wXCIsXHJcblxyXG5cdFx0Ly8gRXJyb3IgcmVzcG9uc2UgbWVzc2FnZSAtIGFwcGVhcnMgd2hlbiBhbiBBamF4IHBhZ2UgcmVxdWVzdCBmYWlsc1xyXG5cdFx0cGFnZUxvYWRFcnJvck1lc3NhZ2U6IFwiRXJyb3IgTG9hZGluZyBQYWdlXCIsXHJcblxyXG5cdFx0Ly8gRm9yIGVycm9yIG1lc3NhZ2VzLCB3aGljaCB0aGVtZSBkb2VzIHRoZSBib3ggdXNlP1xyXG5cdFx0cGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZTogXCJhXCIsXHJcblxyXG5cdFx0Ly8gcmVwbGFjZSBjYWxscyB0byB3aW5kb3cuaGlzdG9yeS5iYWNrIHdpdGggcGhvbmVnYXBzIG5hdmlnYXRpb24gaGVscGVyXHJcblx0XHQvLyB3aGVyZSBpdCBpcyBwcm92aWRlZCBvbiB0aGUgd2luZG93IG9iamVjdFxyXG5cdFx0cGhvbmVnYXBOYXZpZ2F0aW9uRW5hYmxlZDogZmFsc2UsXHJcblxyXG5cdFx0Ly9hdXRvbWF0aWNhbGx5IGluaXRpYWxpemUgdGhlIERPTSB3aGVuIGl0J3MgcmVhZHlcclxuXHRcdGF1dG9Jbml0aWFsaXplUGFnZTogdHJ1ZSxcclxuXHJcblx0XHRwdXNoU3RhdGVFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIGFsbG93cyB1c2VycyB0byBvcHQgaW4gdG8gaWdub3JpbmcgY29udGVudCBieSBtYXJraW5nIGEgcGFyZW50IGVsZW1lbnQgYXNcclxuXHRcdC8vIGRhdGEtaWdub3JlZFxyXG5cdFx0aWdub3JlQ29udGVudEVuYWJsZWQ6IGZhbHNlLFxyXG5cclxuXHRcdGJ1dHRvbk1hcmt1cDoge1xyXG5cdFx0XHRob3ZlckRlbGF5OiAyMDBcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gZGlzYWJsZSB0aGUgYWx0ZXJhdGlvbiBvZiB0aGUgZHluYW1pYyBiYXNlIHRhZyBvciBsaW5rcyBpbiB0aGUgY2FzZVxyXG5cdFx0Ly8gdGhhdCBhIGR5bmFtaWMgYmFzZSB0YWcgaXNuJ3Qgc3VwcG9ydGVkXHJcblx0XHRkeW5hbWljQmFzZUVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gZGVmYXVsdCB0aGUgcHJvcGVydHkgdG8gcmVtb3ZlIGRlcGVuZGVuY3kgb24gYXNzaWdubWVudCBpbiBpbml0IG1vZHVsZVxyXG5cdFx0cGFnZUNvbnRhaW5lcjogJCgpLFxyXG5cclxuXHRcdC8vZW5hYmxlIGNyb3NzLWRvbWFpbiBwYWdlIHN1cHBvcnRcclxuXHRcdGFsbG93Q3Jvc3NEb21haW5QYWdlczogZmFsc2UsXHJcblxyXG5cdFx0ZGlhbG9nSGFzaEtleTogXCImdWktc3RhdGU9ZGlhbG9nXCJcclxuXHR9KTtcclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBVSSBXaWRnZXQgYzBhYjcxMDU2YjkzNjYyN2U4YTc4MjFmMDNjMDQ0YWVjNjI4MGE0MFxyXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqXHJcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2pRdWVyeS53aWRnZXQvXHJcbiAqL1xyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1dWlkID0gMCxcclxuXHRzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZSxcclxuXHRfY2xlYW5EYXRhID0gJC5jbGVhbkRhdGE7XHJcbiQuY2xlYW5EYXRhID0gZnVuY3Rpb24oIGVsZW1zICkge1xyXG5cdGZvciAoIHZhciBpID0gMCwgZWxlbTsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0JCggZWxlbSApLnRyaWdnZXJIYW5kbGVyKCBcInJlbW92ZVwiICk7XHJcblx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC84MjM1XHJcblx0XHR9IGNhdGNoKCBlICkge31cclxuXHR9XHJcblx0X2NsZWFuRGF0YSggZWxlbXMgKTtcclxufTtcclxuXHJcbiQud2lkZ2V0ID0gZnVuY3Rpb24oIG5hbWUsIGJhc2UsIHByb3RvdHlwZSApIHtcclxuXHR2YXIgZnVsbE5hbWUsIGV4aXN0aW5nQ29uc3RydWN0b3IsIGNvbnN0cnVjdG9yLCBiYXNlUHJvdG90eXBlLFxyXG5cdFx0Ly8gcHJveGllZFByb3RvdHlwZSBhbGxvd3MgdGhlIHByb3ZpZGVkIHByb3RvdHlwZSB0byByZW1haW4gdW5tb2RpZmllZFxyXG5cdFx0Ly8gc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBhcyBhIG1peGluIGZvciBtdWx0aXBsZSB3aWRnZXRzICgjODg3NilcclxuXHRcdHByb3hpZWRQcm90b3R5cGUgPSB7fSxcclxuXHRcdG5hbWVzcGFjZSA9IG5hbWUuc3BsaXQoIFwiLlwiIClbIDAgXTtcclxuXHJcblx0bmFtZSA9IG5hbWUuc3BsaXQoIFwiLlwiIClbIDEgXTtcclxuXHRmdWxsTmFtZSA9IG5hbWVzcGFjZSArIFwiLVwiICsgbmFtZTtcclxuXHJcblx0aWYgKCAhcHJvdG90eXBlICkge1xyXG5cdFx0cHJvdG90eXBlID0gYmFzZTtcclxuXHRcdGJhc2UgPSAkLldpZGdldDtcclxuXHR9XHJcblxyXG5cdC8vIGNyZWF0ZSBzZWxlY3RvciBmb3IgcGx1Z2luXHJcblx0JC5leHByWyBcIjpcIiBdWyBmdWxsTmFtZS50b0xvd2VyQ2FzZSgpIF0gPSBmdW5jdGlvbiggZWxlbSApIHtcclxuXHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgZnVsbE5hbWUgKTtcclxuXHR9O1xyXG5cclxuXHQkWyBuYW1lc3BhY2UgXSA9ICRbIG5hbWVzcGFjZSBdIHx8IHt9O1xyXG5cdGV4aXN0aW5nQ29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdO1xyXG5cdGNvbnN0cnVjdG9yID0gJFsgbmFtZXNwYWNlIF1bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zLCBlbGVtZW50ICkge1xyXG5cdFx0Ly8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IFwibmV3XCIga2V5d29yZFxyXG5cdFx0aWYgKCAhdGhpcy5fY3JlYXRlV2lkZ2V0ICkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IGNvbnN0cnVjdG9yKCBvcHRpb25zLCBlbGVtZW50ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IGluaXRpYWxpemluZyBmb3Igc2ltcGxlIGluaGVyaXRhbmNlXHJcblx0XHQvLyBtdXN0IHVzZSBcIm5ld1wiIGtleXdvcmQgKHRoZSBjb2RlIGFib3ZlIGFsd2F5cyBwYXNzZXMgYXJncylcclxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5fY3JlYXRlV2lkZ2V0KCBvcHRpb25zLCBlbGVtZW50ICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHQvLyBleHRlbmQgd2l0aCB0aGUgZXhpc3RpbmcgY29uc3RydWN0b3IgdG8gY2Fycnkgb3ZlciBhbnkgc3RhdGljIHByb3BlcnRpZXNcclxuXHQkLmV4dGVuZCggY29uc3RydWN0b3IsIGV4aXN0aW5nQ29uc3RydWN0b3IsIHtcclxuXHRcdHZlcnNpb246IHByb3RvdHlwZS52ZXJzaW9uLFxyXG5cdFx0Ly8gY29weSB0aGUgb2JqZWN0IHVzZWQgdG8gY3JlYXRlIHRoZSBwcm90b3R5cGUgaW4gY2FzZSB3ZSBuZWVkIHRvXHJcblx0XHQvLyByZWRlZmluZSB0aGUgd2lkZ2V0IGxhdGVyXHJcblx0XHRfcHJvdG86ICQuZXh0ZW5kKCB7fSwgcHJvdG90eXBlICksXHJcblx0XHQvLyB0cmFjayB3aWRnZXRzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgd2lkZ2V0IGluIGNhc2UgdGhpcyB3aWRnZXQgaXNcclxuXHRcdC8vIHJlZGVmaW5lZCBhZnRlciBhIHdpZGdldCBpbmhlcml0cyBmcm9tIGl0XHJcblx0XHRfY2hpbGRDb25zdHJ1Y3RvcnM6IFtdXHJcblx0fSk7XHJcblxyXG5cdGJhc2VQcm90b3R5cGUgPSBuZXcgYmFzZSgpO1xyXG5cdC8vIHdlIG5lZWQgdG8gbWFrZSB0aGUgb3B0aW9ucyBoYXNoIGEgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlIG5ldyBpbnN0YW5jZVxyXG5cdC8vIG90aGVyd2lzZSB3ZSdsbCBtb2RpZnkgdGhlIG9wdGlvbnMgaGFzaCBvbiB0aGUgcHJvdG90eXBlIHRoYXQgd2UncmVcclxuXHQvLyBpbmhlcml0aW5nIGZyb21cclxuXHRiYXNlUHJvdG90eXBlLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LCBiYXNlUHJvdG90eXBlLm9wdGlvbnMgKTtcclxuXHQkLmVhY2goIHByb3RvdHlwZSwgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xyXG5cdFx0aWYgKCAhJC5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xyXG5cdFx0XHRwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSB2YWx1ZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0cHJveGllZFByb3RvdHlwZVsgcHJvcCBdID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgX3N1cGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRfc3VwZXJBcHBseSA9IGZ1bmN0aW9uKCBhcmdzICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJhc2UucHJvdG90eXBlWyBwcm9wIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIF9fc3VwZXIgPSB0aGlzLl9zdXBlcixcclxuXHRcdFx0XHRcdF9fc3VwZXJBcHBseSA9IHRoaXMuX3N1cGVyQXBwbHksXHJcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZTtcclxuXHJcblx0XHRcdFx0dGhpcy5fc3VwZXIgPSBfc3VwZXI7XHJcblx0XHRcdFx0dGhpcy5fc3VwZXJBcHBseSA9IF9zdXBlckFwcGx5O1xyXG5cclxuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IHZhbHVlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fc3VwZXIgPSBfX3N1cGVyO1xyXG5cdFx0XHRcdHRoaXMuX3N1cGVyQXBwbHkgPSBfX3N1cGVyQXBwbHk7XHJcblxyXG5cdFx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHRcdFx0fTtcclxuXHRcdH0pKCk7XHJcblx0fSk7XHJcblx0Y29uc3RydWN0b3IucHJvdG90eXBlID0gJC53aWRnZXQuZXh0ZW5kKCBiYXNlUHJvdG90eXBlLCB7XHJcblx0XHQvLyBUT0RPOiByZW1vdmUgc3VwcG9ydCBmb3Igd2lkZ2V0RXZlbnRQcmVmaXhcclxuXHRcdC8vIGFsd2F5cyB1c2UgdGhlIG5hbWUgKyBhIGNvbG9uIGFzIHRoZSBwcmVmaXgsIGUuZy4sIGRyYWdnYWJsZTpzdGFydFxyXG5cdFx0Ly8gZG9uJ3QgcHJlZml4IGZvciB3aWRnZXRzIHRoYXQgYXJlbid0IERPTS1iYXNlZFxyXG5cdFx0d2lkZ2V0RXZlbnRQcmVmaXg6IGV4aXN0aW5nQ29uc3RydWN0b3IgPyAoYmFzZVByb3RvdHlwZS53aWRnZXRFdmVudFByZWZpeCB8fCBuYW1lKSA6IG5hbWVcclxuXHR9LCBwcm94aWVkUHJvdG90eXBlLCB7XHJcblx0XHRjb25zdHJ1Y3RvcjogY29uc3RydWN0b3IsXHJcblx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZSxcclxuXHRcdHdpZGdldE5hbWU6IG5hbWUsXHJcblx0XHR3aWRnZXRGdWxsTmFtZTogZnVsbE5hbWVcclxuXHR9KTtcclxuXHJcblx0Ly8gSWYgdGhpcyB3aWRnZXQgaXMgYmVpbmcgcmVkZWZpbmVkIHRoZW4gd2UgbmVlZCB0byBmaW5kIGFsbCB3aWRnZXRzIHRoYXRcclxuXHQvLyBhcmUgaW5oZXJpdGluZyBmcm9tIGl0IGFuZCByZWRlZmluZSBhbGwgb2YgdGhlbSBzbyB0aGF0IHRoZXkgaW5oZXJpdCBmcm9tXHJcblx0Ly8gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoaXMgd2lkZ2V0LiBXZSdyZSBlc3NlbnRpYWxseSB0cnlpbmcgdG8gcmVwbGFjZSBvbmVcclxuXHQvLyBsZXZlbCBpbiB0aGUgcHJvdG90eXBlIGNoYWluLlxyXG5cdGlmICggZXhpc3RpbmdDb25zdHJ1Y3RvciApIHtcclxuXHRcdCQuZWFjaCggZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnMsIGZ1bmN0aW9uKCBpLCBjaGlsZCApIHtcclxuXHRcdFx0dmFyIGNoaWxkUHJvdG90eXBlID0gY2hpbGQucHJvdG90eXBlO1xyXG5cclxuXHRcdFx0Ly8gcmVkZWZpbmUgdGhlIGNoaWxkIHdpZGdldCB1c2luZyB0aGUgc2FtZSBwcm90b3R5cGUgdGhhdCB3YXNcclxuXHRcdFx0Ly8gb3JpZ2luYWxseSB1c2VkLCBidXQgaW5oZXJpdCBmcm9tIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGUgYmFzZVxyXG5cdFx0XHQkLndpZGdldCggY2hpbGRQcm90b3R5cGUubmFtZXNwYWNlICsgXCIuXCIgKyBjaGlsZFByb3RvdHlwZS53aWRnZXROYW1lLCBjb25zdHJ1Y3RvciwgY2hpbGQuX3Byb3RvICk7XHJcblx0XHR9KTtcclxuXHRcdC8vIHJlbW92ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjaGlsZCBjb25zdHJ1Y3RvcnMgZnJvbSB0aGUgb2xkIGNvbnN0cnVjdG9yXHJcblx0XHQvLyBzbyB0aGUgb2xkIGNoaWxkIGNvbnN0cnVjdG9ycyBjYW4gYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcclxuXHRcdGRlbGV0ZSBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9ycztcclxuXHR9IGVsc2Uge1xyXG5cdFx0YmFzZS5fY2hpbGRDb25zdHJ1Y3RvcnMucHVzaCggY29uc3RydWN0b3IgKTtcclxuXHR9XHJcblxyXG5cdCQud2lkZ2V0LmJyaWRnZSggbmFtZSwgY29uc3RydWN0b3IgKTtcclxuXHJcblx0cmV0dXJuIGNvbnN0cnVjdG9yO1xyXG59O1xyXG5cclxuJC53aWRnZXQuZXh0ZW5kID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHR2YXIgaW5wdXQgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSxcclxuXHRcdGlucHV0SW5kZXggPSAwLFxyXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXHJcblx0XHRrZXksXHJcblx0XHR2YWx1ZTtcclxuXHRmb3IgKCA7IGlucHV0SW5kZXggPCBpbnB1dExlbmd0aDsgaW5wdXRJbmRleCsrICkge1xyXG5cdFx0Zm9yICgga2V5IGluIGlucHV0WyBpbnB1dEluZGV4IF0gKSB7XHJcblx0XHRcdHZhbHVlID0gaW5wdXRbIGlucHV0SW5kZXggXVsga2V5IF07XHJcblx0XHRcdGlmICggaW5wdXRbIGlucHV0SW5kZXggXS5oYXNPd25Qcm9wZXJ0eSgga2V5ICkgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHQvLyBDbG9uZSBvYmplY3RzXHJcblx0XHRcdFx0aWYgKCAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICkgKSB7XHJcblx0XHRcdFx0XHR0YXJnZXRbIGtleSBdID0gJC5pc1BsYWluT2JqZWN0KCB0YXJnZXRbIGtleSBdICkgP1xyXG5cdFx0XHRcdFx0XHQkLndpZGdldC5leHRlbmQoIHt9LCB0YXJnZXRbIGtleSBdLCB2YWx1ZSApIDpcclxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgZXh0ZW5kIHN0cmluZ3MsIGFycmF5cywgZXRjLiB3aXRoIG9iamVjdHNcclxuXHRcdFx0XHRcdFx0JC53aWRnZXQuZXh0ZW5kKCB7fSwgdmFsdWUgKTtcclxuXHRcdFx0XHQvLyBDb3B5IGV2ZXJ5dGhpbmcgZWxzZSBieSByZWZlcmVuY2VcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGFyZ2V0WyBrZXkgXSA9IHZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gdGFyZ2V0O1xyXG59O1xyXG5cclxuJC53aWRnZXQuYnJpZGdlID0gZnVuY3Rpb24oIG5hbWUsIG9iamVjdCApIHtcclxuXHR2YXIgZnVsbE5hbWUgPSBvYmplY3QucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lIHx8IG5hbWU7XHJcblx0JC5mblsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgaXNNZXRob2RDYWxsID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIsXHJcblx0XHRcdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSxcclxuXHRcdFx0cmV0dXJuVmFsdWUgPSB0aGlzO1xyXG5cclxuXHRcdC8vIGFsbG93IG11bHRpcGxlIGhhc2hlcyB0byBiZSBwYXNzZWQgb24gaW5pdFxyXG5cdFx0b3B0aW9ucyA9ICFpc01ldGhvZENhbGwgJiYgYXJncy5sZW5ndGggP1xyXG5cdFx0XHQkLndpZGdldC5leHRlbmQuYXBwbHkoIG51bGwsIFsgb3B0aW9ucyBdLmNvbmNhdChhcmdzKSApIDpcclxuXHRcdFx0b3B0aW9ucztcclxuXHJcblx0XHRpZiAoIGlzTWV0aG9kQ2FsbCApIHtcclxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBtZXRob2RWYWx1ZSxcclxuXHRcdFx0XHRcdGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xyXG5cdFx0XHRcdGlmICggb3B0aW9ucyA9PT0gXCJpbnN0YW5jZVwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuVmFsdWUgPSBpbnN0YW5jZTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCAhaW5zdGFuY2UgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJC5lcnJvciggXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiICsgbmFtZSArIFwiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBcIiArXHJcblx0XHRcdFx0XHRcdFwiYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICdcIiArIG9wdGlvbnMgKyBcIidcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoICEkLmlzRnVuY3Rpb24oIGluc3RhbmNlW29wdGlvbnNdICkgfHwgb3B0aW9ucy5jaGFyQXQoIDAgKSA9PT0gXCJfXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJC5lcnJvciggXCJubyBzdWNoIG1ldGhvZCAnXCIgKyBvcHRpb25zICsgXCInIGZvciBcIiArIG5hbWUgKyBcIiB3aWRnZXQgaW5zdGFuY2VcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRtZXRob2RWYWx1ZSA9IGluc3RhbmNlWyBvcHRpb25zIF0uYXBwbHkoIGluc3RhbmNlLCBhcmdzICk7XHJcblx0XHRcdFx0aWYgKCBtZXRob2RWYWx1ZSAhPT0gaW5zdGFuY2UgJiYgbWV0aG9kVmFsdWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHVyblZhbHVlID0gbWV0aG9kVmFsdWUgJiYgbWV0aG9kVmFsdWUuanF1ZXJ5ID9cclxuXHRcdFx0XHRcdFx0cmV0dXJuVmFsdWUucHVzaFN0YWNrKCBtZXRob2RWYWx1ZS5nZXQoKSApIDpcclxuXHRcdFx0XHRcdFx0bWV0aG9kVmFsdWU7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgaW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7XHJcblx0XHRcdFx0aWYgKCBpbnN0YW5jZSApIHtcclxuXHRcdFx0XHRcdGluc3RhbmNlLm9wdGlvbiggb3B0aW9ucyB8fCB7fSApLl9pbml0KCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQuZGF0YSggdGhpcywgZnVsbE5hbWUsIG5ldyBvYmplY3QoIG9wdGlvbnMsIHRoaXMgKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH07XHJcbn07XHJcblxyXG4kLldpZGdldCA9IGZ1bmN0aW9uKCAvKiBvcHRpb25zLCBlbGVtZW50ICovICkge307XHJcbiQuV2lkZ2V0Ll9jaGlsZENvbnN0cnVjdG9ycyA9IFtdO1xyXG5cclxuJC5XaWRnZXQucHJvdG90eXBlID0ge1xyXG5cdHdpZGdldE5hbWU6IFwid2lkZ2V0XCIsXHJcblx0d2lkZ2V0RXZlbnRQcmVmaXg6IFwiXCIsXHJcblx0ZGVmYXVsdEVsZW1lbnQ6IFwiPGRpdj5cIixcclxuXHRvcHRpb25zOiB7XHJcblx0XHRkaXNhYmxlZDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gY2FsbGJhY2tzXHJcblx0XHRjcmVhdGU6IG51bGxcclxuXHR9LFxyXG5cdF9jcmVhdGVXaWRnZXQ6IGZ1bmN0aW9uKCBvcHRpb25zLCBlbGVtZW50ICkge1xyXG5cdFx0ZWxlbWVudCA9ICQoIGVsZW1lbnQgfHwgdGhpcy5kZWZhdWx0RWxlbWVudCB8fCB0aGlzIClbIDAgXTtcclxuXHRcdHRoaXMuZWxlbWVudCA9ICQoIGVsZW1lbnQgKTtcclxuXHRcdHRoaXMudXVpZCA9IHV1aWQrKztcclxuXHRcdHRoaXMuZXZlbnROYW1lc3BhY2UgPSBcIi5cIiArIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZDtcclxuXHRcdHRoaXMub3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZCgge30sXHJcblx0XHRcdHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLFxyXG5cdFx0XHRvcHRpb25zICk7XHJcblxyXG5cdFx0dGhpcy5iaW5kaW5ncyA9ICQoKTtcclxuXHRcdHRoaXMuaG92ZXJhYmxlID0gJCgpO1xyXG5cdFx0dGhpcy5mb2N1c2FibGUgPSAkKCk7XHJcblxyXG5cdFx0aWYgKCBlbGVtZW50ICE9PSB0aGlzICkge1xyXG5cdFx0XHQkLmRhdGEoIGVsZW1lbnQsIHRoaXMud2lkZ2V0RnVsbE5hbWUsIHRoaXMgKTtcclxuXHRcdFx0dGhpcy5fb24oIHRydWUsIHRoaXMuZWxlbWVudCwge1xyXG5cdFx0XHRcdHJlbW92ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdFx0aWYgKCBldmVudC50YXJnZXQgPT09IGVsZW1lbnQgKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGVzdHJveSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQgPSAkKCBlbGVtZW50LnN0eWxlID9cclxuXHRcdFx0XHQvLyBlbGVtZW50IHdpdGhpbiB0aGUgZG9jdW1lbnRcclxuXHRcdFx0XHRlbGVtZW50Lm93bmVyRG9jdW1lbnQgOlxyXG5cdFx0XHRcdC8vIGVsZW1lbnQgaXMgd2luZG93IG9yIGRvY3VtZW50XHJcblx0XHRcdFx0ZWxlbWVudC5kb2N1bWVudCB8fCBlbGVtZW50ICk7XHJcblx0XHRcdHRoaXMud2luZG93ID0gJCggdGhpcy5kb2N1bWVudFswXS5kZWZhdWx0VmlldyB8fCB0aGlzLmRvY3VtZW50WzBdLnBhcmVudFdpbmRvdyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NyZWF0ZSgpO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJjcmVhdGVcIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkgKTtcclxuXHRcdHRoaXMuX2luaXQoKTtcclxuXHR9LFxyXG5cdF9nZXRDcmVhdGVPcHRpb25zOiAkLm5vb3AsXHJcblx0X2dldENyZWF0ZUV2ZW50RGF0YTogJC5ub29wLFxyXG5cdF9jcmVhdGU6ICQubm9vcCxcclxuXHRfaW5pdDogJC5ub29wLFxyXG5cclxuXHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2Rlc3Ryb3koKTtcclxuXHRcdC8vIHdlIGNhbiBwcm9iYWJseSByZW1vdmUgdGhlIHVuYmluZCBjYWxscyBpbiAyLjBcclxuXHRcdC8vIGFsbCBldmVudCBiaW5kaW5ncyBzaG91bGQgZ28gdGhyb3VnaCB0aGlzLl9vbigpXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApXHJcblx0XHRcdC5yZW1vdmVEYXRhKCB0aGlzLndpZGdldEZ1bGxOYW1lIClcclxuXHRcdFx0Ly8gc3VwcG9ydDoganF1ZXJ5IDwxLjYuM1xyXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC85NDEzXHJcblx0XHRcdC5yZW1vdmVEYXRhKCAkLmNhbWVsQ2FzZSggdGhpcy53aWRnZXRGdWxsTmFtZSApICk7XHJcblx0XHR0aGlzLndpZGdldCgpXHJcblx0XHRcdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWRpc2FibGVkXCIgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoXHJcblx0XHRcdFx0dGhpcy53aWRnZXRGdWxsTmFtZSArIFwiLWRpc2FibGVkIFwiICtcclxuXHRcdFx0XHRcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHJcblx0XHQvLyBjbGVhbiB1cCBldmVudHMgYW5kIHN0YXRlc1xyXG5cdFx0dGhpcy5iaW5kaW5ncy51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKTtcclxuXHRcdHRoaXMuaG92ZXJhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHR9LFxyXG5cdF9kZXN0cm95OiAkLm5vb3AsXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50O1xyXG5cdH0sXHJcblxyXG5cdG9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IGtleSxcclxuXHRcdFx0cGFydHMsXHJcblx0XHRcdGN1ck9wdGlvbixcclxuXHRcdFx0aTtcclxuXHJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdC8vIGRvbid0IHJldHVybiBhIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgaGFzaFxyXG5cdFx0XHRyZXR1cm4gJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHQvLyBoYW5kbGUgbmVzdGVkIGtleXMsIGUuZy4sIFwiZm9vLmJhclwiID0+IHsgZm9vOiB7IGJhcjogX19fIH0gfVxyXG5cdFx0XHRvcHRpb25zID0ge307XHJcblx0XHRcdHBhcnRzID0ga2V5LnNwbGl0KCBcIi5cIiApO1xyXG5cdFx0XHRrZXkgPSBwYXJ0cy5zaGlmdCgpO1xyXG5cdFx0XHRpZiAoIHBhcnRzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRjdXJPcHRpb24gPSBvcHRpb25zWyBrZXkgXSA9ICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9uc1sga2V5IF0gKTtcclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKyApIHtcclxuXHRcdFx0XHRcdGN1ck9wdGlvblsgcGFydHNbIGkgXSBdID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gfHwge307XHJcblx0XHRcdFx0XHRjdXJPcHRpb24gPSBjdXJPcHRpb25bIHBhcnRzWyBpIF0gXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0a2V5ID0gcGFydHMucG9wKCk7XHJcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGN1ck9wdGlvblsga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjdXJPcHRpb25bIGtleSBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjdXJPcHRpb25bIGtleSBdID0gdmFsdWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uc1sga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0aGlzLm9wdGlvbnNbIGtleSBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvcHRpb25zWyBrZXkgXSA9IHZhbHVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2V0T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGtleTtcclxuXHJcblx0XHRmb3IgKCBrZXkgaW4gb3B0aW9ucyApIHtcclxuXHRcdFx0dGhpcy5fc2V0T3B0aW9uKCBrZXksIG9wdGlvbnNbIGtleSBdICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdHRoaXMub3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCB0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWRcIiwgISF2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHRcdHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogZmFsc2UgfSk7XHJcblx0fSxcclxuXHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IHRydWUgfSk7XHJcblx0fSxcclxuXHJcblx0X29uOiBmdW5jdGlvbiggc3VwcHJlc3NEaXNhYmxlZENoZWNrLCBlbGVtZW50LCBoYW5kbGVycyApIHtcclxuXHRcdHZhciBkZWxlZ2F0ZUVsZW1lbnQsXHJcblx0XHRcdGluc3RhbmNlID0gdGhpcztcclxuXHJcblx0XHQvLyBubyBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgZmxhZywgc2h1ZmZsZSBhcmd1bWVudHNcclxuXHRcdGlmICggdHlwZW9mIHN1cHByZXNzRGlzYWJsZWRDaGVjayAhPT0gXCJib29sZWFuXCIgKSB7XHJcblx0XHRcdGhhbmRsZXJzID0gZWxlbWVudDtcclxuXHRcdFx0ZWxlbWVudCA9IHN1cHByZXNzRGlzYWJsZWRDaGVjaztcclxuXHRcdFx0c3VwcHJlc3NEaXNhYmxlZENoZWNrID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbm8gZWxlbWVudCBhcmd1bWVudCwgc2h1ZmZsZSBhbmQgdXNlIHRoaXMuZWxlbWVudFxyXG5cdFx0aWYgKCAhaGFuZGxlcnMgKSB7XHJcblx0XHRcdGhhbmRsZXJzID0gZWxlbWVudDtcclxuXHRcdFx0ZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcclxuXHRcdFx0ZGVsZWdhdGVFbGVtZW50ID0gdGhpcy53aWRnZXQoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGFjY2VwdCBzZWxlY3RvcnMsIERPTSBlbGVtZW50c1xyXG5cdFx0XHRlbGVtZW50ID0gZGVsZWdhdGVFbGVtZW50ID0gJCggZWxlbWVudCApO1xyXG5cdFx0XHR0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5hZGQoIGVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmVhY2goIGhhbmRsZXJzLCBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXIgKSB7XHJcblx0XHRcdGZ1bmN0aW9uIGhhbmRsZXJQcm94eSgpIHtcclxuXHRcdFx0XHQvLyBhbGxvdyB3aWRnZXRzIHRvIGN1c3RvbWl6ZSB0aGUgZGlzYWJsZWQgaGFuZGxpbmdcclxuXHRcdFx0XHQvLyAtIGRpc2FibGVkIGFzIGFuIGFycmF5IGluc3RlYWQgb2YgYm9vbGVhblxyXG5cdFx0XHRcdC8vIC0gZGlzYWJsZWQgY2xhc3MgYXMgbWV0aG9kIGZvciBkaXNhYmxpbmcgaW5kaXZpZHVhbCBwYXJ0c1xyXG5cdFx0XHRcdGlmICggIXN1cHByZXNzRGlzYWJsZWRDaGVjayAmJlxyXG5cdFx0XHRcdFx0XHQoIGluc3RhbmNlLm9wdGlvbnMuZGlzYWJsZWQgPT09IHRydWUgfHxcclxuXHRcdFx0XHRcdFx0XHQkKCB0aGlzICkuaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAoIHR5cGVvZiBoYW5kbGVyID09PSBcInN0cmluZ1wiID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKVxyXG5cdFx0XHRcdFx0LmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGNvcHkgdGhlIGd1aWQgc28gZGlyZWN0IHVuYmluZGluZyB3b3Jrc1xyXG5cdFx0XHRpZiAoIHR5cGVvZiBoYW5kbGVyICE9PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdGhhbmRsZXJQcm94eS5ndWlkID0gaGFuZGxlci5ndWlkID1cclxuXHRcdFx0XHRcdGhhbmRsZXIuZ3VpZCB8fCBoYW5kbGVyUHJveHkuZ3VpZCB8fCAkLmd1aWQrKztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIG1hdGNoID0gZXZlbnQubWF0Y2goIC9eKFxcdyspXFxzKiguKikkLyApLFxyXG5cdFx0XHRcdGV2ZW50TmFtZSA9IG1hdGNoWzFdICsgaW5zdGFuY2UuZXZlbnROYW1lc3BhY2UsXHJcblx0XHRcdFx0c2VsZWN0b3IgPSBtYXRjaFsyXTtcclxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcclxuXHRcdFx0XHRkZWxlZ2F0ZUVsZW1lbnQuZGVsZWdhdGUoIHNlbGVjdG9yLCBldmVudE5hbWUsIGhhbmRsZXJQcm94eSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGVsZW1lbnQuYmluZCggZXZlbnROYW1lLCBoYW5kbGVyUHJveHkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X29mZjogZnVuY3Rpb24oIGVsZW1lbnQsIGV2ZW50TmFtZSApIHtcclxuXHRcdGV2ZW50TmFtZSA9IChldmVudE5hbWUgfHwgXCJcIikuc3BsaXQoIFwiIFwiICkuam9pbiggdGhpcy5ldmVudE5hbWVzcGFjZSArIFwiIFwiICkgKyB0aGlzLmV2ZW50TmFtZXNwYWNlO1xyXG5cdFx0ZWxlbWVudC51bmJpbmQoIGV2ZW50TmFtZSApLnVuZGVsZWdhdGUoIGV2ZW50TmFtZSApO1xyXG5cdH0sXHJcblxyXG5cdF9kZWxheTogZnVuY3Rpb24oIGhhbmRsZXIsIGRlbGF5ICkge1xyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlclByb3h5KCkge1xyXG5cdFx0XHRyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gXCJzdHJpbmdcIiA/IGluc3RhbmNlWyBoYW5kbGVyIF0gOiBoYW5kbGVyIClcclxuXHRcdFx0XHQuYXBwbHkoIGluc3RhbmNlLCBhcmd1bWVudHMgKTtcclxuXHRcdH1cclxuXHRcdHZhciBpbnN0YW5jZSA9IHRoaXM7XHJcblx0XHRyZXR1cm4gc2V0VGltZW91dCggaGFuZGxlclByb3h5LCBkZWxheSB8fCAwICk7XHJcblx0fSxcclxuXHJcblx0X2hvdmVyYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR0aGlzLmhvdmVyYWJsZSA9IHRoaXMuaG92ZXJhYmxlLmFkZCggZWxlbWVudCApO1xyXG5cdFx0dGhpcy5fb24oIGVsZW1lbnQsIHtcclxuXHRcdFx0bW91c2VlbnRlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdG1vdXNlbGVhdmU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHRoaXMuZm9jdXNhYmxlID0gdGhpcy5mb2N1c2FibGUuYWRkKCBlbGVtZW50ICk7XHJcblx0XHR0aGlzLl9vbiggZWxlbWVudCwge1xyXG5cdFx0XHRmb2N1c2luOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Zm9jdXNvdXQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGV2ZW50LCBkYXRhICkge1xyXG5cdFx0dmFyIHByb3AsIG9yaWcsXHJcblx0XHRcdGNhbGxiYWNrID0gdGhpcy5vcHRpb25zWyB0eXBlIF07XHJcblxyXG5cdFx0ZGF0YSA9IGRhdGEgfHwge307XHJcblx0XHRldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7XHJcblx0XHRldmVudC50eXBlID0gKCB0eXBlID09PSB0aGlzLndpZGdldEV2ZW50UHJlZml4ID9cclxuXHRcdFx0dHlwZSA6XHJcblx0XHRcdHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggKyB0eXBlICkudG9Mb3dlckNhc2UoKTtcclxuXHRcdC8vIHRoZSBvcmlnaW5hbCBldmVudCBtYXkgY29tZSBmcm9tIGFueSBlbGVtZW50XHJcblx0XHQvLyBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZSB0YXJnZXQgb24gdGhlIG5ldyBldmVudFxyXG5cdFx0ZXZlbnQudGFyZ2V0ID0gdGhpcy5lbGVtZW50WyAwIF07XHJcblxyXG5cdFx0Ly8gY29weSBvcmlnaW5hbCBldmVudCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIG5ldyBldmVudFxyXG5cdFx0b3JpZyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblx0XHRpZiAoIG9yaWcgKSB7XHJcblx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcclxuXHRcdFx0XHRpZiAoICEoIHByb3AgaW4gZXZlbnQgKSApIHtcclxuXHRcdFx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnWyBwcm9wIF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIGV2ZW50LCBkYXRhICk7XHJcblx0XHRyZXR1cm4gISggJC5pc0Z1bmN0aW9uKCBjYWxsYmFjayApICYmXHJcblx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLmVsZW1lbnRbMF0sIFsgZXZlbnQgXS5jb25jYXQoIGRhdGEgKSApID09PSBmYWxzZSB8fFxyXG5cdFx0XHRldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApO1xyXG5cdH1cclxufTtcclxuXHJcbiQuZWFjaCggeyBzaG93OiBcImZhZGVJblwiLCBoaWRlOiBcImZhZGVPdXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBkZWZhdWx0RWZmZWN0ICkge1xyXG5cdCQuV2lkZ2V0LnByb3RvdHlwZVsgXCJfXCIgKyBtZXRob2QgXSA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb25zLCBjYWxsYmFjayApIHtcclxuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdG9wdGlvbnMgPSB7IGVmZmVjdDogb3B0aW9ucyB9O1xyXG5cdFx0fVxyXG5cdFx0dmFyIGhhc09wdGlvbnMsXHJcblx0XHRcdGVmZmVjdE5hbWUgPSAhb3B0aW9ucyA/XHJcblx0XHRcdFx0bWV0aG9kIDpcclxuXHRcdFx0XHRvcHRpb25zID09PSB0cnVlIHx8IHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiID9cclxuXHRcdFx0XHRcdGRlZmF1bHRFZmZlY3QgOlxyXG5cdFx0XHRcdFx0b3B0aW9ucy5lZmZlY3QgfHwgZGVmYXVsdEVmZmVjdDtcclxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cdFx0aWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIiApIHtcclxuXHRcdFx0b3B0aW9ucyA9IHsgZHVyYXRpb246IG9wdGlvbnMgfTtcclxuXHRcdH1cclxuXHRcdGhhc09wdGlvbnMgPSAhJC5pc0VtcHR5T2JqZWN0KCBvcHRpb25zICk7XHJcblx0XHRvcHRpb25zLmNvbXBsZXRlID0gY2FsbGJhY2s7XHJcblx0XHRpZiAoIG9wdGlvbnMuZGVsYXkgKSB7XHJcblx0XHRcdGVsZW1lbnQuZGVsYXkoIG9wdGlvbnMuZGVsYXkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaGFzT3B0aW9ucyAmJiAkLmVmZmVjdHMgJiYgJC5lZmZlY3RzLmVmZmVjdFsgZWZmZWN0TmFtZSBdICkge1xyXG5cdFx0XHRlbGVtZW50WyBtZXRob2QgXSggb3B0aW9ucyApO1xyXG5cdFx0fSBlbHNlIGlmICggZWZmZWN0TmFtZSAhPT0gbWV0aG9kICYmIGVsZW1lbnRbIGVmZmVjdE5hbWUgXSApIHtcclxuXHRcdFx0ZWxlbWVudFsgZWZmZWN0TmFtZSBdKCBvcHRpb25zLmR1cmF0aW9uLCBvcHRpb25zLmVhc2luZywgY2FsbGJhY2sgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGVsZW1lbnQucXVldWUoZnVuY3Rpb24oIG5leHQgKSB7XHJcblx0XHRcdFx0JCggdGhpcyApWyBtZXRob2QgXSgpO1xyXG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XHJcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCBlbGVtZW50WyAwIF0gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bmV4dCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9O1xyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0dmFyIG5zTm9ybWFsaXplRGljdCA9IHt9LFxyXG5cdFx0b2xkRmluZCA9ICQuZmluZCxcclxuXHRcdHJicmFjZSA9IC8oPzpcXHtbXFxzXFxTXSpcXH18XFxbW1xcc1xcU10qXFxdKSQvLFxyXG5cdFx0anFtRGF0YVJFID0gLzpqcW1EYXRhXFwoKFteKV0qKVxcKS9nO1xyXG5cclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHJcblx0XHQvLyBOYW1lc3BhY2UgdXNlZCBmcmFtZXdvcmstd2lkZSBmb3IgZGF0YS1hdHRycy4gRGVmYXVsdCBpcyBubyBuYW1lc3BhY2VcclxuXHJcblx0XHRuczogXCJcIixcclxuXHJcblx0XHQvLyBSZXRyaWV2ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhbiBlbGVtZW50IGFuZCBwZXJmb3JtIHNvbWUgbWFzc2FnaW5nIG9mIHRoZSB2YWx1ZVxyXG5cclxuXHRcdGdldEF0dHJpYnV0ZTogZnVuY3Rpb24oIGVsZW1lbnQsIGtleSApIHtcclxuXHRcdFx0dmFyIGRhdGE7XHJcblxyXG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudC5qcXVlcnkgPyBlbGVtZW50WzBdIDogZWxlbWVudDtcclxuXHJcblx0XHRcdGlmICggZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSApIHtcclxuXHRcdFx0XHRkYXRhID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsga2V5ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENvcGllZCBmcm9tIGNvcmUncyBzcmMvZGF0YS5qczpkYXRhQXR0cigpXHJcblx0XHRcdC8vIENvbnZlcnQgZnJvbSBhIHN0cmluZyB0byBhIHByb3BlciBkYXRhIHR5cGVcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRkYXRhID0gZGF0YSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDpcclxuXHRcdFx0XHRcdGRhdGEgPT09IFwiZmFsc2VcIiA/IGZhbHNlIDpcclxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XHJcblx0XHRcdFx0XHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xyXG5cdFx0XHRcdFx0K2RhdGEgKyBcIlwiID09PSBkYXRhID8gK2RhdGEgOlxyXG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IEpTT04ucGFyc2UoIGRhdGEgKSA6XHJcblx0XHRcdFx0XHRkYXRhO1xyXG5cdFx0XHR9IGNhdGNoKCBlcnIgKSB7fVxyXG5cclxuXHRcdFx0cmV0dXJuIGRhdGE7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEV4cG9zZSBvdXIgY2FjaGUgZm9yIHRlc3RpbmcgcHVycG9zZXMuXHJcblx0XHRuc05vcm1hbGl6ZURpY3Q6IG5zTm9ybWFsaXplRGljdCxcclxuXHJcblx0XHQvLyBUYWtlIGEgZGF0YSBhdHRyaWJ1dGUgcHJvcGVydHksIHByZXBlbmQgdGhlIG5hbWVzcGFjZVxyXG5cdFx0Ly8gYW5kIHRoZW4gY2FtZWwgY2FzZSB0aGUgYXR0cmlidXRlIHN0cmluZy4gQWRkIHRoZSByZXN1bHRcclxuXHRcdC8vIHRvIG91ciBuc05vcm1hbGl6ZURpY3Qgc28gd2UgZG9uJ3QgaGF2ZSB0byBkbyB0aGlzIGFnYWluLlxyXG5cdFx0bnNOb3JtYWxpemU6IGZ1bmN0aW9uKCBwcm9wICkge1xyXG5cdFx0XHRyZXR1cm4gbnNOb3JtYWxpemVEaWN0WyBwcm9wIF0gfHxcclxuXHRcdFx0XHQoIG5zTm9ybWFsaXplRGljdFsgcHJvcCBdID0gJC5jYW1lbENhc2UoICQubW9iaWxlLm5zICsgcHJvcCApICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgamF2YXNjcmlwdCBwYWdlIGVsZW1lbnQgdG8gZ2F0aGVyIHNldHRpbmdzIGRhdGEganNwZXJmIHRlc3RcclxuXHRcdC8vIGh0dHA6Ly9qc3BlcmYuY29tL3NpbmdsZS1jb21wbGV4LXNlbGVjdG9yLXZzLW1hbnktY29tcGxleC1zZWxlY3RvcnMvZWRpdFxyXG5cdFx0Ly8gcG9zc2libHkgbmFpdmUsIGJ1dCBpdCBzaG93cyB0aGF0IHRoZSBwYXJzaW5nIG92ZXJoZWFkIGZvciAqanVzdCogdGhlIHBhZ2Ugc2VsZWN0b3IgdnNcclxuXHRcdC8vIHRoZSBwYWdlIGFuZCBkaWFsb2cgc2VsZWN0b3IgaXMgbmVnbGlnYWJsZS4gVGhpcyBjb3VsZCBwcm9iYWJseSBiZSBzcGVlZCB1cCBieVxyXG5cdFx0Ly8gZG9pbmcgYSBzaW1pbGFyIHBhcmVudCBub2RlIHRyYXZlcnNhbCB0byB0aGUgb25lIGZvdW5kIGluIHRoZSBpbmhlcml0ZWQgdGhlbWUgY29kZSBhYm92ZVxyXG5cdFx0Y2xvc2VzdFBhZ2VEYXRhOiBmdW5jdGlvbiggJHRhcmdldCApIHtcclxuXHRcdFx0cmV0dXJuICR0YXJnZXRcclxuXHRcdFx0XHQuY2xvc2VzdCggXCI6anFtRGF0YShyb2xlPSdwYWdlJyksIDpqcW1EYXRhKHJvbGU9J2RpYWxvZycpXCIgKVxyXG5cdFx0XHRcdC5kYXRhKCBcIm1vYmlsZS1wYWdlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblxyXG5cdC8vIE1vYmlsZSB2ZXJzaW9uIG9mIGRhdGEgYW5kIHJlbW92ZURhdGEgYW5kIGhhc0RhdGEgbWV0aG9kc1xyXG5cdC8vIGVuc3VyZXMgYWxsIGRhdGEgaXMgc2V0IGFuZCByZXRyaWV2ZWQgdXNpbmcgalF1ZXJ5IE1vYmlsZSdzIGRhdGEgbmFtZXNwYWNlXHJcblx0JC5mbi5qcW1EYXRhID0gZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xyXG5cdFx0dmFyIHJlc3VsdDtcclxuXHRcdGlmICggdHlwZW9mIHByb3AgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdGlmICggcHJvcCApIHtcclxuXHRcdFx0XHRwcm9wID0gJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gdW5kZWZpbmVkIGlzIHBlcm1pdHRlZCBhcyBhbiBleHBsaWNpdCBpbnB1dCBmb3IgdGhlIHNlY29uZCBwYXJhbVxyXG5cdFx0XHQvLyBpbiB0aGlzIGNhc2UgaXQgcmV0dXJucyB0aGUgdmFsdWUgYW5kIGRvZXMgbm90IHNldCBpdCB0byB1bmRlZmluZWRcclxuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgMiB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHRoaXMuZGF0YSggcHJvcCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHRoaXMuZGF0YSggcHJvcCwgdmFsdWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9O1xyXG5cclxuXHQkLmpxbURhdGEgPSBmdW5jdGlvbiggZWxlbSwgcHJvcCwgdmFsdWUgKSB7XHJcblx0XHR2YXIgcmVzdWx0O1xyXG5cdFx0aWYgKCB0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdFx0cmVzdWx0ID0gJC5kYXRhKCBlbGVtLCBwcm9wID8gJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKSA6IHByb3AsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH07XHJcblxyXG5cdCQuZm4uanFtUmVtb3ZlRGF0YSA9IGZ1bmN0aW9uKCBwcm9wICkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlRGF0YSggJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKSApO1xyXG5cdH07XHJcblxyXG5cdCQuanFtUmVtb3ZlRGF0YSA9IGZ1bmN0aW9uKCBlbGVtLCBwcm9wICkge1xyXG5cdFx0cmV0dXJuICQucmVtb3ZlRGF0YSggZWxlbSwgJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKSApO1xyXG5cdH07XHJcblxyXG5cdCQuZmluZCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmV0LCBleHRyYSApIHtcclxuXHRcdGlmICggc2VsZWN0b3IuaW5kZXhPZiggXCI6anFtRGF0YVwiICkgPiAtMSApIHtcclxuXHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKCBqcW1EYXRhUkUsIFwiW2RhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwiJDFdXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb2xkRmluZC5jYWxsKCB0aGlzLCBzZWxlY3RvciwgY29udGV4dCwgcmV0LCBleHRyYSApO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCAkLmZpbmQsIG9sZEZpbmQgKTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHJjYXBpdGFscyA9IC9bQS1aXS9nLFxyXG5cdHJlcGxhY2VGdW5jdGlvbiA9IGZ1bmN0aW9uKCBjICkge1xyXG5cdFx0cmV0dXJuIFwiLVwiICsgYy50b0xvd2VyQ2FzZSgpO1xyXG5cdH07XHJcblxyXG4kLmV4dGVuZCggJC5XaWRnZXQucHJvdG90eXBlLCB7XHJcblx0X2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbiwgdmFsdWUsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnRbIDAgXSxcclxuXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG5cclxuXHRcdC8vXHJcblx0XHRpZiAoICEkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGVsZW0sIFwiZGVmYXVsdHNcIiApICkge1xyXG5cdFx0XHRmb3IgKCBvcHRpb24gaW4gdGhpcy5vcHRpb25zICkge1xyXG5cdFx0XHRcdHZhbHVlID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBlbGVtLCBvcHRpb24ucmVwbGFjZSggcmNhcGl0YWxzLCByZXBsYWNlRnVuY3Rpb24gKSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XHJcblx0XHRcdFx0XHRvcHRpb25zWyBvcHRpb24gXSA9IHZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvcHRpb25zO1xyXG5cdH1cclxufSk7XHJcblxyXG4vL1RPRE86IFJlbW92ZSBpbiAxLjUgZm9yIGJhY2tjb21wYXQgb25seVxyXG4kLm1vYmlsZS53aWRnZXQgPSAkLldpZGdldDtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblx0Ly8gVE9ETyBtb3ZlIGxvYWRlciBjbGFzcyBkb3duIGludG8gdGhlIHdpZGdldCBzZXR0aW5nc1xyXG5cdHZhciBsb2FkZXJDbGFzcyA9IFwidWktbG9hZGVyXCIsICRodG1sID0gJCggXCJodG1sXCIgKTtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLmxvYWRlclwiLCB7XHJcblx0XHQvLyBOT1RFIGlmIHRoZSBnbG9iYWwgY29uZmlnIHNldHRpbmdzIGFyZSBkZWZpbmVkIHRoZXkgd2lsbCBvdmVycmlkZSB0aGVzZVxyXG5cdFx0Ly8gICAgICBvcHRpb25zXHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdC8vIHRoZSB0aGVtZSBmb3IgdGhlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHR0aGVtZTogXCJhXCIsXHJcblxyXG5cdFx0XHQvLyB3aGV0aGVyIHRoZSB0ZXh0IGluIHRoZSBsb2FkaW5nIG1lc3NhZ2UgaXMgc2hvd25cclxuXHRcdFx0dGV4dFZpc2libGU6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly8gY3VzdG9tIGh0bWwgZm9yIHRoZSBpbm5lciBjb250ZW50IG9mIHRoZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0aHRtbDogXCJcIixcclxuXHJcblx0XHRcdC8vIHRoZSB0ZXh0IHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBwb3B1cCBpcyBzaG93blxyXG5cdFx0XHR0ZXh0OiBcImxvYWRpbmdcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRkZWZhdWx0SHRtbDogXCI8ZGl2IGNsYXNzPSdcIiArIGxvYWRlckNsYXNzICsgXCInPlwiICtcclxuXHRcdFx0XCI8c3BhbiBjbGFzcz0ndWktaWNvbi1sb2FkaW5nJz48L3NwYW4+XCIgK1xyXG5cdFx0XHRcIjxoMT48L2gxPlwiICtcclxuXHRcdFx0XCI8L2Rpdj5cIixcclxuXHJcblx0XHQvLyBGb3Igbm9uLWZpeGVkIHN1cHBvcnRpbiBicm93c2Vycy4gUG9zaXRpb24gYXQgeSBjZW50ZXIgKGlmIHNjcm9sbFRvcCBzdXBwb3J0ZWQpLCBhYm92ZSB0aGUgYWN0aXZlQnRuIChpZiBkZWZpbmVkKSwgb3IganVzdCAxMDBweCBmcm9tIHRvcFxyXG5cdFx0ZmFrZUZpeExvYWRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBhY3RpdmVCdG4gPSAkKCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICkuZmlyc3QoKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0dG9wOiAkLnN1cHBvcnQuc2Nyb2xsVG9wICYmIHRoaXMud2luZG93LnNjcm9sbFRvcCgpICsgdGhpcy53aW5kb3cuaGVpZ2h0KCkgLyAyIHx8XHJcblx0XHRcdFx0XHRcdGFjdGl2ZUJ0bi5sZW5ndGggJiYgYWN0aXZlQnRuLm9mZnNldCgpLnRvcCB8fCAxMDBcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gY2hlY2sgcG9zaXRpb24gb2YgbG9hZGVyIHRvIHNlZSBpZiBpdCBhcHBlYXJzIHRvIGJlIFwiZml4ZWRcIiB0byBjZW50ZXJcclxuXHRcdC8vIGlmIG5vdCwgdXNlIGFicyBwb3NpdGlvbmluZ1xyXG5cdFx0Y2hlY2tMb2FkZXJQb3NpdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBvZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCksXHJcblx0XHRcdFx0c2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRcdFx0c2NyZWVuSGVpZ2h0ID0gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRpZiAoIG9mZnNldC50b3AgPCBzY3JvbGxUb3AgfHwgKCBvZmZzZXQudG9wIC0gc2Nyb2xsVG9wICkgPiBzY3JlZW5IZWlnaHQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLWxvYWRlci1mYWtlZml4XCIgKTtcclxuXHRcdFx0XHR0aGlzLmZha2VGaXhMb2FkZXIoKTtcclxuXHRcdFx0XHR0aGlzLndpbmRvd1xyXG5cdFx0XHRcdFx0LnVuYmluZCggXCJzY3JvbGxcIiwgdGhpcy5jaGVja0xvYWRlclBvc2l0aW9uIClcclxuXHRcdFx0XHRcdC5iaW5kKCBcInNjcm9sbFwiLCAkLnByb3h5KCB0aGlzLmZha2VGaXhMb2FkZXIsIHRoaXMgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlc2V0SHRtbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5odG1sKCAkKCB0aGlzLmRlZmF1bHRIdG1sICkuaHRtbCgpICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFR1cm4gb24vb2ZmIHBhZ2UgbG9hZGluZyBtZXNzYWdlLiBUaGVtZSBkb3VibGVzIGFzIGFuIG9iamVjdCBhcmd1bWVudFxyXG5cdFx0Ly8gd2l0aCB0aGUgZm9sbG93aW5nIHNoYXBlOiB7IHRoZW1lOiAnJywgdGV4dDogJycsIGh0bWw6ICcnLCB0ZXh0VmlzaWJsZTogJycgfVxyXG5cdFx0Ly8gTk9URSB0aGF0IHRoZSAkLm1vYmlsZS5sb2FkaW5nKiBzZXR0aW5ncyBhbmQgcGFyYW1zIHBhc3QgdGhlIGZpcnN0IGFyZSBkZXByZWNhdGVkXHJcblx0XHQvLyBUT0RPIHN3ZWV0IGplc3VzIHdlIG5lZWQgdG8gYnJlYWsgc29tZSBvZiB0aGlzIG91dFxyXG5cdFx0c2hvdzogZnVuY3Rpb24oIHRoZW1lLCBtc2dUZXh0LCB0ZXh0b25seSApIHtcclxuXHRcdFx0dmFyIHRleHRWaXNpYmxlLCBtZXNzYWdlLCBsb2FkU2V0dGluZ3M7XHJcblxyXG5cdFx0XHR0aGlzLnJlc2V0SHRtbCgpO1xyXG5cclxuXHRcdFx0Ly8gdXNlIHRoZSBwcm90b3R5cGUgb3B0aW9ucyBzbyB0aGF0IHBlb3BsZSBjYW4gc2V0IHRoZW0gZ2xvYmFsbHkgYXRcclxuXHRcdFx0Ly8gbW9iaWxlIGluaXQuIENvbnNpc3RlbmN5LCBpdCdzIHdoYXQncyBmb3IgZGlubmVyXHJcblx0XHRcdGlmICggJC50eXBlKCB0aGVtZSApID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHRcdGxvYWRTZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCB0aGVtZSApO1xyXG5cclxuXHRcdFx0XHR0aGVtZSA9IGxvYWRTZXR0aW5ncy50aGVtZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsb2FkU2V0dGluZ3MgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHRcdC8vIGhlcmUgd2UgcHJlZmVyIHRoZSB0aGVtZSB2YWx1ZSBwYXNzZWQgYXMgYSBzdHJpbmcgYXJndW1lbnQsIHRoZW5cclxuXHRcdFx0XHQvLyB3ZSBwcmVmZXIgdGhlIGdsb2JhbCBvcHRpb24gYmVjYXVzZSB3ZSBjYW4ndCB1c2UgdW5kZWZpbmVkIGRlZmF1bHRcclxuXHRcdFx0XHQvLyBwcm90b3R5cGUgb3B0aW9ucywgdGhlbiB0aGUgcHJvdG90eXBlIG9wdGlvblxyXG5cdFx0XHRcdHRoZW1lID0gdGhlbWUgfHwgbG9hZFNldHRpbmdzLnRoZW1lO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBzZXQgdGhlIG1lc3NhZ2UgdGV4dCwgcHJlZmVyIHRoZSBwYXJhbSwgdGhlbiB0aGUgc2V0dGluZ3Mgb2JqZWN0XHJcblx0XHRcdC8vIHRoZW4gbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdG1lc3NhZ2UgPSBtc2dUZXh0IHx8ICggbG9hZFNldHRpbmdzLnRleHQgPT09IGZhbHNlID8gXCJcIiA6IGxvYWRTZXR0aW5ncy50ZXh0ICk7XHJcblxyXG5cdFx0XHQvLyBwcmVwYXJlIHRoZSBkb21cclxuXHRcdFx0JGh0bWwuYWRkQ2xhc3MoIFwidWktbG9hZGluZ1wiICk7XHJcblxyXG5cdFx0XHR0ZXh0VmlzaWJsZSA9IGxvYWRTZXR0aW5ncy50ZXh0VmlzaWJsZTtcclxuXHJcblx0XHRcdC8vIGFkZCB0aGUgcHJvcGVyIGNzcyBnaXZlbiB0aGUgb3B0aW9ucyAodGhlbWUsIHRleHQsIGV0YylcclxuXHRcdFx0Ly8gRm9yY2UgdGV4dCB2aXNpYmlsaXR5IGlmIHRoZSBzZWNvbmQgYXJndW1lbnQgd2FzIHN1cHBsaWVkLCBvclxyXG5cdFx0XHQvLyBpZiB0aGUgdGV4dCB3YXMgZXhwbGljaXRseSBzZXQgaW4gdGhlIG9iamVjdCBhcmdzXHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKFwiY2xhc3NcIiwgbG9hZGVyQ2xhc3MgK1xyXG5cdFx0XHRcdFwiIHVpLWNvcm5lci1hbGwgdWktYm9keS1cIiArIHRoZW1lICtcclxuXHRcdFx0XHRcIiB1aS1sb2FkZXItXCIgKyAoIHRleHRWaXNpYmxlIHx8IG1zZ1RleHQgfHwgdGhlbWUudGV4dCA/IFwidmVyYm9zZVwiIDogXCJkZWZhdWx0XCIgKSArXHJcblx0XHRcdFx0KCBsb2FkU2V0dGluZ3MudGV4dG9ubHkgfHwgdGV4dG9ubHkgPyBcIiB1aS1sb2FkZXItdGV4dG9ubHlcIiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyB2ZXJpZnkgdGhhdCBqcXVlcnkuZm4uaHRtbCBpcyBvayB0byB1c2UgaW4gYm90aCBjYXNlcyBoZXJlXHJcblx0XHRcdC8vICAgICAgdGhpcyBtaWdodCBiZSBvdmVybHkgZGVmZW5zaXZlIGluIHByZXZlbnRpbmcgdW5rbm93aW5nIHhzc1xyXG5cdFx0XHQvLyBpZiB0aGUgaHRtbCBhdHRyaWJ1dGUgaXMgZGVmaW5lZCBvbiB0aGUgbG9hZGluZyBzZXR0aW5ncywgdXNlIHRoYXRcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIHVzZSB0aGUgZmFsbGJhY2tzIGZyb20gYWJvdmVcclxuXHRcdFx0aWYgKCBsb2FkU2V0dGluZ3MuaHRtbCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuaHRtbCggbG9hZFNldHRpbmdzLmh0bWwgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJoMVwiICkudGV4dCggbWVzc2FnZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgcGFnZWNvbnRhaW5lciB3aWRnZXQgaGFzIGJlZW4gZGVmaW5lZCB3ZSBtYXkgdXNlIHRoZSA6bW9iaWxlLXBhZ2Vjb250YWluZXJcclxuXHRcdFx0Ly8gYW5kIGF0dGFjaCB0byB0aGUgZWxlbWVudCBvbiB3aGljaCB0aGUgcGFnZWNvbnRhaW5lciB3aWRnZXQgaGFzIGJlZW4gZGVmaW5lZC4gSWYgbm90LFxyXG5cdFx0XHQvLyB3ZSBhdHRhY2ggdG8gdGhlIGJvZHkuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5hcHBlbmRUbyggJC5tb2JpbGUucGFnZWNvbnRhaW5lciA/XHJcblx0XHRcdFx0JCggXCI6bW9iaWxlLXBhZ2Vjb250YWluZXJcIiApIDogJCggXCJib2R5XCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gY2hlY2sgdGhhdCB0aGUgbG9hZGVyIGlzIHZpc2libGVcclxuXHRcdFx0dGhpcy5jaGVja0xvYWRlclBvc2l0aW9uKCk7XHJcblxyXG5cdFx0XHQvLyBvbiBzY3JvbGwgY2hlY2sgdGhlIGxvYWRlciBwb3NpdGlvblxyXG5cdFx0XHR0aGlzLndpbmRvdy5iaW5kKCBcInNjcm9sbFwiLCAkLnByb3h5KCB0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24sIHRoaXMgKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JGh0bWwucmVtb3ZlQ2xhc3MoIFwidWktbG9hZGluZ1wiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy50ZXh0ICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1sb2FkZXItZmFrZWZpeFwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMud2luZG93LnVuYmluZCggXCJzY3JvbGxcIiwgdGhpcy5mYWtlRml4TG9hZGVyICk7XHJcblx0XHRcdHRoaXMud2luZG93LnVuYmluZCggXCJzY3JvbGxcIiwgdGhpcy5jaGVja0xvYWRlclBvc2l0aW9uICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KShqUXVlcnksIHRoaXMpO1xyXG5cclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgaGFzaGNoYW5nZSBldmVudCAtIHYxLjMgLSA3LzIxLzIwMTBcclxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS1wbHVnaW4vXHJcbiAqIFxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW5cclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXHJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cclxuICovXHJcblxyXG4vLyBTY3JpcHQ6IGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50XHJcbi8vXHJcbi8vICpWZXJzaW9uOiAxLjMsIExhc3QgdXBkYXRlZDogNy8yMS8yMDEwKlxyXG4vLyBcclxuLy8gUHJvamVjdCBIb21lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS1wbHVnaW4vXHJcbi8vIEdpdEh1YiAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9cclxuLy8gU291cmNlICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1oYXNoY2hhbmdlL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLWhhc2hjaGFuZ2UuanNcclxuLy8gKE1pbmlmaWVkKSAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1oYXNoY2hhbmdlL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLWhhc2hjaGFuZ2UubWluLmpzICgwLjhrYiBnemlwcGVkKVxyXG4vLyBcclxuLy8gQWJvdXQ6IExpY2Vuc2VcclxuLy8gXHJcbi8vIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hbixcclxuLy8gRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXHJcbi8vIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cclxuLy8gXHJcbi8vIEFib3V0OiBFeGFtcGxlc1xyXG4vLyBcclxuLy8gVGhlc2Ugd29ya2luZyBleGFtcGxlcywgY29tcGxldGUgd2l0aCBmdWxseSBjb21tZW50ZWQgY29kZSwgaWxsdXN0cmF0ZSBhIGZld1xyXG4vLyB3YXlzIGluIHdoaWNoIHRoaXMgcGx1Z2luIGNhbiBiZSB1c2VkLlxyXG4vLyBcclxuLy8gaGFzaGNoYW5nZSBldmVudCAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9oYXNoY2hhbmdlL1xyXG4vLyBkb2N1bWVudC5kb21haW4gLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvZG9jdW1lbnRfZG9tYWluL1xyXG4vLyBcclxuLy8gQWJvdXQ6IFN1cHBvcnQgYW5kIFRlc3RpbmdcclxuLy8gXHJcbi8vIEluZm9ybWF0aW9uIGFib3V0IHdoYXQgdmVyc2lvbiBvciB2ZXJzaW9ucyBvZiBqUXVlcnkgdGhpcyBwbHVnaW4gaGFzIGJlZW5cclxuLy8gdGVzdGVkIHdpdGgsIHdoYXQgYnJvd3NlcnMgaXQgaGFzIGJlZW4gdGVzdGVkIGluLCBhbmQgd2hlcmUgdGhlIHVuaXQgdGVzdHNcclxuLy8gcmVzaWRlIChzbyB5b3UgY2FuIHRlc3QgaXQgeW91cnNlbGYpLlxyXG4vLyBcclxuLy8galF1ZXJ5IFZlcnNpb25zIC0gMS4yLjYsIDEuMy4yLCAxLjQuMSwgMS40LjJcclxuLy8gQnJvd3NlcnMgVGVzdGVkIC0gSW50ZXJuZXQgRXhwbG9yZXIgNi04LCBGaXJlZm94IDItNCwgQ2hyb21lIDUtNiwgU2FmYXJpIDMuMi01LFxyXG4vLyAgICAgICAgICAgICAgICAgICBPcGVyYSA5LjYtMTAuNjAsIGlQaG9uZSAzLjEsIEFuZHJvaWQgMS42LTIuMiwgQmxhY2tCZXJyeSA0LjYtNS5cclxuLy8gVW5pdCBUZXN0cyAgICAgIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL3VuaXQvXHJcbi8vIFxyXG4vLyBBYm91dDogS25vd24gaXNzdWVzXHJcbi8vIFxyXG4vLyBXaGlsZSB0aGlzIGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50IGltcGxlbWVudGF0aW9uIGlzIHF1aXRlIHN0YWJsZSBhbmRcclxuLy8gcm9idXN0LCB0aGVyZSBhcmUgYSBmZXcgdW5mb3J0dW5hdGUgYnJvd3NlciBidWdzIHN1cnJvdW5kaW5nIGV4cGVjdGVkXHJcbi8vIGhhc2hjaGFuZ2UgZXZlbnQtYmFzZWQgYmVoYXZpb3JzLCBpbmRlcGVuZGVudCBvZiBhbnkgSmF2YVNjcmlwdFxyXG4vLyB3aW5kb3cub25oYXNoY2hhbmdlIGFic3RyYWN0aW9uLiBTZWUgdGhlIGZvbGxvd2luZyBleGFtcGxlcyBmb3IgbW9yZVxyXG4vLyBpbmZvcm1hdGlvbjpcclxuLy8gXHJcbi8vIENocm9tZTogQmFjayBCdXR0b24gLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLWNocm9tZS1iYWNrLWJ1dHRvbi9cclxuLy8gRmlyZWZveDogUmVtb3RlIFhNTEh0dHBSZXF1ZXN0IC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1maXJlZm94LXJlbW90ZS14aHIvXHJcbi8vIFdlYktpdDogQmFjayBCdXR0b24gaW4gYW4gSWZyYW1lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy13ZWJraXQtaGFzaC1pZnJhbWUvXHJcbi8vIFNhZmFyaTogQmFjayBCdXR0b24gZnJvbSBhIGRpZmZlcmVudCBkb21haW4gLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLXNhZmFyaS1iYWNrLWZyb20tZGlmZi1kb21haW4vXHJcbi8vIFxyXG4vLyBBbHNvIG5vdGUgdGhhdCBzaG91bGQgYSBicm93c2VyIG5hdGl2ZWx5IHN1cHBvcnQgdGhlIHdpbmRvdy5vbmhhc2hjaGFuZ2UgXHJcbi8vIGV2ZW50LCBidXQgbm90IHJlcG9ydCB0aGF0IGl0IGRvZXMsIHRoZSBmYWxsYmFjayBwb2xsaW5nIGxvb3Agd2lsbCBiZSB1c2VkLlxyXG4vLyBcclxuLy8gQWJvdXQ6IFJlbGVhc2UgSGlzdG9yeVxyXG4vLyBcclxuLy8gMS4zICAgLSAoNy8yMS8yMDEwKSBSZW9yZ2FuaXplZCBJRTYvNyBJZnJhbWUgY29kZSB0byBtYWtlIGl0IG1vcmVcclxuLy8gICAgICAgICBcInJlbW92YWJsZVwiIGZvciBtb2JpbGUtb25seSBkZXZlbG9wbWVudC4gQWRkZWQgSUU2LzcgZG9jdW1lbnQudGl0bGVcclxuLy8gICAgICAgICBzdXBwb3J0LiBBdHRlbXB0ZWQgdG8gbWFrZSBJZnJhbWUgYXMgaGlkZGVuIGFzIHBvc3NpYmxlIGJ5IHVzaW5nXHJcbi8vICAgICAgICAgdGVjaG5pcXVlcyBmcm9tIGh0dHA6Ly93d3cucGFjaWVsbG9ncm91cC5jb20vYmxvZy8/cD02MDQuIEFkZGVkIFxyXG4vLyAgICAgICAgIHN1cHBvcnQgZm9yIHRoZSBcInNob3J0Y3V0XCIgZm9ybWF0ICQod2luZG93KS5oYXNoY2hhbmdlKCBmbiApIGFuZFxyXG4vLyAgICAgICAgICQod2luZG93KS5oYXNoY2hhbmdlKCkgbGlrZSBqUXVlcnkgcHJvdmlkZXMgZm9yIGJ1aWx0LWluIGV2ZW50cy5cclxuLy8gICAgICAgICBSZW5hbWVkIGpRdWVyeS5oYXNoY2hhbmdlRGVsYXkgdG8gPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRlbGF5PiBhbmRcclxuLy8gICAgICAgICBsb3dlcmVkIGl0cyBkZWZhdWx0IHZhbHVlIHRvIDUwLiBBZGRlZCA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluPlxyXG4vLyAgICAgICAgIGFuZCA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjPiBwcm9wZXJ0aWVzIHBsdXMgZG9jdW1lbnQtZG9tYWluLmh0bWxcclxuLy8gICAgICAgICBmaWxlIHRvIGFkZHJlc3MgYWNjZXNzIGRlbmllZCBpc3N1ZXMgd2hlbiBzZXR0aW5nIGRvY3VtZW50LmRvbWFpbiBpblxyXG4vLyAgICAgICAgIElFNi83LlxyXG4vLyAxLjIgICAtICgyLzExLzIwMTApIEZpeGVkIGEgYnVnIHdoZXJlIGNvbWluZyBiYWNrIHRvIGEgcGFnZSB1c2luZyB0aGlzIHBsdWdpblxyXG4vLyAgICAgICAgIGZyb20gYSBwYWdlIG9uIGFub3RoZXIgZG9tYWluIHdvdWxkIGNhdXNlIGFuIGVycm9yIGluIFNhZmFyaSA0LiBBbHNvLFxyXG4vLyAgICAgICAgIElFNi83IElmcmFtZSBpcyBub3cgaW5zZXJ0ZWQgYWZ0ZXIgdGhlIGJvZHkgKHRoaXMgYWN0dWFsbHkgd29ya3MpLFxyXG4vLyAgICAgICAgIHdoaWNoIHByZXZlbnRzIHRoZSBwYWdlIGZyb20gc2Nyb2xsaW5nIHdoZW4gdGhlIGV2ZW50IGlzIGZpcnN0IGJvdW5kLlxyXG4vLyAgICAgICAgIEV2ZW50IGNhbiBhbHNvIG5vdyBiZSBib3VuZCBiZWZvcmUgRE9NIHJlYWR5LCBidXQgaXQgd29uJ3QgYmUgdXNhYmxlXHJcbi8vICAgICAgICAgYmVmb3JlIHRoZW4gaW4gSUU2LzcuXHJcbi8vIDEuMSAgIC0gKDEvMjEvMjAxMCkgSW5jb3Jwb3JhdGVkIGRvY3VtZW50LmRvY3VtZW50TW9kZSB0ZXN0IHRvIGZpeCBJRTggYnVnXHJcbi8vICAgICAgICAgd2hlcmUgYnJvd3NlciB2ZXJzaW9uIGlzIGluY29ycmVjdGx5IHJlcG9ydGVkIGFzIDguMCwgZGVzcGl0ZVxyXG4vLyAgICAgICAgIGluY2x1c2lvbiBvZiB0aGUgWC1VQS1Db21wYXRpYmxlIElFPUVtdWxhdGVJRTcgbWV0YSB0YWcuXHJcbi8vIDEuMCAgIC0gKDEvOS8yMDEwKSBJbml0aWFsIFJlbGVhc2UuIEJyb2tlIG91dCB0aGUgalF1ZXJ5IEJCUSBldmVudC5zcGVjaWFsXHJcbi8vICAgICAgICAgd2luZG93Lm9uaGFzaGNoYW5nZSBmdW5jdGlvbmFsaXR5IGludG8gYSBzZXBhcmF0ZSBwbHVnaW4gZm9yIHVzZXJzXHJcbi8vICAgICAgICAgd2hvIHdhbnQganVzdCB0aGUgYmFzaWMgZXZlbnQgJiBiYWNrIGJ1dHRvbiBzdXBwb3J0LCB3aXRob3V0IGFsbCB0aGVcclxuLy8gICAgICAgICBleHRyYSBhd2Vzb21lbmVzcyB0aGF0IEJCUSBwcm92aWRlcy4gVGhpcyBwbHVnaW4gd2lsbCBiZSBpbmNsdWRlZCBhc1xyXG4vLyAgICAgICAgIHBhcnQgb2YgalF1ZXJ5IEJCUSwgYnV0IGFsc28gYmUgYXZhaWxhYmxlIHNlcGFyYXRlbHkuXHJcblxyXG4oZnVuY3Rpb24oJCx3aW5kb3csdW5kZWZpbmVkKXtcclxuICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cclxuICBcclxuICAvLyBSZXVzZWQgc3RyaW5nLlxyXG4gIHZhciBzdHJfaGFzaGNoYW5nZSA9ICdoYXNoY2hhbmdlJyxcclxuICAgIFxyXG4gICAgLy8gTWV0aG9kIC8gb2JqZWN0IHJlZmVyZW5jZXMuXHJcbiAgICBkb2MgPSBkb2N1bWVudCxcclxuICAgIGZha2Vfb25oYXNoY2hhbmdlLFxyXG4gICAgc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbCxcclxuICAgIFxyXG4gICAgLy8gRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IHdpbmRvdy5vbmhhc2hjaGFuZ2U/IE5vdGUgdGhhdCBJRTggcnVubmluZyBpblxyXG4gICAgLy8gSUU3IGNvbXBhdGliaWxpdHkgbW9kZSByZXBvcnRzIHRydWUgZm9yICdvbmhhc2hjaGFuZ2UnIGluIHdpbmRvdywgZXZlblxyXG4gICAgLy8gdGhvdWdoIHRoZSBldmVudCBpc24ndCBzdXBwb3J0ZWQsIHNvIGFsc28gdGVzdCBkb2N1bWVudC5kb2N1bWVudE1vZGUuXHJcbiAgICBkb2NfbW9kZSA9IGRvYy5kb2N1bWVudE1vZGUsXHJcbiAgICBzdXBwb3J0c19vbmhhc2hjaGFuZ2UgPSAnb24nICsgc3RyX2hhc2hjaGFuZ2UgaW4gd2luZG93ICYmICggZG9jX21vZGUgPT09IHVuZGVmaW5lZCB8fCBkb2NfbW9kZSA+IDcgKTtcclxuICBcclxuICAvLyBHZXQgbG9jYXRpb24uaGFzaCAob3Igd2hhdCB5b3UnZCBleHBlY3QgbG9jYXRpb24uaGFzaCB0byBiZSkgc2FucyBhbnlcclxuICAvLyBsZWFkaW5nICMuIFRoYW5rcyBmb3IgbWFraW5nIHRoaXMgbmVjZXNzYXJ5LCBGaXJlZm94IVxyXG4gIGZ1bmN0aW9uIGdldF9mcmFnbWVudCggdXJsICkge1xyXG4gICAgdXJsID0gdXJsIHx8IGxvY2F0aW9uLmhyZWY7XHJcbiAgICByZXR1cm4gJyMnICsgdXJsLnJlcGxhY2UoIC9eW14jXSojPyguKikkLywgJyQxJyApO1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gTWV0aG9kOiBqUXVlcnkuZm4uaGFzaGNoYW5nZVxyXG4gIC8vIFxyXG4gIC8vIEJpbmQgYSBoYW5kbGVyIHRvIHRoZSB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IG9yIHRyaWdnZXIgYWxsIGJvdW5kXHJcbiAgLy8gd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBoYW5kbGVycy4gVGhpcyBiZWhhdmlvciBpcyBjb25zaXN0ZW50IHdpdGhcclxuICAvLyBqUXVlcnkncyBidWlsdC1pbiBldmVudCBoYW5kbGVycy5cclxuICAvLyBcclxuICAvLyBVc2FnZTpcclxuICAvLyBcclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoIFsgaGFuZGxlciBdICk7XHJcbiAgLy8gXHJcbiAgLy8gQXJndW1lbnRzOlxyXG4gIC8vIFxyXG4gIC8vICBoYW5kbGVyIC0gKEZ1bmN0aW9uKSBPcHRpb25hbCBoYW5kbGVyIHRvIGJlIGJvdW5kIHRvIHRoZSBoYXNoY2hhbmdlXHJcbiAgLy8gICAgZXZlbnQuIFRoaXMgaXMgYSBcInNob3J0Y3V0XCIgZm9yIHRoZSBtb3JlIHZlcmJvc2UgZm9ybTpcclxuICAvLyAgICBqUXVlcnkod2luZG93KS5iaW5kKCAnaGFzaGNoYW5nZScsIGhhbmRsZXIgKS4gSWYgaGFuZGxlciBpcyBvbWl0dGVkLFxyXG4gIC8vICAgIGFsbCBib3VuZCB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IGhhbmRsZXJzIHdpbGwgYmUgdHJpZ2dlcmVkLiBUaGlzXHJcbiAgLy8gICAgaXMgYSBzaG9ydGN1dCBmb3IgdGhlIG1vcmUgdmVyYm9zZVxyXG4gIC8vICAgIGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApLiBUaGVzZSBmb3JtcyBhcmUgZGVzY3JpYmVkIGluXHJcbiAgLy8gICAgdGhlIDxoYXNoY2hhbmdlIGV2ZW50PiBzZWN0aW9uLlxyXG4gIC8vIFxyXG4gIC8vIFJldHVybnM6XHJcbiAgLy8gXHJcbiAgLy8gIChqUXVlcnkpIFRoZSBpbml0aWFsIGpRdWVyeSBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzLlxyXG4gIFxyXG4gIC8vIEFsbG93IHRoZSBcInNob3J0Y3V0XCIgZm9ybWF0ICQoZWxlbSkuaGFzaGNoYW5nZSggZm4gKSBmb3IgYmluZGluZyBhbmRcclxuICAvLyAkKGVsZW0pLmhhc2hjaGFuZ2UoKSBmb3IgdHJpZ2dlcmluZywgbGlrZSBqUXVlcnkgZG9lcyBmb3IgYnVpbHQtaW4gZXZlbnRzLlxyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0gPSBmdW5jdGlvbiggZm4gKSB7XHJcbiAgICByZXR1cm4gZm4gPyB0aGlzLmJpbmQoIHN0cl9oYXNoY2hhbmdlLCBmbiApIDogdGhpcy50cmlnZ2VyKCBzdHJfaGFzaGNoYW5nZSApO1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gUHJvcGVydHk6IGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRlbGF5XHJcbiAgLy8gXHJcbiAgLy8gVGhlIG51bWVyaWMgaW50ZXJ2YWwgKGluIG1pbGxpc2Vjb25kcykgYXQgd2hpY2ggdGhlIDxoYXNoY2hhbmdlIGV2ZW50PlxyXG4gIC8vIHBvbGxpbmcgbG9vcCBleGVjdXRlcy4gRGVmYXVsdHMgdG8gNTAuXHJcbiAgXHJcbiAgLy8gUHJvcGVydHk6IGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpblxyXG4gIC8vIFxyXG4gIC8vIElmIHlvdSdyZSBzZXR0aW5nIGRvY3VtZW50LmRvbWFpbiBpbiB5b3VyIEphdmFTY3JpcHQsIGFuZCB5b3Ugd2FudCBoYXNoXHJcbiAgLy8gaGlzdG9yeSB0byB3b3JrIGluIElFNi83LCBub3Qgb25seSBtdXN0IHRoaXMgcHJvcGVydHkgYmUgc2V0LCBidXQgeW91IG11c3RcclxuICAvLyBhbHNvIHNldCBkb2N1bWVudC5kb21haW4gQkVGT1JFIGpRdWVyeSBpcyBsb2FkZWQgaW50byB0aGUgcGFnZS4gVGhpc1xyXG4gIC8vIHByb3BlcnR5IGlzIG9ubHkgYXBwbGljYWJsZSBpZiB5b3UgYXJlIHN1cHBvcnRpbmcgSUU2LzcgKG9yIElFOCBvcGVyYXRpbmdcclxuICAvLyBpbiBcIklFNyBjb21wYXRpYmlsaXR5XCIgbW9kZSkuXHJcbiAgLy8gXHJcbiAgLy8gSW4gYWRkaXRpb24sIHRoZSA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjPiBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byB0aGVcclxuICAvLyBwYXRoIG9mIHRoZSBpbmNsdWRlZCBcImRvY3VtZW50LWRvbWFpbi5odG1sXCIgZmlsZSwgd2hpY2ggY2FuIGJlIHJlbmFtZWQgb3JcclxuICAvLyBtb2RpZmllZCBpZiBuZWNlc3NhcnkgKG5vdGUgdGhhdCB0aGUgZG9jdW1lbnQuZG9tYWluIHNwZWNpZmllZCBtdXN0IGJlIHRoZVxyXG4gIC8vIHNhbWUgaW4gYm90aCB5b3VyIG1haW4gSmF2YVNjcmlwdCBhcyB3ZWxsIGFzIGluIHRoaXMgZmlsZSkuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2U6XHJcbiAgLy8gXHJcbiAgLy8galF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluID0gZG9jdW1lbnQuZG9tYWluO1xyXG4gIFxyXG4gIC8vIFByb3BlcnR5OiBqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmNcclxuICAvLyBcclxuICAvLyBJZiwgZm9yIHNvbWUgcmVhc29uLCB5b3UgbmVlZCB0byBzcGVjaWZ5IGFuIElmcmFtZSBzcmMgZmlsZSAoZm9yIGV4YW1wbGUsXHJcbiAgLy8gd2hlbiBzZXR0aW5nIGRvY3VtZW50LmRvbWFpbiBhcyBpbiA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluPiksIHlvdSBjYW5cclxuICAvLyBkbyBzbyB1c2luZyB0aGlzIHByb3BlcnR5LiBOb3RlIHRoYXQgd2hlbiB1c2luZyB0aGlzIHByb3BlcnR5LCBoaXN0b3J5XHJcbiAgLy8gd29uJ3QgYmUgcmVjb3JkZWQgaW4gSUU2LzcgdW50aWwgdGhlIElmcmFtZSBzcmMgZmlsZSBsb2Fkcy4gVGhpcyBwcm9wZXJ0eVxyXG4gIC8vIGlzIG9ubHkgYXBwbGljYWJsZSBpZiB5b3UgYXJlIHN1cHBvcnRpbmcgSUU2LzcgKG9yIElFOCBvcGVyYXRpbmcgaW4gXCJJRTdcclxuICAvLyBjb21wYXRpYmlsaXR5XCIgbW9kZSkuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2U6XHJcbiAgLy8gXHJcbiAgLy8galF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjID0gJ3BhdGgvdG8vZmlsZS5odG1sJztcclxuICBcclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRlbGF5ID0gNTA7XHJcbiAgLypcclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRvbWFpbiA9IG51bGw7XHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5zcmMgPSBudWxsO1xyXG4gICovXHJcbiAgXHJcbiAgLy8gRXZlbnQ6IGhhc2hjaGFuZ2UgZXZlbnRcclxuICAvLyBcclxuICAvLyBGaXJlZCB3aGVuIGxvY2F0aW9uLmhhc2ggY2hhbmdlcy4gSW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGl0LCB0aGUgbmF0aXZlXHJcbiAgLy8gSFRNTDUgd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBpcyB1c2VkLCBvdGhlcndpc2UgYSBwb2xsaW5nIGxvb3AgaXNcclxuICAvLyBpbml0aWFsaXplZCwgcnVubmluZyBldmVyeSA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZGVsYXk+IG1pbGxpc2Vjb25kcyB0b1xyXG4gIC8vIHNlZSBpZiB0aGUgaGFzaCBoYXMgY2hhbmdlZC4gSW4gSUU2LzcgKGFuZCBJRTggb3BlcmF0aW5nIGluIFwiSUU3XHJcbiAgLy8gY29tcGF0aWJpbGl0eVwiIG1vZGUpLCBhIGhpZGRlbiBJZnJhbWUgaXMgY3JlYXRlZCB0byBhbGxvdyB0aGUgYmFjayBidXR0b25cclxuICAvLyBhbmQgaGFzaC1iYXNlZCBoaXN0b3J5IHRvIHdvcmsuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2UgYXMgZGVzY3JpYmVkIGluIDxqUXVlcnkuZm4uaGFzaGNoYW5nZT46XHJcbiAgLy8gXHJcbiAgLy8gPiAvLyBCaW5kIGFuIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCBmdW5jdGlvbihlKSB7XHJcbiAgLy8gPiAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcclxuICAvLyA+ICAgLi4uXHJcbiAgLy8gPiB9KTtcclxuICAvLyA+IFxyXG4gIC8vID4gLy8gTWFudWFsbHkgdHJpZ2dlciB0aGUgZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoKTtcclxuICAvLyBcclxuICAvLyBBIG1vcmUgdmVyYm9zZSB1c2FnZSB0aGF0IGFsbG93cyBmb3IgZXZlbnQgbmFtZXNwYWNpbmc6XHJcbiAgLy8gXHJcbiAgLy8gPiAvLyBCaW5kIGFuIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5iaW5kKCAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAvLyA+ICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xyXG4gIC8vID4gICAuLi5cclxuICAvLyA+IH0pO1xyXG4gIC8vID4gXHJcbiAgLy8gPiAvLyBNYW51YWxseSB0cmlnZ2VyIHRoZSBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykudHJpZ2dlciggJ2hhc2hjaGFuZ2UnICk7XHJcbiAgLy8gXHJcbiAgLy8gQWRkaXRpb25hbCBOb3RlczpcclxuICAvLyBcclxuICAvLyAqIFRoZSBwb2xsaW5nIGxvb3AgYW5kIElmcmFtZSBhcmUgbm90IGNyZWF0ZWQgdW50aWwgYXQgbGVhc3Qgb25lIGhhbmRsZXJcclxuICAvLyAgIGlzIGFjdHVhbGx5IGJvdW5kIHRvIHRoZSAnaGFzaGNoYW5nZScgZXZlbnQuXHJcbiAgLy8gKiBJZiB5b3UgbmVlZCB0aGUgYm91bmQgaGFuZGxlcihzKSB0byBleGVjdXRlIGltbWVkaWF0ZWx5LCBpbiBjYXNlcyB3aGVyZVxyXG4gIC8vICAgYSBsb2NhdGlvbi5oYXNoIGV4aXN0cyBvbiBwYWdlIGxvYWQsIHZpYSBib29rbWFyayBvciBwYWdlIHJlZnJlc2ggZm9yXHJcbiAgLy8gICBleGFtcGxlLCB1c2UgalF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSgpIG9yIHRoZSBtb3JlIHZlcmJvc2UgXHJcbiAgLy8gICBqUXVlcnkod2luZG93KS50cmlnZ2VyKCAnaGFzaGNoYW5nZScgKS5cclxuICAvLyAqIFRoZSBldmVudCBjYW4gYmUgYm91bmQgYmVmb3JlIERPTSByZWFkeSwgYnV0IHNpbmNlIGl0IHdvbid0IGJlIHVzYWJsZVxyXG4gIC8vICAgYmVmb3JlIHRoZW4gaW4gSUU2LzcgKGR1ZSB0byB0aGUgbmVjZXNzYXJ5IElmcmFtZSksIHJlY29tbWVuZGVkIHVzYWdlIGlzXHJcbiAgLy8gICB0byBiaW5kIGl0IGluc2lkZSBhIERPTSByZWFkeSBoYW5kbGVyLlxyXG4gIFxyXG4gIC8vIE92ZXJyaWRlIGV4aXN0aW5nICQuZXZlbnQuc3BlY2lhbC5oYXNoY2hhbmdlIG1ldGhvZHMgKGFsbG93aW5nIHRoaXMgcGx1Z2luXHJcbiAgLy8gdG8gYmUgZGVmaW5lZCBhZnRlciBqUXVlcnkgQkJRIGluIEJCUSdzIHNvdXJjZSBjb2RlKS5cclxuICBzcGVjaWFsWyBzdHJfaGFzaGNoYW5nZSBdID0gJC5leHRlbmQoIHNwZWNpYWxbIHN0cl9oYXNoY2hhbmdlIF0sIHtcclxuICAgIFxyXG4gICAgLy8gQ2FsbGVkIG9ubHkgd2hlbiB0aGUgZmlyc3QgJ2hhc2hjaGFuZ2UnIGV2ZW50IGlzIGJvdW5kIHRvIHdpbmRvdy5cclxuICAgIHNldHVwOiBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gSWYgd2luZG93Lm9uaGFzaGNoYW5nZSBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoZXJlJ3Mgbm90aGluZyB0byBkby4uXHJcbiAgICAgIGlmICggc3VwcG9ydHNfb25oYXNoY2hhbmdlICkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgXHJcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBjcmVhdGUgb3VyIG93bi4gQW5kIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGlzXHJcbiAgICAgIC8vIHVudGlsIHRoZSB1c2VyIGJpbmRzIHRvIHRoZSBldmVudCwganVzdCBpbiBjYXNlIHRoZXkgbmV2ZXIgZG8sIHNpbmNlIGl0XHJcbiAgICAgIC8vIHdpbGwgY3JlYXRlIGEgcG9sbGluZyBsb29wIGFuZCBwb3NzaWJseSBldmVuIGEgaGlkZGVuIElmcmFtZS5cclxuICAgICAgJCggZmFrZV9vbmhhc2hjaGFuZ2Uuc3RhcnQgKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIENhbGxlZCBvbmx5IHdoZW4gdGhlIGxhc3QgJ2hhc2hjaGFuZ2UnIGV2ZW50IGlzIHVuYm91bmQgZnJvbSB3aW5kb3cuXHJcbiAgICB0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIElmIHdpbmRvdy5vbmhhc2hjaGFuZ2UgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LCB0aGVyZSdzIG5vdGhpbmcgdG8gZG8uLlxyXG4gICAgICBpZiAoIHN1cHBvcnRzX29uaGFzaGNoYW5nZSApIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBPdGhlcndpc2UsIHdlIG5lZWQgdG8gc3RvcCBvdXJzIChpZiBwb3NzaWJsZSkuXHJcbiAgICAgICQoIGZha2Vfb25oYXNoY2hhbmdlLnN0b3AgKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIGZha2Vfb25oYXNoY2hhbmdlIGRvZXMgYWxsIHRoZSB3b3JrIG9mIHRyaWdnZXJpbmcgdGhlIHdpbmRvdy5vbmhhc2hjaGFuZ2VcclxuICAvLyBldmVudCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LCBpbmNsdWRpbmcgY3JlYXRpbmcgYVxyXG4gIC8vIHBvbGxpbmcgbG9vcCB0byB3YXRjaCBmb3IgaGFzaCBjaGFuZ2VzIGFuZCBpbiBJRSA2LzcgY3JlYXRpbmcgYSBoaWRkZW5cclxuICAvLyBJZnJhbWUgdG8gZW5hYmxlIGJhY2sgYW5kIGZvcndhcmQuXHJcbiAgZmFrZV9vbmhhc2hjaGFuZ2UgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0ge30sXHJcbiAgICAgIHRpbWVvdXRfaWQsXHJcbiAgICAgIFxyXG4gICAgICAvLyBSZW1lbWJlciB0aGUgaW5pdGlhbCBoYXNoIHNvIGl0IGRvZXNuJ3QgZ2V0IHRyaWdnZXJlZCBpbW1lZGlhdGVseS5cclxuICAgICAgbGFzdF9oYXNoID0gZ2V0X2ZyYWdtZW50KCksXHJcbiAgICAgIFxyXG4gICAgICBmbl9yZXR2YWwgPSBmdW5jdGlvbih2YWwpeyByZXR1cm4gdmFsOyB9LFxyXG4gICAgICBoaXN0b3J5X3NldCA9IGZuX3JldHZhbCxcclxuICAgICAgaGlzdG9yeV9nZXQgPSBmbl9yZXR2YWw7XHJcbiAgICBcclxuICAgIC8vIFN0YXJ0IHRoZSBwb2xsaW5nIGxvb3AuXHJcbiAgICBzZWxmLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRpbWVvdXRfaWQgfHwgcG9sbCgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gU3RvcCB0aGUgcG9sbGluZyBsb29wLlxyXG4gICAgc2VsZi5zdG9wID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRpbWVvdXRfaWQgJiYgY2xlYXJUaW1lb3V0KCB0aW1lb3V0X2lkICk7XHJcbiAgICAgIHRpbWVvdXRfaWQgPSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBUaGlzIHBvbGxpbmcgbG9vcCBjaGVja3MgZXZlcnkgJC5mbi5oYXNoY2hhbmdlLmRlbGF5IG1pbGxpc2Vjb25kcyB0byBzZWVcclxuICAgIC8vIGlmIGxvY2F0aW9uLmhhc2ggaGFzIGNoYW5nZWQsIGFuZCB0cmlnZ2VycyB0aGUgJ2hhc2hjaGFuZ2UnIGV2ZW50IG9uXHJcbiAgICAvLyB3aW5kb3cgd2hlbiBuZWNlc3NhcnkuXHJcbiAgICBmdW5jdGlvbiBwb2xsKCkge1xyXG4gICAgICB2YXIgaGFzaCA9IGdldF9mcmFnbWVudCgpLFxyXG4gICAgICAgIGhpc3RvcnlfaGFzaCA9IGhpc3RvcnlfZ2V0KCBsYXN0X2hhc2ggKTtcclxuICAgICAgXHJcbiAgICAgIGlmICggaGFzaCAhPT0gbGFzdF9oYXNoICkge1xyXG4gICAgICAgIGhpc3Rvcnlfc2V0KCBsYXN0X2hhc2ggPSBoYXNoLCBoaXN0b3J5X2hhc2ggKTtcclxuICAgICAgICBcclxuICAgICAgICAkKHdpbmRvdykudHJpZ2dlciggc3RyX2hhc2hjaGFuZ2UgKTtcclxuICAgICAgICBcclxuICAgICAgfSBlbHNlIGlmICggaGlzdG9yeV9oYXNoICE9PSBsYXN0X2hhc2ggKSB7XHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSggLyMuKi8sICcnICkgKyBoaXN0b3J5X2hhc2g7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRpbWVvdXRfaWQgPSBzZXRUaW1lb3V0KCBwb2xsLCAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRlbGF5ICk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZcclxuICAgIC8vIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYgUkVNT1ZFIElGIE5PVCBTVVBQT1JUSU5HIElFNi83LzggdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dlxyXG4gICAgLy8gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2XHJcbiAgICB3aW5kb3cuYXR0YWNoRXZlbnQgJiYgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmICFzdXBwb3J0c19vbmhhc2hjaGFuZ2UgJiYgKGZ1bmN0aW9uKCl7XHJcbiAgICAgIC8vIE5vdCBvbmx5IGRvIElFNi83IG5lZWQgdGhlIFwibWFnaWNhbFwiIElmcmFtZSB0cmVhdG1lbnQsIGJ1dCBzbyBkb2VzIElFOFxyXG4gICAgICAvLyB3aGVuIHJ1bm5pbmcgaW4gXCJJRTcgY29tcGF0aWJpbGl0eVwiIG1vZGUuXHJcbiAgICAgIFxyXG4gICAgICB2YXIgaWZyYW1lLFxyXG4gICAgICAgIGlmcmFtZV9zcmM7XHJcbiAgICAgIFxyXG4gICAgICAvLyBXaGVuIHRoZSBldmVudCBpcyBib3VuZCBhbmQgcG9sbGluZyBzdGFydHMgaW4gSUUgNi83LCBjcmVhdGUgYSBoaWRkZW5cclxuICAgICAgLy8gSWZyYW1lIGZvciBoaXN0b3J5IGhhbmRsaW5nLlxyXG4gICAgICBzZWxmLnN0YXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoICFpZnJhbWUgKSB7XHJcbiAgICAgICAgICBpZnJhbWVfc3JjID0gJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5zcmM7XHJcbiAgICAgICAgICBpZnJhbWVfc3JjID0gaWZyYW1lX3NyYyAmJiBpZnJhbWVfc3JjICsgZ2V0X2ZyYWdtZW50KCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIENyZWF0ZSBoaWRkZW4gSWZyYW1lLiBBdHRlbXB0IHRvIG1ha2UgSWZyYW1lIGFzIGhpZGRlbiBhcyBwb3NzaWJsZVxyXG4gICAgICAgICAgLy8gYnkgdXNpbmcgdGVjaG5pcXVlcyBmcm9tIGh0dHA6Ly93d3cucGFjaWVsbG9ncm91cC5jb20vYmxvZy8/cD02MDQuXHJcbiAgICAgICAgICBpZnJhbWUgPSAkKCc8aWZyYW1lIHRhYmluZGV4PVwiLTFcIiB0aXRsZT1cImVtcHR5XCIvPicpLmhpZGUoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2hlbiBJZnJhbWUgaGFzIGNvbXBsZXRlbHkgbG9hZGVkLCBpbml0aWFsaXplIHRoZSBoaXN0b3J5IGFuZFxyXG4gICAgICAgICAgICAvLyBzdGFydCBwb2xsaW5nLlxyXG4gICAgICAgICAgICAub25lKCAnbG9hZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgaWZyYW1lX3NyYyB8fCBoaXN0b3J5X3NldCggZ2V0X2ZyYWdtZW50KCkgKTtcclxuICAgICAgICAgICAgICBwb2xsKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBMb2FkIElmcmFtZSBzcmMgaWYgc3BlY2lmaWVkLCBvdGhlcndpc2Ugbm90aGluZy5cclxuICAgICAgICAgICAgLmF0dHIoICdzcmMnLCBpZnJhbWVfc3JjIHx8ICdqYXZhc2NyaXB0OjAnIClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBJZnJhbWUgYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgYm9keSB0byBwcmV2ZW50IHVubmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIC8vIGluaXRpYWwgcGFnZSBzY3JvbGxpbmcgKHllcywgdGhpcyB3b3JrcykuXHJcbiAgICAgICAgICAgIC5pbnNlcnRBZnRlciggJ2JvZHknIClbMF0uY29udGVudFdpbmRvdztcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gV2hlbmV2ZXIgYGRvY3VtZW50LnRpdGxlYCBjaGFuZ2VzLCB1cGRhdGUgdGhlIElmcmFtZSdzIHRpdGxlIHRvXHJcbiAgICAgICAgICAvLyBwcmV0dGlmeSB0aGUgYmFjay9uZXh0IGhpc3RvcnkgbWVudSBlbnRyaWVzLiBTaW5jZSBJRSBzb21ldGltZXNcclxuICAgICAgICAgIC8vIGVycm9ycyB3aXRoIFwiVW5zcGVjaWZpZWQgZXJyb3JcIiB0aGUgdmVyeSBmaXJzdCB0aW1lIHRoaXMgaXMgc2V0XHJcbiAgICAgICAgICAvLyAoeWVzLCB2ZXJ5IHVzZWZ1bCkgd3JhcCB0aGlzIHdpdGggYSB0cnkvY2F0Y2ggYmxvY2suXHJcbiAgICAgICAgICBkb2Mub25wcm9wZXJ0eWNoYW5nZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgaWYgKCBldmVudC5wcm9wZXJ0eU5hbWUgPT09ICd0aXRsZScgKSB7XHJcbiAgICAgICAgICAgICAgICBpZnJhbWUuZG9jdW1lbnQudGl0bGUgPSBkb2MudGl0bGU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgLy8gT3ZlcnJpZGUgdGhlIFwic3RvcFwiIG1ldGhvZCBzaW5jZSBhbiBJRTYvNyBJZnJhbWUgd2FzIGNyZWF0ZWQuIEV2ZW5cclxuICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGxvbmdlciBhbnkgYm91bmQgZXZlbnQgaGFuZGxlcnMsIHRoZSBwb2xsaW5nIGxvb3BcclxuICAgICAgLy8gaXMgc3RpbGwgbmVjZXNzYXJ5IGZvciBiYWNrL25leHQgdG8gd29yayBhdCBhbGwhXHJcbiAgICAgIHNlbGYuc3RvcCA9IGZuX3JldHZhbDtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBoaXN0b3J5IGJ5IGxvb2tpbmcgYXQgdGhlIGhpZGRlbiBJZnJhbWUncyBsb2NhdGlvbi5oYXNoLlxyXG4gICAgICBoaXN0b3J5X2dldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBnZXRfZnJhZ21lbnQoIGlmcmFtZS5sb2NhdGlvbi5ocmVmICk7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZXQgYSBuZXcgaGlzdG9yeSBpdGVtIGJ5IG9wZW5pbmcgYW5kIHRoZW4gY2xvc2luZyB0aGUgSWZyYW1lXHJcbiAgICAgIC8vIGRvY3VtZW50LCAqdGhlbiogc2V0dGluZyBpdHMgbG9jYXRpb24uaGFzaC4gSWYgZG9jdW1lbnQuZG9tYWluIGhhc1xyXG4gICAgICAvLyBiZWVuIHNldCwgdXBkYXRlIHRoYXQgYXMgd2VsbC5cclxuICAgICAgaGlzdG9yeV9zZXQgPSBmdW5jdGlvbiggaGFzaCwgaGlzdG9yeV9oYXNoICkge1xyXG4gICAgICAgIHZhciBpZnJhbWVfZG9jID0gaWZyYW1lLmRvY3VtZW50LFxyXG4gICAgICAgICAgZG9tYWluID0gJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kb21haW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCBoYXNoICE9PSBoaXN0b3J5X2hhc2ggKSB7XHJcbiAgICAgICAgICAvLyBVcGRhdGUgSWZyYW1lIHdpdGggYW55IGluaXRpYWwgYGRvY3VtZW50LnRpdGxlYCB0aGF0IG1pZ2h0IGJlIHNldC5cclxuICAgICAgICAgIGlmcmFtZV9kb2MudGl0bGUgPSBkb2MudGl0bGU7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIE9wZW5pbmcgdGhlIElmcmFtZSdzIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIGNsb3NlZCBpcyB3aGF0XHJcbiAgICAgICAgICAvLyBhY3R1YWxseSBhZGRzIGEgaGlzdG9yeSBlbnRyeS5cclxuICAgICAgICAgIGlmcmFtZV9kb2Mub3BlbigpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBTZXQgZG9jdW1lbnQuZG9tYWluIGZvciB0aGUgSWZyYW1lIGRvY3VtZW50IGFzIHdlbGwsIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAgIGRvbWFpbiAmJiBpZnJhbWVfZG9jLndyaXRlKCAnXFx4M2NzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJyArIGRvbWFpbiArICdcIlxceDNjL3NjcmlwdD4nICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmcmFtZV9kb2MuY2xvc2UoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBJZnJhbWUncyBoYXNoLCBmb3IgZ3JlYXQganVzdGljZS5cclxuICAgICAgICAgIGlmcmFtZS5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgfSkoKTtcclxuICAgIC8vIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxyXG4gICAgLy8gXl5eXl5eXl5eXl5eXl5eXl5eXiBSRU1PVkUgSUYgTk9UIFNVUFBPUlRJTkcgSUU2LzcvOCBeXl5eXl5eXl5eXl5eXl5eXl5eXHJcbiAgICAvLyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cclxuICAgIFxyXG4gICAgcmV0dXJuIHNlbGY7XHJcbiAgfSkoKTtcclxuICBcclxufSkoalF1ZXJ5LHRoaXMpO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcy4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cclxuXHR3aW5kb3cubWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhIHx8IChmdW5jdGlvbiggZG9jLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0dmFyIGJvb2wsXHJcblx0XHRcdGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50LFxyXG5cdFx0XHRyZWZOb2RlID0gZG9jRWxlbS5maXJzdEVsZW1lbnRDaGlsZCB8fCBkb2NFbGVtLmZpcnN0Q2hpbGQsXHJcblx0XHRcdC8vIGZha2VCb2R5IHJlcXVpcmVkIGZvciA8RkY0IHdoZW4gZXhlY3V0ZWQgaW4gPGhlYWQ+XHJcblx0XHRcdGZha2VCb2R5ID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiYm9keVwiICksXHJcblx0XHRcdGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblxyXG5cdFx0ZGl2LmlkID0gXCJtcS10ZXN0LTFcIjtcclxuXHRcdGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMGVtXCI7XHJcblx0XHRmYWtlQm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XHJcblx0XHRmYWtlQm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbihxKXtcclxuXHJcblx0XHRcdGRpdi5pbm5lckhUTUwgPSBcIiZzaHk7PHN0eWxlIG1lZGlhPVxcXCJcIiArIHEgKyBcIlxcXCI+ICNtcS10ZXN0LTEgeyB3aWR0aDogNDJweDsgfTwvc3R5bGU+XCI7XHJcblxyXG5cdFx0XHRkb2NFbGVtLmluc2VydEJlZm9yZSggZmFrZUJvZHksIHJlZk5vZGUgKTtcclxuXHRcdFx0Ym9vbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gNDI7XHJcblx0XHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGZha2VCb2R5ICk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdG1hdGNoZXM6IGJvb2wsXHJcblx0XHRcdFx0bWVkaWE6IHFcclxuXHRcdFx0fTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9KCBkb2N1bWVudCApKTtcclxuXHJcblx0Ly8gJC5tb2JpbGUubWVkaWEgdXNlcyBtYXRjaE1lZGlhIHRvIHJldHVybiBhIGJvb2xlYW4uXHJcblx0JC5tb2JpbGUubWVkaWEgPSBmdW5jdGlvbiggcSApIHtcclxuXHRcdHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYSggcSApLm1hdGNoZXM7XHJcblx0fTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcblxyXG5cdChmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdFx0dmFyIHN1cHBvcnQgPSB7XHJcblx0XHRcdHRvdWNoOiBcIm9udG91Y2hlbmRcIiBpbiBkb2N1bWVudFxyXG5cdFx0fTtcclxuXHJcblx0XHQkLm1vYmlsZS5zdXBwb3J0ID0gJC5tb2JpbGUuc3VwcG9ydCB8fCB7fTtcclxuXHRcdCQuZXh0ZW5kKCAkLnN1cHBvcnQsIHN1cHBvcnQgKTtcclxuXHRcdCQuZXh0ZW5kKCAkLm1vYmlsZS5zdXBwb3J0LCBzdXBwb3J0ICk7XHJcblx0fSggalF1ZXJ5ICkpO1xyXG5cclxuXHQoZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHRcdCQuZXh0ZW5kKCAkLnN1cHBvcnQsIHtcclxuXHRcdFx0b3JpZW50YXRpb246IFwib3JpZW50YXRpb25cIiBpbiB3aW5kb3cgJiYgXCJvbm9yaWVudGF0aW9uY2hhbmdlXCIgaW4gd2luZG93XHJcblx0XHR9KTtcclxuXHR9KCBqUXVlcnkgKSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIHRoeCBNb2Rlcm5penJcclxuZnVuY3Rpb24gcHJvcEV4aXN0cyggcHJvcCApIHtcclxuXHR2YXIgdWNfcHJvcCA9IHByb3AuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIHByb3Auc3Vic3RyKCAxICksXHJcblx0XHRwcm9wcyA9ICggcHJvcCArIFwiIFwiICsgdmVuZG9ycy5qb2luKCB1Y19wcm9wICsgXCIgXCIgKSArIHVjX3Byb3AgKS5zcGxpdCggXCIgXCIgKSxcclxuXHRcdHY7XHJcblxyXG5cdGZvciAoIHYgaW4gcHJvcHMgKSB7XHJcblx0XHRpZiAoIGZiQ1NTWyBwcm9wc1sgdiBdIF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG52YXIgZmFrZUJvZHkgPSAkKCBcIjxib2R5PlwiICkucHJlcGVuZFRvKCBcImh0bWxcIiApLFxyXG5cdGZiQ1NTID0gZmFrZUJvZHlbIDAgXS5zdHlsZSxcclxuXHR2ZW5kb3JzID0gWyBcIldlYmtpdFwiLCBcIk1velwiLCBcIk9cIiBdLFxyXG5cdHdlYm9zID0gXCJwYWxtR2V0UmVzb3VyY2VcIiBpbiB3aW5kb3csIC8vb25seSB1c2VkIHRvIHJ1bGUgb3V0IHNjcm9sbFRvcFxyXG5cdG9wZXJhbWluaSA9IHdpbmRvdy5vcGVyYW1pbmkgJiYgKHt9KS50b1N0cmluZy5jYWxsKCB3aW5kb3cub3BlcmFtaW5pICkgPT09IFwiW29iamVjdCBPcGVyYU1pbmldXCIsXHJcblx0YmIgPSB3aW5kb3cuYmxhY2tiZXJyeSAmJiAhcHJvcEV4aXN0cyggXCItd2Via2l0LXRyYW5zZm9ybVwiICksIC8vb25seSB1c2VkIHRvIHJ1bGUgb3V0IGJveCBzaGFkb3csIGFzIGl0J3MgZmlsbGVkIG9wYXF1ZSBvbiBCQiA1IGFuZCBsb3dlclxyXG5cdG5va2lhTFRFN18zO1xyXG5cclxuLy8gaW5saW5lIFNWRyBzdXBwb3J0IHRlc3RcclxuZnVuY3Rpb24gaW5saW5lU1ZHKCkge1xyXG5cdC8vIFRoYW5rcyBNb2Rlcm5penIgJiBFcmlrIERhaGxzdHJvbVxyXG5cdHZhciB3ID0gd2luZG93LFxyXG5cdFx0c3ZnID0gISF3LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhIXcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIgKS5jcmVhdGVTVkdSZWN0ICYmICEoIHcub3BlcmEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkNocm9tZVwiICkgPT09IC0xICksXHJcblx0XHRzdXBwb3J0ID0gZnVuY3Rpb24oIGRhdGEgKSB7XHJcblx0XHRcdGlmICggISggZGF0YSAmJiBzdmcgKSApIHtcclxuXHRcdFx0XHQkKCBcImh0bWxcIiApLmFkZENsYXNzKCBcInVpLW5vc3ZnXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGltZyA9IG5ldyB3LkltYWdlKCk7XHJcblxyXG5cdGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcblx0XHRzdXBwb3J0KCBmYWxzZSApO1xyXG5cdH07XHJcblx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0c3VwcG9ydCggaW1nLndpZHRoID09PSAxICYmIGltZy5oZWlnaHQgPT09IDEgKTtcclxuXHR9O1xyXG5cdGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIjtcclxufVxyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtM2RUZXN0KCkge1xyXG5cdHZhciBtcVByb3AgPSBcInRyYW5zZm9ybS0zZFwiLFxyXG5cdFx0Ly8gQmVjYXVzZSB0aGUgYHRyYW5zbGF0ZTNkYCB0ZXN0IGJlbG93IHRocm93cyBmYWxzZSBwb3NpdGl2ZXMgaW4gQW5kcm9pZDpcclxuXHRcdHJldCA9ICQubW9iaWxlLm1lZGlhKCBcIigtXCIgKyB2ZW5kb3JzLmpvaW4oIFwiLVwiICsgbXFQcm9wICsgXCIpLCgtXCIgKSArIFwiLVwiICsgbXFQcm9wICsgXCIpLChcIiArIG1xUHJvcCArIFwiKVwiICksXHJcblx0XHRlbCwgdHJhbnNmb3JtcywgdDtcclxuXHJcblx0aWYgKCByZXQgKSB7XHJcblx0XHRyZXR1cm4gISFyZXQ7XHJcblx0fVxyXG5cclxuXHRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHR0cmFuc2Zvcm1zID0ge1xyXG5cdFx0Ly8gV2XigJlyZSBvbWl0dGluZyBPcGVyYSBmb3IgdGhlIHRpbWUgYmVpbmc7IE1TIHVzZXMgdW5wcmVmaXhlZC5cclxuXHRcdFwiTW96VHJhbnNmb3JtXCI6IFwiLW1vei10cmFuc2Zvcm1cIixcclxuXHRcdFwidHJhbnNmb3JtXCI6IFwidHJhbnNmb3JtXCJcclxuXHR9O1xyXG5cclxuXHRmYWtlQm9keS5hcHBlbmQoIGVsICk7XHJcblxyXG5cdGZvciAoIHQgaW4gdHJhbnNmb3JtcyApIHtcclxuXHRcdGlmICggZWwuc3R5bGVbIHQgXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbC5zdHlsZVsgdCBdID0gXCJ0cmFuc2xhdGUzZCggMTAwcHgsIDFweCwgMXB4IClcIjtcclxuXHRcdFx0cmV0ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsICkuZ2V0UHJvcGVydHlWYWx1ZSggdHJhbnNmb3Jtc1sgdCBdICk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAoICEhcmV0ICYmIHJldCAhPT0gXCJub25lXCIgKTtcclxufVxyXG5cclxuLy8gVGVzdCBmb3IgZHluYW1pYy11cGRhdGluZyBiYXNlIHRhZyBzdXBwb3J0ICggYWxsb3dzIHVzIHRvIGF2b2lkIGhyZWYsc3JjIGF0dHIgcmV3cml0aW5nIClcclxuZnVuY3Rpb24gYmFzZVRhZ1Rlc3QoKSB7XHJcblx0dmFyIGZhdXhCYXNlID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWUgKyBcInVpLWRpci9cIixcclxuXHRcdGJhc2UgPSAkKCBcImhlYWQgYmFzZVwiICksXHJcblx0XHRmYXV4RWxlID0gbnVsbCxcclxuXHRcdGhyZWYgPSBcIlwiLFxyXG5cdFx0bGluaywgcmViYXNlO1xyXG5cclxuXHRpZiAoICFiYXNlLmxlbmd0aCApIHtcclxuXHRcdGJhc2UgPSBmYXV4RWxlID0gJCggXCI8YmFzZT5cIiwgeyBcImhyZWZcIjogZmF1eEJhc2UgfSkuYXBwZW5kVG8oIFwiaGVhZFwiICk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGhyZWYgPSBiYXNlLmF0dHIoIFwiaHJlZlwiICk7XHJcblx0fVxyXG5cclxuXHRsaW5rID0gJCggXCI8YSBocmVmPSd0ZXN0dXJsJyAvPlwiICkucHJlcGVuZFRvKCBmYWtlQm9keSApO1xyXG5cdHJlYmFzZSA9IGxpbmtbIDAgXS5ocmVmO1xyXG5cdGJhc2VbIDAgXS5ocmVmID0gaHJlZiB8fCBsb2NhdGlvbi5wYXRobmFtZTtcclxuXHJcblx0aWYgKCBmYXV4RWxlICkge1xyXG5cdFx0ZmF1eEVsZS5yZW1vdmUoKTtcclxuXHR9XHJcblx0cmV0dXJuIHJlYmFzZS5pbmRleE9mKCBmYXV4QmFzZSApID09PSAwO1xyXG59XHJcblxyXG4vLyBUaGFua3MgTW9kZXJuaXpyXHJcbmZ1bmN0aW9uIGNzc1BvaW50ZXJFdmVudHNUZXN0KCkge1xyXG5cdHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ4XCIgKSxcclxuXHRcdGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcclxuXHRcdGdldENvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxcclxuXHRcdHN1cHBvcnRzO1xyXG5cclxuXHRpZiAoICEoIFwicG9pbnRlckV2ZW50c1wiIGluIGVsZW1lbnQuc3R5bGUgKSApIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xyXG5cdGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwieFwiO1xyXG5cdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggZWxlbWVudCApO1xyXG5cdHN1cHBvcnRzID0gZ2V0Q29tcHV0ZWRTdHlsZSAmJlxyXG5cdGdldENvbXB1dGVkU3R5bGUoIGVsZW1lbnQsIFwiXCIgKS5wb2ludGVyRXZlbnRzID09PSBcImF1dG9cIjtcclxuXHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGVsZW1lbnQgKTtcclxuXHRyZXR1cm4gISFzdXBwb3J0cztcclxufVxyXG5cclxuZnVuY3Rpb24gYm91bmRpbmdSZWN0KCkge1xyXG5cdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0cmV0dXJuIHR5cGVvZiBkaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSBcInVuZGVmaW5lZFwiO1xyXG59XHJcblxyXG4vLyBub24tVUEtYmFzZWQgSUUgdmVyc2lvbiBjaGVjayBieSBKYW1lcyBQYWRvbHNleSwgbW9kaWZpZWQgYnkgamRhbHRvbiAtIGZyb20gaHR0cDovL2dpc3QuZ2l0aHViLmNvbS81Mjc2ODNcclxuLy8gYWxsb3dzIGZvciBpbmNsdXNpb24gb2YgSUUgNissIGluY2x1ZGluZyBXaW5kb3dzIE1vYmlsZSA3XHJcbiQuZXh0ZW5kKCAkLm1vYmlsZSwgeyBicm93c2VyOiB7fSB9ICk7XHJcbiQubW9iaWxlLmJyb3dzZXIub2xkSUUgPSAoZnVuY3Rpb24oKSB7XHJcblx0dmFyIHYgPSAzLFxyXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxyXG5cdFx0YSA9IGRpdi5hbGwgfHwgW107XHJcblxyXG5cdGRvIHtcclxuXHRcdGRpdi5pbm5lckhUTUwgPSBcIjwhLS1baWYgZ3QgSUUgXCIgKyAoICsrdiApICsgXCJdPjxicj48IVtlbmRpZl0tLT5cIjtcclxuXHR9IHdoaWxlKCBhWzBdICk7XHJcblxyXG5cdHJldHVybiB2ID4gNCA/IHYgOiAhdjtcclxufSkoKTtcclxuXHJcbmZ1bmN0aW9uIGZpeGVkUG9zaXRpb24oKSB7XHJcblx0dmFyIHcgPSB3aW5kb3csXHJcblx0XHR1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHRwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybSxcclxuXHRcdC8vIFJlbmRlcmluZyBlbmdpbmUgaXMgV2Via2l0LCBhbmQgY2FwdHVyZSBtYWpvciB2ZXJzaW9uXHJcblx0XHR3a21hdGNoID0gdWEubWF0Y2goIC9BcHBsZVdlYktpdFxcLyhbMC05XSspLyApLFxyXG5cdFx0d2t2ZXJzaW9uID0gISF3a21hdGNoICYmIHdrbWF0Y2hbIDEgXSxcclxuXHRcdGZmbWF0Y2ggPSB1YS5tYXRjaCggL0Zlbm5lY1xcLyhbMC05XSspLyApLFxyXG5cdFx0ZmZ2ZXJzaW9uID0gISFmZm1hdGNoICYmIGZmbWF0Y2hbIDEgXSxcclxuXHRcdG9wZXJhbW1vYmlsZW1hdGNoID0gdWEubWF0Y2goIC9PcGVyYSBNb2JpXFwvKFswLTldKykvICksXHJcblx0XHRvbXZlcnNpb24gPSAhIW9wZXJhbW1vYmlsZW1hdGNoICYmIG9wZXJhbW1vYmlsZW1hdGNoWyAxIF07XHJcblxyXG5cdGlmIChcclxuXHRcdC8vIGlPUyA0LjMgYW5kIG9sZGVyIDogUGxhdGZvcm0gaXMgaVBob25lL1BhZC9Ub3VjaCBhbmQgV2Via2l0IHZlcnNpb24gaXMgbGVzcyB0aGFuIDUzNCAoaW9zNSlcclxuXHRcdCggKCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQaG9uZVwiICkgPiAtMSB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQYWRcIiApID4gLTEgIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBvZFwiICkgPiAtMSApICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzQgKSB8fFxyXG5cdFx0Ly8gT3BlcmEgTWluaVxyXG5cdFx0KCB3Lm9wZXJhbWluaSAmJiAoe30pLnRvU3RyaW5nLmNhbGwoIHcub3BlcmFtaW5pICkgPT09IFwiW29iamVjdCBPcGVyYU1pbmldXCIgKSB8fFxyXG5cdFx0KCBvcGVyYW1tb2JpbGVtYXRjaCAmJiBvbXZlcnNpb24gPCA3NDU4IClcdHx8XHJcblx0XHQvL0FuZHJvaWQgbHRlIDIuMTogUGxhdGZvcm0gaXMgQW5kcm9pZCBhbmQgV2Via2l0IHZlcnNpb24gaXMgbGVzcyB0aGFuIDUzMyAoQW5kcm9pZCAyLjIpXHJcblx0XHQoIHVhLmluZGV4T2YoIFwiQW5kcm9pZFwiICkgPiAtMSAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTMzICkgfHxcclxuXHRcdC8vIEZpcmVmb3ggTW9iaWxlIGJlZm9yZSA2LjAgLVxyXG5cdFx0KCBmZnZlcnNpb24gJiYgZmZ2ZXJzaW9uIDwgNiApIHx8XHJcblx0XHQvLyBXZWJPUyBsZXNzIHRoYW4gM1xyXG5cdFx0KCBcInBhbG1HZXRSZXNvdXJjZVwiIGluIHdpbmRvdyAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0IClcdHx8XHJcblx0XHQvLyBNZWVHb1xyXG5cdFx0KCB1YS5pbmRleE9mKCBcIk1lZUdvXCIgKSA+IC0xICYmIHVhLmluZGV4T2YoIFwiTm9raWFCcm93c2VyLzguNS4wXCIgKSA+IC0xICkgKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuJC5leHRlbmQoICQuc3VwcG9ydCwge1xyXG5cdC8vIE5vdGUsIENocm9tZSBmb3IgaU9TIGhhcyBhbiBleHRyZW1lbHkgcXVpcmt5IGltcGxlbWVudGF0aW9uIG9mIHBvcHN0YXRlLlxyXG5cdC8vIFdlJ3ZlIGNob3NlbiB0byB0YWtlIHRoZSBzaG9ydGVzdCBwYXRoIHRvIGEgYnVnIGZpeCBoZXJlIGZvciBpc3N1ZSAjNTQyNlxyXG5cdC8vIFNlZSB0aGUgZm9sbG93aW5nIGxpbmsgZm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWdleCBjaG9zZW5cclxuXHQvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9jaHJvbWUvbW9iaWxlL2RvY3MvdXNlci1hZ2VudCNjaHJvbWVfZm9yX2lvc191c2VyLWFnZW50XHJcblx0cHVzaFN0YXRlOiBcInB1c2hTdGF0ZVwiIGluIGhpc3RvcnkgJiZcclxuXHRcdFwicmVwbGFjZVN0YXRlXCIgaW4gaGlzdG9yeSAmJlxyXG5cdFx0Ly8gV2hlbiBydW5uaW5nIGluc2lkZSBhIEZGIGlmcmFtZSwgY2FsbGluZyByZXBsYWNlU3RhdGUgY2F1c2VzIGFuIGVycm9yXHJcblx0XHQhKCB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkZpcmVmb3hcIiApID49IDAgJiYgd2luZG93LnRvcCAhPT0gd2luZG93ICkgJiZcclxuXHRcdCggd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9DcmlPUy8pID09PSAtMSApLFxyXG5cclxuXHRtZWRpYXF1ZXJ5OiAkLm1vYmlsZS5tZWRpYSggXCJvbmx5IGFsbFwiICksXHJcblx0Y3NzUHNldWRvRWxlbWVudDogISFwcm9wRXhpc3RzKCBcImNvbnRlbnRcIiApLFxyXG5cdHRvdWNoT3ZlcmZsb3c6ICEhcHJvcEV4aXN0cyggXCJvdmVyZmxvd1Njcm9sbGluZ1wiICksXHJcblx0Y3NzVHJhbnNmb3JtM2Q6IHRyYW5zZm9ybTNkVGVzdCgpLFxyXG5cdGJveFNoYWRvdzogISFwcm9wRXhpc3RzKCBcImJveFNoYWRvd1wiICkgJiYgIWJiLFxyXG5cdGZpeGVkUG9zaXRpb246IGZpeGVkUG9zaXRpb24oKSxcclxuXHRzY3JvbGxUb3A6IChcInBhZ2VYT2Zmc2V0XCIgaW4gd2luZG93IHx8XHJcblx0XHRcInNjcm9sbFRvcFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fFxyXG5cdFx0XCJzY3JvbGxUb3BcIiBpbiBmYWtlQm9keVsgMCBdKSAmJiAhd2Vib3MgJiYgIW9wZXJhbWluaSxcclxuXHJcblx0ZHluYW1pY0Jhc2VUYWc6IGJhc2VUYWdUZXN0KCksXHJcblx0Y3NzUG9pbnRlckV2ZW50czogY3NzUG9pbnRlckV2ZW50c1Rlc3QoKSxcclxuXHRib3VuZGluZ1JlY3Q6IGJvdW5kaW5nUmVjdCgpLFxyXG5cdGlubGluZVNWRzogaW5saW5lU1ZHXHJcbn0pO1xyXG5cclxuZmFrZUJvZHkucmVtb3ZlKCk7XHJcblxyXG4vLyAkLm1vYmlsZS5hamF4QmxhY2tsaXN0IGlzIHVzZWQgdG8gb3ZlcnJpZGUgYWpheEVuYWJsZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBrbm93biBjb25mbGljdHMgd2l0aCBoYXNoIGhpc3RvcnkgdXBkYXRlcyAoQkI1LCBTeW1iaWFuKVxyXG4vLyBvciB0aGF0IGdlbmVyYWxseSB3b3JrIGJldHRlciBicm93c2luZyBpbiByZWd1bGFyIGh0dHAgZm9yIGZ1bGwgcGFnZSByZWZyZXNoZXMgKE9wZXJhIE1pbmkpXHJcbi8vIE5vdGU6IFRoaXMgZGV0ZWN0aW9uIGJlbG93IGlzIHVzZWQgYXMgYSBsYXN0IHJlc29ydC5cclxuLy8gV2UgcmVjb21tZW5kIG9ubHkgdXNpbmcgdGhlc2UgZGV0ZWN0aW9uIG1ldGhvZHMgd2hlbiBhbGwgb3RoZXIgbW9yZSByZWxpYWJsZS9mb3J3YXJkLWxvb2tpbmcgYXBwcm9hY2hlcyBhcmUgbm90IHBvc3NpYmxlXHJcbm5va2lhTFRFN18zID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuXHR2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcblx0Ly9UaGUgZm9sbG93aW5nIGlzIGFuIGF0dGVtcHQgdG8gbWF0Y2ggTm9raWEgYnJvd3NlcnMgdGhhdCBhcmUgcnVubmluZyBTeW1iaWFuL3M2MCwgd2l0aCB3ZWJraXQsIHZlcnNpb24gNy4zIG9yIG9sZGVyXHJcblx0cmV0dXJuIHVhLmluZGV4T2YoIFwiTm9raWFcIiApID4gLTEgJiZcclxuXHRcdFx0KCB1YS5pbmRleE9mKCBcIlN5bWJpYW4vM1wiICkgPiAtMSB8fCB1YS5pbmRleE9mKCBcIlNlcmllczYwLzVcIiApID4gLTEgKSAmJlxyXG5cdFx0XHR1YS5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xICYmXHJcblx0XHRcdHVhLm1hdGNoKCAvKEJyb3dzZXJOR3xOb2tpYUJyb3dzZXIpXFwvN1xcLlswLTNdLyApO1xyXG59KSgpO1xyXG5cclxuLy8gU3VwcG9ydCBjb25kaXRpb25zIHRoYXQgbXVzdCBiZSBtZXQgaW4gb3JkZXIgdG8gcHJvY2VlZFxyXG4vLyBkZWZhdWx0IGVuaGFuY2VkIHF1YWxpZmljYXRpb25zIGFyZSBtZWRpYSBxdWVyeSBzdXBwb3J0IE9SIElFIDcrXHJcblxyXG4kLm1vYmlsZS5ncmFkZUEgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gKCAoICQuc3VwcG9ydC5tZWRpYXF1ZXJ5ICYmICQuc3VwcG9ydC5jc3NQc2V1ZG9FbGVtZW50ICkgfHwgJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSAmJiAkLm1vYmlsZS5icm93c2VyLm9sZElFID49IDggKSAmJiAoICQuc3VwcG9ydC5ib3VuZGluZ1JlY3QgfHwgJC5mbi5qcXVlcnkubWF0Y2goLzFcXC5bMC03K11cXC5bMC05K10/LykgIT09IG51bGwgKTtcclxufTtcclxuXHJcbiQubW9iaWxlLmFqYXhCbGFja2xpc3QgPVxyXG5cdFx0XHQvLyBCbGFja0JlcnJ5IGJyb3dzZXJzLCBwcmUtd2Via2l0XHJcblx0XHRcdHdpbmRvdy5ibGFja2JlcnJ5ICYmICF3aW5kb3cuV2ViS2l0UG9pbnQgfHxcclxuXHRcdFx0Ly8gT3BlcmEgTWluaVxyXG5cdFx0XHRvcGVyYW1pbmkgfHxcclxuXHRcdFx0Ly8gU3ltYmlhbiB3ZWJraXRzIHByZSA3LjNcclxuXHRcdFx0bm9raWFMVEU3XzM7XHJcblxyXG4vLyBMYXN0bHksIHRoaXMgd29ya2Fyb3VuZCBpcyB0aGUgb25seSB3YXkgd2UndmUgZm91bmQgc28gZmFyIHRvIGdldCBwcmUgNy4zIFN5bWJpYW4gd2Via2l0IGRldmljZXNcclxuLy8gdG8gcmVuZGVyIHRoZSBzdHlsZXNoZWV0cyB3aGVuIHRoZXkncmUgcmVmZXJlbmNlZCBiZWZvcmUgdGhpcyBzY3JpcHQsIGFzIHdlJ2QgcmVjb21tZW5kIGRvaW5nLlxyXG4vLyBUaGlzIHNpbXBseSByZWFwcGVuZHMgdGhlIENTUyBpbiBwbGFjZSwgd2hpY2ggZm9yIHNvbWUgcmVhc29uIG1ha2VzIGl0IGFwcGx5XHJcbmlmICggbm9raWFMVEU3XzMgKSB7XHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdCQoIFwiaGVhZCBsaW5rW3JlbD0nc3R5bGVzaGVldCddXCIgKS5hdHRyKCBcInJlbFwiLCBcImFsdGVybmF0ZSBzdHlsZXNoZWV0XCIgKS5hdHRyKCBcInJlbFwiLCBcInN0eWxlc2hlZXRcIiApO1xyXG5cdH0pO1xyXG59XHJcblxyXG4vLyBGb3IgcnVsaW5nIG91dCBzaGFkb3dzIHZpYSBjc3NcclxuaWYgKCAhJC5zdXBwb3J0LmJveFNoYWRvdyApIHtcclxuXHQkKCBcImh0bWxcIiApLmFkZENsYXNzKCBcInVpLW5vYm94c2hhZG93XCIgKTtcclxufVxyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdHZhciAkd2luID0gJC5tb2JpbGUud2luZG93LCBzZWxmLFxyXG5cdFx0ZHVtbXlGblRvSW5pdE5hdmlnYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHR9O1xyXG5cclxuXHQkLmV2ZW50LnNwZWNpYWwuYmVmb3JlbmF2aWdhdGUgPSB7XHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCR3aW4ub24oIFwibmF2aWdhdGVcIiwgZHVtbXlGblRvSW5pdE5hdmlnYXRlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JHdpbi5vZmYoIFwibmF2aWdhdGVcIiwgZHVtbXlGblRvSW5pdE5hdmlnYXRlICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlID0gc2VsZiA9IHtcclxuXHRcdGJvdW5kOiBmYWxzZSxcclxuXHJcblx0XHRwdXNoU3RhdGVFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdG9yaWdpbmFsRXZlbnROYW1lOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0Ly8gSWYgcHVzaHN0YXRlIHN1cHBvcnQgaXMgcHJlc2VudCBhbmQgcHVzaCBzdGF0ZSBzdXBwb3J0IGlzIGRlZmluZWQgdG9cclxuXHRcdC8vIGJlIHRydWUgb24gdGhlIG1vYmlsZSBuYW1lc3BhY2UuXHJcblx0XHRpc1B1c2hTdGF0ZUVuYWJsZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5zdXBwb3J0LnB1c2hTdGF0ZSAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnB1c2hTdGF0ZUVuYWJsZWQgPT09IHRydWUgJiZcclxuXHRcdFx0XHR0aGlzLmlzSGFzaENoYW5nZUVuYWJsZWQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gISEgYXNzdW1lcyBtb2JpbGUgbmFtZXNwYWNlIGlzIHByZXNlbnRcclxuXHRcdGlzSGFzaENoYW5nZUVuYWJsZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgPT09IHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gYSBsb3Qgb2YgZHVwbGljYXRpb24gYmV0d2VlbiBwb3BzdGF0ZSBhbmQgaGFzaGNoYW5nZVxyXG5cdFx0cG9wc3RhdGU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIG5ld0V2ZW50ID0gbmV3ICQuRXZlbnQoIFwibmF2aWdhdGVcIiApLFxyXG5cdFx0XHRcdGJlZm9yZU5hdmlnYXRlID0gbmV3ICQuRXZlbnQoIFwiYmVmb3JlbmF2aWdhdGVcIiApLFxyXG5cdFx0XHRcdHN0YXRlID0gZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSB8fCB7fTtcclxuXHJcblx0XHRcdGJlZm9yZU5hdmlnYXRlLm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHRcdFx0JHdpbi50cmlnZ2VyKCBiZWZvcmVOYXZpZ2F0ZSApO1xyXG5cclxuXHRcdFx0aWYgKCBiZWZvcmVOYXZpZ2F0ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZXZlbnQuaGlzdG9yeVN0YXRlICkge1xyXG5cdFx0XHRcdCQuZXh0ZW5kKHN0YXRlLCBldmVudC5oaXN0b3J5U3RhdGUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIG9yaWdpbmFsIGV2ZW50IGlzIHRyYWNrZWQgZm9yIHRoZSBlbmRcclxuXHRcdFx0Ly8gdXNlciB0byBpbnNwZWN0IGluY2FzZSB0aGV5IHdhbnQgdG8gZG8gc29tZXRoaW5nIHNwZWNpYWxcclxuXHRcdFx0bmV3RXZlbnQub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cclxuXHRcdFx0Ly8gTk9URSB3ZSBsZXQgdGhlIGN1cnJlbnQgc3RhY2sgdW53aW5kIGJlY2F1c2UgYW55IGFzc2lnbm1lbnQgdG9cclxuXHRcdFx0Ly8gICAgICBsb2NhdGlvbi5oYXNoIHdpbGwgc3RvcCB0aGUgd29ybGQgYW5kIHJ1biB0aGlzIGV2ZW50IGhhbmRsZXIuIEJ5XHJcblx0XHRcdC8vICAgICAgZG9pbmcgdGhpcyB3ZSBjcmVhdGUgYSBzaW1pbGFyIGJlaGF2aW9yIHRvIGhhc2hjaGFuZ2Ugb24gaGFzaFxyXG5cdFx0XHQvLyAgICAgIGFzc2lnbm1lbnRcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkd2luLnRyaWdnZXIoIG5ld0V2ZW50LCB7XHJcblx0XHRcdFx0XHRzdGF0ZTogc3RhdGVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSwgMCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhc2hjaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCAvKiwgZGF0YSAqLyApIHtcclxuXHRcdFx0dmFyIG5ld0V2ZW50ID0gbmV3ICQuRXZlbnQoIFwibmF2aWdhdGVcIiApLFxyXG5cdFx0XHRcdGJlZm9yZU5hdmlnYXRlID0gbmV3ICQuRXZlbnQoIFwiYmVmb3JlbmF2aWdhdGVcIiApO1xyXG5cclxuXHRcdFx0YmVmb3JlTmF2aWdhdGUub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cdFx0XHQkd2luLnRyaWdnZXIoIGJlZm9yZU5hdmlnYXRlICk7XHJcblxyXG5cdFx0XHRpZiAoIGJlZm9yZU5hdmlnYXRlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBvcmlnaW5hbCBldmVudCBpcyB0cmFja2VkIGZvciB0aGUgZW5kXHJcblx0XHRcdC8vIHVzZXIgdG8gaW5zcGVjdCBpbmNhc2UgdGhleSB3YW50IHRvIGRvIHNvbWV0aGluZyBzcGVjaWFsXHJcblx0XHRcdG5ld0V2ZW50Lm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHJcblx0XHRcdC8vIFRyaWdnZXIgdGhlIGhhc2hjaGFuZ2Ugd2l0aCBzdGF0ZSBwcm92aWRlZCBieSB0aGUgdXNlclxyXG5cdFx0XHQvLyB0aGF0IGFsdGVyZWQgdGhlIGhhc2hcclxuXHRcdFx0JHdpbi50cmlnZ2VyKCBuZXdFdmVudCwge1xyXG5cdFx0XHRcdC8vIFVzZXJzIHRoYXQgd2FudCB0byBmdWxseSBub3JtYWxpemUgdGhlIHR3byBldmVudHNcclxuXHRcdFx0XHQvLyB3aWxsIG5lZWQgdG8gZG8gaGlzdG9yeSBtYW5hZ2VtZW50IGRvd24gdGhlIHN0YWNrIGFuZFxyXG5cdFx0XHRcdC8vIGFkZCB0aGUgc3RhdGUgdG8gdGhlIGV2ZW50IGJlZm9yZSB0aGlzIGJpbmRpbmcgaXMgZmlyZWRcclxuXHRcdFx0XHQvLyBUT0RPIGNvbnNpZGVyIGFsbG93aW5nIGZvciB0aGUgZXhwbGljaXQgYWRkaXRpb24gb2YgY2FsbGJhY2tzXHJcblx0XHRcdFx0Ly8gICAgICB0byBiZSBmaXJlZCBiZWZvcmUgdGhpcyB2YWx1ZSBpcyBzZXQgdG8gYXZvaWQgZXZlbnQgdGltaW5nIGlzc3Vlc1xyXG5cdFx0XHRcdHN0YXRlOiBldmVudC5oYXNoY2hhbmdlU3RhdGUgfHwge31cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gV2UgcmVhbGx5IG9ubHkgd2FudCB0byBzZXQgdGhpcyB1cCBvbmNlXHJcblx0XHQvLyAgICAgIGJ1dCBJJ20gbm90IGNsZWFyIGlmIHRoZXJlJ3MgYSBiZXRlciB3YXkgdG8gYWNoaWV2ZVxyXG5cdFx0Ly8gICAgICB0aGlzIHdpdGggdGhlIGpRdWVyeSBzcGVjaWFsIGV2ZW50IHN0cnVjdHVyZVxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCAvKiBkYXRhLCBuYW1lc3BhY2VzICovICkge1xyXG5cdFx0XHRpZiAoIHNlbGYuYm91bmQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLmJvdW5kID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmICggc2VsZi5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRzZWxmLm9yaWdpbmFsRXZlbnROYW1lID0gXCJwb3BzdGF0ZVwiO1xyXG5cdFx0XHRcdCR3aW4uYmluZCggXCJwb3BzdGF0ZS5uYXZpZ2F0ZVwiLCBzZWxmLnBvcHN0YXRlICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHNlbGYuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHNlbGYub3JpZ2luYWxFdmVudE5hbWUgPSBcImhhc2hjaGFuZ2VcIjtcclxuXHRcdFx0XHQkd2luLmJpbmQoIFwiaGFzaGNoYW5nZS5uYXZpZ2F0ZVwiLCBzZWxmLmhhc2hjaGFuZ2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0XHR2YXIgcGF0aCwgJGJhc2UsIGRpYWxvZ0hhc2hLZXkgPSBcIiZ1aS1zdGF0ZT1kaWFsb2dcIjtcclxuXHJcblx0XHQkLm1vYmlsZS5wYXRoID0gcGF0aCA9IHtcclxuXHRcdFx0dWlTdGF0ZUtleTogXCImdWktc3RhdGVcIixcclxuXHJcblx0XHRcdC8vIFRoaXMgc2NhcnkgbG9va2luZyByZWd1bGFyIGV4cHJlc3Npb24gcGFyc2VzIGFuIGFic29sdXRlIFVSTCBvciBpdHMgcmVsYXRpdmVcclxuXHRcdFx0Ly8gdmFyaWFudHMgKHByb3RvY29sLCBzaXRlLCBkb2N1bWVudCwgcXVlcnksIGFuZCBoYXNoKSwgaW50byB0aGUgdmFyaW91c1xyXG5cdFx0XHQvLyBjb21wb25lbnRzIChwcm90b2NvbCwgaG9zdCwgcGF0aCwgcXVlcnksIGZyYWdtZW50LCBldGMgdGhhdCBtYWtlIHVwIHRoZVxyXG5cdFx0XHQvLyBVUkwgYXMgd2VsbCBhcyBzb21lIG90aGVyIGNvbW1vbmx5IHVzZWQgc3ViLXBhcnRzLiBXaGVuIHVzZWQgd2l0aCBSZWdFeHAuZXhlYygpXHJcblx0XHRcdC8vIG9yIFN0cmluZy5tYXRjaCwgaXQgcGFyc2VzIHRoZSBVUkwgaW50byBhIHJlc3VsdHMgYXJyYXkgdGhhdCBsb29rcyBsaWtlIHRoaXM6XHJcblx0XHRcdC8vXHJcblx0XHRcdC8vICAgICBbMF06IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODAvbWFpbC9pbmJveD9tc2c9MTIzNCZ0eXBlPXVucmVhZCNtc2ctY29udGVudFxyXG5cdFx0XHQvLyAgICAgWzFdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwL21haWwvaW5ib3g/bXNnPTEyMzQmdHlwZT11bnJlYWRcclxuXHRcdFx0Ly8gICAgIFsyXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MC9tYWlsL2luYm94XHJcblx0XHRcdC8vICAgICBbM106IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODBcclxuXHRcdFx0Ly8gICAgIFs0XTogaHR0cDpcclxuXHRcdFx0Ly8gICAgIFs1XTogLy9cclxuXHRcdFx0Ly8gICAgIFs2XTogamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwXHJcblx0XHRcdC8vICAgICBbN106IGpibGFzOnBhc3N3b3JkXHJcblx0XHRcdC8vICAgICBbOF06IGpibGFzXHJcblx0XHRcdC8vICAgICBbOV06IHBhc3N3b3JkXHJcblx0XHRcdC8vICAgIFsxMF06IG15Y29tcGFueS5jb206ODA4MFxyXG5cdFx0XHQvLyAgICBbMTFdOiBteWNvbXBhbnkuY29tXHJcblx0XHRcdC8vICAgIFsxMl06IDgwODBcclxuXHRcdFx0Ly8gICAgWzEzXTogL21haWwvaW5ib3hcclxuXHRcdFx0Ly8gICAgWzE0XTogL21haWwvXHJcblx0XHRcdC8vICAgIFsxNV06IGluYm94XHJcblx0XHRcdC8vICAgIFsxNl06ID9tc2c9MTIzNCZ0eXBlPXVucmVhZFxyXG5cdFx0XHQvLyAgICBbMTddOiAjbXNnLWNvbnRlbnRcclxuXHRcdFx0Ly9cclxuXHRcdFx0dXJsUGFyc2VSRTogL15cXHMqKCgoKFteOlxcLyNcXD9dKzopPyg/OihcXC9cXC8pKCg/OigoW146QFxcLyNcXD9dKykoPzpcXDooW146QFxcLyNcXD9dKykpPylAKT8oKFteOlxcLyNcXD9cXF1cXFtdK3xcXFtbXlxcL1xcXUAjP10rXFxdKSg/OlxcOihbMC05XSspKT8pKT8pPyk/KChcXC8/KD86W15cXC9cXD8jXStcXC8rKSopKFteXFw/I10qKSkpPyhcXD9bXiNdKyk/KSgjLiopPy8sXHJcblxyXG5cdFx0XHQvLyBBYnN0cmFjdGlvbiB0byBhZGRyZXNzIHhzcyAoSXNzdWUgIzQ3ODcpIGJ5IHJlbW92aW5nIHRoZSBhdXRob3JpdHkgaW5cclxuXHRcdFx0Ly8gYnJvd3NlcnMgdGhhdCBhdXRvLWRlY29kZSBpdC4gQWxsIHJlZmVyZW5jZXMgdG8gbG9jYXRpb24uaHJlZiBzaG91bGQgYmVcclxuXHRcdFx0Ly8gcmVwbGFjZWQgd2l0aCBhIGNhbGwgdG8gdGhpcyBtZXRob2Qgc28gdGhhdCBpdCBjYW4gYmUgZGVhbHQgd2l0aCBwcm9wZXJseSBoZXJlXHJcblx0XHRcdGdldExvY2F0aW9uOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHZhciBwYXJzZWRVcmwgPSB0aGlzLnBhcnNlVXJsKCB1cmwgfHwgbG9jYXRpb24uaHJlZiApLFxyXG5cdFx0XHRcdFx0dXJpID0gdXJsID8gcGFyc2VkVXJsIDogbG9jYXRpb24sXHJcblxyXG5cdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRvIHBhcnNlIHRoZSB1cmwgb3IgdGhlIGxvY2F0aW9uIG9iamVjdCBmb3IgdGhlIGhhc2ggYmVjYXVzZSB1c2luZ1xyXG5cdFx0XHRcdFx0Ly8gbG9jYXRpb24uaGFzaCBpcyBhdXRvZGVjb2RlZCBpbiBmaXJlZm94LCB0aGUgcmVzdCBvZiB0aGUgdXJsIHNob3VsZCBiZSBmcm9tXHJcblx0XHRcdFx0XHQvLyB0aGUgb2JqZWN0IChsb2NhdGlvbiB1bmxlc3Mgd2UncmUgdGVzdGluZykgdG8gYXZvaWQgdGhlIGluY2x1c2lvbiBvZiB0aGVcclxuXHRcdFx0XHRcdC8vIGF1dGhvcml0eVxyXG5cdFx0XHRcdFx0aGFzaCA9IHBhcnNlZFVybC5oYXNoO1xyXG5cclxuXHRcdFx0XHQvLyBtaW1pYyB0aGUgYnJvd3NlciB3aXRoIGFuIGVtcHR5IHN0cmluZyB3aGVuIHRoZSBoYXNoIGlzIGVtcHR5XHJcblx0XHRcdFx0aGFzaCA9IGhhc2ggPT09IFwiI1wiID8gXCJcIiA6IGhhc2g7XHJcblxyXG5cdFx0XHRcdHJldHVybiB1cmkucHJvdG9jb2wgK1xyXG5cdFx0XHRcdFx0cGFyc2VkVXJsLmRvdWJsZVNsYXNoICtcclxuXHRcdFx0XHRcdHVyaS5ob3N0ICtcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgcGF0aG5hbWUgbXVzdCBzdGFydCB3aXRoIGEgc2xhc2ggaWYgdGhlcmUncyBhIHByb3RvY29sLCBiZWNhdXNlIHlvdVxyXG5cdFx0XHRcdFx0Ly8gY2FuJ3QgaGF2ZSBhIHByb3RvY29sIGZvbGxvd2VkIGJ5IGEgcmVsYXRpdmUgcGF0aC4gQWxzbywgaXQncyBpbXBvc3NpYmxlIHRvXHJcblx0XHRcdFx0XHQvLyBjYWxjdWxhdGUgYWJzb2x1dGUgVVJMcyBmcm9tIHJlbGF0aXZlIG9uZXMgaWYgdGhlIGFic29sdXRlIG9uZSBkb2Vzbid0IGhhdmVcclxuXHRcdFx0XHRcdC8vIGEgbGVhZGluZyBcIi9cIi5cclxuXHRcdFx0XHRcdCggKCB1cmkucHJvdG9jb2wgIT09IFwiXCIgJiYgdXJpLnBhdGhuYW1lLnN1YnN0cmluZyggMCwgMSApICE9PSBcIi9cIiApID9cclxuXHRcdFx0XHRcdFx0XCIvXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0dXJpLnBhdGhuYW1lICtcclxuXHRcdFx0XHRcdHVyaS5zZWFyY2ggK1xyXG5cdFx0XHRcdFx0aGFzaDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCB1cmxcclxuXHRcdFx0Z2V0RG9jdW1lbnRVcmw6IGZ1bmN0aW9uKCBhc1BhcnNlZE9iamVjdCApIHtcclxuXHRcdFx0XHRyZXR1cm4gYXNQYXJzZWRPYmplY3QgPyAkLmV4dGVuZCgge30sIHBhdGguZG9jdW1lbnRVcmwgKSA6IHBhdGguZG9jdW1lbnRVcmwuaHJlZjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdHBhcnNlTG9jYXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLnBhcnNlVXJsKCB0aGlzLmdldExvY2F0aW9uKCkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUGFyc2UgYSBVUkwgaW50byBhIHN0cnVjdHVyZSB0aGF0IGFsbG93cyBlYXN5IGFjY2VzcyB0b1xyXG5cdFx0XHQvL2FsbCBvZiB0aGUgVVJMIGNvbXBvbmVudHMgYnkgbmFtZS5cclxuXHRcdFx0cGFyc2VVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0Ly8gSWYgd2UncmUgcGFzc2VkIGFuIG9iamVjdCwgd2UnbGwgYXNzdW1lIHRoYXQgaXQgaXNcclxuXHRcdFx0XHQvLyBhIHBhcnNlZCB1cmwgb2JqZWN0IGFuZCBqdXN0IHJldHVybiBpdCBiYWNrIHRvIHRoZSBjYWxsZXIuXHJcblx0XHRcdFx0aWYgKCAkLnR5cGUoIHVybCApID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHVybDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBtYXRjaGVzID0gcGF0aC51cmxQYXJzZVJFLmV4ZWMoIHVybCB8fCBcIlwiICkgfHwgW107XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGFsbG93cyB0aGUgY2FsbGVyIHRvIGFjY2VzcyB0aGUgc3ViLW1hdGNoZXNcclxuXHRcdFx0XHRcdC8vIGJ5IG5hbWUuIE5vdGUgdGhhdCBJRSByZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpbnN0ZWFkIG9mIHVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdC8vIGxpa2UgYWxsIG90aGVyIGJyb3dzZXJzIGRvLCBzbyB3ZSBub3JtYWxpemUgZXZlcnl0aGluZyBzbyBpdHMgY29uc2lzdGVudFxyXG5cdFx0XHRcdFx0Ly8gbm8gbWF0dGVyIHdoYXQgYnJvd3NlciB3ZSdyZSBydW5uaW5nIG9uLlxyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0aHJlZjogICAgICAgICBtYXRjaGVzWyAgMCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhyZWZOb0hhc2g6ICAgbWF0Y2hlc1sgIDEgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRocmVmTm9TZWFyY2g6IG1hdGNoZXNbICAyIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZG9tYWluOiAgICAgICBtYXRjaGVzWyAgMyBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHByb3RvY29sOiAgICAgbWF0Y2hlc1sgIDQgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRkb3VibGVTbGFzaDogIG1hdGNoZXNbICA1IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0YXV0aG9yaXR5OiAgICBtYXRjaGVzWyAgNiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHVzZXJuYW1lOiAgICAgbWF0Y2hlc1sgIDggXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwYXNzd29yZDogICAgIG1hdGNoZXNbICA5IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aG9zdDogICAgICAgICBtYXRjaGVzWyAxMCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhvc3RuYW1lOiAgICAgbWF0Y2hlc1sgMTEgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwb3J0OiAgICAgICAgIG1hdGNoZXNbIDEyIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cGF0aG5hbWU6ICAgICBtYXRjaGVzWyAxMyBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGRpcmVjdG9yeTogICAgbWF0Y2hlc1sgMTQgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRmaWxlbmFtZTogICAgIG1hdGNoZXNbIDE1IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0c2VhcmNoOiAgICAgICBtYXRjaGVzWyAxNiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhhc2g6ICAgICAgICAgbWF0Y2hlc1sgMTcgXSB8fCBcIlwiXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9UdXJuIHJlbFBhdGggaW50byBhbiBhc2JvbHV0ZSBwYXRoLiBhYnNQYXRoIGlzXHJcblx0XHRcdC8vYW4gb3B0aW9uYWwgYWJzb2x1dGUgcGF0aCB3aGljaCBkZXNjcmliZXMgd2hhdFxyXG5cdFx0XHQvL3JlbFBhdGggaXMgcmVsYXRpdmUgdG8uXHJcblx0XHRcdG1ha2VQYXRoQWJzb2x1dGU6IGZ1bmN0aW9uKCByZWxQYXRoLCBhYnNQYXRoICkge1xyXG5cdFx0XHRcdHZhciBhYnNTdGFjayxcclxuXHRcdFx0XHRcdHJlbFN0YWNrLFxyXG5cdFx0XHRcdFx0aSwgZDtcclxuXHJcblx0XHRcdFx0aWYgKCByZWxQYXRoICYmIHJlbFBhdGguY2hhckF0KCAwICkgPT09IFwiL1wiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlbFBhdGg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZWxQYXRoID0gcmVsUGF0aCB8fCBcIlwiO1xyXG5cdFx0XHRcdGFic1BhdGggPSBhYnNQYXRoID8gYWJzUGF0aC5yZXBsYWNlKCAvXlxcL3woXFwvW15cXC9dKnxbXlxcL10rKSQvZywgXCJcIiApIDogXCJcIjtcclxuXHJcblx0XHRcdFx0YWJzU3RhY2sgPSBhYnNQYXRoID8gYWJzUGF0aC5zcGxpdCggXCIvXCIgKSA6IFtdO1xyXG5cdFx0XHRcdHJlbFN0YWNrID0gcmVsUGF0aC5zcGxpdCggXCIvXCIgKTtcclxuXHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCByZWxTdGFjay5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRcdGQgPSByZWxTdGFja1sgaSBdO1xyXG5cdFx0XHRcdFx0c3dpdGNoICggZCApIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSBcIi5cIjpcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSBcIi4uXCI6XHJcblx0XHRcdFx0XHRcdFx0aWYgKCBhYnNTdGFjay5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRhYnNTdGFjay5wb3AoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0YWJzU3RhY2sucHVzaCggZCApO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gXCIvXCIgKyBhYnNTdGFjay5qb2luKCBcIi9cIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9SZXR1cm5zIHRydWUgaWYgYm90aCB1cmxzIGhhdmUgdGhlIHNhbWUgZG9tYWluLlxyXG5cdFx0XHRpc1NhbWVEb21haW46IGZ1bmN0aW9uKCBhYnNVcmwxLCBhYnNVcmwyICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlVXJsKCBhYnNVcmwxICkuZG9tYWluLnRvTG93ZXJDYXNlKCkgPT09XHJcblx0XHRcdFx0XHRwYXRoLnBhcnNlVXJsKCBhYnNVcmwyICkuZG9tYWluLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1JldHVybnMgdHJ1ZSBmb3IgYW55IHJlbGF0aXZlIHZhcmlhbnQuXHJcblx0XHRcdGlzUmVsYXRpdmVVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0Ly8gQWxsIHJlbGF0aXZlIFVybCB2YXJpYW50cyBoYXZlIG9uZSB0aGluZyBpbiBjb21tb24sIG5vIHByb3RvY29sLlxyXG5cdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlVXJsKCB1cmwgKS5wcm90b2NvbCA9PT0gXCJcIjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUmV0dXJucyB0cnVlIGZvciBhbiBhYnNvbHV0ZSB1cmwuXHJcblx0XHRcdGlzQWJzb2x1dGVVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2VVcmwoIHVybCApLnByb3RvY29sICE9PSBcIlwiO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9UdXJuIHRoZSBzcGVjaWZpZWQgcmVhbHRpdmUgVVJMIGludG8gYW4gYWJzb2x1dGUgb25lLiBUaGlzIGZ1bmN0aW9uXHJcblx0XHRcdC8vY2FuIGhhbmRsZSBhbGwgcmVsYXRpdmUgdmFyaWFudHMgKHByb3RvY29sLCBzaXRlLCBkb2N1bWVudCwgcXVlcnksIGZyYWdtZW50KS5cclxuXHRcdFx0bWFrZVVybEFic29sdXRlOiBmdW5jdGlvbiggcmVsVXJsLCBhYnNVcmwgKSB7XHJcblx0XHRcdFx0aWYgKCAhcGF0aC5pc1JlbGF0aXZlVXJsKCByZWxVcmwgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybiByZWxVcmw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIGFic1VybCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0YWJzVXJsID0gdGhpcy5kb2N1bWVudEJhc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgcmVsT2JqID0gcGF0aC5wYXJzZVVybCggcmVsVXJsICksXHJcblx0XHRcdFx0XHRhYnNPYmogPSBwYXRoLnBhcnNlVXJsKCBhYnNVcmwgKSxcclxuXHRcdFx0XHRcdHByb3RvY29sID0gcmVsT2JqLnByb3RvY29sIHx8IGFic09iai5wcm90b2NvbCxcclxuXHRcdFx0XHRcdGRvdWJsZVNsYXNoID0gcmVsT2JqLnByb3RvY29sID8gcmVsT2JqLmRvdWJsZVNsYXNoIDogKCByZWxPYmouZG91YmxlU2xhc2ggfHwgYWJzT2JqLmRvdWJsZVNsYXNoICksXHJcblx0XHRcdFx0XHRhdXRob3JpdHkgPSByZWxPYmouYXV0aG9yaXR5IHx8IGFic09iai5hdXRob3JpdHksXHJcblx0XHRcdFx0XHRoYXNQYXRoID0gcmVsT2JqLnBhdGhuYW1lICE9PSBcIlwiLFxyXG5cdFx0XHRcdFx0cGF0aG5hbWUgPSBwYXRoLm1ha2VQYXRoQWJzb2x1dGUoIHJlbE9iai5wYXRobmFtZSB8fCBhYnNPYmouZmlsZW5hbWUsIGFic09iai5wYXRobmFtZSApLFxyXG5cdFx0XHRcdFx0c2VhcmNoID0gcmVsT2JqLnNlYXJjaCB8fCAoICFoYXNQYXRoICYmIGFic09iai5zZWFyY2ggKSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0aGFzaCA9IHJlbE9iai5oYXNoO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gcHJvdG9jb2wgKyBkb3VibGVTbGFzaCArIGF1dGhvcml0eSArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vQWRkIHNlYXJjaCAoYWthIHF1ZXJ5KSBwYXJhbXMgdG8gdGhlIHNwZWNpZmllZCB1cmwuXHJcblx0XHRcdGFkZFNlYXJjaFBhcmFtczogZnVuY3Rpb24oIHVybCwgcGFyYW1zICkge1xyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggdXJsICksXHJcblx0XHRcdFx0XHRwID0gKCB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkgPyAkLnBhcmFtKCBwYXJhbXMgKSA6IHBhcmFtcyxcclxuXHRcdFx0XHRcdHMgPSB1LnNlYXJjaCB8fCBcIj9cIjtcclxuXHRcdFx0XHRyZXR1cm4gdS5ocmVmTm9TZWFyY2ggKyBzICsgKCBzLmNoYXJBdCggcy5sZW5ndGggLSAxICkgIT09IFwiP1wiID8gXCImXCIgOiBcIlwiICkgKyBwICsgKCB1Lmhhc2ggfHwgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Y29udmVydFVybFRvRGF0YVVybDogZnVuY3Rpb24oIGFic1VybCApIHtcclxuXHRcdFx0XHR2YXIgcmVzdWx0ID0gYWJzVXJsLFxyXG5cdFx0XHRcdFx0dSA9IHBhdGgucGFyc2VVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHBhdGguaXNFbWJlZGRlZFBhZ2UoIHUgKSApIHtcclxuXHRcdFx0XHRcdC8vIEZvciBlbWJlZGRlZCBwYWdlcywgcmVtb3ZlIHRoZSBkaWFsb2cgaGFzaCBrZXkgYXMgaW4gZ2V0RmlsZVBhdGgoKSxcclxuXHRcdFx0XHRcdC8vIGFuZCByZW1vdmUgb3RoZXJ3aXNlIHRoZSBEYXRhIFVybCB3b24ndCBtYXRjaCB0aGUgaWQgb2YgdGhlIGVtYmVkZGVkIFBhZ2UuXHJcblx0XHRcdFx0XHRyZXN1bHQgPSB1Lmhhc2hcclxuXHRcdFx0XHRcdFx0LnNwbGl0KCBkaWFsb2dIYXNoS2V5IClbMF1cclxuXHRcdFx0XHRcdFx0LnJlcGxhY2UoIC9eIy8sIFwiXCIgKVxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZSggL1xcPy4qJC8sIFwiXCIgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwYXRoLmlzU2FtZURvbWFpbiggdSwgdGhpcy5kb2N1bWVudEJhc2UgKSApIHtcclxuXHRcdFx0XHRcdHJlc3VsdCA9IHUuaHJlZk5vSGFzaC5yZXBsYWNlKCB0aGlzLmRvY3VtZW50QmFzZS5kb21haW4sIFwiXCIgKS5zcGxpdCggZGlhbG9nSGFzaEtleSApWzBdO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5kZWNvZGVVUklDb21wb25lbnQoIHJlc3VsdCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9nZXQgcGF0aCBmcm9tIGN1cnJlbnQgaGFzaCwgb3IgZnJvbSBhIGZpbGUgcGF0aFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBuZXdQYXRoICkge1xyXG5cdFx0XHRcdGlmICggbmV3UGF0aCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0bmV3UGF0aCA9IHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBwYXRoLnN0cmlwSGFzaCggbmV3UGF0aCApLnJlcGxhY2UoIC9bXlxcL10qXFwuW15cXC8qXSskLywgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9zZXQgbG9jYXRpb24gaGFzaCB0byBwYXRoXHJcblx0XHRcdHNldDogZnVuY3Rpb24oIHBhdGggKSB7XHJcblx0XHRcdFx0bG9jYXRpb24uaGFzaCA9IHBhdGg7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3Rlc3QgaWYgYSBnaXZlbiB1cmwgKHN0cmluZykgaXMgYSBwYXRoXHJcblx0XHRcdC8vTk9URSBtaWdodCBiZSBleGNlcHRpb25hbGx5IG5haXZlXHJcblx0XHRcdGlzUGF0aDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gKCAvXFwvLyApLnRlc3QoIHVybCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9yZXR1cm4gYSB1cmwgcGF0aCB3aXRoIHRoZSB3aW5kb3cncyBsb2NhdGlvbiBwcm90b2NvbC9ob3N0bmFtZS9wYXRobmFtZSByZW1vdmVkXHJcblx0XHRcdGNsZWFuOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiB1cmwucmVwbGFjZSggdGhpcy5kb2N1bWVudEJhc2UuZG9tYWluLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL2p1c3QgcmV0dXJuIHRoZSB1cmwgd2l0aG91dCBhbiBpbml0aWFsICNcclxuXHRcdFx0c3RyaXBIYXNoOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiB1cmwucmVwbGFjZSggL14jLywgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0c3RyaXBRdWVyeVBhcmFtczogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gdXJsLnJlcGxhY2UoIC9cXD8uKiQvLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3JlbW92ZSB0aGUgcHJlY2VkaW5nIGhhc2gsIGFueSBxdWVyeSBwYXJhbXMsIGFuZCBkaWFsb2cgbm90YXRpb25zXHJcblx0XHRcdGNsZWFuSGFzaDogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGguc3RyaXBIYXNoKCBoYXNoLnJlcGxhY2UoIC9cXD8uKiQvLCBcIlwiICkucmVwbGFjZSggZGlhbG9nSGFzaEtleSwgXCJcIiApICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRpc0hhc2hWYWxpZDogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0cmV0dXJuICggL14jW14jXSskLyApLnRlc3QoIGhhc2ggKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vY2hlY2sgd2hldGhlciBhIHVybCBpcyByZWZlcmVuY2luZyB0aGUgc2FtZSBkb21haW4sIG9yIGFuIGV4dGVybmFsIGRvbWFpbiBvciBkaWZmZXJlbnQgcHJvdG9jb2xcclxuXHRcdFx0Ly9jb3VsZCBiZSBtYWlsdG8sIGV0Y1xyXG5cdFx0XHRpc0V4dGVybmFsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggdXJsICk7XHJcblxyXG5cdFx0XHRcdHJldHVybiAhISggdS5wcm90b2NvbCAmJlxyXG5cdFx0XHRcdFx0KCB1LmRvbWFpbi50b0xvd2VyQ2FzZSgpICE9PSB0aGlzLmRvY3VtZW50VXJsLmRvbWFpbi50b0xvd2VyQ2FzZSgpICkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGhhc1Byb3RvY29sOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiAoIC9eKDo/XFx3KzopLyApLnRlc3QoIHVybCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aXNFbWJlZGRlZFBhZ2U6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB0aGUgcGF0aCBpcyBhYnNvbHV0ZSwgdGhlbiB3ZSBuZWVkIHRvIGNvbXBhcmUgdGhlIHVybCBhZ2FpbnN0XHJcblx0XHRcdFx0Ly9ib3RoIHRoZSB0aGlzLmRvY3VtZW50VXJsIGFuZCB0aGUgZG9jdW1lbnRCYXNlLiBUaGUgbWFpbiByZWFzb24gZm9yIHRoaXNcclxuXHRcdFx0XHQvL2lzIHRoYXQgbGlua3MgZW1iZWRkZWQgd2l0aGluIGV4dGVybmFsIGRvY3VtZW50cyB3aWxsIHJlZmVyIHRvIHRoZVxyXG5cdFx0XHRcdC8vYXBwbGljYXRpb24gZG9jdW1lbnQsIHdoZXJlYXMgbGlua3MgZW1iZWRkZWQgd2l0aGluIHRoZSBhcHBsaWNhdGlvblxyXG5cdFx0XHRcdC8vZG9jdW1lbnQgd2lsbCBiZSByZXNvbHZlZCBhZ2FpbnN0IHRoZSBkb2N1bWVudCBiYXNlLlxyXG5cdFx0XHRcdGlmICggdS5wcm90b2NvbCAhPT0gXCJcIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiAoICF0aGlzLmlzUGF0aCh1Lmhhc2gpICYmIHUuaGFzaCAmJiAoIHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudFVybC5ocmVmTm9IYXNoIHx8ICggdGhpcy5kb2N1bWVudEJhc2VEaWZmZXJzICYmIHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCApICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICggL14jLyApLnRlc3QoIHUuaHJlZiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0c3F1YXNoOiBmdW5jdGlvbiggdXJsLCByZXNvbHV0aW9uVXJsICkge1xyXG5cdFx0XHRcdHZhciBocmVmLCBjbGVhbmVkVXJsLCBzZWFyY2gsIHN0YXRlSW5kZXgsIGRvY1VybCxcclxuXHRcdFx0XHRcdGlzUGF0aCA9IHRoaXMuaXNQYXRoKCB1cmwgKSxcclxuXHRcdFx0XHRcdHVyaSA9IHRoaXMucGFyc2VVcmwoIHVybCApLFxyXG5cdFx0XHRcdFx0cHJlc2VydmVkSGFzaCA9IHVyaS5oYXNoLFxyXG5cdFx0XHRcdFx0dWlTdGF0ZSA9IFwiXCI7XHJcblxyXG5cdFx0XHRcdC8vIHByb2R1Y2UgYSB1cmwgYWdhaW5zdCB3aGljaCB3ZSBjYW4gcmVzb2x2ZSB0aGUgcHJvdmlkZWQgcGF0aFxyXG5cdFx0XHRcdGlmICggIXJlc29sdXRpb25VcmwgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGlzUGF0aCApIHtcclxuXHRcdFx0XHRcdFx0cmVzb2x1dGlvblVybCA9IHBhdGguZ2V0TG9jYXRpb24oKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGRvY1VybCA9IHBhdGguZ2V0RG9jdW1lbnRVcmwoIHRydWUgKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBwYXRoLmlzUGF0aCggZG9jVXJsLmhhc2ggKSApIHtcclxuXHRcdFx0XHRcdFx0XHRyZXNvbHV0aW9uVXJsID0gcGF0aC5zcXVhc2goIGRvY1VybC5ocmVmICk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0cmVzb2x1dGlvblVybCA9IGRvY1VybC5ocmVmO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgdXJsIGlzIGFueXRoaW5nIGJ1dCBhIHNpbXBsZSBzdHJpbmcsIHJlbW92ZSBhbnkgcHJlY2VkaW5nIGhhc2hcclxuXHRcdFx0XHQvLyBlZyAjZm9vL2JhciAtPiBmb28vYmFyXHJcblx0XHRcdFx0Ly8gICAgI2ZvbyAtPiAjZm9vXHJcblx0XHRcdFx0Y2xlYW5lZFVybCA9IGlzUGF0aCA/IHBhdGguc3RyaXBIYXNoKCB1cmwgKSA6IHVybDtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIHVybCBpcyBhIGZ1bGwgdXJsIHdpdGggYSBoYXNoIGNoZWNrIGlmIHRoZSBwYXJzZWQgaGFzaCBpcyBhIHBhdGhcclxuXHRcdFx0XHQvLyBpZiBpdCBpcywgc3RyaXAgdGhlICMsIGFuZCB1c2UgaXQgb3RoZXJ3aXNlIGNvbnRpbnVlIHdpdGhvdXQgY2hhbmdlXHJcblx0XHRcdFx0Y2xlYW5lZFVybCA9IHBhdGguaXNQYXRoKCB1cmkuaGFzaCApID8gcGF0aC5zdHJpcEhhc2goIHVyaS5oYXNoICkgOiBjbGVhbmVkVXJsO1xyXG5cclxuXHRcdFx0XHQvLyBTcGxpdCB0aGUgVUkgU3RhdGUga2V5cyBvZmYgdGhlIGhyZWZcclxuXHRcdFx0XHRzdGF0ZUluZGV4ID0gY2xlYW5lZFVybC5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKTtcclxuXHJcblx0XHRcdFx0Ly8gc3RvcmUgdGhlIHVpIHN0YXRlIGtleXMgZm9yIHVzZVxyXG5cdFx0XHRcdGlmICggc3RhdGVJbmRleCA+IC0xICkge1xyXG5cdFx0XHRcdFx0dWlTdGF0ZSA9IGNsZWFuZWRVcmwuc2xpY2UoIHN0YXRlSW5kZXggKTtcclxuXHRcdFx0XHRcdGNsZWFuZWRVcmwgPSBjbGVhbmVkVXJsLnNsaWNlKCAwLCBzdGF0ZUluZGV4ICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBtYWtlIHRoZSBjbGVhbmVkVXJsIGFic29sdXRlIHJlbGF0aXZlIHRvIHRoZSByZXNvbHV0aW9uIHVybFxyXG5cdFx0XHRcdGhyZWYgPSBwYXRoLm1ha2VVcmxBYnNvbHV0ZSggY2xlYW5lZFVybCwgcmVzb2x1dGlvblVybCApO1xyXG5cclxuXHRcdFx0XHQvLyBncmFiIHRoZSBzZWFyY2ggZnJvbSB0aGUgcmVzb2x2ZWQgdXJsIHNpbmNlIHBhcnNpbmcgZnJvbVxyXG5cdFx0XHRcdC8vIHRoZSBwYXNzZWQgdXJsIG1heSBub3QgeWllbGQgdGhlIGNvcnJlY3QgcmVzdWx0XHJcblx0XHRcdFx0c2VhcmNoID0gdGhpcy5wYXJzZVVybCggaHJlZiApLnNlYXJjaDtcclxuXHJcblx0XHRcdFx0Ly8gVE9ETyBhbGwgdGhpcyBjcmFwIGlzIHRlcnJpYmxlLCBjbGVhbiBpdCB1cFxyXG5cdFx0XHRcdGlmICggaXNQYXRoICkge1xyXG5cdFx0XHRcdFx0Ly8gcmVqZWN0IHRoZSBoYXNoIGlmIGl0J3MgYSBwYXRoIG9yIGl0J3MganVzdCBhIGRpYWxvZyBrZXlcclxuXHRcdFx0XHRcdGlmICggcGF0aC5pc1BhdGgoIHByZXNlcnZlZEhhc2ggKSB8fCBwcmVzZXJ2ZWRIYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggPSBcIlwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEFwcGVuZCB0aGUgVUkgU3RhdGUga2V5cyB3aGVyZSBpdCBleGlzdHMgYW5kIGl0J3MgYmVlbiByZW1vdmVkXHJcblx0XHRcdFx0XHQvLyBmcm9tIHRoZSB1cmxcclxuXHRcdFx0XHRcdGlmICggdWlTdGF0ZSAmJiBwcmVzZXJ2ZWRIYXNoLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApID09PSAtMSkge1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoICs9IHVpU3RhdGU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRoYXQgcG91bmQgaXMgb24gdGhlIGZyb250IG9mIHRoZSBoYXNoXHJcblx0XHRcdFx0XHRpZiAoIHByZXNlcnZlZEhhc2guaW5kZXhPZiggXCIjXCIgKSA9PT0gLTEgJiYgcHJlc2VydmVkSGFzaCAhPT0gXCJcIiApIHtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaCA9IFwiI1wiICsgcHJlc2VydmVkSGFzaDtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyByZWNvbnN0cnVjdCBlYWNoIG9mIHRoZSBwaWVjZXMgd2l0aCB0aGUgbmV3IHNlYXJjaCBzdHJpbmcgYW5kIGhhc2hcclxuXHRcdFx0XHRcdGhyZWYgPSBwYXRoLnBhcnNlVXJsKCBocmVmICk7XHJcblx0XHRcdFx0XHRocmVmID0gaHJlZi5wcm90b2NvbCArIGhyZWYuZG91YmxlU2xhc2ggKyBocmVmLmhvc3QgKyBocmVmLnBhdGhuYW1lICsgc2VhcmNoICtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aHJlZiArPSBocmVmLmluZGV4T2YoIFwiI1wiICkgPiAtMSA/IHVpU3RhdGUgOiBcIiNcIiArIHVpU3RhdGU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gaHJlZjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGlzUHJlc2VydmFibGVIYXNoOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHRyZXR1cm4gaGFzaC5yZXBsYWNlKCBcIiNcIiwgXCJcIiApLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApID09PSAwO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gRXNjYXBlIHdlaXJkIGNoYXJhY3RlcnMgaW4gdGhlIGhhc2ggaWYgaXQgaXMgdG8gYmUgdXNlZCBhcyBhIHNlbGVjdG9yXHJcblx0XHRcdGhhc2hUb1NlbGVjdG9yOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHR2YXIgaGFzSGFzaCA9ICggaGFzaC5zdWJzdHJpbmcoIDAsIDEgKSA9PT0gXCIjXCIgKTtcclxuXHRcdFx0XHRpZiAoIGhhc0hhc2ggKSB7XHJcblx0XHRcdFx0XHRoYXNoID0gaGFzaC5zdWJzdHJpbmcoIDEgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICggaGFzSGFzaCA/IFwiI1wiIDogXCJcIiApICsgaGFzaC5yZXBsYWNlKCAvKFshXCIjJCUmJygpKissLi86Ozw9Pj9AW1xcXV5ge3x9fl0pL2csIFwiXFxcXCQxXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIHJldHVybiB0aGUgc3Vic3RyaW5nIG9mIGEgZmlsZXBhdGggYmVmb3JlIHRoZSBkaWFsb2dIYXNoS2V5LCBmb3IgbWFraW5nIGEgc2VydmVyXHJcblx0XHRcdC8vIHJlcXVlc3RcclxuXHRcdFx0Z2V0RmlsZVBhdGg6IGZ1bmN0aW9uKCBwYXRoICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoICYmIHBhdGguc3BsaXQoIGRpYWxvZ0hhc2hLZXkgKVswXTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBzcGVjaWZpZWQgdXJsIHJlZmVycyB0byB0aGUgZmlyc3QgcGFnZSBpbiB0aGUgbWFpblxyXG5cdFx0XHQvLyBhcHBsaWNhdGlvbiBkb2N1bWVudC5cclxuXHRcdFx0aXNGaXJzdFBhZ2VVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0Ly8gV2Ugb25seSBkZWFsIHdpdGggYWJzb2x1dGUgcGF0aHMuXHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCBwYXRoLm1ha2VVcmxBYnNvbHV0ZSggdXJsLCB0aGlzLmRvY3VtZW50QmFzZSApICksXHJcblxyXG5cdFx0XHRcdFx0Ly8gRG9lcyB0aGUgdXJsIGhhdmUgdGhlIHNhbWUgcGF0aCBhcyB0aGUgZG9jdW1lbnQ/XHJcblx0XHRcdFx0XHRzYW1lUGF0aCA9IHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudFVybC5ocmVmTm9IYXNoIHx8XHJcblx0XHRcdFx0XHRcdCggdGhpcy5kb2N1bWVudEJhc2VEaWZmZXJzICYmXHJcblx0XHRcdFx0XHRcdFx0dS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoICksXHJcblxyXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaXJzdCBwYWdlIGVsZW1lbnQuXHJcblx0XHRcdFx0XHRmcCA9ICQubW9iaWxlLmZpcnN0UGFnZSxcclxuXHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGlkIG9mIHRoZSBmaXJzdCBwYWdlIGVsZW1lbnQgaWYgaXQgaGFzIG9uZS5cclxuXHRcdFx0XHRcdGZwSWQgPSBmcCAmJiBmcFswXSA/IGZwWzBdLmlkIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgdXJsIHJlZmVycyB0byB0aGUgZmlyc3QgcGFnZSBpZiB0aGUgcGF0aCBtYXRjaGVzIHRoZSBkb2N1bWVudCBhbmRcclxuXHRcdFx0XHQvLyBpdCBlaXRoZXIgaGFzIG5vIGhhc2ggdmFsdWUsIG9yIHRoZSBoYXNoIGlzIGV4YWN0bHkgZXF1YWwgdG8gdGhlIGlkXHJcblx0XHRcdFx0Ly8gb2YgdGhlIGZpcnN0IHBhZ2UgZWxlbWVudC5cclxuXHRcdFx0XHRyZXR1cm4gc2FtZVBhdGggJiZcclxuXHRcdFx0XHRcdCggIXUuaGFzaCB8fFxyXG5cdFx0XHRcdFx0XHR1Lmhhc2ggPT09IFwiI1wiIHx8XHJcblx0XHRcdFx0XHRcdCggZnBJZCAmJiB1Lmhhc2gucmVwbGFjZSggL14jLywgXCJcIiApID09PSBmcElkICkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIFNvbWUgZW1iZWRkZWQgYnJvd3NlcnMsIGxpa2UgdGhlIHdlYiB2aWV3IGluIFBob25lIEdhcCwgYWxsb3dcclxuXHRcdFx0Ly8gY3Jvc3MtZG9tYWluIFhIUiByZXF1ZXN0cyBpZiB0aGUgZG9jdW1lbnQgZG9pbmcgdGhlIHJlcXVlc3Qgd2FzIGxvYWRlZFxyXG5cdFx0XHQvLyB2aWEgdGhlIGZpbGU6Ly8gcHJvdG9jb2wuIFRoaXMgaXMgdXN1YWxseSB0byBhbGxvdyB0aGUgYXBwbGljYXRpb24gdG9cclxuXHRcdFx0Ly8gXCJwaG9uZSBob21lXCIgYW5kIGZldGNoIGFwcCBzcGVjaWZpYyBkYXRhLiBXZSBub3JtYWxseSBsZXQgdGhlIGJyb3dzZXJcclxuXHRcdFx0Ly8gaGFuZGxlIGV4dGVybmFsL2Nyb3NzLWRvbWFpbiB1cmxzLCBidXQgaWYgdGhlIGFsbG93Q3Jvc3NEb21haW5QYWdlc1xyXG5cdFx0XHQvLyBvcHRpb24gaXMgdHJ1ZSwgd2Ugd2lsbCBhbGxvdyBjcm9zcy1kb21haW4gaHR0cC9odHRwcyByZXF1ZXN0cyB0byBnb1xyXG5cdFx0XHQvLyB0aHJvdWdoIG91ciBwYWdlIGxvYWRpbmcgbG9naWMuXHJcblx0XHRcdGlzUGVybWl0dGVkQ3Jvc3NEb21haW5SZXF1ZXN0OiBmdW5jdGlvbiggZG9jVXJsLCByZXFVcmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuICQubW9iaWxlLmFsbG93Q3Jvc3NEb21haW5QYWdlcyAmJlxyXG5cdFx0XHRcdFx0KGRvY1VybC5wcm90b2NvbCA9PT0gXCJmaWxlOlwiIHx8IGRvY1VybC5wcm90b2NvbCA9PT0gXCJjb250ZW50OlwiKSAmJlxyXG5cdFx0XHRcdFx0cmVxVXJsLnNlYXJjaCggL15odHRwcz86LyApICE9PSAtMTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRwYXRoLmRvY3VtZW50VXJsID0gcGF0aC5wYXJzZUxvY2F0aW9uKCk7XHJcblxyXG5cdFx0JGJhc2UgPSAkKCBcImhlYWRcIiApLmZpbmQoIFwiYmFzZVwiICk7XHJcblxyXG5cdFx0cGF0aC5kb2N1bWVudEJhc2UgPSAkYmFzZS5sZW5ndGggP1xyXG5cdFx0XHRwYXRoLnBhcnNlVXJsKCBwYXRoLm1ha2VVcmxBYnNvbHV0ZSggJGJhc2UuYXR0ciggXCJocmVmXCIgKSwgcGF0aC5kb2N1bWVudFVybC5ocmVmICkgKSA6XHJcblx0XHRcdHBhdGguZG9jdW1lbnRVcmw7XHJcblxyXG5cdFx0cGF0aC5kb2N1bWVudEJhc2VEaWZmZXJzID0gKHBhdGguZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCAhPT0gcGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCk7XHJcblxyXG5cdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IGJhc2UgdXJsXHJcblx0XHRwYXRoLmdldERvY3VtZW50QmFzZSA9IGZ1bmN0aW9uKCBhc1BhcnNlZE9iamVjdCApIHtcclxuXHRcdFx0cmV0dXJuIGFzUGFyc2VkT2JqZWN0ID8gJC5leHRlbmQoIHt9LCBwYXRoLmRvY3VtZW50QmFzZSApIDogcGF0aC5kb2N1bWVudEJhc2UuaHJlZjtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSBpbiAxLjUuMFxyXG5cdFx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblxyXG5cdFx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgdXJsXHJcblx0XHRcdGdldERvY3VtZW50VXJsOiBwYXRoLmdldERvY3VtZW50VXJsLFxyXG5cclxuXHRcdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IGJhc2UgdXJsXHJcblx0XHRcdGdldERvY3VtZW50QmFzZTogcGF0aC5nZXREb2N1bWVudEJhc2VcclxuXHRcdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdCQubW9iaWxlLkhpc3RvcnkgPSBmdW5jdGlvbiggc3RhY2ssIGluZGV4ICkge1xyXG5cdFx0dGhpcy5zdGFjayA9IHN0YWNrIHx8IFtdO1xyXG5cdFx0dGhpcy5hY3RpdmVJbmRleCA9IGluZGV4IHx8IDA7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuSGlzdG9yeS5wcm90b3R5cGUsIHtcclxuXHRcdGdldEFjdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLmFjdGl2ZUluZGV4IF07XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldExhc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5wcmV2aW91c0luZGV4IF07XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldE5leHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5hY3RpdmVJbmRleCArIDEgXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0UHJldjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLmFjdGl2ZUluZGV4IC0gMSBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBhZGROZXcgaXMgdXNlZCB3aGVuZXZlciBhIG5ldyBwYWdlIGlzIGFkZGVkXHJcblx0XHRhZGQ6IGZ1bmN0aW9uKCB1cmwsIGRhdGEgKSB7XHJcblx0XHRcdGRhdGEgPSBkYXRhIHx8IHt9O1xyXG5cclxuXHRcdFx0Ly9pZiB0aGVyZSdzIGZvcndhcmQgaGlzdG9yeSwgd2lwZSBpdFxyXG5cdFx0XHRpZiAoIHRoaXMuZ2V0TmV4dCgpICkge1xyXG5cdFx0XHRcdHRoaXMuY2xlYXJGb3J3YXJkKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoZSBoYXNoIGlzIGluY2x1ZGVkIGluIHRoZSBkYXRhIG1ha2Ugc3VyZSB0aGUgc2hhcGVcclxuXHRcdFx0Ly8gaXMgY29uc2lzdGVudCBmb3IgY29tcGFyaXNvblxyXG5cdFx0XHRpZiAoIGRhdGEuaGFzaCAmJiBkYXRhLmhhc2guaW5kZXhPZiggXCIjXCIgKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRkYXRhLmhhc2ggPSBcIiNcIiArIGRhdGEuaGFzaDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZGF0YS51cmwgPSB1cmw7XHJcblx0XHRcdHRoaXMuc3RhY2sucHVzaCggZGF0YSApO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZUluZGV4ID0gdGhpcy5zdGFjay5sZW5ndGggLSAxO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3dpcGUgdXJscyBhaGVhZCBvZiBhY3RpdmUgaW5kZXhcclxuXHRcdGNsZWFyRm9yd2FyZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuc3RhY2sgPSB0aGlzLnN0YWNrLnNsaWNlKCAwLCB0aGlzLmFjdGl2ZUluZGV4ICsgMSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRmaW5kOiBmdW5jdGlvbiggdXJsLCBzdGFjaywgZWFybHlSZXR1cm4gKSB7XHJcblx0XHRcdHN0YWNrID0gc3RhY2sgfHwgdGhpcy5zdGFjaztcclxuXHJcblx0XHRcdHZhciBlbnRyeSwgaSwgbGVuZ3RoID0gc3RhY2subGVuZ3RoLCBpbmRleDtcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0ZW50cnkgPSBzdGFja1tpXTtcclxuXHJcblx0XHRcdFx0aWYgKCBkZWNvZGVVUklDb21wb25lbnQodXJsKSA9PT0gZGVjb2RlVVJJQ29tcG9uZW50KGVudHJ5LnVybCkgfHxcclxuXHRcdFx0XHRcdGRlY29kZVVSSUNvbXBvbmVudCh1cmwpID09PSBkZWNvZGVVUklDb21wb25lbnQoZW50cnkuaGFzaCkgKSB7XHJcblx0XHRcdFx0XHRpbmRleCA9IGk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBlYXJseVJldHVybiApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGluZGV4O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGluZGV4O1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbG9zZXN0OiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHR2YXIgY2xvc2VzdCwgYSA9IHRoaXMuYWN0aXZlSW5kZXg7XHJcblxyXG5cdFx0XHQvLyBGaXJzdCwgdGFrZSB0aGUgc2xpY2Ugb2YgdGhlIGhpc3Rvcnkgc3RhY2sgYmVmb3JlIHRoZSBjdXJyZW50IGluZGV4IGFuZCBzZWFyY2hcclxuXHRcdFx0Ly8gZm9yIGEgdXJsIG1hdGNoLiBJZiBvbmUgaXMgZm91bmQsIHdlJ2xsIGF2b2lkIGF2b2lkIGxvb2tpbmcgdGhyb3VnaCBmb3J3YXJkIGhpc3RvcnlcclxuXHRcdFx0Ly8gTk9URSB0aGUgcHJlZmVyZW5jZSBmb3IgYmFja3dhcmQgaGlzdG9yeSBtb3ZlbWVudCBpcyBkcml2ZW4gYnkgdGhlIGZhY3QgdGhhdFxyXG5cdFx0XHQvLyAgICAgIG1vc3QgbW9iaWxlIGJyb3dzZXJzIG9ubHkgaGF2ZSBhIGRlZGljYXRlZCBiYWNrIGJ1dHRvbiwgYW5kIHVzZXJzIHJhcmVseSB1c2VcclxuXHRcdFx0Ly8gICAgICB0aGUgZm9yd2FyZCBidXR0b24gaW4gZGVza3RvcCBicm93c2VyIGFueWhvd1xyXG5cdFx0XHRjbG9zZXN0ID0gdGhpcy5maW5kKCB1cmwsIHRoaXMuc3RhY2suc2xpY2UoMCwgYSkgKTtcclxuXHJcblx0XHRcdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGluIGJhY2t3YXJkIGhpc3RvcnkgY2hlY2sgZm9yd2FyZC4gVGhlIGB0cnVlYFxyXG5cdFx0XHQvLyB2YWx1ZSBwYXNzZWQgYXMgdGhlIHRoaXJkIHBhcmFtZXRlciBjYXVzZXMgdGhlIGZpbmQgbWV0aG9kIHRvIGJyZWFrXHJcblx0XHRcdC8vIG9uIHRoZSBmaXJzdCBtYXRjaCBpbiB0aGUgZm9yd2FyZCBoaXN0b3J5IHNsaWNlLiBUaGUgc3RhcnRpbmcgaW5kZXhcclxuXHRcdFx0Ly8gb2YgdGhlIHNsaWNlIG11c3QgdGhlbiBiZSBhZGRlZCB0byB0aGUgcmVzdWx0IHRvIGdldCB0aGUgZWxlbWVudCBpbmRleFxyXG5cdFx0XHQvLyBpbiB0aGUgb3JpZ2luYWwgaGlzdG9yeSBzdGFjayA6KCA6KFxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBUT0RPIHRoaXMgaXMgaHlwZXIgY29uZnVzaW5nIGFuZCBzaG91bGQgYmUgY2xlYW5lZCB1cCAodWdoIHNvIGJhZClcclxuXHRcdFx0aWYgKCBjbG9zZXN0ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0Y2xvc2VzdCA9IHRoaXMuZmluZCggdXJsLCB0aGlzLnN0YWNrLnNsaWNlKGEpLCB0cnVlICk7XHJcblx0XHRcdFx0Y2xvc2VzdCA9IGNsb3Nlc3QgPT09IHVuZGVmaW5lZCA/IGNsb3Nlc3QgOiBjbG9zZXN0ICsgYTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGNsb3Nlc3Q7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRpcmVjdDogZnVuY3Rpb24oIG9wdHMgKSB7XHJcblx0XHRcdHZhciBuZXdBY3RpdmVJbmRleCA9IHRoaXMuY2xvc2VzdCggb3B0cy51cmwgKSwgYSA9IHRoaXMuYWN0aXZlSW5kZXg7XHJcblxyXG5cdFx0XHQvLyBzYXZlIG5ldyBwYWdlIGluZGV4LCBudWxsIGNoZWNrIHRvIHByZXZlbnQgZmFsc2V5IDAgcmVzdWx0XHJcblx0XHRcdC8vIHJlY29yZCB0aGUgcHJldmlvdXMgaW5kZXggZm9yIHJlZmVyZW5jZVxyXG5cdFx0XHRpZiAoIG5ld0FjdGl2ZUluZGV4ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVJbmRleCA9IG5ld0FjdGl2ZUluZGV4O1xyXG5cdFx0XHRcdHRoaXMucHJldmlvdXNJbmRleCA9IGE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGludm9rZSBjYWxsYmFja3Mgd2hlcmUgYXBwcm9wcmlhdGVcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gVE9ETyB0aGlzIGlzIGFsc28gY29udm9sdXRlZCBhbmQgY29uZnVzaW5nXHJcblx0XHRcdGlmICggbmV3QWN0aXZlSW5kZXggPCBhICkge1xyXG5cdFx0XHRcdCggb3B0cy5wcmVzZW50IHx8IG9wdHMuYmFjayB8fCAkLm5vb3AgKSggdGhpcy5nZXRBY3RpdmUoKSwgXCJiYWNrXCIgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggbmV3QWN0aXZlSW5kZXggPiBhICkge1xyXG5cdFx0XHRcdCggb3B0cy5wcmVzZW50IHx8IG9wdHMuZm9yd2FyZCB8fCAkLm5vb3AgKSggdGhpcy5nZXRBY3RpdmUoKSwgXCJmb3J3YXJkXCIgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggbmV3QWN0aXZlSW5kZXggPT09IHVuZGVmaW5lZCAmJiBvcHRzLm1pc3NpbmcgKSB7XHJcblx0XHRcdFx0b3B0cy5taXNzaW5nKCB0aGlzLmdldEFjdGl2ZSgpICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgcGF0aCA9ICQubW9iaWxlLnBhdGgsXHJcblx0XHRpbml0aWFsSHJlZiA9IGxvY2F0aW9uLmhyZWY7XHJcblxyXG5cdCQubW9iaWxlLk5hdmlnYXRvciA9IGZ1bmN0aW9uKCBoaXN0b3J5ICkge1xyXG5cdFx0dGhpcy5oaXN0b3J5ID0gaGlzdG9yeTtcclxuXHRcdHRoaXMuaWdub3JlSW5pdGlhbEhhc2hDaGFuZ2UgPSB0cnVlO1xyXG5cclxuXHRcdCQubW9iaWxlLndpbmRvdy5iaW5kKHtcclxuXHRcdFx0XCJwb3BzdGF0ZS5oaXN0b3J5XCI6ICQucHJveHkoIHRoaXMucG9wc3RhdGUsIHRoaXMgKSxcclxuXHRcdFx0XCJoYXNoY2hhbmdlLmhpc3RvcnlcIjogJC5wcm94eSggdGhpcy5oYXNoY2hhbmdlLCB0aGlzIClcclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLk5hdmlnYXRvci5wcm90b3R5cGUsIHtcclxuXHRcdHNxdWFzaDogZnVuY3Rpb24oIHVybCwgZGF0YSApIHtcclxuXHRcdFx0dmFyIHN0YXRlLCBocmVmLCBoYXNoID0gcGF0aC5pc1BhdGgodXJsKSA/IHBhdGguc3RyaXBIYXNoKHVybCkgOiB1cmw7XHJcblxyXG5cdFx0XHRocmVmID0gcGF0aC5zcXVhc2goIHVybCApO1xyXG5cclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhpcyBpbmZvcm1hdGlvbiB3aGVuIGl0IGlzbid0IGV4cGxpY2l0bHkgc2V0IGluIHRoZVxyXG5cdFx0XHQvLyBkYXRhIG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgdG8gdGhlIHNxdWFzaCBtZXRob2RcclxuXHRcdFx0c3RhdGUgPSAkLmV4dGVuZCh7XHJcblx0XHRcdFx0aGFzaDogaGFzaCxcclxuXHRcdFx0XHR1cmw6IGhyZWZcclxuXHRcdFx0fSwgZGF0YSk7XHJcblxyXG5cdFx0XHQvLyByZXBsYWNlIHRoZSBjdXJyZW50IHVybCB3aXRoIHRoZSBuZXcgaHJlZiBhbmQgc3RvcmUgdGhlIHN0YXRlXHJcblx0XHRcdC8vIE5vdGUgdGhhdCBpbiBzb21lIGNhc2VzIHdlIG1pZ2h0IGJlIHJlcGxhY2luZyBhbiB1cmwgd2l0aCB0aGVcclxuXHRcdFx0Ly8gc2FtZSB1cmwuIFdlIGRvIHRoaXMgYW55d2F5cyBiZWNhdXNlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXRcclxuXHRcdFx0Ly8gYWxsIG9mIG91ciBoaXN0b3J5IGVudHJpZXMgaGF2ZSBhIHN0YXRlIG9iamVjdCBhc3NvY2lhdGVkIHdpdGhcclxuXHRcdFx0Ly8gdGhlbS4gVGhpcyBhbGxvd3MgdXMgdG8gd29yayBhcm91bmQgdGhlIGNhc2Ugd2hlcmUgJC5tb2JpbGUuYmFjaygpXHJcblx0XHRcdC8vIGlzIGNhbGxlZCB0byB0cmFuc2l0aW9uIGZyb20gYW4gZXh0ZXJuYWwgcGFnZSB0byBhbiBlbWJlZGRlZCBwYWdlLlxyXG5cdFx0XHQvLyBJbiB0aGF0IHBhcnRpY3VsYXIgY2FzZSwgYSBoYXNoY2hhbmdlIGV2ZW50IGlzICpOT1QqIGdlbmVyYXRlZCBieSB0aGUgYnJvd3Nlci5cclxuXHRcdFx0Ly8gRW5zdXJpbmcgZWFjaCBoaXN0b3J5IGVudHJ5IGhhcyBhIHN0YXRlIG9iamVjdCBtZWFucyB0aGF0IG9uUG9wU3RhdGUoKVxyXG5cdFx0XHQvLyB3aWxsIGFsd2F5cyB0cmlnZ2VyIG91ciBoYXNoY2hhbmdlIGNhbGxiYWNrIGV2ZW4gd2hlbiBhIGhhc2hjaGFuZ2UgZXZlbnRcclxuXHRcdFx0Ly8gaXMgbm90IGZpcmVkLlxyXG5cdFx0XHR3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoIHN0YXRlLCBzdGF0ZS50aXRsZSB8fCBkb2N1bWVudC50aXRsZSwgaHJlZiApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHN0YXRlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXNoOiBmdW5jdGlvbiggdXJsLCBocmVmICkge1xyXG5cdFx0XHR2YXIgcGFyc2VkLCBsb2MsIGhhc2gsIHJlc29sdmVkO1xyXG5cclxuXHRcdFx0Ly8gR3JhYiB0aGUgaGFzaCBmb3IgcmVjb3JkaW5nLiBJZiB0aGUgcGFzc2VkIHVybCBpcyBhIHBhdGhcclxuXHRcdFx0Ly8gd2UgdXNlZCB0aGUgcGFyc2VkIHZlcnNpb24gb2YgdGhlIHNxdWFzaGVkIHVybCB0byByZWNvbnN0cnVjdCxcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIGFzc3VtZSBpdCdzIGEgaGFzaCBhbmQgc3RvcmUgaXQgZGlyZWN0bHlcclxuXHRcdFx0cGFyc2VkID0gcGF0aC5wYXJzZVVybCggdXJsICk7XHJcblx0XHRcdGxvYyA9IHBhdGgucGFyc2VMb2NhdGlvbigpO1xyXG5cclxuXHRcdFx0aWYgKCBsb2MucGF0aG5hbWUgKyBsb2Muc2VhcmNoID09PSBwYXJzZWQucGF0aG5hbWUgKyBwYXJzZWQuc2VhcmNoICkge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBwYXRobmFtZSBhbmQgc2VhcmNoIG9mIHRoZSBwYXNzZWQgdXJsIGlzIGlkZW50aWNhbCB0byB0aGUgY3VycmVudCBsb2NcclxuXHRcdFx0XHQvLyB0aGVuIHdlIG11c3QgdXNlIHRoZSBoYXNoLiBPdGhlcndpc2UgdGhlcmUgd2lsbCBiZSBubyBldmVudFxyXG5cdFx0XHRcdC8vIGVnLCB1cmwgPSBcIi9mb28vYmFyP2JheiNiYW5nXCIsIGxvY2F0aW9uLmhyZWYgPSBcImh0dHA6Ly9leGFtcGxlLmNvbS9mb28vYmFyP2JhelwiXHJcblx0XHRcdFx0aGFzaCA9IHBhcnNlZC5oYXNoID8gcGFyc2VkLmhhc2ggOiBwYXJzZWQucGF0aG5hbWUgKyBwYXJzZWQuc2VhcmNoO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBwYXRoLmlzUGF0aCh1cmwpICkge1xyXG5cdFx0XHRcdHJlc29sdmVkID0gcGF0aC5wYXJzZVVybCggaHJlZiApO1xyXG5cdFx0XHRcdC8vIElmIHRoZSBwYXNzZWQgdXJsIGlzIGEgcGF0aCwgbWFrZSBpdCBkb21haW4gcmVsYXRpdmUgYW5kIHJlbW92ZSBhbnkgdHJhaWxpbmcgaGFzaFxyXG5cdFx0XHRcdGhhc2ggPSByZXNvbHZlZC5wYXRobmFtZSArIHJlc29sdmVkLnNlYXJjaCArIChwYXRoLmlzUHJlc2VydmFibGVIYXNoKCByZXNvbHZlZC5oYXNoICk/IHJlc29sdmVkLmhhc2gucmVwbGFjZSggXCIjXCIsIFwiXCIgKSA6IFwiXCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGhhc2ggPSB1cmw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBoYXNoO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHJlY29uc2lkZXIgbmFtZVxyXG5cdFx0Z286IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIG5vRXZlbnRzICkge1xyXG5cdFx0XHR2YXIgc3RhdGUsIGhyZWYsIGhhc2gsIHBvcHN0YXRlRXZlbnQsXHJcblx0XHRcdFx0aXNQb3BTdGF0ZUV2ZW50ID0gJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpO1xyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSB1cmwgYXMgaXQgd291bGQgbG9vayBzcXVhc2hlZCBvbiB0byB0aGUgY3VycmVudCByZXNvbHV0aW9uIHVybFxyXG5cdFx0XHRocmVmID0gcGF0aC5zcXVhc2goIHVybCApO1xyXG5cclxuXHRcdFx0Ly8gc29ydCBvdXQgd2hhdCB0aGUgaGFzaCBzb3VsZCBiZSBmcm9tIHRoZSB1cmxcclxuXHRcdFx0aGFzaCA9IHRoaXMuaGFzaCggdXJsLCBocmVmICk7XHJcblxyXG5cdFx0XHQvLyBIZXJlIHdlIHByZXZlbnQgdGhlIG5leHQgaGFzaCBjaGFuZ2Ugb3IgcG9wc3RhdGUgZXZlbnQgZnJvbSBkb2luZyBhbnlcclxuXHRcdFx0Ly8gaGlzdG9yeSBtYW5hZ2VtZW50LiBJbiB0aGUgY2FzZSBvZiBoYXNoY2hhbmdlIHdlIGRvbid0IHN3YWxsb3cgaXRcclxuXHRcdFx0Ly8gaWYgdGhlcmUgd2lsbCBiZSBubyBoYXNoY2hhbmdlIGZpcmVkIChzaW5jZSB0aGF0IHdvbid0IHJlc2V0IHRoZSB2YWx1ZSlcclxuXHRcdFx0Ly8gYW5kIHdpbGwgc3dhbGxvdyB0aGUgZm9sbG93aW5nIGhhc2hjaGFuZ2VcclxuXHRcdFx0aWYgKCBub0V2ZW50cyAmJiBoYXNoICE9PSBwYXRoLnN0cmlwSGFzaChwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoKSApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZlbnROZXh0SGFzaENoYW5nZSA9IG5vRXZlbnRzO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJTVBPUlRBTlQgaW4gdGhlIGNhc2Ugd2hlcmUgcG9wc3RhdGUgaXMgc3VwcG9ydGVkIHRoZSBldmVudCB3aWxsIGJlIHRyaWdnZXJlZFxyXG5cdFx0XHQvLyAgICAgIGRpcmVjdGx5LCBzdG9wcGluZyBmdXJ0aGVyIGV4ZWN1dGlvbiAtIGllLCBpbnRlcnVwdGluZyB0aGUgZmxvdyBvZiB0aGlzXHJcblx0XHRcdC8vICAgICAgbWV0aG9kIGNhbGwgdG8gZmlyZSBiaW5kaW5ncyBhdCB0aGlzIGV4cHJlc3Npb24uIEJlbG93IHRoZSBuYXZpZ2F0ZSBtZXRob2RcclxuXHRcdFx0Ly8gICAgICB0aGVyZSBpcyBhIGJpbmRpbmcgdG8gY2F0Y2ggdGhpcyBldmVudCBhbmQgc3RvcCBpdHMgcHJvcGFnYXRpb24uXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vICAgICAgV2UgdGhlbiB0cmlnZ2VyIGEgbmV3IHBvcHN0YXRlIGV2ZW50IG9uIHRoZSB3aW5kb3cgd2l0aCBhIG51bGwgc3RhdGVcclxuXHRcdFx0Ly8gICAgICBzbyB0aGF0IHRoZSBuYXZpZ2F0ZSBldmVudHMgY2FuIGNvbmNsdWRlIHRoZWlyIHdvcmsgcHJvcGVybHlcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gaWYgdGhlIHVybCBpcyBhIHBhdGggd2Ugd2FudCB0byBwcmVzZXJ2ZSB0aGUgcXVlcnkgcGFyYW1zIHRoYXQgYXJlIGF2YWlsYWJsZSBvblxyXG5cdFx0XHQvLyB0aGUgY3VycmVudCB1cmwuXHJcblx0XHRcdHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSA9IHRydWU7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuXHJcblx0XHRcdC8vIElmIHBvcHN0YXRlIGlzIGVuYWJsZWQgYW5kIHRoZSBicm93c2VyIHRyaWdnZXJzIGBwb3BzdGF0ZWAgZXZlbnRzIHdoZW4gdGhlIGhhc2hcclxuXHRcdFx0Ly8gaXMgc2V0ICh0aGlzIG9mdGVuIGhhcHBlbnMgaW1tZWRpYXRlbHkgaW4gYnJvd3NlcnMgbGlrZSBDaHJvbWUpLCB0aGVuIHRoZVxyXG5cdFx0XHQvLyB0aGlzIGZsYWcgd2lsbCBiZSBzZXQgdG8gZmFsc2UgYWxyZWFkeS4gSWYgaXQncyBhIGJyb3dzZXIgdGhhdCBkb2VzIG5vdCB0cmlnZ2VyXHJcblx0XHRcdC8vIGEgYHBvcHN0YXRlYCBvbiBoYXNoIGFzc2lnbmVtZW50IG9yIGByZXBsYWNlU3RhdGVgIHRoZW4gd2UgbmVlZCBhdm9pZCB0aGUgYnJhbmNoXHJcblx0XHRcdC8vIHRoYXQgc3dhbGxvd3MgdGhlIGV2ZW50IGNyZWF0ZWQgYnkgdGhlIHBvcHN0YXRlIGdlbmVyYXRlZCBieSB0aGUgaGFzaCBhc3NpZ25tZW50XHJcblx0XHRcdC8vIEF0IHRoZSB0aW1lIG9mIHRoaXMgd3JpdGluZyB0aGlzIGhhcHBlbnMgd2l0aCBPcGVyYSAxMiBhbmQgc29tZSB2ZXJzaW9uIG9mIElFXHJcblx0XHRcdHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0c3RhdGUgPSAkLmV4dGVuZCh7XHJcblx0XHRcdFx0dXJsOiBocmVmLFxyXG5cdFx0XHRcdGhhc2g6IGhhc2gsXHJcblx0XHRcdFx0dGl0bGU6IGRvY3VtZW50LnRpdGxlXHJcblx0XHRcdH0sIGRhdGEpO1xyXG5cclxuXHRcdFx0aWYgKCBpc1BvcFN0YXRlRXZlbnQgKSB7XHJcblx0XHRcdFx0cG9wc3RhdGVFdmVudCA9IG5ldyAkLkV2ZW50KCBcInBvcHN0YXRlXCIgKTtcclxuXHRcdFx0XHRwb3BzdGF0ZUV2ZW50Lm9yaWdpbmFsRXZlbnQgPSB7XHJcblx0XHRcdFx0XHR0eXBlOiBcInBvcHN0YXRlXCIsXHJcblx0XHRcdFx0XHRzdGF0ZTogbnVsbFxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHRoaXMuc3F1YXNoKCB1cmwsIHN0YXRlICk7XHJcblxyXG5cdFx0XHRcdC8vIFRyaWdnZXIgYSBuZXcgZmF1eCBwb3BzdGF0ZSBldmVudCB0byByZXBsYWNlIHRoZSBvbmUgdGhhdCB3ZVxyXG5cdFx0XHRcdC8vIGNhdWdodCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIGhhc2ggc2V0dGluZyBhYm92ZS5cclxuXHRcdFx0XHRpZiAoICFub0V2ZW50cyApIHtcclxuXHRcdFx0XHRcdHRoaXMuaWdub3JlUG9wU3RhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUud2luZG93LnRyaWdnZXIoIHBvcHN0YXRlRXZlbnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHJlY29yZCB0aGUgaGlzdG9yeSBlbnRyeSBzbyB0aGF0IHRoZSBpbmZvcm1hdGlvbiBjYW4gYmUgaW5jbHVkZWRcclxuXHRcdFx0Ly8gaW4gaGFzaGNoYW5nZSBldmVudCBkcml2ZW4gbmF2aWdhdGUgZXZlbnRzIGluIGEgc2ltaWxhciBmYXNoaW9uIHRvXHJcblx0XHRcdC8vIHRoZSBzdGF0ZSB0aGF0J3MgcHJvdmlkZWQgYnkgcG9wc3RhdGVcclxuXHRcdFx0dGhpcy5oaXN0b3J5LmFkZCggc3RhdGUudXJsLCBzdGF0ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUaGlzIGJpbmRpbmcgaXMgaW50ZW5kZWQgdG8gY2F0Y2ggdGhlIHBvcHN0YXRlIGV2ZW50cyB0aGF0IGFyZSBmaXJlZFxyXG5cdFx0Ly8gd2hlbiBleGVjdXRpb24gb2YgdGhlIGAkLm5hdmlnYXRlYCBtZXRob2Qgc3RvcHMgYXQgd2luZG93LmxvY2F0aW9uLmhhc2ggPSB1cmw7XHJcblx0XHQvLyBhbmQgY29tcGxldGVseSBwcmV2ZW50IHRoZW0gZnJvbSBwcm9wYWdhdGluZy4gVGhlIHBvcHN0YXRlIGV2ZW50IHdpbGwgdGhlbiBiZVxyXG5cdFx0Ly8gcmV0cmlnZ2VyZWQgYWZ0ZXIgZXhlY3V0aW9uIHJlc3VtZXNcclxuXHRcdC8vXHJcblx0XHQvLyBUT0RPIGdyYWIgdGhlIG9yaWdpbmFsIGV2ZW50IGhlcmUgYW5kIHVzZSBpdCBmb3IgdGhlIHN5bnRoZXRpYyBldmVudCBpbiB0aGVcclxuXHRcdC8vICAgICAgc2Vjb25kIGhhbGYgb2YgdGhlIG5hdmlnYXRlIGV4ZWN1dGlvbiB0aGF0IHdpbGwgZm9sbG93IHRoaXMgYmluZGluZ1xyXG5cdFx0cG9wc3RhdGU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGhhc2gsIHN0YXRlO1xyXG5cclxuXHRcdFx0Ly8gUGFydGx5IHRvIHN1cHBvcnQgb3VyIHRlc3Qgc3VpdGUgd2hpY2ggbWFudWFsbHkgYWx0ZXJzIHRoZSBzdXBwb3J0XHJcblx0XHRcdC8vIHZhbHVlIHRvIHRlc3QgaGFzaGNoYW5nZS4gUGFydGx5IHRvIHByZXZlbnQgYWxsIGFyb3VuZCB3ZWlyZG5lc3NcclxuXHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgcG9wc3RhdGUgdHJpZ2dlcmVkIGJ5IHRoZSBhY3R1YWwgYWx0ZXJhdGlvbiBvZiB0aGUgaGFzaFxyXG5cdFx0XHQvLyBwcmV2ZW50IGl0IGNvbXBsZXRlbHkuIEhpc3RvcnkgaXMgdHJhY2tlZCBtYW51YWxseVxyXG5cdFx0XHRpZiAoIHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoaXMgaXMgdGhlIHBvcHN0YXRlIHRyaWdnZXJlZCBhZnRlciB0aGUgYHJlcGxhY2VTdGF0ZWAgY2FsbCBpbiB0aGUgZ29cclxuXHRcdFx0Ly8gbWV0aG9kLCB0aGVuIHNpbXBseSBpZ25vcmUgaXQuIFRoZSBoaXN0b3J5IGVudHJ5IGhhcyBhbHJlYWR5IGJlZW4gY2FwdHVyZWRcclxuXHRcdFx0aWYgKCB0aGlzLmlnbm9yZVBvcFN0YXRlICkge1xyXG5cdFx0XHRcdHRoaXMuaWdub3JlUG9wU3RhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZXJlIGlzIG5vIHN0YXRlLCBhbmQgdGhlIGhpc3Rvcnkgc3RhY2sgbGVuZ3RoIGlzIG9uZSB3ZXJlXHJcblx0XHRcdC8vIHByb2JhYmx5IGdldHRpbmcgdGhlIHBhZ2UgbG9hZCBwb3BzdGF0ZSBmaXJlZCBieSBicm93c2VycyBsaWtlIGNocm9tZVxyXG5cdFx0XHQvLyBhdm9pZCBpdCBhbmQgc2V0IHRoZSBvbmUgdGltZSBmbGFnIHRvIGZhbHNlLlxyXG5cdFx0XHQvLyBUT0RPOiBEbyB3ZSByZWFsbHkgbmVlZCBhbGwgdGhlc2UgY29uZGl0aW9ucz8gQ29tcGFyaW5nIGxvY2F0aW9uIGhyZWZzXHJcblx0XHRcdC8vIHNob3VsZCBiZSBzdWZmaWNpZW50LlxyXG5cdFx0XHRpZiAoICFldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlICYmXHJcblx0XHRcdFx0dGhpcy5oaXN0b3J5LnN0YWNrLmxlbmd0aCA9PT0gMSAmJlxyXG5cdFx0XHRcdHRoaXMuaWdub3JlSW5pdGlhbEhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0dGhpcy5pZ25vcmVJbml0aWFsSGFzaENoYW5nZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHRpZiAoIGxvY2F0aW9uLmhyZWYgPT09IGluaXRpYWxIcmVmICkge1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGFjY291bnQgZm9yIGRpcmVjdCBtYW5pcHVsYXRpb24gb2YgdGhlIGhhc2guIFRoYXQgaXMsIHdlIHdpbGwgcmVjZWl2ZSBhIHBvcHN0YXRlXHJcblx0XHRcdC8vIHdoZW4gdGhlIGhhc2ggaXMgY2hhbmdlZCBieSBhc3NpZ25tZW50LCBhbmQgaXQgd29uJ3QgaGF2ZSBhIHN0YXRlIGFzc29jaWF0ZWQuIFdlXHJcblx0XHRcdC8vIHRoZW4gbmVlZCB0byBzcXVhc2ggdGhlIGhhc2guIFNlZSBiZWxvdyBmb3IgaGFuZGxpbmcgb2YgaGFzaCBhc3NpZ25tZW50IHRoYXRcclxuXHRcdFx0Ly8gbWF0Y2hlcyBhbiBleGlzdGluZyBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdC8vIFRPRE8gaXQgbWlnaHQgYmUgYmV0dGVyIHRvIG9ubHkgYWRkIHRvIHRoZSBoaXN0b3J5IHN0YWNrXHJcblx0XHRcdC8vICAgICAgd2hlbiB0aGUgaGFzaCBpcyBhZGphY2VudCB0byB0aGUgYWN0aXZlIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0aGFzaCA9IHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblx0XHRcdGlmICggIWV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgJiYgaGFzaCApIHtcclxuXHRcdFx0XHQvLyBzcXVhc2ggdGhlIGhhc2ggdGhhdCdzIGJlZW4gYXNzaWduZWQgb24gdGhlIFVSTCB3aXRoIHJlcGxhY2VTdGF0ZVxyXG5cdFx0XHRcdC8vIGFsc28gZ3JhYiB0aGUgcmVzdWx0aW5nIHN0YXRlIG9iamVjdCBmb3Igc3RvcmFnZVxyXG5cdFx0XHRcdHN0YXRlID0gdGhpcy5zcXVhc2goIGhhc2ggKTtcclxuXHJcblx0XHRcdFx0Ly8gcmVjb3JkIHRoZSBuZXcgaGFzaCBhcyBhbiBhZGRpdGlvbmFsIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHQvLyB0byBtYXRjaCB0aGUgYnJvd3NlcidzIHRyZWF0bWVudCBvZiBoYXNoIGFzc2lnbm1lbnRcclxuXHRcdFx0XHR0aGlzLmhpc3RvcnkuYWRkKCBzdGF0ZS51cmwsIHN0YXRlICk7XHJcblxyXG5cdFx0XHRcdC8vIHBhc3MgdGhlIG5ld2x5IGNyZWF0ZWQgc3RhdGUgaW5mb3JtYXRpb25cclxuXHRcdFx0XHQvLyBhbG9uZyB3aXRoIHRoZSBldmVudFxyXG5cdFx0XHRcdGV2ZW50Lmhpc3RvcnlTdGF0ZSA9IHN0YXRlO1xyXG5cclxuXHRcdFx0XHQvLyBkbyBub3QgYWx0ZXIgaGlzdG9yeSwgd2UndmUgYWRkZWQgYSBuZXcgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdC8vIHNvIHdlIGtub3cgd2hlcmUgd2UgYXJlXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBhbGwgZWxzZSBmYWlscyB0aGlzIGlzIGEgcG9wc3RhdGUgdGhhdCBjb21lcyBmcm9tIHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uc1xyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IHRoZSBzdGF0ZSBvZiBvdXIgaGlzdG9yeSBzdGFjayBwcm9wZXJseSwgYW5kIHJlY29yZCB0aGUgZGlyZWN0aW9uYWxpdHlcclxuXHRcdFx0dGhpcy5oaXN0b3J5LmRpcmVjdCh7XHJcblx0XHRcdFx0dXJsOiAoZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSB8fCB7fSkudXJsIHx8IGhhc2gsXHJcblxyXG5cdFx0XHRcdC8vIFdoZW4gdGhlIHVybCBpcyBlaXRoZXIgZm9yd2FyZCBvciBiYWNrd2FyZCBpbiBoaXN0b3J5IGluY2x1ZGUgdGhlIGVudHJ5XHJcblx0XHRcdFx0Ly8gYXMgZGF0YSBvbiB0aGUgZXZlbnQgb2JqZWN0IGZvciBtZXJnaW5nIGFzIGRhdGEgaW4gdGhlIG5hdmlnYXRlIGV2ZW50XHJcblx0XHRcdFx0cHJlc2VudDogZnVuY3Rpb24oIGhpc3RvcnlFbnRyeSwgZGlyZWN0aW9uICkge1xyXG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QgdG8gcGFzcyBkb3duIGFzIHRoZSBuYXZpZ2F0ZSBldmVudCBkYXRhXHJcblx0XHRcdFx0XHRldmVudC5oaXN0b3J5U3RhdGUgPSAkLmV4dGVuZCh7fSwgaGlzdG9yeUVudHJ5KTtcclxuXHRcdFx0XHRcdGV2ZW50Lmhpc3RvcnlTdGF0ZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gTk9URSBtdXN0IGJpbmQgYmVmb3JlIGBuYXZpZ2F0ZWAgc3BlY2lhbCBldmVudCBoYXNoY2hhbmdlIGJpbmRpbmcgb3RoZXJ3aXNlIHRoZVxyXG5cdFx0Ly8gICAgICBuYXZpZ2F0aW9uIGRhdGEgd29uJ3QgYmUgYXR0YWNoZWQgdG8gdGhlIGhhc2hjaGFuZ2UgZXZlbnQgaW4gdGltZSBmb3IgdGhvc2VcclxuXHRcdC8vICAgICAgYmluZGluZ3MgdG8gYXR0YWNoIGl0IHRvIHRoZSBgbmF2aWdhdGVgIHNwZWNpYWwgZXZlbnRcclxuXHRcdC8vIFRPRE8gYWRkIGEgY2hlY2sgaGVyZSB0aGF0IGBoYXNoY2hhbmdlLm5hdmlnYXRlYCBpcyBib3VuZCBhbHJlYWR5IG90aGVyd2lzZSBpdCdzXHJcblx0XHQvLyAgICAgIGJyb2tlbiAoZXhjZXB0aW9uPylcclxuXHRcdGhhc2hjaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGhpc3RvcnksIGhhc2g7XHJcblxyXG5cdFx0XHQvLyBJZiBoYXNoY2hhbmdlIGxpc3RlbmluZyBpcyBleHBsaWNpdGx5IGRpc2FibGVkIG9yIHB1c2hzdGF0ZSBpcyBzdXBwb3J0ZWRcclxuXHRcdFx0Ly8gYXZvaWQgbWFraW5nIHVzZSBvZiB0aGUgaGFzaGNoYW5nZSBoYW5kbGVyLlxyXG5cdFx0XHRpZiAoISQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc0hhc2hDaGFuZ2VFbmFibGVkKCkgfHxcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBPbiBvY2Nhc2lvbiBleHBsaWNpdGx5IHdhbnQgdG8gcHJldmVudCB0aGUgbmV4dCBoYXNoIGZyb20gcHJvcG9nYXRpbmcgYmVjYXVzZSB3ZSBvbmx5XHJcblx0XHRcdC8vIHdpdGggdG8gYWx0ZXIgdGhlIHVybCB0byByZXByZXNlbnQgdGhlIG5ldyBzdGF0ZSBkbyBzbyBoZXJlXHJcblx0XHRcdGlmICggdGhpcy5wcmV2ZW50TmV4dEhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2ZW50TmV4dEhhc2hDaGFuZ2UgPSBmYWxzZTtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XHJcblx0XHRcdGhhc2ggPSBwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIGhhc2hjaGFuZ2UgY2F1c2VkIGJ5IHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uXHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgdGhlIHN0YXRlIG9mIG91ciBoaXN0b3J5IHN0YWNrIHByb3Blcmx5XHJcblx0XHRcdHRoaXMuaGlzdG9yeS5kaXJlY3Qoe1xyXG5cdFx0XHRcdHVybDogaGFzaCxcclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB0aGUgdXJsIGlzIGVpdGhlciBmb3J3YXJkIG9yIGJhY2t3YXJkIGluIGhpc3RvcnkgaW5jbHVkZSB0aGUgZW50cnlcclxuXHRcdFx0XHQvLyBhcyBkYXRhIG9uIHRoZSBldmVudCBvYmplY3QgZm9yIG1lcmdpbmcgYXMgZGF0YSBpbiB0aGUgbmF2aWdhdGUgZXZlbnRcclxuXHRcdFx0XHRwcmVzZW50OiBmdW5jdGlvbiggaGlzdG9yeUVudHJ5LCBkaXJlY3Rpb24gKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gY3JlYXRlIGEgbmV3IG9iamVjdCB0byBwYXNzIGRvd24gYXMgdGhlIG5hdmlnYXRlIGV2ZW50IGRhdGFcclxuXHRcdFx0XHRcdGV2ZW50Lmhhc2hjaGFuZ2VTdGF0ZSA9ICQuZXh0ZW5kKHt9LCBoaXN0b3J5RW50cnkpO1xyXG5cdFx0XHRcdFx0ZXZlbnQuaGFzaGNoYW5nZVN0YXRlLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHRcdFx0XHR9LFxyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHdlIGRvbid0IGZpbmQgYSBoYXNoIGluIG91ciBoaXN0b3J5IGNsZWFybHkgd2UncmUgYWltaW5nIHRvIGdvIHRoZXJlXHJcblx0XHRcdFx0Ly8gcmVjb3JkIHRoZSBlbnRyeSBhcyBuZXcgZm9yIGZ1dHVyZSB0cmF2ZXJzYWxcclxuXHRcdFx0XHQvL1xyXG5cdFx0XHRcdC8vIE5PVEUgaXQncyBub3QgZW50aXJlbHkgY2xlYXIgdGhhdCB0aGlzIGlzIHRoZSByaWdodCB0aGluZyB0byBkbyBnaXZlbiB0aGF0IHdlXHJcblx0XHRcdFx0Ly8gICAgICBjYW4ndCBrbm93IHRoZSB1c2VycyBpbnRlbnRpb24uIEl0IG1pZ2h0IGJlIGJldHRlciB0byBleHBsaWNpdGx5IF9ub3RfXHJcblx0XHRcdFx0Ly8gICAgICBzdXBwb3J0IGxvY2F0aW9uLmhhc2ggYXNzaWdubWVudCBpbiBwcmVmZXJlbmNlIHRvICQubmF2aWdhdGUgY2FsbHNcclxuXHRcdFx0XHQvLyBUT0RPIGZpcnN0IGFyZyB0byBhZGQgc2hvdWxkIGJlIHRoZSBocmVmLCBidXQgaXQgY2F1c2VzIGlzc3VlcyBpbiBpZGVudGlmeWluZ1xyXG5cdFx0XHRcdC8vICAgICAgZW1iZWRlZCBwYWdlc1xyXG5cdFx0XHRcdG1pc3Npbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aGlzdG9yeS5hZGQoIGhhc2gsIHtcclxuXHRcdFx0XHRcdFx0aGFzaDogaGFzaCxcclxuXHRcdFx0XHRcdFx0dGl0bGU6IGRvY3VtZW50LnRpdGxlXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdC8vIFRPRE8gY29uc2lkZXIgcXVldWVpbmcgbmF2aWdhdGlvbiBhY3Rpdml0eSB1bnRpbCBwcmV2aW91cyBhY3Rpdml0aWVzIGhhdmUgY29tcGxldGVkXHJcblx0Ly8gICAgICBzbyB0aGF0IGVuZCB1c2VycyBkb24ndCBoYXZlIHRvIHRoaW5rIGFib3V0IGl0LiBQdW50aW5nIGZvciBub3dcclxuXHQvLyBUT0RPICEhIG1vdmUgdGhlIGV2ZW50IGJpbmRpbmdzIGludG8gY2FsbGJhY2tzIG9uIHRoZSBuYXZpZ2F0ZSBldmVudFxyXG5cdCQubW9iaWxlLm5hdmlnYXRlID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgbm9FdmVudHMgKSB7XHJcblx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5uYXZpZ2F0b3IuZ28oIHVybCwgZGF0YSwgbm9FdmVudHMgKTtcclxuXHR9O1xyXG5cclxuXHQvLyBleHBvc2UgdGhlIGhpc3Rvcnkgb24gdGhlIG5hdmlnYXRlIG1ldGhvZCBpbiBhbnRpY2lwYXRpb24gb2YgZnVsbCBpbnRlZ3JhdGlvbiB3aXRoXHJcblx0Ly8gZXhpc3RpbmcgbmF2aWdhdGlvbiBmdW5jdGlvbmFsdHkgdGhhdCBpcyB0aWdodGx5IGNvdXBsZWQgdG8gdGhlIGhpc3RvcnkgaW5mb3JtYXRpb25cclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5ID0gbmV3ICQubW9iaWxlLkhpc3RvcnkoKTtcclxuXHJcblx0Ly8gaW5zdGFudGlhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIG5hdmlnYXRvciBmb3IgdXNlIHdpdGhpbiB0aGUgJC5uYXZpZ2F0ZSBtZXRob2RcclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZS5uYXZpZ2F0b3IgPSBuZXcgJC5tb2JpbGUuTmF2aWdhdG9yKCAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5ICk7XHJcblxyXG5cdHZhciBsb2MgPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKTtcclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFkZCggbG9jLmhyZWYsIHtoYXNoOiBsb2MuaGFzaH0gKTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdHZhciBwcm9wcyA9IHtcclxuXHRcdFx0XCJhbmltYXRpb25cIjoge30sXHJcblx0XHRcdFwidHJhbnNpdGlvblwiOiB7fVxyXG5cdFx0fSxcclxuXHRcdHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKSxcclxuXHRcdHZlbmRvclByZWZpeGVzID0gWyBcIlwiLCBcIndlYmtpdC1cIiwgXCJtb3otXCIsIFwiby1cIiBdO1xyXG5cclxuXHQkLmVhY2goIFsgXCJhbmltYXRpb25cIiwgXCJ0cmFuc2l0aW9uXCIgXSwgZnVuY3Rpb24oIGksIHRlc3QgKSB7XHJcblxyXG5cdFx0Ly8gR2V0IGNvcnJlY3QgbmFtZSBmb3IgdGVzdFxyXG5cdFx0dmFyIHRlc3ROYW1lID0gKCBpID09PSAwICkgPyB0ZXN0ICsgXCItXCIgKyBcIm5hbWVcIiA6IHRlc3Q7XHJcblxyXG5cdFx0JC5lYWNoKCB2ZW5kb3JQcmVmaXhlcywgZnVuY3Rpb24oIGosIHByZWZpeCApIHtcclxuXHRcdFx0aWYgKCB0ZXN0RWxlbWVudC5zdHlsZVsgJC5jYW1lbENhc2UoIHByZWZpeCArIHRlc3ROYW1lICkgXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gPSBwcmVmaXg7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTZXQgZXZlbnQgYW5kIGR1cmF0aW9uIG5hbWVzIGZvciBsYXRlciB1c2VcclxuXHRcdHByb3BzWyB0ZXN0IF1bIFwiZHVyYXRpb25cIiBdID1cclxuXHRcdFx0JC5jYW1lbENhc2UoIHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSArIHRlc3QgKyBcIi1cIiArIFwiZHVyYXRpb25cIiApO1xyXG5cdFx0cHJvcHNbIHRlc3QgXVsgXCJldmVudFwiIF0gPVxyXG5cdFx0XHQkLmNhbWVsQ2FzZSggcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdICsgdGVzdCArIFwiLVwiICsgXCJlbmRcIiApO1xyXG5cclxuXHRcdC8vIEFsbCBsb3dlciBjYXNlIGlmIG5vdCBhIHZlbmRvciBwcm9wXHJcblx0XHRpZiAoIHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSA9PT0gXCJcIiApIHtcclxuXHRcdFx0cHJvcHNbIHRlc3QgXVsgXCJldmVudFwiIF0gPSBwcm9wc1sgdGVzdCBdWyBcImV2ZW50XCIgXS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBJZiBhIHZhbGlkIHByZWZpeCB3YXMgZm91bmQgdGhlbiB0aGUgaXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyXHJcblx0JC5zdXBwb3J0LmNzc1RyYW5zaXRpb25zID0gKCBwcm9wc1sgXCJ0cmFuc2l0aW9uXCIgXVsgXCJwcmVmaXhcIiBdICE9PSB1bmRlZmluZWQgKTtcclxuXHQkLnN1cHBvcnQuY3NzQW5pbWF0aW9ucyA9ICggcHJvcHNbIFwiYW5pbWF0aW9uXCIgXVsgXCJwcmVmaXhcIiBdICE9PSB1bmRlZmluZWQgKTtcclxuXHJcblx0Ly8gUmVtb3ZlIHRoZSB0ZXN0RWxlbWVudFxyXG5cdCQoIHRlc3RFbGVtZW50ICkucmVtb3ZlKCk7XHJcblxyXG5cdC8vIEFuaW1hdGlvbiBjb21wbGV0ZSBjYWxsYmFja1xyXG5cdCQuZm4uYW5pbWF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiggY2FsbGJhY2ssIHR5cGUsIGZhbGxiYWNrVGltZSApIHtcclxuXHRcdHZhciB0aW1lciwgZHVyYXRpb24sXHJcblx0XHRcdHRoYXQgPSB0aGlzLFxyXG5cdFx0XHRldmVudEJpbmRpbmcgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0Ly8gQ2xlYXIgdGhlIHRpbWVyIHNvIHdlIGRvbid0IGNhbGwgY2FsbGJhY2sgdHdpY2VcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVyICk7XHJcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRhbmltYXRpb25UeXBlID0gKCAhdHlwZSB8fCB0eXBlID09PSBcImFuaW1hdGlvblwiICkgPyBcImFuaW1hdGlvblwiIDogXCJ0cmFuc2l0aW9uXCI7XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIHNlbGVjdGVkIHR5cGUgaXMgc3VwcG9ydGVkIGJ5IGJyb3dzZXJcclxuXHRcdGlmICggKCAkLnN1cHBvcnQuY3NzVHJhbnNpdGlvbnMgJiYgYW5pbWF0aW9uVHlwZSA9PT0gXCJ0cmFuc2l0aW9uXCIgKSB8fFxyXG5cdFx0XHQoICQuc3VwcG9ydC5jc3NBbmltYXRpb25zICYmIGFuaW1hdGlvblR5cGUgPT09IFwiYW5pbWF0aW9uXCIgKSApIHtcclxuXHJcblx0XHRcdC8vIElmIGEgZmFsbGJhY2sgdGltZSB3YXMgbm90IHBhc3NlZCBzZXQgb25lXHJcblx0XHRcdGlmICggZmFsbGJhY2tUaW1lID09PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgd2FzIG5vdCBib3VuZCB0byBkb2N1bWVudCBiZWZvcmUgY2hlY2tpbmcgLmNzc1xyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmNvbnRleHQgIT09IGRvY3VtZW50ICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFBhcnNlIHRoZSBkdXJyYXRpb24gc2luY2UgaXRzIGluIHNlY29uZCBtdWx0aXBsZSBieSAxMDAwIGZvciBtaWxsaXNlY29uZHNcclxuXHRcdFx0XHRcdC8vIE11bHRpcGx5IGJ5IDMgdG8gbWFrZSBzdXJlIHdlIGdpdmUgdGhlIGFuaW1hdGlvbiBwbGVudHkgb2YgdGltZS5cclxuXHRcdFx0XHRcdGR1cmF0aW9uID0gcGFyc2VGbG9hdChcclxuXHRcdFx0XHRcdFx0JCggdGhpcyApLmNzcyggcHJvcHNbIGFuaW1hdGlvblR5cGUgXS5kdXJhdGlvbiApXHJcblx0XHRcdFx0XHQpICogMzAwMDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIElmIHdlIGNvdWxkIG5vdCByZWFkIGEgZHVyYXRpb24gdXNlIHRoZSBkZWZhdWx0XHJcblx0XHRcdFx0aWYgKCBkdXJhdGlvbiA9PT0gMCB8fCBkdXJhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKCBkdXJhdGlvbiApICkge1xyXG5cdFx0XHRcdFx0ZHVyYXRpb24gPSAkLmZuLmFuaW1hdGlvbkNvbXBsZXRlLmRlZmF1bHREdXJhdGlvbjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldHMgdXAgdGhlIGZhbGxiYWNrIGlmIGV2ZW50IG5ldmVyIGNvbWVzXHJcblx0XHRcdHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhhdCApLm9mZiggcHJvcHNbIGFuaW1hdGlvblR5cGUgXS5ldmVudCwgZXZlbnRCaW5kaW5nICk7XHJcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoYXQgKTtcclxuXHRcdFx0fSwgZHVyYXRpb24gKTtcclxuXHJcblx0XHRcdC8vIEJpbmQgdGhlIGV2ZW50XHJcblx0XHRcdHJldHVybiAkKCB0aGlzICkub25lKCBwcm9wc1sgYW5pbWF0aW9uVHlwZSBdLmV2ZW50LCBldmVudEJpbmRpbmcgKTtcclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHQvLyBDU1MgYW5pbWF0aW9uIC8gdHJhbnNpdGlvbnMgbm90IHN1cHBvcnRlZFxyXG5cdFx0XHQvLyBEZWZlciBleGVjdXRpb24gZm9yIGNvbnNpc3RlbmN5IGJldHdlZW4gd2Via2l0L25vbiB3ZWJraXRcclxuXHRcdFx0c2V0VGltZW91dCggJC5wcm94eSggY2FsbGJhY2ssIHRoaXMgKSwgMCApO1xyXG5cdFx0XHRyZXR1cm4gJCggdGhpcyApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEFsbG93IGRlZmF1bHQgY2FsbGJhY2sgdG8gYmUgY29uZmlndXJlZCBvbiBtb2JpbGVJbml0XHJcblx0JC5mbi5hbmltYXRpb25Db21wbGV0ZS5kZWZhdWx0RHVyYXRpb24gPSAxMDAwO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vLyBUaGlzIHBsdWdpbiBpcyBhbiBleHBlcmltZW50IGZvciBhYnN0cmFjdGluZyBhd2F5IHRoZSB0b3VjaCBhbmQgbW91c2VcclxuLy8gZXZlbnRzIHNvIHRoYXQgZGV2ZWxvcGVycyBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IHdoaWNoIG1ldGhvZCBvZiBpbnB1dFxyXG4vLyB0aGUgZGV2aWNlIHRoZWlyIGRvY3VtZW50IGlzIGxvYWRlZCBvbiBzdXBwb3J0cy5cclxuLy9cclxuLy8gVGhlIGlkZWEgaGVyZSBpcyB0byBhbGxvdyB0aGUgZGV2ZWxvcGVyIHRvIHJlZ2lzdGVyIGxpc3RlbmVycyBmb3IgdGhlXHJcbi8vIGJhc2ljIG1vdXNlIGV2ZW50cywgc3VjaCBhcyBtb3VzZWRvd24sIG1vdXNlbW92ZSwgbW91c2V1cCwgYW5kIGNsaWNrLFxyXG4vLyBhbmQgdGhlIHBsdWdpbiB3aWxsIHRha2UgY2FyZSBvZiByZWdpc3RlcmluZyB0aGUgY29ycmVjdCBsaXN0ZW5lcnNcclxuLy8gYmVoaW5kIHRoZSBzY2VuZXMgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciBhdCB0aGUgZmFzdGVzdCBwb3NzaWJsZSB0aW1lXHJcbi8vIGZvciB0aGF0IGRldmljZSwgd2hpbGUgc3RpbGwgcmV0YWluaW5nIHRoZSBvcmRlciBvZiBldmVudCBmaXJpbmcgaW5cclxuLy8gdGhlIHRyYWRpdGlvbmFsIG1vdXNlIGVudmlyb25tZW50LCBzaG91bGQgbXVsdGlwbGUgaGFuZGxlcnMgYmUgcmVnaXN0ZXJlZFxyXG4vLyBvbiB0aGUgc2FtZSBlbGVtZW50IGZvciBkaWZmZXJlbnQgZXZlbnRzLlxyXG4vL1xyXG4vLyBUaGUgY3VycmVudCB2ZXJzaW9uIGV4cG9zZXMgdGhlIGZvbGxvd2luZyB2aXJ0dWFsIGV2ZW50cyB0byBqUXVlcnkgYmluZCBtZXRob2RzOlxyXG4vLyBcInZtb3VzZW92ZXIgdm1vdXNlZG93biB2bW91c2Vtb3ZlIHZtb3VzZXVwIHZjbGljayB2bW91c2VvdXQgdm1vdXNlY2FuY2VsXCJcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGRhdGFQcm9wZXJ0eU5hbWUgPSBcInZpcnR1YWxNb3VzZUJpbmRpbmdzXCIsXHJcblx0dG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUgPSBcInZpcnR1YWxUb3VjaElEXCIsXHJcblx0dmlydHVhbEV2ZW50TmFtZXMgPSBcInZtb3VzZW92ZXIgdm1vdXNlZG93biB2bW91c2Vtb3ZlIHZtb3VzZXVwIHZjbGljayB2bW91c2VvdXQgdm1vdXNlY2FuY2VsXCIuc3BsaXQoIFwiIFwiICksXHJcblx0dG91Y2hFdmVudFByb3BzID0gXCJjbGllbnRYIGNsaWVudFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZXCIuc3BsaXQoIFwiIFwiICksXHJcblx0bW91c2VIb29rUHJvcHMgPSAkLmV2ZW50Lm1vdXNlSG9va3MgPyAkLmV2ZW50Lm1vdXNlSG9va3MucHJvcHMgOiBbXSxcclxuXHRtb3VzZUV2ZW50UHJvcHMgPSAkLmV2ZW50LnByb3BzLmNvbmNhdCggbW91c2VIb29rUHJvcHMgKSxcclxuXHRhY3RpdmVEb2NIYW5kbGVycyA9IHt9LFxyXG5cdHJlc2V0VGltZXJJRCA9IDAsXHJcblx0c3RhcnRYID0gMCxcclxuXHRzdGFydFkgPSAwLFxyXG5cdGRpZFNjcm9sbCA9IGZhbHNlLFxyXG5cdGNsaWNrQmxvY2tMaXN0ID0gW10sXHJcblx0YmxvY2tNb3VzZVRyaWdnZXJzID0gZmFsc2UsXHJcblx0YmxvY2tUb3VjaFRyaWdnZXJzID0gZmFsc2UsXHJcblx0ZXZlbnRDYXB0dXJlU3VwcG9ydGVkID0gXCJhZGRFdmVudExpc3RlbmVyXCIgaW4gZG9jdW1lbnQsXHJcblx0JGRvY3VtZW50ID0gJCggZG9jdW1lbnQgKSxcclxuXHRuZXh0VG91Y2hJRCA9IDEsXHJcblx0bGFzdFRvdWNoSUQgPSAwLCB0aHJlc2hvbGQsXHJcblx0aTtcclxuXHJcbiQudm1vdXNlID0ge1xyXG5cdG1vdmVEaXN0YW5jZVRocmVzaG9sZDogMTAsXHJcblx0Y2xpY2tEaXN0YW5jZVRocmVzaG9sZDogMTAsXHJcblx0cmVzZXRUaW1lckR1cmF0aW9uOiAxNTAwXHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXROYXRpdmVFdmVudCggZXZlbnQgKSB7XHJcblxyXG5cdHdoaWxlICggZXZlbnQgJiYgdHlwZW9mIGV2ZW50Lm9yaWdpbmFsRXZlbnQgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRldmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblx0fVxyXG5cdHJldHVybiBldmVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVmlydHVhbEV2ZW50KCBldmVudCwgZXZlbnRUeXBlICkge1xyXG5cclxuXHR2YXIgdCA9IGV2ZW50LnR5cGUsXHJcblx0XHRvZSwgcHJvcHMsIG5lLCBwcm9wLCBjdCwgdG91Y2gsIGksIGosIGxlbjtcclxuXHJcblx0ZXZlbnQgPSAkLkV2ZW50KCBldmVudCApO1xyXG5cdGV2ZW50LnR5cGUgPSBldmVudFR5cGU7XHJcblxyXG5cdG9lID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHRwcm9wcyA9ICQuZXZlbnQucHJvcHM7XHJcblxyXG5cdC8vIGFkZHJlc3NlcyBzZXBhcmF0aW9uIG9mICQuZXZlbnQucHJvcHMgaW4gdG8gJC5ldmVudC5tb3VzZUhvb2sucHJvcHMgYW5kIElzc3VlIDMyODBcclxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzMyODBcclxuXHRpZiAoIHQuc2VhcmNoKCAvXihtb3VzZXxjbGljaykvICkgPiAtMSApIHtcclxuXHRcdHByb3BzID0gbW91c2VFdmVudFByb3BzO1xyXG5cdH1cclxuXHJcblx0Ly8gY29weSBvcmlnaW5hbCBldmVudCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIG5ldyBldmVudFxyXG5cdC8vIHRoaXMgd291bGQgaGFwcGVuIGlmIHdlIGNvdWxkIGNhbGwgJC5ldmVudC5maXggaW5zdGVhZCBvZiAkLkV2ZW50XHJcblx0Ly8gYnV0IHdlIGRvbid0IGhhdmUgYSB3YXkgdG8gZm9yY2UgYW4gZXZlbnQgdG8gYmUgZml4ZWQgbXVsdGlwbGUgdGltZXNcclxuXHRpZiAoIG9lICkge1xyXG5cdFx0Zm9yICggaSA9IHByb3BzLmxlbmd0aCwgcHJvcDsgaTsgKSB7XHJcblx0XHRcdHByb3AgPSBwcm9wc1sgLS1pIF07XHJcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvZVsgcHJvcCBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gbWFrZSBzdXJlIHRoYXQgaWYgdGhlIG1vdXNlIGFuZCBjbGljayB2aXJ0dWFsIGV2ZW50cyBhcmUgZ2VuZXJhdGVkXHJcblx0Ly8gd2l0aG91dCBhIC53aGljaCBvbmUgaXMgZGVmaW5lZFxyXG5cdGlmICggdC5zZWFyY2goL21vdXNlKGRvd258dXApfGNsaWNrLykgPiAtMSAmJiAhZXZlbnQud2hpY2ggKSB7XHJcblx0XHRldmVudC53aGljaCA9IDE7XHJcblx0fVxyXG5cclxuXHRpZiAoIHQuc2VhcmNoKC9edG91Y2gvKSAhPT0gLTEgKSB7XHJcblx0XHRuZSA9IGdldE5hdGl2ZUV2ZW50KCBvZSApO1xyXG5cdFx0dCA9IG5lLnRvdWNoZXM7XHJcblx0XHRjdCA9IG5lLmNoYW5nZWRUb3VjaGVzO1xyXG5cdFx0dG91Y2ggPSAoIHQgJiYgdC5sZW5ndGggKSA/IHRbMF0gOiAoICggY3QgJiYgY3QubGVuZ3RoICkgPyBjdFsgMCBdIDogdW5kZWZpbmVkICk7XHJcblxyXG5cdFx0aWYgKCB0b3VjaCApIHtcclxuXHRcdFx0Zm9yICggaiA9IDAsIGxlbiA9IHRvdWNoRXZlbnRQcm9wcy5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG5cdFx0XHRcdHByb3AgPSB0b3VjaEV2ZW50UHJvcHNbIGogXTtcclxuXHRcdFx0XHRldmVudFsgcHJvcCBdID0gdG91Y2hbIHByb3AgXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGV2ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBlbGVtZW50ICkge1xyXG5cclxuXHR2YXIgZmxhZ3MgPSB7fSxcclxuXHRcdGIsIGs7XHJcblxyXG5cdHdoaWxlICggZWxlbWVudCApIHtcclxuXHJcblx0XHRiID0gJC5kYXRhKCBlbGVtZW50LCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblxyXG5cdFx0Zm9yICggIGsgaW4gYiApIHtcclxuXHRcdFx0aWYgKCBiWyBrIF0gKSB7XHJcblx0XHRcdFx0ZmxhZ3NbIGsgXSA9IGZsYWdzLmhhc1ZpcnR1YWxCaW5kaW5nID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHR9XHJcblx0cmV0dXJuIGZsYWdzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDbG9zZXN0RWxlbWVudFdpdGhWaXJ0dWFsQmluZGluZyggZWxlbWVudCwgZXZlbnRUeXBlICkge1xyXG5cdHZhciBiO1xyXG5cdHdoaWxlICggZWxlbWVudCApIHtcclxuXHJcblx0XHRiID0gJC5kYXRhKCBlbGVtZW50LCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblxyXG5cdFx0aWYgKCBiICYmICggIWV2ZW50VHlwZSB8fCBiWyBldmVudFR5cGUgXSApICkge1xyXG5cdFx0XHRyZXR1cm4gZWxlbWVudDtcclxuXHRcdH1cclxuXHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVUb3VjaEJpbmRpbmdzKCkge1xyXG5cdGJsb2NrVG91Y2hUcmlnZ2VycyA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlVG91Y2hCaW5kaW5ncygpIHtcclxuXHRibG9ja1RvdWNoVHJpZ2dlcnMgPSB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVNb3VzZUJpbmRpbmdzKCkge1xyXG5cdGxhc3RUb3VjaElEID0gMDtcclxuXHRjbGlja0Jsb2NrTGlzdC5sZW5ndGggPSAwO1xyXG5cdGJsb2NrTW91c2VUcmlnZ2VycyA9IGZhbHNlO1xyXG5cclxuXHQvLyBXaGVuIG1vdXNlIGJpbmRpbmdzIGFyZSBlbmFibGVkLCBvdXJcclxuXHQvLyB0b3VjaCBiaW5kaW5ncyBhcmUgZGlzYWJsZWQuXHJcblx0ZGlzYWJsZVRvdWNoQmluZGluZ3MoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZU1vdXNlQmluZGluZ3MoKSB7XHJcblx0Ly8gV2hlbiBtb3VzZSBiaW5kaW5ncyBhcmUgZGlzYWJsZWQsIG91clxyXG5cdC8vIHRvdWNoIGJpbmRpbmdzIGFyZSBlbmFibGVkLlxyXG5cdGVuYWJsZVRvdWNoQmluZGluZ3MoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRSZXNldFRpbWVyKCkge1xyXG5cdGNsZWFyUmVzZXRUaW1lcigpO1xyXG5cdHJlc2V0VGltZXJJRCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0cmVzZXRUaW1lcklEID0gMDtcclxuXHRcdGVuYWJsZU1vdXNlQmluZGluZ3MoKTtcclxuXHR9LCAkLnZtb3VzZS5yZXNldFRpbWVyRHVyYXRpb24gKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJSZXNldFRpbWVyKCkge1xyXG5cdGlmICggcmVzZXRUaW1lcklEICkge1xyXG5cdFx0Y2xlYXJUaW1lb3V0KCByZXNldFRpbWVySUQgKTtcclxuXHRcdHJlc2V0VGltZXJJRCA9IDA7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiB0cmlnZ2VyVmlydHVhbEV2ZW50KCBldmVudFR5cGUsIGV2ZW50LCBmbGFncyApIHtcclxuXHR2YXIgdmU7XHJcblxyXG5cdGlmICggKCBmbGFncyAmJiBmbGFnc1sgZXZlbnRUeXBlIF0gKSB8fFxyXG5cdFx0XHRcdCggIWZsYWdzICYmIGdldENsb3Nlc3RFbGVtZW50V2l0aFZpcnR1YWxCaW5kaW5nKCBldmVudC50YXJnZXQsIGV2ZW50VHlwZSApICkgKSB7XHJcblxyXG5cdFx0dmUgPSBjcmVhdGVWaXJ0dWFsRXZlbnQoIGV2ZW50LCBldmVudFR5cGUgKTtcclxuXHJcblx0XHQkKCBldmVudC50YXJnZXQpLnRyaWdnZXIoIHZlICk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdmU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdXNlRXZlbnRDYWxsYmFjayggZXZlbnQgKSB7XHJcblx0dmFyIHRvdWNoSUQgPSAkLmRhdGEoIGV2ZW50LnRhcmdldCwgdG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUgKSxcclxuXHRcdHZlO1xyXG5cclxuXHRpZiAoICFibG9ja01vdXNlVHJpZ2dlcnMgJiYgKCAhbGFzdFRvdWNoSUQgfHwgbGFzdFRvdWNoSUQgIT09IHRvdWNoSUQgKSApIHtcclxuXHRcdHZlID0gdHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2XCIgKyBldmVudC50eXBlLCBldmVudCApO1xyXG5cdFx0aWYgKCB2ZSApIHtcclxuXHRcdFx0aWYgKCB2ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdmUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcclxuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHZlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnQoIGV2ZW50ICkge1xyXG5cclxuXHR2YXIgdG91Y2hlcyA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLnRvdWNoZXMsXHJcblx0XHR0YXJnZXQsIGZsYWdzLCB0O1xyXG5cclxuXHRpZiAoIHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGggPT09IDEgKSB7XHJcblxyXG5cdFx0dGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG5cdFx0ZmxhZ3MgPSBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCB0YXJnZXQgKTtcclxuXHJcblx0XHRpZiAoIGZsYWdzLmhhc1ZpcnR1YWxCaW5kaW5nICkge1xyXG5cclxuXHRcdFx0bGFzdFRvdWNoSUQgPSBuZXh0VG91Y2hJRCsrO1xyXG5cdFx0XHQkLmRhdGEoIHRhcmdldCwgdG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUsIGxhc3RUb3VjaElEICk7XHJcblxyXG5cdFx0XHRjbGVhclJlc2V0VGltZXIoKTtcclxuXHJcblx0XHRcdGRpc2FibGVNb3VzZUJpbmRpbmdzKCk7XHJcblx0XHRcdGRpZFNjcm9sbCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0dCA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLnRvdWNoZXNbIDAgXTtcclxuXHRcdFx0c3RhcnRYID0gdC5wYWdlWDtcclxuXHRcdFx0c3RhcnRZID0gdC5wYWdlWTtcclxuXHJcblx0XHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlb3ZlclwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRcdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2Vkb3duXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKCBldmVudCApIHtcclxuXHRpZiAoIGJsb2NrVG91Y2hUcmlnZ2VycyApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGlmICggIWRpZFNjcm9sbCApIHtcclxuXHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlY2FuY2VsXCIsIGV2ZW50LCBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBldmVudC50YXJnZXQgKSApO1xyXG5cdH1cclxuXHJcblx0ZGlkU2Nyb2xsID0gdHJ1ZTtcclxuXHRzdGFydFJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlKCBldmVudCApIHtcclxuXHRpZiAoIGJsb2NrVG91Y2hUcmlnZ2VycyApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdHZhciB0ID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkudG91Y2hlc1sgMCBdLFxyXG5cdFx0ZGlkQ2FuY2VsID0gZGlkU2Nyb2xsLFxyXG5cdFx0bW92ZVRocmVzaG9sZCA9ICQudm1vdXNlLm1vdmVEaXN0YW5jZVRocmVzaG9sZCxcclxuXHRcdGZsYWdzID0gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZXZlbnQudGFyZ2V0ICk7XHJcblxyXG5cdFx0ZGlkU2Nyb2xsID0gZGlkU2Nyb2xsIHx8XHJcblx0XHRcdCggTWF0aC5hYnMoIHQucGFnZVggLSBzdGFydFggKSA+IG1vdmVUaHJlc2hvbGQgfHxcclxuXHRcdFx0XHRNYXRoLmFicyggdC5wYWdlWSAtIHN0YXJ0WSApID4gbW92ZVRocmVzaG9sZCApO1xyXG5cclxuXHRpZiAoIGRpZFNjcm9sbCAmJiAhZGlkQ2FuY2VsICkge1xyXG5cdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VjYW5jZWxcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0fVxyXG5cclxuXHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZW1vdmVcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0c3RhcnRSZXNldFRpbWVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRvdWNoRW5kKCBldmVudCApIHtcclxuXHRpZiAoIGJsb2NrVG91Y2hUcmlnZ2VycyApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGRpc2FibGVUb3VjaEJpbmRpbmdzKCk7XHJcblxyXG5cdHZhciBmbGFncyA9IGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGV2ZW50LnRhcmdldCApLFxyXG5cdFx0dmUsIHQ7XHJcblx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2V1cFwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHJcblx0aWYgKCAhZGlkU2Nyb2xsICkge1xyXG5cdFx0dmUgPSB0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZjbGlja1wiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRcdGlmICggdmUgJiYgdmUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdC8vIFRoZSB0YXJnZXQgb2YgdGhlIG1vdXNlIGV2ZW50cyB0aGF0IGZvbGxvdyB0aGUgdG91Y2hlbmRcclxuXHRcdFx0Ly8gZXZlbnQgZG9uJ3QgbmVjZXNzYXJpbHkgbWF0Y2ggdGhlIHRhcmdldCB1c2VkIGR1cmluZyB0aGVcclxuXHRcdFx0Ly8gdG91Y2guIFRoaXMgbWVhbnMgd2UgbmVlZCB0byByZWx5IG9uIGNvb3JkaW5hdGVzIGZvciBibG9ja2luZ1xyXG5cdFx0XHQvLyBhbnkgY2xpY2sgdGhhdCBpcyBnZW5lcmF0ZWQuXHJcblx0XHRcdHQgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS5jaGFuZ2VkVG91Y2hlc1sgMCBdO1xyXG5cdFx0XHRjbGlja0Jsb2NrTGlzdC5wdXNoKHtcclxuXHRcdFx0XHR0b3VjaElEOiBsYXN0VG91Y2hJRCxcclxuXHRcdFx0XHR4OiB0LmNsaWVudFgsXHJcblx0XHRcdFx0eTogdC5jbGllbnRZXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gUHJldmVudCBhbnkgbW91c2UgZXZlbnRzIHRoYXQgZm9sbG93IGZyb20gdHJpZ2dlcmluZ1xyXG5cdFx0XHQvLyB2aXJ0dWFsIGV2ZW50IG5vdGlmaWNhdGlvbnMuXHJcblx0XHRcdGJsb2NrTW91c2VUcmlnZ2VycyA9IHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlb3V0XCIsIGV2ZW50LCBmbGFncyk7XHJcblx0ZGlkU2Nyb2xsID0gZmFsc2U7XHJcblxyXG5cdHN0YXJ0UmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYXNWaXJ0dWFsQmluZGluZ3MoIGVsZSApIHtcclxuXHR2YXIgYmluZGluZ3MgPSAkLmRhdGEoIGVsZSwgZGF0YVByb3BlcnR5TmFtZSApLFxyXG5cdFx0aztcclxuXHJcblx0aWYgKCBiaW5kaW5ncyApIHtcclxuXHRcdGZvciAoIGsgaW4gYmluZGluZ3MgKSB7XHJcblx0XHRcdGlmICggYmluZGluZ3NbIGsgXSApIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGR1bW15TW91c2VIYW5kbGVyKCkge31cclxuXHJcbmZ1bmN0aW9uIGdldFNwZWNpYWxFdmVudE9iamVjdCggZXZlbnRUeXBlICkge1xyXG5cdHZhciByZWFsVHlwZSA9IGV2ZW50VHlwZS5zdWJzdHIoIDEgKTtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHNldHVwOiBmdW5jdGlvbigvKiBkYXRhLCBuYW1lc3BhY2UgKi8pIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIGZvciB0aGlzIGVsZW1lbnQsXHJcblx0XHRcdC8vIGFkZCBhIGJpbmRpbmdzIG9iamVjdCB0byBpdHMgZGF0YS5cclxuXHJcblx0XHRcdGlmICggIWhhc1ZpcnR1YWxCaW5kaW5ncyggdGhpcyApICkge1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpcywgZGF0YVByb3BlcnR5TmFtZSwge30gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgc2V0dXAgaXMgY2FsbGVkLCB3ZSBrbm93IGl0IGlzIHRoZSBmaXJzdCBiaW5kaW5nIGZvciB0aGlzXHJcblx0XHRcdC8vIGV2ZW50VHlwZSwgc28gaW5pdGlhbGl6ZSB0aGUgY291bnQgZm9yIHRoZSBldmVudFR5cGUgdG8gemVyby5cclxuXHRcdFx0dmFyIGJpbmRpbmdzID0gJC5kYXRhKCB0aGlzLCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblx0XHRcdGJpbmRpbmdzWyBldmVudFR5cGUgXSA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB2aXJ0dWFsIG1vdXNlIGV2ZW50IGZvciB0aGlzIHR5cGUsXHJcblx0XHRcdC8vIHJlZ2lzdGVyIGEgZ2xvYmFsIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50LlxyXG5cclxuXHRcdFx0YWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdID0gKCBhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gfHwgMCApICsgMTtcclxuXHJcblx0XHRcdGlmICggYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdID09PSAxICkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC5iaW5kKCByZWFsVHlwZSwgbW91c2VFdmVudENhbGxiYWNrICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNvbWUgYnJvd3NlcnMsIGxpa2UgT3BlcmEgTWluaSwgd29uJ3QgZGlzcGF0Y2ggbW91c2UvY2xpY2sgZXZlbnRzXHJcblx0XHRcdC8vIGZvciBlbGVtZW50cyB1bmxlc3MgdGhleSBhY3R1YWxseSBoYXZlIGhhbmRsZXJzIHJlZ2lzdGVyZWQgb24gdGhlbS5cclxuXHRcdFx0Ly8gVG8gZ2V0IGFyb3VuZCB0aGlzLCB3ZSByZWdpc3RlciBkdW1teSBoYW5kbGVycyBvbiB0aGUgZWxlbWVudHMuXHJcblxyXG5cdFx0XHQkKCB0aGlzICkuYmluZCggcmVhbFR5cGUsIGR1bW15TW91c2VIYW5kbGVyICk7XHJcblxyXG5cdFx0XHQvLyBGb3Igbm93LCBpZiBldmVudCBjYXB0dXJlIGlzIG5vdCBzdXBwb3J0ZWQsIHdlIHJlbHkgb24gbW91c2UgaGFuZGxlcnMuXHJcblx0XHRcdGlmICggZXZlbnRDYXB0dXJlU3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBmb3IgdGhlIGRvY3VtZW50LFxyXG5cdFx0XHRcdC8vIHJlZ2lzdGVyIG91ciB0b3VjaHN0YXJ0IGhhbmRsZXIgb24gdGhlIGRvY3VtZW50LlxyXG5cclxuXHRcdFx0XHRhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSA9ICggYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gfHwgMCkgKyAxO1xyXG5cclxuXHRcdFx0XHRpZiAoIGFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdID09PSAxICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50LmJpbmQoIFwidG91Y2hzdGFydFwiLCBoYW5kbGVUb3VjaFN0YXJ0IClcclxuXHRcdFx0XHRcdFx0LmJpbmQoIFwidG91Y2hlbmRcIiwgaGFuZGxlVG91Y2hFbmQgKVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gT24gdG91Y2ggcGxhdGZvcm1zLCB0b3VjaGluZyB0aGUgc2NyZWVuIGFuZCB0aGVuIGRyYWdnaW5nIHlvdXIgZmluZ2VyXHJcblx0XHRcdFx0XHRcdC8vIGNhdXNlcyB0aGUgd2luZG93IGNvbnRlbnQgdG8gc2Nyb2xsIGFmdGVyIHNvbWUgZGlzdGFuY2UgdGhyZXNob2xkIGlzXHJcblx0XHRcdFx0XHRcdC8vIGV4Y2VlZGVkLiBPbiB0aGVzZSBwbGF0Zm9ybXMsIGEgc2Nyb2xsIHByZXZlbnRzIGEgY2xpY2sgZXZlbnQgZnJvbSBiZWluZ1xyXG5cdFx0XHRcdFx0XHQvLyBkaXNwYXRjaGVkLCBhbmQgb24gc29tZSBwbGF0Zm9ybXMsIGV2ZW4gdGhlIHRvdWNoZW5kIGlzIHN1cHByZXNzZWQuIFRvXHJcblx0XHRcdFx0XHRcdC8vIG1pbWljIHRoZSBzdXBwcmVzc2lvbiBvZiB0aGUgY2xpY2sgZXZlbnQsIHdlIG5lZWQgdG8gd2F0Y2ggZm9yIGEgc2Nyb2xsXHJcblx0XHRcdFx0XHRcdC8vIGV2ZW50LiBVbmZvcnR1bmF0ZWx5LCBzb21lIHBsYXRmb3JtcyBsaWtlIGlPUyBkb24ndCBkaXNwYXRjaCBzY3JvbGxcclxuXHRcdFx0XHRcdFx0Ly8gZXZlbnRzIHVudGlsICpBRlRFUiogdGhlIHVzZXIgbGlmdHMgdGhlaXIgZmluZ2VyICh0b3VjaGVuZCkuIFRoaXMgbWVhbnNcclxuXHRcdFx0XHRcdFx0Ly8gd2UgbmVlZCB0byB3YXRjaCBib3RoIHNjcm9sbCBhbmQgdG91Y2htb3ZlIGV2ZW50cyB0byBmaWd1cmUgb3V0IHdoZXRoZXJcclxuXHRcdFx0XHRcdFx0Ly8gb3Igbm90IGEgc2Nyb2xsIGhhcHBlbmVucyBiZWZvcmUgdGhlIHRvdWNoZW5kIGV2ZW50IGlzIGZpcmVkLlxyXG5cclxuXHRcdFx0XHRcdFx0LmJpbmQoIFwidG91Y2htb3ZlXCIsIGhhbmRsZVRvdWNoTW92ZSApXHJcblx0XHRcdFx0XHRcdC5iaW5kKCBcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKC8qIGRhdGEsIG5hbWVzcGFjZSAqLykge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHZpcnR1YWwgYmluZGluZyBmb3IgdGhpcyBldmVudFR5cGUsXHJcblx0XHRcdC8vIHJlbW92ZSBpdHMgZ2xvYmFsIGhhbmRsZXIgZnJvbSB0aGUgZG9jdW1lbnQuXHJcblxyXG5cdFx0XHQtLWFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXTtcclxuXHJcblx0XHRcdGlmICggIWFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSApIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQudW5iaW5kKCByZWFsVHlwZSwgbW91c2VFdmVudENhbGxiYWNrICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZXZlbnRDYXB0dXJlU3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIGluIGV4aXN0ZW5jZSxcclxuXHRcdFx0XHQvLyByZW1vdmUgb3VyIGRvY3VtZW50IHRvdWNoc3RhcnQgbGlzdGVuZXIuXHJcblxyXG5cdFx0XHRcdC0tYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF07XHJcblxyXG5cdFx0XHRcdGlmICggIWFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50LnVuYmluZCggXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVRvdWNoU3RhcnQgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInRvdWNobW92ZVwiLCBoYW5kbGVUb3VjaE1vdmUgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInRvdWNoZW5kXCIsIGhhbmRsZVRvdWNoRW5kIClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0YmluZGluZ3MgPSAkLmRhdGEoIHRoaXMsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHJcblx0XHRcdC8vIHRlYXJkb3duIG1heSBiZSBjYWxsZWQgd2hlbiBhbiBlbGVtZW50IHdhc1xyXG5cdFx0XHQvLyByZW1vdmVkIGZyb20gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSxcclxuXHRcdFx0Ly8galF1ZXJ5IGNvcmUgbWF5IGhhdmUgYWxyZWFkeSBzdHJpcHBlZCB0aGUgZWxlbWVudFxyXG5cdFx0XHQvLyBvZiBhbnkgZGF0YSBiaW5kaW5ncyBzbyB3ZSBuZWVkIHRvIGNoZWNrIGl0IGJlZm9yZVxyXG5cdFx0XHQvLyB1c2luZyBpdC5cclxuXHRcdFx0aWYgKCBiaW5kaW5ncyApIHtcclxuXHRcdFx0XHRiaW5kaW5nc1sgZXZlbnRUeXBlIF0gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVW5yZWdpc3RlciB0aGUgZHVtbXkgZXZlbnQgaGFuZGxlci5cclxuXHJcblx0XHRcdCR0aGlzLnVuYmluZCggcmVhbFR5cGUsIGR1bW15TW91c2VIYW5kbGVyICk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBvbiB0aGVcclxuXHRcdFx0Ly8gZWxlbWVudCwgcmVtb3ZlIHRoZSBiaW5kaW5nIGRhdGEgZnJvbSB0aGUgZWxlbWVudC5cclxuXHJcblx0XHRcdGlmICggIWhhc1ZpcnR1YWxCaW5kaW5ncyggdGhpcyApICkge1xyXG5cdFx0XHRcdCR0aGlzLnJlbW92ZURhdGEoIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbi8vIEV4cG9zZSBvdXIgY3VzdG9tIGV2ZW50cyB0byB0aGUgalF1ZXJ5IGJpbmQvdW5iaW5kIG1lY2hhbmlzbS5cclxuXHJcbmZvciAoIGkgPSAwOyBpIDwgdmlydHVhbEV2ZW50TmFtZXMubGVuZ3RoOyBpKysgKSB7XHJcblx0JC5ldmVudC5zcGVjaWFsWyB2aXJ0dWFsRXZlbnROYW1lc1sgaSBdIF0gPSBnZXRTcGVjaWFsRXZlbnRPYmplY3QoIHZpcnR1YWxFdmVudE5hbWVzWyBpIF0gKTtcclxufVxyXG5cclxuLy8gQWRkIGEgY2FwdHVyZSBjbGljayBoYW5kbGVyIHRvIGJsb2NrIGNsaWNrcy5cclxuLy8gTm90ZSB0aGF0IHdlIHJlcXVpcmUgZXZlbnQgY2FwdHVyZSBzdXBwb3J0IGZvciB0aGlzIHNvIGlmIHRoZSBkZXZpY2VcclxuLy8gZG9lc24ndCBzdXBwb3J0IGl0LCB3ZSBwdW50IGZvciBub3cgYW5kIHJlbHkgc29sZWx5IG9uIG1vdXNlIGV2ZW50cy5cclxuaWYgKCBldmVudENhcHR1cmVTdXBwb3J0ZWQgKSB7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJjbGlja1wiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdHZhciBjbnQgPSBjbGlja0Jsb2NrTGlzdC5sZW5ndGgsXHJcblx0XHRcdHRhcmdldCA9IGUudGFyZ2V0LFxyXG5cdFx0XHR4LCB5LCBlbGUsIGksIG8sIHRvdWNoSUQ7XHJcblxyXG5cdFx0aWYgKCBjbnQgKSB7XHJcblx0XHRcdHggPSBlLmNsaWVudFg7XHJcblx0XHRcdHkgPSBlLmNsaWVudFk7XHJcblx0XHRcdHRocmVzaG9sZCA9ICQudm1vdXNlLmNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ7XHJcblxyXG5cdFx0XHQvLyBUaGUgaWRlYSBoZXJlIGlzIHRvIHJ1biB0aHJvdWdoIHRoZSBjbGlja0Jsb2NrTGlzdCB0byBzZWUgaWZcclxuXHRcdFx0Ly8gdGhlIGN1cnJlbnQgY2xpY2sgZXZlbnQgaXMgaW4gdGhlIHByb3hpbWl0eSBvZiBvbmUgb2Ygb3VyXHJcblx0XHRcdC8vIHZjbGljayBldmVudHMgdGhhdCBoYWQgcHJldmVudERlZmF1bHQoKSBjYWxsZWQgb24gaXQuIElmIHdlIGZpbmRcclxuXHRcdFx0Ly8gb25lLCB0aGVuIHdlIGJsb2NrIHRoZSBjbGljay5cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gV2h5IGRvIHdlIGhhdmUgdG8gcmVseSBvbiBwcm94aW1pdHk/XHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIEJlY2F1c2UgdGhlIHRhcmdldCBvZiB0aGUgdG91Y2ggZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIHZjbGlja1xyXG5cdFx0XHQvLyBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIHRhcmdldCBvZiB0aGUgY2xpY2sgZXZlbnQgc3ludGhlc2l6ZWRcclxuXHRcdFx0Ly8gYnkgdGhlIGJyb3dzZXIuIFRoZSB0YXJnZXQgb2YgYSBtb3VzZS9jbGljayBldmVudCB0aGF0IGlzIHN5bnRoZXNpemVkXHJcblx0XHRcdC8vIGZyb20gYSB0b3VjaCBldmVudCBzZWVtcyB0byBiZSBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy4gRm9yIGV4YW1wbGUsXHJcblx0XHRcdC8vIHNvbWUgYnJvd3NlcnMgd2lsbCBmaXJlIG1vdXNlL2NsaWNrIGV2ZW50cyBmb3IgYSBsaW5rIHRoYXQgaXMgbmVhclxyXG5cdFx0XHQvLyBhIHRvdWNoIGV2ZW50LCBldmVuIHRob3VnaCB0aGUgdGFyZ2V0IG9mIHRoZSB0b3VjaHN0YXJ0L3RvdWNoZW5kIGV2ZW50XHJcblx0XHRcdC8vIHNheXMgdGhlIHVzZXIgdG91Y2hlZCBvdXRzaWRlIHRoZSBsaW5rLiBBbHNvLCBpdCBzZWVtcyB0aGF0IHdpdGggbW9zdFxyXG5cdFx0XHQvLyBicm93c2VycywgdGhlIHRhcmdldCBvZiB0aGUgbW91c2UvY2xpY2sgZXZlbnQgaXMgbm90IGNhbGN1bGF0ZWQgdW50aWwgdGhlXHJcblx0XHRcdC8vIHRpbWUgaXQgaXMgZGlzcGF0Y2hlZCwgc28gaWYgeW91IHJlcGxhY2UgYW4gZWxlbWVudCB0aGF0IHlvdSB0b3VjaGVkXHJcblx0XHRcdC8vIHdpdGggYW5vdGhlciBlbGVtZW50LCB0aGUgdGFyZ2V0IG9mIHRoZSBtb3VzZS9jbGljayB3aWxsIGJlIHRoZSBuZXdcclxuXHRcdFx0Ly8gZWxlbWVudCB1bmRlcm5lYXRoIHRoYXQgcG9pbnQuXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIEFzaWRlIGZyb20gcHJveGltaXR5LCB3ZSBhbHNvIGNoZWNrIHRvIHNlZSBpZiB0aGUgdGFyZ2V0IGFuZCBhbnlcclxuXHRcdFx0Ly8gb2YgaXRzIGFuY2VzdG9ycyB3ZXJlIHRoZSBvbmVzIHRoYXQgYmxvY2tlZCBhIGNsaWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG5cdFx0XHQvLyBiZWNhdXNlIG9mIHRoZSBzdHJhbmdlIG1vdXNlL2NsaWNrIHRhcmdldCBjYWxjdWxhdGlvbiBkb25lIGluIHRoZVxyXG5cdFx0XHQvLyBBbmRyb2lkIDIuMSBicm93c2VyLCB3aGVyZSBpZiB5b3UgY2xpY2sgb24gYW4gZWxlbWVudCwgYW5kIHRoZXJlIGlzIGFcclxuXHRcdFx0Ly8gbW91c2UvY2xpY2sgaGFuZGxlciBvbiBvbmUgb2YgaXRzIGFuY2VzdG9ycywgdGhlIHRhcmdldCB3aWxsIGJlIHRoZVxyXG5cdFx0XHQvLyBpbm5lcm1vc3QgY2hpbGQgb2YgdGhlIHRvdWNoZWQgZWxlbWVudCwgZXZlbiBpZiB0aGF0IGNoaWxkIGlzIG5vIHdoZXJlXHJcblx0XHRcdC8vIG5lYXIgdGhlIHBvaW50IG9mIHRvdWNoLlxyXG5cclxuXHRcdFx0ZWxlID0gdGFyZ2V0O1xyXG5cclxuXHRcdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBjbnQ7IGkrKyApIHtcclxuXHRcdFx0XHRcdG8gPSBjbGlja0Jsb2NrTGlzdFsgaSBdO1xyXG5cdFx0XHRcdFx0dG91Y2hJRCA9IDA7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAoIGVsZSA9PT0gdGFyZ2V0ICYmIE1hdGguYWJzKCBvLnggLSB4ICkgPCB0aHJlc2hvbGQgJiYgTWF0aC5hYnMoIG8ueSAtIHkgKSA8IHRocmVzaG9sZCApIHx8XHJcblx0XHRcdFx0XHRcdFx0XHQkLmRhdGEoIGVsZSwgdG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUgKSA9PT0gby50b3VjaElEICkge1xyXG5cdFx0XHRcdFx0XHQvLyBYWFg6IFdlIG1heSB3YW50IHRvIGNvbnNpZGVyIHJlbW92aW5nIG1hdGNoZXMgZnJvbSB0aGUgYmxvY2sgbGlzdFxyXG5cdFx0XHRcdFx0XHQvLyAgICAgIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgdGhlIHJlc2V0IHRpbWVyIHRvIGZpcmUuXHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbGUgPSBlbGUucGFyZW50Tm9kZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sIHRydWUpO1xyXG59XHJcbn0pKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdHZhciAkZG9jdW1lbnQgPSAkKCBkb2N1bWVudCApLFxyXG5cdFx0c3VwcG9ydFRvdWNoID0gJC5tb2JpbGUuc3VwcG9ydC50b3VjaCxcclxuXHRcdHNjcm9sbEV2ZW50ID0gXCJ0b3VjaG1vdmUgc2Nyb2xsXCIsXHJcblx0XHR0b3VjaFN0YXJ0RXZlbnQgPSBzdXBwb3J0VG91Y2ggPyBcInRvdWNoc3RhcnRcIiA6IFwibW91c2Vkb3duXCIsXHJcblx0XHR0b3VjaFN0b3BFdmVudCA9IHN1cHBvcnRUb3VjaCA/IFwidG91Y2hlbmRcIiA6IFwibW91c2V1cFwiLFxyXG5cdFx0dG91Y2hNb3ZlRXZlbnQgPSBzdXBwb3J0VG91Y2ggPyBcInRvdWNobW92ZVwiIDogXCJtb3VzZW1vdmVcIjtcclxuXHJcblx0Ly8gc2V0dXAgbmV3IGV2ZW50IHNob3J0Y3V0c1xyXG5cdCQuZWFjaCggKCBcInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIFwiICtcclxuXHRcdFwidGFwIHRhcGhvbGQgXCIgK1xyXG5cdFx0XCJzd2lwZSBzd2lwZWxlZnQgc3dpcGVyaWdodCBcIiArXHJcblx0XHRcInNjcm9sbHN0YXJ0IHNjcm9sbHN0b3BcIiApLnNwbGl0KCBcIiBcIiApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcclxuXHJcblx0XHQkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZm4gKSB7XHJcblx0XHRcdHJldHVybiBmbiA/IHRoaXMuYmluZCggbmFtZSwgZm4gKSA6IHRoaXMudHJpZ2dlciggbmFtZSApO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBqUXVlcnkgPCAxLjhcclxuXHRcdGlmICggJC5hdHRyRm4gKSB7XHJcblx0XHRcdCQuYXR0ckZuWyBuYW1lIF0gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRmdW5jdGlvbiB0cmlnZ2VyQ3VzdG9tRXZlbnQoIG9iaiwgZXZlbnRUeXBlLCBldmVudCwgYnViYmxlICkge1xyXG5cdFx0dmFyIG9yaWdpbmFsVHlwZSA9IGV2ZW50LnR5cGU7XHJcblx0XHRldmVudC50eXBlID0gZXZlbnRUeXBlO1xyXG5cdFx0aWYgKCBidWJibGUgKSB7XHJcblx0XHRcdCQuZXZlbnQudHJpZ2dlciggZXZlbnQsIHVuZGVmaW5lZCwgb2JqICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLmV2ZW50LmRpc3BhdGNoLmNhbGwoIG9iaiwgZXZlbnQgKTtcclxuXHRcdH1cclxuXHRcdGV2ZW50LnR5cGUgPSBvcmlnaW5hbFR5cGU7XHJcblx0fVxyXG5cclxuXHQvLyBhbHNvIGhhbmRsZXMgc2Nyb2xsc3RvcFxyXG5cdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydCA9IHtcclxuXHJcblx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0dmFyIHRoaXNPYmplY3QgPSB0aGlzLFxyXG5cdFx0XHRcdCR0aGlzID0gJCggdGhpc09iamVjdCApLFxyXG5cdFx0XHRcdHNjcm9sbGluZyxcclxuXHRcdFx0XHR0aW1lcjtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHRyaWdnZXIoIGV2ZW50LCBzdGF0ZSApIHtcclxuXHRcdFx0XHRzY3JvbGxpbmcgPSBzdGF0ZTtcclxuXHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIHNjcm9sbGluZyA/IFwic2Nyb2xsc3RhcnRcIiA6IFwic2Nyb2xsc3RvcFwiLCBldmVudCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpUGhvbmUgdHJpZ2dlcnMgc2Nyb2xsIGFmdGVyIGEgc21hbGwgZGVsYXk7IHVzZSB0b3VjaG1vdmUgaW5zdGVhZFxyXG5cdFx0XHQkdGhpcy5iaW5kKCBzY3JvbGxFdmVudCwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggIXNjcm9sbGluZyApIHtcclxuXHRcdFx0XHRcdHRyaWdnZXIoIGV2ZW50LCB0cnVlICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVyICk7XHJcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRyaWdnZXIoIGV2ZW50LCBmYWxzZSApO1xyXG5cdFx0XHRcdH0sIDUwICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLnVuYmluZCggc2Nyb2xsRXZlbnQgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBhbHNvIGhhbmRsZXMgdGFwaG9sZFxyXG5cdCQuZXZlbnQuc3BlY2lhbC50YXAgPSB7XHJcblx0XHR0YXBob2xkVGhyZXNob2xkOiA3NTAsXHJcblx0XHRlbWl0VGFwT25UYXBob2xkOiB0cnVlLFxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdGhpc09iamVjdCA9IHRoaXMsXHJcblx0XHRcdFx0JHRoaXMgPSAkKCB0aGlzT2JqZWN0ICksXHJcblx0XHRcdFx0aXNUYXBob2xkID0gZmFsc2U7XHJcblxyXG5cdFx0XHQkdGhpcy5iaW5kKCBcInZtb3VzZWRvd25cIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGlzVGFwaG9sZCA9IGZhbHNlO1xyXG5cdFx0XHRcdGlmICggZXZlbnQud2hpY2ggJiYgZXZlbnQud2hpY2ggIT09IDEgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgb3JpZ1RhcmdldCA9IGV2ZW50LnRhcmdldCxcclxuXHRcdFx0XHRcdHRpbWVyO1xyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBjbGVhclRhcFRpbWVyKCkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lciApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZnVuY3Rpb24gY2xlYXJUYXBIYW5kbGVycygpIHtcclxuXHRcdFx0XHRcdGNsZWFyVGFwVGltZXIoKTtcclxuXHJcblx0XHRcdFx0XHQkdGhpcy51bmJpbmQoIFwidmNsaWNrXCIsIGNsaWNrSGFuZGxlciApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwidm1vdXNldXBcIiwgY2xlYXJUYXBUaW1lciApO1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50LnVuYmluZCggXCJ2bW91c2VjYW5jZWxcIiwgY2xlYXJUYXBIYW5kbGVycyApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZnVuY3Rpb24gY2xpY2tIYW5kbGVyKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGNsZWFyVGFwSGFuZGxlcnMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBPTkxZIHRyaWdnZXIgYSAndGFwJyBldmVudCBpZiB0aGUgc3RhcnQgdGFyZ2V0IGlzXHJcblx0XHRcdFx0XHQvLyB0aGUgc2FtZSBhcyB0aGUgc3RvcCB0YXJnZXQuXHJcblx0XHRcdFx0XHRpZiAoICFpc1RhcGhvbGQgJiYgb3JpZ1RhcmdldCA9PT0gZXZlbnQudGFyZ2V0ICkge1xyXG5cdFx0XHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIFwidGFwXCIsIGV2ZW50ICk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpc1RhcGhvbGQgKSB7XHJcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQkdGhpcy5iaW5kKCBcInZtb3VzZXVwXCIsIGNsZWFyVGFwVGltZXIgKVxyXG5cdFx0XHRcdFx0LmJpbmQoIFwidmNsaWNrXCIsIGNsaWNrSGFuZGxlciApO1xyXG5cdFx0XHRcdCRkb2N1bWVudC5iaW5kKCBcInZtb3VzZWNhbmNlbFwiLCBjbGVhclRhcEhhbmRsZXJzICk7XHJcblxyXG5cdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwudGFwLmVtaXRUYXBPblRhcGhvbGQgKSB7XHJcblx0XHRcdFx0XHRcdGlzVGFwaG9sZCA9IHRydWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIFwidGFwaG9sZFwiLCAkLkV2ZW50KCBcInRhcGhvbGRcIiwgeyB0YXJnZXQ6IG9yaWdUYXJnZXQgfSApICk7XHJcblx0XHRcdFx0fSwgJC5ldmVudC5zcGVjaWFsLnRhcC50YXBob2xkVGhyZXNob2xkICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLnVuYmluZCggXCJ2bW91c2Vkb3duXCIgKS51bmJpbmQoIFwidmNsaWNrXCIgKS51bmJpbmQoIFwidm1vdXNldXBcIiApO1xyXG5cdFx0XHQkZG9jdW1lbnQudW5iaW5kKCBcInZtb3VzZWNhbmNlbFwiICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQWxzbyBoYW5kbGVzIHN3aXBlbGVmdCwgc3dpcGVyaWdodFxyXG5cdCQuZXZlbnQuc3BlY2lhbC5zd2lwZSA9IHtcclxuXHJcblx0XHQvLyBNb3JlIHRoYW4gdGhpcyBob3Jpem9udGFsIGRpc3BsYWNlbWVudCwgYW5kIHdlIHdpbGwgc3VwcHJlc3Mgc2Nyb2xsaW5nLlxyXG5cdFx0c2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZDogMzAsXHJcblxyXG5cdFx0Ly8gTW9yZSB0aW1lIHRoYW4gdGhpcywgYW5kIGl0IGlzbid0IGEgc3dpcGUuXHJcblx0XHRkdXJhdGlvblRocmVzaG9sZDogMTAwMCxcclxuXHJcblx0XHQvLyBTd2lwZSBob3Jpem9udGFsIGRpc3BsYWNlbWVudCBtdXN0IGJlIG1vcmUgdGhhbiB0aGlzLlxyXG5cdFx0aG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkOiAzMCxcclxuXHJcblx0XHQvLyBTd2lwZSB2ZXJ0aWNhbCBkaXNwbGFjZW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gdGhpcy5cclxuXHRcdHZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQ6IDMwLFxyXG5cclxuXHRcdGdldExvY2F0aW9uOiBmdW5jdGlvbiAoIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgd2luUGFnZVggPSB3aW5kb3cucGFnZVhPZmZzZXQsXHJcblx0XHRcdFx0d2luUGFnZVkgPSB3aW5kb3cucGFnZVlPZmZzZXQsXHJcblx0XHRcdFx0eCA9IGV2ZW50LmNsaWVudFgsXHJcblx0XHRcdFx0eSA9IGV2ZW50LmNsaWVudFk7XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50LnBhZ2VZID09PSAwICYmIE1hdGguZmxvb3IoIHkgKSA+IE1hdGguZmxvb3IoIGV2ZW50LnBhZ2VZICkgfHxcclxuXHRcdFx0XHRldmVudC5wYWdlWCA9PT0gMCAmJiBNYXRoLmZsb29yKCB4ICkgPiBNYXRoLmZsb29yKCBldmVudC5wYWdlWCApICkge1xyXG5cclxuXHRcdFx0XHQvLyBpT1M0IGNsaWVudFgvY2xpZW50WSBoYXZlIHRoZSB2YWx1ZSB0aGF0IHNob3VsZCBoYXZlIGJlZW5cclxuXHRcdFx0XHQvLyBpbiBwYWdlWC9wYWdlWS4gV2hpbGUgcGFnZVgvcGFnZS8gaGF2ZSB0aGUgdmFsdWUgMFxyXG5cdFx0XHRcdHggPSB4IC0gd2luUGFnZVg7XHJcblx0XHRcdFx0eSA9IHkgLSB3aW5QYWdlWTtcclxuXHRcdFx0fSBlbHNlIGlmICggeSA8ICggZXZlbnQucGFnZVkgLSB3aW5QYWdlWSkgfHwgeCA8ICggZXZlbnQucGFnZVggLSB3aW5QYWdlWCApICkge1xyXG5cclxuXHRcdFx0XHQvLyBTb21lIEFuZHJvaWQgYnJvd3NlcnMgaGF2ZSB0b3RhbGx5IGJvZ3VzIHZhbHVlcyBmb3IgY2xpZW50WC9ZXHJcblx0XHRcdFx0Ly8gd2hlbiBzY3JvbGxpbmcvem9vbWluZyBhIHBhZ2UuIERldGVjdGFibGUgc2luY2UgY2xpZW50WC9jbGllbnRZXHJcblx0XHRcdFx0Ly8gc2hvdWxkIG5ldmVyIGJlIHNtYWxsZXIgdGhhbiBwYWdlWC9wYWdlWSBtaW51cyBwYWdlIHNjcm9sbFxyXG5cdFx0XHRcdHggPSBldmVudC5wYWdlWCAtIHdpblBhZ2VYO1xyXG5cdFx0XHRcdHkgPSBldmVudC5wYWdlWSAtIHdpblBhZ2VZO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHg6IHgsXHJcblx0XHRcdFx0eTogeVxyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHRzdGFydDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZGF0YSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyA/XHJcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbIDAgXSA6IGV2ZW50LFxyXG5cdFx0XHRcdGxvY2F0aW9uID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmdldExvY2F0aW9uKCBkYXRhICk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdHRpbWU6ICggbmV3IERhdGUoKSApLmdldFRpbWUoKSxcclxuXHRcdFx0XHRcdFx0Y29vcmRzOiBbIGxvY2F0aW9uLngsIGxvY2F0aW9uLnkgXSxcclxuXHRcdFx0XHRcdFx0b3JpZ2luOiAkKCBldmVudC50YXJnZXQgKVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RvcDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZGF0YSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyA/XHJcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbIDAgXSA6IGV2ZW50LFxyXG5cdFx0XHRcdGxvY2F0aW9uID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmdldExvY2F0aW9uKCBkYXRhICk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdHRpbWU6ICggbmV3IERhdGUoKSApLmdldFRpbWUoKSxcclxuXHRcdFx0XHRcdFx0Y29vcmRzOiBbIGxvY2F0aW9uLngsIGxvY2F0aW9uLnkgXVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGFuZGxlU3dpcGU6IGZ1bmN0aW9uKCBzdGFydCwgc3RvcCwgdGhpc09iamVjdCwgb3JpZ1RhcmdldCApIHtcclxuXHRcdFx0aWYgKCBzdG9wLnRpbWUgLSBzdGFydC50aW1lIDwgJC5ldmVudC5zcGVjaWFsLnN3aXBlLmR1cmF0aW9uVGhyZXNob2xkICYmXHJcblx0XHRcdFx0TWF0aC5hYnMoIHN0YXJ0LmNvb3Jkc1sgMCBdIC0gc3RvcC5jb29yZHNbIDAgXSApID4gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZCAmJlxyXG5cdFx0XHRcdE1hdGguYWJzKCBzdGFydC5jb29yZHNbIDEgXSAtIHN0b3AuY29vcmRzWyAxIF0gKSA8ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS52ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkICkge1xyXG5cdFx0XHRcdHZhciBkaXJlY3Rpb24gPSBzdGFydC5jb29yZHNbMF0gPiBzdG9wLmNvb3Jkc1sgMCBdID8gXCJzd2lwZWxlZnRcIiA6IFwic3dpcGVyaWdodFwiO1xyXG5cclxuXHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIFwic3dpcGVcIiwgJC5FdmVudCggXCJzd2lwZVwiLCB7IHRhcmdldDogb3JpZ1RhcmdldCwgc3dpcGVzdGFydDogc3RhcnQsIHN3aXBlc3RvcDogc3RvcCB9KSwgdHJ1ZSApO1xyXG5cdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgZGlyZWN0aW9uLCQuRXZlbnQoIGRpcmVjdGlvbiwgeyB0YXJnZXQ6IG9yaWdUYXJnZXQsIHN3aXBlc3RhcnQ6IHN0YXJ0LCBzd2lwZXN0b3A6IHN0b3AgfSApLCB0cnVlICk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVGhpcyBzZXJ2ZXMgYXMgYSBmbGFnIHRvIGVuc3VyZSB0aGF0IGF0IG1vc3Qgb25lIHN3aXBlIGV2ZW50IGV2ZW50IGlzXHJcblx0XHQvLyBpbiB3b3JrIGF0IGFueSBnaXZlbiB0aW1lXHJcblx0XHRldmVudEluUHJvZ3Jlc3M6IGZhbHNlLFxyXG5cclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGV2ZW50cyxcclxuXHRcdFx0XHR0aGlzT2JqZWN0ID0gdGhpcyxcclxuXHRcdFx0XHQkdGhpcyA9ICQoIHRoaXNPYmplY3QgKSxcclxuXHRcdFx0XHRjb250ZXh0ID0ge307XHJcblxyXG5cdFx0XHQvLyBSZXRyaWV2ZSB0aGUgZXZlbnRzIGRhdGEgZm9yIHRoaXMgZWxlbWVudCBhbmQgYWRkIHRoZSBzd2lwZSBjb250ZXh0XHJcblx0XHRcdGV2ZW50cyA9ICQuZGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIgKTtcclxuXHRcdFx0aWYgKCAhZXZlbnRzICkge1xyXG5cdFx0XHRcdGV2ZW50cyA9IHsgbGVuZ3RoOiAwIH07XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiwgZXZlbnRzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZXZlbnRzLmxlbmd0aCsrO1xyXG5cdFx0XHRldmVudHMuc3dpcGUgPSBjb250ZXh0O1xyXG5cclxuXHRcdFx0Y29udGV4dC5zdGFydCA9IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHJcblx0XHRcdFx0Ly8gQmFpbCBpZiB3ZSdyZSBhbHJlYWR5IHdvcmtpbmcgb24gYSBzd2lwZSBldmVudFxyXG5cdFx0XHRcdGlmICggJC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHZhciBzdG9wLFxyXG5cdFx0XHRcdFx0c3RhcnQgPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc3RhcnQoIGV2ZW50ICksXHJcblx0XHRcdFx0XHRvcmlnVGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxyXG5cdFx0XHRcdFx0ZW1pdHRlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHRjb250ZXh0Lm1vdmUgPSBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0XHRpZiAoICFzdGFydCB8fCBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHN0b3AgPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc3RvcCggZXZlbnQgKTtcclxuXHRcdFx0XHRcdGlmICggIWVtaXR0ZWQgKSB7XHJcblx0XHRcdFx0XHRcdGVtaXR0ZWQgPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuaGFuZGxlU3dpcGUoIHN0YXJ0LCBzdG9wLCB0aGlzT2JqZWN0LCBvcmlnVGFyZ2V0ICk7XHJcblx0XHRcdFx0XHRcdGlmICggZW1pdHRlZCApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVzZXQgdGhlIGNvbnRleHQgdG8gbWFrZSB3YXkgZm9yIHRoZSBuZXh0IHN3aXBlIGV2ZW50XHJcblx0XHRcdFx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBwcmV2ZW50IHNjcm9sbGluZ1xyXG5cdFx0XHRcdFx0aWYgKCBNYXRoLmFicyggc3RhcnQuY29vcmRzWyAwIF0gLSBzdG9wLmNvb3Jkc1sgMCBdICkgPiAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZCApIHtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRjb250ZXh0LnN0b3AgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0ZW1pdHRlZCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBSZXNldCB0aGUgY29udGV4dCB0byBtYWtlIHdheSBmb3IgdGhlIG5leHQgc3dpcGUgZXZlbnRcclxuXHRcdFx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHQkZG9jdW1lbnQub2ZmKCB0b3VjaE1vdmVFdmVudCwgY29udGV4dC5tb3ZlICk7XHJcblx0XHRcdFx0XHRcdGNvbnRleHQubW92ZSA9IG51bGw7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0JGRvY3VtZW50Lm9uKCB0b3VjaE1vdmVFdmVudCwgY29udGV4dC5tb3ZlIClcclxuXHRcdFx0XHRcdC5vbmUoIHRvdWNoU3RvcEV2ZW50LCBjb250ZXh0LnN0b3AgKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0JHRoaXMub24oIHRvdWNoU3RhcnRFdmVudCwgY29udGV4dC5zdGFydCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBldmVudHMsIGNvbnRleHQ7XHJcblxyXG5cdFx0XHRldmVudHMgPSAkLmRhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiICk7XHJcblx0XHRcdGlmICggZXZlbnRzICkge1xyXG5cdFx0XHRcdGNvbnRleHQgPSBldmVudHMuc3dpcGU7XHJcblx0XHRcdFx0ZGVsZXRlIGV2ZW50cy5zd2lwZTtcclxuXHRcdFx0XHRldmVudHMubGVuZ3RoLS07XHJcblx0XHRcdFx0aWYgKCBldmVudHMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdFx0JC5yZW1vdmVEYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBjb250ZXh0ICkge1xyXG5cdFx0XHRcdGlmICggY29udGV4dC5zdGFydCApIHtcclxuXHRcdFx0XHRcdCQoIHRoaXMgKS5vZmYoIHRvdWNoU3RhcnRFdmVudCwgY29udGV4dC5zdGFydCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGNvbnRleHQubW92ZSApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoIHRvdWNoTW92ZUV2ZW50LCBjb250ZXh0Lm1vdmUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBjb250ZXh0LnN0b3AgKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQub2ZmKCB0b3VjaFN0b3BFdmVudCwgY29udGV4dC5zdG9wICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHQkLmVhY2goe1xyXG5cdFx0c2Nyb2xsc3RvcDogXCJzY3JvbGxzdGFydFwiLFxyXG5cdFx0dGFwaG9sZDogXCJ0YXBcIixcclxuXHRcdHN3aXBlbGVmdDogXCJzd2lwZS5sZWZ0XCIsXHJcblx0XHRzd2lwZXJpZ2h0OiBcInN3aXBlLnJpZ2h0XCJcclxuXHR9LCBmdW5jdGlvbiggZXZlbnQsIHNvdXJjZUV2ZW50ICkge1xyXG5cclxuXHRcdCQuZXZlbnQuc3BlY2lhbFsgZXZlbnQgXSA9IHtcclxuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5iaW5kKCBzb3VyY2VFdmVudCwgJC5ub29wICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkudW5iaW5kKCBzb3VyY2VFdmVudCApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuXHJcblx0Ly8gdGhyb3R0bGVkIHJlc2l6ZSBldmVudFxyXG5cdChmdW5jdGlvbiggJCApIHtcclxuXHRcdCQuZXZlbnQuc3BlY2lhbC50aHJvdHRsZWRyZXNpemUgPSB7XHJcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuYmluZCggXCJyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnVuYmluZCggXCJyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciB0aHJvdHRsZSA9IDI1MCxcclxuXHRcdFx0aGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGN1cnIgPSAoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCk7XHJcblx0XHRcdFx0ZGlmZiA9IGN1cnIgLSBsYXN0Q2FsbDtcclxuXHJcblx0XHRcdFx0aWYgKCBkaWZmID49IHRocm90dGxlICkge1xyXG5cclxuXHRcdFx0XHRcdGxhc3RDYWxsID0gY3VycjtcclxuXHRcdFx0XHRcdCQoIHRoaXMgKS50cmlnZ2VyKCBcInRocm90dGxlZHJlc2l6ZVwiICk7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBoZWxkQ2FsbCApIHtcclxuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBoZWxkQ2FsbCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFByb21pc2UgYSBoZWxkIGNhbGwgd2lsbCBzdGlsbCBleGVjdXRlXHJcblx0XHRcdFx0XHRoZWxkQ2FsbCA9IHNldFRpbWVvdXQoIGhhbmRsZXIsIHRocm90dGxlIC0gZGlmZiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0bGFzdENhbGwgPSAwLFxyXG5cdFx0XHRoZWxkQ2FsbCxcclxuXHRcdFx0Y3VycixcclxuXHRcdFx0ZGlmZjtcclxuXHR9KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3cgKSB7XHJcblx0dmFyIHdpbiA9ICQoIHdpbmRvdyApLFxyXG5cdFx0ZXZlbnRfbmFtZSA9IFwib3JpZW50YXRpb25jaGFuZ2VcIixcclxuXHRcdGdldF9vcmllbnRhdGlvbixcclxuXHRcdGxhc3Rfb3JpZW50YXRpb24sXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSxcclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCxcclxuXHRcdHBvcnRyYWl0X21hcCA9IHsgXCIwXCI6IHRydWUsIFwiMTgwXCI6IHRydWUgfSxcclxuXHRcdHd3LCB3aCwgbGFuZHNjYXBlX3RocmVzaG9sZDtcclxuXHJcblx0Ly8gSXQgc2VlbXMgdGhhdCBzb21lIGRldmljZS9icm93c2VyIHZlbmRvcnMgdXNlIHdpbmRvdy5vcmllbnRhdGlvbiB2YWx1ZXMgMCBhbmQgMTgwIHRvXHJcblx0Ly8gZGVub3RlIHRoZSBcImRlZmF1bHRcIiBvcmllbnRhdGlvbi4gRm9yIGlPUyBkZXZpY2VzLCBhbmQgbW9zdCBvdGhlciBzbWFydC1waG9uZXMgdGVzdGVkLFxyXG5cdC8vIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uIGlzIGFsd2F5cyBcInBvcnRyYWl0XCIsIGJ1dCBpbiBzb21lIEFuZHJvaWQgYW5kIFJJTSBiYXNlZCB0YWJsZXRzLFxyXG5cdC8vIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uIGlzIFwibGFuZHNjYXBlXCIuIFRoZSBmb2xsb3dpbmcgY29kZSBhdHRlbXB0cyB0byB1c2UgdGhlIHdpbmRvd1xyXG5cdC8vIGRpbWVuc2lvbnMgdG8gZmlndXJlIG91dCB3aGF0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIGlzLCBhbmQgdGhlbiBtYWtlcyBhZGp1c3RtZW50c1xyXG5cdC8vIHRvIHRoZSB0byB0aGUgcG9ydHJhaXRfbWFwIGlmIG5lY2Vzc2FyeSwgc28gdGhhdCB3ZSBjYW4gcHJvcGVybHkgZGVjb2RlIHRoZVxyXG5cdC8vIHdpbmRvdy5vcmllbnRhdGlvbiB2YWx1ZSB3aGVuZXZlciBnZXRfb3JpZW50YXRpb24oKSBpcyBjYWxsZWQuXHJcblx0Ly9cclxuXHQvLyBOb3RlIHRoYXQgd2UgdXNlZCB0byB1c2UgYSBtZWRpYSBxdWVyeSB0byBmaWd1cmUgb3V0IHdoYXQgdGhlIG9yaWVudGF0aW9uIHRoZSBicm93c2VyXHJcblx0Ly8gdGhpbmtzIGl0IGlzIGluOlxyXG5cdC8vXHJcblx0Ly8gICAgIGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlID0gJC5tb2JpbGUubWVkaWEoXCJhbGwgYW5kIChvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKTtcclxuXHQvL1xyXG5cdC8vIGJ1dCB0aGVyZSB3YXMgYW4gaVBob25lL2lQb2QgVG91Y2ggYnVnIGJlZ2lubmluZyB3aXRoIGlPUyA0LjIsIHVwIHRocm91Z2ggaU9TIDUuMSxcclxuXHQvLyB3aGVyZSB0aGUgYnJvd3NlciAqQUxXQVlTKiBhcHBsaWVkIHRoZSBsYW5kc2NhcGUgbWVkaWEgcXVlcnkuIFRoaXMgYnVnIGRvZXMgbm90XHJcblx0Ly8gaGFwcGVuIG9uIGlQYWQuXHJcblxyXG5cdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICkge1xyXG5cclxuXHRcdC8vIENoZWNrIHRoZSB3aW5kb3cgd2lkdGggYW5kIGhlaWdodCB0byBmaWd1cmUgb3V0IHdoYXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb25cclxuXHRcdC8vIG9mIHRoZSBkZXZpY2UgaXMgYXQgdGhpcyBtb21lbnQuIE5vdGUgdGhhdCB3ZSd2ZSBpbml0aWFsaXplZCB0aGUgcG9ydHJhaXQgbWFwXHJcblx0XHQvLyB2YWx1ZXMgdG8gMCBhbmQgMTgwLCAqQU5EKiB3ZSBwdXJwb3NlbHkgY2hlY2sgZm9yIGxhbmRzY2FwZSBzbyB0aGF0IGlmIHdlIGd1ZXNzXHJcblx0XHQvLyB3cm9uZywgLCB3ZSBkZWZhdWx0IHRvIHRoZSBhc3N1bXB0aW9uIHRoYXQgcG9ydHJhaXQgaXMgdGhlIGRlZmF1bHQgb3JpZW50YXRpb24uXHJcblx0XHQvLyBXZSB1c2UgYSB0aHJlc2hvbGQgY2hlY2sgYmVsb3cgYmVjYXVzZSBvbiBzb21lIHBsYXRmb3JtcyBsaWtlIGlPUywgdGhlIGlQaG9uZVxyXG5cdFx0Ly8gZm9ybS1mYWN0b3IgY2FuIHJlcG9ydCBhIGxhcmdlciB3aWR0aCB0aGFuIGhlaWdodCBpZiB0aGUgdXNlciB0dXJucyBvbiB0aGVcclxuXHRcdC8vIGRldmVsb3BlciBjb25zb2xlLiBUaGUgYWN0dWFsIHRocmVzaG9sZCB2YWx1ZSBpcyBzb21ld2hhdCBhcmJpdHJhcnksIHdlIGp1c3RcclxuXHRcdC8vIG5lZWQgdG8gbWFrZSBzdXJlIGl0IGlzIGxhcmdlIGVub3VnaCB0byBleGNsdWRlIHRoZSBkZXZlbG9wZXIgY29uc29sZSBjYXNlLlxyXG5cclxuXHRcdHd3ID0gd2luZG93LmlubmVyV2lkdGggfHwgd2luLndpZHRoKCk7XHJcblx0XHR3aCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCB3aW4uaGVpZ2h0KCk7XHJcblx0XHRsYW5kc2NhcGVfdGhyZXNob2xkID0gNTA7XHJcblxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgPSB3dyA+IHdoICYmICggd3cgLSB3aCApID4gbGFuZHNjYXBlX3RocmVzaG9sZDtcclxuXHJcblx0XHQvLyBOb3cgY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHdpbmRvdy5vcmllbnRhdGlvbiBpcyAwIG9yIDE4MC5cclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCA9IHBvcnRyYWl0X21hcFsgd2luZG93Lm9yaWVudGF0aW9uIF07XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGluaXRpYWwgb3JpZW50YXRpb24gaXMgbGFuZHNjYXBlLCBidXQgd2luZG93Lm9yaWVudGF0aW9uIHJlcG9ydHMgMCBvciAxODAsICpPUipcclxuXHRcdC8vIGlmIHRoZSBpbml0aWFsIG9yaWVudGF0aW9uIGlzIHBvcnRyYWl0LCBidXQgd2luZG93Lm9yaWVudGF0aW9uIHJlcG9ydHMgOTAgb3IgLTkwLCB3ZVxyXG5cdFx0Ly8gbmVlZCB0byBmbGlwIG91ciBwb3J0cmFpdF9tYXAgdmFsdWVzIGJlY2F1c2UgbGFuZHNjYXBlIGlzIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uIGZvclxyXG5cdFx0Ly8gdGhpcyBkZXZpY2UvYnJvd3Nlci5cclxuXHRcdGlmICggKCBpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSAmJiBpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQgKSB8fCAoICFpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSAmJiAhaW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0ICkgKSB7XHJcblx0XHRcdHBvcnRyYWl0X21hcCA9IHsgXCItOTBcIjogdHJ1ZSwgXCI5MFwiOiB0cnVlIH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UgPSAkLmV4dGVuZCgge30sICQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZSwge1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBJZiB0aGUgZXZlbnQgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LCByZXR1cm4gZmFsc2Ugc28gdGhhdCBqUXVlcnlcclxuXHRcdFx0Ly8gd2lsbCBiaW5kIHRvIHRoZSBldmVudCB1c2luZyBET00gbWV0aG9kcy5cclxuXHRcdFx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gJiYgISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBvcmllbnRhdGlvbiB0byBhdm9pZCBpbml0aWFsIGRvdWJsZS10cmlnZ2VyaW5nLlxyXG5cdFx0XHRsYXN0X29yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uKCk7XHJcblxyXG5cdFx0XHQvLyBCZWNhdXNlIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudCBkb2Vzbid0IGV4aXN0LCBzaW11bGF0ZSB0aGVcclxuXHRcdFx0Ly8gZXZlbnQgYnkgdGVzdGluZyB3aW5kb3cgZGltZW5zaW9ucyBvbiByZXNpemUuXHJcblx0XHRcdHdpbi5iaW5kKCBcInRocm90dGxlZHJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHR9LFxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBJZiB0aGUgZXZlbnQgaXMgbm90IHN1cHBvcnRlZCBuYXRpdmVseSwgcmV0dXJuIGZhbHNlIHNvIHRoYXRcclxuXHRcdFx0Ly8galF1ZXJ5IHdpbGwgdW5iaW5kIHRoZSBldmVudCB1c2luZyBET00gbWV0aG9kcy5cclxuXHRcdFx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gJiYgISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEJlY2F1c2UgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50IGRvZXNuJ3QgZXhpc3QsIHVuYmluZCB0aGVcclxuXHRcdFx0Ly8gcmVzaXplIGV2ZW50IGhhbmRsZXIuXHJcblx0XHRcdHdpbi51bmJpbmQoIFwidGhyb3R0bGVkcmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdH0sXHJcblx0XHRhZGQ6IGZ1bmN0aW9uKCBoYW5kbGVPYmogKSB7XHJcblx0XHRcdC8vIFNhdmUgYSByZWZlcmVuY2UgdG8gdGhlIGJvdW5kIGV2ZW50IGhhbmRsZXIuXHJcblx0XHRcdHZhciBvbGRfaGFuZGxlciA9IGhhbmRsZU9iai5oYW5kbGVyO1xyXG5cclxuXHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0Ly8gTW9kaWZ5IGV2ZW50IG9iamVjdCwgYWRkaW5nIHRoZSAub3JpZW50YXRpb24gcHJvcGVydHkuXHJcblx0XHRcdFx0ZXZlbnQub3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24oKTtcclxuXHJcblx0XHRcdFx0Ly8gQ2FsbCB0aGUgb3JpZ2luYWxseS1ib3VuZCBldmVudCBoYW5kbGVyIGFuZCByZXR1cm4gaXRzIHJlc3VsdC5cclxuXHRcdFx0XHRyZXR1cm4gb2xkX2hhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBJZiB0aGUgZXZlbnQgaXMgbm90IHN1cHBvcnRlZCBuYXRpdmVseSwgdGhpcyBoYW5kbGVyIHdpbGwgYmUgYm91bmQgdG9cclxuXHQvLyB0aGUgd2luZG93IHJlc2l6ZSBldmVudCB0byBzaW11bGF0ZSB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQuXHJcblx0ZnVuY3Rpb24gaGFuZGxlcigpIHtcclxuXHRcdC8vIEdldCB0aGUgY3VycmVudCBvcmllbnRhdGlvbi5cclxuXHRcdHZhciBvcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbigpO1xyXG5cclxuXHRcdGlmICggb3JpZW50YXRpb24gIT09IGxhc3Rfb3JpZW50YXRpb24gKSB7XHJcblx0XHRcdC8vIFRoZSBvcmllbnRhdGlvbiBoYXMgY2hhbmdlZCwgc28gdHJpZ2dlciB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQuXHJcblx0XHRcdGxhc3Rfb3JpZW50YXRpb24gPSBvcmllbnRhdGlvbjtcclxuXHRcdFx0d2luLnRyaWdnZXIoIGV2ZW50X25hbWUgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEdldCB0aGUgY3VycmVudCBwYWdlIG9yaWVudGF0aW9uLiBUaGlzIG1ldGhvZCBpcyBleHBvc2VkIHB1YmxpY2x5LCBzaG91bGQgaXRcclxuXHQvLyBiZSBuZWVkZWQsIGFzIGpRdWVyeS5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLm9yaWVudGF0aW9uKClcclxuXHQkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Uub3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpc1BvcnRyYWl0ID0gdHJ1ZSwgZWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuXHJcblx0XHQvLyBwcmVmZXIgd2luZG93IG9yaWVudGF0aW9uIHRvIHRoZSBjYWxjdWxhdGlvbiBiYXNlZCBvbiBzY3JlZW5zaXplIGFzXHJcblx0XHQvLyB0aGUgYWN0dWFsIHNjcmVlbiByZXNpemUgdGFrZXMgcGxhY2UgYmVmb3JlIG9yIGFmdGVyIHRoZSBvcmllbnRhdGlvbiBjaGFuZ2UgZXZlbnRcclxuXHRcdC8vIGhhcyBiZWVuIGZpcmVkIGRlcGVuZGluZyBvbiBpbXBsZW1lbnRhdGlvbiAoZWcgYW5kcm9pZCAyLjMgaXMgYmVmb3JlLCBpcGhvbmUgYWZ0ZXIpLlxyXG5cdFx0Ly8gTW9yZSB0ZXN0aW5nIGlzIHJlcXVpcmVkIHRvIGRldGVybWluZSBpZiBhIG1vcmUgcmVsaWFibGUgbWV0aG9kIG9mIGRldGVybWluaW5nIHRoZSBuZXcgc2NyZWVuc2l6ZVxyXG5cdFx0Ly8gaXMgcG9zc2libGUgd2hlbiBvcmllbnRhdGlvbmNoYW5nZSBpcyBmaXJlZC4gKGVnLCB1c2UgbWVkaWEgcXVlcmllcyArIGVsZW1lbnQgKyBvcGFjaXR5KVxyXG5cdFx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gKSB7XHJcblx0XHRcdC8vIGlmIHRoZSB3aW5kb3cgb3JpZW50YXRpb24gcmVnaXN0ZXJzIGFzIDAgb3IgMTgwIGRlZ3JlZXMgcmVwb3J0XHJcblx0XHRcdC8vIHBvcnRyYWl0LCBvdGhlcndpc2UgbGFuZHNjYXBlXHJcblx0XHRcdGlzUG9ydHJhaXQgPSBwb3J0cmFpdF9tYXBbIHdpbmRvdy5vcmllbnRhdGlvbiBdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aXNQb3J0cmFpdCA9IGVsZW0gJiYgZWxlbS5jbGllbnRXaWR0aCAvIGVsZW0uY2xpZW50SGVpZ2h0IDwgMS4xO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpc1BvcnRyYWl0ID8gXCJwb3J0cmFpdFwiIDogXCJsYW5kc2NhcGVcIjtcclxuXHR9O1xyXG5cclxuXHQkLmZuWyBldmVudF9uYW1lIF0gPSBmdW5jdGlvbiggZm4gKSB7XHJcblx0XHRyZXR1cm4gZm4gPyB0aGlzLmJpbmQoIGV2ZW50X25hbWUsIGZuICkgOiB0aGlzLnRyaWdnZXIoIGV2ZW50X25hbWUgKTtcclxuXHR9O1xyXG5cclxuXHQvLyBqUXVlcnkgPCAxLjhcclxuXHRpZiAoICQuYXR0ckZuICkge1xyXG5cdFx0JC5hdHRyRm5bIGV2ZW50X25hbWUgXSA9IHRydWU7XHJcblx0fVxyXG5cclxufSggalF1ZXJ5LCB0aGlzICkpO1xyXG5cclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8vIGV4aXN0aW5nIGJhc2UgdGFnP1xyXG5cdHZhciBiYXNlRWxlbWVudCA9ICQoIFwiaGVhZFwiICkuY2hpbGRyZW4oIFwiYmFzZVwiICksXHJcblxyXG5cdC8vIGJhc2UgZWxlbWVudCBtYW5hZ2VtZW50LCBkZWZpbmVkIGRlcGVuZGluZyBvbiBkeW5hbWljIGJhc2UgdGFnIHN1cHBvcnRcclxuXHQvLyBUT0RPIG1vdmUgdG8gZXh0ZXJuYWwgd2lkZ2V0XHJcblx0YmFzZSA9IHtcclxuXHJcblx0XHQvLyBkZWZpbmUgYmFzZSBlbGVtZW50LCBmb3IgdXNlIGluIHJvdXRpbmcgYXNzZXQgdXJscyB0aGF0IGFyZSByZWZlcmVuY2VkXHJcblx0XHQvLyBpbiBBamF4LXJlcXVlc3RlZCBtYXJrdXBcclxuXHRcdGVsZW1lbnQ6ICggYmFzZUVsZW1lbnQubGVuZ3RoID8gYmFzZUVsZW1lbnQgOlxyXG5cdFx0XHQkKCBcIjxiYXNlPlwiLCB7IGhyZWY6ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggfSApLnByZXBlbmRUbyggJCggXCJoZWFkXCIgKSApICksXHJcblxyXG5cdFx0bGlua1NlbGVjdG9yOiBcIltzcmNdLCBsaW5rW2hyZWZdLCBhW3JlbD0nZXh0ZXJuYWwnXSwgOmpxbURhdGEoYWpheD0nZmFsc2UnKSwgYVt0YXJnZXRdXCIsXHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBnZW5lcmF0ZWQgQkFTRSBlbGVtZW50J3MgaHJlZiB0byBhIG5ldyBwYWdlJ3MgYmFzZSBwYXRoXHJcblx0XHRzZXQ6IGZ1bmN0aW9uKCBocmVmICkge1xyXG5cclxuXHRcdFx0Ly8gd2Ugc2hvdWxkIGRvIG5vdGhpbmcgaWYgdGhlIHVzZXIgd2FudHMgdG8gbWFuYWdlIHRoZWlyIHVybCBiYXNlXHJcblx0XHRcdC8vIG1hbnVhbGx5XHJcblx0XHRcdGlmICggISQubW9iaWxlLmR5bmFtaWNCYXNlRW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHdlIHNob3VsZCB1c2UgdGhlIGJhc2UgdGFnIGlmIHdlIGNhbiBtYW5pcHVsYXRlIGl0IGR5bmFtaWNhbGx5XHJcblx0XHRcdGlmICggJC5zdXBwb3J0LmR5bmFtaWNCYXNlVGFnICkge1xyXG5cdFx0XHRcdGJhc2UuZWxlbWVudC5hdHRyKCBcImhyZWZcIixcclxuXHRcdFx0XHRcdCQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBocmVmLCAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZSApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0cmV3cml0ZTogZnVuY3Rpb24oIGhyZWYsIHBhZ2UgKSB7XHJcblx0XHRcdHZhciBuZXdQYXRoID0gJC5tb2JpbGUucGF0aC5nZXQoIGhyZWYgKTtcclxuXHJcblx0XHRcdHBhZ2UuZmluZCggYmFzZS5saW5rU2VsZWN0b3IgKS5lYWNoKGZ1bmN0aW9uKCBpLCBsaW5rICkge1xyXG5cdFx0XHRcdHZhciB0aGlzQXR0ciA9ICQoIGxpbmsgKS5pcyggXCJbaHJlZl1cIiApID8gXCJocmVmXCIgOlxyXG5cdFx0XHRcdFx0JCggbGluayApLmlzKCBcIltzcmNdXCIgKSA/IFwic3JjXCIgOiBcImFjdGlvblwiLFxyXG5cdFx0XHRcdHRoZUxvY2F0aW9uID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCksXHJcblx0XHRcdFx0dGhpc1VybCA9ICQoIGxpbmsgKS5hdHRyKCB0aGlzQXR0ciApO1xyXG5cclxuXHRcdFx0XHQvLyBYWFhfamJsYXM6IFdlIG5lZWQgdG8gZml4IHRoaXMgc28gdGhhdCBpdCByZW1vdmVzIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdC8vICAgICAgICAgICAgYmFzZSBVUkwsIGFuZCB0aGVuIHByZXBlbmRzIHdpdGggdGhlIG5ldyBwYWdlIFVSTC5cclxuXHRcdFx0XHQvLyBpZiBmdWxsIHBhdGggZXhpc3RzIGFuZCBpcyBzYW1lLCBjaG9wIGl0IC0gaGVscHMgSUUgb3V0XHJcblx0XHRcdFx0dGhpc1VybCA9IHRoaXNVcmwucmVwbGFjZSggdGhlTG9jYXRpb24ucHJvdG9jb2wgKyB0aGVMb2NhdGlvbi5kb3VibGVTbGFzaCArXHJcblx0XHRcdFx0XHR0aGVMb2NhdGlvbi5ob3N0ICsgdGhlTG9jYXRpb24ucGF0aG5hbWUsIFwiXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCAhL14oXFx3Kzp8I3xcXC8pLy50ZXN0KCB0aGlzVXJsICkgKSB7XHJcblx0XHRcdFx0XHQkKCBsaW5rICkuYXR0ciggdGhpc0F0dHIsIG5ld1BhdGggKyB0aGlzVXJsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBnZW5lcmF0ZWQgQkFTRSBlbGVtZW50J3MgaHJlZiB0byBhIG5ldyBwYWdlJ3MgYmFzZSBwYXRoXHJcblx0XHRyZXNldDogZnVuY3Rpb24oLyogaHJlZiAqLykge1xyXG5cdFx0XHRiYXNlLmVsZW1lbnQuYXR0ciggXCJocmVmXCIsICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb1NlYXJjaCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQubW9iaWxlLmJhc2UgPSBiYXNlO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG4kLm1vYmlsZS53aWRnZXRzID0ge307XHJcblxyXG52YXIgb3JpZ2luYWxXaWRnZXQgPSAkLndpZGdldCxcclxuXHJcblx0Ly8gUmVjb3JkIHRoZSBvcmlnaW5hbCwgbm9uLW1vYmlsZWluaXQtbW9kaWZpZWQgdmVyc2lvbiBvZiAkLm1vYmlsZS5rZWVwTmF0aXZlXHJcblx0Ly8gc28gd2UgY2FuIGxhdGVyIGRldGVybWluZSB3aGV0aGVyIHNvbWVvbmUgaGFzIG1vZGlmaWVkICQubW9iaWxlLmtlZXBOYXRpdmVcclxuXHRrZWVwTmF0aXZlRmFjdG9yeURlZmF1bHQgPSAkLm1vYmlsZS5rZWVwTmF0aXZlO1xyXG5cclxuJC53aWRnZXQgPSAoZnVuY3Rpb24oIG9yaWcgKSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGNvbnN0cnVjdG9yID0gb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICksXHJcblx0XHRcdG5hbWUgPSBjb25zdHJ1Y3Rvci5wcm90b3R5cGUud2lkZ2V0TmFtZTtcclxuXHJcblx0XHRjb25zdHJ1Y3Rvci5pbml0U2VsZWN0b3IgPSAoICggY29uc3RydWN0b3IucHJvdG90eXBlLmluaXRTZWxlY3RvciAhPT0gdW5kZWZpbmVkICkgP1xyXG5cdFx0XHRjb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdFNlbGVjdG9yIDogXCI6anFtRGF0YShyb2xlPSdcIiArIG5hbWUgKyBcIicpXCIgKTtcclxuXHJcblx0XHQkLm1vYmlsZS53aWRnZXRzWyBuYW1lIF0gPSBjb25zdHJ1Y3RvcjtcclxuXHJcblx0XHRyZXR1cm4gY29uc3RydWN0b3I7XHJcblx0fTtcclxufSkoICQud2lkZ2V0ICk7XHJcblxyXG4vLyBNYWtlIHN1cmUgJC53aWRnZXQgc3RpbGwgaGFzIGJyaWRnZSBhbmQgZXh0ZW5kIG1ldGhvZHNcclxuJC5leHRlbmQoICQud2lkZ2V0LCBvcmlnaW5hbFdpZGdldCApO1xyXG5cclxuLy8gRm9yIGJhY2tjb21wYXQgcmVtb3ZlIGluIDEuNVxyXG4kLm1vYmlsZS5kb2N1bWVudC5vbiggXCJjcmVhdGVcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdCQoIGV2ZW50LnRhcmdldCApLmVuaGFuY2VXaXRoaW4oKTtcclxufSk7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucGFnZVwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IFwiYVwiLFxyXG5cdFx0ZG9tQ2FjaGU6IGZhbHNlLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdGtlZXBOYXRpdmVEZWZhdWx0OiAkLm1vYmlsZS5rZWVwTmF0aXZlLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdGNvbnRlbnRUaGVtZTogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdC8vIERFUFJFQ0FURUQgZm9yID4gMS40XHJcblx0Ly8gVE9ETyByZW1vdmUgYXQgMS41XHJcblx0X2NyZWF0ZVdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHQkLldpZGdldC5wcm90b3R5cGUuX2NyZWF0ZVdpZGdldC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImluaXRcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gSWYgZmFsc2UgaXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrcyBkbyBub3QgY3JlYXRlIHRoZSBwYWdlXHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlY3JlYXRlXCIgKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LCB7XHJcblx0XHRcdHBhZ2ViZWZvcmVoaWRlOiBcInJlbW92ZUNvbnRhaW5lckJhY2tncm91bmRcIixcclxuXHRcdFx0cGFnZWJlZm9yZXNob3c6IFwiX2hhbmRsZVBhZ2VCZWZvcmVTaG93XCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5lbmhhbmNlV2l0aGluKCk7XHJcblx0XHQvLyBEaWFsb2cgd2lkZ2V0IGlzIGRlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSB0aGlzIGluIDEuNVxyXG5cdFx0aWYgKCAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMuZWxlbWVudFswXSwgXCJyb2xlXCIgKSA9PT0gXCJkaWFsb2dcIiAmJiAkLm1vYmlsZS5kaWFsb2cgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5kaWFsb2coKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGF0dHJQcmVmaXggPSBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyxcclxuXHRcdFx0c2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucm9sZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlXCIsIHRoaXMub3B0aW9ucy5yb2xlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5hdHRyKCBcInRhYmluZGV4XCIsIFwiMFwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBhZ2UgdWktcGFnZS10aGVtZS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApO1xyXG5cclxuXHRcdC8vIE1hbmlwdWxhdGlvbiBvZiBjb250ZW50IG9zIERlcHJlY2F0ZWQgYXMgb2YgMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIltcIiArIGF0dHJQcmVmaXggKyBcInJvbGU9J2NvbnRlbnQnXVwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHR0aGVtZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCBhdHRyUHJlZml4ICsgXCJ0aGVtZVwiICkgfHwgdW5kZWZpbmVkO1xyXG5cdFx0XHRcdHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgPSB0aGVtZSB8fCBzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lIHx8ICggc2VsZi5vcHRpb25zLmRpYWxvZyAmJiBzZWxmLm9wdGlvbnMudGhlbWUgKSB8fCAoIHNlbGYuZWxlbWVudC5qcW1EYXRhKFwicm9sZVwiKSA9PT0gXCJkaWFsb2dcIiAmJiAgc2VsZi5vcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktY29udGVudFwiICk7XHJcblx0XHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lICkge1xyXG5cdFx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArICggc2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEFkZCBBUklBIHJvbGVcclxuXHRcdFx0XHQkdGhpcy5hdHRyKCBcInJvbGVcIiwgXCJtYWluXCIgKS5hZGRDbGFzcyggXCJ1aS1jb250ZW50XCIgKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdGJpbmRSZW1vdmU6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcclxuXHRcdHZhciBwYWdlID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdC8vIHdoZW4gZG9tIGNhY2hpbmcgaXMgbm90IGVuYWJsZWQgb3IgdGhlIHBhZ2UgaXMgZW1iZWRkZWQgYmluZCB0byByZW1vdmUgdGhlIHBhZ2Ugb24gaGlkZVxyXG5cdFx0aWYgKCAhcGFnZS5kYXRhKCBcIm1vYmlsZS1wYWdlXCIgKS5vcHRpb25zLmRvbUNhY2hlICYmXHJcblx0XHRcdHBhZ2UuaXMoIFwiOmpxbURhdGEoZXh0ZXJuYWwtcGFnZT0ndHJ1ZScpXCIgKSApIHtcclxuXHJcblx0XHRcdC8vIFRPRE8gdXNlIF9vbiAtIHRoYXQgaXMsIHNvcnQgb3V0IHdoeSBpdCBkb2Vzbid0IHdvcmsgaW4gdGhpcyBjYXNlXHJcblx0XHRcdHBhZ2UuYmluZCggXCJwYWdlaGlkZS5yZW1vdmVcIiwgY2FsbGJhY2sgfHwgZnVuY3Rpb24oIGUsIGRhdGEgKSB7XHJcblxyXG5cdFx0XHRcdC8vY2hlY2sgaWYgdGhpcyBpcyBhIHNhbWUgcGFnZSB0cmFuc2l0aW9uIGFuZCBpZiBzbyBkb24ndCByZW1vdmUgdGhlIHBhZ2VcclxuXHRcdFx0XHRpZiggIWRhdGEuc2FtZVBhZ2UgKXtcclxuXHRcdFx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdFx0cHJFdmVudCA9IG5ldyAkLkV2ZW50KCBcInBhZ2VyZW1vdmVcIiApO1xyXG5cclxuXHRcdFx0XHRcdCR0aGlzLnRyaWdnZXIoIHByRXZlbnQgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoICFwckV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0XHQkdGhpcy5yZW1vdmVXaXRoRGVwZW5kZW50cygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvICkge1xyXG5cdFx0aWYgKCBvLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1wYWdlLXRoZW1lLVwiICsgdGhpcy5vcHRpb25zLnRoZW1lICkuYWRkQ2xhc3MoIFwidWktcGFnZS10aGVtZS1cIiArIG8udGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG8uY29udGVudFRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIltkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcIj0nY29udGVudCddXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1ib2R5LVwiICsgdGhpcy5vcHRpb25zLmNvbnRlbnRUaGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyBvLmNvbnRlbnRUaGVtZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0dGhpcy5zZXRDb250YWluZXJCYWNrZ3JvdW5kKCk7XHJcblx0fSxcclxuXHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0cmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCI6bW9iaWxlLXBhZ2Vjb250YWluZXJcIiApLnBhZ2Vjb250YWluZXIoeyBcInRoZW1lXCI6IFwibm9uZVwiIH0pO1xyXG5cdH0sXHJcblx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdC8vIHNldCB0aGUgcGFnZSBjb250YWluZXIgYmFja2dyb3VuZCB0byB0aGUgcGFnZSB0aGVtZVxyXG5cdHNldENvbnRhaW5lckJhY2tncm91bmQ6IGZ1bmN0aW9uKCB0aGVtZSApIHtcclxuXHRcdHRoaXMuZWxlbWVudC5wYXJlbnQoKS5wYWdlY29udGFpbmVyKCB7IFwidGhlbWVcIjogdGhlbWUgfHwgdGhpcy5vcHRpb25zLnRoZW1lIH0gKTtcclxuXHR9LFxyXG5cdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRrZWVwTmF0aXZlU2VsZWN0b3I6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGtlZXBOYXRpdmUgPSAkLnRyaW0oIG9wdGlvbnMua2VlcE5hdGl2ZSB8fCBcIlwiICksXHJcblx0XHRcdGdsb2JhbFZhbHVlID0gJC50cmltKCAkLm1vYmlsZS5rZWVwTmF0aXZlICksXHJcblx0XHRcdG9wdGlvblZhbHVlID0gJC50cmltKCBvcHRpb25zLmtlZXBOYXRpdmVEZWZhdWx0ICksXHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiAkLm1vYmlsZS5rZWVwTmF0aXZlIGhhcyBjaGFuZ2VkIGZyb20gdGhlIGZhY3RvcnkgZGVmYXVsdFxyXG5cdFx0XHRuZXdEZWZhdWx0ID0gKCBrZWVwTmF0aXZlRmFjdG9yeURlZmF1bHQgPT09IGdsb2JhbFZhbHVlID9cclxuXHRcdFx0XHRcIlwiIDogZ2xvYmFsVmFsdWUgKSxcclxuXHJcblx0XHRcdC8vIElmICQubW9iaWxlLmtlZXBOYXRpdmUgaGFzIG5vdCBjaGFuZ2VkLCB1c2Ugb3B0aW9ucy5rZWVwTmF0aXZlRGVmYXVsdFxyXG5cdFx0XHRvbGREZWZhdWx0ID0gKCBuZXdEZWZhdWx0ID09PSBcIlwiID8gb3B0aW9uVmFsdWUgOiBcIlwiICk7XHJcblxyXG5cdFx0Ly8gQ29uY2F0ZW5hdGUga2VlcE5hdGl2ZSBzZWxlY3RvcnMgZnJvbSBhbGwgc291cmNlcyB3aGVyZSB0aGUgdmFsdWUgaGFzXHJcblx0XHQvLyBjaGFuZ2VkIG9yLCBpZiBub3RoaW5nIGhhcyBjaGFuZ2VkLCByZXR1cm4gdGhlIGRlZmF1bHRcclxuXHRcdHJldHVybiAoICgga2VlcE5hdGl2ZSA/IFsga2VlcE5hdGl2ZSBdIDogW10gKVxyXG5cdFx0XHQuY29uY2F0KCBuZXdEZWZhdWx0ID8gWyBuZXdEZWZhdWx0IF0gOiBbXSApXHJcblx0XHRcdC5jb25jYXQoIG9sZERlZmF1bHQgPyBbIG9sZERlZmF1bHQgXSA6IFtdIClcclxuXHRcdFx0LmpvaW4oIFwiLCBcIiApICk7XHJcblx0fVxyXG59KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS5wYWdlY29udGFpbmVyXCIsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0dGhlbWU6IFwiYVwiXHJcblx0XHR9LFxyXG5cclxuXHRcdGluaXRTZWxlY3RvcjogZmFsc2UsXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlY3JlYXRlXCIgKTtcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcclxuXHRcdFx0XHQvLyBkaXNhYmxlIGFuIHNjcm9sbCBzZXR0aW5nIHdoZW4gYSBoYXNoY2hhbmdlIGhhcyBiZWVuIGZpcmVkLFxyXG5cdFx0XHRcdC8vIHRoaXMgb25seSB3b3JrcyBiZWNhdXNlIHRoZSByZWNvcmRpbmcgb2YgdGhlIHNjcm9sbCBwb3NpdGlvblxyXG5cdFx0XHRcdC8vIGlzIGRlbGF5ZWQgZm9yIDEwMG1zIGFmdGVyIHRoZSBicm93c2VyIG1pZ2h0IGhhdmUgY2hhbmdlZCB0aGVcclxuXHRcdFx0XHQvLyBwb3NpdGlvbiBiZWNhdXNlIG9mIHRoZSBoYXNoY2hhbmdlXHJcblx0XHRcdFx0bmF2aWdhdGU6IFwiX2Rpc2FibGVSZWNvcmRTY3JvbGxcIixcclxuXHJcblx0XHRcdFx0Ly8gYmluZCB0byBzY3JvbGxzdG9wIGZvciB0aGUgZmlyc3QgcGFnZSwgXCJwYWdlY2hhbmdlXCIgd29uJ3QgYmVcclxuXHRcdFx0XHQvLyBmaXJlZCBpbiB0aGF0IGNhc2VcclxuXHRcdFx0XHRzY3JvbGxzdG9wOiBcIl9kZWxheWVkUmVjb3JkU2Nyb2xsXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIG1vdmluZyB0aGUgbmF2aWdhdGlvbiBoYW5kbGVyIE9VVCBvZiB3aWRnZXQgaW50b1xyXG5cdFx0XHQvLyAgICAgIHNvbWUgb3RoZXIgb2JqZWN0IGFzIGdsdWUgYmV0d2VlbiB0aGUgbmF2aWdhdGUgZXZlbnQgYW5kIHRoZVxyXG5cdFx0XHQvLyAgICAgIGNvbnRlbnQgd2lkZ2V0IGxvYWQgYW5kIGNoYW5nZSBtZXRob2RzXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBuYXZpZ2F0ZTogXCJfZmlsdGVyTmF2aWdhdGVFdmVudHNcIiB9KTtcclxuXHJcblx0XHRcdC8vIFRPRE8gbW92ZSBmcm9tIHBhZ2UqIGV2ZW50cyB0byBjb250ZW50KiBldmVudHNcclxuXHRcdFx0dGhpcy5fb24oeyBwYWdlY2hhbmdlOiBcIl9hZnRlckNvbnRlbnRDaGFuZ2VcIiB9KTtcclxuXHJcblx0XHRcdC8vIGhhbmRsZSBpbml0aWFsIGhhc2hjaGFuZ2UgZnJvbSBjaHJvbWUgOihcclxuXHRcdFx0dGhpcy53aW5kb3cub25lKCBcIm5hdmlnYXRlXCIsICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnRoZW1lICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktb3ZlcmxheS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktb3ZlcmxheS1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1vdmVybGF5LVwiICsgdGhpcy5vcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kaXNhYmxlUmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZW5hYmxlUmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gY29uc2lkZXIgdGhlIG5hbWUgaGVyZSwgc2luY2UgaXQncyBwdXJwb3NlIHNwZWNpZmljXHJcblx0XHRfYWZ0ZXJDb250ZW50Q2hhbmdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gb25jZSB0aGUgcGFnZSBoYXMgY2hhbmdlZCwgcmUtZW5hYmxlIHRoZSBzY3JvbGwgcmVjb3JkaW5nXHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gcmVtb3ZlIGFueSBiaW5kaW5nIHRoYXQgcHJldmlvdXNseSBleGlzdGVkIG9uIHRoZSBnZXQgc2Nyb2xsXHJcblx0XHRcdC8vIHdoaWNoIG1heSBvciBtYXkgbm90IGJlIGRpZmZlcmVudCB0aGFuIHRoZSBzY3JvbGwgZWxlbWVudFxyXG5cdFx0XHQvLyBkZXRlcm1pbmVkIGZvciB0aGlzIHBhZ2UgcHJldmlvdXNseVxyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMud2luZG93LCBcInNjcm9sbHN0b3BcIiApO1xyXG5cclxuXHRcdFx0Ly8gZGV0ZXJtaW5lIGFuZCBiaW5kIHRvIHRoZSBjdXJyZW50IHNjb2xsIGVsZW1lbnQgd2hpY2ggbWF5IGJlIHRoZVxyXG5cdFx0XHQvLyB3aW5kb3cgb3IgaW4gdGhlIGNhc2Ugb2YgdG91Y2ggb3ZlcmZsb3cgdGhlIGVsZW1lbnQgdG91Y2ggb3ZlcmZsb3dcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IHNjcm9sbHN0b3A6IFwiX2RlbGF5ZWRSZWNvcmRTY3JvbGxcIiB9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3JlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIHRoaXMgYmFycmllciBwcmV2ZW50cyBzZXR0aW5nIHRoZSBzY3JvbGwgdmFsdWUgYmFzZWQgb25cclxuXHRcdFx0Ly8gdGhlIGJyb3dzZXIgc2Nyb2xsaW5nIHRoZSB3aW5kb3cgYmFzZWQgb24gYSBoYXNoY2hhbmdlXHJcblx0XHRcdGlmICggIXRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgYWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlSGlzdG9yeSgpLFxyXG5cdFx0XHRcdGN1cnJlbnRTY3JvbGwsIG1pblNjcm9sbCwgZGVmYXVsdFNjcm9sbDtcclxuXHJcblx0XHRcdGlmICggYWN0aXZlICkge1xyXG5cdFx0XHRcdGN1cnJlbnRTY3JvbGwgPSB0aGlzLl9nZXRTY3JvbGwoKTtcclxuXHRcdFx0XHRtaW5TY3JvbGwgPSB0aGlzLl9nZXRNaW5TY3JvbGwoKTtcclxuXHRcdFx0XHRkZWZhdWx0U2Nyb2xsID0gdGhpcy5fZ2V0RGVmYXVsdFNjcm9sbCgpO1xyXG5cclxuXHRcdFx0XHQvLyBTZXQgYWN0aXZlIHBhZ2UncyBsYXN0U2Nyb2xsIHByb3AuIElmIHRoZSBsb2NhdGlvbiB3ZSdyZVxyXG5cdFx0XHRcdC8vIHNjcm9sbGluZyB0byBpcyBsZXNzIHRoYW4gbWluU2Nyb2xsQmFjaywgbGV0IGl0IGdvLlxyXG5cdFx0XHRcdGFjdGl2ZS5sYXN0U2Nyb2xsID0gY3VycmVudFNjcm9sbCA8IG1pblNjcm9sbCA/IGRlZmF1bHRTY3JvbGwgOiBjdXJyZW50U2Nyb2xsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZWxheWVkUmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2V0VGltZW91dCggJC5wcm94eSh0aGlzLCBcIl9yZWNvcmRTY3JvbGxcIiksIDEwMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0U2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0TWluU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLm1pblNjcm9sbEJhY2s7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXREZWZhdWx0U2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZmlsdGVyTmF2aWdhdGVFdmVudHM6IGZ1bmN0aW9uKCBlLCBkYXRhICkge1xyXG5cdFx0XHR2YXIgdXJsO1xyXG5cclxuXHRcdFx0aWYgKCBlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dXJsID0gZS5vcmlnaW5hbEV2ZW50LnR5cGUuaW5kZXhPZiggXCJoYXNoY2hhbmdlXCIgKSA+IC0xID8gZGF0YS5zdGF0ZS5oYXNoIDogZGF0YS5zdGF0ZS51cmw7XHJcblxyXG5cdFx0XHRpZiAoICF1cmwgKSB7XHJcblx0XHRcdFx0dXJsID0gdGhpcy5fZ2V0SGFzaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICF1cmwgfHwgdXJsID09PSBcIiNcIiB8fCB1cmwuaW5kZXhPZiggXCIjXCIgKyAkLm1vYmlsZS5wYXRoLnVpU3RhdGVLZXkgKSA9PT0gMCApIHtcclxuXHRcdFx0XHR1cmwgPSBsb2NhdGlvbi5ocmVmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9oYW5kbGVOYXZpZ2F0ZSggdXJsLCBkYXRhLnN0YXRlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRIYXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gYWN0aXZlIHBhZ2Ugc2hvdWxkIGJlIG1hbmFnZWQgYnkgdGhlIGNvbnRhaW5lciAoaWUsIGl0IHNob3VsZCBiZSBhIHByb3BlcnR5KVxyXG5cdFx0Z2V0QWN0aXZlUGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmFjdGl2ZVBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gdGhlIGZpcnN0IHBhZ2Ugc2hvdWxkIGJlIGEgcHJvcGVydHkgc2V0IGR1cmluZyBfY3JlYXRlIHVzaW5nIHRoZSBsb2dpY1xyXG5cdFx0Ly8gICAgICB0aGF0IGN1cnJlbnRseSByZXNpZGVzIGluIGluaXRcclxuXHRcdF9nZXRJbml0aWFsQ29udGVudDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5maXJzdFBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gZWFjaCBjb250ZW50IGNvbnRhaW5lciBzaG91bGQgaGF2ZSBhIGhpc3Rvcnkgb2JqZWN0XHJcblx0XHRfZ2V0SGlzdG9yeTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0QWN0aXZlSGlzdG9yeTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9nZXRIaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gdGhlIGRvY3VtZW50IGJhc2Ugc2hvdWxkIGJlIGRldGVybWluZWQgYXQgY3JlYXRpb25cclxuXHRcdF9nZXREb2N1bWVudEJhc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdGJhY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmdvKCAtMSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRmb3J3YXJkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5nbyggMSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnbzogZnVuY3Rpb24oIHN0ZXBzICkge1xyXG5cclxuXHRcdFx0Ly9pZiBoYXNobGlzdGVuaW5nIGlzIGVuYWJsZWQgdXNlIG5hdGl2ZSBoaXN0b3J5IG1ldGhvZFxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICkge1xyXG5cdFx0XHRcdHdpbmRvdy5oaXN0b3J5LmdvKCBzdGVwcyApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvL3dlIGFyZSBub3QgbGlzdGVuaW5nIHRvIHRoZSBoYXNoIHNvIGhhbmRsZSBoaXN0b3J5IGludGVybmFsbHlcclxuXHRcdFx0XHR2YXIgYWN0aXZlSW5kZXggPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4LFxyXG5cdFx0XHRcdFx0aW5kZXggPSBhY3RpdmVJbmRleCArIHBhcnNlSW50KCBzdGVwcywgMTAgKSxcclxuXHRcdFx0XHRcdHVybCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnkuc3RhY2tbIGluZGV4IF0udXJsLFxyXG5cdFx0XHRcdFx0ZGlyZWN0aW9uID0gKCBzdGVwcyA+PSAxICk/IFwiZm9yd2FyZFwiIDogXCJiYWNrXCI7XHJcblxyXG5cdFx0XHRcdC8vdXBkYXRlIHRoZSBoaXN0b3J5IG9iamVjdFxyXG5cdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPSBpbmRleDtcclxuXHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LnByZXZpb3VzSW5kZXggPSBhY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdFx0Ly9jaGFuZ2UgdG8gdGhlIG5ldyBwYWdlXHJcblx0XHRcdFx0dGhpcy5jaGFuZ2UoIHVybCwgeyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgY2hhbmdlSGFzaDogZmFsc2UsIGZyb21IYXNoQ2hhbmdlOiB0cnVlIH0gKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHJlbmFtZSBfaGFuZGxlRGVzdGluYXRpb25cclxuXHRcdF9oYW5kbGVEZXN0aW5hdGlvbjogZnVuY3Rpb24oIHRvICkge1xyXG5cdFx0XHR2YXIgaGlzdG9yeTtcclxuXHJcblx0XHRcdC8vIGNsZWFuIHRoZSBoYXNoIGZvciBjb21wYXJpc29uIGlmIGl0J3MgYSB1cmxcclxuXHRcdFx0aWYgKCAkLnR5cGUodG8pID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdHRvID0gJC5tb2JpbGUucGF0aC5zdHJpcEhhc2goIHRvICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdG8gKSB7XHJcblx0XHRcdFx0aGlzdG9yeSA9IHRoaXMuX2dldEhpc3RvcnkoKTtcclxuXHJcblx0XHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgJ3RvJyBjYW4gYmUgb25lIG9mIDMgdGhpbmdzLCBhIGNhY2hlZCBwYWdlXHJcblx0XHRcdFx0Ly8gZWxlbWVudCBmcm9tIGEgaGlzdG9yeSBzdGFjayBlbnRyeSwgYW4gaWQsIG9yIHNpdGUtcmVsYXRpdmUgL1xyXG5cdFx0XHRcdC8vIGFic29sdXRlIFVSTC4gSWYgJ3RvJyBpcyBhbiBpZCwgd2UgbmVlZCB0byByZXNvbHZlIGl0IGFnYWluc3RcclxuXHRcdFx0XHQvLyB0aGUgZG9jdW1lbnRCYXNlLCBub3QgdGhlIGxvY2F0aW9uLmhyZWYsIHNpbmNlIHRoZSBoYXNoY2hhbmdlXHJcblx0XHRcdFx0Ly8gY291bGQndmUgYmVlbiB0aGUgcmVzdWx0IG9mIGEgZm9yd2FyZC9iYWNrd2FyZCBuYXZpZ2F0aW9uXHJcblx0XHRcdFx0Ly8gdGhhdCBjcm9zc2VzIGZyb20gYW4gZXh0ZXJuYWwgcGFnZS9kaWFsb2cgdG8gYW4gaW50ZXJuYWxcclxuXHRcdFx0XHQvLyBwYWdlL2RpYWxvZy5cclxuXHRcdFx0XHQvL1xyXG5cdFx0XHRcdC8vIFRPRE8gbW92ZSBjaGVjayB0byBoaXN0b3J5IG9iamVjdCBvciBwYXRoIG9iamVjdD9cclxuXHRcdFx0XHR0byA9ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggdG8gKSA/ICggJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIFwiI1wiICsgdG8sIHRoaXMuX2dldERvY3VtZW50QmFzZSgpICkgKSA6IHRvO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0byB8fCB0aGlzLl9nZXRJbml0aWFsQ29udGVudCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJhbnNpdGlvbkZyb21IaXN0b3J5OiBmdW5jdGlvbiggZGlyZWN0aW9uLCBkZWZhdWx0VHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyIGhpc3RvcnkgPSB0aGlzLl9nZXRIaXN0b3J5KCksXHJcblx0XHRcdFx0ZW50cnkgPSAoIGRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgPyBoaXN0b3J5LmdldExhc3QoKSA6IGhpc3RvcnkuZ2V0QWN0aXZlKCkgKTtcclxuXHJcblx0XHRcdHJldHVybiAoIGVudHJ5ICYmIGVudHJ5LnRyYW5zaXRpb24gKSB8fCBkZWZhdWx0VHJhbnNpdGlvbjtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZURpYWxvZzogZnVuY3Rpb24oIGNoYW5nZVBhZ2VPcHRpb25zLCBkYXRhICkge1xyXG5cdFx0XHR2YXIgdG8sIGFjdGl2ZSwgYWN0aXZlQ29udGVudCA9IHRoaXMuZ2V0QWN0aXZlUGFnZSgpO1xyXG5cclxuXHRcdFx0Ly8gSWYgY3VycmVudCBhY3RpdmUgcGFnZSBpcyBub3QgYSBkaWFsb2cgc2tpcCB0aGUgZGlhbG9nIGFuZCBjb250aW51ZVxyXG5cdFx0XHQvLyBpbiB0aGUgc2FtZSBkaXJlY3Rpb25cclxuXHRcdFx0Ly8gTm90ZTogVGhlIGRpYWxvZyB3aWRnZXQgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDEuNS4wLlxyXG5cdFx0XHQvLyBUaHVzLCBhcyBvZiAxLjUuMCBhY3RpdmVDb250ZW50LmRhdGEoIFwibW9iaWxlLWRpYWxvZ1wiICkgd2lsbCBhbHdheXMgZXZhbHVhdGUgdG9cclxuXHRcdFx0Ly8gZmFsc3ksIHNvIHRoZSBzZWNvbmQgY29uZGl0aW9uIGluIHRoZSBpZi1zdGF0ZW1lbnQgYmVsb3cgY2FuIGJlIHJlbW92ZWQgYWx0b2dldGhlci5cclxuXHRcdFx0aWYgKCBhY3RpdmVDb250ZW50ICYmICFhY3RpdmVDb250ZW50LmRhdGEoIFwibW9iaWxlLWRpYWxvZ1wiICkgKSB7XHJcblx0XHRcdFx0Ly8gZGV0ZXJtaW5lIGlmIHdlJ3JlIGhlYWRpbmcgZm9yd2FyZCBvciBiYWNrd2FyZCBhbmQgY29udGludWVcclxuXHRcdFx0XHQvLyBhY2NvcmRpbmdseSBwYXN0IHRoZSBjdXJyZW50IGRpYWxvZ1xyXG5cdFx0XHRcdGlmICggZGF0YS5kaXJlY3Rpb24gPT09IFwiYmFja1wiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuZm9yd2FyZCgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gcHJldmVudCBjaGFuZ2VQYWdlIGNhbGxcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIGN1cnJlbnQgYWN0aXZlIHBhZ2UgaXMgYSBkaWFsb2cgYW5kIHdlJ3JlIG5hdmlnYXRpbmdcclxuXHRcdFx0XHQvLyB0byBhIGRpYWxvZyB1c2UgdGhlIGRpYWxvZyBvYmplY3RlZCBzYXZlZCBpbiB0aGUgc3RhY2tcclxuXHRcdFx0XHR0byA9IGRhdGEucGFnZVVybDtcclxuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLl9nZXRBY3RpdmVIaXN0b3J5KCk7XHJcblxyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgdGhlIHJvbGUsIHRyYW5zaXRpb24gYW5kIHJldmVyc2FsXHJcblx0XHRcdFx0Ly8gYXMgbW9zdCBvZiB0aGlzIGlzIGxvc3QgYnkgdGhlIGRvbUNhY2hlIGNsZWFuaW5nXHJcblx0XHRcdFx0JC5leHRlbmQoIGNoYW5nZVBhZ2VPcHRpb25zLCB7XHJcblx0XHRcdFx0XHRyb2xlOiBhY3RpdmUucm9sZSxcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246IHRoaXMuX3RyYW5zaXRpb25Gcm9tSGlzdG9yeShcclxuXHRcdFx0XHRcdFx0ZGF0YS5kaXJlY3Rpb24sXHJcblx0XHRcdFx0XHRcdGNoYW5nZVBhZ2VPcHRpb25zLnRyYW5zaXRpb24gKSxcclxuXHRcdFx0XHRcdHJldmVyc2U6IGRhdGEuZGlyZWN0aW9uID09PSBcImJhY2tcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdG87XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVOYXZpZ2F0ZTogZnVuY3Rpb24oIHVybCwgZGF0YSApIHtcclxuXHRcdFx0Ly9maW5kIGZpcnN0IHBhZ2UgdmlhIGhhc2hcclxuXHRcdFx0Ly8gVE9ETyBzdHJpcHBpbmcgdGhlIGhhc2ggdHdpY2Ugd2l0aCBoYW5kbGVVcmxcclxuXHRcdFx0dmFyIHRvID0gJC5tb2JpbGUucGF0aC5zdHJpcEhhc2goIHVybCApLCBoaXN0b3J5ID0gdGhpcy5fZ2V0SGlzdG9yeSgpLFxyXG5cclxuXHRcdFx0XHQvLyB0cmFuc2l0aW9uIGlzIGZhbHNlIGlmIGl0J3MgdGhlIGZpcnN0IHBhZ2UsIHVuZGVmaW5lZFxyXG5cdFx0XHRcdC8vIG90aGVyd2lzZSAoYW5kIG1heSBiZSBvdmVycmlkZGVuIGJ5IGRlZmF1bHQpXHJcblx0XHRcdFx0dHJhbnNpdGlvbiA9IGhpc3Rvcnkuc3RhY2subGVuZ3RoID09PSAwID8gXCJub25lXCIgOlxyXG5cdFx0XHRcdFx0dGhpcy5fdHJhbnNpdGlvbkZyb21IaXN0b3J5KCBkYXRhLmRpcmVjdGlvbiApLFxyXG5cclxuXHRcdFx0XHQvLyBkZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBjaGFuZ1BhZ2UgY2FsbHMgbWFkZSBhZnRlciBleGFtaW5pbmdcclxuXHRcdFx0XHQvLyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcGFnZSBhbmQgdGhlIGhhc2gsIE5PVEUgdGhhdCB0aGVcclxuXHRcdFx0XHQvLyB0cmFuc2l0aW9uIGlzIGRlcml2ZWQgZnJvbSB0aGUgcHJldmlvdXMgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdGNoYW5nZVBhZ2VPcHRpb25zID0ge1xyXG5cdFx0XHRcdFx0Y2hhbmdlSGFzaDogZmFsc2UsXHJcblx0XHRcdFx0XHRmcm9tSGFzaENoYW5nZTogdHJ1ZSxcclxuXHRcdFx0XHRcdHJldmVyc2U6IGRhdGEuZGlyZWN0aW9uID09PSBcImJhY2tcIlxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggY2hhbmdlUGFnZU9wdGlvbnMsIGRhdGEsIHtcclxuXHRcdFx0XHR0cmFuc2l0aW9uOiB0cmFuc2l0aW9uXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBtb3ZlIHRvIF9oYW5kbGVEZXN0aW5hdGlvbiA/XHJcblx0XHRcdC8vIElmIHRoaXMgaXNuJ3QgdGhlIGZpcnN0IHBhZ2UsIGlmIHRoZSBjdXJyZW50IHVybCBpcyBhIGRpYWxvZyBoYXNoXHJcblx0XHRcdC8vIGtleSwgYW5kIHRoZSBpbml0aWFsIGRlc3RpbmF0aW9uIGlzbid0IGVxdWFsIHRvIHRoZSBjdXJyZW50IHRhcmdldFxyXG5cdFx0XHQvLyBwYWdlLCB1c2UgdGhlIHNwZWNpYWwgZGlhbG9nIGhhbmRsaW5nXHJcblx0XHRcdGlmICggaGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgJiZcclxuXHRcdFx0XHR0by5pbmRleE9mKCAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5ICkgPiAtMSApIHtcclxuXHJcblx0XHRcdFx0dG8gPSB0aGlzLl9oYW5kbGVEaWFsb2coIGNoYW5nZVBhZ2VPcHRpb25zLCBkYXRhICk7XHJcblxyXG5cdFx0XHRcdGlmICggdG8gPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY2hhbmdlQ29udGVudCggdGhpcy5faGFuZGxlRGVzdGluYXRpb24oIHRvICksIGNoYW5nZVBhZ2VPcHRpb25zICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jaGFuZ2VDb250ZW50OiBmdW5jdGlvbiggdG8sIG9wdHMgKSB7XHJcblx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoIHRvLCBvcHRzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRCYXNlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmJhc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXROczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5ucztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2VuaGFuY2U6IGZ1bmN0aW9uKCBjb250ZW50LCByb2xlICkge1xyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIHN1cHBvcnRpbmcgYSBjdXN0b20gY2FsbGJhY2ssIGFuZCBwYXNzaW5nIGluXHJcblx0XHRcdC8vIHRoZSBzZXR0aW5ncyB3aGljaCBpbmNsdWRlcyB0aGUgcm9sZVxyXG5cdFx0XHRyZXR1cm4gY29udGVudC5wYWdlKHsgcm9sZTogcm9sZSB9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2luY2x1ZGU6IGZ1bmN0aW9uKCBwYWdlLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0Ly8gYXBwZW5kIHRvIHBhZ2UgYW5kIGVuaGFuY2VcclxuXHRcdFx0cGFnZS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblxyXG5cdFx0XHQvLyB1c2UgdGhlIHBhZ2Ugd2lkZ2V0IHRvIGVuaGFuY2VcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSggcGFnZSwgc2V0dGluZ3Mucm9sZSApO1xyXG5cclxuXHRcdFx0Ly8gcmVtb3ZlIHBhZ2Ugb24gaGlkZVxyXG5cdFx0XHRwYWdlLnBhZ2UoIFwiYmluZFJlbW92ZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9maW5kOiBmdW5jdGlvbiggYWJzVXJsICkge1xyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIHN1cHBvcnRpbmcgYSBjdXN0b20gY2FsbGJhY2tcclxuXHRcdFx0dmFyIGZpbGVVcmwgPSB0aGlzLl9jcmVhdGVGaWxlVXJsKCBhYnNVcmwgKSxcclxuXHRcdFx0XHRkYXRhVXJsID0gdGhpcy5fY3JlYXRlRGF0YVVybCggYWJzVXJsICksXHJcblx0XHRcdFx0cGFnZSwgaW5pdGlhbENvbnRlbnQgPSB0aGlzLl9nZXRJbml0aWFsQ29udGVudCgpO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBwYWdlIGFscmVhZHkgZXhpc3RzIGluIHRoZSBET00uXHJcblx0XHRcdC8vIE5PVEUgZG8gX25vdF8gdXNlIHRoZSA6anFtRGF0YSBwc2V1ZG8gc2VsZWN0b3IgYmVjYXVzZSBwYXJlbnRoZXNpc1xyXG5cdFx0XHQvLyAgICAgIGFyZSBhIHZhbGlkIHVybCBjaGFyIGFuZCBpdCBicmVha3Mgb24gdGhlIGZpcnN0IG9jY3VyZW5jZVxyXG5cdFx0XHRwYWdlID0gdGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmNoaWxkcmVuKCBcIltkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArXHJcblx0XHRcdFx0XHRcInVybD0nXCIgKyAkLm1vYmlsZS5wYXRoLmhhc2hUb1NlbGVjdG9yKCBkYXRhVXJsICkgKyBcIiddXCIgKTtcclxuXHJcblx0XHRcdC8vIElmIHdlIGZhaWxlZCB0byBmaW5kIHRoZSBwYWdlLCBjaGVjayB0byBzZWUgaWYgdGhlIHVybCBpcyBhXHJcblx0XHRcdC8vIHJlZmVyZW5jZSB0byBhbiBlbWJlZGRlZCBwYWdlLiBJZiBzbywgaXQgbWF5IGhhdmUgYmVlbiBkeW5hbWljYWxseVxyXG5cdFx0XHQvLyBpbmplY3RlZCBieSBhIGRldmVsb3BlciwgaW4gd2hpY2ggY2FzZSBpdCB3b3VsZCBiZSBsYWNraW5nIGFcclxuXHRcdFx0Ly8gZGF0YS11cmwgYXR0cmlidXRlIGFuZCBpbiBuZWVkIG9mIGVuaGFuY2VtZW50LlxyXG5cdFx0XHRpZiAoIHBhZ2UubGVuZ3RoID09PSAwICYmIGRhdGFVcmwgJiYgISQubW9iaWxlLnBhdGguaXNQYXRoKCBkYXRhVXJsICkgKSB7XHJcblx0XHRcdFx0cGFnZSA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggJC5tb2JpbGUucGF0aC5oYXNoVG9TZWxlY3RvcihcIiNcIiArIGRhdGFVcmwpIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJ1cmxcIiwgZGF0YVVybCApXHJcblx0XHRcdFx0XHQuanFtRGF0YSggXCJ1cmxcIiwgZGF0YVVybCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBmYWlsZWQgdG8gZmluZCBhIHBhZ2UgaW4gdGhlIERPTSwgY2hlY2sgdGhlIFVSTCB0byBzZWUgaWYgaXRcclxuXHRcdFx0Ly8gcmVmZXJzIHRvIHRoZSBmaXJzdCBwYWdlIGluIHRoZSBhcHBsaWNhdGlvbi4gQWxzbyBjaGVjayB0byBtYWtlIHN1cmVcclxuXHRcdFx0Ly8gb3VyIGNhY2hlZC1maXJzdC1wYWdlIGlzIGFjdHVhbGx5IGluIHRoZSBET00uIFNvbWUgdXNlciBkZXBsb3llZFxyXG5cdFx0XHQvLyBhcHBzIGFyZSBwcnVuaW5nIHRoZSBmaXJzdCBwYWdlIGZyb20gdGhlIERPTSBmb3IgdmFyaW91cyByZWFzb25zLlxyXG5cdFx0XHQvLyBXZSBjaGVjayBmb3IgdGhpcyBjYXNlIGhlcmUgYmVjYXVzZSB3ZSBkb24ndCB3YW50IGEgZmlyc3QtcGFnZSB3aXRoXHJcblx0XHRcdC8vIGFuIGlkIGZhbGxpbmcgdGhyb3VnaCB0byB0aGUgbm9uLWV4aXN0ZW50IGVtYmVkZGVkIHBhZ2UgZXJyb3IgY2FzZS5cclxuXHRcdFx0aWYgKCBwYWdlLmxlbmd0aCA9PT0gMCAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNGaXJzdFBhZ2VVcmwoIGZpbGVVcmwgKSAmJlxyXG5cdFx0XHRcdGluaXRpYWxDb250ZW50ICYmXHJcblx0XHRcdFx0aW5pdGlhbENvbnRlbnQucGFyZW50KCkubGVuZ3RoICkge1xyXG5cdFx0XHRcdHBhZ2UgPSAkKCBpbml0aWFsQ29udGVudCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldExvYWRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5sb2FkaW5nKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zaG93TG9hZGluZzogZnVuY3Rpb24oIGRlbGF5LCB0aGVtZSwgbXNnLCB0ZXh0b25seSApIHtcclxuXHRcdFx0Ly8gVGhpcyBjb25maWd1cmFibGUgdGltZW91dCBhbGxvd3MgY2FjaGVkIHBhZ2VzIGEgYnJpZWZcclxuXHRcdFx0Ly8gZGVsYXkgdG8gbG9hZCB3aXRob3V0IHNob3dpbmcgYSBtZXNzYWdlXHJcblx0XHRcdGlmICggdGhpcy5fbG9hZE1zZyApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2xvYWRNc2cgPSBzZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5fZ2V0TG9hZGVyKCkubG9hZGVyKCBcInNob3dcIiwgdGhlbWUsIG1zZywgdGV4dG9ubHkgKTtcclxuXHRcdFx0XHR0aGlzLl9sb2FkTXNnID0gMDtcclxuXHRcdFx0fSwgdGhpcyksIGRlbGF5ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oaWRlTG9hZGluZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIFN0b3AgbWVzc2FnZSBzaG93IHRpbWVyXHJcblx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5fbG9hZE1zZyApO1xyXG5cdFx0XHR0aGlzLl9sb2FkTXNnID0gMDtcclxuXHJcblx0XHRcdC8vIEhpZGUgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdHRoaXMuX2dldExvYWRlcigpLmxvYWRlciggXCJoaWRlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3Nob3dFcnJvcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIGN1cnJlbnQgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdHRoaXMuX2hpZGVMb2FkaW5nKCk7XHJcblxyXG5cdFx0XHQvLyBzaG93IHRoZSBlcnJvciBtZXNzYWdlXHJcblx0XHRcdHRoaXMuX3Nob3dMb2FkaW5nKCAwLCAkLm1vYmlsZS5wYWdlTG9hZEVycm9yTWVzc2FnZVRoZW1lLCAkLm1vYmlsZS5wYWdlTG9hZEVycm9yTWVzc2FnZSwgdHJ1ZSApO1xyXG5cclxuXHRcdFx0Ly8gaGlkZSB0aGUgZXJyb3IgbWVzc2FnZSBhZnRlciBhIGRlbGF5XHJcblx0XHRcdC8vIFRPRE8gY29uZmlndXJhdGlvblxyXG5cdFx0XHRzZXRUaW1lb3V0KCAkLnByb3h5KHRoaXMsIFwiX2hpZGVMb2FkaW5nXCIpLCAxNTAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9wYXJzZTogZnVuY3Rpb24oIGh0bWwsIGZpbGVVcmwgKSB7XHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgYWxsb3dpbmcgY3VzdG9taXphdGlvbiBvZiB0aGlzIG1ldGhvZC4gSXQncyB2ZXJ5IEpRTSBzcGVjaWZpY1xyXG5cdFx0XHR2YXIgcGFnZSwgYWxsID0gJCggXCI8ZGl2PjwvZGl2PlwiICk7XHJcblxyXG5cdFx0XHQvL3dvcmthcm91bmQgdG8gYWxsb3cgc2NyaXB0cyB0byBleGVjdXRlIHdoZW4gaW5jbHVkZWQgaW4gcGFnZSBkaXZzXHJcblx0XHRcdGFsbC5nZXQoIDAgKS5pbm5lckhUTUwgPSBodG1sO1xyXG5cclxuXHRcdFx0cGFnZSA9IGFsbC5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIiApLmZpcnN0KCk7XHJcblxyXG5cdFx0XHQvL2lmIHBhZ2UgZWxlbSBjb3VsZG4ndCBiZSBmb3VuZCwgY3JlYXRlIG9uZSBhbmQgaW5zZXJ0IHRoZSBib2R5IGVsZW1lbnQncyBjb250ZW50c1xyXG5cdFx0XHRpZiAoICFwYWdlLmxlbmd0aCApIHtcclxuXHRcdFx0XHRwYWdlID0gJCggXCI8ZGl2IGRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJyb2xlPSdwYWdlJz5cIiArXHJcblx0XHRcdFx0XHQoIGh0bWwuc3BsaXQoIC88XFwvP2JvZHlbXj5dKj4vZ21pIClbMV0gfHwgXCJcIiApICtcclxuXHRcdFx0XHRcdFwiPC9kaXY+XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVE9ETyB0YWdnaW5nIGEgcGFnZSB3aXRoIGV4dGVybmFsIHRvIG1ha2Ugc3VyZSB0aGF0IGVtYmVkZGVkIHBhZ2VzIGFyZW4ndFxyXG5cdFx0XHQvLyByZW1vdmVkIGJ5IHRoZSB2YXJpb3VzIHBhZ2UgaGFuZGxpbmcgY29kZSBpcyBiYWQuIEhhdmluZyBwYWdlIGhhbmRsaW5nIGNvZGVcclxuXHRcdFx0Ly8gaW4gbWFueSBwbGFjZXMgaXMgYmFkLiBTb2x1dGlvbnMgcG9zdCAxLjBcclxuXHRcdFx0cGFnZS5hdHRyKCBcImRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJ1cmxcIiwgdGhpcy5fY3JlYXRlRGF0YVVybCggZmlsZVVybCApIClcclxuXHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwiZXh0ZXJuYWwtcGFnZVwiLCB0cnVlICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gcGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldExvYWRlZFRpdGxlOiBmdW5jdGlvbiggcGFnZSwgaHRtbCApIHtcclxuXHRcdFx0Ly9wYWdlIHRpdGxlIHJlZ2V4cFxyXG5cdFx0XHR2YXIgbmV3UGFnZVRpdGxlID0gaHRtbC5tYXRjaCggLzx0aXRsZVtePl0qPihbXjxdKikvICkgJiYgUmVnRXhwLiQxO1xyXG5cclxuXHRcdFx0aWYgKCBuZXdQYWdlVGl0bGUgJiYgIXBhZ2UuanFtRGF0YShcInRpdGxlXCIpICkge1xyXG5cdFx0XHRcdG5ld1BhZ2VUaXRsZSA9ICQoIFwiPGRpdj5cIiArIG5ld1BhZ2VUaXRsZSArIFwiPC9kaXY+XCIgKS50ZXh0KCk7XHJcblx0XHRcdFx0cGFnZS5qcW1EYXRhKCBcInRpdGxlXCIsIG5ld1BhZ2VUaXRsZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9pc1Jld3JpdGFibGVCYXNlVGFnOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmR5bmFtaWNCYXNlRW5hYmxlZCAmJiAhJC5zdXBwb3J0LmR5bmFtaWNCYXNlVGFnO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlRGF0YVVybDogZnVuY3Rpb24oIGFic29sdXRlVXJsICkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKCBhYnNvbHV0ZVVybCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlRmlsZVVybDogZnVuY3Rpb24oIGFic29sdXRlVXJsICkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5nZXRGaWxlUGF0aCggYWJzb2x1dGVVcmwgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RyaWdnZXJXaXRoRGVwcmVjYXRlZDogZnVuY3Rpb24oIG5hbWUsIGRhdGEsIHBhZ2UgKSB7XHJcblx0XHRcdHZhciBkZXByZWNhdGVkRXZlbnQgPSAkLkV2ZW50KCBcInBhZ2VcIiArIG5hbWUgKSxcclxuXHRcdFx0XHRuZXdFdmVudCA9ICQuRXZlbnQoIHRoaXMud2lkZ2V0TmFtZSArIG5hbWUgKTtcclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURURcclxuXHRcdFx0Ly8gdHJpZ2dlciB0aGUgb2xkIGRlcHJlY2F0ZWQgZXZlbnQgb24gdGhlIHBhZ2UgaWYgaXQncyBwcm92aWRlZFxyXG5cdFx0XHQoIHBhZ2UgfHwgdGhpcy5lbGVtZW50ICkudHJpZ2dlciggZGVwcmVjYXRlZEV2ZW50LCBkYXRhICk7XHJcblxyXG5cdFx0XHQvLyB1c2UgdGhlIHdpZGdldCB0cmlnZ2VyIG1ldGhvZCBmb3IgdGhlIG5ldyBjb250ZW50KiBldmVudFxyXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBuYW1lLCBuZXdFdmVudCwgZGF0YSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRkZXByZWNhdGVkRXZlbnQ6IGRlcHJlY2F0ZWRFdmVudCxcclxuXHRcdFx0XHRldmVudDogbmV3RXZlbnRcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBpdCB3b3VsZCBiZSBuaWNlIHRvIHNwbGl0IHRoaXMgdXAgbW9yZSBidXQgZXZlcnl0aGluZyBhcHBlYXJzIHRvIGJlIFwib25lIG9mZlwiXHJcblx0XHQvLyAgICAgIG9yIHJlcXVpcmUgb3JkZXJpbmcgc3VjaCB0aGF0IG90aGVyIGJpdHMgYXJlIHNwcmlua2xlZCBpbiBiZXR3ZWVuIHBhcnRzIHRoYXRcclxuXHRcdC8vICAgICAgY291bGQgYmUgYWJzdHJhY3RlZCBvdXQgYXMgYSBncm91cFxyXG5cdFx0X2xvYWRTdWNjZXNzOiBmdW5jdGlvbiggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkICkge1xyXG5cdFx0XHR2YXIgZmlsZVVybCA9IHRoaXMuX2NyZWF0ZUZpbGVVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0cmV0dXJuICQucHJveHkoZnVuY3Rpb24oIGh0bWwsIHRleHRTdGF0dXMsIHhociApIHtcclxuXHRcdFx0XHQvL3ByZS1wYXJzZSBodG1sIHRvIGNoZWNrIGZvciBhIGRhdGEtdXJsLFxyXG5cdFx0XHRcdC8vdXNlIGl0IGFzIHRoZSBuZXcgZmlsZVVybCwgYmFzZSBwYXRoLCBldGNcclxuXHRcdFx0XHR2YXIgY29udGVudCxcclxuXHJcblx0XHRcdFx0XHQvLyBUT0RPIGhhbmRsZSBkaWFsb2dzIGFnYWluXHJcblx0XHRcdFx0XHRwYWdlRWxlbVJlZ2V4ID0gbmV3IFJlZ0V4cCggXCIoPFtePl0rXFxcXGJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwicm9sZT1bXFxcIiddP3BhZ2VbXFxcIiddP1tePl0qPilcIiApLFxyXG5cclxuXHRcdFx0XHRcdGRhdGFVcmxSZWdleCA9IG5ldyBSZWdFeHAoIFwiXFxcXGJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwidXJsPVtcXFwiJ10/KFteXFxcIic+XSopW1xcXCInXT9cIiApO1xyXG5cclxuXHRcdFx0XHQvLyBkYXRhLXVybCBtdXN0IGJlIHByb3ZpZGVkIGZvciB0aGUgYmFzZSB0YWcgc28gcmVzb3VyY2UgcmVxdWVzdHNcclxuXHRcdFx0XHQvLyBjYW4gYmUgZGlyZWN0ZWQgdG8gdGhlIGNvcnJlY3QgdXJsLiBsb2FkaW5nIGludG8gYSB0ZW1wcm9yYXJ5XHJcblx0XHRcdFx0Ly8gZWxlbWVudCBtYWtlcyB0aGVzZSByZXF1ZXN0cyBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdGlmICggcGFnZUVsZW1SZWdleC50ZXN0KCBodG1sICkgJiZcclxuXHRcdFx0XHRcdFJlZ0V4cC4kMSAmJlxyXG5cdFx0XHRcdFx0ZGF0YVVybFJlZ2V4LnRlc3QoIFJlZ0V4cC4kMSApICYmXHJcblx0XHRcdFx0XHRSZWdFeHAuJDEgKSB7XHJcblx0XHRcdFx0XHRmaWxlVXJsID0gJC5tb2JpbGUucGF0aC5nZXRGaWxlUGF0aCggJChcIjxkaXY+XCIgKyBSZWdFeHAuJDEgKyBcIjwvZGl2PlwiKS50ZXh0KCkgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBXZSBzcGVjaWZ5IHRoYXQsIGlmIGEgZGF0YS11cmwgYXR0cmlidXRlIGlzIGdpdmVuIG9uIHRoZSBwYWdlIGRpdiwgaXRzIHZhbHVlXHJcblx0XHRcdFx0XHQvLyBtdXN0IGJlIGdpdmVuIG5vbi1VUkwtZW5jb2RlZC4gSG93ZXZlciwgaW4gdGhpcyBwYXJ0IG9mIHRoZSBjb2RlLCBmaWxlVXJsIGlzXHJcblx0XHRcdFx0XHQvLyBhc3N1bWVkIHRvIGJlIFVSTC1lbmNvZGVkLCBzbyB3ZSBVUkwtZW5jb2RlIHRoZSByZXRyaWV2ZWQgdmFsdWUgaGVyZVxyXG5cdFx0XHRcdFx0ZmlsZVVybCA9IHRoaXMud2luZG93WyAwIF0uZW5jb2RlVVJJQ29tcG9uZW50KCBmaWxlVXJsICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL2RvbnQgdXBkYXRlIHRoZSBiYXNlIHRhZyBpZiB3ZSBhcmUgcHJlZmV0Y2hpbmdcclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLnByZWZldGNoID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkuc2V0KCBmaWxlVXJsICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb250ZW50ID0gdGhpcy5fcGFyc2UoIGh0bWwsIGZpbGVVcmwgKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fc2V0TG9hZGVkVGl0bGUoIGNvbnRlbnQsIGh0bWwgKTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHRoZSBjb250ZW50IHJlZmVyZW5jZSBhbmQgeGhyIHRvIG91ciB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS54aHIgPSB4aHI7XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEudGV4dFN0YXR1cyA9IHRleHRTdGF0dXM7XHJcblxyXG5cdFx0XHRcdC8vIERFUFJFQ0FURURcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5wYWdlID0gY29udGVudDtcclxuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuY29udGVudCA9IGNvbnRlbnQ7XHJcblxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnRvUGFnZSA9IGNvbnRlbnQ7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRcdC8vIE5vdGUgdGhhdCBpdCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIGxpc3RlbmVyL2hhbmRsZXJcclxuXHRcdFx0XHQvLyB0aGF0IGNhbGxlZCBwcmV2ZW50RGVmYXVsdCgpLCB0byByZXNvbHZlL3JlamVjdCB0aGVcclxuXHRcdFx0XHQvLyBkZWZlcnJlZCBvYmplY3Qgd2l0aGluIHRoZSB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJsb2FkXCIsIHRyaWdnZXJEYXRhICkuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyByZXdyaXRlIHNyYyBhbmQgaHJlZiBhdHRycyB0byB1c2UgYSBiYXNlIHVybCBpZiB0aGUgYmFzZSB0YWcgd29uJ3Qgd29ya1xyXG5cdFx0XHRcdGlmICggdGhpcy5faXNSZXdyaXRhYmxlQmFzZVRhZygpICYmIGNvbnRlbnQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkucmV3cml0ZSggZmlsZVVybCwgY29udGVudCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5faW5jbHVkZSggY29udGVudCwgc2V0dGluZ3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGxvYWRpbmcgbWVzc2FnZS5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLnNob3dMb2FkTXNnICkge1xyXG5cdFx0XHRcdFx0dGhpcy5faGlkZUxvYWRpbmcoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoIGFic1VybCwgc2V0dGluZ3MsIGNvbnRlbnQgKTtcclxuXHRcdFx0fSwgdGhpcyk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9sb2FkRGVmYXVsdHM6IHtcclxuXHRcdFx0dHlwZTogXCJnZXRcIixcclxuXHRcdFx0ZGF0YTogdW5kZWZpbmVkLFxyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRFxyXG5cdFx0XHRyZWxvYWRQYWdlOiBmYWxzZSxcclxuXHJcblx0XHRcdHJlbG9hZDogZmFsc2UsXHJcblxyXG5cdFx0XHQvLyBCeSBkZWZhdWx0IHdlIHJlbHkgb24gdGhlIHJvbGUgZGVmaW5lZCBieSB0aGUgQGRhdGEtcm9sZSBhdHRyaWJ1dGUuXHJcblx0XHRcdHJvbGU6IHVuZGVmaW5lZCxcclxuXHJcblx0XHRcdHNob3dMb2FkTXNnOiBmYWxzZSxcclxuXHJcblx0XHRcdC8vIFRoaXMgZGVsYXkgYWxsb3dzIGxvYWRzIHRoYXQgcHVsbCBmcm9tIGJyb3dzZXIgY2FjaGUgdG9cclxuXHRcdFx0Ly8gb2NjdXIgd2l0aG91dCBzaG93aW5nIHRoZSBsb2FkaW5nIG1lc3NhZ2UuXHJcblx0XHRcdGxvYWRNc2dEZWxheTogNTBcclxuXHRcdH0sXHJcblxyXG5cdFx0bG9hZDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcclxuXHRcdFx0Ly8gVGhpcyBmdW5jdGlvbiB1c2VzIGRlZmVycmVkIG5vdGlmaWNhdGlvbnMgdG8gbGV0IGNhbGxlcnNcclxuXHRcdFx0Ly8ga25vdyB3aGVuIHRoZSBjb250ZW50IGlzIGRvbmUgbG9hZGluZywgb3IgaWYgYW4gZXJyb3IgaGFzIG9jY3VycmVkLlxyXG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAoIG9wdGlvbnMgJiYgb3B0aW9ucy5kZWZlcnJlZCApIHx8ICQuRGVmZXJyZWQoKSxcclxuXHJcblx0XHRcdFx0Ly8gRXhhbWluaW5nIHRoZSBvcHRpb24gXCJyZWxvYWRQYWdlXCIgcGFzc2VkIGJ5IHRoZSB1c2VyIGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjBcclxuXHRcdFx0XHQvLyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDEuNS4wLlxyXG5cdFx0XHRcdC8vIENvcHkgb3B0aW9uIFwicmVsb2FkUGFnZVwiIHRvIFwicmVsb2FkXCIsIGJ1dCBvbmx5IGlmIG9wdGlvbiBcInJlbG9hZFwiIGlzIG5vdCBwcmVzZW50XHJcblx0XHRcdFx0cmVsb2FkT3B0aW9uRXh0ZW5zaW9uID1cclxuXHRcdFx0XHRcdCggKCBvcHRpb25zICYmIG9wdGlvbnMucmVsb2FkID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0XHRcdFx0b3B0aW9ucy5yZWxvYWRQYWdlICE9PSB1bmRlZmluZWQgKSA/XHJcblx0XHRcdFx0XHRcdFx0eyByZWxvYWQ6IG9wdGlvbnMucmVsb2FkUGFnZSB9IDoge30gKSxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGRlZmF1bHQgbG9hZCBvcHRpb25zIHdpdGggb3ZlcnJpZGVzIHNwZWNpZmllZCBieSB0aGUgY2FsbGVyLlxyXG5cdFx0XHRcdHNldHRpbmdzID0gJC5leHRlbmQoIHt9LCB0aGlzLl9sb2FkRGVmYXVsdHMsIG9wdGlvbnMsIHJlbG9hZE9wdGlvbkV4dGVuc2lvbiApLFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgRE9NIGVsZW1lbnQgZm9yIHRoZSBjb250ZW50IGFmdGVyIGl0IGhhcyBiZWVuIGxvYWRlZC5cclxuXHRcdFx0XHRjb250ZW50ID0gbnVsbCxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGFic29sdXRlIHZlcnNpb24gb2YgdGhlIFVSTCBwYXNzZWQgaW50byB0aGUgZnVuY3Rpb24uIFRoaXNcclxuXHRcdFx0XHQvLyB2ZXJzaW9uIG9mIHRoZSBVUkwgbWF5IGNvbnRhaW4gZGlhbG9nL3N1YmNvbnRlbnQgcGFyYW1zIGluIGl0LlxyXG5cdFx0XHRcdGFic1VybCA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB1cmwsIHRoaXMuX2ZpbmRCYXNlV2l0aERlZmF1bHQoKSApLFxyXG5cdFx0XHRcdGZpbGVVcmwsIGRhdGFVcmwsIHBibEV2ZW50LCB0cmlnZ2VyRGF0YTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjYWxsZXIgcHJvdmlkZWQgZGF0YSwgYW5kIHdlJ3JlIHVzaW5nIFwiZ2V0XCIgcmVxdWVzdCxcclxuXHRcdFx0Ly8gYXBwZW5kIHRoZSBkYXRhIHRvIHRoZSBVUkwuXHJcblx0XHRcdGlmICggc2V0dGluZ3MuZGF0YSAmJiBzZXR0aW5ncy50eXBlID09PSBcImdldFwiICkge1xyXG5cdFx0XHRcdGFic1VybCA9ICQubW9iaWxlLnBhdGguYWRkU2VhcmNoUGFyYW1zKCBhYnNVcmwsIHNldHRpbmdzLmRhdGEgKTtcclxuXHRcdFx0XHRzZXR0aW5ncy5kYXRhID0gdW5kZWZpbmVkO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2FsbGVyIGlzIHVzaW5nIGEgXCJwb3N0XCIgcmVxdWVzdCwgcmVsb2FkIG11c3QgYmUgdHJ1ZVxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLmRhdGEgJiYgc2V0dGluZ3MudHlwZSA9PT0gXCJwb3N0XCIgKSB7XHJcblx0XHRcdFx0c2V0dGluZ3MucmVsb2FkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVGhlIGFic29sdXRlIHZlcnNpb24gb2YgdGhlIFVSTCBtaW51cyBhbnkgZGlhbG9nL3N1YmNvbnRlbnQgcGFyYW1zLlxyXG5cdFx0XHQvLyBJbiBvdGhlcndvcmRzIHRoZSByZWFsIFVSTCBvZiB0aGUgY29udGVudCB0byBiZSBsb2FkZWQuXHJcblx0XHRcdGZpbGVVcmwgPSB0aGlzLl9jcmVhdGVGaWxlVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdC8vIFRoZSB2ZXJzaW9uIG9mIHRoZSBVcmwgYWN0dWFsbHkgc3RvcmVkIGluIHRoZSBkYXRhLXVybCBhdHRyaWJ1dGUgb2ZcclxuXHRcdFx0Ly8gdGhlIGNvbnRlbnQuIEZvciBlbWJlZGRlZCBjb250ZW50LCBpdCBpcyBqdXN0IHRoZSBpZCBvZiB0aGUgcGFnZS4gRm9yXHJcblx0XHRcdC8vIGNvbnRlbnQgd2l0aGluIHRoZSBzYW1lIGRvbWFpbiBhcyB0aGUgZG9jdW1lbnQgYmFzZSwgaXQgaXMgdGhlIHNpdGVcclxuXHRcdFx0Ly8gcmVsYXRpdmUgcGF0aC4gRm9yIGNyb3NzLWRvbWFpbiBjb250ZW50IChQaG9uZSBHYXAgb25seSkgdGhlIGVudGlyZVxyXG5cdFx0XHQvLyBhYnNvbHV0ZSBVcmwgaXMgdXNlZCB0byBsb2FkIHRoZSBjb250ZW50LlxyXG5cdFx0XHRkYXRhVXJsID0gdGhpcy5fY3JlYXRlRGF0YVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHRjb250ZW50ID0gdGhpcy5fZmluZCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHQvLyBJZiBpdCBpc24ndCBhIHJlZmVyZW5jZSB0byB0aGUgZmlyc3QgY29udGVudCBhbmQgcmVmZXJzIHRvIG1pc3NpbmdcclxuXHRcdFx0Ly8gZW1iZWRkZWQgY29udGVudCByZWplY3QgdGhlIGRlZmVycmVkIGFuZCByZXR1cm5cclxuXHRcdFx0aWYgKCBjb250ZW50Lmxlbmd0aCA9PT0gMCAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNFbWJlZGRlZFBhZ2UoZmlsZVVybCkgJiZcclxuXHRcdFx0XHQhJC5tb2JpbGUucGF0aC5pc0ZpcnN0UGFnZVVybChmaWxlVXJsKSApIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoIGFic1VybCwgc2V0dGluZ3MgKTtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZXNldCBiYXNlIHRvIHRoZSBkZWZhdWx0IGRvY3VtZW50IGJhc2VcclxuXHRcdFx0Ly8gVE9ETyBmaWd1cmUgb3V0IHdoeSB3ZSBkb2UgdGhpc1xyXG5cdFx0XHR0aGlzLl9nZXRCYXNlKCkucmVzZXQoKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjb250ZW50IHdlIGFyZSBpbnRlcmVzdGVkIGluIGlzIGFscmVhZHkgaW4gdGhlIERPTSxcclxuXHRcdFx0Ly8gYW5kIHRoZSBjYWxsZXIgZGlkIG5vdCBpbmRpY2F0ZSB0aGF0IHdlIHNob3VsZCBmb3JjZSBhXHJcblx0XHRcdC8vIHJlbG9hZCBvZiB0aGUgZmlsZSwgd2UgYXJlIGRvbmUuIFJlc29sdmUgdGhlIGRlZmVycnJlZCBzbyB0aGF0XHJcblx0XHRcdC8vIHVzZXJzIGNhbiBiaW5kIHRvIC5kb25lIG9uIHRoZSBwcm9taXNlXHJcblx0XHRcdGlmICggY29udGVudC5sZW5ndGggJiYgIXNldHRpbmdzLnJlbG9hZCApIHtcclxuXHRcdFx0XHR0aGlzLl9lbmhhbmNlKCBjb250ZW50LCBzZXR0aW5ncy5yb2xlICk7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSggYWJzVXJsLCBzZXR0aW5ncywgY29udGVudCApO1xyXG5cclxuXHRcdFx0XHQvL2lmIHdlIGFyZSByZWxvYWRpbmcgdGhlIGNvbnRlbnQgbWFrZSBzdXJlIHdlIHVwZGF0ZVxyXG5cdFx0XHRcdC8vIHRoZSBiYXNlIGlmIGl0cyBub3QgYSBwcmVmZXRjaFxyXG5cdFx0XHRcdGlmICggIXNldHRpbmdzLnByZWZldGNoICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnNldCh1cmwpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJpZ2dlckRhdGEgPSB7XHJcblx0XHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdFx0YWJzVXJsOiBhYnNVcmwsXHJcblx0XHRcdFx0dG9QYWdlOiB1cmwsXHJcblx0XHRcdFx0cHJldlBhZ2U6IG9wdGlvbnMgPyBvcHRpb25zLmZyb21QYWdlIDogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGRhdGFVcmw6IGRhdGFVcmwsXHJcblx0XHRcdFx0ZGVmZXJyZWQ6IGRlZmVycmVkLFxyXG5cdFx0XHRcdG9wdGlvbnM6IHNldHRpbmdzXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvLyBMZXQgbGlzdGVuZXJzIGtub3cgd2UncmUgYWJvdXQgdG8gbG9hZCBjb250ZW50LlxyXG5cdFx0XHRwYmxFdmVudCA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJiZWZvcmVsb2FkXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0aWYgKCBwYmxFdmVudC5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRwYmxFdmVudC5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLnNob3dMb2FkTXNnICkge1xyXG5cdFx0XHRcdHRoaXMuX3Nob3dMb2FkaW5nKCBzZXR0aW5ncy5sb2FkTXNnRGVsYXkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVzZXQgYmFzZSB0byB0aGUgZGVmYXVsdCBkb2N1bWVudCBiYXNlLlxyXG5cdFx0XHQvLyBvbmx5IHJlc2V0IGlmIHdlIGFyZSBub3QgcHJlZmV0Y2hpbmdcclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5wcmVmZXRjaCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5yZXNldCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICEoICQubW9iaWxlLmFsbG93Q3Jvc3NEb21haW5QYWdlcyB8fFxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNTYW1lRG9tYWluKCQubW9iaWxlLnBhdGguZG9jdW1lbnRVcmwsIGFic1VybCApICkgKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCBhYnNVcmwsIHNldHRpbmdzICk7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTG9hZCB0aGUgbmV3IGNvbnRlbnQuXHJcblx0XHRcdCQuYWpheCh7XHJcblx0XHRcdFx0dXJsOiBmaWxlVXJsLFxyXG5cdFx0XHRcdHR5cGU6IHNldHRpbmdzLnR5cGUsXHJcblx0XHRcdFx0ZGF0YTogc2V0dGluZ3MuZGF0YSxcclxuXHRcdFx0XHRjb250ZW50VHlwZTogc2V0dGluZ3MuY29udGVudFR5cGUsXHJcblx0XHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IHRoaXMuX2xvYWRTdWNjZXNzKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKSxcclxuXHRcdFx0XHRlcnJvcjogdGhpcy5fbG9hZEVycm9yKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9sb2FkRXJyb3I6IGZ1bmN0aW9uKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKSB7XHJcblx0XHRcdHJldHVybiAkLnByb3h5KGZ1bmN0aW9uKCB4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHRcdC8vc2V0IGJhc2UgYmFjayB0byBjdXJyZW50IHBhdGhcclxuXHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkuc2V0KCAkLm1vYmlsZS5wYXRoLmdldCgpICk7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCBlcnJvciBpbmZvIHRvIG91ciB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS54aHIgPSB4aHI7XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEudGV4dFN0YXR1cyA9IHRleHRTdGF0dXM7XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuZXJyb3JUaHJvd24gPSBlcnJvclRocm93bjtcclxuXHJcblx0XHRcdFx0Ly8gTGV0IGxpc3RlbmVycyBrbm93IHRoZSBwYWdlIGxvYWQgZmFpbGVkLlxyXG5cdFx0XHRcdHZhciBwbGZFdmVudCA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJsb2FkZmFpbGVkXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRcdC8vIE5vdGUgdGhhdCBpdCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIGxpc3RlbmVyL2hhbmRsZXJcclxuXHRcdFx0XHQvLyB0aGF0IGNhbGxlZCBwcmV2ZW50RGVmYXVsdCgpLCB0byByZXNvbHZlL3JlamVjdCB0aGVcclxuXHRcdFx0XHQvLyBkZWZlcnJlZCBvYmplY3Qgd2l0aGluIHRoZSB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHRpZiAoIHBsZkV2ZW50LmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdFx0cGxmRXZlbnQuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgbG9hZGluZyBtZXNzYWdlLlxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3Muc2hvd0xvYWRNc2cgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9zaG93RXJyb3IoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCggYWJzVXJsLCBzZXR0aW5ncyApO1xyXG5cdFx0XHR9LCB0aGlzKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldFRyYW5zaXRpb25IYW5kbGVyOiBmdW5jdGlvbiggdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dHJhbnNpdGlvbiA9ICQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uKCB0cmFuc2l0aW9uICk7XHJcblxyXG5cdFx0XHQvL2ZpbmQgdGhlIHRyYW5zaXRpb24gaGFuZGxlciBmb3IgdGhlIHNwZWNpZmllZCB0cmFuc2l0aW9uLiBJZiB0aGVyZVxyXG5cdFx0XHQvL2lzbid0IG9uZSBpbiBvdXIgdHJhbnNpdGlvbkhhbmRsZXJzIGRpY3Rpb25hcnksIHVzZSB0aGUgZGVmYXVsdCBvbmUuXHJcblx0XHRcdC8vY2FsbCB0aGUgaGFuZGxlciBpbW1lZGlhdGVseSB0byBraWNrLW9mZiB0aGUgdHJhbnNpdGlvbi5cclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1sgdHJhbnNpdGlvbiBdIHx8ICQubW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlcjtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBtb3ZlIGludG8gdHJhbnNpdGlvbiBoYW5kbGVycz9cclxuXHRcdF90cmlnZ2VyQ3NzVHJhbnNpdGlvbkV2ZW50czogZnVuY3Rpb24oIHRvLCBmcm9tLCBwcmVmaXggKSB7XHJcblx0XHRcdHZhciBzYW1lUGFnZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0cHJlZml4ID0gcHJlZml4IHx8IFwiXCI7XHJcblxyXG5cdFx0XHQvLyBUT0RPIGRlY2lkZSBpZiB0aGVzZSBldmVudHMgc2hvdWxkIGluIGZhY3QgYmUgdHJpZ2dlcmVkIG9uIHRoZSBjb250YWluZXJcclxuXHRcdFx0aWYgKCBmcm9tICkge1xyXG5cclxuXHRcdFx0XHQvL0NoZWNrIGlmIHRoaXMgaXMgYSBzYW1lIHBhZ2UgdHJhbnNpdGlvbiBhbmQgdGVsbCB0aGUgaGFuZGxlciBpbiBwYWdlXHJcblx0XHRcdFx0aWYoIHRvWzBdID09PSBmcm9tWzBdICl7XHJcblx0XHRcdFx0XHRzYW1lUGFnZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL3RyaWdnZXIgYmVmb3JlIHNob3cvaGlkZSBldmVudHNcclxuXHRcdFx0XHQvLyBUT0RPIGRlcHJlY2F0ZSBuZXh0UGFnZSBpbiBmYXZvciBvZiBuZXh0XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBwcmVmaXggKyBcImhpZGVcIiwge1xyXG5cclxuXHRcdFx0XHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdFx0XHRcdG5leHRQYWdlOiB0byxcclxuXHRcdFx0XHRcdHRvUGFnZTogdG8sXHJcblx0XHRcdFx0XHRwcmV2UGFnZTogZnJvbSxcclxuXHRcdFx0XHRcdHNhbWVQYWdlOiBzYW1lUGFnZVxyXG5cdFx0XHRcdH0sIGZyb20gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVE9ETyBkZXByZWNhdGUgcHJldlBhZ2UgaW4gZmF2b3Igb2YgcHJldmlvdXNcclxuXHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBwcmVmaXggKyBcInNob3dcIiwge1xyXG5cdFx0XHRcdHByZXZQYWdlOiBmcm9tIHx8ICQoIFwiXCIgKSxcclxuXHRcdFx0XHR0b1BhZ2U6IHRvXHJcblx0XHRcdH0sIHRvICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gbWFrZSBwcml2YXRlIG9uY2UgY2hhbmdlIGhhcyBiZWVuIGRlZmluZWQgaW4gdGhlIHdpZGdldFxyXG5cdFx0X2Nzc1RyYW5zaXRpb246IGZ1bmN0aW9uKCB0bywgZnJvbSwgb3B0aW9ucyApIHtcclxuXHRcdFx0dmFyIHRyYW5zaXRpb24gPSBvcHRpb25zLnRyYW5zaXRpb24sXHJcblx0XHRcdFx0cmV2ZXJzZSA9IG9wdGlvbnMucmV2ZXJzZSxcclxuXHRcdFx0XHRkZWZlcnJlZCA9IG9wdGlvbnMuZGVmZXJyZWQsXHJcblx0XHRcdFx0VHJhbnNpdGlvbkhhbmRsZXIsXHJcblx0XHRcdFx0cHJvbWlzZTtcclxuXHJcblx0XHRcdHRoaXMuX3RyaWdnZXJDc3NUcmFuc2l0aW9uRXZlbnRzKCB0bywgZnJvbSwgXCJiZWZvcmVcIiApO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBwdXQgdGhpcyBpbiBhIGJpbmRpbmcgdG8gZXZlbnRzICpvdXRzaWRlKiB0aGUgd2lkZ2V0XHJcblx0XHRcdHRoaXMuX2hpZGVMb2FkaW5nKCk7XHJcblxyXG5cdFx0XHRUcmFuc2l0aW9uSGFuZGxlciA9IHRoaXMuX2dldFRyYW5zaXRpb25IYW5kbGVyKCB0cmFuc2l0aW9uICk7XHJcblxyXG5cdFx0XHRwcm9taXNlID0gKCBuZXcgVHJhbnNpdGlvbkhhbmRsZXIoIHRyYW5zaXRpb24sIHJldmVyc2UsIHRvLCBmcm9tICkgKS50cmFuc2l0aW9uKCk7XHJcblxyXG5cdFx0XHRwcm9taXNlLmRvbmUoICQucHJveHkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJDc3NUcmFuc2l0aW9uRXZlbnRzKCB0bywgZnJvbSApO1xyXG5cdFx0XHR9LCB0aGlzICkpO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyB0ZW1wb3JhcnkgYWNjb21vZGF0aW9uIG9mIGFyZ3VtZW50IGRlZmVycmVkXHJcblx0XHRcdHByb21pc2UuZG9uZShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlLmFwcGx5KCBkZWZlcnJlZCwgYXJndW1lbnRzICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfcmVsZWFzZVRyYW5zaXRpb25Mb2NrOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly9yZWxlYXNlIHRyYW5zaXRpb24gbG9jayBzbyBuYXZpZ2F0aW9uIGlzIGZyZWUgYWdhaW5cclxuXHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cdFx0XHRpZiAoIHBhZ2VUcmFuc2l0aW9uUXVldWUubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlLmFwcGx5KCBudWxsLCBwYWdlVHJhbnNpdGlvblF1ZXVlLnBvcCgpICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3JlbW92ZUFjdGl2ZUxpbmtDbGFzczogZnVuY3Rpb24oIGZvcmNlICkge1xyXG5cdFx0XHQvL2NsZWFyIG91dCB0aGUgYWN0aXZlIGJ1dHRvbiBzdGF0ZVxyXG5cdFx0XHQkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIGZvcmNlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9sb2FkVXJsOiBmdW5jdGlvbiggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0Ly8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHRhcmdldCBhcyB0aGUgZGF0YVVybCB2YWx1ZSB3aWxsIGJlXHJcblx0XHRcdC8vIHNpbXBsaWZpZWQgZWcsIHJlbW92aW5nIHVpLXN0YXRlLCBhbmQgcmVtb3ZpbmcgcXVlcnkgcGFyYW1zXHJcblx0XHRcdC8vIGZyb20gdGhlIGhhc2ggdGhpcyBpcyBzbyB0aGF0IHVzZXJzIHdobyB3YW50IHRvIHVzZSBxdWVyeVxyXG5cdFx0XHQvLyBwYXJhbXMgaGF2ZSBhY2Nlc3MgdG8gdGhlbSBpbiB0aGUgZXZlbnQgYmluZGluZ3MgZm9yIHRoZSBwYWdlXHJcblx0XHRcdC8vIGxpZmUgY3ljbGUgU2VlIGlzc3VlICM1MDg1XHJcblx0XHRcdHNldHRpbmdzLnRhcmdldCA9IHRvO1xyXG5cdFx0XHRzZXR0aW5ncy5kZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0XHRcdHRoaXMubG9hZCggdG8sIHNldHRpbmdzICk7XHJcblxyXG5cdFx0XHRzZXR0aW5ncy5kZWZlcnJlZC5kb25lKCQucHJveHkoZnVuY3Rpb24oIHVybCwgb3B0aW9ucywgY29udGVudCApIHtcclxuXHRcdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdC8vIHN0b3JlIHRoZSBvcmlnaW5hbCBhYnNvbHV0ZSB1cmwgc28gdGhhdCBpdCBjYW4gYmUgcHJvdmlkZWRcclxuXHRcdFx0XHQvLyB0byBldmVudHMgaW4gdGhlIHRyaWdnZXJEYXRhIG9mIHRoZSBzdWJzZXF1ZW50IGNoYW5nZVBhZ2UgY2FsbFxyXG5cdFx0XHRcdG9wdGlvbnMuYWJzVXJsID0gdHJpZ2dlckRhdGEuYWJzVXJsO1xyXG5cclxuXHRcdFx0XHR0aGlzLnRyYW5zaXRpb24oIGNvbnRlbnQsIHRyaWdnZXJEYXRhLCBvcHRpb25zICk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHRcdHNldHRpbmdzLmRlZmVycmVkLmZhaWwoJC5wcm94eShmdW5jdGlvbigvKiB1cmwsIG9wdGlvbnMgKi8pIHtcclxuXHRcdFx0XHR0aGlzLl9yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIHRydWUgKTtcclxuXHRcdFx0XHR0aGlzLl9yZWxlYXNlVHJhbnNpdGlvbkxvY2soKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiY2hhbmdlZmFpbGVkXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RyaWdnZXJQYWdlQmVmb3JlQ2hhbmdlOiBmdW5jdGlvbiggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0dmFyIHJldHVybkV2ZW50cztcclxuXHJcblx0XHRcdHRyaWdnZXJEYXRhLnByZXZQYWdlID0gdGhpcy5hY3RpdmVQYWdlO1xyXG5cdFx0XHQkLmV4dGVuZCggdHJpZ2dlckRhdGEsIHtcclxuXHRcdFx0XHR0b1BhZ2U6IHRvLFxyXG5cdFx0XHRcdG9wdGlvbnM6IHNldHRpbmdzXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gTk9URTogcHJlc2VydmUgdGhlIG9yaWdpbmFsIHRhcmdldCBhcyB0aGUgZGF0YVVybCB2YWx1ZSB3aWxsIGJlXHJcblx0XHRcdC8vIHNpbXBsaWZpZWQgZWcsIHJlbW92aW5nIHVpLXN0YXRlLCBhbmQgcmVtb3ZpbmcgcXVlcnkgcGFyYW1zIGZyb21cclxuXHRcdFx0Ly8gdGhlIGhhc2ggdGhpcyBpcyBzbyB0aGF0IHVzZXJzIHdobyB3YW50IHRvIHVzZSBxdWVyeSBwYXJhbXMgaGF2ZVxyXG5cdFx0XHQvLyBhY2Nlc3MgdG8gdGhlbSBpbiB0aGUgZXZlbnQgYmluZGluZ3MgZm9yIHRoZSBwYWdlIGxpZmUgY3ljbGVcclxuXHRcdFx0Ly8gU2VlIGlzc3VlICM1MDg1XHJcblx0XHRcdGlmICggJC50eXBlKHRvKSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9QYWdlIGlzIGEgc3RyaW5nIHNpbXBseSBjb252ZXJ0IGl0XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuYWJzVXJsID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHRvLCB0aGlzLl9maW5kQmFzZVdpdGhEZWZhdWx0KCkgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9QYWdlIGlzIGEgalF1ZXJ5IG9iamVjdCBncmFiIHRoZSBhYnNvbHV0ZSB1cmwgc3RvcmVkXHJcblx0XHRcdFx0Ly8gaW4gdGhlIGxvYWRQYWdlIGNhbGxiYWNrIHdoZXJlIGl0IGV4aXN0c1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmFic1VybCA9IHNldHRpbmdzLmFic1VybDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTGV0IGxpc3RlbmVycyBrbm93IHdlJ3JlIGFib3V0IHRvIGNoYW5nZSB0aGUgY3VycmVudCBwYWdlLlxyXG5cdFx0XHRyZXR1cm5FdmVudHMgPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiYmVmb3JlY2hhbmdlXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0aWYgKCByZXR1cm5FdmVudHMuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRyZXR1cm5FdmVudHMuZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNoYW5nZTogZnVuY3Rpb24oIHRvLCBvcHRpb25zICkge1xyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGEgdHJhbnNpdGlvbiwgcXVldWUgdGhlIGN1cnJlbnQgcmVxdWVzdC5cclxuXHRcdFx0Ly8gV2UnbGwgY2FsbCBjaGFuZ2VQYWdlKCkgb25jZSB3ZSdyZSBkb25lIHdpdGggdGhlIGN1cnJlbnQgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyB0byBzZXJ2aWNlIHRoZSByZXF1ZXN0LlxyXG5cdFx0XHRpZiAoIGlzUGFnZVRyYW5zaXRpb25pbmcgKSB7XHJcblx0XHRcdFx0cGFnZVRyYW5zaXRpb25RdWV1ZS51bnNoaWZ0KCBhcmd1bWVudHMgKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgJC5tb2JpbGUuY2hhbmdlUGFnZS5kZWZhdWx0cywgb3B0aW9ucyApLFxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhID0ge307XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIGZyb21QYWdlLlxyXG5cdFx0XHRzZXR0aW5ncy5mcm9tUGFnZSA9IHNldHRpbmdzLmZyb21QYWdlIHx8IHRoaXMuYWN0aXZlUGFnZTtcclxuXHJcblx0XHRcdC8vIGlmIHRoZSBwYWdlIGJlZm9yZWNoYW5nZSBkZWZhdWx0IGlzIHByZXZlbnRlZCByZXR1cm4gZWFybHlcclxuXHRcdFx0aWYgKCAhdGhpcy5fdHJpZ2dlclBhZ2VCZWZvcmVDaGFuZ2UodG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncykgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBXZSBhbGxvdyBcInBhZ2ViZWZvcmVjaGFuZ2VcIiBvYnNlcnZlcnMgdG8gbW9kaWZ5IHRoZSB0byBpblxyXG5cdFx0XHQvLyB0aGUgdHJpZ2dlciBkYXRhIHRvIGFsbG93IGZvciByZWRpcmVjdHMuIE1ha2Ugc3VyZSBvdXIgdG8gaXNcclxuXHRcdFx0Ly8gdXBkYXRlZC4gV2UgYWxzbyBuZWVkIHRvIHJlLWV2YWx1YXRlIHdoZXRoZXIgaXQgaXMgYSBzdHJpbmcsXHJcblx0XHRcdC8vIGJlY2F1c2UgYW4gb2JqZWN0IGNhbiBhbHNvIGJlIHJlcGxhY2VkIGJ5IGEgc3RyaW5nXHJcblx0XHRcdHRvID0gdHJpZ2dlckRhdGEudG9QYWdlO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNhbGxlciBwYXNzZWQgdXMgYSB1cmwsIGNhbGwgbG9hZFBhZ2UoKVxyXG5cdFx0XHQvLyB0byBtYWtlIHN1cmUgaXQgaXMgbG9hZGVkIGludG8gdGhlIERPTS4gV2UnbGwgbGlzdGVuXHJcblx0XHRcdC8vIHRvIHRoZSBwcm9taXNlIG9iamVjdCBpdCByZXR1cm5zIHNvIHdlIGtub3cgd2hlblxyXG5cdFx0XHQvLyBpdCBpcyBkb25lIGxvYWRpbmcgb3IgaWYgYW4gZXJyb3Igb2N1cnJlZC5cclxuXHRcdFx0aWYgKCAkLnR5cGUodG8pID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdC8vIFNldCB0aGUgaXNQYWdlVHJhbnNpdGlvbmluZyBmbGFnIHRvIHByZXZlbnQgYW55IHJlcXVlc3RzIGZyb21cclxuXHRcdFx0XHQvLyBlbnRlcmluZyB0aGlzIG1ldGhvZCB3aGlsZSB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGxvYWRpbmcgYSBwYWdlXHJcblx0XHRcdFx0Ly8gb3IgdHJhbnNpdGlvbmluZy5cclxuXHRcdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0dGhpcy5fbG9hZFVybCggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMudHJhbnNpdGlvbiggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHRyYW5zaXRpb246IGZ1bmN0aW9uKCB0b1BhZ2UsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0dmFyIGZyb21QYWdlLCB1cmwsIHBhZ2VVcmwsIGZpbGVVcmwsXHJcblx0XHRcdFx0YWN0aXZlLCBhY3RpdmVJc0luaXRpYWxQYWdlLFxyXG5cdFx0XHRcdGhpc3RvcnlEaXIsIHBhZ2VUaXRsZSwgaXNEaWFsb2csXHJcblx0XHRcdFx0YWxyZWFkeVRoZXJlLCBuZXdQYWdlVGl0bGUsXHJcblx0XHRcdFx0cGFyYW1zLFx0Y3NzVHJhbnNpdGlvbkRlZmVycmVkLFxyXG5cdFx0XHRcdGJlZm9yZVRyYW5zaXRpb247XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGEgdHJhbnNpdGlvbiwgcXVldWUgdGhlIGN1cnJlbnQgcmVxdWVzdC5cclxuXHRcdFx0Ly8gV2UnbGwgY2FsbCBjaGFuZ2VQYWdlKCkgb25jZSB3ZSdyZSBkb25lIHdpdGggdGhlIGN1cnJlbnQgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyB0byBzZXJ2aWNlIHRoZSByZXF1ZXN0LlxyXG5cdFx0XHRpZiAoIGlzUGFnZVRyYW5zaXRpb25pbmcgKSB7XHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIG9ubHkgcXVldWUgdGhlIHRvIGFuZCBzZXR0aW5ncyB2YWx1ZXMgc28gdGhlIGFyZ3VtZW50c1xyXG5cdFx0XHRcdC8vIHdvcmsgd2l0aCBhIGNhbGwgdG8gdGhlIGNoYW5nZSBtZXRob2RcclxuXHRcdFx0XHRwYWdlVHJhbnNpdGlvblF1ZXVlLnVuc2hpZnQoIFt0b1BhZ2UsIHNldHRpbmdzXSApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRCAtIHRoaXMgY2FsbCBvbmx5LCBpbiBmYXZvciBvZiB0aGUgYmVmb3JlIHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gaWYgdGhlIHBhZ2UgYmVmb3JlY2hhbmdlIGRlZmF1bHQgaXMgcHJldmVudGVkIHJldHVybiBlYXJseVxyXG5cdFx0XHRpZiAoICF0aGlzLl90cmlnZ2VyUGFnZUJlZm9yZUNoYW5nZSh0b1BhZ2UsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncykgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0cmlnZ2VyRGF0YS5wcmV2UGFnZSA9IHNldHRpbmdzLmZyb21QYWdlO1xyXG5cdFx0XHQvLyBpZiB0aGUgKGNvbnRlbnR8cGFnZSliZWZvcmV0cmFuc2l0aW9uIGRlZmF1bHQgaXMgcHJldmVudGVkIHJldHVybiBlYXJseVxyXG5cdFx0XHQvLyBOb3RlLCB3ZSBoYXZlIHRvIGNoZWNrIGZvciBib3RoIHRoZSBkZXByZWNhdGVkIGFuZCBuZXcgZXZlbnRzXHJcblx0XHRcdGJlZm9yZVRyYW5zaXRpb24gPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiYmVmb3JldHJhbnNpdGlvblwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHRpZiAoYmVmb3JlVHJhbnNpdGlvbi5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRiZWZvcmVUcmFuc2l0aW9uLmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBpc1BhZ2VUcmFuc2l0aW9uaW5nIGZsYWcgdG8gcHJldmVudCBhbnkgcmVxdWVzdHMgZnJvbVxyXG5cdFx0XHQvLyBlbnRlcmluZyB0aGlzIG1ldGhvZCB3aGlsZSB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGxvYWRpbmcgYSBwYWdlXHJcblx0XHRcdC8vIG9yIHRyYW5zaXRpb25pbmcuXHJcblx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBmaXJzdC1wYWdlIG9mIHRoZSBhcHBsaWNhdGlvbiwgd2UgbmVlZCB0byBtYWtlXHJcblx0XHRcdC8vIHN1cmUgc2V0dGluZ3MuZGF0YVVybCBpcyBzZXQgdG8gdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHVybC4gVGhpcyBhbGxvd3NcclxuXHRcdFx0Ly8gdXMgdG8gYXZvaWQgZ2VuZXJhdGluZyBhIGRvY3VtZW50IHVybCB3aXRoIGFuIGlkIGhhc2ggaW4gdGhlIGNhc2Ugd2hlcmUgdGhlXHJcblx0XHRcdC8vIGZpcnN0LXBhZ2Ugb2YgdGhlIGRvY3VtZW50IGhhcyBhbiBpZCBhdHRyaWJ1dGUgc3BlY2lmaWVkLlxyXG5cdFx0XHRpZiAoIHRvUGFnZVsgMCBdID09PSAkLm1vYmlsZS5maXJzdFBhZ2VbIDAgXSAmJiAhc2V0dGluZ3MuZGF0YVVybCApIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5kYXRhVXJsID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudFVybC5ocmVmTm9IYXNoO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUaGUgY2FsbGVyIHBhc3NlZCB1cyBhIHJlYWwgcGFnZSBET00gZWxlbWVudC4gVXBkYXRlIG91clxyXG5cdFx0XHQvLyBpbnRlcm5hbCBzdGF0ZSBhbmQgdGhlbiB0cmlnZ2VyIGEgdHJhbnNpdGlvbiB0byB0aGUgcGFnZS5cclxuXHRcdFx0ZnJvbVBhZ2UgPSBzZXR0aW5ncy5mcm9tUGFnZTtcclxuXHRcdFx0dXJsID0gKCBzZXR0aW5ncy5kYXRhVXJsICYmICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybChzZXR0aW5ncy5kYXRhVXJsKSApIHx8XHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwidXJsXCIgKTtcclxuXHJcblx0XHRcdC8vIFRoZSBwYWdlVXJsIHZhciBpcyB1c3VhbGx5IHRoZSBzYW1lIGFzIHVybCwgZXhjZXB0IHdoZW4gdXJsIGlzIG9ic2N1cmVkXHJcblx0XHRcdC8vIGFzIGEgZGlhbG9nIHVybC4gcGFnZVVybCBhbHdheXMgY29udGFpbnMgdGhlIGZpbGUgcGF0aFxyXG5cdFx0XHRwYWdlVXJsID0gdXJsO1xyXG5cdFx0XHRmaWxlVXJsID0gJC5tb2JpbGUucGF0aC5nZXRGaWxlUGF0aCggdXJsICk7XHJcblx0XHRcdGFjdGl2ZSA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCk7XHJcblx0XHRcdGFjdGl2ZUlzSW5pdGlhbFBhZ2UgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID09PSAwO1xyXG5cdFx0XHRoaXN0b3J5RGlyID0gMDtcclxuXHRcdFx0cGFnZVRpdGxlID0gZG9jdW1lbnQudGl0bGU7XHJcblx0XHRcdGlzRGlhbG9nID0gKCBzZXR0aW5ncy5yb2xlID09PSBcImRpYWxvZ1wiIHx8XHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwicm9sZVwiICkgPT09IFwiZGlhbG9nXCIgKSAmJlxyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcImRpYWxvZ1wiICkgIT09IHRydWU7XHJcblxyXG5cdFx0XHQvLyBCeSBkZWZhdWx0LCB3ZSBwcmV2ZW50IGNoYW5nZVBhZ2UgcmVxdWVzdHMgd2hlbiB0aGUgZnJvbVBhZ2UgYW5kIHRvUGFnZVxyXG5cdFx0XHQvLyBhcmUgdGhlIHNhbWUgZWxlbWVudCwgYnV0IGZvbGtzIHRoYXQgZ2VuZXJhdGUgY29udGVudFxyXG5cdFx0XHQvLyBtYW51YWxseS9keW5hbWljYWxseSBhbmQgcmV1c2UgcGFnZXMgd2FudCB0byBiZSBhYmxlIHRvIHRyYW5zaXRpb24gdG9cclxuXHRcdFx0Ly8gdGhlIHNhbWUgcGFnZS4gVG8gYWxsb3cgdGhpcywgdGhleSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoZSBkZWZhdWx0XHJcblx0XHRcdC8vIHZhbHVlIG9mIGFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uIHRvIHRydWUsICpPUiosIHBhc3MgaXQgaW4gYXMgYW5cclxuXHRcdFx0Ly8gb3B0aW9uIHdoZW4gdGhleSBtYW51YWxseSBjYWxsIGNoYW5nZVBhZ2UoKS4gSXQgc2hvdWxkIGJlIG5vdGVkIHRoYXRcclxuXHRcdFx0Ly8gb3VyIGRlZmF1bHQgdHJhbnNpdGlvbiBhbmltYXRpb25zIGFzc3VtZSB0aGF0IHRoZSBmb3JtUGFnZSBhbmQgdG9QYWdlXHJcblx0XHRcdC8vIGFyZSBkaWZmZXJlbnQgZWxlbWVudHMsIHNvIHRoZXkgbWF5IGJlaGF2ZSB1bmV4cGVjdGVkbHkuIEl0IGlzIHVwIHRvXHJcblx0XHRcdC8vIHRoZSBkZXZlbG9wZXIgdGhhdCB0dXJucyBvbiB0aGUgYWxsb3dTYW1lUGFnZVRyYW5zaXRpb25hIG9wdGlvbiB0b1xyXG5cdFx0XHQvLyBlaXRoZXIgdHVybiBvZmYgdHJhbnNpdGlvbiBhbmltYXRpb25zLCBvciBtYWtlIHN1cmUgdGhhdCBhbiBhcHByb3ByaWF0ZVxyXG5cdFx0XHQvLyBhbmltYXRpb24gdHJhbnNpdGlvbiBpcyB1c2VkLlxyXG5cdFx0XHRpZiAoIGZyb21QYWdlICYmIGZyb21QYWdlWzBdID09PSB0b1BhZ2VbMF0gJiZcclxuXHRcdFx0XHQhc2V0dGluZ3MuYWxsb3dTYW1lUGFnZVRyYW5zaXRpb24gKSB7XHJcblxyXG5cdFx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwidHJhbnNpdGlvblwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJjaGFuZ2VcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdFx0Ly8gRXZlbiBpZiB0aGVyZSBpcyBubyBwYWdlIGNoYW5nZSB0byBiZSBkb25lLCB3ZSBzaG91bGQga2VlcCB0aGVcclxuXHRcdFx0XHQvLyB1cmxIaXN0b3J5IGluIHN5bmMgd2l0aCB0aGUgaGFzaCBjaGFuZ2VzXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5mcm9tSGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZGlyZWN0KHsgdXJsOiB1cmwgfSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBwYWdlIHdlIGFyZSBnaXZlbiBoYXMgYWxyZWFkeSBiZWVuIGVuaGFuY2VkLlxyXG5cdFx0XHR0b1BhZ2UucGFnZSh7IHJvbGU6IHNldHRpbmdzLnJvbGUgfSk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2hhbmdlUGFnZSByZXF1ZXN0IHdhcyBzZW50IGZyb20gYSBoYXNoQ2hhbmdlIGV2ZW50LCBjaGVjayB0b1xyXG5cdFx0XHQvLyBzZWUgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSB3aXRoaW4gdGhlIHVybEhpc3Rvcnkgc3RhY2suIElmIHNvLCB3ZSdsbFxyXG5cdFx0XHQvLyBhc3N1bWUgdGhlIHVzZXIgaGl0IHRoZSBmb3J3YXJkL2JhY2sgYnV0dG9uIGFuZCB3aWxsIHRyeSB0byBtYXRjaCB0aGVcclxuXHRcdFx0Ly8gdHJhbnNpdGlvbiBhY2NvcmRpbmdseS5cclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5mcm9tSGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHRoaXN0b3J5RGlyID0gc2V0dGluZ3MuZGlyZWN0aW9uID09PSBcImJhY2tcIiA/IC0xIDogMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gS2lsbCB0aGUga2V5Ym9hcmQuXHJcblx0XHRcdC8vIFhYWF9qYmxhczogV2UgbmVlZCB0byBzdG9wIGNyYXdsaW5nIHRoZSBlbnRpcmUgZG9jdW1lbnQgdG8ga2lsbCBmb2N1cy5cclxuXHRcdFx0Ly8gICAgICAgICAgICBJbnN0ZWFkLCB3ZSBzaG91bGQgYmUgdHJhY2tpbmcgZm9jdXMgd2l0aCBhIGRlbGVnYXRlKClcclxuXHRcdFx0Ly8gICAgICAgICAgICBoYW5kbGVyIHNvIHdlIGFscmVhZHkgaGF2ZSB0aGUgZWxlbWVudCBpbiBoYW5kIGF0IHRoaXNcclxuXHRcdFx0Ly8gICAgICAgICAgICBwb2ludC5cclxuXHRcdFx0Ly8gV3JhcCB0aGlzIGluIGEgdHJ5L2NhdGNoIGJsb2NrIHNpbmNlIElFOSB0aHJvdyBcIlVuc3BlY2lmaWVkIGVycm9yXCIgaWZcclxuXHRcdFx0Ly8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpcyB1bmRlZmluZWQgd2hlbiB3ZSBhcmUgaW4gYW4gSUZyYW1lLlxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGlmICggZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxyXG5cdFx0XHRcdFx0ZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImJvZHlcIiApIHtcclxuXHJcblx0XHRcdFx0XHQkKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICkuYmx1cigpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKCBcImlucHV0OmZvY3VzLCB0ZXh0YXJlYTpmb2N1cywgc2VsZWN0OmZvY3VzXCIgKS5ibHVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoKCBlICkge31cclxuXHJcblx0XHRcdC8vIFJlY29yZCB3aGV0aGVyIHdlIGFyZSBhdCBhIHBsYWNlIGluIGhpc3Rvcnkgd2hlcmUgYSBkaWFsb2cgdXNlZCB0byBiZSAtXHJcblx0XHRcdC8vIGlmIHNvLCBkbyBub3QgYWRkIGEgbmV3IGhpc3RvcnkgZW50cnkgYW5kIGRvIG5vdCBjaGFuZ2UgdGhlIGhhc2ggZWl0aGVyXHJcblx0XHRcdGFscmVhZHlUaGVyZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgZGlzcGxheWluZyB0aGUgcGFnZSBhcyBhIGRpYWxvZywgd2UgZG9uJ3Qgd2FudCB0aGUgdXJsXHJcblx0XHRcdC8vIGZvciB0aGUgZGlhbG9nIGNvbnRlbnQgdG8gYmUgdXNlZCBpbiB0aGUgaGFzaC4gSW5zdGVhZCwgd2Ugd2FudFxyXG5cdFx0XHQvLyB0byBhcHBlbmQgdGhlIGRpYWxvZ0hhc2hLZXkgdG8gdGhlIHVybCBvZiB0aGUgY3VycmVudCBwYWdlLlxyXG5cdFx0XHRpZiAoIGlzRGlhbG9nICYmIGFjdGl2ZSApIHtcclxuXHRcdFx0XHQvLyBvbiB0aGUgaW5pdGlhbCBwYWdlIGxvYWQgYWN0aXZlLnVybCBpcyB1bmRlZmluZWQgYW5kIGluIHRoYXQgY2FzZVxyXG5cdFx0XHRcdC8vIHNob3VsZCBiZSBhbiBlbXB0eSBzdHJpbmcuIE1vdmluZyB0aGUgdW5kZWZpbmVkIC0+IGVtcHR5IHN0cmluZyBiYWNrXHJcblx0XHRcdFx0Ly8gaW50byB1cmxIaXN0b3J5LmFkZE5ldyBzZWVtZWQgaW1wcnVkZW50IGdpdmVuIHVuZGVmaW5lZCBiZXR0ZXJcclxuXHRcdFx0XHQvLyByZXByZXNlbnRzIHRoZSB1cmwgc3RhdGVcclxuXHJcblx0XHRcdFx0Ly8gSWYgd2UgYXJlIGF0IGEgcGxhY2UgaW4gaGlzdG9yeSB0aGF0IG9uY2UgYmVsb25nZWQgdG8gYSBkaWFsb2csIHJldXNlXHJcblx0XHRcdFx0Ly8gdGhpcyBzdGF0ZSB3aXRob3V0IGFkZGluZyB0byB1cmxIaXN0b3J5IGFuZCB3aXRob3V0IG1vZGlmeWluZyB0aGVcclxuXHRcdFx0XHQvLyBoYXNoLiBIb3dldmVyLCBpZiBhIGRpYWxvZyBpcyBhbHJlYWR5IGRpc3BsYXllZCBhdCB0aGlzIHBvaW50LCBhbmRcclxuXHRcdFx0XHQvLyB3ZSdyZSBhYm91dCB0byBkaXNwbGF5IGFub3RoZXIgZGlhbG9nLCB0aGVuIHdlIG11c3QgYWRkIGFub3RoZXIgaGFzaFxyXG5cdFx0XHRcdC8vIGFuZCBoaXN0b3J5IGVudHJ5IG9uIHRvcCBzbyB0aGF0IG9uZSBtYXkgbmF2aWdhdGUgYmFjayB0byB0aGVcclxuXHRcdFx0XHQvLyBvcmlnaW5hbCBkaWFsb2dcclxuXHRcdFx0XHRpZiAoIGFjdGl2ZS51cmwgJiZcclxuXHRcdFx0XHRcdGFjdGl2ZS51cmwuaW5kZXhPZiggJC5tb2JpbGUuZGlhbG9nSGFzaEtleSApID4gLTEgJiZcclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZlUGFnZSAmJlxyXG5cdFx0XHRcdFx0IXRoaXMuYWN0aXZlUGFnZS5oYXNDbGFzcyggXCJ1aS1kaWFsb2dcIiApICYmXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCApIHtcclxuXHJcblx0XHRcdFx0XHRzZXR0aW5ncy5jaGFuZ2VIYXNoID0gZmFsc2U7XHJcblx0XHRcdFx0XHRhbHJlYWR5VGhlcmUgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gTm9ybWFsbHksIHdlIHRhY2sgb24gYSBkaWFsb2cgaGFzaCBrZXksIGJ1dCBpZiB0aGlzIGlzIHRoZSBsb2NhdGlvblxyXG5cdFx0XHRcdC8vIG9mIGEgc3RhbGUgZGlhbG9nLCB3ZSByZXVzZSB0aGUgVVJMIGZyb20gdGhlIGVudHJ5XHJcblx0XHRcdFx0dXJsID0gKCBhY3RpdmUudXJsIHx8IFwiXCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gYWNjb3VudCBmb3IgYWJzb2x1dGUgdXJscyBpbnN0ZWFkIG9mIGp1c3QgcmVsYXRpdmUgdXJscyB1c2UgYXMgaGFzaGVzXHJcblx0XHRcdFx0aWYgKCAhYWxyZWFkeVRoZXJlICYmIHVybC5pbmRleE9mKFwiI1wiKSA+IC0xICkge1xyXG5cdFx0XHRcdFx0dXJsICs9ICQubW9iaWxlLmRpYWxvZ0hhc2hLZXk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHVybCArPSBcIiNcIiArICQubW9iaWxlLmRpYWxvZ0hhc2hLZXk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aXRsZSBlbGVtZW50IHdhc24ndCBmb3VuZCwgdHJ5IHRoZSBwYWdlIGRpdiBkYXRhIGF0dHIgdG9vXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgYSBkZWVwLWxpbmsgb3IgYSByZWxvYWQgKCBhY3RpdmUgPT09IHVuZGVmaW5lZCApIHRoZW4ganVzdFxyXG5cdFx0XHQvLyB1c2UgcGFnZVRpdGxlXHJcblx0XHRcdG5ld1BhZ2VUaXRsZSA9ICggIWFjdGl2ZSApID8gcGFnZVRpdGxlIDogdG9QYWdlLmpxbURhdGEoIFwidGl0bGVcIiApIHx8XHJcblx0XHRcdFx0dG9QYWdlLmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maW5kKCBcIi51aS10aXRsZVwiICkudGV4dCgpO1xyXG5cdFx0XHRpZiAoICEhbmV3UGFnZVRpdGxlICYmIHBhZ2VUaXRsZSA9PT0gZG9jdW1lbnQudGl0bGUgKSB7XHJcblx0XHRcdFx0cGFnZVRpdGxlID0gbmV3UGFnZVRpdGxlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIXRvUGFnZS5qcW1EYXRhKCBcInRpdGxlXCIgKSApIHtcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJ0aXRsZVwiLCBwYWdlVGl0bGUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIGhhdmUgYSB0cmFuc2l0aW9uIGRlZmluZWQuXHJcblx0XHRcdHNldHRpbmdzLnRyYW5zaXRpb24gPSBzZXR0aW5ncy50cmFuc2l0aW9uIHx8XHJcblx0XHRcdFx0KCAoIGhpc3RvcnlEaXIgJiYgIWFjdGl2ZUlzSW5pdGlhbFBhZ2UgKSA/IGFjdGl2ZS50cmFuc2l0aW9uIDogdW5kZWZpbmVkICkgfHxcclxuXHRcdFx0XHQoIGlzRGlhbG9nID8gJC5tb2JpbGUuZGVmYXVsdERpYWxvZ1RyYW5zaXRpb24gOiAkLm1vYmlsZS5kZWZhdWx0UGFnZVRyYW5zaXRpb24gKTtcclxuXHJcblx0XHRcdC8vYWRkIHBhZ2UgdG8gaGlzdG9yeSBzdGFjayBpZiBpdCdzIG5vdCBiYWNrIG9yIGZvcndhcmRcclxuXHRcdFx0aWYgKCAhaGlzdG9yeURpciAmJiBhbHJlYWR5VGhlcmUgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKS5wYWdlVXJsID0gcGFnZVVybDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBsb2NhdGlvbiBoYXNoLlxyXG5cdFx0XHRpZiAoIHVybCAmJiAhc2V0dGluZ3MuZnJvbUhhc2hDaGFuZ2UgKSB7XHJcblxyXG5cdFx0XHRcdC8vIHJlYnVpbGRpbmcgdGhlIGhhc2ggaGVyZSBzaW5jZSB3ZSBsb29zZSBpdCBlYXJsaWVyIG9uXHJcblx0XHRcdFx0Ly8gVE9ETyBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWxseSBwYXNzZWQgaW4gcGF0aFxyXG5cdFx0XHRcdGlmICggISQubW9iaWxlLnBhdGguaXNQYXRoKCB1cmwgKSAmJiB1cmwuaW5kZXhPZiggXCIjXCIgKSA8IDAgKSB7XHJcblx0XHRcdFx0XHR1cmwgPSBcIiNcIiArIHVybDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gdGhlIHByb3BlcnR5IG5hbWVzIGhlcmUgYXJlIGp1c3Qgc2lsbHlcclxuXHRcdFx0XHRwYXJhbXMgPSB7XHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBzZXR0aW5ncy50cmFuc2l0aW9uLFxyXG5cdFx0XHRcdFx0dGl0bGU6IHBhZ2VUaXRsZSxcclxuXHRcdFx0XHRcdHBhZ2VVcmw6IHBhZ2VVcmwsXHJcblx0XHRcdFx0XHRyb2xlOiBzZXR0aW5ncy5yb2xlXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5jaGFuZ2VIYXNoICE9PSBmYWxzZSAmJiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlKCB0aGlzLndpbmRvd1sgMCBdLmVuY29kZVVSSSggdXJsICksIHBhcmFtcywgdHJ1ZSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdG9QYWdlWyAwIF0gIT09ICQubW9iaWxlLmZpcnN0UGFnZVsgMCBdICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hZGQoIHVybCwgcGFyYW1zICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL3NldCBwYWdlIHRpdGxlXHJcblx0XHRcdGRvY3VtZW50LnRpdGxlID0gcGFnZVRpdGxlO1xyXG5cclxuXHRcdFx0Ly9zZXQgXCJ0b1BhZ2VcIiBhcyBhY3RpdmVQYWdlIGRlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdFx0JC5tb2JpbGUuYWN0aXZlUGFnZSA9IHRvUGFnZTtcclxuXHJcblx0XHRcdC8vbmV3IHdheSB0byBoYW5kbGUgYWN0aXZlUGFnZVxyXG5cdFx0XHR0aGlzLmFjdGl2ZVBhZ2UgPSB0b1BhZ2U7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBuYXZpZ2F0aW5nIGJhY2sgaW4gdGhlIFVSTCBoaXN0b3J5LCBzZXQgcmV2ZXJzZSBhY2NvcmRpbmdseS5cclxuXHRcdFx0c2V0dGluZ3MucmV2ZXJzZSA9IHNldHRpbmdzLnJldmVyc2UgfHwgaGlzdG9yeURpciA8IDA7XHJcblxyXG5cdFx0XHRjc3NUcmFuc2l0aW9uRGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdFx0XHR0aGlzLl9jc3NUcmFuc2l0aW9uKHRvUGFnZSwgZnJvbVBhZ2UsIHtcclxuXHRcdFx0XHR0cmFuc2l0aW9uOiBzZXR0aW5ncy50cmFuc2l0aW9uLFxyXG5cdFx0XHRcdHJldmVyc2U6IHNldHRpbmdzLnJldmVyc2UsXHJcblx0XHRcdFx0ZGVmZXJyZWQ6IGNzc1RyYW5zaXRpb25EZWZlcnJlZFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNzc1RyYW5zaXRpb25EZWZlcnJlZC5kb25lKCQucHJveHkoZnVuY3Rpb24oIG5hbWUsIHJldmVyc2UsICR0bywgJGZyb20sIGFscmVhZHlGb2N1c2VkICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcygpO1xyXG5cclxuXHRcdFx0XHQvL2lmIHRoZXJlJ3MgYSBkdXBsaWNhdGVDYWNoZWRQYWdlLCByZW1vdmUgaXQgZnJvbSB0aGUgRE9NIG5vdyB0aGF0IGl0J3MgaGlkZGVuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5kdXBsaWNhdGVDYWNoZWRQYWdlICkge1xyXG5cdFx0XHRcdFx0c2V0dGluZ3MuZHVwbGljYXRlQ2FjaGVkUGFnZS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIGRlc3BpdGUgdmlzaWJpbGl0eTogaGlkZGVuIGFkZHJlc3NlcyBpc3N1ZSAjMjk2NVxyXG5cdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMjk2NVxyXG5cdFx0XHRcdGlmICggIWFscmVhZHlGb2N1c2VkICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuZm9jdXNQYWdlKCB0b1BhZ2UgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX3JlbGVhc2VUcmFuc2l0aW9uTG9jaygpO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJ0cmFuc2l0aW9uXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImNoYW5nZVwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGRldGVybWluZSB0aGUgY3VycmVudCBiYXNlIHVybFxyXG5cdFx0X2ZpbmRCYXNlV2l0aERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2xvc2VzdEJhc2UgPSAoIHRoaXMuYWN0aXZlUGFnZSAmJlxyXG5cdFx0XHQkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggdGhpcy5hY3RpdmVQYWdlICkgKTtcclxuXHRcdHJldHVybiBjbG9zZXN0QmFzZSB8fCAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBUaGUgZm9sbG93aW5nIGhhbmRsZXJzIHNob3VsZCBiZSBib3VuZCBhZnRlciBtb2JpbGVpbml0IGhhcyBiZWVuIHRyaWdnZXJlZFxyXG5cdC8vIHRoZSBmb2xsb3dpbmcgZGVmZXJyZWQgaXMgcmVzb2x2ZWQgaW4gdGhlIGluaXQgZmlsZVxyXG5cdCQubW9iaWxlLm5hdnJlYWR5RGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdC8vdGhlc2UgdmFyaWFibGVzIG1ha2UgYWxsIHBhZ2UgY29udGFpbmVycyB1c2UgdGhlIHNhbWUgcXVldWUgYW5kIG9ubHkgbmF2aWdhdGUgb25lIGF0IGEgdGltZVxyXG5cdC8vIHF1ZXVlIHRvIGhvbGQgc2ltdWx0YW5pb3VzIHBhZ2UgdHJhbnNpdGlvbnNcclxuXHR2YXIgcGFnZVRyYW5zaXRpb25RdWV1ZSA9IFtdLFxyXG5cclxuXHRcdC8vIGluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCBwYWdlIGlzIGluIHByb2Nlc3Mgb2YgdHJhbnNpdGlvbmluZ1xyXG5cdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0Ly8gcmVzb2x2ZWQgb24gZG9tcmVhZHlcclxuXHR2YXIgZG9tcmVhZHlEZWZlcnJlZCA9ICQuRGVmZXJyZWQoKSxcclxuXHJcblx0XHQvLyByZXNvbHZlZCBhbmQgbnVsbGVkIG9uIHdpbmRvdy5sb2FkKClcclxuXHRcdGxvYWREZWZlcnJlZCA9ICQuRGVmZXJyZWQoKSxcclxuXHJcblx0XHQvLyBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBhYm92ZSBkZWZlcnJlZFxyXG5cdFx0cGFnZUlzRnVsbHlMb2FkZWQgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdC8vIFJlc29sdmUgYW5kIG51bGwgdGhlIGRlZmVycmVkXHJcblx0XHRcdGxvYWREZWZlcnJlZC5yZXNvbHZlKCk7XHJcblx0XHRcdGxvYWREZWZlcnJlZCA9IG51bGw7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRvY3VtZW50VXJsID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudFVybCxcclxuXHJcblx0XHQvLyB1c2VkIHRvIHRyYWNrIGxhc3QgdmNsaWNrZWQgZWxlbWVudCB0byBtYWtlIHN1cmUgaXRzIHZhbHVlIGlzIGFkZGVkIHRvIGZvcm0gZGF0YVxyXG5cdFx0JGxhc3RWQ2xpY2tlZCA9IG51bGw7XHJcblxyXG5cdC8qIEV2ZW50IEJpbmRpbmdzIC0gaGFzaGNoYW5nZSwgc3VibWl0LCBhbmQgY2xpY2sgKi9cclxuXHRmdW5jdGlvbiBmaW5kQ2xvc2VzdExpbmsoIGVsZSApXHR7XHJcblx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0Ly8gTG9vayBmb3IgdGhlIGNsb3Nlc3QgZWxlbWVudCB3aXRoIGEgbm9kZU5hbWUgb2YgXCJhXCIuXHJcblx0XHRcdC8vIE5vdGUgdGhhdCB3ZSBhcmUgY2hlY2tpbmcgaWYgd2UgaGF2ZSBhIHZhbGlkIG5vZGVOYW1lXHJcblx0XHRcdC8vIGJlZm9yZSBhdHRlbXB0aW5nIHRvIGFjY2VzcyBpdC4gVGhpcyBpcyBiZWNhdXNlIHRoZVxyXG5cdFx0XHQvLyBub2RlIHdlIGdldCBjYWxsZWQgd2l0aCBjb3VsZCBoYXZlIG9yaWdpbmF0ZWQgZnJvbSB3aXRoaW5cclxuXHRcdFx0Ly8gYW4gZW1iZWRkZWQgU1ZHIGRvY3VtZW50IHdoZXJlIHNvbWUgc3ltYm9sIGluc3RhbmNlIGVsZW1lbnRzXHJcblx0XHRcdC8vIGRvbid0IGhhdmUgbm9kZU5hbWUgZGVmaW5lZCBvbiB0aGVtLCBvciBzdHJpbmdzIGFyZSBvZiB0eXBlXHJcblx0XHRcdC8vIFNWR0FuaW1hdGVkU3RyaW5nLlxyXG5cdFx0XHRpZiAoICggdHlwZW9mIGVsZS5ub2RlTmFtZSA9PT0gXCJzdHJpbmdcIiApICYmIGVsZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFcIiApIHtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGUgPSBlbGUucGFyZW50Tm9kZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBlbGU7XHJcblx0fVxyXG5cclxuXHQkLm1vYmlsZS5sb2FkUGFnZSA9IGZ1bmN0aW9uKCB1cmwsIG9wdHMgKSB7XHJcblx0XHR2YXIgY29udGFpbmVyO1xyXG5cclxuXHRcdG9wdHMgPSBvcHRzIHx8IHt9O1xyXG5cdFx0Y29udGFpbmVyID0gKCBvcHRzLnBhZ2VDb250YWluZXIgfHwgJC5tb2JpbGUucGFnZUNvbnRhaW5lciApO1xyXG5cclxuXHRcdC8vIGNyZWF0ZSB0aGUgZGVmZXJyZWQgdGhhdCB3aWxsIGJlIHN1cHBsaWVkIHRvIGxvYWRQYWdlIGNhbGxlcnNcclxuXHRcdC8vIGFuZCByZXNvbHZlZCBieSB0aGUgY29udGVudCB3aWRnZXQncyBsb2FkIG1ldGhvZFxyXG5cdFx0b3B0cy5kZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0XHQvLyBQcmVmZXJyaW5nIHRvIGFsbG93IGV4Y2VwdGlvbnMgZm9yIHVuaW5pdGlhbGl6ZWQgb3B0cy5wYWdlQ29udGFpbmVyXHJcblx0XHQvLyB3aWRnZXRzIHNvIHdlIGtub3cgaWYgd2UgbmVlZCB0byBmb3JjZSBpbml0IGhlcmUgZm9yIHVzZXJzXHJcblx0XHRjb250YWluZXIucGFnZWNvbnRhaW5lciggXCJsb2FkXCIsIHVybCwgb3B0cyApO1xyXG5cclxuXHRcdC8vIHByb3ZpZGUgdGhlIGRlZmVycmVkXHJcblx0XHRyZXR1cm4gb3B0cy5kZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0fTtcclxuXHJcblx0Ly9kZWZpbmUgdmFycyBmb3IgaW50ZXJhbCB1c2VcclxuXHJcblx0LyogaW50ZXJuYWwgdXRpbGl0eSBmdW5jdGlvbnMgKi9cclxuXHJcblx0Ly8gTk9URSBJc3N1ZSAjNDk1MCBBbmRyb2lkIHBob25lZ2FwIGRvZXNuJ3QgbmF2aWdhdGUgYmFjayBwcm9wZXJseVxyXG5cdC8vICAgICAgd2hlbiBhIGZ1bGwgcGFnZSByZWZyZXNoIGhhcyB0YWtlbiBwbGFjZS4gSXQgYXBwZWFycyB0aGF0IGhhc2hjaGFuZ2VcclxuXHQvLyAgICAgIGFuZCByZXBsYWNlc3RhdGUgaGlzdG9yeSBhbHRlcmF0aW9ucyB3b3JrIGZpbmUgYnV0IHdlIG5lZWQgdG8gc3VwcG9ydFxyXG5cdC8vICAgICAgYm90aCBmb3JtcyBvZiBoaXN0b3J5IHRyYXZlcnNhbCBpbiBvdXIgY29kZSB0aGF0IHVzZXMgYmFja3dhcmQgaGlzdG9yeVxyXG5cdC8vICAgICAgbW92ZW1lbnRcclxuXHQkLm1vYmlsZS5iYWNrID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbmF2ID0gd2luZG93Lm5hdmlnYXRvcjtcclxuXHJcblx0XHQvLyBpZiB0aGUgc2V0dGluZyBpcyBvbiBhbmQgdGhlIG5hdmlnYXRvciBvYmplY3QgaXNcclxuXHRcdC8vIGF2YWlsYWJsZSB1c2UgdGhlIHBob25lZ2FwIG5hdmlnYXRpb24gY2FwYWJpbGl0eVxyXG5cdFx0aWYgKCB0aGlzLnBob25lZ2FwTmF2aWdhdGlvbkVuYWJsZWQgJiZcclxuXHRcdFx0bmF2ICYmXHJcblx0XHRcdG5hdi5hcHAgJiZcclxuXHRcdFx0bmF2LmFwcC5iYWNrSGlzdG9yeSApIHtcclxuXHRcdFx0bmF2LmFwcC5iYWNrSGlzdG9yeSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImJhY2tcIiApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIERpcmVjdCBmb2N1cyB0byB0aGUgcGFnZSB0aXRsZSwgb3Igb3RoZXJ3aXNlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50XHJcblx0JC5tb2JpbGUuZm9jdXNQYWdlID0gZnVuY3Rpb24gKCBwYWdlICkge1xyXG5cdFx0dmFyIGF1dG9mb2N1cyA9IHBhZ2UuZmluZCggXCJbYXV0b2ZvY3VzXVwiICksXHJcblx0XHRcdHBhZ2VUaXRsZSA9IHBhZ2UuZmluZCggXCIudWktdGl0bGU6ZXEoMClcIiApO1xyXG5cclxuXHRcdGlmICggYXV0b2ZvY3VzLmxlbmd0aCApIHtcclxuXHRcdFx0YXV0b2ZvY3VzLmZvY3VzKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHBhZ2VUaXRsZS5sZW5ndGggKSB7XHJcblx0XHRcdHBhZ2VUaXRsZS5mb2N1cygpO1xyXG5cdFx0fSBlbHNle1xyXG5cdFx0XHRwYWdlLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gTm8tb3AgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNpdGlvbiBkZWdyYWRhdGlvblxyXG5cdCQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uID0gJC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24gfHwgZnVuY3Rpb24oIHRyYW5zaXRpb24gKSB7XHJcblx0XHRyZXR1cm4gdHJhbnNpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvLyBFeHBvc2VkICQubW9iaWxlIG1ldGhvZHNcclxuXHJcblx0JC5tb2JpbGUuY2hhbmdlUGFnZSA9IGZ1bmN0aW9uKCB0bywgb3B0aW9ucyApIHtcclxuXHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lciggXCJjaGFuZ2VcIiwgdG8sIG9wdGlvbnMgKTtcclxuXHR9O1xyXG5cclxuXHQkLm1vYmlsZS5jaGFuZ2VQYWdlLmRlZmF1bHRzID0ge1xyXG5cdFx0dHJhbnNpdGlvbjogdW5kZWZpbmVkLFxyXG5cdFx0cmV2ZXJzZTogZmFsc2UsXHJcblx0XHRjaGFuZ2VIYXNoOiB0cnVlLFxyXG5cdFx0ZnJvbUhhc2hDaGFuZ2U6IGZhbHNlLFxyXG5cdFx0cm9sZTogdW5kZWZpbmVkLCAvLyBCeSBkZWZhdWx0IHdlIHJlbHkgb24gdGhlIHJvbGUgZGVmaW5lZCBieSB0aGUgQGRhdGEtcm9sZSBhdHRyaWJ1dGUuXHJcblx0XHRkdXBsaWNhdGVDYWNoZWRQYWdlOiB1bmRlZmluZWQsXHJcblx0XHRwYWdlQ29udGFpbmVyOiB1bmRlZmluZWQsXHJcblx0XHRzaG93TG9hZE1zZzogdHJ1ZSwgLy9sb2FkaW5nIG1lc3NhZ2Ugc2hvd3MgYnkgZGVmYXVsdCB3aGVuIHBhZ2VzIGFyZSBiZWluZyBmZXRjaGVkIGR1cmluZyBjaGFuZ2VQYWdlXHJcblx0XHRkYXRhVXJsOiB1bmRlZmluZWQsXHJcblx0XHRmcm9tUGFnZTogdW5kZWZpbmVkLFxyXG5cdFx0YWxsb3dTYW1lUGFnZVRyYW5zaXRpb246IGZhbHNlXHJcblx0fTtcclxuXHJcblx0JC5tb2JpbGUuX3JlZ2lzdGVySW50ZXJuYWxFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBnZXRBamF4Rm9ybURhdGEgPSBmdW5jdGlvbiggJGZvcm0sIGNhbGN1bGF0ZU9ubHkgKSB7XHJcblx0XHRcdHZhciB1cmwsIHJldCA9IHRydWUsIGZvcm1EYXRhLCB2Y2xpY2tlZE5hbWUsIG1ldGhvZDtcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuYWpheEVuYWJsZWQgfHxcclxuXHRcdFx0XHRcdC8vIHRlc3QgdGhhdCB0aGUgZm9ybSBpcywgaXRzZWxmLCBhamF4IGZhbHNlXHJcblx0XHRcdFx0XHQkZm9ybS5pcyggXCI6anFtRGF0YShhamF4PSdmYWxzZScpXCIgKSB8fFxyXG5cdFx0XHRcdFx0Ly8gdGVzdCB0aGF0ICQubW9iaWxlLmlnbm9yZUNvbnRlbnRFbmFibGVkIGlzIHNldCBhbmRcclxuXHRcdFx0XHRcdC8vIHRoZSBmb3JtIG9yIG9uZSBvZiBpdCdzIHBhcmVudHMgaXMgYWpheD1mYWxzZVxyXG5cdFx0XHRcdFx0ISRmb3JtLmpxbUhpamFja2FibGUoKS5sZW5ndGggfHxcclxuXHRcdFx0XHRcdCRmb3JtLmF0dHIoIFwidGFyZ2V0XCIgKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHVybCA9ICggJGxhc3RWQ2xpY2tlZCAmJiAkbGFzdFZDbGlja2VkLmF0dHIoIFwiZm9ybWFjdGlvblwiICkgKSB8fFxyXG5cdFx0XHRcdCRmb3JtLmF0dHIoIFwiYWN0aW9uXCIgKTtcclxuXHRcdFx0bWV0aG9kID0gKCAkZm9ybS5hdHRyKCBcIm1ldGhvZFwiICkgfHwgXCJnZXRcIiApLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0XHQvLyBJZiBubyBhY3Rpb24gaXMgc3BlY2lmaWVkLCBicm93c2VycyBkZWZhdWx0IHRvIHVzaW5nIHRoZVxyXG5cdFx0XHQvLyBVUkwgb2YgdGhlIGRvY3VtZW50IGNvbnRhaW5pbmcgdGhlIGZvcm0uIFNpbmNlIHdlIGR5bmFtaWNhbGx5XHJcblx0XHRcdC8vIHB1bGwgaW4gcGFnZXMgZnJvbSBleHRlcm5hbCBkb2N1bWVudHMsIHRoZSBmb3JtIHNob3VsZCBzdWJtaXRcclxuXHRcdFx0Ly8gdG8gdGhlIFVSTCBmb3IgdGhlIHNvdXJjZSBkb2N1bWVudCBvZiB0aGUgcGFnZSBjb250YWluaW5nXHJcblx0XHRcdC8vIHRoZSBmb3JtLlxyXG5cdFx0XHRpZiAoICF1cmwgKSB7XHJcblx0XHRcdFx0Ly8gR2V0IHRoZSBAZGF0YS11cmwgZm9yIHRoZSBwYWdlIGNvbnRhaW5pbmcgdGhlIGZvcm0uXHJcblx0XHRcdFx0dXJsID0gJC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoICRmb3JtICk7XHJcblxyXG5cdFx0XHRcdC8vIE5PVEU6IElmIHRoZSBtZXRob2QgaXMgXCJnZXRcIiwgd2UgbmVlZCB0byBzdHJpcCBvZmYgdGhlIHF1ZXJ5IHN0cmluZ1xyXG5cdFx0XHRcdC8vIGJlY2F1c2UgaXQgd2lsbCBnZXQgcmVwbGFjZWQgd2l0aCB0aGUgbmV3IGZvcm0gZGF0YS4gU2VlIGlzc3VlICM1NzEwLlxyXG5cdFx0XHRcdGlmICggbWV0aG9kID09PSBcImdldFwiICkge1xyXG5cdFx0XHRcdFx0dXJsID0gJC5tb2JpbGUucGF0aC5wYXJzZVVybCggdXJsICkuaHJlZk5vU2VhcmNoO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCB1cmwgPT09ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggKSB7XHJcblx0XHRcdFx0XHQvLyBUaGUgdXJsIHdlIGdvdCBiYWNrIG1hdGNoZXMgdGhlIGRvY3VtZW50IGJhc2UsXHJcblx0XHRcdFx0XHQvLyB3aGljaCBtZWFucyB0aGUgcGFnZSBtdXN0IGJlIGFuIGludGVybmFsL2VtYmVkZGVkIHBhZ2UsXHJcblx0XHRcdFx0XHQvLyBzbyBkZWZhdWx0IHRvIHVzaW5nIHRoZSBhY3R1YWwgZG9jdW1lbnQgdXJsIGFzIGEgYnJvd3NlclxyXG5cdFx0XHRcdFx0Ly8gd291bGQuXHJcblx0XHRcdFx0XHR1cmwgPSBkb2N1bWVudFVybC5ocmVmTm9TZWFyY2g7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR1cmwgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggIHVybCwgJC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoICRmb3JtICkgKTtcclxuXHJcblx0XHRcdGlmICggKCAkLm1vYmlsZS5wYXRoLmlzRXh0ZXJuYWwoIHVybCApICYmICEkLm1vYmlsZS5wYXRoLmlzUGVybWl0dGVkQ3Jvc3NEb21haW5SZXF1ZXN0KCBkb2N1bWVudFVybCwgdXJsICkgKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggIWNhbGN1bGF0ZU9ubHkgKSB7XHJcblx0XHRcdFx0Zm9ybURhdGEgPSAkZm9ybS5zZXJpYWxpemVBcnJheSgpO1xyXG5cclxuXHRcdFx0XHRpZiAoICRsYXN0VkNsaWNrZWQgJiYgJGxhc3RWQ2xpY2tlZFsgMCBdLmZvcm0gPT09ICRmb3JtWyAwIF0gKSB7XHJcblx0XHRcdFx0XHR2Y2xpY2tlZE5hbWUgPSAkbGFzdFZDbGlja2VkLmF0dHIoIFwibmFtZVwiICk7XHJcblx0XHRcdFx0XHRpZiAoIHZjbGlja2VkTmFtZSApIHtcclxuXHRcdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBsYXN0IGNsaWNrZWQgZWxlbWVudCBpcyBpbmNsdWRlZCBpbiB0aGUgZm9ybVxyXG5cdFx0XHRcdFx0XHQkLmVhY2goIGZvcm1EYXRhLCBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIHZhbHVlLm5hbWUgPT09IHZjbGlja2VkTmFtZSApIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVuc2V0IHZjbGlja2VkTmFtZSAtIHdlJ3ZlIGZvdW5kIGl0IGluIHRoZSBzZXJpYWxpemVkIGRhdGEgYWxyZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0dmNsaWNrZWROYW1lID0gXCJcIjtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRpZiAoIHZjbGlja2VkTmFtZSApIHtcclxuXHRcdFx0XHRcdFx0XHRmb3JtRGF0YS5wdXNoKCB7IG5hbWU6IHZjbGlja2VkTmFtZSwgdmFsdWU6ICRsYXN0VkNsaWNrZWQuYXR0ciggXCJ2YWx1ZVwiICkgfSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXQgPSB7XHJcblx0XHRcdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0XHRcdFx0dHlwZTpcdFx0bWV0aG9kLFxyXG5cdFx0XHRcdFx0XHRkYXRhOlx0XHQkLnBhcmFtKCBmb3JtRGF0YSApLFxyXG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uOlx0JGZvcm0uanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKSxcclxuXHRcdFx0XHRcdFx0cmV2ZXJzZTpcdCRmb3JtLmpxbURhdGEoIFwiZGlyZWN0aW9uXCIgKSA9PT0gXCJyZXZlcnNlXCIsXHJcblx0XHRcdFx0XHRcdHJlbG9hZFBhZ2U6XHR0cnVlXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHJldDtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly9iaW5kIHRvIGZvcm0gc3VibWl0IGV2ZW50cywgaGFuZGxlIHdpdGggQWpheFxyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuZGVsZWdhdGUoIFwiZm9ybVwiLCBcInN1Ym1pdFwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBmb3JtRGF0YTtcclxuXHJcblx0XHRcdGlmICggIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdGZvcm1EYXRhID0gZ2V0QWpheEZvcm1EYXRhKCAkKCB0aGlzICkgKTtcclxuXHRcdFx0XHRpZiAoIGZvcm1EYXRhICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggZm9ybURhdGEudXJsLCBmb3JtRGF0YS5vcHRpb25zICk7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly9hZGQgYWN0aXZlIHN0YXRlIG9uIHZjbGlja1xyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuYmluZCggXCJ2Y2xpY2tcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgJGJ0biwgYnRuRWxzLCB0YXJnZXQgPSBldmVudC50YXJnZXQsIG5lZWRDbG9zZXN0ID0gZmFsc2U7XHJcblx0XHRcdC8vIGlmIHRoaXMgaXNuJ3QgYSBsZWZ0IGNsaWNrIHdlIGRvbid0IGNhcmUuIEl0cyBpbXBvcnRhbnQgdG8gbm90ZVxyXG5cdFx0XHQvLyB0aGF0IHdoZW4gdGhlIHZpcnR1YWwgZXZlbnQgaXMgZ2VuZXJhdGVkIGl0IHdpbGwgY3JlYXRlIHRoZSB3aGljaCBhdHRyXHJcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPiAxIHx8ICEkLm1vYmlsZS5saW5rQmluZGluZ0VuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZWNvcmQgdGhhdCB0aGlzIGVsZW1lbnQgd2FzIGNsaWNrZWQsIGluIGNhc2Ugd2UgbmVlZCBpdCBmb3IgY29ycmVjdFxyXG5cdFx0XHQvLyBmb3JtIHN1Ym1pc3Npb24gZHVyaW5nIHRoZSBcInN1Ym1pdFwiIGhhbmRsZXIgYWJvdmVcclxuXHRcdFx0JGxhc3RWQ2xpY2tlZCA9ICQoIHRhcmdldCApO1xyXG5cclxuXHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYSB0YXJnZXQgZWxlbWVudCB0byB3aGljaCB0aGUgYWN0aXZlIGNsYXNzIHdpbGwgYmUgYXBwbGllZFxyXG5cdFx0XHRpZiAoICQuZGF0YSggdGFyZ2V0LCBcIm1vYmlsZS1idXR0b25cIiApICkge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBmb3JtIHdpbGwgbm90IGJlIHN1Ym1pdHRlZCB2aWEgQUpBWCwgZG8gbm90IGFkZCBhY3RpdmUgY2xhc3NcclxuXHRcdFx0XHRpZiAoICFnZXRBamF4Rm9ybURhdGEoICQoIHRhcmdldCApLmNsb3Nlc3QoIFwiZm9ybVwiICksIHRydWUgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gV2Ugd2lsbCBhcHBseSB0aGUgYWN0aXZlIHN0YXRlIHRvIHRoaXMgYnV0dG9uIHdpZGdldCAtIHRoZSBwYXJlbnRcclxuXHRcdFx0XHQvLyBvZiB0aGUgaW5wdXQgdGhhdCB3YXMgY2xpY2tlZCB3aWxsIGhhdmUgdGhlIGFzc29jaWF0ZWQgZGF0YVxyXG5cdFx0XHRcdGlmICggdGFyZ2V0LnBhcmVudE5vZGUgKSB7XHJcblx0XHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGFyZ2V0ID0gZmluZENsb3Nlc3RMaW5rKCB0YXJnZXQgKTtcclxuXHRcdFx0XHRpZiAoICEoIHRhcmdldCAmJiAkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKCB0YXJnZXQuZ2V0QXR0cmlidXRlKCBcImhyZWZcIiApIHx8IFwiI1wiICkuaGFzaCAhPT0gXCIjXCIgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gdGVhY2ggJC5tb2JpbGUuaGlqYWNrYWJsZSB0byBvcGVyYXRlIG9uIHJhdyBkb20gZWxlbWVudHMgc28gdGhlXHJcblx0XHRcdFx0Ly8gbGluayB3cmFwcGluZyBjYW4gYmUgYXZvaWRlZFxyXG5cdFx0XHRcdGlmICggISQoIHRhcmdldCApLmpxbUhpamFja2FibGUoKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBdm9pZCBjYWxsaW5nIC5jbG9zZXN0IGJ5IHVzaW5nIHRoZSBkYXRhIHNldCBkdXJpbmcgLmJ1dHRvbk1hcmt1cCgpXHJcblx0XHRcdC8vIExpc3QgaXRlbXMgaGF2ZSB0aGUgYnV0dG9uIGRhdGEgaW4gdGhlIHBhcmVudCBvZiB0aGUgZWxlbWVudCBjbGlja2VkXHJcblx0XHRcdGlmICggISF+dGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCBcInVpLWxpbmstaW5oZXJpdFwiICkgKSB7XHJcblx0XHRcdFx0aWYgKCB0YXJnZXQucGFyZW50Tm9kZSApIHtcclxuXHRcdFx0XHRcdGJ0bkVscyA9ICQuZGF0YSggdGFyZ2V0LnBhcmVudE5vZGUsIFwiYnV0dG9uRWxlbWVudHNcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBsb29rIGZvciB0aGUgZGF0YSBvbiB0aGUgdGFyZ2V0IGl0c2VsZlxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGJ0bkVscyA9ICQuZGF0YSggdGFyZ2V0LCBcImJ1dHRvbkVsZW1lbnRzXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBJZiBmb3VuZCwgZ3JhYiB0aGUgYnV0dG9uJ3Mgb3V0ZXIgZWxlbWVudFxyXG5cdFx0XHRpZiAoIGJ0bkVscyApIHtcclxuXHRcdFx0XHR0YXJnZXQgPSBidG5FbHMub3V0ZXI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmVlZENsb3Nlc3QgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkYnRuID0gJCggdGFyZ2V0ICk7XHJcblx0XHRcdC8vIElmIHRoZSBvdXRlciBlbGVtZW50IHdhc24ndCBmb3VuZCBieSB0aGUgb3VyIGhldXJpc3RpY3MsIHVzZSAuY2xvc2VzdCgpXHJcblx0XHRcdGlmICggbmVlZENsb3Nlc3QgKSB7XHJcblx0XHRcdFx0JGJ0biA9ICRidG4uY2xvc2VzdCggXCIudWktYnRuXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAkYnRuLmxlbmd0aCA+IDAgJiZcclxuXHRcdFx0XHQhKCAkYnRuLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgfHxcclxuXHJcblx0XHRcdFx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIGFmdGVyIDEuNC4wIHJlbGVhc2VcclxuXHRcdFx0XHRcdC8vIG9ubHkgdWktc3RhdGUtZGlzYWJsZWQgc2hvdWxkIGJlIHByZXNlbnQgdGhlcmVhZnRlclxyXG5cdFx0XHRcdFx0JGJ0bi5oYXNDbGFzcyggXCJ1aS1kaXNhYmxlZFwiICkgKSApICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcyggdHJ1ZSApO1xyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rID0gJGJ0bjtcclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluay5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gY2xpY2sgcm91dGluZyAtIGRpcmVjdCB0byBIVFRQIG9yIEFqYXgsIGFjY29yZGluZ2x5XHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5iaW5kKCBcImNsaWNrXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUubGlua0JpbmRpbmdFbmFibGVkIHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGxpbmsgPSBmaW5kQ2xvc2VzdExpbmsoIGV2ZW50LnRhcmdldCApLFxyXG5cdFx0XHRcdCRsaW5rID0gJCggbGluayApLFxyXG5cclxuXHRcdFx0XHQvL3JlbW92ZSBhY3RpdmUgbGluayBjbGFzcyBpZiBleHRlcm5hbCAodGhlbiBpdCB3b24ndCBiZSB0aGVyZSBpZiB5b3UgY29tZSBiYWNrKVxyXG5cdFx0XHRcdGh0dHBDbGVhbnVwID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgJC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCB0cnVlICk7IH0sIDIwMCApO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0YmFzZVVybCwgaHJlZixcclxuXHRcdFx0XHR1c2VEZWZhdWx0VXJsSGFuZGxpbmcsIGlzRXh0ZXJuYWwsXHJcblx0XHRcdFx0dHJhbnNpdGlvbiwgcmV2ZXJzZSwgcm9sZTtcclxuXHJcblx0XHRcdC8vIElmIGEgYnV0dG9uIHdhcyBjbGlja2VkLCBjbGVhbiB1cCB0aGUgYWN0aXZlIGNsYXNzIGFkZGVkIGJ5IHZjbGljayBhYm92ZVxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rICYmXHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmtbIDAgXSA9PT0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUgKSB7XHJcblx0XHRcdFx0aHR0cENsZWFudXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm8gbGluayBhc3NvY2lhdGVkIHdpdGggdGhlIGNsaWNrIG9yIGl0cyBub3QgYSBsZWZ0XHJcblx0XHRcdC8vIGNsaWNrIHdlIHdhbnQgdG8gaWdub3JlIHRoZSBjbGlja1xyXG5cdFx0XHQvLyBUT0RPIHRlYWNoICQubW9iaWxlLmhpamFja2FibGUgdG8gb3BlcmF0ZSBvbiByYXcgZG9tIGVsZW1lbnRzIHNvIHRoZSBsaW5rIHdyYXBwaW5nXHJcblx0XHRcdC8vIGNhbiBiZSBhdm9pZGVkXHJcblx0XHRcdGlmICggIWxpbmsgfHwgZXZlbnQud2hpY2ggPiAxIHx8ICEkbGluay5qcW1IaWphY2thYmxlKCkubGVuZ3RoICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9pZiB0aGVyZSdzIGEgZGF0YS1yZWw9YmFjayBhdHRyLCBnbyBiYWNrIGluIGhpc3RvcnlcclxuXHRcdFx0aWYgKCAkbGluay5pcyggXCI6anFtRGF0YShyZWw9J2JhY2snKVwiICkgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuYmFjaygpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YmFzZVVybCA9ICQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCAkbGluayApO1xyXG5cclxuXHRcdFx0Ly9nZXQgaHJlZiwgaWYgZGVmaW5lZCwgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gZW1wdHkgaGFzaFxyXG5cdFx0XHRocmVmID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoICRsaW5rLmF0dHIoIFwiaHJlZlwiICkgfHwgXCIjXCIsIGJhc2VVcmwgKTtcclxuXHJcblx0XHRcdC8vaWYgYWpheCBpcyBkaXNhYmxlZCwgZXhpdCBlYXJseVxyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5hamF4RW5hYmxlZCAmJiAhJC5tb2JpbGUucGF0aC5pc0VtYmVkZGVkUGFnZSggaHJlZiApICkge1xyXG5cdFx0XHRcdGh0dHBDbGVhbnVwKCk7XHJcblx0XHRcdFx0Ly91c2UgZGVmYXVsdCBjbGljayBoYW5kbGluZ1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gWFhYX2pibGFzOiBJZGVhbGx5IGxpbmtzIHRvIGFwcGxpY2F0aW9uIHBhZ2VzIHNob3VsZCBiZSBzcGVjaWZpZWQgYXNcclxuXHRcdFx0Ly8gICAgICAgICAgICBhbiB1cmwgdG8gdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHdpdGggYSBoYXNoIHRoYXQgaXMgZWl0aGVyXHJcblx0XHRcdC8vICAgICAgICAgICAgdGhlIHNpdGUgcmVsYXRpdmUgcGF0aCBvciBpZCB0byB0aGUgcGFnZS4gQnV0IHNvbWUgb2YgdGhlXHJcblx0XHRcdC8vICAgICAgICAgICAgaW50ZXJuYWwgY29kZSB0aGF0IGR5bmFtaWNhbGx5IGdlbmVyYXRlcyBzdWItcGFnZXMgZm9yIG5lc3RlZFxyXG5cdFx0XHQvLyAgICAgICAgICAgIGxpc3RzIGFuZCBzZWxlY3QgZGlhbG9ncywganVzdCB3cml0ZSBhIGhhc2ggaW4gdGhlIGxpbmsgdGhleVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGNyZWF0ZS4gVGhpcyBtZWFucyB0aGUgYWN0dWFsIFVSTCBwYXRoIGlzIGJhc2VkIG9uIHdoYXRldmVyXHJcblx0XHRcdC8vICAgICAgICAgICAgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGJhc2UgdGFnIGlzIGF0IHRoZSB0aW1lIHRoaXMgY29kZVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGlzIGNhbGxlZC5cclxuXHRcdFx0aWYgKCBocmVmLnNlYXJjaCggXCIjXCIgKSAhPT0gLTEgJiZcclxuXHRcdFx0XHQhKCAkLm1vYmlsZS5wYXRoLmlzRXh0ZXJuYWwoIGhyZWYgKSAmJiAkLm1vYmlsZS5wYXRoLmlzQWJzb2x1dGVVcmwoIGhyZWYgKSApICkge1xyXG5cclxuXHRcdFx0XHRocmVmID0gaHJlZi5yZXBsYWNlKCAvW14jXSojLywgXCJcIiApO1xyXG5cdFx0XHRcdGlmICggIWhyZWYgKSB7XHJcblx0XHRcdFx0XHQvL2xpbmsgd2FzIGFuIGVtcHR5IGhhc2ggbWVhbnQgcHVyZWx5XHJcblx0XHRcdFx0XHQvL2ZvciBpbnRlcmFjdGlvbiwgc28gd2UgaWdub3JlIGl0LlxyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCAkLm1vYmlsZS5wYXRoLmlzUGF0aCggaHJlZiApICkge1xyXG5cdFx0XHRcdFx0Ly93ZSBoYXZlIGFwYXRoIHNvIG1ha2UgaXQgdGhlIGhyZWYgd2Ugd2FudCB0byBsb2FkLlxyXG5cdFx0XHRcdFx0aHJlZiA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBocmVmLCBiYXNlVXJsICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vd2UgaGF2ZSBhIHNpbXBsZSBpZCBzbyB1c2UgdGhlIGRvY3VtZW50VXJsIGFzIGl0cyBiYXNlLlxyXG5cdFx0XHRcdFx0aHJlZiA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBcIiNcIiArIGhyZWYsIGRvY3VtZW50VXJsLmhyZWZOb0hhc2ggKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNob3VsZCB3ZSBoYW5kbGUgdGhpcyBsaW5rLCBvciBsZXQgdGhlIGJyb3dzZXIgZGVhbCB3aXRoIGl0P1xyXG5cdFx0XHR1c2VEZWZhdWx0VXJsSGFuZGxpbmcgPSAkbGluay5pcyggXCJbcmVsPSdleHRlcm5hbCddXCIgKSB8fCAkbGluay5pcyggXCI6anFtRGF0YShhamF4PSdmYWxzZScpXCIgKSB8fCAkbGluay5pcyggXCJbdGFyZ2V0XVwiICk7XHJcblxyXG5cdFx0XHQvLyBTb21lIGVtYmVkZGVkIGJyb3dzZXJzLCBsaWtlIHRoZSB3ZWIgdmlldyBpbiBQaG9uZSBHYXAsIGFsbG93IGNyb3NzLWRvbWFpbiBYSFJcclxuXHRcdFx0Ly8gcmVxdWVzdHMgaWYgdGhlIGRvY3VtZW50IGRvaW5nIHRoZSByZXF1ZXN0IHdhcyBsb2FkZWQgdmlhIHRoZSBmaWxlOi8vIHByb3RvY29sLlxyXG5cdFx0XHQvLyBUaGlzIGlzIHVzdWFsbHkgdG8gYWxsb3cgdGhlIGFwcGxpY2F0aW9uIHRvIFwicGhvbmUgaG9tZVwiIGFuZCBmZXRjaCBhcHAgc3BlY2lmaWNcclxuXHRcdFx0Ly8gZGF0YS4gV2Ugbm9ybWFsbHkgbGV0IHRoZSBicm93c2VyIGhhbmRsZSBleHRlcm5hbC9jcm9zcy1kb21haW4gdXJscywgYnV0IGlmIHRoZVxyXG5cdFx0XHQvLyBhbGxvd0Nyb3NzRG9tYWluUGFnZXMgb3B0aW9uIGlzIHRydWUsIHdlIHdpbGwgYWxsb3cgY3Jvc3MtZG9tYWluIGh0dHAvaHR0cHNcclxuXHRcdFx0Ly8gcmVxdWVzdHMgdG8gZ28gdGhyb3VnaCBvdXIgcGFnZSBsb2FkaW5nIGxvZ2ljLlxyXG5cclxuXHRcdFx0Ly9jaGVjayBmb3IgcHJvdG9jb2wgb3IgcmVsIGFuZCBpdHMgbm90IGFuIGVtYmVkZGVkIHBhZ2VcclxuXHRcdFx0Ly9UT0RPIG92ZXJsYXAgaW4gbG9naWMgZnJvbSBpc0V4dGVybmFsLCByZWw9ZXh0ZXJuYWwgY2hlY2sgc2hvdWxkIGJlXHJcblx0XHRcdC8vICAgICBtb3ZlZCBpbnRvIG1vcmUgY29tcHJlaGVuc2l2ZSBpc0V4dGVybmFsTGlua1xyXG5cdFx0XHRpc0V4dGVybmFsID0gdXNlRGVmYXVsdFVybEhhbmRsaW5nIHx8ICggJC5tb2JpbGUucGF0aC5pc0V4dGVybmFsKCBocmVmICkgJiYgISQubW9iaWxlLnBhdGguaXNQZXJtaXR0ZWRDcm9zc0RvbWFpblJlcXVlc3QoIGRvY3VtZW50VXJsLCBocmVmICkgKTtcclxuXHJcblx0XHRcdGlmICggaXNFeHRlcm5hbCApIHtcclxuXHRcdFx0XHRodHRwQ2xlYW51cCgpO1xyXG5cdFx0XHRcdC8vdXNlIGRlZmF1bHQgY2xpY2sgaGFuZGxpbmdcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vdXNlIGFqYXhcclxuXHRcdFx0dHJhbnNpdGlvbiA9ICRsaW5rLmpxbURhdGEoIFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdHJldmVyc2UgPSAkbGluay5qcW1EYXRhKCBcImRpcmVjdGlvblwiICkgPT09IFwicmV2ZXJzZVwiIHx8XHJcblx0XHRcdFx0XHRcdC8vIGRlcHJlY2F0ZWQgLSByZW1vdmUgYnkgMS4wXHJcblx0XHRcdFx0XHRcdCRsaW5rLmpxbURhdGEoIFwiYmFja1wiICk7XHJcblxyXG5cdFx0XHQvL3RoaXMgbWF5IG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpYyBhcyB3ZSB1c2UgZGF0YS1yZWwgbW9yZVxyXG5cdFx0XHRyb2xlID0gJGxpbmsuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbFwiICkgfHwgdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggaHJlZiwgeyB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLCByZXZlcnNlOiByZXZlcnNlLCByb2xlOiByb2xlLCBsaW5rOiAkbGluayB9ICk7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvL3ByZWZldGNoIHBhZ2VzIHdoZW4gYW5jaG9ycyB3aXRoIGRhdGEtcHJlZmV0Y2ggYXJlIGVuY291bnRlcmVkXHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5kZWxlZ2F0ZSggXCIudWktcGFnZVwiLCBcInBhZ2VzaG93LnByZWZldGNoXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdXJscyA9IFtdO1xyXG5cdFx0XHQkKCB0aGlzICkuZmluZCggXCJhOmpxbURhdGEocHJlZmV0Y2gpXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciAkbGluayA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdHVybCA9ICRsaW5rLmF0dHIoIFwiaHJlZlwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggdXJsICYmICQuaW5BcnJheSggdXJsLCB1cmxzICkgPT09IC0xICkge1xyXG5cdFx0XHRcdFx0dXJscy5wdXNoKCB1cmwgKTtcclxuXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5sb2FkUGFnZSggdXJsLCB7IHJvbGU6ICRsaW5rLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWxcIiApLHByZWZldGNoOiB0cnVlIH0gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVE9ETyBlbnN1cmUgdGhhdCB0aGUgbmF2aWdhdGUgYmluZGluZyBpbiB0aGUgY29udGVudCB3aWRnZXQgaGFwcGVucyBhdCB0aGUgcmlnaHQgdGltZVxyXG5cdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCk7XHJcblxyXG5cdFx0Ly9zZXQgcGFnZSBtaW4taGVpZ2h0cyB0byBiZSBkZXZpY2Ugc3BlY2lmaWNcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmJpbmQoIFwicGFnZXNob3dcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHQvLyBXZSBuZWVkIHRvIHdhaXQgZm9yIHdpbmRvdy5sb2FkIHRvIG1ha2Ugc3VyZSB0aGF0IHN0eWxlcyBoYXZlIGFscmVhZHkgYmVlbiByZW5kZXJlZCxcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIGhlaWdodHMgb2YgZXh0ZXJuYWwgdG9vbGJhcnMgd2lsbCBoYXZlIHRoZSB3cm9uZyB2YWx1ZVxyXG5cdFx0XHRpZiAoIGxvYWREZWZlcnJlZCApIHtcclxuXHRcdFx0XHRsb2FkRGVmZXJyZWQuZG9uZSggJC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0JC5tb2JpbGUud2luZG93LmJpbmQoIFwidGhyb3R0bGVkcmVzaXplXCIsICQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCApO1xyXG5cclxuXHR9Oy8vbmF2cmVhZHlEZWZlcnJlZCBkb25lIGNhbGxiYWNrXHJcblxyXG5cdCQoIGZ1bmN0aW9uKCkgeyBkb21yZWFkeURlZmVycmVkLnJlc29sdmUoKTsgfSApO1xyXG5cclxuXHQvLyBBY2NvdW50IGZvciB0aGUgcG9zc2liaWxpdHkgdGhhdCB0aGUgbG9hZCBldmVudCBoYXMgYWxyZWFkeSBmaXJlZFxyXG5cdGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiICkge1xyXG5cdFx0cGFnZUlzRnVsbHlMb2FkZWQoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0JC5tb2JpbGUud2luZG93LmxvYWQoIHBhZ2VJc0Z1bGx5TG9hZGVkICk7XHJcblx0fVxyXG5cclxuXHQkLndoZW4oIGRvbXJlYWR5RGVmZXJyZWQsICQubW9iaWxlLm5hdnJlYWR5RGVmZXJyZWQgKS5kb25lKCBmdW5jdGlvbigpIHsgJC5tb2JpbGUuX3JlZ2lzdGVySW50ZXJuYWxFdmVudHMoKTsgfSApO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcblx0Ly8gVE9ETyByZW1vdmUgZGlyZWN0IHJlZmVyZW5jZXMgdG8gJC5tb2JpbGUgYW5kIHByb3BlcnRpZXMsIHdlIHNob3VsZFxyXG5cdC8vICAgICAgZmF2b3IgaW5qZWN0aW9uIHdpdGggcGFyYW1zIHRvIHRoZSBjb25zdHJ1Y3RvclxyXG5cdCQubW9iaWxlLlRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuVHJhbnNpdGlvbi5wcm90b3R5cGUsIHtcclxuXHRcdHRvUHJlQ2xhc3M6IFwiIHVpLXBhZ2UtcHJlLWluXCIsXHJcblxyXG5cdFx0aW5pdDogZnVuY3Rpb24oIG5hbWUsIHJldmVyc2UsICR0bywgJGZyb20gKSB7XHJcblx0XHRcdCQuZXh0ZW5kKHRoaXMsIHtcclxuXHRcdFx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0XHRcdHJldmVyc2U6IHJldmVyc2UsXHJcblx0XHRcdFx0JHRvOiAkdG8sXHJcblx0XHRcdFx0JGZyb206ICRmcm9tLFxyXG5cdFx0XHRcdGRlZmVycmVkOiBuZXcgJC5EZWZlcnJlZCgpXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbGVhbkZyb206IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLiRmcm9tXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKyBcIiBvdXQgaW4gcmV2ZXJzZSBcIiArIHRoaXMubmFtZSApXHJcblx0XHRcdFx0LmhlaWdodCggXCJcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBOT1RFIG92ZXJyaWRkZW4gYnkgY2hpbGQgb2JqZWN0IHByb3RvdHlwZXMsIG5vb3AnZCBoZXJlIGFzIGRlZmF1bHRzXHJcblx0XHRiZWZvcmVEb25lSW46IGZ1bmN0aW9uKCkge30sXHJcblx0XHRiZWZvcmVEb25lT3V0OiBmdW5jdGlvbigpIHt9LFxyXG5cdFx0YmVmb3JlU3RhcnRPdXQ6IGZ1bmN0aW9uKCkge30sXHJcblxyXG5cdFx0ZG9uZUluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVEb25lSW4oKTtcclxuXHJcblx0XHRcdHRoaXMuJHRvLnJlbW92ZUNsYXNzKCBcIm91dCBpbiByZXZlcnNlIFwiICsgdGhpcy5uYW1lICkuaGVpZ2h0KCBcIlwiICk7XHJcblxyXG5cdFx0XHR0aGlzLnRvZ2dsZVZpZXdwb3J0Q2xhc3MoKTtcclxuXHJcblx0XHRcdC8vIEluIHNvbWUgYnJvd3NlcnMgKGlPUzUpLCAzRCB0cmFuc2l0aW9ucyBibG9jayB0aGUgYWJpbGl0eSB0byBzY3JvbGwgdG8gdGhlIGRlc2lyZWQgbG9jYXRpb24gZHVyaW5nIHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gVGhpcyBlbnN1cmVzIHdlIGp1bXAgdG8gdGhhdCBzcG90IGFmdGVyIHRoZSBmYWN0LCBpZiB3ZSBhcmVuJ3QgdGhlcmUgYWxyZWFkeS5cclxuXHRcdFx0aWYgKCAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCkgIT09IHRoaXMudG9TY3JvbGwgKSB7XHJcblx0XHRcdFx0dGhpcy5zY3JvbGxQYWdlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhdGhpcy5zZXF1ZW50aWFsICkge1xyXG5cdFx0XHRcdHRoaXMuJHRvLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmRlZmVycmVkLnJlc29sdmUoIHRoaXMubmFtZSwgdGhpcy5yZXZlcnNlLCB0aGlzLiR0bywgdGhpcy4kZnJvbSwgdHJ1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkb25lT3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHByZXZlbnRGb2N1cyApIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVEb25lT3V0KCk7XHJcblx0XHRcdHRoaXMuc3RhcnRJbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHByZXZlbnRGb2N1cyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWRlSW46IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcclxuXHRcdFx0Ly8gUHJldmVudCBmbGlja2VyaW5nIGluIHBob25lZ2FwIGNvbnRhaW5lcjogc2VlIGNvbW1lbnRzIGF0ICM0MDI0IHJlZ2FyZGluZyBpT1NcclxuXHRcdFx0dGhpcy4kdG8uY3NzKCBcInotaW5kZXhcIiwgLTEwICk7XHJcblx0XHRcdGNhbGxiYWNrLmNhbGwoIHRoaXMgKTtcclxuXHRcdFx0dGhpcy4kdG8uY3NzKCBcInotaW5kZXhcIiwgXCJcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzY3JvbGxQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gQnkgdXNpbmcgc2Nyb2xsVG8gaW5zdGVhZCBvZiBzaWxlbnRTY3JvbGwsIHdlIGNhbiBrZWVwIHRoaW5ncyBiZXR0ZXIgaW4gb3JkZXJcclxuXHRcdFx0Ly8gSnVzdCB0byBiZSBwcmVjYXV0aW9zLCBkaXNhYmxlIHNjcm9sbHN0YXJ0IGxpc3RlbmluZyBsaWtlIHNpbGVudFNjcm9sbCB3b3VsZFxyXG5cdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHQvL2lmIHdlIGFyZSBoaWRpbmcgdGhlIHVybCBiYXIgb3IgdGhlIHBhZ2Ugd2FzIHByZXZpb3VzbHkgc2Nyb2xsZWQgc2Nyb2xsIHRvIGhpZGUgb3IgcmV0dXJuIHRvIHBvc2l0aW9uXHJcblx0XHRcdGlmICggJC5tb2JpbGUuaGlkZVVybEJhciB8fCB0aGlzLnRvU2Nyb2xsICE9PSAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbCApIHtcclxuXHRcdFx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIHRoaXMudG9TY3JvbGwgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcmVlbmFibGUgc2Nyb2xsc3RhcnQgbGlzdGVuaW5nIGxpa2Ugc2lsZW50U2Nyb2xsIHdvdWxkXHJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fSwgMTUwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0YXJ0SW46IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgcHJldmVudEZvY3VzICkge1xyXG5cdFx0XHR0aGlzLmhpZGVJbihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLiR0by5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICsgdGhpcy50b1ByZUNsYXNzICk7XHJcblxyXG5cdFx0XHRcdC8vIFNlbmQgZm9jdXMgdG8gcGFnZSBhcyBpdCBpcyBub3cgZGlzcGxheTogYmxvY2tcclxuXHRcdFx0XHRpZiAoICFwcmV2ZW50Rm9jdXMgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5mb2N1c1BhZ2UoIHRoaXMuJHRvICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBTZXQgdG8gcGFnZSBoZWlnaHRcclxuXHRcdFx0XHR0aGlzLiR0by5oZWlnaHQoIHNjcmVlbkhlaWdodCArIHRoaXMudG9TY3JvbGwgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICFub25lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuJHRvXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLnRvUHJlQ2xhc3MgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5uYW1lICsgXCIgaW4gXCIgKyByZXZlcnNlQ2xhc3MgKTtcclxuXHJcblx0XHRcdGlmICggIW5vbmUgKSB7XHJcblx0XHRcdFx0dGhpcy4kdG8uYW5pbWF0aW9uQ29tcGxldGUoICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0aGlzLmRvbmVJbigpO1xyXG5cdFx0XHRcdH0sIHRoaXMgKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5kb25lSW4oKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnRPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVTdGFydE91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgZnJvbSBwYWdlJ3MgaGVpZ2h0IGFuZCBzdGFydCBpdCB0cmFuc2l0aW9uaW5nIG91dFxyXG5cdFx0XHQvLyBOb3RlOiBzZXR0aW5nIGFuIGV4cGxpY2l0IGhlaWdodCBoZWxwcyBlbGltaW5hdGUgdGlsaW5nIGluIHRoZSB0cmFuc2l0aW9uc1xyXG5cdFx0XHR0aGlzLiRmcm9tXHJcblx0XHRcdFx0LmhlaWdodCggc2NyZWVuSGVpZ2h0ICsgJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMubmFtZSArIFwiIG91dFwiICsgcmV2ZXJzZUNsYXNzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRvZ2dsZVZpZXdwb3J0Q2xhc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnRvZ2dsZUNsYXNzKCBcInVpLW1vYmlsZS12aWV3cG9ydC10cmFuc2l0aW9uaW5nIHZpZXdwb3J0LVwiICsgdGhpcy5uYW1lICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRyYW5zaXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBOT1RFIG1hbnkgb2YgdGhlc2UgY291bGQgYmUgY2FsY3VsYXRlZC9yZWNvcmRlZCBpbiB0aGUgY29uc3RydWN0b3IsIGl0J3MgbXlcclxuXHRcdFx0Ly8gICAgICBvcGluaW9uIHRoYXQgYmluZGluZyB0aGVtIGFzIGxhdGUgYXMgcG9zc2libGUgaGFzIHZhbHVlIHdpdGggcmVnYXJkcyB0b1xyXG5cdFx0XHQvLyAgICAgIGJldHRlciB0cmFuc2l0aW9ucyB3aXRoIGZld2VyIGJ1Z3MuIEllLCBpdCdzIG5vdCBndWFyYW50ZWVkIHRoYXQgdGhlXHJcblx0XHRcdC8vICAgICAgb2JqZWN0IHdpbGwgYmUgY3JlYXRlZCBhbmQgdHJhbnNpdGlvbiB3aWxsIGJlIHJ1biBpbW1lZGlhdGVseSBhZnRlciBhc1xyXG5cdFx0XHQvLyAgICAgIGl0IGlzIHRvZGF5LiBTbyB3ZSB3YWl0IHVudGlsIHRyYW5zaXRpb24gaXMgaW52b2tlZCB0byBnYXRoZXIgdGhlIGZvbGxvd2luZ1xyXG5cdFx0XHR2YXIgbm9uZSxcclxuXHRcdFx0XHRyZXZlcnNlQ2xhc3MgPSB0aGlzLnJldmVyc2UgPyBcIiByZXZlcnNlXCIgOiBcIlwiLFxyXG5cdFx0XHRcdHNjcmVlbkhlaWdodCA9ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpLFxyXG5cdFx0XHRcdG1heFRyYW5zaXRpb25PdmVycmlkZSA9ICQubW9iaWxlLm1heFRyYW5zaXRpb25XaWR0aCAhPT0gZmFsc2UgJiZcclxuXHRcdFx0XHRcdCQubW9iaWxlLndpbmRvdy53aWR0aCgpID4gJC5tb2JpbGUubWF4VHJhbnNpdGlvbldpZHRoO1xyXG5cclxuXHRcdFx0dGhpcy50b1Njcm9sbCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCkubGFzdFNjcm9sbCB8fCAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbDtcclxuXHJcblx0XHRcdG5vbmUgPSAhJC5zdXBwb3J0LmNzc1RyYW5zaXRpb25zIHx8ICEkLnN1cHBvcnQuY3NzQW5pbWF0aW9ucyB8fFxyXG5cdFx0XHRcdG1heFRyYW5zaXRpb25PdmVycmlkZSB8fCAhdGhpcy5uYW1lIHx8IHRoaXMubmFtZSA9PT0gXCJub25lXCIgfHxcclxuXHRcdFx0XHRNYXRoLm1heCggJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpLCB0aGlzLnRvU2Nyb2xsICkgPlxyXG5cdFx0XHRcdFx0JC5tb2JpbGUuZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbigpO1xyXG5cclxuXHRcdFx0dGhpcy50b2dnbGVWaWV3cG9ydENsYXNzKCk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuJGZyb20gJiYgIW5vbmUgKSB7XHJcblx0XHRcdFx0dGhpcy5zdGFydE91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmRvbmVPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHJcblx0JC5tb2JpbGUuU2VyaWFsVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuU2VyaWFsVHJhbnNpdGlvbi5wcm90b3R5cGUsICQubW9iaWxlLlRyYW5zaXRpb24ucHJvdG90eXBlLCB7XHJcblx0XHRzZXF1ZW50aWFsOiB0cnVlLFxyXG5cclxuXHRcdGJlZm9yZURvbmVPdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMuJGZyb20gKSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhbkZyb20oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRiZWZvcmVTdGFydE91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICkge1xyXG5cdFx0XHR0aGlzLiRmcm9tLmFuaW1hdGlvbkNvbXBsZXRlKCQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5kb25lT3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cdFx0XHR9LCB0aGlzICkpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHJcblx0JC5tb2JpbGUuQ29uY3VycmVudFRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLkNvbmN1cnJlbnRUcmFuc2l0aW9uLnByb3RvdHlwZSwgJC5tb2JpbGUuVHJhbnNpdGlvbi5wcm90b3R5cGUsIHtcclxuXHRcdHNlcXVlbnRpYWw6IGZhbHNlLFxyXG5cclxuXHRcdGJlZm9yZURvbmVJbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy4kZnJvbSApIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFuRnJvbSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGJlZm9yZVN0YXJ0T3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKSB7XHJcblx0XHRcdHRoaXMuZG9uZU91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cdC8vIGdlbmVyYXRlIHRoZSBoYW5kbGVycyBmcm9tIHRoZSBhYm92ZVxyXG5cdHZhciBkZWZhdWx0R2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpICogMztcclxuXHR9O1xyXG5cclxuXHQvL3RyYW5zaXRpb24gaGFuZGxlciBkaWN0aW9uYXJ5IGZvciAzcmQgcGFydHkgdHJhbnNpdGlvbnNcclxuXHQkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMgPSB7XHJcblx0XHRcInNlcXVlbnRpYWxcIjogJC5tb2JpbGUuU2VyaWFsVHJhbnNpdGlvbixcclxuXHRcdFwic2ltdWx0YW5lb3VzXCI6ICQubW9iaWxlLkNvbmN1cnJlbnRUcmFuc2l0aW9uXHJcblx0fTtcclxuXHJcblx0Ly8gTWFrZSBvdXIgdHJhbnNpdGlvbiBoYW5kbGVyIHRoZSBwdWJsaWMgZGVmYXVsdC5cclxuXHQkLm1vYmlsZS5kZWZhdWx0VHJhbnNpdGlvbkhhbmRsZXIgPSAkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2VxdWVudGlhbDtcclxuXHJcblx0JC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcyA9IHt9O1xyXG5cclxuXHQvLyBJZiB0cmFuc2l0aW9uIGlzIGRlZmluZWQsIGNoZWNrIGlmIGNzcyAzRCB0cmFuc2Zvcm1zIGFyZSBzdXBwb3J0ZWQsIGFuZCBpZiBub3QsIGlmIGEgZmFsbGJhY2sgaXMgc3BlY2lmaWVkXHJcblx0JC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24gPSBmdW5jdGlvbiggdHJhbnNpdGlvbiApIHtcclxuXHRcdGlmICggdHJhbnNpdGlvbiAmJiAhJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3NbIHRyYW5zaXRpb24gXSApIHtcclxuXHRcdFx0dHJhbnNpdGlvbiA9ICQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3NbIHRyYW5zaXRpb24gXTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJhbnNpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvLyBTZXQgdGhlIGdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gdG8gZGVmYXVsdCBpZiBubyBpbXBsZW1lbnRhdGlvbiB3YXMgc2V0IGJ5IHVzZXJcclxuXHQkLm1vYmlsZS5nZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uID0gJC5tb2JpbGUuZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiB8fCBkZWZhdWx0R2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbjtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgZmxpcCBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MuZmxpcCA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBmbG93IGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5mbG93ID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHBvcCBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MucG9wID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRlIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gVXNlIHRoZSBzaW11bHRhbmVvdXMgdHJhbnNpdGlvbnMgaGFuZGxlciBmb3Igc2xpZGUgdHJhbnNpdGlvbnNcclxuJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNsaWRlID0gJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNpbXVsdGFuZW91cztcclxuXHJcbi8vIFNldCB0aGUgc2xpZGUgdHJhbnNpdGlvbnMncyBmYWxsYmFjayB0byBcImZhZGVcIlxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRlZG93biBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGVkb3duID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRlZmFkZSBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIFNldCB0aGUgc2xpZGUgdHJhbnNpdGlvbnMncyBmYWxsYmFjayB0byBcImZhZGVcIlxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlZmFkZSA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZXVwIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZXVwID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHR1cm4gaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnR1cm4gPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLmRlZ3JhZGVJbnB1dHMgPSB7XHJcblx0Y29sb3I6IGZhbHNlLFxyXG5cdGRhdGU6IGZhbHNlLFxyXG5cdGRhdGV0aW1lOiBmYWxzZSxcclxuXHRcImRhdGV0aW1lLWxvY2FsXCI6IGZhbHNlLFxyXG5cdGVtYWlsOiBmYWxzZSxcclxuXHRtb250aDogZmFsc2UsXHJcblx0bnVtYmVyOiBmYWxzZSxcclxuXHRyYW5nZTogXCJudW1iZXJcIixcclxuXHRzZWFyY2g6IFwidGV4dFwiLFxyXG5cdHRlbDogZmFsc2UsXHJcblx0dGltZTogZmFsc2UsXHJcblx0dXJsOiBmYWxzZSxcclxuXHR3ZWVrOiBmYWxzZVxyXG59O1xyXG4vLyBCYWNrY29tcGF0IHJlbW92ZSBpbiAxLjVcclxuJC5tb2JpbGUucGFnZS5wcm90b3R5cGUub3B0aW9ucy5kZWdyYWRlSW5wdXRzID0gJC5tb2JpbGUuZGVncmFkZUlucHV0cztcclxuXHJcbi8vIEF1dG8gc2VsZi1pbml0IHdpZGdldHNcclxuJC5tb2JpbGUuZGVncmFkZUlucHV0c1dpdGhpbiA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblxyXG5cdHRhcmdldCA9ICQoIHRhcmdldCApO1xyXG5cclxuXHQvLyBEZWdyYWRlIGlucHV0cyB0byBhdm9pZCBwb29ybHkgaW1wbGVtZW50ZWQgbmF0aXZlIGZ1bmN0aW9uYWxpdHlcclxuXHR0YXJnZXQuZmluZCggXCJpbnB1dFwiICkubm90KCAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IoKSApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9ICQoIHRoaXMgKSxcclxuXHRcdFx0dHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApLFxyXG5cdFx0XHRvcHRUeXBlID0gJC5tb2JpbGUuZGVncmFkZUlucHV0c1sgdHlwZSBdIHx8IFwidGV4dFwiLFxyXG5cdFx0XHRodG1sLCBoYXNUeXBlLCBmaW5kc3RyLCByZXBzdHI7XHJcblxyXG5cdFx0aWYgKCAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzWyB0eXBlIF0gKSB7XHJcblx0XHRcdGh0bWwgPSAkKCBcIjxkaXY+XCIgKS5odG1sKCBlbGVtZW50LmNsb25lKCkgKS5odG1sKCk7XHJcblx0XHRcdC8vIEluIElFIGJyb3dzZXJzLCB0aGUgdHlwZSBzb21ldGltZXMgZG9lc24ndCBleGlzdCBpbiB0aGUgY2xvbmVkIG1hcmt1cCwgc28gd2UgcmVwbGFjZSB0aGUgY2xvc2luZyB0YWcgaW5zdGVhZFxyXG5cdFx0XHRoYXNUeXBlID0gaHRtbC5pbmRleE9mKCBcIiB0eXBlPVwiICkgPiAtMTtcclxuXHRcdFx0ZmluZHN0ciA9IGhhc1R5cGUgPyAvXFxzK3R5cGU9W1wiJ10/XFx3K1snXCJdPy8gOiAvXFwvPz4vO1xyXG5cdFx0XHRyZXBzdHIgPSBcIiB0eXBlPVxcXCJcIiArIG9wdFR5cGUgKyBcIlxcXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0eXBlPVxcXCJcIiArIHR5cGUgKyBcIlxcXCJcIiArICggaGFzVHlwZSA/IFwiXCIgOiBcIj5cIiApO1xyXG5cclxuXHRcdFx0ZWxlbWVudC5yZXBsYWNlV2l0aCggaHRtbC5yZXBsYWNlKCBmaW5kc3RyLCByZXBzdHIgKSApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucGFnZVwiLCAkLm1vYmlsZS5wYWdlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cclxuXHRcdC8vIEFjY2VwdHMgbGVmdCwgcmlnaHQgYW5kIG5vbmVcclxuXHRcdGNsb3NlQnRuOiBcImxlZnRcIixcclxuXHRcdGNsb3NlQnRuVGV4dDogXCJDbG9zZVwiLFxyXG5cdFx0b3ZlcmxheVRoZW1lOiBcImFcIixcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRkaWFsb2c6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlhbG9nICkge1xyXG5cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRfaW5uZXI6IHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLFxyXG5cdFx0XHRcdF9oZWFkZXJDbG9zZUJ1dHRvbjogbnVsbFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRDbG9zZUJ0biggdGhpcy5vcHRpb25zLmNsb3NlQnRuICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdC8vIENsYXNzIHRoZSBtYXJrdXAgZm9yIGRpYWxvZyBzdHlsaW5nIGFuZCB3cmFwIGludGVyaW9yXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaWFsb2cgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1kaWFsb2dcIiApXHJcblx0XHRcdFx0LndyYXBJbm5lciggJCggXCI8ZGl2Lz5cIiwge1xyXG5cclxuXHRcdFx0XHRcdC8vIEFSSUEgcm9sZVxyXG5cdFx0XHRcdFx0XCJyb2xlXCIgOiBcImRpYWxvZ1wiLFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiIDogXCJ1aS1kaWFsb2ctY29udGFpbiB1aS1vdmVybGF5LXNoYWRvd1wiICtcclxuXHRcdFx0XHRcdFx0KCB0aGlzLm9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKVxyXG5cdFx0XHRcdH0pKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0LFxyXG5cdFx0XHRjdXJyZW50T3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9pbm5lci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsICEhb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm92ZXJsYXlUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLmFjdGl2ZVBhZ2VbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XHJcblx0XHRcdFx0Y3VycmVudE9wdHMub3ZlcmxheVRoZW1lID0gb3B0aW9ucy5vdmVybGF5VGhlbWU7XHJcblx0XHRcdFx0dGhpcy5faGFuZGxlUGFnZUJlZm9yZVNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0blRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IGN1cnJlbnRPcHRzLmNsb3NlQnRuO1xyXG5cdFx0XHRjbG9zZUJ1dHRvblRleHQgPSBvcHRpb25zLmNsb3NlQnRuVGV4dDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IG9wdGlvbnMuY2xvc2VCdG47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBjbG9zZUJ1dHRvbkxvY2F0aW9uICkge1xyXG5cdFx0XHR0aGlzLl9zZXRDbG9zZUJ0biggY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSAmJiB0aGlzLm9wdGlvbnMuZGlhbG9nICkge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUNvbnRhaW5lckJhY2tncm91bmQoKTtcclxuXHRcdFx0dGhpcy5zZXRDb250YWluZXJCYWNrZ3JvdW5kKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRDbG9zZUJ0bjogZnVuY3Rpb24oIGxvY2F0aW9uLCB0ZXh0ICkge1xyXG5cdFx0dmFyIGRzdCxcclxuXHRcdFx0YnRuID0gdGhpcy5faGVhZGVyQ2xvc2VCdXR0b247XHJcblxyXG5cdFx0Ly8gU2FuaXRpemUgdmFsdWVcclxuXHRcdGxvY2F0aW9uID0gXCJsZWZ0XCIgPT09IGxvY2F0aW9uID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIgPT09IGxvY2F0aW9uID8gXCJyaWdodFwiIDogXCJub25lXCI7XHJcblxyXG5cdFx0aWYgKCBcIm5vbmVcIiA9PT0gbG9jYXRpb24gKSB7XHJcblx0XHRcdGlmICggYnRuICkge1xyXG5cdFx0XHRcdGJ0bi5yZW1vdmUoKTtcclxuXHRcdFx0XHRidG4gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKCBidG4gKSB7XHJcblx0XHRcdGJ0bi5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHRcIiApLmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIGxvY2F0aW9uICk7XHJcblx0XHRcdGlmICggdGV4dCApIHtcclxuXHRcdFx0XHRidG4udGV4dCggdGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkc3QgPSB0aGlzLl9pbm5lci5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maXJzdCgpO1xyXG5cdFx0XHRidG4gPSAkKCBcIjxhPjwvYT5cIiwge1xyXG5cdFx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiOiBcInVpLWJ0biB1aS1jb3JuZXItYWxsIHVpLWljb24tZGVsZXRlIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1idG4tXCIgKyBsb2NhdGlvblxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWxcIiwgXCJiYWNrXCIgKVxyXG5cdFx0XHRcdC50ZXh0KCB0ZXh0IHx8IHRoaXMub3B0aW9ucy5jbG9zZUJ0blRleHQgfHwgXCJcIiApXHJcblx0XHRcdFx0LnByZXBlbmRUbyggZHN0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faGVhZGVyQ2xvc2VCdXR0b24gPSBidG47XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZGlhbG9nXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblxyXG5cdFx0Ly8gQWNjZXB0cyBsZWZ0LCByaWdodCBhbmQgbm9uZVxyXG5cdFx0Y2xvc2VCdG46IFwibGVmdFwiLFxyXG5cdFx0Y2xvc2VCdG5UZXh0OiBcIkNsb3NlXCIsXHJcblx0XHRvdmVybGF5VGhlbWU6IFwiYVwiLFxyXG5cdFx0Y29ybmVyczogdHJ1ZVxyXG5cdH0sXHJcblxyXG5cdC8vIE92ZXJyaWRlIHRoZSB0aGVtZSBzZXQgYnkgdGhlIHBhZ2UgcGx1Z2luIG9uIHBhZ2VzaG93XHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2lzQ2xvc2VhYmxlID0gdHJ1ZTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LnBhZ2UoIFwicmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZFwiIClcclxuXHRcdFx0XHQucGFnZSggXCJzZXRDb250YWluZXJCYWNrZ3JvdW5kXCIsIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlUGFnZUJlZm9yZUhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faXNDbG9zZWFibGUgPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHQvLyBjbGljayBhbmQgc3VibWl0IGV2ZW50czpcclxuXHQvLyAtIGNsaWNrcyBhbmQgc3VibWl0cyBzaG91bGQgdXNlIHRoZSBjbG9zaW5nIHRyYW5zaXRpb24gdGhhdCB0aGUgZGlhbG9nXHJcblx0Ly8gICBvcGVuZWQgd2l0aCB1bmxlc3MgYSBkYXRhLXRyYW5zaXRpb24gaXMgc3BlY2lmaWVkIG9uIHRoZSBsaW5rL2Zvcm1cclxuXHQvLyAtIGlmIHRoZSBjbGljayB3YXMgb24gdGhlIGNsb3NlIGJ1dHRvbiwgb3IgdGhlIGxpbmsgaGFzIGEgZGF0YS1yZWw9XCJiYWNrXCJcclxuXHQvLyAgIGl0J2xsIGdvIGJhY2sgaW4gaGlzdG9yeSBuYXR1cmFsbHlcclxuXHRfaGFuZGxlVkNsaWNrU3VibWl0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgYXR0cnMsXHJcblx0XHRcdCR0YXJnZXQgPSAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBldmVudC50eXBlID09PSBcInZjbGlja1wiID8gXCJhXCIgOiBcImZvcm1cIiApO1xyXG5cclxuXHRcdGlmICggJHRhcmdldC5sZW5ndGggJiYgISR0YXJnZXQuanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKSApIHtcclxuXHRcdFx0YXR0cnMgPSB7fTtcclxuXHRcdFx0YXR0cnNbIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0cmFuc2l0aW9uXCIgXSA9XHJcblx0XHRcdFx0KCAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpIHx8IHt9IClbIFwidHJhbnNpdGlvblwiIF0gfHxcclxuXHRcdFx0XHQkLm1vYmlsZS5kZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjtcclxuXHRcdFx0YXR0cnNbIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJkaXJlY3Rpb25cIiBdID0gXCJyZXZlcnNlXCI7XHJcblx0XHRcdCR0YXJnZXQuYXR0ciggYXR0cnMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIENsYXNzIHRoZSBtYXJrdXAgZm9yIGRpYWxvZyBzdHlsaW5nIGFuZCB3cmFwIGludGVyaW9yXHJcblx0XHRlbGVtLmFkZENsYXNzKCBcInVpLWRpYWxvZ1wiIClcclxuXHRcdFx0LndyYXBJbm5lciggJCggXCI8ZGl2Lz5cIiwge1xyXG5cclxuXHRcdFx0XHQvLyBBUklBIHJvbGVcclxuXHRcdFx0XHRcInJvbGVcIiA6IFwiZGlhbG9nXCIsXHJcblx0XHRcdFx0XCJjbGFzc1wiIDogXCJ1aS1kaWFsb2ctY29udGFpbiB1aS1vdmVybGF5LXNoYWRvd1wiICtcclxuXHRcdFx0XHRcdCggISFvcHRzLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiIClcclxuXHRcdFx0fSkpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9pc0Nsb3NlYWJsZTogZmFsc2UsXHJcblx0XHRcdF9pbm5lcjogZWxlbS5jaGlsZHJlbigpLFxyXG5cdFx0XHRfaGVhZGVyQ2xvc2VCdXR0b246IG51bGxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKCBlbGVtLCB7XHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlVkNsaWNrU3VibWl0XCIsXHJcblx0XHRcdHN1Ym1pdDogXCJfaGFuZGxlVkNsaWNrU3VibWl0XCIsXHJcblx0XHRcdHBhZ2ViZWZvcmVzaG93OiBcIl9oYW5kbGVQYWdlQmVmb3JlU2hvd1wiLFxyXG5cdFx0XHRwYWdlYmVmb3JlaGlkZTogXCJfaGFuZGxlUGFnZUJlZm9yZUhpZGVcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIG9wdHMuY2xvc2VCdG4gKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0LFxyXG5cdFx0XHRjdXJyZW50T3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9pbm5lci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsICEhb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm92ZXJsYXlUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLmFjdGl2ZVBhZ2VbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XHJcblx0XHRcdFx0Y3VycmVudE9wdHMub3ZlcmxheVRoZW1lID0gb3B0aW9ucy5vdmVybGF5VGhlbWU7XHJcblx0XHRcdFx0dGhpcy5faGFuZGxlUGFnZUJlZm9yZVNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0blRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IGN1cnJlbnRPcHRzLmNsb3NlQnRuO1xyXG5cdFx0XHRjbG9zZUJ1dHRvblRleHQgPSBvcHRpb25zLmNsb3NlQnRuVGV4dDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IG9wdGlvbnMuY2xvc2VCdG47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBjbG9zZUJ1dHRvbkxvY2F0aW9uICkge1xyXG5cdFx0XHR0aGlzLl9zZXRDbG9zZUJ0biggY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0Q2xvc2VCdG46IGZ1bmN0aW9uKCBsb2NhdGlvbiwgdGV4dCApIHtcclxuXHRcdHZhciBkc3QsXHJcblx0XHRcdGJ0biA9IHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uO1xyXG5cclxuXHRcdC8vIFNhbml0aXplIHZhbHVlXHJcblx0XHRsb2NhdGlvbiA9IFwibGVmdFwiID09PSBsb2NhdGlvbiA/IFwibGVmdFwiIDogXCJyaWdodFwiID09PSBsb2NhdGlvbiA/IFwicmlnaHRcIiA6IFwibm9uZVwiO1xyXG5cclxuXHRcdGlmICggXCJub25lXCIgPT09IGxvY2F0aW9uICkge1xyXG5cdFx0XHRpZiAoIGJ0biApIHtcclxuXHRcdFx0XHRidG4ucmVtb3ZlKCk7XHJcblx0XHRcdFx0YnRuID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmICggYnRuICkge1xyXG5cdFx0XHRidG4ucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0XCIgKS5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBsb2NhdGlvbiApO1xyXG5cdFx0XHRpZiAoIHRleHQgKSB7XHJcblx0XHRcdFx0YnRuLnRleHQoIHRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZHN0ID0gdGhpcy5faW5uZXIuZmluZCggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmlyc3QoKTtcclxuXHRcdFx0YnRuID0gJCggXCI8YT48L2E+XCIsIHtcclxuXHRcdFx0XHRcdFwicm9sZVwiOiBcImJ1dHRvblwiLFxyXG5cdFx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiOiBcInVpLWJ0biB1aS1jb3JuZXItYWxsIHVpLWljb24tZGVsZXRlIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1idG4tXCIgKyBsb2NhdGlvblxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnRleHQoIHRleHQgfHwgdGhpcy5vcHRpb25zLmNsb3NlQnRuVGV4dCB8fCBcIlwiIClcclxuXHRcdFx0XHQucHJlcGVuZFRvKCBkc3QgKTtcclxuXHRcdFx0dGhpcy5fb24oIGJ0biwgeyBjbGljazogXCJjbG9zZVwiIH0gKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbiA9IGJ0bjtcclxuXHR9LFxyXG5cclxuXHQvLyBDbG9zZSBtZXRob2QgZ29lcyBiYWNrIGluIGhpc3RvcnlcclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGlzdCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9pc0Nsb3NlYWJsZSApIHtcclxuXHRcdFx0dGhpcy5faXNDbG9zZWFibGUgPSBmYWxzZTtcclxuXHRcdFx0Ly8gSWYgdGhlIGhhc2ggbGlzdGVuaW5nIGlzIGVuYWJsZWQgYW5kIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBwcmVjZWRpbmcgaGlzdG9yeVxyXG5cdFx0XHQvLyBlbnRyeSBpdCdzIG9rIHRvIGdvIGJhY2suIEluaXRpYWwgcGFnZXMgd2l0aCB0aGUgZGlhbG9nIGhhc2ggc3RhdGUgYXJlIGFuIGV4YW1wbGVcclxuXHRcdFx0Ly8gd2hlcmUgdGhlIHN0YWNrIGNoZWNrIGlzIG5lY2Vzc2FyeVxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICYmIGhpc3QuYWN0aXZlSW5kZXggPiAwICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmJhY2soKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiYmFja1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgckluaXRpYWxMZXR0ZXIgPSAvKFtBLVpdKS9nLFxyXG5cclxuXHQvLyBDb25zdHJ1Y3QgaWNvbnBvcyBjbGFzcyBmcm9tIGljb25wb3MgdmFsdWVcclxuXHRpY29ucG9zQ2xhc3MgPSBmdW5jdGlvbiggaWNvbnBvcyApIHtcclxuXHRcdHJldHVybiAoIFwidWktYnRuLWljb24tXCIgKyAoIGljb25wb3MgPT09IG51bGwgPyBcImxlZnRcIiA6IGljb25wb3MgKSApO1xyXG5cdH07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY29sbGFwc2libGVcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdGV4cGFuZEN1ZVRleHQ6IG51bGwsXHJcblx0XHRjb2xsYXBzZUN1ZVRleHQ6IG51bGwsXHJcblx0XHRjb2xsYXBzZWQ6IHRydWUsXHJcblx0XHRoZWFkaW5nOiBcImgxLGgyLGgzLGg0LGg1LGg2LGxlZ2VuZFwiLFxyXG5cdFx0Y29sbGFwc2VkSWNvbjogbnVsbCxcclxuXHRcdGV4cGFuZGVkSWNvbjogbnVsbCxcclxuXHRcdGljb25wb3M6IG51bGwsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGNvbnRlbnRUaGVtZTogbnVsbCxcclxuXHRcdGluc2V0OiBudWxsLFxyXG5cdFx0Y29ybmVyczogbnVsbCxcclxuXHRcdG1pbmk6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR1aSA9IHtcclxuXHRcdFx0XHRhY2NvcmRpb246IGVsZW1cclxuXHRcdFx0XHRcdC5jbG9zZXN0KCBcIjpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlLXNldCcpLFwiICtcclxuXHRcdFx0XHRcdFx0XCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZXNldCcpXCIgK1xyXG5cdFx0XHRcdFx0XHQoICQubW9iaWxlLmNvbGxhcHNpYmxlc2V0ID8gXCIsIDptb2JpbGUtY29sbGFwc2libGVzZXRcIiA6XHJcblx0XHRcdFx0XHRcdFx0XCJcIiApIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1zZXRcIiApXHJcblx0XHRcdH07XHJcblxyXG5cdFx0dGhpcy5fdWkgPSB1aTtcclxuXHRcdHRoaXMuX3JlbmRlcmVkT3B0aW9ucyA9IHRoaXMuX2dldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR1aS5oZWFkaW5nID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcIi51aS1jb2xsYXBzaWJsZS1oZWFkaW5nXCIgKTtcclxuXHRcdFx0dWkuY29udGVudCA9IHVpLmhlYWRpbmcubmV4dCgpO1xyXG5cdFx0XHR1aS5hbmNob3IgPSB1aS5oZWFkaW5nLmNoaWxkcmVuKCk7XHJcblx0XHRcdHVpLnN0YXR1cyA9IHVpLmFuY2hvci5jaGlsZHJlbiggXCIudWktY29sbGFwc2libGUtaGVhZGluZy1zdGF0dXNcIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSggZWxlbSwgdWkgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggdWkuaGVhZGluZywge1xyXG5cdFx0XHRcInRhcFwiOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR1aS5oZWFkaW5nLmZpbmQoIFwiYVwiICkuZmlyc3QoKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdFwiY2xpY2tcIjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCAhdWkuaGVhZGluZy5oYXNDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLWNvbGxhcHNlZFwiICkgKTtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHQvLyBBZGp1c3QgdGhlIGtleXMgaW5zaWRlIG9wdGlvbnMgZm9yIGluaGVyaXRlZCB2YWx1ZXNcclxuXHRfZ2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIga2V5LFxyXG5cdFx0XHRhY2NvcmRpb24gPSB0aGlzLl91aS5hY2NvcmRpb24sXHJcblx0XHRcdGFjY29yZGlvbldpZGdldCA9IHRoaXMuX3VpLmFjY29yZGlvbldpZGdldDtcclxuXHJcblx0XHQvLyBDb3B5IG9wdGlvbnNcclxuXHRcdG9wdGlvbnMgPSAkLmV4dGVuZCgge30sIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIGFjY29yZGlvbi5sZW5ndGggJiYgIWFjY29yZGlvbldpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fdWkuYWNjb3JkaW9uV2lkZ2V0ID1cclxuXHRcdFx0YWNjb3JkaW9uV2lkZ2V0ID0gYWNjb3JkaW9uLmRhdGEoIFwibW9iaWxlLWNvbGxhcHNpYmxlc2V0XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKCBrZXkgaW4gb3B0aW9ucyApIHtcclxuXHJcblx0XHRcdC8vIFJldHJpZXZlIHRoZSBvcHRpb24gdmFsdWUgZmlyc3QgZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QgcGFzc2VkIGluIGFuZCwgaWZcclxuXHRcdFx0Ly8gbnVsbCwgZnJvbSB0aGUgcGFyZW50IGFjY29yZGlvbiBvciwgaWYgdGhhdCdzIG51bGwgdG9vLCBvciBpZiB0aGVyZSdzIG5vXHJcblx0XHRcdC8vIHBhcmVudCBhY2NvcmRpb24sIHRoZW4gZnJvbSB0aGUgZGVmYXVsdHMuXHJcblx0XHRcdG9wdGlvbnNbIGtleSBdID1cclxuXHRcdFx0XHQoIG9wdGlvbnNbIGtleSBdICE9IG51bGwgKSA/IG9wdGlvbnNbIGtleSBdIDpcclxuXHRcdFx0XHQoIGFjY29yZGlvbldpZGdldCApID8gYWNjb3JkaW9uV2lkZ2V0Lm9wdGlvbnNbIGtleSBdIDpcclxuXHRcdFx0XHRhY2NvcmRpb24ubGVuZ3RoID8gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBhY2NvcmRpb25bIDAgXSxcclxuXHRcdFx0XHRcdGtleS5yZXBsYWNlKCBySW5pdGlhbExldHRlciwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCkgKTpcclxuXHRcdFx0XHRudWxsO1xyXG5cclxuXHRcdFx0aWYgKCBudWxsID09IG9wdGlvbnNbIGtleSBdICkge1xyXG5cdFx0XHRcdG9wdGlvbnNbIGtleSBdID0gJC5tb2JpbGUuY29sbGFwc2libGUuZGVmYXVsdHNbIGtleSBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9wdGlvbnM7XHJcblx0fSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggcHJlZml4LCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogcHJlZml4ICsgdmFsdWUgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oIGVsZW0sIHVpICkge1xyXG5cdFx0dmFyIGljb25jbGFzcyxcclxuXHRcdFx0b3B0cyA9IHRoaXMuX3JlbmRlcmVkT3B0aW9ucyxcclxuXHRcdFx0Y29udGVudFRoZW1lQ2xhc3MgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvcHRzLmNvbnRlbnRUaGVtZSApO1xyXG5cclxuXHRcdGVsZW0uYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUgXCIgK1xyXG5cdFx0XHQoIG9wdHMuaW5zZXQgPyBcInVpLWNvbGxhcHNpYmxlLWluc2V0IFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRzLmluc2V0ICYmIG9wdHMuY29ybmVycyA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggY29udGVudFRoZW1lQ2xhc3MgPyBcInVpLWNvbGxhcHNpYmxlLXRoZW1lZC1jb250ZW50IFwiIDogXCJcIiApICk7XHJcblx0XHR1aS5vcmlnaW5hbEhlYWRpbmcgPSBlbGVtLmNoaWxkcmVuKCB0aGlzLm9wdGlvbnMuaGVhZGluZyApLmZpcnN0KCksXHJcblx0XHR1aS5jb250ZW50ID0gZWxlbVxyXG5cdFx0XHQud3JhcElubmVyKCBcIjxkaXYgXCIgK1xyXG5cdFx0XHRcdFwiY2xhc3M9J3VpLWNvbGxhcHNpYmxlLWNvbnRlbnQgXCIgK1xyXG5cdFx0XHRcdGNvbnRlbnRUaGVtZUNsYXNzICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0LmNoaWxkcmVuKCBcIi51aS1jb2xsYXBzaWJsZS1jb250ZW50XCIgKSxcclxuXHRcdHVpLmhlYWRpbmcgPSB1aS5vcmlnaW5hbEhlYWRpbmc7XHJcblxyXG5cdFx0Ly8gUmVwbGFjZSBjb2xsYXBzaWJsZUhlYWRpbmcgaWYgaXQncyBhIGxlZ2VuZFxyXG5cdFx0aWYgKCB1aS5oZWFkaW5nLmlzKCBcImxlZ2VuZFwiICkgKSB7XHJcblx0XHRcdHVpLmhlYWRpbmcgPSAkKCBcIjxkaXYgcm9sZT0naGVhZGluZyc+XCIrIHVpLmhlYWRpbmcuaHRtbCgpICtcIjwvZGl2PlwiICk7XHJcblx0XHRcdHVpLnBsYWNlaG9sZGVyID0gJCggXCI8ZGl2PjwhLS0gcGxhY2Vob2xkZXIgZm9yIGxlZ2VuZCAtLT48L2Rpdj5cIiApLmluc2VydEJlZm9yZSggdWkub3JpZ2luYWxIZWFkaW5nICk7XHJcblx0XHRcdHVpLm9yaWdpbmFsSGVhZGluZy5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpY29uY2xhc3MgPSAoIG9wdHMuY29sbGFwc2VkID8gKCBvcHRzLmNvbGxhcHNlZEljb24gPyBcInVpLWljb24tXCIgKyBvcHRzLmNvbGxhcHNlZEljb24gOiBcIlwiICk6XHJcblx0XHRcdCggb3B0cy5leHBhbmRlZEljb24gPyBcInVpLWljb24tXCIgKyBvcHRzLmV4cGFuZGVkSWNvbiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdHVpLnN0YXR1cyA9ICQoIFwiPHNwYW4gY2xhc3M9J3VpLWNvbGxhcHNpYmxlLWhlYWRpbmctc3RhdHVzJz48L3NwYW4+XCIgKTtcclxuXHRcdHVpLmFuY2hvciA9IHVpLmhlYWRpbmdcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC8vbW9kaWZ5IG1hcmt1cCAmIGF0dHJpYnV0ZXNcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmdcIiApXHJcblx0XHRcdC5hcHBlbmQoIHVpLnN0YXR1cyApXHJcblx0XHRcdC53cmFwSW5uZXIoIFwiPGEgaHJlZj0nIycgY2xhc3M9J3VpLWNvbGxhcHNpYmxlLWhlYWRpbmctdG9nZ2xlJz48L2E+XCIgKVxyXG5cdFx0XHQuZmluZCggXCJhXCIgKVxyXG5cdFx0XHRcdC5maXJzdCgpXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0biBcIiArXHJcblx0XHRcdFx0XHQoIGljb25jbGFzcyA/IGljb25jbGFzcyArIFwiIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggaWNvbmNsYXNzID8gaWNvbnBvc0NsYXNzKCBvcHRzLmljb25wb3MgKSArXHJcblx0XHRcdFx0XHRcdFwiIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJ0bi1cIiwgb3B0cy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0KCBvcHRzLm1pbmkgPyBcInVpLW1pbmkgXCIgOiBcIlwiICkgKTtcclxuXHJcblx0XHQvL2Ryb3AgaGVhZGluZyBpbiBiZWZvcmUgY29udGVudFxyXG5cdFx0dWkuaGVhZGluZy5pbnNlcnRCZWZvcmUoIHVpLmNvbnRlbnQgKTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggdGhpcy5vcHRpb25zLmNvbGxhcHNlZCApO1xyXG5cclxuXHRcdHJldHVybiB1aTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2FwcGx5T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0XHR0aGlzLl9yZW5kZXJlZE9wdGlvbnMgPSB0aGlzLl9nZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfYXBwbHlPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBpc0NvbGxhcHNlZCwgbmV3VGhlbWUsIG9sZFRoZW1lLCBoYXNDb3JuZXJzLCBoYXNJY29uLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRjdXJyZW50T3B0cyA9IHRoaXMuX3JlbmRlcmVkT3B0aW9ucyxcclxuXHRcdFx0dWkgPSB0aGlzLl91aSxcclxuXHRcdFx0YW5jaG9yID0gdWkuYW5jaG9yLFxyXG5cdFx0XHRzdGF0dXMgPSB1aS5zdGF0dXMsXHJcblx0XHRcdG9wdHMgPSB0aGlzLl9nZXRPcHRpb25zKCBvcHRpb25zICk7XHJcblxyXG5cdFx0Ly8gRmlyc3QgYW5kIGZvcmVtb3N0IHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBjb2xsYXBzaWJsZSBpcyBpbiB0aGUgcHJvcGVyXHJcblx0XHQvLyBzdGF0ZSwgaW4gY2FzZSBzb21lYm9keSBkZWNpZGVkIHRvIGNoYW5nZSB0aGUgY29sbGFwc2VkIG9wdGlvbiBhdCB0aGVcclxuXHRcdC8vIHNhbWUgdGltZSBhcyBhbm90aGVyIG9wdGlvblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggb3B0aW9ucy5jb2xsYXBzZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpc0NvbGxhcHNlZCA9IGVsZW0uaGFzQ2xhc3MoIFwidWktY29sbGFwc2libGUtY29sbGFwc2VkXCIgKTtcclxuXHJcblx0XHQvLyBXZSBvbmx5IG5lZWQgdG8gYXBwbHkgdGhlIGN1ZSB0ZXh0IGZvciB0aGUgY3VycmVudCBzdGF0ZSByaWdodCBhd2F5LlxyXG5cdFx0Ly8gVGhlIGN1ZSB0ZXh0IGZvciB0aGUgYWx0ZXJuYXRlIHN0YXRlIHdpbGwgYmUgc3RvcmVkIGluIHRoZSBvcHRpb25zXHJcblx0XHQvLyBhbmQgYXBwbGllZCB0aGUgbmV4dCB0aW1lIHRoZSBjb2xsYXBzaWJsZSdzIHN0YXRlIGlzIHRvZ2dsZWRcclxuXHRcdGlmICggaXNDb2xsYXBzZWQgKSB7XHJcblx0XHRcdGlmICggb3B0cy5leHBhbmRDdWVUZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0c3RhdHVzLnRleHQoIG9wdHMuZXhwYW5kQ3VlVGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoIG9wdHMuY29sbGFwc2VDdWVUZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0c3RhdHVzLnRleHQoIG9wdHMuY29sbGFwc2VDdWVUZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBVcGRhdGUgaWNvblxyXG5cclxuXHRcdC8vIElzIGl0IHN1cHBvc2VkIHRvIGhhdmUgYW4gaWNvbj9cclxuXHRcdGhhc0ljb24gPVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNvbGxhcHNlZEljb24gaXMgYmVpbmcgc2V0LCBjb25zdWx0IHRoYXRcclxuXHRcdFx0KCBvcHRzLmNvbGxhcHNlZEljb24gIT09IHVuZGVmaW5lZCA/IG9wdHMuY29sbGFwc2VkSWNvbiAhPT0gZmFsc2UgOlxyXG5cclxuXHRcdFx0XHQvLyBPdGhlcndpc2UgY29uc3VsdCB0aGUgZXhpc3Rpbmcgb3B0aW9uIHZhbHVlXHJcblx0XHRcdFx0Y3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiAhPT0gZmFsc2UgKTtcclxuXHJcblxyXG5cdFx0Ly8gSWYgYW55IGljb24tcmVsYXRlZCBvcHRpb25zIGhhdmUgY2hhbmdlZCwgbWFrZSBzdXJlIHRoZSBuZXcgaWNvblxyXG5cdFx0Ly8gc3RhdGUgaXMgcmVmbGVjdGVkIGJ5IGZpcnN0IHJlbW92aW5nIGFsbCBpY29uLXJlbGF0ZWQgY2xhc3Nlc1xyXG5cdFx0Ly8gcmVmbGVjdGluZyB0aGUgY3VycmVudCBzdGF0ZSBhbmQgdGhlbiBhZGRpbmcgYWxsIGljb24tcmVsYXRlZFxyXG5cdFx0Ly8gY2xhc3NlcyBmb3IgdGhlIG5ldyBzdGF0ZVxyXG5cdFx0aWYgKCAhKCBvcHRzLmljb25wb3MgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRzLmNvbGxhcHNlZEljb24gPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRzLmV4cGFuZGVkSWNvbiA9PT0gdW5kZWZpbmVkICkgKSB7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGN1cnJlbnQgaWNvbi1yZWxhdGVkIGNsYXNzZXNcclxuXHRcdFx0YW5jaG9yLnJlbW92ZUNsYXNzKCBbIGljb25wb3NDbGFzcyggY3VycmVudE9wdHMuaWNvbnBvcyApIF1cclxuXHRcdFx0XHQuY29uY2F0KCAoIGN1cnJlbnRPcHRzLmV4cGFuZGVkSWNvbiA/XHJcblx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArIGN1cnJlbnRPcHRzLmV4cGFuZGVkSWNvbiBdIDogW10gKSApXHJcblx0XHRcdFx0LmNvbmNhdCggKCBjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uID9cclxuXHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgY3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiBdIDogW10gKSApXHJcblx0XHRcdFx0LmpvaW4oIFwiIFwiICkgKTtcclxuXHJcblx0XHRcdC8vIEFkZCBuZXcgY2xhc3NlcyBpZiBhbiBpY29uIGlzIHN1cHBvc2VkIHRvIGJlIHByZXNlbnRcclxuXHRcdFx0aWYgKCBoYXNJY29uICkge1xyXG5cdFx0XHRcdGFuY2hvci5hZGRDbGFzcyhcclxuXHRcdFx0XHRcdFsgaWNvbnBvc0NsYXNzKCBvcHRzLmljb25wb3MgIT09IHVuZGVmaW5lZCA/XHJcblx0XHRcdFx0XHRcdG9wdHMuaWNvbnBvcyA6IGN1cnJlbnRPcHRzLmljb25wb3MgKSBdXHJcblx0XHRcdFx0XHRcdC5jb25jYXQoIGlzQ29sbGFwc2VkID9cclxuXHRcdFx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArICggb3B0cy5jb2xsYXBzZWRJY29uICE9PSB1bmRlZmluZWQgP1xyXG5cdFx0XHRcdFx0XHRcdFx0b3B0cy5jb2xsYXBzZWRJY29uIDpcclxuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gKSBdIDpcclxuXHRcdFx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArICggb3B0cy5leHBhbmRlZEljb24gIT09IHVuZGVmaW5lZCA/XHJcblx0XHRcdFx0XHRcdFx0XHRvcHRzLmV4cGFuZGVkSWNvbiA6XHJcblx0XHRcdFx0XHRcdFx0XHRjdXJyZW50T3B0cy5leHBhbmRlZEljb24gKSBdIClcclxuXHRcdFx0XHRcdFx0LmpvaW4oIFwiIFwiICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvbGRUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJ0bi1cIiwgY3VycmVudE9wdHMudGhlbWUgKTtcclxuXHRcdFx0bmV3VGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1idG4tXCIsIG9wdHMudGhlbWUgKTtcclxuXHRcdFx0YW5jaG9yLnJlbW92ZUNsYXNzKCBvbGRUaGVtZSApLmFkZENsYXNzKCBuZXdUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5jb250ZW50VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b2xkVGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLFxyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLmNvbnRlbnRUaGVtZSApO1xyXG5cdFx0XHRuZXdUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsXHJcblx0XHRcdFx0b3B0cy5jb250ZW50VGhlbWUgKTtcclxuXHRcdFx0dWkuY29udGVudC5yZW1vdmVDbGFzcyggb2xkVGhlbWUgKS5hZGRDbGFzcyggbmV3VGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMuaW5zZXQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1pbnNldFwiLCBvcHRzLmluc2V0ICk7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0cy5pbnNldCAmJiAoIG9wdHMuY29ybmVycyB8fCBjdXJyZW50T3B0cy5jb3JuZXJzICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdHMuY29ybmVycyAmJiAoIG9wdHMuaW5zZXQgfHwgY3VycmVudE9wdHMuaW5zZXQgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaGFzQ29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgaGFzQ29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGFuY2hvci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdHMubWluaSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHRoaXMuX2FwcGx5T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3JlbmRlcmVkT3B0aW9ucyA9IHRoaXMuX2dldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVFeHBhbmRDb2xsYXBzZTogZnVuY3Rpb24oIGlzQ29sbGFwc2UgKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMuX3JlbmRlcmVkT3B0aW9ucyxcclxuXHRcdFx0dWkgPSB0aGlzLl91aTtcclxuXHJcblx0XHR1aS5zdGF0dXMudGV4dCggaXNDb2xsYXBzZSA/IG9wdHMuZXhwYW5kQ3VlVGV4dCA6IG9wdHMuY29sbGFwc2VDdWVUZXh0ICk7XHJcblx0XHR1aS5oZWFkaW5nXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLWNvbGxhcHNlZFwiLCBpc0NvbGxhcHNlIClcclxuXHRcdFx0LmZpbmQoIFwiYVwiICkuZmlyc3QoKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktaWNvbi1cIiArIG9wdHMuZXhwYW5kZWRJY29uLCAhaXNDb2xsYXBzZSApXHJcblxyXG5cdFx0XHQvLyBsb2dpYyBvciBjYXVzZSBzYW1lIGljb24gZm9yIGV4cGFuZGVkL2NvbGxhcHNlZCBzdGF0ZSB3b3VsZCByZW1vdmUgdGhlIHVpLWljb24tY2xhc3NcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWljb24tXCIgKyBvcHRzLmNvbGxhcHNlZEljb24sICggaXNDb2xsYXBzZSB8fCBvcHRzLmV4cGFuZGVkSWNvbiA9PT0gb3B0cy5jb2xsYXBzZWRJY29uICkgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZFwiLCBpc0NvbGxhcHNlICk7XHJcblx0XHR1aS5jb250ZW50XHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1jb250ZW50LWNvbGxhcHNlZFwiLCBpc0NvbGxhcHNlIClcclxuXHRcdFx0LmF0dHIoIFwiYXJpYS1oaWRkZW5cIiwgaXNDb2xsYXBzZSApXHJcblx0XHRcdC50cmlnZ2VyKCBcInVwZGF0ZWxheW91dFwiICk7XHJcblx0XHR0aGlzLm9wdGlvbnMuY29sbGFwc2VkID0gaXNDb2xsYXBzZTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIGlzQ29sbGFwc2UgPyBcImNvbGxhcHNlXCIgOiBcImV4cGFuZFwiICk7XHJcblx0fSxcclxuXHJcblx0ZXhwYW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCBmYWxzZSApO1xyXG5cdH0sXHJcblxyXG5cdGNvbGxhcHNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHVpID0gdGhpcy5fdWksXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB1aS5wbGFjZWhvbGRlciApIHtcclxuXHRcdFx0dWkub3JpZ2luYWxIZWFkaW5nLmluc2VydEJlZm9yZSggdWkucGxhY2Vob2xkZXIgKTtcclxuXHRcdFx0dWkucGxhY2Vob2xkZXIucmVtb3ZlKCk7XHJcblx0XHRcdHVpLmhlYWRpbmcucmVtb3ZlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR1aS5zdGF0dXMucmVtb3ZlKCk7XHJcblx0XHRcdHVpLmhlYWRpbmdcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZyB1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLWNvbGxhcHNlZFwiIClcclxuXHRcdFx0XHQuY2hpbGRyZW4oKVxyXG5cdFx0XHRcdFx0LmNvbnRlbnRzKClcclxuXHRcdFx0XHRcdFx0LnVud3JhcCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHVpLmFuY2hvci5jb250ZW50cygpLnVud3JhcCgpO1xyXG5cdFx0dWkuY29udGVudC5jb250ZW50cygpLnVud3JhcCgpO1xyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZSB1aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWQgXCIgK1xyXG5cdFx0XHRcdFwidWktY29sbGFwc2libGUtdGhlbWVkLWNvbnRlbnQgdWktY29sbGFwc2libGUtaW5zZXQgdWktY29ybmVyLWFsbFwiICk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIERlZmF1bHRzIHRvIGJlIHVzZWQgYnkgYWxsIGluc3RhbmNlcyBvZiBjb2xsYXBzaWJsZSBpZiBwZXItaW5zdGFuY2UgdmFsdWVzXHJcbi8vIGFyZSB1bnNldCBvciBpZiBub3RoaW5nIGlzIHNwZWNpZmllZCBieSB3YXkgb2YgaW5oZXJpdGFuY2UgZnJvbSBhbiBhY2NvcmRpb24uXHJcbi8vIE5vdGUgdGhhdCB0aGlzIGhhc2ggZG9lcyBub3QgY29udGFpbiBvcHRpb25zIFwiY29sbGFwc2VkXCIgb3IgXCJoZWFkaW5nXCIsXHJcbi8vIGJlY2F1c2UgdGhvc2UgYXJlIG5vdCBpbmhlcml0YWJsZS5cclxuJC5tb2JpbGUuY29sbGFwc2libGUuZGVmYXVsdHMgPSB7XHJcblx0ZXhwYW5kQ3VlVGV4dDogXCIgY2xpY2sgdG8gZXhwYW5kIGNvbnRlbnRzXCIsXHJcblx0Y29sbGFwc2VDdWVUZXh0OiBcIiBjbGljayB0byBjb2xsYXBzZSBjb250ZW50c1wiLFxyXG5cdGNvbGxhcHNlZEljb246IFwicGx1c1wiLFxyXG5cdGNvbnRlbnRUaGVtZTogXCJpbmhlcml0XCIsXHJcblx0ZXhwYW5kZWRJY29uOiBcIm1pbnVzXCIsXHJcblx0aWNvbnBvczogXCJsZWZ0XCIsXHJcblx0aW5zZXQ6IHRydWUsXHJcblx0Y29ybmVyczogdHJ1ZSxcclxuXHR0aGVtZTogXCJpbmhlcml0XCIsXHJcblx0bWluaTogZmFsc2VcclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHVpU2NyZWVuSGlkZGVuUmVnZXggPSAvXFxidWktc2NyZWVuLWhpZGRlblxcYi87XHJcbmZ1bmN0aW9uIG5vSGlkZGVuQ2xhc3MoIGVsZW1lbnRzICkge1xyXG5cdHZhciBpbmRleCxcclxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aCxcclxuXHRcdHJlc3VsdCA9IFtdO1xyXG5cclxuXHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xyXG5cdFx0aWYgKCAhZWxlbWVudHNbIGluZGV4IF0uY2xhc3NOYW1lLm1hdGNoKCB1aVNjcmVlbkhpZGRlblJlZ2V4ICkgKSB7XHJcblx0XHRcdHJlc3VsdC5wdXNoKCBlbGVtZW50c1sgaW5kZXggXSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuICQoIHJlc3VsdCApO1xyXG59XHJcblxyXG4kLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyA9IHtcclxuXHRfZ2V0VmlzaWJsZXM6IGZ1bmN0aW9uKCAkZWxzLCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgdmlzaWJsZXM7XHJcblxyXG5cdFx0aWYgKCBjcmVhdGUgKSB7XHJcblx0XHRcdHZpc2libGVzID0gbm9IaWRkZW5DbGFzcyggJGVscyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmlzaWJsZXMgPSAkZWxzLmZpbHRlciggXCI6dmlzaWJsZVwiICk7XHJcblx0XHRcdGlmICggdmlzaWJsZXMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdHZpc2libGVzID0gbm9IaWRkZW5DbGFzcyggJGVscyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHZpc2libGVzO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRGaXJzdExhc3RDbGFzc2VzOiBmdW5jdGlvbiggJGVscywgJHZpc2libGVzLCBjcmVhdGUgKSB7XHJcblx0XHQkZWxzLnJlbW92ZUNsYXNzKCBcInVpLWZpcnN0LWNoaWxkIHVpLWxhc3QtY2hpbGRcIiApO1xyXG5cdFx0JHZpc2libGVzLmVxKCAwICkuYWRkQ2xhc3MoIFwidWktZmlyc3QtY2hpbGRcIiApLmVuZCgpLmxhc3QoKS5hZGRDbGFzcyggXCJ1aS1sYXN0LWNoaWxkXCIgKTtcclxuXHRcdGlmICggIWNyZWF0ZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwidXBkYXRlbGF5b3V0XCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVtb3ZlRmlyc3RMYXN0Q2xhc3NlczogZnVuY3Rpb24oICRlbHMgKSB7XHJcblx0XHQkZWxzLnJlbW92ZUNsYXNzKCBcInVpLWZpcnN0LWNoaWxkIHVpLWxhc3QtY2hpbGRcIiApO1xyXG5cdH1cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgPSBcIjptb2JpbGUtY29sbGFwc2libGUsIFwiICsgJC5tb2JpbGUuY29sbGFwc2libGUuaW5pdFNlbGVjdG9yO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNvbGxhcHNpYmxlc2V0XCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdC8vIFRoZSBpbml0U2VsZWN0b3IgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMC4gSW4gMS41LjAgd2Ugd2lsbCB1c2VcclxuXHQvLyA6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZXNldCcpIHdoaWNoIHdpbGwgYWxsb3cgdXMgdG8gZ2V0IHJpZCBvZiB0aGUgbGluZVxyXG5cdC8vIGJlbG93IGFsdG9nZXRoZXIsIGJlY2F1c2UgdGhlIGF1dG9pbml0IHdpbGwgZ2VuZXJhdGUgc3VjaCBhbiBpbml0U2VsZWN0b3JcclxuXHRpbml0U2VsZWN0b3I6IFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JyksOmpxbURhdGEocm9sZT0nY29sbGFwc2libGVzZXQnKVwiLFxyXG5cclxuXHRvcHRpb25zOiAkLmV4dGVuZCgge1xyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSwgJC5tb2JpbGUuY29sbGFwc2libGUuZGVmYXVsdHMgKSxcclxuXHJcblx0X2hhbmRsZUNvbGxhcHNpYmxlRXhwYW5kOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgY2xvc2VzdENvbGxhcHNpYmxlID0gJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggXCIudWktY29sbGFwc2libGVcIiApO1xyXG5cclxuXHRcdGlmICggY2xvc2VzdENvbGxhcHNpYmxlLnBhcmVudCgpLmlzKCBcIjptb2JpbGUtY29sbGFwc2libGVzZXQsIDpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlLXNldCcpXCIgKSApIHtcclxuXHRcdFx0Y2xvc2VzdENvbGxhcHNpYmxlXHJcblx0XHRcdFx0LnNpYmxpbmdzKCBcIi51aS1jb2xsYXBzaWJsZTpub3QoLnVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZClcIiApXHJcblx0XHRcdFx0LmNvbGxhcHNpYmxlKCBcImNvbGxhcHNlXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9jbGFzc2VzOiBcIlwiXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoICFvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRlbGVtLmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlLXNldCBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIG9wdHMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHQoIG9wdHMuY29ybmVycyAmJiBvcHRzLmluc2V0ID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCAkLm1vYmlsZS5jb2xsYXBzaWJsZS5pbml0U2VsZWN0b3IgKS5jb2xsYXBzaWJsZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCBlbGVtLCB7IGNvbGxhcHNpYmxlZXhwYW5kOiBcIl9oYW5kbGVDb2xsYXBzaWJsZUV4cGFuZFwiIH0gKTtcclxuXHR9LFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCBwcmVmaXgsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBwcmVmaXggKyB2YWx1ZSApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9pbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2goIHRydWUgKTtcclxuXHJcblx0XHQvLyBCZWNhdXNlIHRoZSBjb3JuZXJzIGFyZSBoYW5kbGVkIGJ5IHRoZSBjb2xsYXBzaWJsZSBpdHNlbGYgYW5kIHRoZSBkZWZhdWx0IHN0YXRlIGlzIGNvbGxhcHNlZFxyXG5cdFx0Ly8gVGhhdCB3YXMgY2F1c2luZyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQxMTZcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQuY2hpbGRyZW4oIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgKVxyXG5cdFx0XHQuZmlsdGVyKCBcIjpqcW1EYXRhKGNvbGxhcHNlZD0nZmFsc2UnKVwiIClcclxuXHRcdFx0LmNvbGxhcHNpYmxlKCBcImV4cGFuZFwiICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHJldCwgaGFzQ29ybmVycyxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dGhlbWVDbGFzcyA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCBvcHRpb25zLnRoZW1lICk7XHJcblxyXG5cdFx0aWYgKCB0aGVtZUNsYXNzICkge1xyXG5cdFx0XHRlbGVtXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgdGhpcy5vcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhlbWVDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5pbnNldCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdGlvbnMuaW5zZXQgJiYgKCBvcHRpb25zLmNvcm5lcnMgfHwgdGhpcy5vcHRpb25zLmNvcm5lcnMgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0aW9ucy5jb3JuZXJzICYmICggb3B0aW9ucy5pbnNldCB8fCB0aGlzLm9wdGlvbnMuaW5zZXQgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaGFzQ29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgaGFzQ29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldCA9IHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiOm1vYmlsZS1jb2xsYXBzaWJsZVwiICkuY29sbGFwc2libGUoIFwicmVmcmVzaFwiICk7XHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbCA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHR0aGlzLl9yZW1vdmVGaXJzdExhc3RDbGFzc2VzKCBlbC5jaGlsZHJlbiggY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciApICk7XHJcblx0XHRlbFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29sbGFwc2libGUtc2V0IHVpLWNvcm5lci1hbGwgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCB0aGlzLm9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdC5jaGlsZHJlbiggXCI6bW9iaWxlLWNvbGxhcHNpYmxlXCIgKVxyXG5cdFx0XHQuY29sbGFwc2libGUoIFwiZGVzdHJveVwiICk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgY29sbGFwc2libGVzSW5TZXQgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggJC5tb2JpbGUuY29sbGFwc2libGUuaW5pdFNlbGVjdG9yICkubm90KCBcIi51aS1jb2xsYXBzaWJsZVwiICkuY29sbGFwc2libGUoKTtcclxuXHJcblx0XHR0aGlzLl9hZGRGaXJzdExhc3RDbGFzc2VzKCBjb2xsYXBzaWJsZXNJblNldCwgdGhpcy5fZ2V0VmlzaWJsZXMoIGNvbGxhcHNpYmxlc0luU2V0LCBjcmVhdGUgKSwgY3JlYXRlICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCBmYWxzZSApO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBEZXByZWNhdGVkIGluIDEuNFxyXG4kLmZuLmZpZWxkY29udGFpbiA9IGZ1bmN0aW9uKC8qIG9wdGlvbnMgKi8pIHtcclxuXHRyZXR1cm4gdGhpcy5hZGRDbGFzcyggXCJ1aS1maWVsZC1jb250YWluXCIgKTtcclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5mbi5ncmlkID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcblx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdG8gPSAkLmV4dGVuZCh7XHJcblx0XHRcdFx0Z3JpZDogbnVsbFxyXG5cdFx0XHR9LCBvcHRpb25zICksXHJcblx0XHRcdCRraWRzID0gJHRoaXMuY2hpbGRyZW4oKSxcclxuXHRcdFx0Z3JpZENvbHMgPSB7IHNvbG86MSwgYToyLCBiOjMsIGM6NCwgZDo1IH0sXHJcblx0XHRcdGdyaWQgPSBvLmdyaWQsXHJcblx0XHRcdGl0ZXJhdG9yLFxyXG5cdFx0XHRsZXR0ZXI7XHJcblxyXG5cdFx0XHRpZiAoICFncmlkICkge1xyXG5cdFx0XHRcdGlmICggJGtpZHMubGVuZ3RoIDw9IDUgKSB7XHJcblx0XHRcdFx0XHRmb3IgKCBsZXR0ZXIgaW4gZ3JpZENvbHMgKSB7XHJcblx0XHRcdFx0XHRcdGlmICggZ3JpZENvbHNbIGxldHRlciBdID09PSAka2lkcy5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdFx0Z3JpZCA9IGxldHRlcjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRncmlkID0gXCJhXCI7XHJcblx0XHRcdFx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1ncmlkLWR1b1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGl0ZXJhdG9yID0gZ3JpZENvbHNbZ3JpZF07XHJcblxyXG5cdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktZ3JpZC1cIiArIGdyaWQgKTtcclxuXHJcblx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzEpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1hXCIgKTtcclxuXHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gMSApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibisyKVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stYlwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gMiApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibiszKVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stY1wiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gMyApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibis0KVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stZFwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gNCApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibis1KVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stZVwiICk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLm5hdmJhclwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0aWNvbnBvczogXCJ0b3BcIixcclxuXHRcdGdyaWQ6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHR2YXIgJG5hdmJhciA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0JG5hdmJ0bnMgPSAkbmF2YmFyLmZpbmQoIFwiYSwgYnV0dG9uXCIgKSxcclxuXHRcdFx0aWNvbnBvcyA9ICRuYXZidG5zLmZpbHRlciggXCI6anFtRGF0YShpY29uKVwiICkubGVuZ3RoID8gdGhpcy5vcHRpb25zLmljb25wb3MgOiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0JG5hdmJhci5hZGRDbGFzcyggXCJ1aS1uYXZiYXJcIiApXHJcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJuYXZpZ2F0aW9uXCIgKVxyXG5cdFx0XHQuZmluZCggXCJ1bFwiIClcclxuXHRcdFx0LmpxbUVuaGFuY2VhYmxlKClcclxuXHRcdFx0LmdyaWQoeyBncmlkOiB0aGlzLm9wdGlvbnMuZ3JpZCB9KTtcclxuXHJcblx0XHQkbmF2YnRuc1xyXG5cdFx0XHQuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGljb24gPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwiaWNvblwiICksXHJcblx0XHRcdFx0XHR0aGVtZSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJ0aGVtZVwiICksXHJcblx0XHRcdFx0XHRjbGFzc2VzID0gXCJ1aS1idG5cIjtcclxuXHJcblx0XHRcdFx0aWYgKCB0aGVtZSApIHtcclxuXHRcdFx0XHRcdGNsYXNzZXMgKz0gXCIgdWktYnRuLVwiICsgdGhlbWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggaWNvbiApIHtcclxuXHRcdFx0XHRcdGNsYXNzZXMgKz0gXCIgdWktaWNvbi1cIiArIGljb24gKyBcIiB1aS1idG4taWNvbi1cIiArIGljb25wb3M7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggY2xhc3NlcyApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQkbmF2YmFyLmRlbGVnYXRlKCBcImFcIiwgXCJ2Y2xpY2tcIiwgZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge1xyXG5cdFx0XHR2YXIgYWN0aXZlQnRuID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0aWYgKCAhKCBhY3RpdmVCdG4uaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApIHx8XHJcblxyXG5cdFx0XHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgYWZ0ZXIgMS40LjAgcmVsZWFzZVxyXG5cdFx0XHRcdC8vIG9ubHkgdWktc3RhdGUtZGlzYWJsZWQgc2hvdWxkIGJlIHByZXNlbnQgdGhlcmVhZnRlclxyXG5cdFx0XHRcdGFjdGl2ZUJ0bi5oYXNDbGFzcyggXCJ1aS1kaXNhYmxlZFwiICkgfHxcclxuXHRcdFx0XHRhY3RpdmVCdG4uaGFzQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICkgKSApIHtcclxuXHJcblx0XHRcdFx0JG5hdmJ0bnMucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0YWN0aXZlQnRuLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgY29kZSBiZWxvdyBpcyBhIHdvcmthcm91bmQgdG8gZml4ICMxMTgxXHJcblx0XHRcdFx0JCggZG9jdW1lbnQgKS5vbmUoIFwicGFnZWhpZGVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRhY3RpdmVCdG4ucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnMgaW4gdGhlIG5hdmJhciB3aXRoIHVpLXN0YXRlLXBlcnNpc3QgY2xhc3Mgc2hvdWxkIHJlZ2FpbiB0aGVpciBhY3RpdmUgc3RhdGUgYmVmb3JlIHBhZ2Ugc2hvd1xyXG5cdFx0JG5hdmJhci5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5iaW5kKCBcInBhZ2ViZWZvcmVzaG93XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkbmF2YnRucy5maWx0ZXIoIFwiLnVpLXN0YXRlLXBlcnNpc3RcIiApLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGdldEF0dHIgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGU7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5leHRlbmQoIHtcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRjb3VudFRoZW1lOiBudWxsLCAvKiBEZXByZWNhdGVkIGluIDEuNCAqL1xyXG5cdFx0ZGl2aWRlclRoZW1lOiBudWxsLFxyXG5cdFx0aWNvbjogXCJjYXJhdC1yXCIsXHJcblx0XHRzcGxpdEljb246IFwiY2FyYXQtclwiLFxyXG5cdFx0c3BsaXRUaGVtZTogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRpbnNldDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0ID0gdGhpcyxcclxuXHRcdFx0bGlzdHZpZXdDbGFzc2VzID0gXCJcIjtcclxuXHJcblx0XHRsaXN0dmlld0NsYXNzZXMgKz0gdC5vcHRpb25zLmluc2V0ID8gXCIgdWktbGlzdHZpZXctaW5zZXRcIiA6IFwiXCI7XHJcblxyXG5cdFx0aWYgKCAhIXQub3B0aW9ucy5pbnNldCApIHtcclxuXHRcdFx0bGlzdHZpZXdDbGFzc2VzICs9IHQub3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIjtcclxuXHRcdFx0bGlzdHZpZXdDbGFzc2VzICs9IHQub3B0aW9ucy5zaGFkb3cgPyBcIiB1aS1zaGFkb3dcIiA6IFwiXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY3JlYXRlIGxpc3R2aWV3IG1hcmt1cFxyXG5cdFx0dC5lbGVtZW50LmFkZENsYXNzKCBcIiB1aS1saXN0dmlld1wiICsgbGlzdHZpZXdDbGFzc2VzICk7XHJcblxyXG5cdFx0dC5yZWZyZXNoKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0Ly8gVE9ETzogUmVtb3ZlIGluIDEuNVxyXG5cdF9maW5kRmlyc3RFbGVtZW50QnlUYWdOYW1lOiBmdW5jdGlvbiggZWxlLCBuZXh0UHJvcCwgbGNOYW1lLCB1Y05hbWUgKSB7XHJcblx0XHR2YXIgZGljdCA9IHt9O1xyXG5cdFx0ZGljdFsgbGNOYW1lIF0gPSBkaWN0WyB1Y05hbWUgXSA9IHRydWU7XHJcblx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0aWYgKCBkaWN0WyBlbGUubm9kZU5hbWUgXSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZWxlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsZSA9IGVsZVsgbmV4dFByb3AgXTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH0sXHJcblx0Ly8gVE9ETzogUmVtb3ZlIGluIDEuNVxyXG5cdF9hZGRUaHVtYkNsYXNzZXM6IGZ1bmN0aW9uKCBjb250YWluZXJzICkge1xyXG5cdFx0dmFyIGksIGltZywgbGVuID0gY29udGFpbmVycy5sZW5ndGg7XHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG5cdFx0XHRpbWcgPSAkKCB0aGlzLl9maW5kRmlyc3RFbGVtZW50QnlUYWdOYW1lKCBjb250YWluZXJzWyBpIF0uZmlyc3RDaGlsZCwgXCJuZXh0U2libGluZ1wiLCBcImltZ1wiLCBcIklNR1wiICkgKTtcclxuXHRcdFx0aWYgKCBpbWcubGVuZ3RoICkge1xyXG5cdFx0XHRcdCQoIHRoaXMuX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWUoIGltZ1sgMCBdLnBhcmVudE5vZGUsIFwicGFyZW50Tm9kZVwiLCBcImxpXCIsIFwiTElcIiApICkuYWRkQ2xhc3MoIGltZy5oYXNDbGFzcyggXCJ1aS1saS1pY29uXCIgKSA/IFwidWktbGktaGFzLWljb25cIiA6IFwidWktbGktaGFzLXRodW1iXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9nZXRDaGlsZHJlbkJ5VGFnTmFtZTogZnVuY3Rpb24oIGVsZSwgbGNOYW1lLCB1Y05hbWUgKSB7XHJcblx0XHR2YXIgcmVzdWx0cyA9IFtdLFxyXG5cdFx0XHRkaWN0ID0ge307XHJcblx0XHRkaWN0WyBsY05hbWUgXSA9IGRpY3RbIHVjTmFtZSBdID0gdHJ1ZTtcclxuXHRcdGVsZSA9IGVsZS5maXJzdENoaWxkO1xyXG5cdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdGlmICggZGljdFsgZWxlLm5vZGVOYW1lIF0gKSB7XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGUgPSBlbGUubmV4dFNpYmxpbmc7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJCggcmVzdWx0cyApO1xyXG5cdH0sXHJcblxyXG5cdF9iZWZvcmVMaXN0dmlld1JlZnJlc2g6ICQubm9vcCxcclxuXHRfYWZ0ZXJMaXN0dmlld1JlZnJlc2g6ICQubm9vcCxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBidXR0b25DbGFzcywgcG9zLCBudW1saSwgaXRlbSwgaXRlbUNsYXNzLCBpdGVtVGhlbWUsIGl0ZW1JY29uLCBpY29uLCBhLFxyXG5cdFx0XHRpc0RpdmlkZXIsIHN0YXJ0Q291bnQsIG5ld1N0YXJ0Q291bnQsIHZhbHVlLCBsYXN0LCBzcGxpdHRoZW1lLCBzcGxpdFRoZW1lQ2xhc3MsIHNwbGl0aWNvbixcclxuXHRcdFx0YWx0QnV0dG9uQ2xhc3MsIGRpdmlkZXJUaGVtZSwgbGksXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdCRsaXN0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvbCA9ICEhJC5ub2RlTmFtZSggJGxpc3RbIDAgXSwgXCJvbFwiICksXHJcblx0XHRcdHN0YXJ0ID0gJGxpc3QuYXR0ciggXCJzdGFydFwiICksXHJcblx0XHRcdGl0ZW1DbGFzc0RpY3QgPSB7fSxcclxuXHRcdFx0Y291bnRCdWJibGVzID0gJGxpc3QuZmluZCggXCIudWktbGktY291bnRcIiApLFxyXG5cdFx0XHRjb3VudFRoZW1lID0gZ2V0QXR0ciggJGxpc3RbIDAgXSwgXCJjb3VudHRoZW1lXCIgKSB8fCB0aGlzLm9wdGlvbnMuY291bnRUaGVtZSxcclxuXHRcdFx0Y291bnRUaGVtZUNsYXNzID0gY291bnRUaGVtZSA/IFwidWktYm9keS1cIiArIGNvdW50VGhlbWUgOiBcInVpLWJvZHktaW5oZXJpdFwiO1xyXG5cclxuXHRcdGlmICggby50aGVtZSApIHtcclxuXHRcdFx0JGxpc3QuYWRkQ2xhc3MoIFwidWktZ3JvdXAtdGhlbWUtXCIgKyBvLnRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgYSBzdGFydCBhdHRyaWJ1dGUgaGFzIGJlZW4gc2V0IHdoaWxlIHRha2luZyBhIHZhbHVlIG9mIDAgaW50byBhY2NvdW50XHJcblx0XHRpZiAoIG9sICYmICggc3RhcnQgfHwgc3RhcnQgPT09IDAgKSApIHtcclxuXHRcdFx0c3RhcnRDb3VudCA9IHBhcnNlSW50KCBzdGFydCwgMTAgKSAtIDE7XHJcblx0XHRcdCRsaXN0LmNzcyggXCJjb3VudGVyLXJlc2V0XCIsIFwibGlzdG51bWJlcmluZyBcIiArIHN0YXJ0Q291bnQgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9iZWZvcmVMaXN0dmlld1JlZnJlc2goKTtcclxuXHJcblx0XHRsaSA9IHRoaXMuX2dldENoaWxkcmVuQnlUYWdOYW1lKCAkbGlzdFsgMCBdLCBcImxpXCIsIFwiTElcIiApO1xyXG5cclxuXHRcdGZvciAoIHBvcyA9IDAsIG51bWxpID0gbGkubGVuZ3RoOyBwb3MgPCBudW1saTsgcG9zKysgKSB7XHJcblx0XHRcdGl0ZW0gPSBsaS5lcSggcG9zICk7XHJcblx0XHRcdGl0ZW1DbGFzcyA9IFwiXCI7XHJcblxyXG5cdFx0XHRpZiAoIGNyZWF0ZSB8fCBpdGVtWyAwIF0uY2xhc3NOYW1lLnNlYXJjaCggL1xcYnVpLWxpLXN0YXRpY1xcYnxcXGJ1aS1saS1kaXZpZGVyXFxiLyApIDwgMCApIHtcclxuXHRcdFx0XHRhID0gdGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoIGl0ZW1bIDAgXSwgXCJhXCIsIFwiQVwiICk7XHJcblx0XHRcdFx0aXNEaXZpZGVyID0gKCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwicm9sZVwiICkgPT09IFwibGlzdC1kaXZpZGVyXCIgKTtcclxuXHRcdFx0XHR2YWx1ZSA9IGl0ZW0uYXR0ciggXCJ2YWx1ZVwiICk7XHJcblx0XHRcdFx0aXRlbVRoZW1lID0gZ2V0QXR0ciggaXRlbVsgMCBdLCBcInRoZW1lXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBhLmxlbmd0aCAmJiBhWyAwIF0uY2xhc3NOYW1lLnNlYXJjaCggL1xcYnVpLWJ0blxcYi8gKSA8IDAgJiYgIWlzRGl2aWRlciApIHtcclxuXHRcdFx0XHRcdGl0ZW1JY29uID0gZ2V0QXR0ciggaXRlbVsgMCBdLCBcImljb25cIiApO1xyXG5cdFx0XHRcdFx0aWNvbiA9ICggaXRlbUljb24gPT09IGZhbHNlICkgPyBmYWxzZSA6ICggaXRlbUljb24gfHwgby5pY29uICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gVE9ETzogUmVtb3ZlIGluIDEuNSB0b2dldGhlciB3aXRoIGxpbmtzLmpzIChsaW5rcy5qcyAvIC51aS1saW5rIGRlcHJlY2F0ZWQgaW4gMS40KVxyXG5cdFx0XHRcdFx0YS5yZW1vdmVDbGFzcyggXCJ1aS1saW5rXCIgKTtcclxuXHJcblx0XHRcdFx0XHRidXR0b25DbGFzcyA9IFwidWktYnRuXCI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBpdGVtVGhlbWUgKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbkNsYXNzICs9IFwiIHVpLWJ0bi1cIiArIGl0ZW1UaGVtZTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIGEubGVuZ3RoID4gMSApIHtcclxuXHRcdFx0XHRcdFx0aXRlbUNsYXNzID0gXCJ1aS1saS1oYXMtYWx0XCI7XHJcblxyXG5cdFx0XHRcdFx0XHRsYXN0ID0gYS5sYXN0KCk7XHJcblx0XHRcdFx0XHRcdHNwbGl0dGhlbWUgPSBnZXRBdHRyKCBsYXN0WyAwIF0sIFwidGhlbWVcIiApIHx8IG8uc3BsaXRUaGVtZSB8fCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwidGhlbWVcIiwgdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHRzcGxpdFRoZW1lQ2xhc3MgPSBzcGxpdHRoZW1lID8gXCIgdWktYnRuLVwiICsgc3BsaXR0aGVtZSA6IFwiXCI7XHJcblx0XHRcdFx0XHRcdHNwbGl0aWNvbiA9IGdldEF0dHIoIGxhc3RbIDAgXSwgXCJpY29uXCIgKSB8fCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwiaWNvblwiICkgfHwgby5zcGxpdEljb247XHJcblx0XHRcdFx0XHRcdGFsdEJ1dHRvbkNsYXNzID0gXCJ1aS1idG4gdWktYnRuLWljb24tbm90ZXh0IHVpLWljb24tXCIgKyBzcGxpdGljb24gKyBzcGxpdFRoZW1lQ2xhc3M7XHJcblxyXG5cdFx0XHRcdFx0XHRsYXN0XHJcblx0XHRcdFx0XHRcdFx0LmF0dHIoIFwidGl0bGVcIiwgJC50cmltKCBsYXN0LmdldEVuY29kZWRUZXh0KCkgKSApXHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCBhbHRCdXR0b25DbGFzcyApXHJcblx0XHRcdFx0XHRcdFx0LmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBSZWR1Y2UgdG8gdGhlIGZpcnN0IGFuY2hvciwgYmVjYXVzZSBvbmx5IHRoZSBmaXJzdCBnZXRzIHRoZSBidXR0b25DbGFzc1xyXG5cdFx0XHRcdFx0XHRhID0gYS5maXJzdCgpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggaWNvbiApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uQ2xhc3MgKz0gXCIgdWktYnRuLWljb24tcmlnaHQgdWktaWNvbi1cIiArIGljb247XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgYnV0dG9uQ2xhc3MgdG8gdGhlIChmaXJzdCkgYW5jaG9yXHJcblx0XHRcdFx0XHRhLmFkZENsYXNzKCBidXR0b25DbGFzcyApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGlzRGl2aWRlciApIHtcclxuXHRcdFx0XHRcdGRpdmlkZXJUaGVtZSA9ICggZ2V0QXR0ciggaXRlbVsgMCBdLCBcInRoZW1lXCIgKSB8fCBvLmRpdmlkZXJUaGVtZSB8fCBvLnRoZW1lICk7XHJcblxyXG5cdFx0XHRcdFx0aXRlbUNsYXNzID0gXCJ1aS1saS1kaXZpZGVyIHVpLWJhci1cIiArICggZGl2aWRlclRoZW1lID8gZGl2aWRlclRoZW1lIDogXCJpbmhlcml0XCIgKTtcclxuXHJcblx0XHRcdFx0XHRpdGVtLmF0dHIoIFwicm9sZVwiLCBcImhlYWRpbmdcIiApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGEubGVuZ3RoIDw9IDAgKSB7XHJcblx0XHRcdFx0XHRpdGVtQ2xhc3MgPSBcInVpLWxpLXN0YXRpYyB1aS1ib2R5LVwiICsgKCBpdGVtVGhlbWUgPyBpdGVtVGhlbWUgOiBcImluaGVyaXRcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIG9sICYmIHZhbHVlICkge1xyXG5cdFx0XHRcdFx0bmV3U3RhcnRDb3VudCA9IHBhcnNlSW50KCB2YWx1ZSAsIDEwICkgLSAxO1xyXG5cclxuXHRcdFx0XHRcdGl0ZW0uY3NzKCBcImNvdW50ZXItcmVzZXRcIiwgXCJsaXN0bnVtYmVyaW5nIFwiICsgbmV3U3RhcnRDb3VudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSW5zdGVhZCBvZiBzZXR0aW5nIGl0ZW0gY2xhc3MgZGlyZWN0bHkgb24gdGhlIGxpc3QgaXRlbVxyXG5cdFx0XHQvLyBhdCB0aGlzIHBvaW50IGluIHRpbWUsIHB1c2ggdGhlIGl0ZW0gaW50byBhIGRpY3Rpb25hcnlcclxuXHRcdFx0Ly8gdGhhdCB0ZWxscyB1cyB3aGF0IGNsYXNzIHRvIHNldCBvbiBpdCBzbyB3ZSBjYW4gZG8gdGhpcyBhZnRlciB0aGlzXHJcblx0XHRcdC8vIHByb2Nlc3NpbmcgbG9vcCBpcyBmaW5pc2hlZC5cclxuXHJcblx0XHRcdGlmICggIWl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdICkge1xyXG5cdFx0XHRcdGl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdID0gW107XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdLnB1c2goIGl0ZW1bIDAgXSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgYXBwcm9wcmlhdGUgbGlzdHZpZXcgaXRlbSBjbGFzc2VzIG9uIGVhY2ggbGlzdCBpdGVtLlxyXG5cdFx0Ly8gVGhlIG1haW4gcmVhc29uIHdlIGRpZG4ndCBkbyB0aGlzXHJcblx0XHQvLyBpbiB0aGUgZm9yLWxvb3AgYWJvdmUgaXMgYmVjYXVzZSB3ZSBjYW4gZWxpbWluYXRlIHBlci1pdGVtIGZ1bmN0aW9uIG92ZXJoZWFkXHJcblx0XHQvLyBieSBjYWxsaW5nIGFkZENsYXNzKCkgYW5kIGNoaWxkcmVuKCkgb25jZSBvciB0d2ljZSBhZnRlcndhcmRzLiBUaGlzXHJcblx0XHQvLyBjYW4gZ2l2ZSB1cyBhIHNpZ25pZmljYW50IGJvb3N0IG9uIHBsYXRmb3JtcyBsaWtlIFdQNy41LlxyXG5cclxuXHRcdGZvciAoIGl0ZW1DbGFzcyBpbiBpdGVtQ2xhc3NEaWN0ICkge1xyXG5cdFx0XHQkKCBpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXSApLmFkZENsYXNzKCBpdGVtQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb3VudEJ1YmJsZXMuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS5jbG9zZXN0KCBcImxpXCIgKS5hZGRDbGFzcyggXCJ1aS1saS1oYXMtY291bnRcIiApO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAoIGNvdW50VGhlbWVDbGFzcyApIHtcclxuXHRcdFx0Y291bnRCdWJibGVzLm5vdCggXCJbY2xhc3MqPSd1aS1ib2R5LSddXCIgKS5hZGRDbGFzcyggY291bnRUaGVtZUNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQuIEZyb20gMS41IHlvdSBoYXZlIHRvIGFkZCBjbGFzcyB1aS1saS1oYXMtdGh1bWIgb3IgdWktbGktaGFzLWljb24gdG8gdGhlIExJLlxyXG5cdFx0dGhpcy5fYWRkVGh1bWJDbGFzc2VzKCBsaSApO1xyXG5cdFx0dGhpcy5fYWRkVGh1bWJDbGFzc2VzKCBsaS5maW5kKCBcIi51aS1idG5cIiApICk7XHJcblxyXG5cdFx0dGhpcy5fYWZ0ZXJMaXN0dmlld1JlZnJlc2goKTtcclxuXHJcblx0XHR0aGlzLl9hZGRGaXJzdExhc3RDbGFzc2VzKCBsaSwgdGhpcy5fZ2V0VmlzaWJsZXMoIGxpLCBjcmVhdGUgKSwgY3JlYXRlICk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRBdXRvZGl2aWRlcnNTZWxlY3RvciggZWx0ICkge1xyXG5cdC8vIGxvb2sgZm9yIHRoZSB0ZXh0IGluIHRoZSBnaXZlbiBlbGVtZW50XHJcblx0dmFyIHRleHQgPSAkLnRyaW0oIGVsdC50ZXh0KCkgKSB8fCBudWxsO1xyXG5cclxuXHRpZiAoICF0ZXh0ICkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvLyBjcmVhdGUgdGhlIHRleHQgZm9yIHRoZSBkaXZpZGVyIChmaXJzdCB1cHBlcmNhc2VkIGxldHRlcilcclxuXHR0ZXh0ID0gdGV4dC5zbGljZSggMCwgMSApLnRvVXBwZXJDYXNlKCk7XHJcblxyXG5cdHJldHVybiB0ZXh0O1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5tb2JpbGUubGlzdHZpZXcsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRhdXRvZGl2aWRlcnM6IGZhbHNlLFxyXG5cdFx0YXV0b2RpdmlkZXJzU2VsZWN0b3I6IGRlZmF1bHRBdXRvZGl2aWRlcnNTZWxlY3RvclxyXG5cdH0sXHJcblxyXG5cdF9iZWZvcmVMaXN0dmlld1JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b2RpdmlkZXJzICkge1xyXG5cdFx0XHR0aGlzLl9yZXBsYWNlRGl2aWRlcnMoKTtcclxuXHRcdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlcGxhY2VEaXZpZGVyczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaSwgbGlzLCBsaSwgZGl2aWRlclRleHQsXHJcblx0XHRcdGxhc3REaXZpZGVyVGV4dCA9IG51bGwsXHJcblx0XHRcdGxpc3QgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGRpdmlkZXI7XHJcblxyXG5cdFx0bGlzdC5jaGlsZHJlbiggXCJsaTpqcW1EYXRhKHJvbGU9J2xpc3QtZGl2aWRlcicpXCIgKS5yZW1vdmUoKTtcclxuXHJcblx0XHRsaXMgPSBsaXN0LmNoaWxkcmVuKCBcImxpXCIgKTtcclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IGxpcy5sZW5ndGggOyBpKysgKSB7XHJcblx0XHRcdGxpID0gbGlzWyBpIF07XHJcblx0XHRcdGRpdmlkZXJUZXh0ID0gdGhpcy5vcHRpb25zLmF1dG9kaXZpZGVyc1NlbGVjdG9yKCAkKCBsaSApICk7XHJcblxyXG5cdFx0XHRpZiAoIGRpdmlkZXJUZXh0ICYmIGxhc3REaXZpZGVyVGV4dCAhPT0gZGl2aWRlclRleHQgKSB7XHJcblx0XHRcdFx0ZGl2aWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xyXG5cdFx0XHRcdGRpdmlkZXIuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBkaXZpZGVyVGV4dCApICk7XHJcblx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlXCIsIFwibGlzdC1kaXZpZGVyXCIgKTtcclxuXHRcdFx0XHRsaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZGl2aWRlciwgbGkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGFzdERpdmlkZXJUZXh0ID0gZGl2aWRlclRleHQ7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHJkaXZpZGVyID0gLyhefFxccyl1aS1saS1kaXZpZGVyKCR8XFxzKS8sXHJcblx0cmhpZGRlbiA9IC8oXnxcXHMpdWktc2NyZWVuLWhpZGRlbigkfFxccykvO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQubW9iaWxlLmxpc3R2aWV3LCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0aGlkZURpdmlkZXJzOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9hZnRlckxpc3R2aWV3UmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaXRlbXMsIGlkeCwgaXRlbSwgaGlkZURpdmlkZXIgPSB0cnVlO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhpZGVEaXZpZGVycyApIHtcclxuXHRcdFx0aXRlbXMgPSB0aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZSggdGhpcy5lbGVtZW50WyAwIF0sIFwibGlcIiwgXCJMSVwiICk7XHJcblx0XHRcdGZvciAoIGlkeCA9IGl0ZW1zLmxlbmd0aCAtIDEgOyBpZHggPiAtMSA7IGlkeC0tICkge1xyXG5cdFx0XHRcdGl0ZW0gPSBpdGVtc1sgaWR4IF07XHJcblx0XHRcdFx0aWYgKCBpdGVtLmNsYXNzTmFtZS5tYXRjaCggcmRpdmlkZXIgKSApIHtcclxuXHRcdFx0XHRcdGlmICggaGlkZURpdmlkZXIgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gaXRlbS5jbGFzc05hbWUgKyBcIiB1aS1zY3JlZW4taGlkZGVuXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRoaWRlRGl2aWRlciA9IHRydWU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmICggIWl0ZW0uY2xhc3NOYW1lLm1hdGNoKCByaGlkZGVuICkgKSB7XHJcblx0XHRcdFx0XHRcdGhpZGVEaXZpZGVyID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUubm9qcyA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblx0JCggXCI6anFtRGF0YShyb2xlPSdub2pzJylcIiwgdGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktbm9qc1wiICk7XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgPSB7XHJcblx0X2hhbmRsZUZvcm1SZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiZm9ybVwiICksIHtcclxuXHRcdFx0cmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuX2RlbGF5KCBcIl9yZXNldFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qXHJcbiogXCJjaGVja2JveHJhZGlvXCIgcGx1Z2luXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBlc2NhcGVJZCA9ICQubW9iaWxlLnBhdGguaGFzaFRvU2VsZWN0b3I7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY2hlY2tib3hyYWRpb1wiLCAkLmV4dGVuZCgge1xyXG5cclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXQ6bm90KCA6anFtRGF0YShyb2xlPSdmbGlwc3dpdGNoJyApIClbdHlwZT0nY2hlY2tib3gnXSxpbnB1dFt0eXBlPSdyYWRpbyddOm5vdCggOmpxbURhdGEocm9sZT0nZmxpcHN3aXRjaCcgKSlcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IFwiaW5oZXJpdFwiLFxyXG5cdFx0bWluaTogZmFsc2UsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHRpY29ucG9zOiBcImxlZnRcIlxyXG5cclxuXHR9LFxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlucHV0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpbmhlcml0QXR0ciA9IGZ1bmN0aW9uKCBpbnB1dCwgZGF0YUF0dHIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGlucHV0LmpxbURhdGEoIGRhdGFBdHRyICkgfHxcclxuXHRcdFx0XHRcdGlucHV0LmNsb3Nlc3QoIFwiZm9ybSwgZmllbGRzZXRcIiApLmpxbURhdGEoIGRhdGFBdHRyICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGxhYmVsID0gdGhpcy5vcHRpb25zLmVuaGFuY2VkID9cclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRlbGVtZW50OiB0aGlzLmVsZW1lbnQuc2libGluZ3MoIFwibGFiZWxcIiApLFxyXG5cdFx0XHRcdFx0aXNQYXJlbnQ6IGZhbHNlXHJcblx0XHRcdFx0fSA6XHJcblx0XHRcdFx0dGhpcy5fZmluZExhYmVsKCksXHJcblx0XHRcdGlucHV0dHlwZSA9IGlucHV0WzBdLnR5cGUsXHJcblx0XHRcdGNoZWNrZWRDbGFzcyA9IFwidWktXCIgKyBpbnB1dHR5cGUgKyBcIi1vblwiLFxyXG5cdFx0XHR1bmNoZWNrZWRDbGFzcyA9IFwidWktXCIgKyBpbnB1dHR5cGUgKyBcIi1vZmZcIjtcclxuXHJcblx0XHRpZiAoIGlucHV0dHlwZSAhPT0gXCJjaGVja2JveFwiICYmIGlucHV0dHlwZSAhPT0gXCJyYWRpb1wiICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnRbMF0uZGlzYWJsZWQgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0by5pY29ucG9zID0gaW5oZXJpdEF0dHIoIGlucHV0LCBcImljb25wb3NcIiApIHx8XHJcblx0XHRcdGxhYmVsLmVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImljb25wb3NcIiApIHx8IG8uaWNvbnBvcyxcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggb3B0aW9uc1xyXG5cdFx0by5taW5pID0gaW5oZXJpdEF0dHIoIGlucHV0LCBcIm1pbmlcIiApIHx8IG8ubWluaTtcclxuXHJcblx0XHQvLyBFeHBvc2UgZm9yIG90aGVyIG1ldGhvZHNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdGlucHV0OiBpbnB1dCxcclxuXHRcdFx0bGFiZWw6IGxhYmVsLmVsZW1lbnQsXHJcblx0XHRcdGxhYmVsSXNQYXJlbnQ6IGxhYmVsLmlzUGFyZW50LFxyXG5cdFx0XHRpbnB1dHR5cGU6IGlucHV0dHlwZSxcclxuXHRcdFx0Y2hlY2tlZENsYXNzOiBjaGVja2VkQ2xhc3MsXHJcblx0XHRcdHVuY2hlY2tlZENsYXNzOiB1bmNoZWNrZWRDbGFzc1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIGxhYmVsLmVsZW1lbnQsIHtcclxuXHRcdFx0dm1vdXNlb3ZlcjogXCJfaGFuZGxlTGFiZWxWTW91c2VPdmVyXCIsXHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlTGFiZWxWQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oIGlucHV0LCB7XHJcblx0XHRcdHZtb3VzZWRvd246IFwiX2NhY2hlVmFsc1wiLFxyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZUlucHV0VkNsaWNrXCIsXHJcblx0XHRcdGZvY3VzOiBcIl9oYW5kbGVJbnB1dEZvY3VzXCIsXHJcblx0XHRcdGJsdXI6IFwiX2hhbmRsZUlucHV0Qmx1clwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9maW5kTGFiZWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhcmVudExhYmVsLCBsYWJlbCwgaXNQYXJlbnQsXHJcblx0XHRcdGlucHV0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRsYWJlbHNMaXN0ID0gaW5wdXRbIDAgXS5sYWJlbHM7XHJcblxyXG5cdFx0aWYoIGxhYmVsc0xpc3QgJiYgbGFiZWxzTGlzdC5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRsYWJlbCA9ICQoIGxhYmVsc0xpc3RbIDAgXSApO1xyXG5cdFx0XHRpc1BhcmVudCA9ICQuY29udGFpbnMoIGxhYmVsWyAwIF0sIGlucHV0WyAwIF0gKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBhcmVudExhYmVsID0gaW5wdXQuY2xvc2VzdCggXCJsYWJlbFwiICk7XHJcblx0XHRcdGlzUGFyZW50ID0gKCBwYXJlbnRMYWJlbC5sZW5ndGggPiAwICk7XHJcblxyXG5cdFx0XHQvLyBOT1RFOiBXaW5kb3dzIFBob25lIGNvdWxkIG5vdCBmaW5kIHRoZSBsYWJlbCB0aHJvdWdoIGEgc2VsZWN0b3JcclxuXHRcdFx0Ly8gZmlsdGVyIHdvcmtzIHRob3VnaC5cclxuXHRcdFx0bGFiZWwgPSBpc1BhcmVudCA/IHBhcmVudExhYmVsIDpcclxuXHRcdFx0XHQkKCB0aGlzLmRvY3VtZW50WyAwIF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwibGFiZWxcIiApIClcclxuXHRcdFx0XHRcdC5maWx0ZXIoIFwiW2Zvcj0nXCIgKyBlc2NhcGVJZCggaW5wdXRbIDAgXS5pZCApICsgXCInXVwiIClcclxuXHRcdFx0XHRcdC5maXJzdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGVsZW1lbnQ6IGxhYmVsLFxyXG5cdFx0XHRpc1BhcmVudDogaXNQYXJlbnRcclxuXHRcdH07XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5sYWJlbC5hZGRDbGFzcyggXCJ1aS1idG4gdWktY29ybmVyLWFsbFwiKTtcclxuXHJcblx0XHRpZiAoIHRoaXMubGFiZWxJc1BhcmVudCApIHtcclxuXHRcdFx0dGhpcy5pbnB1dC5hZGQoIHRoaXMubGFiZWwgKS53cmFwQWxsKCB0aGlzLl93cmFwcGVyKCkgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vdGhpcy5lbGVtZW50LnJlcGxhY2VXaXRoKCB0aGlzLmlucHV0LmFkZCggdGhpcy5sYWJlbCApLndyYXBBbGwoIHRoaXMuX3dyYXBwZXIoKSApICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC53cmFwKCB0aGlzLl93cmFwcGVyKCkgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnBhcmVudCgpLnByZXBlbmQoIHRoaXMubGFiZWwgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXcmFwIHRoZSBpbnB1dCArIGxhYmVsIGluIGEgZGl2XHJcblxyXG5cdFx0dGhpcy5fc2V0T3B0aW9ucyh7XHJcblx0XHRcdFwidGhlbWVcIjogdGhpcy5vcHRpb25zLnRoZW1lLFxyXG5cdFx0XHRcImljb25wb3NcIjogdGhpcy5vcHRpb25zLmljb25wb3MsXHJcblx0XHRcdFwibWluaVwiOiB0aGlzLm9wdGlvbnMubWluaVxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdF93cmFwcGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXYgY2xhc3M9J1wiICArXHJcblx0XHRcdCggdGhpcy5vcHRpb25zLndyYXBwZXJDbGFzcyA/IHRoaXMub3B0aW9ucy53cmFwcGVyQ2xhc3MgOiBcIlwiICkgK1xyXG5cdFx0XHRcIiB1aS1cIiArIHRoaXMuaW5wdXR0eXBlICtcclxuXHRcdFx0KCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPyBcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiIDogXCJcIiApICsgXCInID48L2Rpdj5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dEZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMubGFiZWwuYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRCbHVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMubGFiZWwucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRWQ2xpY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gQWRkcyBjaGVja2VkIGF0dHJpYnV0ZSB0byBjaGVja2VkIGlucHV0IHdoZW4ga2V5Ym9hcmQgaXMgdXNlZFxyXG5cdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiLCB0aGlzLmVsZW1lbnQuaXMoIFwiOmNoZWNrZWRcIiApICk7XHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLm5vdCggdGhpcy5lbGVtZW50ICkucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcblx0XHR0aGlzLl91cGRhdGVBbGwoIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGFiZWxWTW91c2VPdmVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMubGFiZWwucGFyZW50KCkuaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGFiZWxWQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHRpZiAoIGlucHV0LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jYWNoZVZhbHMoKTtcclxuXHJcblx0XHRpbnB1dC5wcm9wKCBcImNoZWNrZWRcIiwgdGhpcy5pbnB1dHR5cGUgPT09IFwicmFkaW9cIiAmJiB0cnVlIHx8ICFpbnB1dC5wcm9wKCBcImNoZWNrZWRcIiApICk7XHJcblxyXG5cdFx0Ly8gdHJpZ2dlciBjbGljayBoYW5kbGVyJ3MgYm91bmQgZGlyZWN0bHkgdG8gdGhlIGlucHV0IGFzIGEgc3Vic3RpdHV0ZSBmb3JcclxuXHRcdC8vIGhvdyBsYWJlbCBjbGlja3MgYmVoYXZlIG5vcm1hbGx5IGluIHRoZSBicm93c2Vyc1xyXG5cdFx0Ly8gVE9ETzogaXQgd291bGQgYmUgbmljZSB0byBsZXQgdGhlIGJyb3dzZXIncyBoYW5kbGUgdGhlIGNsaWNrcyBhbmQgcGFzcyB0aGVtXHJcblx0XHQvLyAgICAgICB0aHJvdWdoIHRvIHRoZSBhc3NvY2lhdGUgaW5wdXQuIHdlIGNhbiBzd2FsbG93IHRoYXQgY2xpY2sgYXQgdGhlIHBhcmVudFxyXG5cdFx0Ly8gICAgICAgd3JhcHBlciBlbGVtZW50IGxldmVsXHJcblx0XHRpbnB1dC50cmlnZ2VySGFuZGxlciggXCJjbGlja1wiICk7XHJcblxyXG5cdFx0Ly8gSW5wdXQgc2V0IGZvciBjb21tb24gcmFkaW8gYnV0dG9ucyB3aWxsIGNvbnRhaW4gYWxsIHRoZSByYWRpb1xyXG5cdFx0Ly8gYnV0dG9ucywgYnV0IHdpbGwgbm90IGZvciBjaGVja2JveGVzLiBjbGVhcmluZyB0aGUgY2hlY2tlZCBzdGF0dXNcclxuXHRcdC8vIG9mIG90aGVyIHJhZGlvcyBlbnN1cmVzIHRoZSBhY3RpdmUgYnV0dG9uIHN0YXRlIGlzIGFwcGxpZWQgcHJvcGVybHlcclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkubm90KCBpbnB1dCApLnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG5cclxuXHRcdHRoaXMuX3VwZGF0ZUFsbCgpO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdF9jYWNoZVZhbHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLmF0dHIoXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImNhY2hlVmFsXCIsIHRoaXMuY2hlY2tlZCApO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Ly8gUmV0dXJucyB0aG9zZSByYWRpbyBidXR0b25zIHRoYXQgYXJlIHN1cHBvc2VkIHRvIGJlIGluIHRoZSBzYW1lIGdyb3VwIGFzXHJcblx0Ly8gdGhpcyByYWRpbyBidXR0b24uIEluIHRoZSBjYXNlIG9mIGEgY2hlY2tib3ggb3IgYSByYWRpbyBsYWNraW5nIGEgbmFtZVxyXG5cdC8vIGF0dHJpYnV0ZSwgaXQgcmV0dXJucyB0aGlzLmVsZW1lbnQuXHJcblx0X2dldElucHV0U2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RvciwgZm9ybUlkLFxyXG5cdFx0XHRyYWRpbyA9IHRoaXMuZWxlbWVudFsgMCBdLFxyXG5cdFx0XHRuYW1lID0gcmFkaW8ubmFtZSxcclxuXHRcdFx0Zm9ybSA9IHJhZGlvLmZvcm0sXHJcblx0XHRcdGRvYyA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCkubGFzdCgpLmdldCggMCApLFxyXG5cclxuXHRcdFx0Ly8gQSByYWRpbyBpcyBhbHdheXMgYSBtZW1iZXIgb2YgaXRzIG93biBncm91cFxyXG5cdFx0XHRyYWRpb3MgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gT25seSBzdGFydCBydW5uaW5nIHNlbGVjdG9ycyBpZiB0aGlzIGlzIGFuIGF0dGFjaGVkIHJhZGlvIGJ1dHRvbiB3aXRoIGEgbmFtZVxyXG5cdFx0aWYgKCBuYW1lICYmIHRoaXMuaW5wdXR0eXBlID09PSBcInJhZGlvXCIgJiYgZG9jICkge1xyXG5cdFx0XHRzZWxlY3RvciA9IFwiaW5wdXRbdHlwZT0ncmFkaW8nXVtuYW1lPSdcIiArIGVzY2FwZUlkKCBuYW1lICkgKyBcIiddXCI7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBpbnNpZGUgYSBmb3JtXHJcblx0XHRcdGlmICggZm9ybSApIHtcclxuXHRcdFx0XHRmb3JtSWQgPSBmb3JtLmdldEF0dHJpYnV0ZSggXCJpZFwiICk7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSBmb3JtIGhhcyBhbiBJRCwgY29sbGVjdCByYWRpb3Mgc2NhdHRlcmVkIHRocm91Z2h0IHRoZSBkb2N1bWVudCB3aGljaFxyXG5cdFx0XHRcdC8vIG5ldmVydGhlbGVzcyBhcmUgcGFydCBvZiB0aGUgZm9ybSBieSB3YXkgb2YgdGhlIHZhbHVlIG9mIHRoZWlyIGZvcm0gYXR0cmlidXRlXHJcblx0XHRcdFx0aWYgKCBmb3JtSWQgKSB7XHJcblx0XHRcdFx0XHRyYWRpb3MgPSAkKCBzZWxlY3RvciArIFwiW2Zvcm09J1wiICsgZXNjYXBlSWQoIGZvcm1JZCApICsgXCInXVwiLCBkb2MgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFsc28gYWRkIHRvIHRob3NlIHRoZSByYWRpb3MgaW4gdGhlIGZvcm0gaXRzZWxmXHJcblx0XHRcdFx0cmFkaW9zID0gJCggZm9ybSApLmZpbmQoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHQvLyBTb21lIHJhZGlvcyBpbnNpZGUgdGhlIGZvcm0gbWF5IGJlbG9uZyB0byBzb21lIG90aGVyIGZvcm0gYnkgdmlydHVlIG9mXHJcblx0XHRcdFx0XHQvLyBoYXZpbmcgYSBmb3JtIGF0dHJpYnV0ZSBkZWZpbmVkIG9uIHRoZW0sIHNvIHdlIG11c3QgZmlsdGVyIHRoZW0gb3V0IGhlcmVcclxuXHRcdFx0XHRcdHJldHVybiAoIHRoaXMuZm9ybSA9PT0gZm9ybSApO1xyXG5cdFx0XHRcdH0pLmFkZCggcmFkaW9zICk7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBvdXRzaWRlIGEgZm9ybVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBDb2xsZWN0IGFsbCB0aG9zZSByYWRpb3Mgd2hpY2ggYXJlIGFsc28gb3V0c2lkZSBvZiBhIGZvcm0gYW5kIG1hdGNoIG91ciBuYW1lXHJcblx0XHRcdFx0cmFkaW9zID0gJCggc2VsZWN0b3IsIGRvYyApLmZpbHRlciggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gIXRoaXMuZm9ybTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJhZGlvcztcclxuXHR9LFxyXG5cclxuXHRfdXBkYXRlQWxsOiBmdW5jdGlvbiggY2hhbmdlVHJpZ2dlcmVkICkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdGlmICggKCB0aGlzLmNoZWNrZWQgfHwgc2VsZi5pbnB1dHR5cGUgPT09IFwiY2hlY2tib3hcIiApICYmICFjaGFuZ2VUcmlnZ2VyZWQgKSB7XHJcblx0XHRcdFx0JHRoaXMudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiICk7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIElzIHRoZSB3aWRnZXQgc3VwcG9zZWQgdG8gZGlzcGxheSBhbiBpY29uP1xyXG5cdF9oYXNJY29uOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb250cm9sZ3JvdXAsIGNvbnRyb2xncm91cFdpZGdldCxcclxuXHRcdFx0Y29udHJvbGdyb3VwQ29uc3RydWN0b3IgPSAkLm1vYmlsZS5jb250cm9sZ3JvdXA7XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGNvbnRyb2xncm91cCB3aWRnZXQgaXMgZGVmaW5lZCAuLi5cclxuXHRcdGlmICggY29udHJvbGdyb3VwQ29uc3RydWN0b3IgKSB7XHJcblx0XHRcdGNvbnRyb2xncm91cCA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KFxyXG5cdFx0XHRcdFwiOm1vYmlsZS1jb250cm9sZ3JvdXAsXCIgK1xyXG5cdFx0XHRcdGNvbnRyb2xncm91cENvbnN0cnVjdG9yLnByb3RvdHlwZS5pbml0U2VsZWN0b3IgKTtcclxuXHJcblx0XHRcdC8vIC4uLiBhbmQgdGhlIGNoZWNrYm94IGlzIGluIGEgY29udHJvbGdyb3VwIC4uLlxyXG5cdFx0XHRpZiAoIGNvbnRyb2xncm91cC5sZW5ndGggPiAwICkge1xyXG5cclxuXHRcdFx0XHQvLyAuLi4gbG9vayBmb3IgYSBjb250cm9sZ3JvdXAgd2lkZ2V0IGluc3RhbmNlLCBhbmQgLi4uXHJcblx0XHRcdFx0Y29udHJvbGdyb3VwV2lkZ2V0ID0gJC5kYXRhKCBjb250cm9sZ3JvdXBbIDAgXSwgXCJtb2JpbGUtY29udHJvbGdyb3VwXCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gLi4uIGlmIGZvdW5kLCBkZWNpZGUgYmFzZWQgb24gdGhlIG9wdGlvbiB2YWx1ZSwgLi4uXHJcblx0XHRcdFx0cmV0dXJuICggKCBjb250cm9sZ3JvdXBXaWRnZXQgPyBjb250cm9sZ3JvdXBXaWRnZXQub3B0aW9ucy50eXBlIDpcclxuXHJcblx0XHRcdFx0XHQvLyAuLi4gb3RoZXJ3aXNlIGRlY2lkZSBiYXNlZCBvbiB0aGUgXCJ0eXBlXCIgZGF0YSBhdHRyaWJ1dGUuXHJcblx0XHRcdFx0XHRjb250cm9sZ3JvdXAuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInR5cGVcIiApICkgIT09IFwiaG9yaXpvbnRhbFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3JtYWxseSwgdGhlIHdpZGdldCBkaXNwbGF5cyBhbiBpY29uLlxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaXNDaGVja2VkID0gdGhpcy5lbGVtZW50WyAwIF0uY2hlY2tlZCxcclxuXHRcdFx0YWN0aXZlID0gJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MsXHJcblx0XHRcdGljb25wb3NDbGFzcyA9IFwidWktYnRuLWljb24tXCIgKyB0aGlzLm9wdGlvbnMuaWNvbnBvcyxcclxuXHRcdFx0YWRkQ2xhc3NlcyA9IFtdLFxyXG5cdFx0XHRyZW1vdmVDbGFzc2VzID0gW107XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9oYXNJY29uKCkgKSB7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggYWN0aXZlICk7XHJcblx0XHRcdGFkZENsYXNzZXMucHVzaCggaWNvbnBvc0NsYXNzICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIGljb25wb3NDbGFzcyApO1xyXG5cdFx0XHQoIGlzQ2hlY2tlZCA/IGFkZENsYXNzZXMgOiByZW1vdmVDbGFzc2VzICkucHVzaCggYWN0aXZlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpc0NoZWNrZWQgKSB7XHJcblx0XHRcdGFkZENsYXNzZXMucHVzaCggdGhpcy5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCB0aGlzLnVuY2hlY2tlZENsYXNzICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRhZGRDbGFzc2VzLnB1c2goIHRoaXMudW5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCB0aGlzLmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApICk7XHJcblxyXG5cdFx0dGhpcy5sYWJlbFxyXG5cdFx0XHQuYWRkQ2xhc3MoIGFkZENsYXNzZXMuam9pbiggXCIgXCIgKSApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggcmVtb3ZlQ2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmxhYmVsLnBhcmVudCgpO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBsYWJlbCA9IHRoaXMubGFiZWwsXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRvdXRlciA9IHRoaXMud2lkZ2V0KCksXHJcblx0XHRcdGhhc0ljb24gPSB0aGlzLl9oYXNJY29uKCk7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuaW5wdXQucHJvcCggXCJkaXNhYmxlZFwiLCAhIW9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgISFvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsICEhb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0bGFiZWxcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLVwiICsgY3VycmVudE9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMud3JhcHBlckNsYXNzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBjdXJyZW50T3B0aW9ucy53cmFwcGVyQ2xhc3MgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggb3B0aW9ucy53cmFwcGVyQ2xhc3MgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5pY29ucG9zICE9PSB1bmRlZmluZWQgJiYgaGFzSWNvbiApIHtcclxuXHRcdFx0bGFiZWwucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWljb24tXCIgKyBjdXJyZW50T3B0aW9ucy5pY29ucG9zICkuYWRkQ2xhc3MoIFwidWktYnRuLWljb24tXCIgKyBvcHRpb25zLmljb25wb3MgKTtcclxuXHRcdH0gZWxzZSBpZiAoICFoYXNJY29uICkge1xyXG5cdFx0XHRsYWJlbC5yZW1vdmVDbGFzcyggXCJ1aS1idG4taWNvbi1cIiArIGN1cnJlbnRPcHRpb25zLmljb25wb3MgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fVxyXG5cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5idXR0b25cIiwge1xyXG5cclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXRbdHlwZT0nYnV0dG9uJ10sIGlucHV0W3R5cGU9J3N1Ym1pdCddLCBpbnB1dFt0eXBlPSdyZXNldCddXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0aWNvbjogbnVsbCxcclxuXHRcdGljb25wb3M6IFwibGVmdFwiLFxyXG5cdFx0aWNvbnNoYWRvdzogZmFsc2UsIC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGlubGluZTogbnVsbCxcclxuXHRcdG1pbmk6IG51bGwsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRpZiAoIHRoaXMuZWxlbWVudC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdHdyYXBwZXI6IHRoaXMuZWxlbWVudC5wYXJlbnQoKVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oIHtcclxuXHRcdFx0Zm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMud2lkZ2V0KCkuYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGJsdXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMud2lkZ2V0KCkucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LndyYXAoIHRoaXMuX2J1dHRvbigpICk7XHJcblx0fSxcclxuXHJcblx0X2J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aWNvbkNsYXNzZXMgPSB0aGlzLl9nZXRJY29uQ2xhc3NlcyggdGhpcy5vcHRpb25zICk7XHJcblxyXG5cdFx0cmV0dXJuICQoXCI8ZGl2IGNsYXNzPSd1aS1idG4gdWktaW5wdXQtYnRuXCIgK1xyXG5cdFx0XHQoIG9wdGlvbnMud3JhcHBlckNsYXNzID8gXCIgXCIgKyBvcHRpb25zLndyYXBwZXJDbGFzcyA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy50aGVtZSA/IFwiIHVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5zaGFkb3cgPyBcIiB1aS1zaGFkb3dcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5pbmxpbmUgPyBcIiB1aS1idG4taW5saW5lXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMubWluaSA/IFwiIHVpLW1pbmlcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5kaXNhYmxlZCA/IFwiIHVpLXN0YXRlLWRpc2FibGVkXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIGljb25DbGFzc2VzID8gKCBcIiBcIiArIGljb25DbGFzc2VzICkgOiBcIlwiICkgK1xyXG5cdFx0XHRcIicgPlwiICsgdGhpcy5lbGVtZW50LnZhbCgpICsgXCI8L2Rpdj5cIiApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy53cmFwcGVyO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZSggdGhpcy53cmFwcGVyICk7XHJcblx0XHRcdHRoaXMud3JhcHBlci5yZW1vdmUoKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0SWNvbkNsYXNzZXM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0cmV0dXJuICggb3B0aW9ucy5pY29uID8gKCBcInVpLWljb24tXCIgKyBvcHRpb25zLmljb24gK1xyXG5cdFx0XHQoIG9wdGlvbnMuaWNvbnNoYWRvdyA/IFwiIHVpLXNoYWRvdy1pY29uXCIgOiBcIlwiICkgKyAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdFx0XCIgdWktYnRuLWljb24tXCIgKyBvcHRpb25zLmljb25wb3MgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb3V0ZXIgPSB0aGlzLndpZGdldCgpO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLnRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktc2hhZG93XCIsIG9wdGlvbnMuc2hhZG93ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuaW5saW5lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLWJ0bi1pbmxpbmVcIiwgb3B0aW9ucy5pbmxpbmUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmljb24gIT09IHVuZGVmaW5lZCB8fFxyXG5cdFx0XHRcdG9wdGlvbnMuaWNvbnNoYWRvdyAhPT0gdW5kZWZpbmVkIHx8IC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0XHRcdG9wdGlvbnMuaWNvbnBvcyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fZ2V0SWNvbkNsYXNzZXMoIHRoaXMub3B0aW9ucyApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX2dldEljb25DbGFzc2VzKFxyXG5cdFx0XHRcdFx0JC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKSApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIG9yaWdpbmFsRWxlbWVudCxcclxuXHRcdFx0aXNEaXNhYmxlZCA9IHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5pY29uICYmIHRoaXMub3B0aW9ucy5pY29ucG9zID09PSBcIm5vdGV4dFwiICYmIHRoaXMuZWxlbWVudC5hdHRyKCBcInRpdGxlXCIgKSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwidGl0bGVcIiwgdGhpcy5lbGVtZW50LnZhbCgpICk7XHJcblx0XHR9XHJcblx0XHRpZiAoICFjcmVhdGUgKSB7XHJcblx0XHRcdG9yaWdpbmFsRWxlbWVudCA9IHRoaXMuZWxlbWVudC5kZXRhY2goKTtcclxuXHRcdFx0JCggdGhpcy53cmFwcGVyICkudGV4dCggdGhpcy5lbGVtZW50LnZhbCgpICkuYXBwZW5kKCBvcmlnaW5hbEVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICE9PSBpc0Rpc2FibGVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IGlzRGlzYWJsZWQgfSk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHR2YXJcdG1ldGEgPSAkKCBcIm1ldGFbbmFtZT12aWV3cG9ydF1cIiApLFxyXG5cdFx0aW5pdGlhbENvbnRlbnQgPSBtZXRhLmF0dHIoIFwiY29udGVudFwiICksXHJcblx0XHRkaXNhYmxlZFpvb20gPSBpbml0aWFsQ29udGVudCArIFwiLG1heGltdW0tc2NhbGU9MSwgdXNlci1zY2FsYWJsZT1ub1wiLFxyXG5cdFx0ZW5hYmxlZFpvb20gPSBpbml0aWFsQ29udGVudCArIFwiLG1heGltdW0tc2NhbGU9MTAsIHVzZXItc2NhbGFibGU9eWVzXCIsXHJcblx0XHRkaXNhYmxlZEluaXRpYWxseSA9IC8odXNlci1zY2FsYWJsZVtcXHNdKj1bXFxzXSpubyl8KG1heGltdW0tc2NhbGVbXFxzXSo9W1xcc10qMSlbJCxcXHNdLy50ZXN0KCBpbml0aWFsQ29udGVudCApO1xyXG5cclxuXHQkLm1vYmlsZS56b29tID0gJC5leHRlbmQoIHt9LCB7XHJcblx0XHRlbmFibGVkOiAhZGlzYWJsZWRJbml0aWFsbHksXHJcblx0XHRsb2NrZWQ6IGZhbHNlLFxyXG5cdFx0ZGlzYWJsZTogZnVuY3Rpb24oIGxvY2sgKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkSW5pdGlhbGx5ICYmICEkLm1vYmlsZS56b29tLmxvY2tlZCApIHtcclxuXHRcdFx0XHRtZXRhLmF0dHIoIFwiY29udGVudFwiLCBkaXNhYmxlZFpvb20gKTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmxvY2tlZCA9IGxvY2sgfHwgZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRlbmFibGU6IGZ1bmN0aW9uKCB1bmxvY2sgKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkSW5pdGlhbGx5ICYmICggISQubW9iaWxlLnpvb20ubG9ja2VkIHx8IHVubG9jayA9PT0gdHJ1ZSApICkge1xyXG5cdFx0XHRcdG1ldGEuYXR0ciggXCJjb250ZW50XCIsIGVuYWJsZWRab29tICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmxvY2tlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0cmVzdG9yZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkSW5pdGlhbGx5ICkge1xyXG5cdFx0XHRcdG1ldGEuYXR0ciggXCJjb250ZW50XCIsIGluaXRpYWxDb250ZW50ICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSggalF1ZXJ5ICkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGV4dGlucHV0XCIsIHtcclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXRbdHlwZT0ndGV4dCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nc2VhcmNoJ10sXCIgK1xyXG5cdFx0XCI6anFtRGF0YSh0eXBlPSdzZWFyY2gnKSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J251bWJlciddLFwiICtcclxuXHRcdFwiOmpxbURhdGEodHlwZT0nbnVtYmVyJyksXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdwYXNzd29yZCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZW1haWwnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3VybCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ndGVsJ10sXCIgK1xyXG5cdFx0XCJ0ZXh0YXJlYSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3RpbWUnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2RhdGUnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J21vbnRoJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd3ZWVrJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdkYXRldGltZSddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZGF0ZXRpbWUtbG9jYWwnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2NvbG9yJ10sXCIgK1xyXG5cdFx0XCJpbnB1dDpub3QoW3R5cGVdKSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2ZpbGUnXVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdC8vIFRoaXMgb3B0aW9uIGRlZmF1bHRzIHRvIHRydWUgb24gaU9TIGRldmljZXMuXHJcblx0XHRwcmV2ZW50Rm9jdXNab29tOiAvaVBob25lfGlQYWR8aVBvZC8udGVzdCggbmF2aWdhdG9yLnBsYXRmb3JtICkgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBcIlwiLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGlzU2VhcmNoID0gdGhpcy5lbGVtZW50LmlzKCBcIlt0eXBlPSdzZWFyY2gnXSwgOmpxbURhdGEodHlwZT0nc2VhcmNoJylcIiApLFxyXG5cdFx0XHRpc1RleHRhcmVhID0gdGhpcy5lbGVtZW50WyAwIF0udGFnTmFtZSA9PT0gXCJURVhUQVJFQVwiLFxyXG5cdFx0XHRpc1JhbmdlID0gdGhpcy5lbGVtZW50LmlzKCBcIltkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInR5cGU9J3JhbmdlJ11cIiApLFxyXG5cdFx0XHRpbnB1dE5lZWRzV3JhcCA9ICggKHRoaXMuZWxlbWVudC5pcyggXCJpbnB1dFwiICkgfHxcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuaXMoIFwiW2RhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwidHlwZT0nc2VhcmNoJ11cIiApICkgJiZcclxuXHRcdFx0XHRcdCFpc1JhbmdlICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdG9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdGNsYXNzZXM6IHRoaXMuX2NsYXNzZXNGcm9tT3B0aW9ucygpLFxyXG5cdFx0XHRpc1NlYXJjaDogaXNTZWFyY2gsXHJcblx0XHRcdGlzVGV4dGFyZWE6IGlzVGV4dGFyZWEsXHJcblx0XHRcdGlzUmFuZ2U6IGlzUmFuZ2UsXHJcblx0XHRcdGlucHV0TmVlZHNXcmFwOiBpbnB1dE5lZWRzV3JhcFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fYXV0b0NvcnJlY3QoKTtcclxuXHJcblx0XHRpZiAoICFvcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIHtcclxuXHRcdFx0XCJmb2N1c1wiOiBcIl9oYW5kbGVGb2N1c1wiLFxyXG5cdFx0XHRcImJsdXJcIjogXCJfaGFuZGxlQmx1clwiXHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnNldE9wdGlvbnMoe1xyXG5cdFx0XHRcImRpc2FibGVkXCIgOiB0aGlzLmVsZW1lbnQuaXMoIFwiOmRpc2FibGVkXCIgKVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1lbnRDbGFzc2VzID0gW107XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdGVsZW1lbnRDbGFzc2VzLnB1c2goIFwidWktaW5wdXQtdGV4dFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzVGV4dGFyZWEgfHwgdGhpcy5pc1JhbmdlICkge1xyXG5cdFx0XHRlbGVtZW50Q2xhc3Nlcy5wdXNoKCBcInVpLXNoYWRvdy1pbnNldFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9cInNlYXJjaFwiIGFuZCBcInRleHRcIiBpbnB1dCB3aWRnZXRzXHJcblx0XHRpZiAoIHRoaXMuaW5wdXROZWVkc1dyYXAgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC53cmFwKCB0aGlzLl93cmFwKCkgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGVsZW1lbnRDbGFzc2VzID0gZWxlbWVudENsYXNzZXMuY29uY2F0KCB0aGlzLmNsYXNzZXMgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIGVsZW1lbnRDbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdGhpcy5pbnB1dE5lZWRzV3JhcCApID8gdGhpcy5lbGVtZW50LnBhcmVudCgpIDogdGhpcy5lbGVtZW50O1xyXG5cdH0sXHJcblxyXG5cdF9jbGFzc2VzRnJvbU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGNsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktYm9keS1cIiArICggKCBvcHRpb25zLnRoZW1lID09PSBudWxsICkgPyBcImluaGVyaXRcIiA6IG9wdGlvbnMudGhlbWUgKSApO1xyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1jb3JuZXItYWxsXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktbWluaVwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMud3JhcHBlckNsYXNzICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIG9wdGlvbnMud3JhcHBlckNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGNsYXNzZXM7XHJcblx0fSxcclxuXHJcblx0X3dyYXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdiBjbGFzcz0nXCIgK1xyXG5cdFx0XHQoIHRoaXMuaXNTZWFyY2ggPyBcInVpLWlucHV0LXNlYXJjaCBcIiA6IFwidWktaW5wdXQtdGV4dCBcIiApICtcclxuXHRcdFx0dGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKyBcIiBcIiArXHJcblx0XHRcdFwidWktc2hhZG93LWluc2V0Jz48L2Rpdj5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9hdXRvQ29ycmVjdDogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBYWFg6IFRlbXBvcmFyeSB3b3JrYXJvdW5kIGZvciBpc3N1ZSA3ODUgKEFwcGxlIGJ1ZyA4OTEwNTg5KS5cclxuXHRcdC8vICAgICAgVHVybiBvZmYgYXV0b2NvcnJlY3QgYW5kIGF1dG9jb21wbGV0ZSBvbiBub24taU9TIDUgZGV2aWNlc1xyXG5cdFx0Ly8gICAgICBzaW5jZSB0aGUgcG9wdXAgdGhleSB1c2UgY2FuJ3QgYmUgZGlzbWlzc2VkIGJ5IHRoZSB1c2VyLiBOb3RlXHJcblx0XHQvLyAgICAgIHRoYXQgd2UgdGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBmZWF0dXJlIGJ5IGxvb2tpbmcgZm9yXHJcblx0XHQvLyAgICAgIHRoZSBhdXRvY29ycmVjdCBwcm9wZXJ0eSBvbiB0aGUgaW5wdXQgZWxlbWVudC4gV2UgY3VycmVudGx5XHJcblx0XHQvLyAgICAgIGhhdmUgbm8gdGVzdCBmb3IgaU9TIDUgb3IgbmV3ZXIgc28gd2UncmUgdGVtcG9yYXJpbHkgdXNpbmdcclxuXHRcdC8vICAgICAgdGhlIHRvdWNoT3ZlcmZsb3cgc3VwcG9ydCBmbGFnIGZvciBqUU0gMS4wLiBZZXMsIEkgZmVlbCBkaXJ0eS5cclxuXHRcdC8vICAgICAgLSBqYmxhc1xyXG5cdFx0aWYgKCB0eXBlb2YgdGhpcy5lbGVtZW50WzBdLmF1dG9jb3JyZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmXHJcblx0XHRcdCEkLnN1cHBvcnQudG91Y2hPdmVyZmxvdyApIHtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgYXR0cmlidXRlIGluc3RlYWQgb2YgdGhlIHByb3BlcnR5IGp1c3QgaW4gY2FzZSB0aGVyZVxyXG5cdFx0XHQvLyBpcyBjb2RlIHRoYXQgYXR0ZW1wdHMgdG8gbWFrZSBtb2RpZmljYXRpb25zIHZpYSBIVE1MLlxyXG5cdFx0XHR0aGlzLmVsZW1lbnRbMF0uc2V0QXR0cmlidXRlKCBcImF1dG9jb3JyZWN0XCIsIFwib2ZmXCIgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50WzBdLnNldEF0dHJpYnV0ZSggXCJhdXRvY29tcGxldGVcIiwgXCJvZmZcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVCbHVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMud2lkZ2V0KCkucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIEluIG1hbnkgc2l0dWF0aW9ucywgaU9TIHdpbGwgem9vbSBpbnRvIHRoZSBpbnB1dCB1cG9uIHRhcCwgdGhpc1xyXG5cdFx0Ly8gcHJldmVudHMgdGhhdCBmcm9tIGhhcHBlbmluZ1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLndpZGdldCgpLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uICggb3B0aW9ucyApIHtcclxuXHRcdHZhciBvdXRlciA9IHRoaXMud2lkZ2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoICEoIG9wdGlvbnMuZGlzYWJsZWQgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLm1pbmkgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLmNvcm5lcnMgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLnRoZW1lID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy53cmFwcGVyQ2xhc3MgPT09IHVuZGVmaW5lZCApICkge1xyXG5cclxuXHRcdFx0b3V0ZXIucmVtb3ZlQ2xhc3MoIHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0XHRcdHRoaXMuY2xhc3NlcyA9IHRoaXMuX2NsYXNzZXNGcm9tT3B0aW9ucygpO1xyXG5cdFx0XHRvdXRlci5hZGRDbGFzcyggdGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgISFvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5pbnB1dE5lZWRzV3JhcCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnVud3JhcCgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWlucHV0LXRleHQgXCIgKyB0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zbGlkZXJcIiwgJC5leHRlbmQoIHtcclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXRbdHlwZT0ncmFuZ2UnXSwgOmpxbURhdGEodHlwZT0ncmFuZ2UnKSwgOmpxbURhdGEocm9sZT0nc2xpZGVyJylcIixcclxuXHJcblx0d2lkZ2V0RXZlbnRQcmVmaXg6IFwic2xpZGVcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHR0cmFja1RoZW1lOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0aGlnaGxpZ2h0OiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdC8vIFRPRE86IEVhY2ggb2YgdGhlc2Ugc2hvdWxkIGhhdmUgY29tbWVudHMgZXhwbGFpbiB3aGF0IHRoZXkncmUgZm9yXHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdGNvbnRyb2wgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRyYWNrVGhlbWUgPSB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSB8fCAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGNvbnRyb2xbIDAgXSwgXCJ0aGVtZVwiICksXHJcblx0XHRcdHRyYWNrVGhlbWVDbGFzcyA9IHRyYWNrVGhlbWUgPyBcIiB1aS1iYXItXCIgKyB0cmFja1RoZW1lIDogXCIgdWktYmFyLWluaGVyaXRcIixcclxuXHRcdFx0Y29ybmVyQ2xhc3MgPSAoIHRoaXMub3B0aW9ucy5jb3JuZXJzIHx8IGNvbnRyb2wuanFtRGF0YSggXCJjb3JuZXJzXCIgKSApID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIixcclxuXHRcdFx0bWluaUNsYXNzID0gKCB0aGlzLm9wdGlvbnMubWluaSB8fCBjb250cm9sLmpxbURhdGEoIFwibWluaVwiICkgKSA/IFwiIHVpLW1pbmlcIiA6IFwiXCIsXHJcblx0XHRcdGNUeXBlID0gY29udHJvbFsgMCBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdGlzVG9nZ2xlU3dpdGNoID0gKCBjVHlwZSA9PT0gXCJzZWxlY3RcIiApLFxyXG5cdFx0XHRpc1Jhbmdlc2xpZGVyID0gY29udHJvbC5wYXJlbnQoKS5pcyggXCI6anFtRGF0YShyb2xlPSdyYW5nZXNsaWRlcicpXCIgKSxcclxuXHRcdFx0c2VsZWN0Q2xhc3MgPSAoIGlzVG9nZ2xlU3dpdGNoICkgPyBcInVpLXNsaWRlci1zd2l0Y2hcIiA6IFwiXCIsXHJcblx0XHRcdGNvbnRyb2xJRCA9IGNvbnRyb2wuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdCRsYWJlbCA9ICQoIFwiW2Zvcj0nXCIgKyBjb250cm9sSUQgKyBcIiddXCIgKSxcclxuXHRcdFx0bGFiZWxJRCA9ICRsYWJlbC5hdHRyKCBcImlkXCIgKSB8fCBjb250cm9sSUQgKyBcIi1sYWJlbFwiLFxyXG5cdFx0XHRtaW4gPSAhaXNUb2dnbGVTd2l0Y2ggPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWluXCIgKSApIDogMCxcclxuXHRcdFx0bWF4ID0gICFpc1RvZ2dsZVN3aXRjaCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtYXhcIiApICkgOiBjb250cm9sLmZpbmQoIFwib3B0aW9uXCIgKS5sZW5ndGgtMSxcclxuXHRcdFx0c3RlcCA9IHdpbmRvdy5wYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwic3RlcFwiICkgfHwgMSApLFxyXG5cdFx0XHRkb21IYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApLFxyXG5cdFx0XHRoYW5kbGUgPSAkKCBkb21IYW5kbGUgKSxcclxuXHRcdFx0ZG9tU2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxyXG5cdFx0XHRzbGlkZXIgPSAkKCBkb21TbGlkZXIgKSxcclxuXHRcdFx0dmFsdWViZyA9IHRoaXMub3B0aW9ucy5oaWdobGlnaHQgJiYgIWlzVG9nZ2xlU3dpdGNoID8gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBiZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRcdFx0XHRiZy5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1iZyBcIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzO1xyXG5cdFx0XHRcdHJldHVybiAkKCBiZyApLnByZXBlbmRUbyggc2xpZGVyICk7XHJcblx0XHRcdH0pKCkgOiBmYWxzZSxcclxuXHRcdFx0b3B0aW9ucyxcclxuXHRcdFx0d3JhcHBlcixcclxuXHRcdFx0aiwgbGVuZ3RoLFxyXG5cdFx0XHRpLCBvcHRpb25zQ291bnQsIG9yaWdUYWJJbmRleCxcclxuXHRcdFx0c2lkZSwgYWN0aXZlQ2xhc3MsIHNsaWRlckltZztcclxuXHJcblx0XHQkbGFiZWwuYXR0ciggXCJpZFwiLCBsYWJlbElEICk7XHJcblx0XHR0aGlzLmlzVG9nZ2xlU3dpdGNoID0gaXNUb2dnbGVTd2l0Y2g7XHJcblxyXG5cdFx0ZG9tSGFuZGxlLnNldEF0dHJpYnV0ZSggXCJocmVmXCIsIFwiI1wiICk7XHJcblx0XHRkb21TbGlkZXIuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJhcHBsaWNhdGlvblwiICk7XHJcblx0XHRkb21TbGlkZXIuY2xhc3NOYW1lID0gWyB0aGlzLmlzVG9nZ2xlU3dpdGNoID8gXCJ1aS1zbGlkZXIgdWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldCBcIiA6IFwidWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldCBcIiwgc2VsZWN0Q2xhc3MsIHRyYWNrVGhlbWVDbGFzcywgY29ybmVyQ2xhc3MsIG1pbmlDbGFzcyBdLmpvaW4oIFwiXCIgKTtcclxuXHRcdGRvbUhhbmRsZS5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1oYW5kbGVcIjtcclxuXHRcdGRvbVNsaWRlci5hcHBlbmRDaGlsZCggZG9tSGFuZGxlICk7XHJcblxyXG5cdFx0aGFuZGxlLmF0dHIoe1xyXG5cdFx0XHRcInJvbGVcIjogXCJzbGlkZXJcIixcclxuXHRcdFx0XCJhcmlhLXZhbHVlbWluXCI6IG1pbixcclxuXHRcdFx0XCJhcmlhLXZhbHVlbWF4XCI6IG1heCxcclxuXHRcdFx0XCJhcmlhLXZhbHVlbm93XCI6IHRoaXMuX3ZhbHVlKCksXHJcblx0XHRcdFwiYXJpYS12YWx1ZXRleHRcIjogdGhpcy5fdmFsdWUoKSxcclxuXHRcdFx0XCJ0aXRsZVwiOiB0aGlzLl92YWx1ZSgpLFxyXG5cdFx0XHRcImFyaWEtbGFiZWxsZWRieVwiOiBsYWJlbElEXHJcblx0XHR9KTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRzbGlkZXI6IHNsaWRlcixcclxuXHRcdFx0aGFuZGxlOiBoYW5kbGUsXHJcblx0XHRcdGNvbnRyb2w6IGNvbnRyb2wsXHJcblx0XHRcdHR5cGU6IGNUeXBlLFxyXG5cdFx0XHRzdGVwOiBzdGVwLFxyXG5cdFx0XHRtYXg6IG1heCxcclxuXHRcdFx0bWluOiBtaW4sXHJcblx0XHRcdHZhbHVlYmc6IHZhbHVlYmcsXHJcblx0XHRcdGlzUmFuZ2VzbGlkZXI6IGlzUmFuZ2VzbGlkZXIsXHJcblx0XHRcdGRyYWdnaW5nOiBmYWxzZSxcclxuXHRcdFx0YmVmb3JlU3RhcnQ6IG51bGwsXHJcblx0XHRcdHVzZXJNb2RpZmllZDogZmFsc2UsXHJcblx0XHRcdG1vdXNlTW92ZWQ6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIGlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHQvLyBUT0RPOiByZXN0b3JlIG9yaWdpbmFsIHRhYmluZGV4IChpZiBhbnkpIGluIGEgZGVzdHJveSBtZXRob2RcclxuXHRcdFx0b3JpZ1RhYkluZGV4ID0gY29udHJvbC5hdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdFx0aWYgKCBvcmlnVGFiSW5kZXggKSB7XHJcblx0XHRcdFx0aGFuZGxlLmF0dHIoIFwidGFiaW5kZXhcIiwgb3JpZ1RhYkluZGV4ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29udHJvbC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApLmZvY3VzKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5ibHVyKCk7XHJcblx0XHRcdFx0aGFuZGxlLmZvY3VzKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0d3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRcdFx0d3JhcHBlci5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1pbm5lcm9mZnNldFwiO1xyXG5cclxuXHRcdFx0Zm9yICggaiA9IDAsIGxlbmd0aCA9IGRvbVNsaWRlci5jaGlsZE5vZGVzLmxlbmd0aDsgaiA8IGxlbmd0aDsgaisrICkge1xyXG5cdFx0XHRcdHdyYXBwZXIuYXBwZW5kQ2hpbGQoIGRvbVNsaWRlci5jaGlsZE5vZGVzW2pdICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRvbVNsaWRlci5hcHBlbmRDaGlsZCggd3JhcHBlciApO1xyXG5cclxuXHRcdFx0Ly8gc2xpZGVyLndyYXBJbm5lciggXCI8ZGl2IGNsYXNzPSd1aS1zbGlkZXItaW5uZXJvZmZzZXQnPjwvZGl2PlwiICk7XHJcblxyXG5cdFx0XHQvLyBtYWtlIHRoZSBoYW5kbGUgbW92ZSB3aXRoIGEgc21vb3RoIHRyYW5zaXRpb25cclxuXHRcdFx0aGFuZGxlLmFkZENsYXNzKCBcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiApO1xyXG5cclxuXHRcdFx0b3B0aW9ucyA9IGNvbnRyb2wuZmluZCggXCJvcHRpb25cIiApO1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDAsIG9wdGlvbnNDb3VudCA9IG9wdGlvbnMubGVuZ3RoOyBpIDwgb3B0aW9uc0NvdW50OyBpKysgKSB7XHJcblx0XHRcdFx0c2lkZSA9ICFpID8gXCJiXCIgOiBcImFcIjtcclxuXHRcdFx0XHRhY3RpdmVDbGFzcyA9ICFpID8gXCJcIiA6IFwiIFwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3M7XHJcblx0XHRcdFx0c2xpZGVySW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzcGFuXCIgKTtcclxuXHJcblx0XHRcdFx0c2xpZGVySW1nLmNsYXNzTmFtZSA9IFsgXCJ1aS1zbGlkZXItbGFiZWwgdWktc2xpZGVyLWxhYmVsLVwiLCBzaWRlLCBhY3RpdmVDbGFzcyBdLmpvaW4oIFwiXCIgKTtcclxuXHRcdFx0XHRzbGlkZXJJbWcuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJpbWdcIiApO1xyXG5cdFx0XHRcdHNsaWRlckltZy5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIG9wdGlvbnNbaV0uaW5uZXJIVE1MICkgKTtcclxuXHRcdFx0XHQkKCBzbGlkZXJJbWcgKS5wcmVwZW5kVG8oIHNsaWRlciApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLl9sYWJlbHMgPSAkKCBcIi51aS1zbGlkZXItbGFiZWxcIiwgc2xpZGVyICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG1vbml0b3IgdGhlIGlucHV0IGZvciB1cGRhdGVkIHZhbHVlc1xyXG5cdFx0Y29udHJvbC5hZGRDbGFzcyggaXNUb2dnbGVTd2l0Y2ggPyBcInVpLXNsaWRlci1zd2l0Y2hcIiA6IFwidWktc2xpZGVyLWlucHV0XCIgKTtcclxuXHJcblx0XHR0aGlzLl9vbiggY29udHJvbCwge1xyXG5cdFx0XHRcImNoYW5nZVwiOiBcIl9jb250cm9sQ2hhbmdlXCIsXHJcblx0XHRcdFwia2V5dXBcIjogXCJfY29udHJvbEtleXVwXCIsXHJcblx0XHRcdFwiYmx1clwiOiBcIl9jb250cm9sQmx1clwiLFxyXG5cdFx0XHRcInZtb3VzZXVwXCI6IFwiX2NvbnRyb2xWTW91c2VVcFwiXHJcblx0XHR9KTtcclxuXHJcblx0XHRzbGlkZXIuYmluZCggXCJ2bW91c2Vkb3duXCIsICQucHJveHkoIHRoaXMuX3NsaWRlclZNb3VzZURvd24sIHRoaXMgKSApXHJcblx0XHRcdC5iaW5kKCBcInZjbGlja1wiLCBmYWxzZSApO1xyXG5cclxuXHRcdC8vIFdlIGhhdmUgdG8gaW5zdGFudGlhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0IGZvciB0aGUgdW5iaW5kIHRvIHdvcmsgcHJvcGVybHlcclxuXHRcdC8vIHNpbmNlIHRoZSBtZXRob2QgaXRzZWxmIGlzIGRlZmluZWQgaW4gdGhlIHByb3RvdHlwZSAoY2F1c2luZyBpdCB0byB1bmJpbmQgZXZlcnl0aGluZylcclxuXHRcdHRoaXMuX29uKCBkb2N1bWVudCwgeyBcInZtb3VzZW1vdmVcIjogXCJfcHJldmVudERvY3VtZW50RHJhZ1wiIH0pO1xyXG5cdFx0dGhpcy5fb24oIHNsaWRlci5hZGQoIGRvY3VtZW50ICksIHsgXCJ2bW91c2V1cFwiOiBcIl9zbGlkZXJWTW91c2VVcFwiIH0pO1xyXG5cclxuXHRcdHNsaWRlci5pbnNlcnRBZnRlciggY29udHJvbCApO1xyXG5cclxuXHRcdC8vIHdyYXAgaW4gYSBkaXYgZm9yIHN0eWxpbmcgcHVycG9zZXNcclxuXHRcdGlmICggIWlzVG9nZ2xlU3dpdGNoICYmICFpc1Jhbmdlc2xpZGVyICkge1xyXG5cdFx0XHR3cmFwcGVyID0gdGhpcy5vcHRpb25zLm1pbmkgPyBcIjxkaXYgY2xhc3M9J3VpLXNsaWRlciB1aS1taW5pJz5cIiA6IFwiPGRpdiBjbGFzcz0ndWktc2xpZGVyJz5cIjtcclxuXHJcblx0XHRcdGNvbnRyb2wuYWRkKCBzbGlkZXIgKS53cmFwQWxsKCB3cmFwcGVyICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYmluZCB0aGUgaGFuZGxlIGV2ZW50IGNhbGxiYWNrcyBhbmQgc2V0IHRoZSBjb250ZXh0IHRvIHRoZSB3aWRnZXQgaW5zdGFuY2VcclxuXHRcdHRoaXMuX29uKCB0aGlzLmhhbmRsZSwge1xyXG5cdFx0XHRcInZtb3VzZWRvd25cIjogXCJfaGFuZGxlVk1vdXNlRG93blwiLFxyXG5cdFx0XHRcImtleWRvd25cIjogXCJfaGFuZGxlS2V5ZG93blwiLFxyXG5cdFx0XHRcImtleXVwXCI6IFwiX2hhbmRsZUtleXVwXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlLmJpbmQoIFwidmNsaWNrXCIsIGZhbHNlICk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRUaGVtZSggb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy50cmFja1RoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldFRyYWNrVGhlbWUoIG9wdGlvbnMudHJhY2tUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldENvcm5lcnMoIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldE1pbmkoIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5oaWdobGlnaHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0SGlnaGxpZ2h0KCBvcHRpb25zLmhpZ2hsaWdodCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXREaXNhYmxlZCggb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfY29udHJvbENoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0Ly8gaWYgdGhlIHVzZXIgZHJhZ2dlZCB0aGUgaGFuZGxlLCB0aGUgXCJjaGFuZ2VcIiBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gaW5zaWRlIHJlZnJlc2goKTsgZG9uJ3QgY2FsbCByZWZyZXNoKCkgYWdhaW5cclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJjb250cm9sY2hhbmdlXCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAoICF0aGlzLm1vdXNlTW92ZWQgKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSwgdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jb250cm9sS2V5dXA6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7IC8vIG5lY2Vzc2FyeT9cclxuXHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSwgdHJ1ZSwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9jb250cm9sQmx1cjogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGl0IGFwcGVhcnMgdGhlIGNsaWNraW5nIHRoZSB1cCBhbmQgZG93biBidXR0b25zIGluIGNocm9tZSBvblxyXG5cdC8vIHJhbmdlL251bWJlciBpbnB1dHMgZG9lc24ndCB0cmlnZ2VyIGEgY2hhbmdlIHVudGlsIHRoZSBmaWVsZCBpc1xyXG5cdC8vIGJsdXJyZWQuIEhlcmUgd2UgY2hlY2sgdGhpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgYW5kIHJlZnJlc2hcclxuXHRfY29udHJvbFZNb3VzZVVwOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0dGhpcy5fY2hlY2tlZFJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHQvLyBOT1RFIGZvcmNlIGZvY3VzIG9uIGhhbmRsZVxyXG5cdF9oYW5kbGVWTW91c2VEb3duOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0dGhpcy5oYW5kbGUuZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGluZGV4ID0gdGhpcy5fdmFsdWUoKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSW4gYWxsIGNhc2VzIHByZXZlbnQgdGhlIGRlZmF1bHQgYW5kIG1hcmsgdGhlIGhhbmRsZSBhcyBhY3RpdmVcclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5IT01FOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRU5EOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlVQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUklHSFQ6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuTEVGVDpcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRpZiAoICF0aGlzLl9rZXlTbGlkaW5nICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fa2V5U2xpZGluZyA9IHRydWU7XHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApOyAvKiBUT0RPOiBXZSBkb24ndCB1c2UgdGhpcyBjbGFzcyBmb3Igc3R5bGluZy4gRG8gd2UgbmVlZCB0byBhZGQgaXQ/ICovXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBtb3ZlIHRoZSBzbGlkZXIgYWNjb3JkaW5nIHRvIHRoZSBrZXlwcmVzc1xyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkhPTUU6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLm1pbiApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRU5EOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5tYXggKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlJJR0hUOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggaW5kZXggKyB0aGlzLnN0ZXAgKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkRPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5MRUZUOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggaW5kZXggLSB0aGlzLnN0ZXAgKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9LCAvLyByZW1vdmUgYWN0aXZlIG1hcmtcclxuXHJcblx0X2hhbmRsZUtleXVwOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0aWYgKCB0aGlzLl9rZXlTbGlkaW5nICkge1xyXG5cdFx0XHR0aGlzLl9rZXlTbGlkaW5nID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuaGFuZGxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7IC8qIFNlZSBjb21tZW50IGFib3ZlLiAqL1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zbGlkZXJWTW91c2VEb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHQvLyBOT1RFOiB3ZSBkb24ndCBkbyB0aGlzIGluIHJlZnJlc2ggYmVjYXVzZSB3ZSBzdGlsbCB3YW50IHRvXHJcblx0XHQvLyAgICAgICBzdXBwb3J0IHByb2dyYW1tYXRpYyBhbHRlcmF0aW9uIG9mIGRpc2FibGVkIGlucHV0c1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgISggZXZlbnQud2hpY2ggPT09IDEgfHwgZXZlbnQud2hpY2ggPT09IDAgfHwgZXZlbnQud2hpY2ggPT09IHVuZGVmaW5lZCApICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3Jlc3RhcnRcIiwgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0dGhpcy51c2VyTW9kaWZpZWQgPSBmYWxzZTtcclxuXHRcdHRoaXMubW91c2VNb3ZlZCA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICggdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVTdGFydCA9IHRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4O1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucmVmcmVzaCggZXZlbnQgKTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwic3RhcnRcIiApO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdF9zbGlkZXJWTW91c2VVcDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuZHJhZ2dpbmcgKSB7XHJcblx0XHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0XHQvLyBtYWtlIHRoZSBoYW5kbGUgbW92ZSB3aXRoIGEgc21vb3RoIHRyYW5zaXRpb25cclxuXHRcdFx0XHR0aGlzLmhhbmRsZS5hZGRDbGFzcyggXCJ1aS1zbGlkZXItaGFuZGxlLXNuYXBwaW5nXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB0aGlzLm1vdXNlTW92ZWQgKSB7XHJcblx0XHRcdFx0XHQvLyB0aGlzIGlzIGEgZHJhZywgY2hhbmdlIHRoZSB2YWx1ZSBvbmx5IGlmIHVzZXIgZHJhZ2dlZCBlbm91Z2hcclxuXHRcdFx0XHRcdGlmICggdGhpcy51c2VyTW9kaWZpZWQgKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5iZWZvcmVTdGFydCA9PT0gMCA/IDEgOiAwICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuYmVmb3JlU3RhcnQgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gdGhpcyBpcyBqdXN0IGEgY2xpY2ssIGNoYW5nZSB0aGUgdmFsdWVcclxuXHRcdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5iZWZvcmVTdGFydCA9PT0gMCA/IDEgOiAwICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLm1vdXNlTW92ZWQgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJzdG9wXCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9wcmV2ZW50RG9jdW1lbnREcmFnOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdC8vIE5PVEU6IHdlIGRvbid0IGRvIHRoaXMgaW4gcmVmcmVzaCBiZWNhdXNlIHdlIHN0aWxsIHdhbnQgdG9cclxuXHRcdFx0Ly8gICAgICAgc3VwcG9ydCBwcm9ncmFtbWF0aWMgYWx0ZXJhdGlvbiBvZiBkaXNhYmxlZCBpbnB1dHNcclxuXHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImRyYWdcIiwgZXZlbnQgKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLmRyYWdnaW5nICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblxyXG5cdFx0XHRcdC8vIHRoaXMubW91c2VNb3ZlZCBtdXN0IGJlIHVwZGF0ZWQgYmVmb3JlIHJlZnJlc2goKSBiZWNhdXNlIGl0IHdpbGwgYmUgdXNlZCBpbiB0aGUgY29udHJvbCBcImNoYW5nZVwiIGV2ZW50XHJcblx0XHRcdFx0dGhpcy5tb3VzZU1vdmVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0aWYgKCB0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHRcdFx0Ly8gbWFrZSB0aGUgaGFuZGxlIG1vdmUgaW4gc3luYyB3aXRoIHRoZSBtb3VzZVxyXG5cdFx0XHRcdFx0dGhpcy5oYW5kbGUucmVtb3ZlQ2xhc3MoIFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdC8vIG9ubHkgYWZ0ZXIgcmVmcmVzaCgpIHlvdSBjYW4gY2FsY3VsYXRlIHRoaXMudXNlck1vZGlmaWVkXHJcblx0XHRcdFx0dGhpcy51c2VyTW9kaWZpZWQgPSB0aGlzLmJlZm9yZVN0YXJ0ICE9PSB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdF9jaGVja2VkUmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMudmFsdWUgIT09IHRoaXMuX3ZhbHVlKCkgKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF92YWx1ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gIHRoaXMuaXNUb2dnbGVTd2l0Y2ggPyB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCA6IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC52YWwoKSApIDtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCB1bmRlZmluZWQsIGZhbHNlLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIHZhbCwgaXNmcm9tQ29udHJvbCwgcHJldmVudElucHV0VXBkYXRlICkge1xyXG5cdFx0Ly8gTk9URTogd2UgZG9uJ3QgcmV0dXJuIGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRvIHN1cHBvcnQgcHJvZ3JhbW1hdGljXHJcblx0XHQvLyAgICAgICBhbHRlcmF0aW9uIG9mIHRoZSBpbnB1dCB2YWx1ZSwgd2hpY2ggc2hvdWxkIHN0aWxsIHVwZGF0ZSB0aGUgc2xpZGVyXHJcblxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRwYXJlbnRUaGVtZSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcy5lbGVtZW50WyAwIF0sIFwidGhlbWVcIiApLFxyXG5cdFx0XHR0aGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSB8fCBwYXJlbnRUaGVtZSxcclxuXHRcdFx0dGhlbWVDbGFzcyA9ICB0aGVtZSA/IFwiIHVpLWJ0bi1cIiArIHRoZW1lIDogXCJcIixcclxuXHRcdFx0dHJhY2tUaGVtZSA9IHRoaXMub3B0aW9ucy50cmFja1RoZW1lIHx8IHBhcmVudFRoZW1lLFxyXG5cdFx0XHR0cmFja1RoZW1lQ2xhc3MgPSB0cmFja1RoZW1lID8gXCIgdWktYmFyLVwiICsgdHJhY2tUaGVtZSA6IFwiIHVpLWJhci1pbmhlcml0XCIsXHJcblx0XHRcdGNvcm5lckNsYXNzID0gdGhpcy5vcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiLFxyXG5cdFx0XHRtaW5pQ2xhc3MgPSB0aGlzLm9wdGlvbnMubWluaSA/IFwiIHVpLW1pbmlcIiA6IFwiXCIsXHJcblx0XHRcdGxlZnQsIHdpZHRoLCBkYXRhLCB0b2wsXHJcblx0XHRcdHB4U3RlcCwgcGVyY2VudCxcclxuXHRcdFx0Y29udHJvbCwgaXNJbnB1dCwgb3B0aW9uRWxlbWVudHMsIG1pbiwgbWF4LCBzdGVwLFxyXG5cdFx0XHRuZXd2YWwsIHZhbE1vZFN0ZXAsIGFsaWduVmFsdWUsIHBlcmNlbnRQZXJTdGVwLFxyXG5cdFx0XHRoYW5kbGVQZXJjZW50LCBhUGVyY2VudCwgYlBlcmNlbnQsXHJcblx0XHRcdHZhbHVlQ2hhbmdlZDtcclxuXHJcblx0XHRzZWxmLnNsaWRlclswXS5jbGFzc05hbWUgPSBbIHRoaXMuaXNUb2dnbGVTd2l0Y2ggPyBcInVpLXNsaWRlciB1aS1zbGlkZXItc3dpdGNoIHVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXRcIiA6IFwidWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldFwiLCB0cmFja1RoZW1lQ2xhc3MsIGNvcm5lckNsYXNzLCBtaW5pQ2xhc3MgXS5qb2luKCBcIlwiICk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdHRoaXMuZGlzYWJsZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNldCB0aGUgc3RvcmVkIHZhbHVlIGZvciBjb21wYXJpc29uIGxhdGVyXHJcblx0XHR0aGlzLnZhbHVlID0gdGhpcy5fdmFsdWUoKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhpZ2hsaWdodCAmJiAhdGhpcy5pc1RvZ2dsZVN3aXRjaCAmJiB0aGlzLnNsaWRlci5maW5kKCBcIi51aS1zbGlkZXItYmdcIiApLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0dGhpcy52YWx1ZWJnID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBiZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRcdFx0XHRiZy5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1iZyBcIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzO1xyXG5cdFx0XHRcdHJldHVybiAkKCBiZyApLnByZXBlbmRUbyggc2VsZi5zbGlkZXIgKTtcclxuXHRcdFx0fSkoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuaGFuZGxlLmFkZENsYXNzKCBcInVpLWJ0blwiICsgdGhlbWVDbGFzcyArIFwiIHVpLXNoYWRvd1wiICk7XHJcblxyXG5cdFx0Y29udHJvbCA9IHRoaXMuZWxlbWVudDtcclxuXHRcdGlzSW5wdXQgPSAhdGhpcy5pc1RvZ2dsZVN3aXRjaDtcclxuXHRcdG9wdGlvbkVsZW1lbnRzID0gaXNJbnB1dCA/IFtdIDogY29udHJvbC5maW5kKCBcIm9wdGlvblwiICk7XHJcblx0XHRtaW4gPSAgaXNJbnB1dCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtaW5cIiApICkgOiAwO1xyXG5cdFx0bWF4ID0gaXNJbnB1dCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtYXhcIiApICkgOiBvcHRpb25FbGVtZW50cy5sZW5ndGggLSAxO1xyXG5cdFx0c3RlcCA9ICggaXNJbnB1dCAmJiBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwic3RlcFwiICkgKSA+IDAgKSA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJzdGVwXCIgKSApIDogMTtcclxuXHJcblx0XHRpZiAoIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdGRhdGEgPSB2YWw7XHJcblx0XHRcdC8vIGEgc2xpZ2h0IHRvbGVyYW5jZSBoZWxwZWQgZ2V0IHRvIHRoZSBlbmRzIG9mIHRoZSBzbGlkZXJcclxuXHRcdFx0dG9sID0gODtcclxuXHJcblx0XHRcdGxlZnQgPSB0aGlzLnNsaWRlci5vZmZzZXQoKS5sZWZ0O1xyXG5cdFx0XHR3aWR0aCA9IHRoaXMuc2xpZGVyLndpZHRoKCk7XHJcblx0XHRcdHB4U3RlcCA9IHdpZHRoLygobWF4LW1pbikvc3RlcCk7XHJcblx0XHRcdGlmICggIXRoaXMuZHJhZ2dpbmcgfHxcclxuXHRcdFx0XHRcdGRhdGEucGFnZVggPCBsZWZ0IC0gdG9sIHx8XHJcblx0XHRcdFx0XHRkYXRhLnBhZ2VYID4gbGVmdCArIHdpZHRoICsgdG9sICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHB4U3RlcCA+IDEgKSB7XHJcblx0XHRcdFx0cGVyY2VudCA9ICggKCBkYXRhLnBhZ2VYIC0gbGVmdCApIC8gd2lkdGggKSAqIDEwMDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwZXJjZW50ID0gTWF0aC5yb3VuZCggKCAoIGRhdGEucGFnZVggLSBsZWZ0ICkgLyB3aWR0aCApICogMTAwICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XHJcblx0XHRcdFx0dmFsID0gaXNJbnB1dCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wudmFsKCkgfHwgMCApIDogY29udHJvbFswXS5zZWxlY3RlZEluZGV4O1xyXG5cdFx0XHR9XHJcblx0XHRcdHBlcmNlbnQgPSAoIHBhcnNlRmxvYXQoIHZhbCApIC0gbWluICkgLyAoIG1heCAtIG1pbiApICogMTAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaXNOYU4oIHBlcmNlbnQgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5ld3ZhbCA9ICggcGVyY2VudCAvIDEwMCApICogKCBtYXggLSBtaW4gKSArIG1pbjtcclxuXHJcblx0XHQvL2Zyb20galF1ZXJ5IFVJIHNsaWRlciwgdGhlIGZvbGxvd2luZyBzb3VyY2Ugd2lsbCByb3VuZCB0byB0aGUgbmVhcmVzdCBzdGVwXHJcblx0XHR2YWxNb2RTdGVwID0gKCBuZXd2YWwgLSBtaW4gKSAlIHN0ZXA7XHJcblx0XHRhbGlnblZhbHVlID0gbmV3dmFsIC0gdmFsTW9kU3RlcDtcclxuXHJcblx0XHRpZiAoIE1hdGguYWJzKCB2YWxNb2RTdGVwICkgKiAyID49IHN0ZXAgKSB7XHJcblx0XHRcdGFsaWduVmFsdWUgKz0gKCB2YWxNb2RTdGVwID4gMCApID8gc3RlcCA6ICggLXN0ZXAgKTtcclxuXHRcdH1cclxuXHJcblx0XHRwZXJjZW50UGVyU3RlcCA9IDEwMC8oKG1heC1taW4pL3N0ZXApO1xyXG5cdFx0Ly8gU2luY2UgSmF2YVNjcmlwdCBoYXMgcHJvYmxlbXMgd2l0aCBsYXJnZSBmbG9hdHMsIHJvdW5kXHJcblx0XHQvLyB0aGUgZmluYWwgdmFsdWUgdG8gNSBkaWdpdHMgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQgKHNlZSBqUXVlcnlVSTogIzQxMjQpXHJcblx0XHRuZXd2YWwgPSBwYXJzZUZsb2F0KCBhbGlnblZhbHVlLnRvRml4ZWQoNSkgKTtcclxuXHJcblx0XHRpZiAoIHR5cGVvZiBweFN0ZXAgPT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdHB4U3RlcCA9IHdpZHRoIC8gKCAobWF4LW1pbikgLyBzdGVwICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIHB4U3RlcCA+IDEgJiYgaXNJbnB1dCApIHtcclxuXHRcdFx0cGVyY2VudCA9ICggbmV3dmFsIC0gbWluICkgKiBwZXJjZW50UGVyU3RlcCAqICggMSAvIHN0ZXAgKTtcclxuXHRcdH1cclxuXHRcdGlmICggcGVyY2VudCA8IDAgKSB7XHJcblx0XHRcdHBlcmNlbnQgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcGVyY2VudCA+IDEwMCApIHtcclxuXHRcdFx0cGVyY2VudCA9IDEwMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld3ZhbCA8IG1pbiApIHtcclxuXHRcdFx0bmV3dmFsID0gbWluO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3dmFsID4gbWF4ICkge1xyXG5cdFx0XHRuZXd2YWwgPSBtYXg7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUuY3NzKCBcImxlZnRcIiwgcGVyY2VudCArIFwiJVwiICk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVbMF0uc2V0QXR0cmlidXRlKCBcImFyaWEtdmFsdWVub3dcIiwgaXNJbnB1dCA/IG5ld3ZhbCA6IG9wdGlvbkVsZW1lbnRzLmVxKCBuZXd2YWwgKS5hdHRyKCBcInZhbHVlXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlWzBdLnNldEF0dHJpYnV0ZSggXCJhcmlhLXZhbHVldGV4dFwiLCBpc0lucHV0ID8gbmV3dmFsIDogb3B0aW9uRWxlbWVudHMuZXEoIG5ld3ZhbCApLmdldEVuY29kZWRUZXh0KCkgKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZVswXS5zZXRBdHRyaWJ1dGUoIFwidGl0bGVcIiwgaXNJbnB1dCA/IG5ld3ZhbCA6IG9wdGlvbkVsZW1lbnRzLmVxKCBuZXd2YWwgKS5nZXRFbmNvZGVkVGV4dCgpICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLnZhbHVlYmcgKSB7XHJcblx0XHRcdHRoaXMudmFsdWViZy5jc3MoIFwid2lkdGhcIiwgcGVyY2VudCArIFwiJVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZHJhZyB0aGUgbGFiZWwgd2lkdGhzXHJcblx0XHRpZiAoIHRoaXMuX2xhYmVscyApIHtcclxuXHRcdFx0aGFuZGxlUGVyY2VudCA9IHRoaXMuaGFuZGxlLndpZHRoKCkgLyB0aGlzLnNsaWRlci53aWR0aCgpICogMTAwO1xyXG5cdFx0XHRhUGVyY2VudCA9IHBlcmNlbnQgJiYgaGFuZGxlUGVyY2VudCArICggMTAwIC0gaGFuZGxlUGVyY2VudCApICogcGVyY2VudCAvIDEwMDtcclxuXHRcdFx0YlBlcmNlbnQgPSBwZXJjZW50ID09PSAxMDAgPyAwIDogTWF0aC5taW4oIGhhbmRsZVBlcmNlbnQgKyAxMDAgLSBhUGVyY2VudCwgMTAwICk7XHJcblxyXG5cdFx0XHR0aGlzLl9sYWJlbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYWIgPSAkKCB0aGlzICkuaGFzQ2xhc3MoIFwidWktc2xpZGVyLWxhYmVsLWFcIiApO1xyXG5cdFx0XHRcdCQoIHRoaXMgKS53aWR0aCggKCBhYiA/IGFQZXJjZW50IDogYlBlcmNlbnQgICkgKyBcIiVcIiApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICFwcmV2ZW50SW5wdXRVcGRhdGUgKSB7XHJcblx0XHRcdHZhbHVlQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gdXBkYXRlIGNvbnRyb2xcInMgdmFsdWVcclxuXHRcdFx0aWYgKCBpc0lucHV0ICkge1xyXG5cdFx0XHRcdHZhbHVlQ2hhbmdlZCA9IHBhcnNlRmxvYXQoIGNvbnRyb2wudmFsKCkgKSAhPT0gbmV3dmFsO1xyXG5cdFx0XHRcdGNvbnRyb2wudmFsKCBuZXd2YWwgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2YWx1ZUNoYW5nZWQgPSBjb250cm9sWyAwIF0uc2VsZWN0ZWRJbmRleCAhPT0gbmV3dmFsO1xyXG5cdFx0XHRcdGNvbnRyb2xbIDAgXS5zZWxlY3RlZEluZGV4ID0gbmV3dmFsO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVjaGFuZ2VcIiwgdmFsICkgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhaXNmcm9tQ29udHJvbCAmJiB2YWx1ZUNoYW5nZWQgKSB7XHJcblx0XHRcdFx0Y29udHJvbC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0SGlnaGxpZ2h0OiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHRpZiAoIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0ID0gISF2YWx1ZTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9IGVsc2UgaWYgKCB0aGlzLnZhbHVlYmcgKSB7XHJcblx0XHRcdHRoaXMudmFsdWViZy5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy52YWx1ZWJnID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldFRoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR0aGlzLmhhbmRsZVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLVwiICsgdGhpcy5vcHRpb25zLnRoZW1lIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIHZhbHVlICk7XHJcblxyXG5cdFx0dmFyIGN1cnJlbnRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRuZXdUaGVtZSA9IHZhbHVlID8gdmFsdWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHR0aGlzLmNvbnRyb2xcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJvZHktXCIgKyBjdXJyZW50VGhlbWUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArIG5ld1RoZW1lICk7XHJcblx0fSxcclxuXHJcblx0X3NldFRyYWNrVGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhciBjdXJyZW50VHJhY2tUaGVtZSA9IHRoaXMub3B0aW9ucy50cmFja1RoZW1lID8gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0bmV3VHJhY2tUaGVtZSA9IHZhbHVlID8gdmFsdWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHR0aGlzLnNsaWRlclxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYm9keS1cIiArIGN1cnJlbnRUcmFja1RoZW1lIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyBuZXdUcmFja1RoZW1lICk7XHJcblx0fSxcclxuXHJcblx0X3NldE1pbmk6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhbHVlID0gISF2YWx1ZTtcclxuXHRcdGlmICggIXRoaXMuaXNUb2dnbGVTd2l0Y2ggJiYgIXRoaXMuaXNSYW5nZXNsaWRlciApIHtcclxuXHRcdFx0dGhpcy5zbGlkZXIucGFyZW50KCkudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zbGlkZXIudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCB2YWx1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRDb3JuZXJzOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR0aGlzLnNsaWRlci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIHZhbHVlICk7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0dGhpcy5jb250cm9sLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgdmFsdWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0RGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhbHVlID0gISF2YWx1ZTtcclxuXHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHR0aGlzLnNsaWRlclxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgdmFsdWUgKVxyXG5cdFx0XHQuYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIHZhbHVlICk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0fVxyXG5cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBwb3B1cDtcclxuXHJcbmZ1bmN0aW9uIGdldFBvcHVwKCkge1xyXG5cdGlmICggIXBvcHVwICkge1xyXG5cdFx0cG9wdXAgPSAkKCBcIjxkaXY+PC9kaXY+XCIsIHtcclxuXHRcdFx0XCJjbGFzc1wiOiBcInVpLXNsaWRlci1wb3B1cCB1aS1zaGFkb3cgdWktY29ybmVyLWFsbFwiXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHBvcHVwLmNsb25lKCk7XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zbGlkZXJcIiwgJC5tb2JpbGUuc2xpZGVyLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0cG9wdXBFbmFibGVkOiBmYWxzZSxcclxuXHRcdHNob3dWYWx1ZTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2N1cnJlbnRWYWx1ZTogbnVsbCxcclxuXHRcdFx0X3BvcHVwOiBudWxsLFxyXG5cdFx0XHRfcG9wdXBWaXNpYmxlOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fc2V0T3B0aW9uKCBcInBvcHVwRW5hYmxlZFwiLCB0aGlzLm9wdGlvbnMucG9wdXBFbmFibGVkICk7XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuaGFuZGxlLCB7IFwidm1vdXNlZG93blwiIDogXCJfc2hvd1BvcHVwXCIgfSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuc2xpZGVyLmFkZCggdGhpcy5kb2N1bWVudCApLCB7IFwidm1vdXNldXBcIiA6IFwiX2hpZGVQb3B1cFwiIH0gKTtcclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHQvLyBwb3NpdGlvbiB0aGUgcG9wdXAgY2VudGVyZWQgNXB4IGFib3ZlIHRoZSBoYW5kbGVcclxuXHRfcG9zaXRpb25Qb3B1cDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZHN0T2Zmc2V0ID0gdGhpcy5oYW5kbGUub2Zmc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fcG9wdXAub2Zmc2V0KCB7XHJcblx0XHRcdGxlZnQ6IGRzdE9mZnNldC5sZWZ0ICsgKCB0aGlzLmhhbmRsZS53aWR0aCgpIC0gdGhpcy5fcG9wdXAud2lkdGgoKSApIC8gMixcclxuXHRcdFx0dG9wOiBkc3RPZmZzZXQudG9wIC0gdGhpcy5fcG9wdXAub3V0ZXJIZWlnaHQoKSAtIDVcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJzaG93VmFsdWVcIiApIHtcclxuXHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggdmFsdWUgJiYgIXRoaXMub3B0aW9ucy5taW5pID8gdGhpcy5fdmFsdWUoKSA6IFwiXCIgKTtcclxuXHRcdH0gZWxzZSBpZiAoIGtleSA9PT0gXCJwb3B1cEVuYWJsZWRcIiApIHtcclxuXHRcdFx0aWYgKCB2YWx1ZSAmJiAhdGhpcy5fcG9wdXAgKSB7XHJcblx0XHRcdFx0dGhpcy5fcG9wdXAgPSBnZXRQb3B1cCgpXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArICggdGhpcy5vcHRpb25zLnRoZW1lIHx8IFwiYVwiICkgKVxyXG5cdFx0XHRcdFx0LmhpZGUoKVxyXG5cdFx0XHRcdFx0Lmluc2VydEJlZm9yZSggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBzaG93IHZhbHVlIG9uIHRoZSBoYW5kbGUgYW5kIGluIHBvcHVwXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsIG5ld1ZhbHVlO1xyXG5cclxuXHRcdGlmICggby5wb3B1cEVuYWJsZWQgKSB7XHJcblx0XHRcdC8vIHJlbW92ZSB0aGUgdGl0bGUgYXR0cmlidXRlIGZyb20gdGhlIGhhbmRsZSAod2hpY2ggaXNcclxuXHRcdFx0Ly8gcmVzcG9uc2libGUgZm9yIHRoZSBhbm5veWluZyB0b29sdGlwKTsgTkIgd2UgaGF2ZVxyXG5cdFx0XHQvLyB0byBkbyBpdCBoZXJlIGFzIHRoZSBqcW0gc2xpZGVyIHNldHMgaXQgZXZlcnkgdGltZVxyXG5cdFx0XHQvLyB0aGUgc2xpZGVyJ3MgdmFsdWUgY2hhbmdlcyA6KFxyXG5cdFx0XHR0aGlzLmhhbmRsZS5yZW1vdmVBdHRyKCBcInRpdGxlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRuZXdWYWx1ZSA9IHRoaXMuX3ZhbHVlKCk7XHJcblx0XHRpZiAoIG5ld1ZhbHVlID09PSB0aGlzLl9jdXJyZW50VmFsdWUgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2N1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuXHRcdGlmICggby5wb3B1cEVuYWJsZWQgJiYgdGhpcy5fcG9wdXAgKSB7XHJcblx0XHRcdHRoaXMuX3Bvc2l0aW9uUG9wdXAoKTtcclxuXHRcdFx0dGhpcy5fcG9wdXAuaHRtbCggbmV3VmFsdWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG8uc2hvd1ZhbHVlICYmICF0aGlzLm9wdGlvbnMubWluaSApIHtcclxuXHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggbmV3VmFsdWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2hvd1BvcHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnBvcHVwRW5hYmxlZCAmJiAhdGhpcy5fcG9wdXBWaXNpYmxlICkge1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5odG1sKCBcIlwiICk7XHJcblx0XHRcdHRoaXMuX3BvcHVwLnNob3coKTtcclxuXHRcdFx0dGhpcy5fcG9zaXRpb25Qb3B1cCgpO1xyXG5cdFx0XHR0aGlzLl9wb3B1cFZpc2libGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oaWRlUG9wdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvLnBvcHVwRW5hYmxlZCAmJiB0aGlzLl9wb3B1cFZpc2libGUgKSB7XHJcblx0XHRcdGlmICggby5zaG93VmFsdWUgJiYgIW8ubWluaSApIHtcclxuXHRcdFx0XHR0aGlzLmhhbmRsZS5odG1sKCB0aGlzLl92YWx1ZSgpICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fcG9wdXAuaGlkZSgpO1xyXG5cdFx0XHR0aGlzLl9wb3B1cFZpc2libGUgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZmxpcHN3aXRjaFwiLCAkLmV4dGVuZCh7XHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdG9uVGV4dDogXCJPblwiLFxyXG5cdFx0b2ZmVGV4dDogXCJPZmZcIixcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdG1pbmk6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRcdGZsaXBzd2l0Y2g6IHRoaXMuZWxlbWVudC5wYXJlbnQoKSxcclxuXHRcdFx0XHRcdG9uOiB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktZmxpcHN3aXRjaC1vblwiICkuZXEoIDAgKSxcclxuXHRcdFx0XHRcdG9mZjogdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLWZsaXBzd2l0Y2gtb2ZmXCIgKS5lcSgwKSxcclxuXHRcdFx0XHRcdHR5cGU6IHRoaXMuZWxlbWVudC5nZXQoIDAgKS50YWdOYW1lXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cclxuXHRcdFx0Ly8gVHJhbnNmZXIgdGFiaW5kZXggdG8gXCJvblwiIGVsZW1lbnQgYW5kIG1ha2UgaW5wdXQgdW5mb2N1c2FibGVcclxuXHRcdFx0dGhpcy5fb3JpZ2luYWxUYWJJbmRleCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICE9IG51bGwgKSB7XHJcblx0XHRcdFx0dGhpcy5vbi5hdHRyKCBcInRhYmluZGV4XCIsIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwiZm9jdXNcIiA6IFwiX2hhbmRsZUlucHV0Rm9jdXNcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0T3B0aW9ucyh7XHJcblx0XHRcdFx0XHRcImRpc2FibGVkXCI6IHRydWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZmxpcHN3aXRjaCwge1xyXG5cdFx0XHRcdFwiY2xpY2tcIjogXCJfdG9nZ2xlXCIsXHJcblx0XHRcdFx0XCJzd2lwZWxlZnRcIjogXCJfbGVmdFwiLFxyXG5cdFx0XHRcdFwic3dpcGVyaWdodFwiOiBcIl9yaWdodFwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMub24sIHtcclxuXHRcdFx0XHRcImtleWRvd25cIjogXCJfa2V5ZG93blwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHtcclxuXHRcdFx0XHRcImNoYW5nZVwiOiBcInJlZnJlc2hcIlxyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLm9uLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmZsaXBzd2l0Y2g7XHJcblx0fSxcclxuXHJcblx0X2xlZnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5mbGlwc3dpdGNoLnJlbW92ZUNsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKTtcclxuXHRcdGlmICggdGhpcy50eXBlID09PSBcIlNFTEVDVFwiICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZ2V0KCAwICkuc2VsZWN0ZWRJbmRleCA9IDA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmZsaXBzd2l0Y2guYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApO1xyXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiU0VMRUNUXCIgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5nZXQoIDAgKS5zZWxlY3RlZEluZGV4ID0gMTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiwgdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZmxpcHN3aXRjaCA9ICQoIFwiPGRpdj5cIiApLFxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRlbGVtZW50ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0aGVtZSA9IG9wdGlvbnMudGhlbWUgPyBvcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblxyXG5cdFx0XHQvLyBUaGUgXCJvblwiIGJ1dHRvbiBpcyBhbiBhbmNob3Igc28gaXQncyBmb2N1c2FibGVcclxuXHRcdFx0b24gPSAkKCBcIjxhPjwvYT5cIiwge1xyXG5cdFx0XHRcdFwiaHJlZlwiOiBcIiNcIlxyXG5cdFx0XHR9KSxcclxuXHRcdFx0b2ZmID0gJCggXCI8c3Bhbj48L3NwYW4+XCIgKSxcclxuXHRcdFx0dHlwZSA9IGVsZW1lbnQuZ2V0KCAwICkudGFnTmFtZSxcclxuXHRcdFx0b25UZXh0ID0gKCB0eXBlID09PSBcIklOUFVUXCIgKSA/XHJcblx0XHRcdFx0b3B0aW9ucy5vblRleHQgOiBlbGVtZW50LmZpbmQoIFwib3B0aW9uXCIgKS5lcSggMSApLnRleHQoKSxcclxuXHRcdFx0b2ZmVGV4dCA9ICggdHlwZSA9PT0gXCJJTlBVVFwiICkgP1xyXG5cdFx0XHRcdG9wdGlvbnMub2ZmVGV4dCA6IGVsZW1lbnQuZmluZCggXCJvcHRpb25cIiApLmVxKCAwICkudGV4dCgpO1xyXG5cclxuXHRcdFx0b25cclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1vbiB1aS1idG4gdWktc2hhZG93IHVpLWJ0bi1pbmhlcml0XCIgKVxyXG5cdFx0XHRcdC50ZXh0KCBvblRleHQgKTtcclxuXHRcdFx0b2ZmXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtb2ZmXCIgKVxyXG5cdFx0XHRcdC50ZXh0KCBvZmZUZXh0ICk7XHJcblxyXG5cdFx0XHRmbGlwc3dpdGNoXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2ggdWktc2hhZG93LWluc2V0IFwiICtcclxuXHRcdFx0XHRcdFwidWktYmFyLVwiICsgdGhlbWUgKyBcIiBcIiArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMud3JhcHBlckNsYXNzID8gb3B0aW9ucy53cmFwcGVyQ2xhc3MgOiBcIlwiICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHQoICggZWxlbWVudC5pcyggXCI6Y2hlY2tlZFwiICkgfHxcclxuXHRcdFx0XHRcdFx0ZWxlbWVudFxyXG5cdFx0XHRcdFx0XHRcdC5maW5kKCBcIm9wdGlvblwiIClcclxuXHRcdFx0XHRcdFx0XHQuZXEoIDEgKVxyXG5cdFx0XHRcdFx0XHRcdC5pcyggXCI6c2VsZWN0ZWRcIiApICkgPyBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBlbGVtZW50LmlzKFwiOmRpc2FibGVkXCIpID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIjogXCJcIikgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCI6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMubWluaSA/IFwiIHVpLW1pbmlcIjogXCJcIiApIClcclxuXHRcdFx0XHQuYXBwZW5kKCBvbiwgb2ZmICk7XHJcblxyXG5cdFx0XHRlbGVtZW50XHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtaW5wdXRcIiApXHJcblx0XHRcdFx0LmFmdGVyKCBmbGlwc3dpdGNoIClcclxuXHRcdFx0XHQuYXBwZW5kVG8oIGZsaXBzd2l0Y2ggKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRmbGlwc3dpdGNoOiBmbGlwc3dpdGNoLFxyXG5cdFx0XHRvbjogb24sXHJcblx0XHRcdG9mZjogb2ZmLFxyXG5cdFx0XHR0eXBlOiB0eXBlXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZGlyZWN0aW9uLFxyXG5cdFx0XHRleGlzdGluZ0RpcmVjdGlvbiA9IHRoaXMuZmxpcHN3aXRjaC5oYXNDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICkgPyBcIl9yaWdodFwiIDogXCJfbGVmdFwiO1xyXG5cclxuXHRcdGlmICggdGhpcy50eXBlID09PSBcIlNFTEVDVFwiICkge1xyXG5cdFx0XHRkaXJlY3Rpb24gPSAoIHRoaXMuZWxlbWVudC5nZXQoIDAgKS5zZWxlY3RlZEluZGV4ID4gMCApID8gXCJfcmlnaHRcIjogXCJfbGVmdFwiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZGlyZWN0aW9uID0gdGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiICkgPyBcIl9yaWdodFwiOiBcIl9sZWZ0XCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBkaXJlY3Rpb24gIT09IGV4aXN0aW5nRGlyZWN0aW9uICkge1xyXG5cdFx0XHR0aGlzWyBkaXJlY3Rpb24gXSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF90b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRpcmVjdGlvbiA9IHRoaXMuZmxpcHN3aXRjaC5oYXNDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICkgPyBcIl9sZWZ0XCIgOiBcIl9yaWdodFwiO1xyXG5cclxuXHRcdHRoaXNbIGRpcmVjdGlvbiBdKCk7XHJcblx0fSxcclxuXHJcblx0X2tleWRvd246IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0aWYgKCBlLndoaWNoID09PSAkLm1vYmlsZS5rZXlDb2RlLkxFRlQgKSB7XHJcblx0XHRcdHRoaXMuX2xlZnQoKTtcclxuXHRcdH0gZWxzZSBpZiAoIGUud2hpY2ggPT09ICQubW9iaWxlLmtleUNvZGUuUklHSFQgKSB7XHJcblx0XHRcdHRoaXMuX3JpZ2h0KCk7XHJcblx0XHR9IGVsc2UgaWYgKCBlLndoaWNoID09PSAkLm1vYmlsZS5rZXlDb2RlLlNQQUNFICkge1xyXG5cdFx0XHR0aGlzLl90b2dnbGUoKTtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR2YXIgY3VycmVudFRoZW1lID0gb3B0aW9ucy50aGVtZSA/IG9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0XHRuZXdUaGVtZSA9IG9wdGlvbnMudGhlbWUgPyBvcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0XHR0aGlzLndpZGdldCgpXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJhci1cIiArIGN1cnJlbnRUaGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJhci1cIiArIG5ld1RoZW1lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMub25UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMub24udGV4dCggb3B0aW9ucy5vblRleHQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5vZmZUZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMub2ZmLnRleHQoIG9wdGlvbnMub2ZmVGV4dCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5fb3JpZ2luYWxUYWJJbmRleCAhPSBudWxsICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJ0YWJpbmRleFwiLCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLm9uLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5vZmYucmVtb3ZlKCk7XHJcblx0XHR0aGlzLmVsZW1lbnQudW53cmFwKCk7XHJcblx0XHR0aGlzLmZsaXBzd2l0Y2gucmVtb3ZlKCk7XHJcblx0XHR0aGlzLnJlbW92ZUNsYXNzKCBcInVpLWZsaXBzd2l0Y2gtaW5wdXRcIiApO1xyXG5cdH1cclxuXHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnJhbmdlc2xpZGVyXCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHR0aGVtZTogbnVsbCxcclxuXHRcdFx0dHJhY2tUaGVtZTogbnVsbCxcclxuXHRcdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdFx0bWluaTogZmFsc2UsXHJcblx0XHRcdGhpZ2hsaWdodDogdHJ1ZVxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0ZWxDbGFzcyA9IHRoaXMub3B0aW9ucy5taW5pID8gXCJ1aS1yYW5nZXNsaWRlciB1aS1taW5pXCIgOiBcInVpLXJhbmdlc2xpZGVyXCIsXHJcblx0XHRcdF9pbnB1dEZpcnN0ID0gJGVsLmZpbmQoIFwiaW5wdXRcIiApLmZpcnN0KCksXHJcblx0XHRcdF9pbnB1dExhc3QgPSAkZWwuZmluZCggXCJpbnB1dFwiICkubGFzdCgpLFxyXG5cdFx0XHRfbGFiZWwgPSAkZWwuZmluZCggXCJsYWJlbFwiICkuZmlyc3QoKSxcclxuXHRcdFx0X3NsaWRlcldpZGdldEZpcnN0ID0gJC5kYXRhKCBfaW5wdXRGaXJzdC5nZXQoIDAgKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSB8fFxyXG5cdFx0XHRcdCQuZGF0YSggX2lucHV0Rmlyc3Quc2xpZGVyKCkuZ2V0KCAwICksIFwibW9iaWxlLXNsaWRlclwiICksXHJcblx0XHRcdF9zbGlkZXJXaWRnZXRMYXN0ID0gJC5kYXRhKCBfaW5wdXRMYXN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSB8fFxyXG5cdFx0XHRcdCQuZGF0YSggX2lucHV0TGFzdC5zbGlkZXIoKS5nZXQoIDAgKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSxcclxuXHRcdFx0X3NsaWRlckZpcnN0ID0gX3NsaWRlcldpZGdldEZpcnN0LnNsaWRlcixcclxuXHRcdFx0X3NsaWRlckxhc3QgPSBfc2xpZGVyV2lkZ2V0TGFzdC5zbGlkZXIsXHJcblx0XHRcdGZpcnN0SGFuZGxlID0gX3NsaWRlcldpZGdldEZpcnN0LmhhbmRsZSxcclxuXHRcdFx0X3NsaWRlcnMgPSAkKCBcIjxkaXYgY2xhc3M9J3VpLXJhbmdlc2xpZGVyLXNsaWRlcnMnIC8+XCIgKS5hcHBlbmRUbyggJGVsICk7XHJcblxyXG5cdFx0XHRfaW5wdXRGaXJzdC5hZGRDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1maXJzdFwiICk7XHJcblx0XHRcdF9pbnB1dExhc3QuYWRkQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItbGFzdFwiICk7XHJcblx0XHRcdCRlbC5hZGRDbGFzcyggZWxDbGFzcyApO1xyXG5cclxuXHRcdFx0X3NsaWRlckZpcnN0LmFwcGVuZFRvKCBfc2xpZGVycyApO1xyXG5cdFx0XHRfc2xpZGVyTGFzdC5hcHBlbmRUbyggX3NsaWRlcnMgKTtcclxuXHRcdFx0X2xhYmVsLmluc2VydEJlZm9yZSggJGVsICk7XHJcblx0XHRcdGZpcnN0SGFuZGxlLnByZXBlbmRUbyggX3NsaWRlckxhc3QgKTtcclxuXHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0X2lucHV0Rmlyc3Q6IF9pbnB1dEZpcnN0LFxyXG5cdFx0XHRcdF9pbnB1dExhc3Q6IF9pbnB1dExhc3QsXHJcblx0XHRcdFx0X3NsaWRlckZpcnN0OiBfc2xpZGVyRmlyc3QsXHJcblx0XHRcdFx0X3NsaWRlckxhc3Q6IF9zbGlkZXJMYXN0LFxyXG5cdFx0XHRcdF9sYWJlbDogX2xhYmVsLFxyXG5cdFx0XHRcdF90YXJnZXRWYWw6IG51bGwsXHJcblx0XHRcdFx0X3NsaWRlclRhcmdldDogZmFsc2UsXHJcblx0XHRcdFx0X3NsaWRlcnM6IF9zbGlkZXJzLFxyXG5cdFx0XHRcdF9wcm94eTogZmFsc2VcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudC5maW5kKCBcImlucHV0LnVpLXNsaWRlci1pbnB1dFwiICksIHtcclxuXHRcdFx0XHRcInNsaWRlYmVmb3Jlc3RhcnRcIjogXCJfc2xpZGViZWZvcmVzdGFydFwiLFxyXG5cdFx0XHRcdFwic2xpZGVzdG9wXCI6IFwiX3NsaWRlc3RvcFwiLFxyXG5cdFx0XHRcdFwic2xpZGVkcmFnXCI6IFwiX3NsaWRlZHJhZ1wiLFxyXG5cdFx0XHRcdFwic2xpZGViZWZvcmVjaGFuZ2VcIjogXCJfY2hhbmdlXCIsXHJcblx0XHRcdFx0XCJibHVyXCI6IFwiX2NoYW5nZVwiLFxyXG5cdFx0XHRcdFwia2V5dXBcIjogXCJfY2hhbmdlXCJcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcIm1vdXNlZG93blwiOlwiX2NoYW5nZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiZm9ybVwiICksIHtcclxuXHRcdFx0XHRcInJlc2V0XCI6XCJfaGFuZGxlUmVzZXRcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fb24oIGZpcnN0SGFuZGxlLCB7XHJcblx0XHRcdFx0XCJ2bW91c2Vkb3duXCI6IFwiX2RyYWdGaXJzdEhhbmRsZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdF9oYW5kbGVSZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0Ly93ZSBtdXN0IHdhaXQgZm9yIHRoZSBzdGFjayB0byB1bndpbmQgYmVmb3JlIHVwZGF0ZWluZyBvdGhlciB3aXNlIHNsaWRlcnMgd2lsbCBub3QgaGF2ZSB1cGRhdGVkIHlldFxyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHRcdFx0fSwwKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2RyYWdGaXJzdEhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHQvL2lmIHRoZSBmaXJzdCBoYW5kbGUgaXMgZHJhZ2dlZCBzZW5kIHRoZSBldmVudCB0byB0aGUgZmlyc3Qgc2xpZGVyXHJcblx0XHRcdCQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0XHQkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLnJlZnJlc2goIGV2ZW50ICk7XHJcblx0XHRcdCQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuX3RyaWdnZXIoIFwic3RhcnRcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zbGlkZWRyYWc6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGZpcnN0ID0gJCggZXZlbnQudGFyZ2V0ICkuaXMoIHRoaXMuX2lucHV0Rmlyc3QgKSxcclxuXHRcdFx0XHRvdGhlclNsaWRlciA9ICggZmlyc3QgKSA/IHRoaXMuX2lucHV0TGFzdCA6IHRoaXMuX2lucHV0Rmlyc3Q7XHJcblxyXG5cdFx0XHR0aGlzLl9zbGlkZXJUYXJnZXQgPSBmYWxzZTtcclxuXHRcdFx0Ly9pZiB0aGUgZHJhZyB3YXMgaW5pdGlhdGVkIG9uIGFuIGV4dHJlbWUgYW5kIHRoZSBvdGhlciBoYW5kbGUgaXMgZm9jdXNlZCBzZW5kIHRoZSBldmVudHMgdG9cclxuXHRcdFx0Ly90aGUgY2xvc2VzdCBoYW5kbGVcclxuXHRcdFx0aWYgKCAoIHRoaXMuX3Byb3h5ID09PSBcImZpcnN0XCIgJiYgZmlyc3QgKSB8fCAoIHRoaXMuX3Byb3h5ID09PSBcImxhc3RcIiAmJiAhZmlyc3QgKSApIHtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5kcmFnZ2luZyA9IHRydWU7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkucmVmcmVzaCggZXZlbnQgKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3NsaWRlc3RvcDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZmlyc3QgPSAkKCBldmVudC50YXJnZXQgKS5pcyggdGhpcy5faW5wdXRGaXJzdCApO1xyXG5cclxuXHRcdFx0dGhpcy5fcHJveHkgPSBmYWxzZTtcclxuXHRcdFx0Ly90aGlzIHN0b3BzIGRyYWdnaW5nIG9mIHRoZSBoYW5kbGUgYW5kIGJyaW5ncyB0aGUgYWN0aXZlIHRyYWNrIHRvIHRoZSBmcm9udFxyXG5cdFx0XHQvL3RoaXMgbWFrZXMgY2xpY2tzIG9uIHRoZSB0cmFjayBnbyB0aGUgdGhlIGxhc3QgaGFuZGxlIHVzZWRcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiaW5wdXRcIiApLnRyaWdnZXIoIFwidm1vdXNldXBcIiApO1xyXG5cdFx0XHR0aGlzLl9zbGlkZXJGaXJzdC5jc3MoIFwiei1pbmRleFwiLCBmaXJzdCA/IDEgOiBcIlwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zbGlkZWJlZm9yZXN0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHRoaXMuX3NsaWRlclRhcmdldCA9IGZhbHNlO1xyXG5cdFx0XHQvL2lmIHRoZSB0cmFjayBpcyB0aGUgdGFyZ2V0IHJlbWVtYmVyIHRoaXMgYW5kIHRoZSBvcmlnaW5hbCB2YWx1ZVxyXG5cdFx0XHRpZiAoICQoIGV2ZW50Lm9yaWdpbmFsRXZlbnQudGFyZ2V0ICkuaGFzQ2xhc3MoIFwidWktc2xpZGVyLXRyYWNrXCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLl9zbGlkZXJUYXJnZXQgPSB0cnVlO1xyXG5cdFx0XHRcdHRoaXMuX3RhcmdldFZhbCA9ICQoIGV2ZW50LnRhcmdldCApLnZhbCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0VGhlbWUoIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLnRyYWNrVGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRUcmFja1RoZW1lKCBvcHRpb25zLnRyYWNrVGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRNaW5pKCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmhpZ2hsaWdodCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldEhpZ2hsaWdodCggb3B0aW9ucy5oaWdobGlnaHQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0RGlzYWJsZWQoIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX2lucHV0Rmlyc3QuaXMoIFwiOmRpc2FibGVkXCIgKSB8fCB0aGlzLl9pbnB1dExhc3QuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkZWwuZmluZCggXCJpbnB1dFwiICkuc2xpZGVyKHtcclxuXHRcdFx0XHR0aGVtZTogby50aGVtZSxcclxuXHRcdFx0XHR0cmFja1RoZW1lOiBvLnRyYWNrVGhlbWUsXHJcblx0XHRcdFx0ZGlzYWJsZWQ6IG8uZGlzYWJsZWQsXHJcblx0XHRcdFx0Y29ybmVyczogby5jb3JuZXJzLFxyXG5cdFx0XHRcdG1pbmk6IG8ubWluaSxcclxuXHRcdFx0XHRoaWdobGlnaHQ6IG8uaGlnaGxpZ2h0XHJcblx0XHRcdH0pLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYgKCBldmVudC50eXBlID09PSBcImtleXVwXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0bWluID0gcGFyc2VGbG9hdCggdGhpcy5faW5wdXRGaXJzdC52YWwoKSwgMTAgKSxcclxuXHRcdFx0XHRtYXggPSBwYXJzZUZsb2F0KCB0aGlzLl9pbnB1dExhc3QudmFsKCksIDEwICksXHJcblx0XHRcdFx0Zmlyc3QgPSAkKCBldmVudC50YXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1maXJzdFwiICksXHJcblx0XHRcdFx0dGhpc1NsaWRlciA9IGZpcnN0ID8gdGhpcy5faW5wdXRGaXJzdCA6IHRoaXMuX2lucHV0TGFzdCxcclxuXHRcdFx0XHRvdGhlclNsaWRlciA9IGZpcnN0ID8gdGhpcy5faW5wdXRMYXN0IDogdGhpcy5faW5wdXRGaXJzdDtcclxuXHJcblx0XHRcdGlmICggKCB0aGlzLl9pbnB1dEZpcnN0LnZhbCgpID4gdGhpcy5faW5wdXRMYXN0LnZhbCgpICYmIGV2ZW50LnR5cGUgPT09IFwibW91c2Vkb3duXCIgJiYgISQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcyhcInVpLXNsaWRlci1oYW5kbGVcIikpICkge1xyXG5cdFx0XHRcdHRoaXNTbGlkZXIuYmx1cigpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBldmVudC50eXBlID09PSBcIm1vdXNlZG93blwiICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG1pbiA+IG1heCAmJiAhdGhpcy5fc2xpZGVyVGFyZ2V0ICkge1xyXG5cdFx0XHRcdC8vdGhpcyBwcmV2ZW50cyBtaW4gZnJvbSBiZWluZyBncmVhdGVyIHRoZW4gbWF4XHJcblx0XHRcdFx0dGhpc1NsaWRlci52YWwoIGZpcnN0ID8gbWF4OiBtaW4gKS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlciggXCJub3JtYWxpemVcIiApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBtaW4gPiBtYXggKSB7XHJcblx0XHRcdFx0Ly90aGlzIG1ha2VzIGl0IHNvIGNsaWNrcyBvbiB0aGUgdGFyZ2V0IG9uIGVpdGhlciBleHRyZW1lIGdvIHRvIHRoZSBjbG9zZXN0IGhhbmRsZVxyXG5cdFx0XHRcdHRoaXNTbGlkZXIudmFsKCB0aGlzLl90YXJnZXRWYWwgKS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblxyXG5cdFx0XHRcdC8vWW91IG11c3Qgd2FpdCBmb3IgdGhlIHN0YWNrIHRvIHVud2luZCBzbyBmaXJzdCBzbGlkZXIgaXMgdXBkYXRlZCBiZWZvcmUgdXBkYXRpbmcgc2Vjb25kXHJcblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRvdGhlclNsaWRlci52YWwoIGZpcnN0ID8gbWluOiBtYXggKS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuZm9jdXMoKTtcclxuXHRcdFx0XHRcdHNlbGYuX3NsaWRlckZpcnN0LmNzcyggXCJ6LWluZGV4XCIsIGZpcnN0ID8gXCJcIiA6IDEgKTtcclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoIFwibm9ybWFsaXplXCIgKTtcclxuXHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdFx0dGhpcy5fcHJveHkgPSAoIGZpcnN0ICkgPyBcImZpcnN0XCIgOiBcImxhc3RcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2ZpeGVzIGlzc3VlIHdoZXJlIHdoZW4gYm90aCBfc2xpZGVycyBhcmUgYXQgbWluIHRoZXkgY2Fubm90IGJlIGFkanVzdGVkXHJcblx0XHRcdGlmICggbWluID09PSBtYXggKSB7XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgMSApO1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCAwICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIFwiXCIgKTtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXNTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCBcIlwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cclxuXHRcdFx0aWYgKCBtaW4gPj0gbWF4ICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdXBkYXRlSGlnaGxpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIG1pbiA9IHBhcnNlSW50KCAkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5nZXQoMCkuc3R5bGUubGVmdCwgMTAgKSxcclxuXHRcdFx0XHRtYXggPSBwYXJzZUludCggJC5kYXRhKCB0aGlzLl9pbnB1dExhc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5nZXQoMCkuc3R5bGUubGVmdCwgMTAgKSxcclxuXHRcdFx0XHR3aWR0aCA9IChtYXggLSBtaW4pO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXNsaWRlci1iZ1wiICkuY3NzKHtcclxuXHRcdFx0XHRcIm1hcmdpbi1sZWZ0XCI6IG1pbiArIFwiJVwiLFxyXG5cdFx0XHRcdFwid2lkdGhcIjogd2lkdGggKyBcIiVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldFRoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRoZW1lXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldFRyYWNrVGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidHJhY2tUaGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRyYWNrVGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE1pbmk6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwibWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcIm1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgISF2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0SGlnaGxpZ2h0OiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcImhpZ2hsaWdodFwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcImhpZ2hsaWdodFwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0RGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5wcm9wKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5wcm9wKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fbGFiZWwucHJlcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXJhbmdlc2xpZGVyIHVpLW1pbmlcIiApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LmFmdGVyKCB0aGlzLl9zbGlkZXJGaXJzdCApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3QuYWZ0ZXIoIHRoaXMuX3NsaWRlckxhc3QgKTtcclxuXHRcdFx0dGhpcy5fc2xpZGVycy5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiaW5wdXRcIiApLnJlbW92ZUNsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWZpcnN0IHVpLXJhbmdlc2xpZGVyLWxhc3RcIiApLnNsaWRlciggXCJkZXN0cm95XCIgKTtcclxuXHRcdH1cclxuXHJcblx0fSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRleHRpbnB1dFwiLCAkLm1vYmlsZS50ZXh0aW5wdXQsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0Y2xlYXJCdG46IGZhbHNlLFxyXG5cdFx0XHRjbGVhckJ0blRleHQ6IFwiQ2xlYXIgdGV4dFwiXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmlzU2VhcmNoICkge1xyXG5cdFx0XHRcdHRoaXMub3B0aW9ucy5jbGVhckJ0biA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggISF0aGlzLm9wdGlvbnMuY2xlYXJCdG4gJiYgdGhpcy5pbnB1dE5lZWRzV3JhcCApIHtcclxuXHRcdFx0XHR0aGlzLl9hZGRDbGVhckJ0bigpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsZWFyQnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQoIFwiPGEgaHJlZj0nIycgdGFiaW5kZXg9Jy0xJyBhcmlhLWhpZGRlbj0ndHJ1ZScgXCIgK1xyXG5cdFx0XHRcdFwiY2xhc3M9J3VpLWlucHV0LWNsZWFyIHVpLWJ0biB1aS1pY29uLWRlbGV0ZSB1aS1idG4taWNvbi1ub3RleHQgdWktY29ybmVyLWFsbCc+XCIgK1xyXG5cdFx0XHRcdFwiPC9hPlwiIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcInRpdGxlXCIsIHRoaXMub3B0aW9ucy5jbGVhckJ0blRleHQgKVxyXG5cdFx0XHRcdFx0LnRleHQoIHRoaXMub3B0aW9ucy5jbGVhckJ0blRleHQgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NsZWFyQnRuQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnZhbCggXCJcIiApXHJcblx0XHRcdFx0XHQuZm9jdXMoKVxyXG5cdFx0XHRcdFx0LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMuX2NsZWFyQnRuLmFkZENsYXNzKCBcInVpLWlucHV0LWNsZWFyLWhpZGRlblwiICk7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9hZGRDbGVhckJ0bjogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZW5oYW5jZUNsZWFyKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0X2NsZWFyQnRuOiB0aGlzLndpZGdldCgpLmZpbmQoXCJhLnVpLWlucHV0LWNsZWFyXCIpXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fYmluZENsZWFyRXZlbnRzKCk7XHJcblxyXG5cdFx0XHR0aGlzLl90b2dnbGVDbGVhcigpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0X2VuaGFuY2VDbGVhcjogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR0aGlzLmNsZWFyQnV0dG9uKCkuYXBwZW5kVG8oIHRoaXMud2lkZ2V0KCkgKTtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS5hZGRDbGFzcyggXCJ1aS1pbnB1dC1oYXMtY2xlYXJcIiApO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0X2JpbmRDbGVhckV2ZW50czogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5fY2xlYXJCdG4sIHtcclxuXHRcdFx0XHRcImNsaWNrXCI6IFwiX2NsZWFyQnRuQ2xpY2tcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcImtleXVwXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJjaGFuZ2VcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImlucHV0XCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJmb2N1c1wiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiYmx1clwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiY3V0XCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJwYXN0ZVwiOiBcIl90b2dnbGVDbGVhclwiXHJcblxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdF91bmJpbmRDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5fY2xlYXJCdG4sIFwiY2xpY2tcIik7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5lbGVtZW50LCBcImtleXVwIGNoYW5nZSBpbnB1dCBmb2N1cyBibHVyIGN1dCBwYXN0ZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5jbGVhckJ0biAhPT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdFx0IXRoaXMuZWxlbWVudC5pcyggXCJ0ZXh0YXJlYSwgOmpxbURhdGEodHlwZT0ncmFuZ2UnKVwiICkgKSB7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zLmNsZWFyQnRuICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fYWRkQ2xlYXJCdG4oKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5fZGVzdHJveUNsZWFyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuY2xlYXJCdG5UZXh0ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fY2xlYXJCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9jbGVhckJ0bi50ZXh0KCBvcHRpb25zLmNsZWFyQnRuVGV4dCApXHJcblx0XHRcdFx0XHQuYXR0cihcInRpdGxlXCIsIG9wdGlvbnMuY2xlYXJCdG5UZXh0KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdG9nZ2xlQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9kZWxheSggXCJfdG9nZ2xlQ2xlYXJDbGFzc1wiLCAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90b2dnbGVDbGVhckNsYXNzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fY2xlYXJCdG4udG9nZ2xlQ2xhc3MoIFwidWktaW5wdXQtY2xlYXItaGlkZGVuXCIsICF0aGlzLmVsZW1lbnQudmFsKCkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3lDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkucmVtb3ZlQ2xhc3MoIFwidWktaW5wdXQtaGFzLWNsZWFyXCIgKTtcclxuXHRcdFx0dGhpcy5fdW5iaW5kQ2xlYXIoKTtcclxuXHRcdFx0dGhpcy5fY2xlYXJCdG4ucmVtb3ZlKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuY2xlYXJCdG4gKSB7XHJcblx0XHRcdFx0dGhpcy5fZGVzdHJveUNsZWFyKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRleHRpbnB1dFwiLCAkLm1vYmlsZS50ZXh0aW5wdXQsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0YXV0b2dyb3c6dHJ1ZSxcclxuXHRcdFx0a2V5dXBUaW1lb3V0QnVmZmVyOiAxMDBcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvZ3JvdyAmJiB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdFx0dGhpcy5fYXV0b2dyb3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfYXV0b2dyb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93XCIgKTtcclxuXHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcImtleXVwXCI6IFwiX3RpbWVvdXRcIixcclxuXHRcdFx0XHRcImNoYW5nZVwiOiBcIl90aW1lb3V0XCIsXHJcblx0XHRcdFx0XCJpbnB1dFwiOiBcIl90aW1lb3V0XCIsXHJcblx0XHRcdFx0XCJwYXN0ZVwiOiBcIl90aW1lb3V0XCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBBdHRhY2ggdG8gdGhlIHZhcmlvdXMgeW91LWhhdmUtYmVjb21lLXZpc2libGUgbm90aWZpY2F0aW9ucyB0aGF0IHRoZVxyXG5cdFx0XHQvLyB2YXJpb3VzIGZyYW1ld29yayBlbGVtZW50cyBlbWl0LlxyXG5cdFx0XHQvLyBUT0RPOiBSZW1vdmUgYWxsIGJ1dCB0aGUgdXBkYXRlbGF5b3V0IGhhbmRsZXIgb25jZSAjNjQyNiBpcyBmaXhlZC5cclxuXHRcdFx0dGhpcy5fb24oIHRydWUsIHRoaXMuZG9jdW1lbnQsIHtcclxuXHJcblx0XHRcdFx0Ly8gVE9ETzogTW92ZSB0byBub24tZGVwcmVjYXRlZCBldmVudFxyXG5cdFx0XHRcdFwicGFnZXNob3dcIjogXCJfaGFuZGxlU2hvd1wiLFxyXG5cdFx0XHRcdFwicG9wdXBiZWZvcmVwb3NpdGlvblwiOiBcIl9oYW5kbGVTaG93XCIsXHJcblx0XHRcdFx0XCJ1cGRhdGVsYXlvdXRcIjogXCJfaGFuZGxlU2hvd1wiLFxyXG5cdFx0XHRcdFwicGFuZWxvcGVuXCI6IFwiX2hhbmRsZVNob3dcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gU3luY2hyb25vdXNseSBmaXggdGhlIHdpZGdldCBoZWlnaHQgaWYgdGhpcyB3aWRnZXQncyBwYXJlbnRzIGFyZSBzdWNoXHJcblx0XHQvLyB0aGF0IHRoZXkgc2hvdy9oaWRlIGNvbnRlbnQgYXQgcnVudGltZS4gV2Ugc3RpbGwgbmVlZCB0byBjaGVjayB3aGV0aGVyXHJcblx0XHQvLyB0aGUgd2lkZ2V0IGlzIGFjdHVhbGx5IHZpc2libGUgaW4gY2FzZSBpdCBpcyBjb250YWluZWQgaW5zaWRlIG11bHRpcGxlXHJcblx0XHQvLyBzdWNoIGNvbnRhaW5lcnMuIEZvciBleGFtcGxlOiBwYW5lbCBjb250YWlucyBjb2xsYXBzaWJsZSBjb250YWluc1xyXG5cdFx0Ly8gYXV0b2dyb3cgdGV4dGlucHV0LiBUaGUgcGFuZWwgbWF5IGVtaXQgXCJwYW5lbG9wZW5cIiBpbmRpY2F0aW5nIHRoYXQgaXRzXHJcblx0XHQvLyBjb250ZW50IGhhcyBiZWNvbWUgdmlzaWJsZSwgYnV0IHRoZSBjb2xsYXBzaWJsZSBpcyBzdGlsbCBjb2xsYXBzZWQsIHNvXHJcblx0XHQvLyB0aGUgYXV0b2dyb3cgdGV4dGFyZWEgaXMgc3RpbGwgbm90IHZpc2libGUuXHJcblx0XHRfaGFuZGxlU2hvdzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRpZiAoICQuY29udGFpbnMoIGV2ZW50LnRhcmdldCwgdGhpcy5lbGVtZW50WyAwIF0gKSAmJlxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5pcyggXCI6dmlzaWJsZVwiICkgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggZXZlbnQudHlwZSAhPT0gXCJwb3B1cGJlZm9yZXBvc2l0aW9uXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvdy1yZXNpemVcIiApXHJcblx0XHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZShcclxuXHRcdFx0XHRcdFx0XHQkLnByb3h5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3ctcmVzaXplXCIgKTtcclxuXHRcdFx0XHRcdFx0XHR9LCB0aGlzICksXHJcblx0XHRcdFx0XHRcdFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuX3ByZXBhcmVIZWlnaHRVcGRhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdW5iaW5kQXV0b2dyb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93XCIgKTtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLmVsZW1lbnQsIFwia2V5dXAgY2hhbmdlIGlucHV0IHBhc3RlXCIgKTtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLmRvY3VtZW50LFxyXG5cdFx0XHRcdFwicGFnZXNob3cgcG9wdXBiZWZvcmVwb3NpdGlvbiB1cGRhdGVsYXlvdXQgcGFuZWxvcGVuXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0a2V5dXBUaW1lb3V0OiBudWxsLFxyXG5cclxuXHRcdF9wcmVwYXJlSGVpZ2h0VXBkYXRlOiBmdW5jdGlvbiggZGVsYXkgKSB7XHJcblx0XHRcdGlmICggdGhpcy5rZXl1cFRpbWVvdXQgKSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmtleXVwVGltZW91dCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggZGVsYXkgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVIZWlnaHQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmtleXVwVGltZW91dCA9IHRoaXMuX2RlbGF5KCBcIl91cGRhdGVIZWlnaHRcIiwgZGVsYXkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdGltZW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3ByZXBhcmVIZWlnaHRVcGRhdGUoIHRoaXMub3B0aW9ucy5rZXl1cFRpbWVvdXRCdWZmZXIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3VwZGF0ZUhlaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWRkaW5nVG9wLCBwYWRkaW5nQm90dG9tLCBwYWRkaW5nSGVpZ2h0LCBzY3JvbGxIZWlnaHQsIGNsaWVudEhlaWdodCxcclxuXHRcdFx0XHRib3JkZXJUb3AsIGJvcmRlckJvdHRvbSwgYm9yZGVySGVpZ2h0LCBoZWlnaHQsXHJcblx0XHRcdFx0c2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblx0XHRcdHRoaXMua2V5dXBUaW1lb3V0ID0gMDtcclxuXHJcblx0XHRcdC8vIElFOCB0ZXh0YXJlYXMgaGF2ZSB0aGUgb25wYWdlIHByb3BlcnR5IC0gb3RoZXJzIGRvIG5vdFxyXG5cdFx0XHRpZiAoICEoIFwib25wYWdlXCIgaW4gdGhpcy5lbGVtZW50WyAwIF0gKSApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuY3NzKHtcclxuXHRcdFx0XHRcdFwiaGVpZ2h0XCI6IDAsXHJcblx0XHRcdFx0XHRcIm1pbi1oZWlnaHRcIjogMCxcclxuXHRcdFx0XHRcdFwibWF4LWhlaWdodFwiOiAwXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNjcm9sbEhlaWdodCA9IHRoaXMuZWxlbWVudFsgMCBdLnNjcm9sbEhlaWdodDtcclxuXHRcdFx0Y2xpZW50SGVpZ2h0ID0gdGhpcy5lbGVtZW50WyAwIF0uY2xpZW50SGVpZ2h0O1xyXG5cdFx0XHRib3JkZXJUb3AgPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcImJvcmRlci10b3Atd2lkdGhcIiApICk7XHJcblx0XHRcdGJvcmRlckJvdHRvbSA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiICkgKTtcclxuXHRcdFx0Ym9yZGVySGVpZ2h0ID0gYm9yZGVyVG9wICsgYm9yZGVyQm90dG9tO1xyXG5cdFx0XHRoZWlnaHQgPSBzY3JvbGxIZWlnaHQgKyBib3JkZXJIZWlnaHQgKyAxNTtcclxuXHJcblx0XHRcdC8vIElzc3VlIDYxNzk6IFBhZGRpbmcgaXMgbm90IGluY2x1ZGVkIGluIHNjcm9sbEhlaWdodCBhbmRcclxuXHRcdFx0Ly8gY2xpZW50SGVpZ2h0IGJ5IEZpcmVmb3ggaWYgbm8gc2Nyb2xsYmFyIGlzIHZpc2libGUuIEJlY2F1c2VcclxuXHRcdFx0Ly8gdGV4dGFyZWFzIHVzZSB0aGUgYm9yZGVyLWJveCBib3gtc2l6aW5nIG1vZGVsLCBwYWRkaW5nIHNob3VsZCBiZVxyXG5cdFx0XHQvLyBpbmNsdWRlZCBpbiB0aGUgbmV3IChhc3NpZ25lZCkgaGVpZ2h0LiBCZWNhdXNlIHRoZSBoZWlnaHQgaXMgc2V0XHJcblx0XHRcdC8vIHRvIDAsIGNsaWVudEhlaWdodCA9PSAwIGluIEZpcmVmb3guIFRoZXJlZm9yZSwgd2UgY2FuIHVzZSB0aGlzIHRvXHJcblx0XHRcdC8vIGNoZWNrIGlmIHBhZGRpbmcgbXVzdCBiZSBhZGRlZC5cclxuXHRcdFx0aWYgKCBjbGllbnRIZWlnaHQgPT09IDAgKSB7XHJcblx0XHRcdFx0cGFkZGluZ1RvcCA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwicGFkZGluZy10b3BcIiApICk7XHJcblx0XHRcdFx0cGFkZGluZ0JvdHRvbSA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwicGFkZGluZy1ib3R0b21cIiApICk7XHJcblx0XHRcdFx0cGFkZGluZ0hlaWdodCA9IHBhZGRpbmdUb3AgKyBwYWRkaW5nQm90dG9tO1xyXG5cclxuXHRcdFx0XHRoZWlnaHQgKz0gcGFkZGluZ0hlaWdodDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmNzcyh7XHJcblx0XHRcdFx0XCJoZWlnaHRcIjogaGVpZ2h0LFxyXG5cdFx0XHRcdFwibWluLWhlaWdodFwiOiBcIlwiLFxyXG5cdFx0XHRcdFwibWF4LWhlaWdodFwiOiBcIlwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy53aW5kb3cuc2Nyb2xsVG9wKCBzY3JvbGxUb3AgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmF1dG9ncm93ICYmIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVIZWlnaHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmF1dG9ncm93ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRcdGlmICggb3B0aW9ucy5hdXRvZ3JvdyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2F1dG9ncm93KCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuX3VuYmluZEF1dG9ncm93KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zZWxlY3RtZW51XCIsICQuZXh0ZW5kKCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcInNlbGVjdDpub3QoIDpqcW1EYXRhKHJvbGU9J3NsaWRlcicpKTpub3QoIDpqcW1EYXRhKHJvbGU9J2ZsaXBzd2l0Y2gnKSApXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0aWNvbjogXCJjYXJhdC1kXCIsXHJcblx0XHRpY29ucG9zOiBcInJpZ2h0XCIsXHJcblx0XHRpbmxpbmU6IGZhbHNlLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGljb25zaGFkb3c6IGZhbHNlLCAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdG92ZXJsYXlUaGVtZTogbnVsbCxcclxuXHRcdGRpdmlkZXJUaGVtZTogbnVsbCxcclxuXHRcdGhpZGVQbGFjZWhvbGRlck1lbnVJdGVtczogdHJ1ZSxcclxuXHRcdGNsb3NlVGV4dDogXCJDbG9zZVwiLFxyXG5cdFx0bmF0aXZlTWVudTogdHJ1ZSxcclxuXHRcdC8vIFRoaXMgb3B0aW9uIGRlZmF1bHRzIHRvIHRydWUgb24gaU9TIGRldmljZXMuXHJcblx0XHRwcmV2ZW50Rm9jdXNab29tOiAvaVBob25lfGlQYWR8aVBvZC8udGVzdCggbmF2aWdhdG9yLnBsYXRmb3JtICkgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xLFxyXG5cdFx0bWluaTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfYnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXYvPlwiICk7XHJcblx0fSxcclxuXHJcblx0X3NldERpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0dGhpcy5idXR0b24uYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzQnV0dG9uIDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNlbGYuYnV0dG9uLmZvY3VzKCk7XHJcblx0XHR9LCA0MCk7XHJcblx0fSxcclxuXHJcblx0X3NlbGVjdE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2VsZWN0LmZpbmQoIFwib3B0aW9uXCIgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBzZXR1cCBpdGVtcyB0aGF0IGFyZSBnZW5lcmFsbHkgbmVjZXNzYXJ5IGZvciBzZWxlY3QgbWVudSBleHRlbnNpb25cclxuXHRfcHJlRXh0ZW5zaW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpbmxpbmUgPSB0aGlzLm9wdGlvbnMuaW5saW5lIHx8IHRoaXMuZWxlbWVudC5qcW1EYXRhKCBcImlubGluZVwiICksXHJcblx0XHRcdG1pbmkgPSB0aGlzLm9wdGlvbnMubWluaSB8fCB0aGlzLmVsZW1lbnQuanFtRGF0YSggXCJtaW5pXCIgKSxcclxuXHRcdFx0Y2xhc3NlcyA9IFwiXCI7XHJcblx0XHQvLyBUT0RPOiBQb3N0IDEuMS0tb25jZSB3ZSBoYXZlIHRpbWUgdG8gdGVzdCB0aG9yb3VnaGx5LS1hbnkgY2xhc3NlcyBtYW51YWxseSBhcHBsaWVkIHRvIHRoZSBvcmlnaW5hbCBlbGVtZW50IHNob3VsZCBiZSBjYXJyaWVkIG92ZXIgdG8gdGhlIGVuaGFuY2VkIGVsZW1lbnQsIHdpdGggYW4gYC1lbmhhbmNlZGAgc3VmZml4LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8zNTc3XHJcblx0XHQvKiBpZiAoICRlbFswXS5jbGFzc05hbWUubGVuZ3RoICkge1xyXG5cdFx0XHRjbGFzc2VzID0gJGVsWzBdLmNsYXNzTmFtZTtcclxuXHRcdH0gKi9cclxuXHRcdGlmICggISF+dGhpcy5lbGVtZW50WzBdLmNsYXNzTmFtZS5pbmRleE9mKCBcInVpLWJ0bi1sZWZ0XCIgKSApIHtcclxuXHRcdFx0Y2xhc3NlcyA9IFwiIHVpLWJ0bi1sZWZ0XCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAgISF+dGhpcy5lbGVtZW50WzBdLmNsYXNzTmFtZS5pbmRleE9mKCBcInVpLWJ0bi1yaWdodFwiICkgKSB7XHJcblx0XHRcdGNsYXNzZXMgPSBcIiB1aS1idG4tcmlnaHRcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGlubGluZSApIHtcclxuXHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1idG4taW5saW5lXCI7XHJcblx0XHR9XHJcblx0XHRpZiAoIG1pbmkgKSB7XHJcblx0XHRcdGNsYXNzZXMgKz0gXCIgdWktbWluaVwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2VsZWN0ID0gdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodFwiICkud3JhcCggXCI8ZGl2IGNsYXNzPSd1aS1zZWxlY3RcIiArIGNsYXNzZXMgKyBcIic+XCIgKTtcclxuXHRcdHRoaXMuc2VsZWN0SWQgID0gdGhpcy5zZWxlY3QuYXR0ciggXCJpZFwiICkgfHwgKCBcInNlbGVjdC1cIiArIHRoaXMudXVpZCApO1xyXG5cdFx0dGhpcy5idXR0b25JZCA9IHRoaXMuc2VsZWN0SWQgKyBcIi1idXR0b25cIjtcclxuXHRcdHRoaXMubGFiZWwgPSAkKCBcImxhYmVsW2Zvcj0nXCIrIHRoaXMuc2VsZWN0SWQgK1wiJ11cIiApO1xyXG5cdFx0dGhpcy5pc011bHRpcGxlID0gdGhpcy5zZWxlY3RbIDAgXS5tdWx0aXBsZTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd3JhcHBlciA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCBcIi51aS1zZWxlY3RcIiApO1xyXG5cdFx0aWYgKCB3cmFwcGVyLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdGlmICggd3JhcHBlci5pcyggXCIudWktYnRuLWxlZnQsIC51aS1idG4tcmlnaHRcIiApICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggd3JhcHBlci5oYXNDbGFzcyggXCJ1aS1idG4tbGVmdFwiICkgPyBcInVpLWJ0bi1sZWZ0XCIgOiBcInVpLWJ0bi1yaWdodFwiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5lbGVtZW50Lmluc2VydEFmdGVyKCB3cmFwcGVyICk7XHJcblx0XHRcdHdyYXBwZXIucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9wcmVFeHRlbnNpb24oKTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbiA9IHRoaXMuX2J1dHRvbigpO1xyXG5cclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblxyXG5cdFx0XHRpY29ucG9zID0gb3B0aW9ucy5pY29uID8gKCBvcHRpb25zLmljb25wb3MgfHwgdGhpcy5zZWxlY3QuanFtRGF0YSggXCJpY29ucG9zXCIgKSApIDogZmFsc2UsXHJcblxyXG5cdFx0XHRidXR0b24gPSB0aGlzLmJ1dHRvblxyXG5cdFx0XHRcdC5pbnNlcnRCZWZvcmUoIHRoaXMuc2VsZWN0IClcclxuXHRcdFx0XHQuYXR0ciggXCJpZFwiLCB0aGlzLmJ1dHRvbklkIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuXCIgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmljb24gPyAoIFwiIHVpLWljb24tXCIgKyBvcHRpb25zLmljb24gKyBcIiB1aS1idG4taWNvbi1cIiArIGljb25wb3MgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmljb25zaGFkb3cgPyBcIiB1aS1zaGFkb3ctaWNvblwiIDogXCJcIiApICkgOlx0XCJcIiApICsgLyogVE9ETzogUmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdFx0XHRcdCggb3B0aW9ucy50aGVtZSA/IFwiIHVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLnNoYWRvdyA/IFwiIHVpLXNoYWRvd1wiIDogXCJcIiApICk7XHJcblxyXG5cdFx0dGhpcy5zZXRCdXR0b25UZXh0KCk7XHJcblxyXG5cdFx0Ly8gT3BlcmEgZG9lcyBub3QgcHJvcGVybHkgc3VwcG9ydCBvcGFjaXR5IG9uIHNlbGVjdCBlbGVtZW50c1xyXG5cdFx0Ly8gSW4gTWluaSwgaXQgaGlkZXMgdGhlIGVsZW1lbnQsIGJ1dCBub3QgaXRzIHRleHRcclxuXHRcdC8vIE9uIHRoZSBkZXNrdG9wLGl0IHNlZW1zIHRvIGRvIHRoZSBvcHBvc2l0ZVxyXG5cdFx0Ly8gZm9yIHRoZXNlIHJlYXNvbnMsIHVzaW5nIHRoZSBuYXRpdmVNZW51IG9wdGlvbiByZXN1bHRzIGluIGEgZnVsbCBuYXRpdmUgc2VsZWN0IGluIE9wZXJhXHJcblx0XHRpZiAoIG9wdGlvbnMubmF0aXZlTWVudSAmJiB3aW5kb3cub3BlcmEgJiYgd2luZG93Lm9wZXJhLnZlcnNpb24gKSB7XHJcblx0XHRcdGJ1dHRvbi5hZGRDbGFzcyggXCJ1aS1zZWxlY3QtbmF0aXZlb25seVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIGNvdW50ZXIgZm9yIG11bHRpIHNlbGVjdHNcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLmJ1dHRvbkNvdW50ID0gJCggXCI8c3Bhbj5cIiApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWxpLWNvdW50IHVpLWJvZHktaW5oZXJpdFwiIClcclxuXHRcdFx0XHQuaGlkZSgpXHJcblx0XHRcdFx0LmFwcGVuZFRvKCBidXR0b24uYWRkQ2xhc3MoIFwidWktbGktaGFzLWNvdW50XCIgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERpc2FibGUgaWYgc3BlY2lmaWVkXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5lbGVtZW50LmF0dHIoIFwiZGlzYWJsZWRcIiApKSB7XHJcblx0XHRcdHRoaXMuZGlzYWJsZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEV2ZW50cyBvbiBuYXRpdmUgc2VsZWN0XHJcblx0XHR0aGlzLnNlbGVjdC5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNlbGYucmVmcmVzaCgpO1xyXG5cclxuXHRcdFx0aWYgKCAhIW9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0XHRzZWxmLl9kZWxheSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLnNlbGVjdC5ibHVyKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmJ1dHRvbiwge1xyXG5cdFx0XHRrZXlkb3duOiBcIl9oYW5kbGVLZXlkb3duXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnVpbGQoKTtcclxuXHR9LFxyXG5cclxuXHRidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy5zZWxlY3RcclxuXHRcdFx0LmFwcGVuZFRvKCBzZWxmLmJ1dHRvbiApXHJcblx0XHRcdC5iaW5kKCBcInZtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gQWRkIGFjdGl2ZSBjbGFzcyB0byBidXR0b25cclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24uYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJmb2N1cyB2bW91c2VvdmVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnRyaWdnZXIoIFwidm1vdXNlb3ZlclwiICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcInZtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBvbiBzY3JvbGwvdG91Y2htb3ZlXHJcblx0XHRcdFx0c2VsZi5idXR0b24ucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImNoYW5nZSBibHVyIHZtb3VzZW91dFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi50cmlnZ2VyKCBcInZtb3VzZW91dFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gSW4gbWFueSBzaXR1YXRpb25zLCBpT1Mgd2lsbCB6b29tIGludG8gdGhlIHNlbGVjdCB1cG9uIHRhcCwgdGhpcyBwcmV2ZW50cyB0aGF0IGZyb20gaGFwcGVuaW5nXHJcblx0XHRzZWxmLmJ1dHRvbi5iaW5kKCBcInZtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLmxhYmVsLmJpbmQoIFwiY2xpY2sgZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLnNlbGVjdC5iaW5kKCBcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5idXR0b24uYmluZCggXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLnNlbGVjdC5iaW5kKCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RPcHRpb25zKCkuZmlsdGVyKCBcIjpzZWxlY3RlZFwiICk7XHJcblx0fSxcclxuXHJcblx0c2VsZWN0ZWRJbmRpY2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5zZWxlY3RlZCgpLm1hcChmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHNlbGYuX3NlbGVjdE9wdGlvbnMoKS5pbmRleCggdGhpcyApO1xyXG5cdFx0fSkuZ2V0KCk7XHJcblx0fSxcclxuXHJcblx0c2V0QnV0dG9uVGV4dDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZCgpLFxyXG5cdFx0XHR0ZXh0ID0gdGhpcy5wbGFjZWhvbGRlcixcclxuXHRcdFx0c3BhbiA9ICQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic3BhblwiICkgKTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbi5jaGlsZHJlbiggXCJzcGFuXCIgKS5ub3QoIFwiLnVpLWxpLWNvdW50XCIgKS5yZW1vdmUoKS5lbmQoKS5lbmQoKS5wcmVwZW5kKCAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZWN0ZWQubGVuZ3RoICkge1xyXG5cdFx0XHRcdHRleHQgPSBzZWxlY3RlZC5tYXAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLnRleHQoKTtcclxuXHRcdFx0XHR9KS5nZXQoKS5qb2luKCBcIiwgXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0ZXh0ID0gc2VsZi5wbGFjZWhvbGRlcjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0ZXh0ICkge1xyXG5cdFx0XHRcdHNwYW4udGV4dCggdGV4dCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBTZXQgdGhlIGNvbnRlbnRzIHRvICZuYnNwOyB3aGljaCB3ZSB3cml0ZSBhcyAmIzE2MDsgdG8gYmUgWEhUTUwgY29tcGxpYW50IC0gc2VlIGdoLTY2OTlcclxuXHRcdFx0XHRzcGFuLmh0bWwoIFwiJiMxNjA7XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVE9ETyBwb3NzaWJseSBhZ2dyZWdhdGUgbXVsdGlwbGUgc2VsZWN0IG9wdGlvbiBjbGFzc2VzXHJcblx0XHRcdHJldHVybiBzcGFuXHJcblx0XHRcdFx0LmFkZENsYXNzKCBzZWxmLnNlbGVjdC5hdHRyKCBcImNsYXNzXCIgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBzZWxlY3RlZC5hdHRyKCBcImNsYXNzXCIgKSApXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fSkoKSk7XHJcblx0fSxcclxuXHJcblx0c2V0QnV0dG9uQ291bnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZCgpO1xyXG5cclxuXHRcdC8vIG11bHRpcGxlIGNvdW50IGluc2lkZSBidXR0b25cclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLmJ1dHRvbkNvdW50WyBzZWxlY3RlZC5sZW5ndGggPiAxID8gXCJzaG93XCIgOiBcImhpZGVcIiBdKCkudGV4dCggc2VsZWN0ZWQubGVuZ3RoICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUtleWRvd246IGZ1bmN0aW9uKCAvKiBldmVudCAqLyApIHtcclxuXHRcdHRoaXMuX2RlbGF5KCBcIl9yZWZyZXNoQnV0dG9uXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2hCdXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zZXRCdXR0b25UZXh0KCk7XHJcblx0XHR0aGlzLnNldEJ1dHRvbkNvdW50KCk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoQnV0dG9uKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gb3BlbiBhbmQgY2xvc2UgcHJlc2VydmVkIGluIG5hdGl2ZSBzZWxlY3RzXHJcblx0Ly8gdG8gc2ltcGxpZnkgdXNlcnMgY29kZSB3aGVuIGxvb3Bpbmcgb3ZlciBzZWxlY3RzXHJcblx0b3BlbjogJC5ub29wLFxyXG5cdGNsb3NlOiAkLm5vb3AsXHJcblxyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0RGlzYWJsZWQoIHRydWUgKTtcclxuXHRcdHRoaXMuYnV0dG9uLmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHR9LFxyXG5cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0RGlzYWJsZWQoIGZhbHNlICk7XHJcblx0XHR0aGlzLmJ1dHRvbi5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUubGlua3MgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cclxuXHQvL2xpbmtzIHdpdGhpbiBjb250ZW50IGFyZWFzLCB0ZXN0cyBpbmNsdWRlZCB3aXRoIHBhZ2VcclxuXHQkKCB0YXJnZXQgKVxyXG5cdFx0LmZpbmQoIFwiYVwiIClcclxuXHRcdC5qcW1FbmhhbmNlYWJsZSgpXHJcblx0XHQuZmlsdGVyKCBcIjpqcW1EYXRhKHJlbD0ncG9wdXAnKVtocmVmXVtocmVmIT0nJ11cIiApXHJcblx0XHQuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIEFjY2Vzc2liaWxpdHkgaW5mbyBmb3IgcG9wdXBzXHJcblx0XHRcdHZhciBlbGVtZW50ID0gdGhpcyxcclxuXHRcdFx0XHRpZHJlZiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCBcImhyZWZcIiApLnN1YnN0cmluZyggMSApO1xyXG5cclxuXHRcdFx0aWYgKCBpZHJlZiApIHtcclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSggXCJhcmlhLWhhc3BvcHVwXCIsIHRydWUgKTtcclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSggXCJhcmlhLW93bnNcIiwgaWRyZWYgKTtcclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSggXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuZW5kKClcclxuXHRcdC5ub3QoIFwiLnVpLWJ0biwgOmpxbURhdGEocm9sZT0nbm9uZScpLCA6anFtRGF0YShyb2xlPSdub2pzJylcIiApXHJcblx0XHQuYWRkQ2xhc3MoIFwidWktbGlua1wiICk7XHJcblxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuZnVuY3Rpb24gZml0U2VnbWVudEluc2lkZVNlZ21lbnQoIHdpbmRvd1NpemUsIHNlZ21lbnRTaXplLCBvZmZzZXQsIGRlc2lyZWQgKSB7XHJcblx0dmFyIHJldHVyblZhbHVlID0gZGVzaXJlZDtcclxuXHJcblx0aWYgKCB3aW5kb3dTaXplIDwgc2VnbWVudFNpemUgKSB7XHJcblx0XHQvLyBDZW50ZXIgc2VnbWVudCBpZiBpdCdzIGJpZ2dlciB0aGFuIHRoZSB3aW5kb3dcclxuXHRcdHJldHVyblZhbHVlID0gb2Zmc2V0ICsgKCB3aW5kb3dTaXplIC0gc2VnbWVudFNpemUgKSAvIDI7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIE90aGVyd2lzZSBjZW50ZXIgaXQgYXQgdGhlIGRlc2lyZWQgY29vcmRpbmF0ZSB3aGlsZSBrZWVwaW5nIGl0IGNvbXBsZXRlbHkgaW5zaWRlIHRoZSB3aW5kb3dcclxuXHRcdHJldHVyblZhbHVlID0gTWF0aC5taW4oIE1hdGgubWF4KCBvZmZzZXQsIGRlc2lyZWQgLSBzZWdtZW50U2l6ZSAvIDIgKSwgb2Zmc2V0ICsgd2luZG93U2l6ZSAtIHNlZ21lbnRTaXplICk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGVXaW5kb3cgKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHg6IHRoZVdpbmRvdy5zY3JvbGxMZWZ0KCksXHJcblx0XHR5OiB0aGVXaW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRjeDogKCB0aGVXaW5kb3dbIDAgXS5pbm5lcldpZHRoIHx8IHRoZVdpbmRvdy53aWR0aCgpICksXHJcblx0XHRjeTogKCB0aGVXaW5kb3dbIDAgXS5pbm5lckhlaWdodCB8fCB0aGVXaW5kb3cuaGVpZ2h0KCkgKVxyXG5cdH07XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wb3B1cFwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRvdmVybGF5VGhlbWU6IG51bGwsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0dHJhbnNpdGlvbjogXCJub25lXCIsXHJcblx0XHRwb3NpdGlvblRvOiBcIm9yaWdpblwiLFxyXG5cdFx0dG9sZXJhbmNlOiBudWxsLFxyXG5cdFx0Y2xvc2VMaW5rU2VsZWN0b3I6IFwiYTpqcW1EYXRhKHJlbD0nYmFjaycpXCIsXHJcblx0XHRjbG9zZUxpbmtFdmVudHM6IFwiY2xpY2sucG9wdXBcIixcclxuXHRcdG5hdmlnYXRlRXZlbnRzOiBcIm5hdmlnYXRlLnBvcHVwXCIsXHJcblx0XHRjbG9zZUV2ZW50czogXCJuYXZpZ2F0ZS5wb3B1cCBwYWdlYmVmb3JlY2hhbmdlLnBvcHVwXCIsXHJcblx0XHRkaXNtaXNzaWJsZTogdHJ1ZSxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHJcblx0XHQvLyBOT1RFIFdpbmRvd3MgUGhvbmUgNyBoYXMgYSBzY3JvbGwgcG9zaXRpb24gY2FjaGluZyBpc3N1ZSB0aGF0XHJcblx0XHQvLyAgICAgIHJlcXVpcmVzIHVzIHRvIGRpc2FibGUgcG9wdXAgaGlzdG9yeSBtYW5hZ2VtZW50IGJ5IGRlZmF1bHRcclxuXHRcdC8vICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80Nzg0XHJcblx0XHQvL1xyXG5cdFx0Ly8gTk9URSB0aGlzIG9wdGlvbiBpcyBtb2RpZmllZCBpbiBfY3JlYXRlIVxyXG5cdFx0aGlzdG9yeTogISQubW9iaWxlLmJyb3dzZXIub2xkSUVcclxuXHR9LFxyXG5cclxuXHQvLyBXaGVuIHRoZSB1c2VyIGRlcHJlc3NlcyB0aGUgbW91c2UvZmluZ2VyIG9uIGFuIGVsZW1lbnQgaW5zaWRlIHRoZSBwb3B1cCB3aGlsZSB0aGUgcG9wdXAgaXNcclxuXHQvLyBvcGVuLCB3ZSBpZ25vcmUgcmVzaXplIGV2ZW50cyBmb3IgYSBzaG9ydCB3aGlsZS4gVGhpcyBwcmV2ZW50cyAjNjk2MS5cclxuXHRfaGFuZGxlRG9jdW1lbnRWbW91c2Vkb3duOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiAmJiAkLmNvbnRhaW5zKCB0aGlzLl91aS5jb250YWluZXJbIDAgXSwgdGhlRXZlbnQudGFyZ2V0ICkgKSB7XHJcblx0XHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG15SWQgPSB0aGVFbGVtZW50LmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBXZSBuZWVkIHRvIGFkanVzdCB0aGUgaGlzdG9yeSBvcHRpb24gdG8gYmUgZmFsc2UgaWYgdGhlcmUncyBubyBBSkFYIG5hdi5cclxuXHRcdC8vIFdlIGNhbid0IGRvIGl0IGluIHRoZSBvcHRpb24gZGVjbGFyYXRpb25zIGJlY2F1c2UgdGhvc2UgYXJlIHJ1biBiZWZvcmVcclxuXHRcdC8vIGl0IGlzIGRldGVybWluZWQgd2hldGhlciB0aGVyZSBzaGFsbCBiZSBBSkFYIG5hdi5cclxuXHRcdGN1cnJlbnRPcHRpb25zLmhpc3RvcnkgPSBjdXJyZW50T3B0aW9ucy5oaXN0b3J5ICYmICQubW9iaWxlLmFqYXhFbmFibGVkICYmICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkO1xyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XHJcblx0XHRcdFwidm1vdXNlZG93blwiOiBcIl9oYW5kbGVEb2N1bWVudFZtb3VzZWRvd25cIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRGVmaW5lIGluc3RhbmNlIHZhcmlhYmxlc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3Njcm9sbFRvcDogMCxcclxuXHRcdFx0X3BhZ2U6IHRoZUVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICksXHJcblx0XHRcdF91aTogbnVsbCxcclxuXHRcdFx0X2ZhbGxiYWNrVHJhbnNpdGlvbjogXCJcIixcclxuXHRcdFx0X2N1cnJlbnRUcmFuc2l0aW9uOiBmYWxzZSxcclxuXHRcdFx0X3ByZXJlcXVpc2l0ZXM6IG51bGwsXHJcblx0XHRcdF9pc09wZW46IGZhbHNlLFxyXG5cdFx0XHRfdG9sZXJhbmNlOiBudWxsLFxyXG5cdFx0XHRfcmVzaXplRGF0YTogbnVsbCxcclxuXHRcdFx0X2lnbm9yZVJlc2l6ZVRvOiAwLFxyXG5cdFx0XHRfb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9wYWdlLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0dGhpcy5fcGFnZSA9ICQoIFwiYm9keVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBjdXJyZW50T3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB7XHJcblx0XHRcdFx0Y29udGFpbmVyOiB0aGVFbGVtZW50LnBhcmVudCgpLFxyXG5cdFx0XHRcdHNjcmVlbjogdGhlRWxlbWVudC5wYXJlbnQoKS5wcmV2KCksXHJcblx0XHRcdFx0cGxhY2Vob2xkZXI6ICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5nZXRFbGVtZW50QnlJZCggbXlJZCArIFwiLXBsYWNlaG9sZGVyXCIgKSApXHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl91aSA9IHRoaXMuX2VuaGFuY2UoIHRoZUVsZW1lbnQsIG15SWQgKTtcclxuXHRcdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBjdXJyZW50T3B0aW9ucy50cmFuc2l0aW9uICk7XHJcblx0XHR9XHJcblx0XHR0aGlzXHJcblx0XHRcdC5fc2V0VG9sZXJhbmNlKCBjdXJyZW50T3B0aW9ucy50b2xlcmFuY2UgKVxyXG5cdFx0XHQuX3VpLmZvY3VzRWxlbWVudCA9IHRoaXMuX3VpLmNvbnRhaW5lcjtcclxuXHJcblx0XHQvLyBFdmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuX3VpLnNjcmVlbiwgeyBcInZjbGlja1wiOiBcIl9lYXRFdmVudEFuZENsb3NlXCIgfSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7XHJcblx0XHRcdG9yaWVudGF0aW9uY2hhbmdlOiAkLnByb3h5KCB0aGlzLCBcIl9oYW5kbGVXaW5kb3dPcmllbnRhdGlvbmNoYW5nZVwiICksXHJcblx0XHRcdHJlc2l6ZTogJC5wcm94eSggdGhpcywgXCJfaGFuZGxlV2luZG93UmVzaXplXCIgKSxcclxuXHRcdFx0a2V5dXA6ICQucHJveHkoIHRoaXMsIFwiX2hhbmRsZVdpbmRvd0tleVVwXCIgKVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwgeyBcImZvY3VzaW5cIjogXCJfaGFuZGxlRG9jdW1lbnRGb2N1c0luXCIgfSApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbiggdGhlRWxlbWVudCwgbXlJZCApIHtcclxuXHRcdHZhciBjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0d3JhcHBlckNsYXNzID0gY3VycmVudE9wdGlvbnMud3JhcHBlckNsYXNzLFxyXG5cdFx0XHR1aSA9IHtcclxuXHRcdFx0XHRzY3JlZW46ICQoIFwiPGRpdiBjbGFzcz0ndWktc2NyZWVuLWhpZGRlbiB1aS1wb3B1cC1zY3JlZW4gXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLW92ZXJsYXktXCIsIGN1cnJlbnRPcHRpb25zLm92ZXJsYXlUaGVtZSApICsgXCInPjwvZGl2PlwiICksXHJcblx0XHRcdFx0cGxhY2Vob2xkZXI6ICQoIFwiPGRpdiBzdHlsZT0nZGlzcGxheTogbm9uZTsnPjwhLS0gcGxhY2Vob2xkZXIgLS0+PC9kaXY+XCIgKSxcclxuXHRcdFx0XHRjb250YWluZXI6ICQoIFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtY29udGFpbmVyIHVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiICtcclxuXHRcdFx0XHRcdCggd3JhcHBlckNsYXNzID8gKCBcIiBcIiArIHdyYXBwZXJDbGFzcyApIDogXCJcIiApICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0fSxcclxuXHRcdFx0ZnJhZ21lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCB1aS5zY3JlZW5bIDAgXSApO1xyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHVpLmNvbnRhaW5lclsgMCBdICk7XHJcblxyXG5cdFx0aWYgKCBteUlkICkge1xyXG5cdFx0XHR1aS5zY3JlZW4uYXR0ciggXCJpZFwiLCBteUlkICsgXCItc2NyZWVuXCIgKTtcclxuXHRcdFx0dWkuY29udGFpbmVyLmF0dHIoIFwiaWRcIiwgbXlJZCArIFwiLXBvcHVwXCIgKTtcclxuXHRcdFx0dWkucGxhY2Vob2xkZXJcclxuXHRcdFx0XHQuYXR0ciggXCJpZFwiLCBteUlkICsgXCItcGxhY2Vob2xkZXJcIiApXHJcblx0XHRcdFx0Lmh0bWwoIFwiPCEtLSBwbGFjZWhvbGRlciBmb3IgXCIgKyBteUlkICsgXCIgLS0+XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSB0aGUgcHJvdG9cclxuXHRcdHRoaXMuX3BhZ2VbIDAgXS5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcclxuXHRcdC8vIExlYXZlIGEgcGxhY2Vob2xkZXIgd2hlcmUgdGhlIGVsZW1lbnQgdXNlZCB0byBiZVxyXG5cdFx0dWkucGxhY2Vob2xkZXIuaW5zZXJ0QWZ0ZXIoIHRoZUVsZW1lbnQgKTtcclxuXHRcdHRoZUVsZW1lbnRcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cCBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgY3VycmVudE9wdGlvbnMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHQoIGN1cnJlbnRPcHRpb25zLnNoYWRvdyA/IFwidWktb3ZlcmxheS1zaGFkb3cgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdCggY3VycmVudE9wdGlvbnMuY29ybmVycyA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSApXHJcblx0XHRcdC5hcHBlbmRUbyggdWkuY29udGFpbmVyICk7XHJcblxyXG5cdFx0cmV0dXJuIHVpO1xyXG5cdH0sXHJcblxyXG5cdF9lYXRFdmVudEFuZENsb3NlOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dGhlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdC8vIE1ha2Ugc3VyZSB0aGUgc2NyZWVuIGNvdmVycyB0aGUgZW50aXJlIGRvY3VtZW50IC0gQ1NTIGlzIHNvbWV0aW1lcyBub3RcclxuXHQvLyBlbm91Z2ggdG8gYWNjb21wbGlzaCB0aGlzLlxyXG5cdF9yZXNpemVTY3JlZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNjcmVlbiA9IHRoaXMuX3VpLnNjcmVlbixcclxuXHRcdFx0cG9wdXBIZWlnaHQgPSB0aGlzLl91aS5jb250YWluZXIub3V0ZXJIZWlnaHQoIHRydWUgKSxcclxuXHRcdFx0c2NyZWVuSGVpZ2h0ID0gc2NyZWVuLnJlbW92ZUF0dHIoIFwic3R5bGVcIiApLmhlaWdodCgpLFxyXG5cclxuXHRcdFx0Ly8gU3VidHJhY3RpbmcgMSBoZXJlIGlzIG5lY2Vzc2FyeSBmb3IgYW4gb2JzY3VyZSBBbmRyZG9pZCA0LjAgYnVnIHdoZXJlXHJcblx0XHRcdC8vIHRoZSBicm93c2VyIGhhbmdzIGlmIHRoZSBzY3JlZW4gY292ZXJzIHRoZSBlbnRpcmUgZG9jdW1lbnQgOi9cclxuXHRcdFx0ZG9jdW1lbnRIZWlnaHQgPSB0aGlzLmRvY3VtZW50LmhlaWdodCgpIC0gMTtcclxuXHJcblx0XHRpZiAoIHNjcmVlbkhlaWdodCA8IGRvY3VtZW50SGVpZ2h0ICkge1xyXG5cdFx0XHRzY3JlZW4uaGVpZ2h0KCBkb2N1bWVudEhlaWdodCApO1xyXG5cdFx0fSBlbHNlIGlmICggcG9wdXBIZWlnaHQgPiBzY3JlZW5IZWlnaHQgKSB7XHJcblx0XHRcdHNjcmVlbi5oZWlnaHQoIHBvcHVwSGVpZ2h0ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVdpbmRvd0tleVVwOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiAmJiB0aGVFdmVudC5rZXlDb2RlID09PSAkLm1vYmlsZS5rZXlDb2RlLkVTQ0FQRSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2VhdEV2ZW50QW5kQ2xvc2UoIHRoZUV2ZW50ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2V4cGVjdFJlc2l6ZUV2ZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3aW5kb3dDb29yZGluYXRlcyA9IGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGlzLndpbmRvdyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5fcmVzaXplRGF0YSApIHtcclxuXHRcdFx0aWYgKCB3aW5kb3dDb29yZGluYXRlcy54ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLnggJiZcclxuXHRcdFx0XHR3aW5kb3dDb29yZGluYXRlcy55ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLnkgJiZcclxuXHRcdFx0XHR3aW5kb3dDb29yZGluYXRlcy5jeCA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy5jeCAmJlxyXG5cdFx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzLmN5ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLmN5ICkge1xyXG5cdFx0XHRcdC8vIHRpbWVvdXQgbm90IHJlZnJlc2hlZFxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjbGVhciBleGlzdGluZyB0aW1lb3V0IC0gaXQgd2lsbCBiZSByZWZyZXNoZWQgYmVsb3dcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuX3Jlc2l6ZURhdGEudGltZW91dElkICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZXNpemVEYXRhID0ge1xyXG5cdFx0XHR0aW1lb3V0SWQ6IHRoaXMuX2RlbGF5KCBcIl9yZXNpemVUaW1lb3V0XCIsIDIwMCApLFxyXG5cdFx0XHR3aW5kb3dDb29yZGluYXRlczogd2luZG93Q29vcmRpbmF0ZXNcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fSxcclxuXHJcblx0X3Jlc2l6ZVRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdGlmICggIXRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCkgKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl91aS5jb250YWluZXIuaGFzQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHRcdC8vIGVmZmVjdGl2ZWx5IHJhcGlkLW9wZW4gdGhlIHBvcHVwIHdoaWxlIGxlYXZpbmcgdGhlIHNjcmVlbiBpbnRhY3RcclxuXHRcdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiApO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBvc2l0aW9uKCB7IHBvc2l0aW9uVG86IFwid2luZG93XCIgfSApO1xyXG5cdFx0XHRcdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9yZXNpemVTY3JlZW4oKTtcclxuXHRcdFx0XHR0aGlzLl9yZXNpemVEYXRhID0gbnVsbDtcclxuXHRcdFx0XHR0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fcmVzaXplRGF0YSA9IG51bGw7XHJcblx0XHRcdHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zdG9wSWdub3JpbmdSZXNpemVFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplVG8gPSAwO1xyXG5cdH0sXHJcblxyXG5cdF9pZ25vcmVSZXNpemVFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl9pZ25vcmVSZXNpemVUbyApIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLl9pZ25vcmVSZXNpemVUbyApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplVG8gPSB0aGlzLl9kZWxheSggXCJfc3RvcElnbm9yaW5nUmVzaXplRXZlbnRzXCIsIDEwMDAgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlV2luZG93UmVzaXplOiBmdW5jdGlvbigvKiB0aGVFdmVudCAqLykge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gJiYgdGhpcy5faWdub3JlUmVzaXplVG8gPT09IDAgKSB7XHJcblx0XHRcdGlmICggKCB0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpIHx8IHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyApICYmXHJcblx0XHRcdFx0IXRoaXMuX3VpLmNvbnRhaW5lci5oYXNDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdC8vIGVmZmVjdGl2ZWx5IHJhcGlkLWNsb3NlIHRoZSBwb3B1cCB3aGlsZSBsZWF2aW5nIHRoZSBzY3JlZW4gaW50YWN0XHJcblx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwic3R5bGVcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVdpbmRvd09yaWVudGF0aW9uY2hhbmdlOiBmdW5jdGlvbigvKiB0aGVFdmVudCAqLykge1xyXG5cdFx0aWYgKCAhdGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzICYmIHRoaXMuX2lzT3BlbiAmJiB0aGlzLl9pZ25vcmVSZXNpemVUbyA9PT0gMCApIHtcclxuXHRcdFx0dGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKTtcclxuXHRcdFx0dGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBXaGVuIHRoZSBwb3B1cCBpcyBvcGVuLCBhdHRlbXB0aW5nIHRvIGZvY3VzIG9uIGFuIGVsZW1lbnQgdGhhdCBpcyBub3QgYVxyXG5cdC8vIGNoaWxkIG9mIHRoZSBwb3B1cCB3aWxsIHJlZGlyZWN0IGZvY3VzIHRvIHRoZSBwb3B1cFxyXG5cdF9oYW5kbGVEb2N1bWVudEZvY3VzSW46IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdHZhciB0YXJnZXQsXHJcblx0XHRcdHRhcmdldEVsZW1lbnQgPSB0aGVFdmVudC50YXJnZXQsXHJcblx0XHRcdHVpID0gdGhpcy5fdWk7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0YXJnZXRFbGVtZW50ICE9PSB1aS5jb250YWluZXJbIDAgXSApIHtcclxuXHRcdFx0dGFyZ2V0ID0gJCggdGFyZ2V0RWxlbWVudCApO1xyXG5cdFx0XHRpZiAoICEkLmNvbnRhaW5zKCB1aS5jb250YWluZXJbIDAgXSwgdGFyZ2V0RWxlbWVudCApICkge1xyXG5cdFx0XHRcdCQoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICkub25lKCBcImZvY3VzXCIsICQucHJveHkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fc2FmZWx5Qmx1ciggdGFyZ2V0RWxlbWVudCApO1xyXG5cdFx0XHRcdH0sIHRoaXMgKSApO1xyXG5cdFx0XHRcdHVpLmZvY3VzRWxlbWVudC5mb2N1cygpO1xyXG5cdFx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0dGhlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB1aS5mb2N1c0VsZW1lbnRbIDAgXSA9PT0gdWkuY29udGFpbmVyWyAwIF0gKSB7XHJcblx0XHRcdFx0dWkuZm9jdXNFbGVtZW50ID0gdGFyZ2V0O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0fSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggcHJlZml4LCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogKCBwcmVmaXggKyB2YWx1ZSApICkgOiAoIHByZWZpeCArIFwiaW5oZXJpdFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHRfYXBwbHlUcmFuc2l0aW9uOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRpZiAoIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiApO1xyXG5cdFx0XHRpZiAoIHZhbHVlICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHR0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gPSAkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiggdmFsdWUgKTtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiA9PT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gPSBcIlwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLl91aS5jb250YWluZXIuYWRkQ2xhc3MoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBuZXdPcHRpb25zICkge1xyXG5cdFx0dmFyIGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR0aGVFbGVtZW50ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRzY3JlZW4gPSB0aGlzLl91aS5zY3JlZW47XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLndyYXBwZXJDbGFzcyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGN1cnJlbnRPcHRpb25zLndyYXBwZXJDbGFzcyApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBuZXdPcHRpb25zLndyYXBwZXJDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGVFbGVtZW50XHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBjdXJyZW50T3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG5ld09wdGlvbnMudGhlbWUgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5vdmVybGF5VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0c2NyZWVuXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1vdmVybGF5LVwiLCBjdXJyZW50T3B0aW9ucy5vdmVybGF5VGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1vdmVybGF5LVwiLCBuZXdPcHRpb25zLm92ZXJsYXlUaGVtZSApICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0XHRzY3JlZW4uYWRkQ2xhc3MoIFwiaW5cIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGVFbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLW92ZXJsYXktc2hhZG93XCIsIG5ld09wdGlvbnMuc2hhZG93ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhlRWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG5ld09wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggIXRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICkge1xyXG5cdFx0XHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggbmV3T3B0aW9ucy50cmFuc2l0aW9uICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMudG9sZXJhbmNlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldFRvbGVyYW5jZSggbmV3T3B0aW9ucy50b2xlcmFuY2UgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCBuZXdPcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlciggbmV3T3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRUb2xlcmFuY2U6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhciB0b2wgPSB7IHQ6IDMwLCByOiAxNSwgYjogMzAsIGw6IDE1IH0sXHJcblx0XHRcdGFyO1xyXG5cclxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0YXIgPSBTdHJpbmcoIHZhbHVlICkuc3BsaXQoIFwiLFwiICk7XHJcblxyXG5cdFx0XHQkLmVhY2goIGFyLCBmdW5jdGlvbiggaWR4LCB2YWwgKSB7IGFyWyBpZHggXSA9IHBhcnNlSW50KCB2YWwsIDEwICk7IH0gKTtcclxuXHJcblx0XHRcdHN3aXRjaCggYXIubGVuZ3RoICkge1xyXG5cdFx0XHRcdC8vIEFsbCB2YWx1ZXMgYXJlIHRvIGJlIHRoZSBzYW1lXHJcblx0XHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAwIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnQgPSB0b2wuciA9IHRvbC5iID0gdG9sLmwgPSBhclsgMCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSBmaXJzdCB2YWx1ZSBkZW5vdGVzIHRvcC9ib3R0b20gdG9sZXJhbmNlLCBhbmQgdGhlIHNlY29uZCB2YWx1ZSBkZW5vdGVzIGxlZnQvcmlnaHQgdG9sZXJhbmNlXHJcblx0XHRcdFx0Y2FzZSAyOlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAwIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnQgPSB0b2wuYiA9IGFyWyAwIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDEgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wubCA9IHRvbC5yID0gYXJbIDEgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgYXJyYXkgY29udGFpbnMgdmFsdWVzIGluIHRoZSBvcmRlciB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRcclxuXHRcdFx0XHRjYXNlIDQ6XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDAgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wudCA9IGFyWyAwIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDEgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wuciA9IGFyWyAxIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDIgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wuYiA9IGFyWyAyIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDMgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wubCA9IGFyWyAzIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdG9sZXJhbmNlID0gdG9sO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X2NsYW1wUG9wdXBXaWR0aDogZnVuY3Rpb24oIGluZm9Pbmx5ICkge1xyXG5cdFx0dmFyIG1lbnVTaXplLFxyXG5cdFx0XHR3aW5kb3dDb29yZGluYXRlcyA9IGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGlzLndpbmRvdyApLFxyXG5cdFx0XHQvLyByZWN0YW5nbGUgd2l0aGluIHdoaWNoIHRoZSBwb3B1cCBtdXN0IGZpdFxyXG5cdFx0XHRyZWN0YW5nbGUgPSB7XHJcblx0XHRcdFx0eDogdGhpcy5fdG9sZXJhbmNlLmwsXHJcblx0XHRcdFx0eTogd2luZG93Q29vcmRpbmF0ZXMueSArIHRoaXMuX3RvbGVyYW5jZS50LFxyXG5cdFx0XHRcdGN4OiB3aW5kb3dDb29yZGluYXRlcy5jeCAtIHRoaXMuX3RvbGVyYW5jZS5sIC0gdGhpcy5fdG9sZXJhbmNlLnIsXHJcblx0XHRcdFx0Y3k6IHdpbmRvd0Nvb3JkaW5hdGVzLmN5IC0gdGhpcy5fdG9sZXJhbmNlLnQgLSB0aGlzLl90b2xlcmFuY2UuYlxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGlmICggIWluZm9Pbmx5ICkge1xyXG5cdFx0XHQvLyBDbGFtcCB0aGUgd2lkdGggb2YgdGhlIG1lbnUgYmVmb3JlIGdyYWJiaW5nIGl0cyBzaXplXHJcblx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5jc3MoIFwibWF4LXdpZHRoXCIsIHJlY3RhbmdsZS5jeCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdG1lbnVTaXplID0ge1xyXG5cdFx0XHRjeDogdGhpcy5fdWkuY29udGFpbmVyLm91dGVyV2lkdGgoIHRydWUgKSxcclxuXHRcdFx0Y3k6IHRoaXMuX3VpLmNvbnRhaW5lci5vdXRlckhlaWdodCggdHJ1ZSApXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiB7IHJjOiByZWN0YW5nbGUsIG1lbnVTaXplOiBtZW51U2l6ZSB9O1xyXG5cdH0sXHJcblxyXG5cdF9jYWxjdWxhdGVGaW5hbExvY2F0aW9uOiBmdW5jdGlvbiggZGVzaXJlZCwgY2xhbXBJbmZvICkge1xyXG5cdFx0dmFyIHJldHVyblZhbHVlLFxyXG5cdFx0XHRyZWN0YW5nbGUgPSBjbGFtcEluZm8ucmMsXHJcblx0XHRcdG1lbnVTaXplID0gY2xhbXBJbmZvLm1lbnVTaXplO1xyXG5cclxuXHRcdC8vIENlbnRlciB0aGUgbWVudSBvdmVyIHRoZSBkZXNpcmVkIGNvb3JkaW5hdGVzLCB3aGlsZSBub3QgZ29pbmcgb3V0c2lkZVxyXG5cdFx0Ly8gdGhlIHdpbmRvdyB0b2xlcmFuY2VzLiBUaGlzIHdpbGwgY2VudGVyIHdydC4gdGhlIHdpbmRvdyBpZiB0aGUgcG9wdXAgaXNcclxuXHRcdC8vIHRvbyBsYXJnZS5cclxuXHRcdHJldHVyblZhbHVlID0ge1xyXG5cdFx0XHRsZWZ0OiBmaXRTZWdtZW50SW5zaWRlU2VnbWVudCggcmVjdGFuZ2xlLmN4LCBtZW51U2l6ZS5jeCwgcmVjdGFuZ2xlLngsIGRlc2lyZWQueCApLFxyXG5cdFx0XHR0b3A6IGZpdFNlZ21lbnRJbnNpZGVTZWdtZW50KCByZWN0YW5nbGUuY3ksIG1lbnVTaXplLmN5LCByZWN0YW5nbGUueSwgZGVzaXJlZC55IClcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSB0b3Agb2YgdGhlIG1lbnUgaXMgdmlzaWJsZVxyXG5cdFx0cmV0dXJuVmFsdWUudG9wID0gTWF0aC5tYXgoIDAsIHJldHVyblZhbHVlLnRvcCApO1xyXG5cclxuXHRcdC8vIElmIHRoZSBoZWlnaHQgb2YgdGhlIG1lbnUgaXMgc21hbGxlciB0aGFuIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50XHJcblx0XHQvLyBhbGlnbiB0aGUgYm90dG9tIHdpdGggdGhlIGJvdHRvbSBvZiB0aGUgZG9jdW1lbnRcclxuXHJcblx0XHRyZXR1cm5WYWx1ZS50b3AgLT0gTWF0aC5taW4oIHJldHVyblZhbHVlLnRvcCxcclxuXHRcdFx0TWF0aC5tYXgoIDAsIHJldHVyblZhbHVlLnRvcCArIG1lbnVTaXplLmN5IC0gdGhpcy5kb2N1bWVudC5oZWlnaHQoKSApICk7XHJcblxyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRyeSBhbmQgY2VudGVyIHRoZSBvdmVybGF5IG92ZXIgdGhlIGdpdmVuIGNvb3JkaW5hdGVzXHJcblx0X3BsYWNlbWVudENvb3JkczogZnVuY3Rpb24oIGRlc2lyZWQgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fY2FsY3VsYXRlRmluYWxMb2NhdGlvbiggZGVzaXJlZCwgdGhpcy5fY2xhbXBQb3B1cFdpZHRoKCkgKTtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlUHJlcmVxdWlzaXRlczogZnVuY3Rpb24oIHNjcmVlblByZXJlcXVpc2l0ZSwgY29udGFpbmVyUHJlcmVxdWlzaXRlLCB3aGVuRG9uZSApIHtcclxuXHRcdHZhciBwcmVyZXF1aXNpdGVzLFxyXG5cdFx0XHRzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBJdCBpcyBpbXBvcnRhbnQgdG8gbWFpbnRhaW4gYm90aCB0aGUgbG9jYWwgdmFyaWFibGUgcHJlcmVxdWlzaXRlcyBhbmRcclxuXHRcdC8vIHNlbGYuX3ByZXJlcXVpc2l0ZXMuIFRoZSBsb2NhbCB2YXJpYWJsZSByZW1haW5zIGluIHRoZSBjbG9zdXJlIG9mIHRoZVxyXG5cdFx0Ly8gZnVuY3Rpb25zIHdoaWNoIGNhbGwgdGhlIGNhbGxiYWNrcyBwYXNzZWQgaW4uIFRoZSBjb21wYXJpc29uIGJldHdlZW4gdGhlXHJcblx0XHQvLyBsb2NhbCB2YXJpYWJsZSBhbmQgc2VsZi5fcHJlcmVxdWlzaXRlcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugb25jZSBhXHJcblx0XHQvLyBmdW5jdGlvbiBoYXMgYmVlbiBwYXNzZWQgdG8gLmFuaW1hdGlvbkNvbXBsZXRlKCkgaXQgd2lsbCBiZSBjYWxsZWQgbmV4dFxyXG5cdFx0Ly8gdGltZSBhbiBhbmltYXRpb24gY29tcGxldGVzLCBldmVuIGlmIHRoYXQncyBub3QgdGhlIGFuaW1hdGlvbiB3aG9zZSBlbmRcclxuXHRcdC8vIHRoZSBmdW5jdGlvbiB3YXMgc3VwcG9zZWQgdG8gY2F0Y2ggKGZvciBleGFtcGxlLCBpZiBhbiBhYm9ydCBoYXBwZW5zXHJcblx0XHQvLyBkdXJpbmcgdGhlIG9wZW5pbmcgYW5pbWF0aW9uLCB0aGUgLmFuaW1hdGlvbkNvbXBsZXRlIGhhbmRsZXIgaXMgbm90XHJcblx0XHQvLyBjYWxsZWQgZm9yIHRoYXQgYW5pbWF0aW9uIGFueW1vcmUsIGJ1dCB0aGUgaGFuZGxlciByZW1haW5zIGF0dGFjaGVkLCBzb1xyXG5cdFx0Ly8gaXQgaXMgY2FsbGVkIHRoZSBuZXh0IHRpbWUgdGhlIHBvcHVwIGlzIG9wZW5lZCAtIG1ha2luZyBpdCBzdGFsZS5cclxuXHRcdC8vIENvbXBhcmluZyB0aGUgbG9jYWwgdmFyaWFibGUgcHJlcmVxdWlzaXRlcyB0byB0aGUgd2lkZ2V0LWxldmVsIHZhcmlhYmxlXHJcblx0XHQvLyBzZWxmLl9wcmVyZXF1aXNpdGVzIGVuc3VyZXMgdGhhdCBjYWxsYmFja3MgdHJpZ2dlcmVkIGJ5IGEgc3RhbGVcclxuXHRcdC8vIC5hbmltYXRpb25Db21wbGV0ZSB3aWxsIGJlIGlnbm9yZWQuXHJcblxyXG5cdFx0cHJlcmVxdWlzaXRlcyA9IHtcclxuXHRcdFx0c2NyZWVuOiAkLkRlZmVycmVkKCksXHJcblx0XHRcdGNvbnRhaW5lcjogJC5EZWZlcnJlZCgpXHJcblx0XHR9O1xyXG5cclxuXHRcdHByZXJlcXVpc2l0ZXMuc2NyZWVuLnRoZW4oIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMgKSB7XHJcblx0XHRcdFx0c2NyZWVuUHJlcmVxdWlzaXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHByZXJlcXVpc2l0ZXMuY29udGFpbmVyLnRoZW4oIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMgKSB7XHJcblx0XHRcdFx0Y29udGFpbmVyUHJlcmVxdWlzaXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdCQud2hlbiggcHJlcmVxdWlzaXRlcy5zY3JlZW4sIHByZXJlcXVpc2l0ZXMuY29udGFpbmVyICkuZG9uZSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcyApIHtcclxuXHRcdFx0XHRzZWxmLl9wcmVyZXF1aXNpdGVzID0gbnVsbDtcclxuXHRcdFx0XHR3aGVuRG9uZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRzZWxmLl9wcmVyZXF1aXNpdGVzID0gcHJlcmVxdWlzaXRlcztcclxuXHR9LFxyXG5cclxuXHRfYW5pbWF0ZTogZnVuY3Rpb24oIGFyZ3MgKSB7XHJcblx0XHQvLyBOT1RFIGJlZm9yZSByZW1vdmluZyB0aGUgZGVmYXVsdCBhbmltYXRpb24gb2YgdGhlIHNjcmVlblxyXG5cdFx0Ly8gICAgICB0aGlzIGhhZCBhbiBhbmltYXRlIGNhbGxiYWNrIHRoYXQgd291bGQgcmVzb2x2ZSB0aGUgZGVmZXJyZWRcclxuXHRcdC8vICAgICAgbm93IHRoZSBkZWZlcnJlZCBpcyByZXNvbHZlZCBpbW1lZGlhdGVseVxyXG5cdFx0Ly8gVE9ETyByZW1vdmUgdGhlIGRlcGVuZGVuY3kgb24gdGhlIHNjcmVlbiBkZWZlcnJlZFxyXG5cdFx0dGhpcy5fdWkuc2NyZWVuXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggYXJncy5jbGFzc1RvUmVtb3ZlIClcclxuXHRcdFx0LmFkZENsYXNzKCBhcmdzLnNjcmVlbkNsYXNzVG9BZGQgKTtcclxuXHJcblx0XHRhcmdzLnByZXJlcXVpc2l0ZXMuc2NyZWVuLnJlc29sdmUoKTtcclxuXHJcblx0XHRpZiAoIGFyZ3MudHJhbnNpdGlvbiAmJiBhcmdzLnRyYW5zaXRpb24gIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRpZiAoIGFyZ3MuYXBwbHlUcmFuc2l0aW9uICkge1xyXG5cdFx0XHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggYXJncy50cmFuc2l0aW9uICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gKSB7XHJcblx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIGFyZ3MuY29udGFpbmVyQ2xhc3NUb0FkZCApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGFyZ3MuY2xhc3NUb1JlbW92ZSApXHJcblx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoICQucHJveHkoIGFyZ3MucHJlcmVxdWlzaXRlcy5jb250YWluZXIsIFwicmVzb2x2ZVwiICkgKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggYXJncy5jbGFzc1RvUmVtb3ZlICk7XHJcblx0XHRhcmdzLnByZXJlcXVpc2l0ZXMuY29udGFpbmVyLnJlc29sdmUoKTtcclxuXHR9LFxyXG5cclxuXHQvLyBUaGUgZGVzaXJlZCBjb29yZGluYXRlcyBwYXNzZWQgaW4gd2lsbCBiZSByZXR1cm5lZCB1bnRvdWNoZWQgaWYgbm8gcmVmZXJlbmNlIGVsZW1lbnQgY2FuIGJlIGlkZW50aWZpZWQgdmlhXHJcblx0Ly8gZGVzaXJlZFBvc2l0aW9uLnBvc2l0aW9uVG8uIE5ldmVydGhlbGVzcywgdGhpcyBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgaXRzIHJldHVybiB2YWx1ZSBhbHdheXMgY29udGFpbnMgdmFsaWRcclxuXHQvLyB4IGFuZCB5IGNvb3JkaW5hdGVzIGJ5IHNwZWNpZnlpbmcgdGhlIGNlbnRlciBtaWRkbGUgb2YgdGhlIHdpbmRvdyBpZiB0aGUgY29vcmRpbmF0ZXMgYXJlIGFic2VudC5cclxuXHQvLyBvcHRpb25zOiB7IHg6IGNvb3JkaW5hdGUsIHk6IGNvb3JkaW5hdGUsIHBvc2l0aW9uVG86IHN0cmluZzogXCJvcmlnaW5cIiwgXCJ3aW5kb3dcIiwgb3IgalF1ZXJ5IHNlbGVjdG9yXHJcblx0X2Rlc2lyZWRDb29yZHM6IGZ1bmN0aW9uKCBvcGVuT3B0aW9ucyApIHtcclxuXHRcdHZhciBvZmZzZXQsXHJcblx0XHRcdGRzdCA9IG51bGwsXHJcblx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzID0gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoaXMud2luZG93ICksXHJcblx0XHRcdHggPSBvcGVuT3B0aW9ucy54LFxyXG5cdFx0XHR5ID0gb3Blbk9wdGlvbnMueSxcclxuXHRcdFx0cFRvID0gb3Blbk9wdGlvbnMucG9zaXRpb25UbztcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggd2hpY2ggZWxlbWVudCB3aWxsIHNlcnZlIGFzIHRoZSByZWZlcmVuY2VcclxuXHRcdGlmICggcFRvICYmIHBUbyAhPT0gXCJvcmlnaW5cIiApIHtcclxuXHRcdFx0aWYgKCBwVG8gPT09IFwid2luZG93XCIgKSB7XHJcblx0XHRcdFx0eCA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN4IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLng7XHJcblx0XHRcdFx0eSA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN5IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLnk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGRzdCA9ICQoIHBUbyApO1xyXG5cdFx0XHRcdH0gY2F0Y2goIGVyciApIHtcclxuXHRcdFx0XHRcdGRzdCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggZHN0ICkge1xyXG5cdFx0XHRcdFx0ZHN0LmZpbHRlciggXCI6dmlzaWJsZVwiICk7XHJcblx0XHRcdFx0XHRpZiAoIGRzdC5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHRcdGRzdCA9IG51bGw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgYW4gZWxlbWVudCB3YXMgZm91bmQsIGNlbnRlciBvdmVyIGl0XHJcblx0XHRpZiAoIGRzdCApIHtcclxuXHRcdFx0b2Zmc2V0ID0gZHN0Lm9mZnNldCgpO1xyXG5cdFx0XHR4ID0gb2Zmc2V0LmxlZnQgKyBkc3Qub3V0ZXJXaWR0aCgpIC8gMjtcclxuXHRcdFx0eSA9IG9mZnNldC50b3AgKyBkc3Qub3V0ZXJIZWlnaHQoKSAvIDI7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIHggYW5kIHkgYXJlIHZhbGlkIG51bWJlcnMgLSBjZW50ZXIgb3ZlciB0aGUgd2luZG93XHJcblx0XHRpZiAoICQudHlwZSggeCApICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKCB4ICkgKSB7XHJcblx0XHRcdHggPSB3aW5kb3dDb29yZGluYXRlcy5jeCAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy54O1xyXG5cdFx0fVxyXG5cdFx0aWYgKCAkLnR5cGUoIHkgKSAhPT0gXCJudW1iZXJcIiB8fCBpc05hTiggeSApICkge1xyXG5cdFx0XHR5ID0gd2luZG93Q29vcmRpbmF0ZXMuY3kgLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4geyB4OiB4LCB5OiB5IH07XHJcblx0fSxcclxuXHJcblx0X3JlcG9zaXRpb246IGZ1bmN0aW9uKCBvcGVuT3B0aW9ucyApIHtcclxuXHRcdC8vIFdlIG9ubHkgY2FyZSBhYm91dCBwb3NpdGlvbi1yZWxhdGVkIHBhcmFtZXRlcnMgZm9yIHJlcG9zaXRpb25pbmdcclxuXHRcdG9wZW5PcHRpb25zID0ge1xyXG5cdFx0XHR4OiBvcGVuT3B0aW9ucy54LFxyXG5cdFx0XHR5OiBvcGVuT3B0aW9ucy55LFxyXG5cdFx0XHRwb3NpdGlvblRvOiBvcGVuT3B0aW9ucy5wb3NpdGlvblRvXHJcblx0XHR9O1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJiZWZvcmVwb3NpdGlvblwiLCB1bmRlZmluZWQsIG9wZW5PcHRpb25zICk7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIub2Zmc2V0KCB0aGlzLl9wbGFjZW1lbnRDb29yZHMoIHRoaXMuX2Rlc2lyZWRDb29yZHMoIG9wZW5PcHRpb25zICkgKSApO1xyXG5cdH0sXHJcblxyXG5cdHJlcG9zaXRpb246IGZ1bmN0aW9uKCBvcGVuT3B0aW9ucyApIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHR0aGlzLl9yZXBvc2l0aW9uKCBvcGVuT3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zYWZlbHlCbHVyOiBmdW5jdGlvbiggY3VycmVudEVsZW1lbnQgKXtcclxuXHRcdGlmICggY3VycmVudEVsZW1lbnQgIT09IHRoaXMud2luZG93WyAwIF0gJiZcclxuXHRcdFx0Y3VycmVudEVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIgKSB7XHJcblx0XHRcdFx0JCggY3VycmVudEVsZW1lbnQgKS5ibHVyKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X29wZW5QcmVyZXF1aXNpdGVzQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlkID0gdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHRmaXJzdEZvY3VzID0gdGhpcy5fdWkuY29udGFpbmVyLmZpbmQoIFwiOmZvY3VzYWJsZVwiICkuZmlyc3QoKTtcclxuXHJcblx0XHR0aGlzLl91aS5jb250YWluZXIuYWRkQ2xhc3MoIFwidWktcG9wdXAtYWN0aXZlXCIgKTtcclxuXHRcdHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcblx0XHR0aGlzLl9yZXNpemVTY3JlZW4oKTtcclxuXHJcblx0XHQvLyBDaGVjayB0byBzZWUgaWYgY3VyckVsZW1lbnQgaXMgbm90IGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lci4gIElmIGl0J3Mgbm90LCBibHVyXHJcblx0XHRpZiAoICEkLmNvbnRhaW5zKCB0aGlzLl91aS5jb250YWluZXJbIDAgXSwgdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKSApIHtcclxuXHRcdFx0dGhpcy5fc2FmZWx5Qmx1ciggdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggZmlyc3RGb2N1cy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHR0aGlzLl91aS5mb2N1c0VsZW1lbnQgPSBmaXJzdEZvY3VzO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0XHRpZiAoIGlkICkge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIFwiW2FyaWEtaGFzcG9wdXA9J3RydWUnXVthcmlhLW93bnM9J1wiICsgIGlkICsgXCInXVwiICkuYXR0ciggXCJhcmlhLWV4cGFuZGVkXCIsIHRydWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYWZ0ZXJvcGVuXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfb3BlbjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb3Blbk9wdGlvbnMgPSAkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyApLFxyXG5cdFx0XHQvLyBUT0RPIG1vdmUgYmxhY2tsaXN0IHRvIHByaXZhdGUgbWV0aG9kXHJcblx0XHRcdGFuZHJvaWRCbGFja2xpc3QgPSAoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHRcdFx0XHQvLyBSZW5kZXJpbmcgZW5naW5lIGlzIFdlYmtpdCwgYW5kIGNhcHR1cmUgbWFqb3IgdmVyc2lvblxyXG5cdFx0XHRcdFx0d2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOVxcLl0rKS8gKSxcclxuXHRcdFx0XHRcdHdrdmVyc2lvbiA9ICEhd2ttYXRjaCAmJiB3a21hdGNoWyAxIF0sXHJcblx0XHRcdFx0XHRhbmRyb2lkbWF0Y2ggPSB1YS5tYXRjaCggL0FuZHJvaWQgKFxcZCsoPzpcXC5cXGQrKSkvICksXHJcblx0XHRcdFx0XHRhbmR2ZXJzaW9uID0gISFhbmRyb2lkbWF0Y2ggJiYgYW5kcm9pZG1hdGNoWyAxIF0sXHJcblx0XHRcdFx0XHRjaHJvbWVtYXRjaCA9IHVhLmluZGV4T2YoIFwiQ2hyb21lXCIgKSA+IC0xO1xyXG5cclxuXHRcdFx0XHQvLyBQbGF0Zm9ybSBpcyBBbmRyb2lkLCBXZWJLaXQgdmVyc2lvbiBpcyBncmVhdGVyIHRoYW4gNTM0LjEzICggQW5kcm9pZCAzLjIuMSApIGFuZCBub3QgQ2hyb21lLlxyXG5cdFx0XHRcdGlmICggYW5kcm9pZG1hdGNoICE9PSBudWxsICYmIGFuZHZlcnNpb24gPT09IFwiNC4wXCIgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA+IDUzNC4xMyAmJiAhY2hyb21lbWF0Y2ggKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KCkpO1xyXG5cclxuXHRcdC8vIENvdW50IGRvd24gdG8gdHJpZ2dlcmluZyBcInBvcHVwYWZ0ZXJvcGVuXCIgLSB3ZSBoYXZlIHR3byBwcmVyZXF1aXNpdGVzOlxyXG5cdFx0Ly8gMS4gVGhlIHBvcHVwIHdpbmRvdyBhbmltYXRpb24gY29tcGxldGVzIChjb250YWluZXIoKSlcclxuXHRcdC8vIDIuIFRoZSBzY3JlZW4gb3BhY2l0eSBhbmltYXRpb24gY29tcGxldGVzIChzY3JlZW4oKSlcclxuXHRcdHRoaXMuX2NyZWF0ZVByZXJlcXVpc2l0ZXMoXHJcblx0XHRcdCQubm9vcCxcclxuXHRcdFx0JC5ub29wLFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9vcGVuUHJlcmVxdWlzaXRlc0NvbXBsZXRlXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gb3Blbk9wdGlvbnMudHJhbnNpdGlvbjtcclxuXHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggb3Blbk9wdGlvbnMudHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdHRoaXMuX3VpLnNjcmVlbi5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC10cnVuY2F0ZVwiICk7XHJcblxyXG5cdFx0Ly8gR2l2ZSBhcHBsaWNhdGlvbnMgYSBjaGFuY2UgdG8gbW9kaWZ5IHRoZSBjb250ZW50cyBvZiB0aGUgY29udGFpbmVyIGJlZm9yZSBpdCBhcHBlYXJzXHJcblx0XHR0aGlzLl9yZXBvc2l0aW9uKCBvcGVuT3B0aW9ucyApO1xyXG5cclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW5cIiApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSAmJiBhbmRyb2lkQmxhY2tsaXN0ICkge1xyXG5cdFx0XHQvKiBUT0RPOiBUaGUgbmF0aXZlIGJyb3dzZXIgb24gQW5kcm9pZCA0LjAuWCAoXCJJY2UgQ3JlYW0gU2FuZHdpY2hcIikgc3VmZmVycyBmcm9tIGFuIGlzc3VlIHdoZXJlIHRoZSBwb3B1cCBvdmVybGF5IGFwcGVhcnMgdG8gYmUgei1pbmRleGVkIGFib3ZlIHRoZSBwb3B1cCBpdHNlbGYgd2hlbiBjZXJ0YWluIG90aGVyIHN0eWxlcyBleGlzdCBvbiB0aGUgc2FtZSBwYWdlIC0tIG5hbWVseSwgYW55IGVsZW1lbnQgc2V0IHRvIGBwb3NpdGlvbjogZml4ZWRgIGFuZCBjZXJ0YWluIHR5cGVzIG9mIGlucHV0LiBUaGVzZSBpc3N1ZXMgYXJlIHJlbWluaXNjZW50IG9mIHByZXZpb3VzbHkgdW5jb3ZlcmVkIGJ1Z3MgaW4gb2xkZXIgdmVyc2lvbnMgb2YgQW5kcm9pZCdzIG5hdGl2ZSBicm93c2VyOiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL0RldmljZS1CdWdzL2lzc3Vlcy8zXHJcblx0XHRcdFRoaXMgZml4IGNsb3NlcyB0aGUgZm9sbG93aW5nIGJ1Z3MgKCBJIHVzZSBcImNsb3Nlc1wiIHdpdGggcmVsdWN0YW5jZSwgYW5kIHN0cmVzcyB0aGF0IHRoaXMgaXNzdWUgc2hvdWxkIGJlIHJldmlzaXRlZCBhcyBzb29uIGFzIHBvc3NpYmxlICk6XHJcblx0XHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDgxNlxyXG5cdFx0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ4NDRcclxuXHRcdFx0aHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80ODc0XHJcblx0XHRcdCovXHJcblxyXG5cdFx0XHQvLyBUT0RPIHNvcnQgb3V0IHdoeSB0aGlzLl9wYWdlIGlzbid0IHdvcmtpbmdcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmFkZENsYXNzKCBcInVpLXBvcHVwLW9wZW5cIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYW5pbWF0ZSh7XHJcblx0XHRcdGFkZGl0aW9uYWxDb25kaXRpb246IHRydWUsXHJcblx0XHRcdHRyYW5zaXRpb246IG9wZW5PcHRpb25zLnRyYW5zaXRpb24sXHJcblx0XHRcdGNsYXNzVG9SZW1vdmU6IFwiXCIsXHJcblx0XHRcdHNjcmVlbkNsYXNzVG9BZGQ6IFwiaW5cIixcclxuXHRcdFx0Y29udGFpbmVyQ2xhc3NUb0FkZDogXCJpblwiLFxyXG5cdFx0XHRhcHBseVRyYW5zaXRpb246IGZhbHNlLFxyXG5cdFx0XHRwcmVyZXF1aXNpdGVzOiB0aGlzLl9wcmVyZXF1aXNpdGVzXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQcmVyZXF1aXNpdGVTY3JlZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fdWkuc2NyZWVuXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJvdXRcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQcmVyZXF1aXNpdGVDb250YWluZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJyZXZlcnNlIG91dFwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwic3R5bGVcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVByZXJlcXVpc2l0ZXNEb25lOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb250YWluZXIgPSB0aGlzLl91aS5jb250YWluZXIsXHJcblx0XHRcdGlkID0gdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApO1xyXG5cclxuXHRcdC8vIHJlbW92ZSB0aGUgZ2xvYmFsIG11dGV4IGZvciBwb3B1cHNcclxuXHRcdCQubW9iaWxlLnBvcHVwLmFjdGl2ZSA9IHVuZGVmaW5lZDtcclxuXHJcblx0XHQvLyBCbHVyIGVsZW1lbnRzIGluc2lkZSB0aGUgY29udGFpbmVyLCBpbmNsdWRpbmcgdGhlIGNvbnRhaW5lclxyXG5cdFx0JCggXCI6Zm9jdXNcIiwgY29udGFpbmVyWyAwIF0gKS5hZGQoIGNvbnRhaW5lclsgMCBdICkuYmx1cigpO1xyXG5cclxuXHRcdGlmICggaWQgKSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddW2FyaWEtb3ducz0nXCIgKyAgaWQgKyBcIiddXCIgKS5hdHRyKCBcImFyaWEtZXhwYW5kZWRcIiwgZmFsc2UgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBhbGVydCB1c2VycyB0aGF0IHRoZSBwb3B1cCBpcyBjbG9zZWRcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYWZ0ZXJjbG9zZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlOiBmdW5jdGlvbiggaW1tZWRpYXRlICkge1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWFjdGl2ZVwiICk7XHJcblx0XHR0aGlzLl9wYWdlLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLW9wZW5cIiApO1xyXG5cclxuXHRcdHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG5cclxuXHRcdC8vIENvdW50IGRvd24gdG8gdHJpZ2dlcmluZyBcInBvcHVwYWZ0ZXJjbG9zZVwiIC0gd2UgaGF2ZSB0d28gcHJlcmVxdWlzaXRlczpcclxuXHRcdC8vIDEuIFRoZSBwb3B1cCB3aW5kb3cgcmV2ZXJzZSBhbmltYXRpb24gY29tcGxldGVzIChjb250YWluZXIoKSlcclxuXHRcdC8vIDIuIFRoZSBzY3JlZW4gb3BhY2l0eSBhbmltYXRpb24gY29tcGxldGVzIChzY3JlZW4oKSlcclxuXHRcdHRoaXMuX2NyZWF0ZVByZXJlcXVpc2l0ZXMoXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUHJlcmVxdWlzaXRlU2NyZWVuXCIgKSxcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfY2xvc2VQcmVyZXF1aXNpdGVDb250YWluZXJcIiApLFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVByZXJlcXVpc2l0ZXNEb25lXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuX2FuaW1hdGUoIHtcclxuXHRcdFx0YWRkaXRpb25hbENvbmRpdGlvbjogdGhpcy5fdWkuc2NyZWVuLmhhc0NsYXNzKCBcImluXCIgKSxcclxuXHRcdFx0dHJhbnNpdGlvbjogKCBpbW1lZGlhdGUgPyBcIm5vbmVcIiA6ICggdGhpcy5fY3VycmVudFRyYW5zaXRpb24gKSApLFxyXG5cdFx0XHRjbGFzc1RvUmVtb3ZlOiBcImluXCIsXHJcblx0XHRcdHNjcmVlbkNsYXNzVG9BZGQ6IFwib3V0XCIsXHJcblx0XHRcdGNvbnRhaW5lckNsYXNzVG9BZGQ6IFwicmV2ZXJzZSBvdXRcIixcclxuXHRcdFx0YXBwbHlUcmFuc2l0aW9uOiB0cnVlLFxyXG5cdFx0XHRwcmVyZXF1aXNpdGVzOiB0aGlzLl9wcmVyZXF1aXNpdGVzXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfdW5lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUHV0IHRoZSBlbGVtZW50IGJhY2sgdG8gd2hlcmUgdGhlIHBsYWNlaG9sZGVyIHdhcyBhbmQgcmVtb3ZlIHRoZSBcInVpLXBvcHVwXCIgY2xhc3NcclxuXHRcdHRoaXMuX3NldE9wdGlvbnMoIHsgdGhlbWU6ICQubW9iaWxlLnBvcHVwLnByb3RvdHlwZS5vcHRpb25zLnRoZW1lIH0gKTtcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQvLyBDYW5ub3QgZGlyZWN0bHkgaW5zZXJ0QWZ0ZXIoKSAtIHdlIG5lZWQgdG8gZGV0YWNoKCkgZmlyc3QsIGJlY2F1c2VcclxuXHRcdFx0Ly8gaW5zZXJ0QWZ0ZXIoKSB3aWxsIGRvIG5vdGhpbmcgaWYgdGhlIHBheWxvYWQgZGl2IHdhcyBub3QgYXR0YWNoZWRcclxuXHRcdFx0Ly8gdG8gdGhlIERPTSBhdCB0aGUgdGltZSB0aGUgd2lkZ2V0IHdhcyBjcmVhdGVkLCBhbmQgc28gdGhlIHBheWxvYWRcclxuXHRcdFx0Ly8gd2lsbCByZW1haW4gaW5zaWRlIHRoZSBjb250YWluZXIgZXZlbiBhZnRlciB3ZSBjYWxsIGluc2VydEFmdGVyKCkuXHJcblx0XHRcdC8vIElmIHRoYXQgaGFwcGVucyBhbmQgd2UgcmVtb3ZlIHRoZSBjb250YWluZXIgYSBmZXcgbGluZXMgYmVsb3csIHdlXHJcblx0XHRcdC8vIHdpbGwgY2F1c2UgYW4gaW5maW5pdGUgcmVjdXJzaW9uIC0gIzUyNDRcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC5pbnNlcnRBZnRlciggdGhpcy5fdWkucGxhY2Vob2xkZXIgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAgdWktb3ZlcmxheS1zaGFkb3cgdWktY29ybmVyLWFsbCB1aS1ib2R5LWluaGVyaXRcIiApO1xyXG5cdFx0dGhpcy5fdWkuc2NyZWVuLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fdWkucGxhY2Vob2xkZXIucmVtb3ZlKCk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgPT09IHRoaXMgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5vbmUoIFwicG9wdXBhZnRlcmNsb3NlXCIsICQucHJveHkoIHRoaXMsIFwiX3VuZW5oYW5jZVwiICkgKTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fdW5lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUG9wdXA6IGZ1bmN0aW9uKCB0aGVFdmVudCwgZGF0YSApIHtcclxuXHRcdHZhciBwYXJzZWREc3QsIHRvVXJsLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aW1tZWRpYXRlID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKCAoIHRoZUV2ZW50ICYmIHRoZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkgfHwgJC5tb2JpbGUucG9wdXAuYWN0aXZlICE9PSB0aGlzICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gcmVzdG9yZSBsb2NhdGlvbiBvbiBzY3JlZW5cclxuXHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgdGhpcy5fc2Nyb2xsVG9wICk7XHJcblxyXG5cdFx0aWYgKCB0aGVFdmVudCAmJiB0aGVFdmVudC50eXBlID09PSBcInBhZ2ViZWZvcmVjaGFuZ2VcIiAmJiBkYXRhICkge1xyXG5cdFx0XHQvLyBEZXRlcm1pbmUgd2hldGhlciB3ZSBuZWVkIHRvIHJhcGlkLWNsb3NlIHRoZSBwb3B1cCwgb3Igd2hldGhlciB3ZSBjYW5cclxuXHRcdFx0Ly8gdGFrZSB0aGUgdGltZSB0byBydW4gdGhlIGNsb3NpbmcgdHJhbnNpdGlvblxyXG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhLnRvUGFnZSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHRwYXJzZWREc3QgPSBkYXRhLnRvUGFnZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwYXJzZWREc3QgPSBkYXRhLnRvUGFnZS5qcW1EYXRhKCBcInVybFwiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0cGFyc2VkRHN0ID0gJC5tb2JpbGUucGF0aC5wYXJzZVVybCggcGFyc2VkRHN0ICk7XHJcblx0XHRcdHRvVXJsID0gcGFyc2VkRHN0LnBhdGhuYW1lICsgcGFyc2VkRHN0LnNlYXJjaCArIHBhcnNlZERzdC5oYXNoO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9teVVybCAhPT0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHRvVXJsICkgKSB7XHJcblx0XHRcdFx0Ly8gR29pbmcgdG8gYSBkaWZmZXJlbnQgcGFnZSAtIGNsb3NlIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0aW1tZWRpYXRlID0gdHJ1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gcmVtb3ZlIG5hdiBiaW5kaW5nc1xyXG5cdFx0dGhpcy53aW5kb3cub2ZmKCBjdXJyZW50T3B0aW9ucy5jbG9zZUV2ZW50cyApO1xyXG5cdFx0Ly8gdW5iaW5kIGNsaWNrIGhhbmRsZXJzIGFkZGVkIHdoZW4gaGlzdG9yeSBpcyBkaXNhYmxlZFxyXG5cdFx0dGhpcy5lbGVtZW50LnVuZGVsZWdhdGUoIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua1NlbGVjdG9yLCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtFdmVudHMgKTtcclxuXHJcblx0XHR0aGlzLl9jbG9zZSggaW1tZWRpYXRlICk7XHJcblx0fSxcclxuXHJcblx0Ly8gYW55IG5hdmlnYXRpb24gZXZlbnQgYWZ0ZXIgYSBwb3B1cCBpcyBvcGVuZWQgc2hvdWxkIGNsb3NlIHRoZSBwb3B1cFxyXG5cdC8vIE5PVEUgdGhlIHBhZ2ViZWZvcmVjaGFuZ2UgaXMgYm91bmQgdG8gY2F0Y2ggbmF2aWdhdGlvbiBldmVudHMgdGhhdCBkb24ndFxyXG5cdC8vICAgICAgYWx0ZXIgdGhlIHVybCAoZWcsIGRpYWxvZ3MgZnJvbSBwb3B1cHMpXHJcblx0X2JpbmRDb250YWluZXJDbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLndpbmRvd1xyXG5cdFx0XHQub24oIHRoaXMub3B0aW9ucy5jbG9zZUV2ZW50cywgJC5wcm94eSggdGhpcywgXCJfY2xvc2VQb3B1cFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3VpLmNvbnRhaW5lcjtcclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPIG5vIGNsZWFyIGRlbGluaWF0aW9uIG9mIHdoYXQgc2hvdWxkIGJlIGhlcmUgYW5kXHJcblx0Ly8gd2hhdCBzaG91bGQgYmUgaW4gX29wZW4uIFNlZW1zIHRvIGJlIFwidmlzdWFsXCIgdnMgXCJoaXN0b3J5XCIgZm9yIG5vd1xyXG5cdG9wZW46IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHVybCwgaGFzaGtleSwgYWN0aXZlUGFnZSwgY3VycmVudElzRGlhbG9nLCBoYXNIYXNoLCB1cmxIaXN0b3J5LFxyXG5cdFx0XHRzZWxmID0gdGhpcyxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gbWFrZSBzdXJlIG9wZW4gaXMgaWRlbXBvdGVudFxyXG5cdFx0aWYgKCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgfHwgY3VycmVudE9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNldCB0aGUgZ2xvYmFsIHBvcHVwIG11dGV4XHJcblx0XHQkLm1vYmlsZS5wb3B1cC5hY3RpdmUgPSB0aGlzO1xyXG5cdFx0dGhpcy5fc2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblxyXG5cdFx0Ly8gaWYgaGlzdG9yeSBhbHRlcmF0aW9uIGlzIGRpc2FibGVkIGNsb3NlIG9uIG5hdmlnYXRlIGV2ZW50c1xyXG5cdFx0Ly8gYW5kIGxlYXZlIHRoZSB1cmwgYXMgaXNcclxuXHRcdGlmICggISggY3VycmVudE9wdGlvbnMuaGlzdG9yeSApICkge1xyXG5cdFx0XHRzZWxmLl9vcGVuKCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX2JpbmRDb250YWluZXJDbG9zZSgpO1xyXG5cclxuXHRcdFx0Ly8gV2hlbiBoaXN0b3kgaXMgZGlzYWJsZWQgd2UgaGF2ZSB0byBncmFiIHRoZSBkYXRhLXJlbFxyXG5cdFx0XHQvLyBiYWNrIGxpbmsgY2xpY2tzIHNvIHdlIGNhbiBjbG9zZSB0aGUgcG9wdXAgaW5zdGVhZCBvZlxyXG5cdFx0XHQvLyByZWx5aW5nIG9uIGhpc3RvcnkgdG8gZG8gaXQgZm9yIHVzXHJcblx0XHRcdHNlbGYuZWxlbWVudFxyXG5cdFx0XHRcdC5kZWxlZ2F0ZSggY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rU2VsZWN0b3IsIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua0V2ZW50cywgZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNhY2hlIHNvbWUgdmFsdWVzIGZvciBtaW4vcmVhZGFiaWxpdHlcclxuXHRcdHVybEhpc3RvcnkgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG5cdFx0aGFzaGtleSA9ICQubW9iaWxlLmRpYWxvZ0hhc2hLZXk7XHJcblx0XHRhY3RpdmVQYWdlID0gJC5tb2JpbGUuYWN0aXZlUGFnZTtcclxuXHRcdGN1cnJlbnRJc0RpYWxvZyA9ICggYWN0aXZlUGFnZSA/IGFjdGl2ZVBhZ2UuaGFzQ2xhc3MoIFwidWktZGlhbG9nXCIgKSA6IGZhbHNlICk7XHJcblx0XHR0aGlzLl9teVVybCA9IHVybCA9IHVybEhpc3RvcnkuZ2V0QWN0aXZlKCkudXJsO1xyXG5cdFx0aGFzSGFzaCA9ICggdXJsLmluZGV4T2YoIGhhc2hrZXkgKSA+IC0xICkgJiYgIWN1cnJlbnRJc0RpYWxvZyAmJiAoIHVybEhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICk7XHJcblxyXG5cdFx0aWYgKCBoYXNIYXNoICkge1xyXG5cdFx0XHRzZWxmLl9vcGVuKCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX2JpbmRDb250YWluZXJDbG9zZSgpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiB0aGUgY3VycmVudCB1cmwgaGFzIG5vIGRpYWxvZyBoYXNoIGtleSBwcm9jZWVkIGFzIG5vcm1hbFxyXG5cdFx0Ly8gb3RoZXJ3aXNlLCBpZiB0aGUgcGFnZSBpcyBhIGRpYWxvZyBzaW1wbHkgdGFjayBvbiB0aGUgaGFzaCBrZXlcclxuXHRcdGlmICggdXJsLmluZGV4T2YoIGhhc2hrZXkgKSA9PT0gLTEgJiYgIWN1cnJlbnRJc0RpYWxvZyApIHtcclxuXHRcdFx0dXJsID0gdXJsICsgKHVybC5pbmRleE9mKCBcIiNcIiApID4gLTEgPyBoYXNoa2V5IDogXCIjXCIgKyBoYXNoa2V5KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHVybCA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2ggKyBoYXNoa2V5O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHN3YWxsb3cgdGhlIHRoZSBpbml0aWFsIG5hdmlnYXRpb24gZXZlbnQsIGFuZCBiaW5kIGZvciB0aGUgbmV4dFxyXG5cdFx0dGhpcy53aW5kb3cub25lKCBcImJlZm9yZW5hdmlnYXRlXCIsIGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZi5fb3Blbiggb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9iaW5kQ29udGFpbmVyQ2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMudXJsQWx0ZXJlZCA9IHRydWU7XHJcblx0XHQkLm1vYmlsZS5uYXZpZ2F0ZSggdXJsLCB7IHJvbGU6IFwiZGlhbG9nXCIgfSApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdGNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIG1ha2Ugc3VyZSBjbG9zZSBpcyBpZGVtcG90ZW50XHJcblx0XHRpZiAoICQubW9iaWxlLnBvcHVwLmFjdGl2ZSAhPT0gdGhpcyApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGlzdG9yeSAmJiB0aGlzLnVybEFsdGVyZWQgKSB7XHJcblx0XHRcdCQubW9iaWxlLmJhY2soKTtcclxuXHRcdFx0dGhpcy51cmxBbHRlcmVkID0gZmFsc2U7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBzaW11bGF0ZSB0aGUgbmF2IGJpbmRpbmdzIGhhdmluZyBmaXJlZFxyXG5cdFx0XHR0aGlzLl9jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIFRPRE8gdGhpcyBjYW4gYmUgbW92ZWQgaW5zaWRlIHRoZSB3aWRnZXRcclxuJC5tb2JpbGUucG9wdXAuaGFuZGxlTGluayA9IGZ1bmN0aW9uKCAkbGluayApIHtcclxuXHR2YXIgb2Zmc2V0LFxyXG5cdFx0cGF0aCA9ICQubW9iaWxlLnBhdGgsXHJcblxyXG5cdFx0Ly8gTk9URSBtYWtlIHN1cmUgdG8gZ2V0IG9ubHkgdGhlIGhhc2ggZnJvbSB0aGUgaHJlZiBiZWNhdXNlIGllNyAod3A3KVxyXG5cdFx0Ly8gICAgICByZXR1cm5zIHRoZSBhYnNvbHV0ZSBocmVmIGluIHRoaXMgY2FzZSBydWluaW5nIHRoZSBlbGVtZW50IHNlbGVjdGlvblxyXG5cdFx0cG9wdXAgPSAkKCBwYXRoLmhhc2hUb1NlbGVjdG9yKCBwYXRoLnBhcnNlVXJsKCAkbGluay5hdHRyKCBcImhyZWZcIiApICkuaGFzaCApICkuZmlyc3QoKTtcclxuXHJcblx0aWYgKCBwb3B1cC5sZW5ndGggPiAwICYmIHBvcHVwLmRhdGEoIFwibW9iaWxlLXBvcHVwXCIgKSApIHtcclxuXHRcdG9mZnNldCA9ICRsaW5rLm9mZnNldCgpO1xyXG5cdFx0cG9wdXAucG9wdXAoIFwib3BlblwiLCB7XHJcblx0XHRcdHg6IG9mZnNldC5sZWZ0ICsgJGxpbmsub3V0ZXJXaWR0aCgpIC8gMixcclxuXHRcdFx0eTogb2Zmc2V0LnRvcCArICRsaW5rLm91dGVySGVpZ2h0KCkgLyAyLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiAkbGluay5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApLFxyXG5cdFx0XHRwb3NpdGlvblRvOiAkbGluay5qcW1EYXRhKCBcInBvc2l0aW9uLXRvXCIgKVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvL3JlbW92ZSBhZnRlciBkZWxheVxyXG5cdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0JGxpbmsucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0fSwgMzAwICk7XHJcbn07XHJcblxyXG4vLyBUT0RPIG1vdmUgaW5zaWRlIF9jcmVhdGVcclxuJC5tb2JpbGUuZG9jdW1lbnQub24oIFwicGFnZWJlZm9yZWNoYW5nZVwiLCBmdW5jdGlvbiggdGhlRXZlbnQsIGRhdGEgKSB7XHJcblx0aWYgKCBkYXRhLm9wdGlvbnMucm9sZSA9PT0gXCJwb3B1cFwiICkge1xyXG5cdFx0JC5tb2JpbGUucG9wdXAuaGFuZGxlTGluayggZGF0YS5vcHRpb25zLmxpbmsgKTtcclxuXHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qXHJcbiogY3VzdG9tIFwic2VsZWN0bWVudVwiIHBsdWdpblxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdW5mb2N1c2FibGVJdGVtU2VsZWN0b3IgPSBcIi51aS1kaXNhYmxlZCwudWktc3RhdGUtZGlzYWJsZWQsLnVpLWxpLWRpdmlkZXIsLnVpLXNjcmVlbi1oaWRkZW4sOmpxbURhdGEocm9sZT0ncGxhY2Vob2xkZXInKVwiLFxyXG5cdGdvVG9BZGphY2VudEl0ZW0gPSBmdW5jdGlvbiggaXRlbSwgdGFyZ2V0LCBkaXJlY3Rpb24gKSB7XHJcblx0XHR2YXIgYWRqYWNlbnQgPSBpdGVtWyBkaXJlY3Rpb24gKyBcIkFsbFwiIF0oKVxyXG5cdFx0XHQubm90KCB1bmZvY3VzYWJsZUl0ZW1TZWxlY3RvciApXHJcblx0XHRcdC5maXJzdCgpO1xyXG5cclxuXHRcdC8vIGlmIHRoZXJlJ3MgYSBwcmV2aW91cyBvcHRpb24sIGZvY3VzIGl0XHJcblx0XHRpZiAoIGFkamFjZW50Lmxlbmd0aCApIHtcclxuXHRcdFx0dGFyZ2V0XHJcblx0XHRcdFx0LmJsdXIoKVxyXG5cdFx0XHRcdC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cclxuXHRcdFx0YWRqYWNlbnQuZmluZCggXCJhXCIgKS5maXJzdCgpLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zZWxlY3RtZW51XCIsICQubW9iaWxlLnNlbGVjdG1lbnUsIHtcclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBzZWxlY3RzIGNhbm5vdCBleGlzdCBpbnNpZGUgcG9wdXBzLCBzbyByZXZlcnQgdGhlIFwibmF0aXZlTWVudVwiXHJcblx0XHQvLyBvcHRpb24gdG8gdHJ1ZSBpZiBhIHBhcmVudCBpcyBhIHBvcHVwXHJcblx0XHRvLm5hdGl2ZU1lbnUgPSBvLm5hdGl2ZU1lbnUgfHwgKCB0aGlzLmVsZW1lbnQucGFyZW50cyggXCI6anFtRGF0YShyb2xlPSdwb3B1cCcpLDptb2JpbGUtcG9wdXBcIiApLmxlbmd0aCA+IDAgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlU2VsZWN0Rm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmJsdXIoKTtcclxuXHRcdHRoaXMuYnV0dG9uLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHRoaXMuX3N1cGVyKCBldmVudCApO1xyXG5cdFx0dGhpcy5faGFuZGxlQnV0dG9uVmNsaWNrS2V5ZG93biggZXZlbnQgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQnV0dG9uVmNsaWNrS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5pc09wZW4gfHwgdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoZXZlbnQudHlwZSA9PT0gXCJ2Y2xpY2tcIiB8fFxyXG5cdFx0XHRcdGV2ZW50LmtleUNvZGUgJiYgKGV2ZW50LmtleUNvZGUgPT09ICQubW9iaWxlLmtleUNvZGUuRU5URVIgfHwgZXZlbnQua2V5Q29kZSA9PT0gJC5tb2JpbGUua2V5Q29kZS5TUEFDRSkpIHtcclxuXHJcblx0XHRcdHRoaXMuX2RlY2lkZUZvcm1hdCgpO1xyXG5cdFx0XHRpZiAoIHRoaXMubWVudVR5cGUgPT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdHRoaXMuYnV0dG9uLmF0dHIoIFwiaHJlZlwiLCBcIiNcIiArIHRoaXMucG9wdXBJZCApLmF0dHIoIFwiZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJyZWxcIiwgXCJwb3B1cFwiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5idXR0b24uYXR0ciggXCJocmVmXCIsIFwiI1wiICsgdGhpcy5kaWFsb2dJZCApLmF0dHIoIFwiZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJyZWxcIiwgXCJkaWFsb2dcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuaXNPcGVuID0gdHJ1ZTtcclxuXHRcdFx0Ly8gRG8gbm90IHByZXZlbnQgZGVmYXVsdCwgc28gdGhlIG5hdmlnYXRpb24gbWF5IGhhdmUgYSBjaGFuY2UgdG8gYWN0dWFsbHkgb3BlbiB0aGUgY2hvc2VuIGZvcm1hdFxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMaXN0Rm9jdXM6IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0dmFyIHBhcmFtcyA9ICggZS50eXBlID09PSBcImZvY3VzaW5cIiApID9cclxuXHRcdFx0eyB0YWJpbmRleDogXCIwXCIsIGV2ZW50OiBcInZtb3VzZW92ZXJcIiB9OlxyXG5cdFx0XHR7IHRhYmluZGV4OiBcIi0xXCIsIGV2ZW50OiBcInZtb3VzZW91dFwiIH07XHJcblxyXG5cdFx0JCggZS50YXJnZXQgKVxyXG5cdFx0XHQuYXR0ciggXCJ0YWJpbmRleFwiLCBwYXJhbXMudGFiaW5kZXggKVxyXG5cdFx0XHQudHJpZ2dlciggcGFyYW1zLmV2ZW50ICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxpc3RLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgdGFyZ2V0ID0gJCggZXZlbnQudGFyZ2V0ICksXHJcblx0XHRcdGxpID0gdGFyZ2V0LmNsb3Nlc3QoIFwibGlcIiApO1xyXG5cclxuXHRcdC8vIHN3aXRjaCBsb2dpYyBiYXNlZCBvbiB3aGljaCBrZXkgd2FzIHByZXNzZWRcclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdC8vIHVwIG9yIGxlZnQgYXJyb3cga2V5c1xyXG5cdFx0Y2FzZSAzODpcclxuXHRcdFx0Z29Ub0FkamFjZW50SXRlbSggbGksIHRhcmdldCwgXCJwcmV2XCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHQvLyBkb3duIG9yIHJpZ2h0IGFycm93IGtleXNcclxuXHRcdGNhc2UgNDA6XHJcblx0XHRcdGdvVG9BZGphY2VudEl0ZW0oIGxpLCB0YXJnZXQsIFwibmV4dFwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0Ly8gSWYgZW50ZXIgb3Igc3BhY2UgaXMgcHJlc3NlZCwgdHJpZ2dlciBjbGlja1xyXG5cdFx0Y2FzZSAxMzpcclxuXHRcdGNhc2UgMzI6XHJcblx0XHRcdHRhcmdldC50cmlnZ2VyKCBcImNsaWNrXCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVNZW51UGFnZUhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdC8vIEFmdGVyIHRoZSBkaWFsb2cncyBkb25lLCB3ZSBtYXkgd2FudCB0byB0cmlnZ2VyIGNoYW5nZSBpZiB0aGUgdmFsdWUgaGFzIGFjdHVhbGx5IGNoYW5nZWRcclxuXHRcdHRoaXMuX2RlbGF5ZWRUcmlnZ2VyKCk7XHJcblxyXG5cdFx0Ly8gVE9ETyBjZW50cmFsaXplIHBhZ2UgcmVtb3ZhbCBiaW5kaW5nIC8gaGFuZGxpbmcgaW4gdGhlIHBhZ2UgcGx1Z2luLlxyXG5cdFx0Ly8gU3VnZ2VzdGlvbiBmcm9tIEBqYmxhcyB0byBkbyByZWZjb3VudGluZ1xyXG5cdFx0Ly9cclxuXHRcdC8vIFRPRE8gZXh0cmVtZWx5IGNvbmZ1c2luZyBkZXBlbmRlbmN5IG9uIHRoZSBvcGVuIG1ldGhvZCB3aGVyZSB0aGUgcGFnZWhpZGUucmVtb3ZlXHJcblx0XHQvLyBiaW5kaW5ncyBhcmUgc3RyaXBwZWQgdG8gcHJldmVudCB0aGUgcGFyZW50IHBhZ2UgZnJvbSBkaXNhcHBlYXJpbmcuIFRoZSB3YXlcclxuXHRcdC8vIHdlJ3JlIGtlZXBpbmcgcGFnZXMgaW4gdGhlIERPTSByaWdodCBub3cgc3Vja3NcclxuXHRcdC8vXHJcblx0XHQvLyByZWJpbmQgdGhlIHBhZ2UgcmVtb3ZlIHRoYXQgd2FzIHVuYm91bmQgaW4gdGhlIG9wZW4gZnVuY3Rpb25cclxuXHRcdC8vIHRvIGFsbG93IGZvciB0aGUgcGFyZW50IHBhZ2UgcmVtb3ZhbCBmcm9tIGFjdGlvbnMgb3RoZXIgdGhhbiB0aGUgdXNlXHJcblx0XHQvLyBvZiBhIGRpYWxvZyBzaXplZCBjdXN0b20gc2VsZWN0XHJcblx0XHQvL1xyXG5cdFx0Ly8gZG9pbmcgdGhpcyBoZXJlIHByb3ZpZGVzIGZvciB0aGUgYmFjayBidXR0b24gb24gdGhlIGN1c3RvbSBzZWxlY3QgZGlhbG9nXHJcblx0XHR0aGlzLnRoaXNQYWdlLnBhZ2UoIFwiYmluZFJlbW92ZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUhlYWRlckNsb3NlQ2xpY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm1lbnVUeXBlID09PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxpc3RJdGVtQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBsaXN0SXRlbSA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cclxuXHRcdFx0Ly8gSW5kZXggb2Ygb3B0aW9uIHRhZyB0byBiZSBzZWxlY3RlZFxyXG5cdFx0XHRvbGRJbmRleCA9IHRoaXMuc2VsZWN0WyAwIF0uc2VsZWN0ZWRJbmRleCxcclxuXHRcdFx0bmV3SW5kZXggPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGxpc3RJdGVtLCBcIm9wdGlvbi1pbmRleFwiICksXHJcblx0XHRcdG9wdGlvbiA9IHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5lcSggbmV3SW5kZXggKVsgMCBdO1xyXG5cclxuXHRcdC8vIFRvZ2dsZSBzZWxlY3RlZCBzdGF0dXMgb24gdGhlIHRhZyBmb3IgbXVsdGkgc2VsZWN0c1xyXG5cdFx0b3B0aW9uLnNlbGVjdGVkID0gdGhpcy5pc011bHRpcGxlID8gIW9wdGlvbi5zZWxlY3RlZCA6IHRydWU7XHJcblxyXG5cdFx0Ly8gVG9nZ2xlIGNoZWNrYm94IGNsYXNzIGZvciBtdWx0aXBsZSBzZWxlY3RzXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0bGlzdEl0ZW0uZmluZCggXCJhXCIgKVxyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jaGVja2JveC1vblwiLCBvcHRpb24uc2VsZWN0ZWQgKVxyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jaGVja2JveC1vZmZcIiwgIW9wdGlvbi5zZWxlY3RlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIGl0J3Mgbm90IGEgbXVsdGlwbGUgc2VsZWN0LCB0cmlnZ2VyIGNoYW5nZSBhZnRlciBpdCBoYXMgZmluaXNoZWQgY2xvc2luZ1xyXG5cdFx0aWYgKCAhdGhpcy5pc011bHRpcGxlICYmIG9sZEluZGV4ICE9PSBuZXdJbmRleCApIHtcclxuXHRcdFx0dGhpcy5fdHJpZ2dlckNoYW5nZSA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVHJpZ2dlciBjaGFuZ2UgaWYgaXQncyBhIG11bHRpcGxlIHNlbGVjdFxyXG5cdFx0Ly8gSGlkZSBjdXN0b20gc2VsZWN0IGZvciBzaW5nbGUgc2VsZWN0cyBvbmx5IC0gb3RoZXJ3aXNlIGZvY3VzIGNsaWNrZWQgaXRlbVxyXG5cdFx0Ly8gV2UgbmVlZCB0byBncmFiIHRoZSBjbGlja2VkIGl0ZW0gdGhlIGhhcmQgd2F5LCBiZWNhdXNlIHRoZSBsaXN0IG1heSBoYXZlIGJlZW4gcmVidWlsdFxyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuc2VsZWN0LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0dGhpcy5saXN0LmZpbmQoIFwibGk6bm90KC51aS1saS1kaXZpZGVyKVwiICkuZXEoIG5ld0luZGV4IClcclxuXHRcdFx0XHQuZmluZCggXCJhXCIgKS5maXJzdCgpLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0fSxcclxuXHJcblx0YnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdElkLCBwb3B1cElkLCBkaWFsb2dJZCwgbGFiZWwsIHRoaXNQYWdlLCBpc011bHRpcGxlLCBtZW51SWQsXHJcblx0XHRcdHRoZW1lQXR0ciwgb3ZlcmxheVRoZW1lLCBvdmVybGF5VGhlbWVBdHRyLCBkaXZpZGVyVGhlbWVBdHRyLFxyXG5cdFx0XHRtZW51UGFnZSwgbGlzdGJveCwgbGlzdCwgaGVhZGVyLCBoZWFkZXJUaXRsZSwgbWVudVBhZ2VDb250ZW50LFxyXG5cdFx0XHRtZW51UGFnZUNsb3NlLCBoZWFkZXJDbG9zZSxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG8ubmF0aXZlTWVudSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZWN0SWQgPSB0aGlzLnNlbGVjdElkO1xyXG5cdFx0cG9wdXBJZCA9IHNlbGVjdElkICsgXCItbGlzdGJveFwiO1xyXG5cdFx0ZGlhbG9nSWQgPSBzZWxlY3RJZCArIFwiLWRpYWxvZ1wiO1xyXG5cdFx0bGFiZWwgPSB0aGlzLmxhYmVsO1xyXG5cdFx0dGhpc1BhZ2UgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICk7XHJcblx0XHRpc011bHRpcGxlID0gdGhpcy5lbGVtZW50WyAwIF0ubXVsdGlwbGU7XHJcblx0XHRtZW51SWQgPSBzZWxlY3RJZCArIFwiLW1lbnVcIjtcclxuXHRcdHRoZW1lQXR0ciA9IG8udGhlbWUgPyAoIFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidGhlbWU9J1wiICsgby50aGVtZSArIFwiJ1wiICkgOiBcIlwiO1xyXG5cdFx0b3ZlcmxheVRoZW1lID0gby5vdmVybGF5VGhlbWUgfHwgby50aGVtZSB8fCBudWxsO1xyXG5cdFx0b3ZlcmxheVRoZW1lQXR0ciA9IG92ZXJsYXlUaGVtZSA/ICggXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICtcclxuXHRcdFx0XCJvdmVybGF5LXRoZW1lPSdcIiArIG92ZXJsYXlUaGVtZSArIFwiJ1wiICkgOiBcIlwiO1xyXG5cdFx0ZGl2aWRlclRoZW1lQXR0ciA9ICggby5kaXZpZGVyVGhlbWUgJiYgaXNNdWx0aXBsZSApID8gKCBcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImRpdmlkZXItdGhlbWU9J1wiICsgby5kaXZpZGVyVGhlbWUgKyBcIidcIiApIDogXCJcIjtcclxuXHRcdG1lbnVQYWdlID0gJCggXCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0nZGlhbG9nJyBjbGFzcz0ndWktc2VsZWN0bWVudScgaWQ9J1wiICsgZGlhbG9nSWQgKyBcIidcIiArIHRoZW1lQXR0ciArIG92ZXJsYXlUaGVtZUF0dHIgKyBcIj5cIiArXHJcblx0XHRcdFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J2hlYWRlcic+XCIgK1xyXG5cdFx0XHRcIjxkaXYgY2xhc3M9J3VpLXRpdGxlJz48L2Rpdj5cIitcclxuXHRcdFx0XCI8L2Rpdj5cIitcclxuXHRcdFx0XCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0nY29udGVudCc+PC9kaXY+XCIrXHJcblx0XHRcdFwiPC9kaXY+XCIgKTtcclxuXHRcdGxpc3Rib3ggPSAkKCBcIjxkaXZcIiArIHRoZW1lQXR0ciArIG92ZXJsYXlUaGVtZUF0dHIgKyBcIiBpZD0nXCIgKyBwb3B1cElkICtcclxuXHRcdFx0XHRcIicgY2xhc3M9J3VpLXNlbGVjdG1lbnUnPjwvZGl2PlwiIClcclxuXHRcdFx0Lmluc2VydEFmdGVyKCB0aGlzLnNlbGVjdCApXHJcblx0XHRcdC5wb3B1cCgpO1xyXG5cdFx0bGlzdCA9ICQoIFwiPHVsIGNsYXNzPSd1aS1zZWxlY3RtZW51LWxpc3QnIGlkPSdcIiArIG1lbnVJZCArIFwiJyByb2xlPSdsaXN0Ym94JyBhcmlhLWxhYmVsbGVkYnk9J1wiICsgdGhpcy5idXR0b25JZCArIFwiJ1wiICsgdGhlbWVBdHRyICsgZGl2aWRlclRoZW1lQXR0ciArIFwiPjwvdWw+XCIgKS5hcHBlbmRUbyggbGlzdGJveCApO1xyXG5cdFx0aGVhZGVyID0gJCggXCI8ZGl2IGNsYXNzPSd1aS1oZWFkZXIgdWktYmFyLVwiICsgKCBvLnRoZW1lID8gby50aGVtZSA6IFwiaW5oZXJpdFwiICkgKyBcIic+PC9kaXY+XCIgKS5wcmVwZW5kVG8oIGxpc3Rib3ggKTtcclxuXHRcdGhlYWRlclRpdGxlID0gJCggXCI8aDEgY2xhc3M9J3VpLXRpdGxlJz48L2gxPlwiICkuYXBwZW5kVG8oIGhlYWRlciApO1xyXG5cclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHRoZWFkZXJDbG9zZSA9ICQoIFwiPGE+XCIsIHtcclxuXHRcdFx0XHRcInJvbGVcIjogXCJidXR0b25cIixcclxuXHRcdFx0XHRcInRleHRcIjogby5jbG9zZVRleHQsXHJcblx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1idG4gdWktY29ybmVyLWFsbCB1aS1idG4tbGVmdCB1aS1idG4taWNvbi1ub3RleHQgdWktaWNvbi1kZWxldGVcIlxyXG5cdFx0XHR9KS5hcHBlbmRUbyggaGVhZGVyICk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0c2VsZWN0SWQ6IHNlbGVjdElkLFxyXG5cdFx0XHRtZW51SWQ6IG1lbnVJZCxcclxuXHRcdFx0cG9wdXBJZDogcG9wdXBJZCxcclxuXHRcdFx0ZGlhbG9nSWQ6IGRpYWxvZ0lkLFxyXG5cdFx0XHR0aGlzUGFnZTogdGhpc1BhZ2UsXHJcblx0XHRcdG1lbnVQYWdlOiBtZW51UGFnZSxcclxuXHRcdFx0bGFiZWw6IGxhYmVsLFxyXG5cdFx0XHRpc011bHRpcGxlOiBpc011bHRpcGxlLFxyXG5cdFx0XHR0aGVtZTogby50aGVtZSxcclxuXHRcdFx0bGlzdGJveDogbGlzdGJveCxcclxuXHRcdFx0bGlzdDogbGlzdCxcclxuXHRcdFx0aGVhZGVyOiBoZWFkZXIsXHJcblx0XHRcdGhlYWRlclRpdGxlOiBoZWFkZXJUaXRsZSxcclxuXHRcdFx0aGVhZGVyQ2xvc2U6IGhlYWRlckNsb3NlLFxyXG5cdFx0XHRtZW51UGFnZUNvbnRlbnQ6IG1lbnVQYWdlQ29udGVudCxcclxuXHRcdFx0bWVudVBhZ2VDbG9zZTogbWVudVBhZ2VDbG9zZSxcclxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBsaXN0IGZyb20gc2VsZWN0LCB1cGRhdGUgc3RhdGVcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cclxuXHRcdGlmICggdGhpcy5fb3JpZ1RhYkluZGV4ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdC8vIE1hcCB1bmRlZmluZWQgdG8gZmFsc2UsIGJlY2F1c2UgdGhpcy5fb3JpZ1RhYkluZGV4ID09PSB1bmRlZmluZWRcclxuXHRcdFx0Ly8gaW5kaWNhdGVzIHRoYXQgd2UgaGF2ZSBub3QgeWV0IGNoZWNrZWQgd2hldGhlciB0aGUgc2VsZWN0IGhhc1xyXG5cdFx0XHQvLyBvcmlnaW5hbGx5IGhhZCBhIHRhYmluZGV4IGF0dHJpYnV0ZSwgd2hlcmVhcyBmYWxzZSBpbmRpY2F0ZXMgdGhhdFxyXG5cdFx0XHQvLyB3ZSBoYXZlIGNoZWNrZWQgdGhlIHNlbGVjdCBmb3Igc3VjaCBhbiBhdHRyaWJ1dGUsIGFuZCBoYXZlIGZvdW5kXHJcblx0XHRcdC8vIG5vbmUgcHJlc2VudC5cclxuXHRcdFx0dGhpcy5fb3JpZ1RhYkluZGV4ID0gKCB0aGlzLnNlbGVjdFsgMCBdLmdldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgPT09IG51bGwgKSA/IGZhbHNlIDogdGhpcy5zZWxlY3QuYXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnNlbGVjdC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuc2VsZWN0LCB7IGZvY3VzIDogXCJfaGFuZGxlU2VsZWN0Rm9jdXNcIiB9ICk7XHJcblxyXG5cdFx0Ly8gQnV0dG9uIGV2ZW50c1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuYnV0dG9uLCB7XHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlQnV0dG9uVmNsaWNrS2V5ZG93blwiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBFdmVudHMgZm9yIGxpc3QgaXRlbXNcclxuXHRcdHRoaXMubGlzdC5hdHRyKCBcInJvbGVcIiwgXCJsaXN0Ym94XCIgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmxpc3QsIHtcclxuXHRcdFx0XCJmb2N1c2luXCI6IFwiX2hhbmRsZUxpc3RGb2N1c1wiLFxyXG5cdFx0XHRcImZvY3Vzb3V0XCI6IFwiX2hhbmRsZUxpc3RGb2N1c1wiLFxyXG5cdFx0XHRcImtleWRvd25cIjogXCJfaGFuZGxlTGlzdEtleWRvd25cIixcclxuXHRcdFx0XCJjbGljayBsaTpub3QoLnVpLWRpc2FibGVkLC51aS1zdGF0ZS1kaXNhYmxlZCwudWktbGktZGl2aWRlcilcIjogXCJfaGFuZGxlTGlzdEl0ZW1DbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBidXR0b24gcmVmb2N1cyBlbnN1cmVzIHByb3BlciBoZWlnaHQgY2FsY3VsYXRpb25cclxuXHRcdC8vIGJ5IHJlbW92aW5nIHRoZSBpbmxpbmUgc3R5bGUgYW5kIGVuc3VyaW5nIHBhZ2UgaW5jbHVzaW9uXHJcblx0XHR0aGlzLl9vbiggdGhpcy5tZW51UGFnZSwgeyBwYWdlaGlkZTogXCJfaGFuZGxlTWVudVBhZ2VIaWRlXCIgfSApO1xyXG5cclxuXHRcdC8vIEV2ZW50cyBvbiB0aGUgcG9wdXBcclxuXHRcdHRoaXMuX29uKCB0aGlzLmxpc3Rib3gsIHsgcG9wdXBhZnRlcmNsb3NlOiBcIl9wb3B1cENsb3NlZFwiIH0gKTtcclxuXHJcblx0XHQvLyBDbG9zZSBidXR0b24gb24gc21hbGwgb3ZlcmxheXNcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5oZWFkZXJDbG9zZSwgeyBjbGljazogXCJfaGFuZGxlSGVhZGVyQ2xvc2VDbGlja1wiIH0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfcG9wdXBDbG9zZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0dGhpcy5fZGVsYXllZFRyaWdnZXIoKTtcclxuXHR9LFxyXG5cclxuXHRfZGVsYXllZFRyaWdnZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyQ2hhbmdlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdF9pc1JlYnVpbGRSZXF1aXJlZDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbGlzdCA9IHRoaXMubGlzdC5maW5kKCBcImxpXCIgKSxcclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5ub3QoIFwiLnVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cclxuXHRcdC8vIFRPRE8gZXhjZWVkaW5nbHkgbmFpdmUgbWV0aG9kIHRvIGRldGVybWluZSBkaWZmZXJlbmNlXHJcblx0XHQvLyBpZ25vcmVzIHZhbHVlIGNoYW5nZXMgZXRjIGluIGZhdm9yIG9mIGEgZm9yY2VkUmVidWlsZFxyXG5cdFx0Ly8gZnJvbSB0aGUgdXNlciBpbiB0aGUgcmVmcmVzaCBtZXRob2RcclxuXHRcdHJldHVybiBvcHRpb25zLnRleHQoKSAhPT0gbGlzdC50ZXh0KCk7XHJcblx0fSxcclxuXHJcblx0c2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5maWx0ZXIoIFwiOnNlbGVjdGVkOm5vdCggOmpxbURhdGEocGxhY2Vob2xkZXI9J3RydWUnKSApXCIgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggZm9yY2UgKSB7XHJcblx0XHR2YXIgc2VsZiwgaW5kaWNlcztcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIGZvcmNlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZiA9IHRoaXM7XHJcblx0XHRpZiAoIGZvcmNlIHx8IHRoaXMuX2lzUmVidWlsZFJlcXVpcmVkKCkgKSB7XHJcblx0XHRcdHNlbGYuX2J1aWxkTGlzdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGluZGljZXMgPSB0aGlzLnNlbGVjdGVkSW5kaWNlcygpO1xyXG5cclxuXHRcdHNlbGYuc2V0QnV0dG9uVGV4dCgpO1xyXG5cdFx0c2VsZi5zZXRCdXR0b25Db3VudCgpO1xyXG5cclxuXHRcdHNlbGYubGlzdC5maW5kKCBcImxpOm5vdCgudWktbGktZGl2aWRlcilcIiApXHJcblx0XHRcdC5maW5kKCBcImFcIiApLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApLmVuZCgpXHJcblx0XHRcdC5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgZmFsc2UgKVxyXG5cdFx0XHQuZWFjaChmdW5jdGlvbiggaSApIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9ICQoIHRoaXMgKTtcclxuXHRcdFx0XHRpZiAoICQuaW5BcnJheSggaSwgaW5kaWNlcyApID4gLTEgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQXJpYSBzZWxlY3RlZCBhdHRyXHJcblx0XHRcdFx0XHRpdGVtLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCB0cnVlICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTXVsdGlwbGUgc2VsZWN0czogYWRkIHRoZSBcIm9uXCIgY2hlY2tib3ggc3RhdGUgdG8gdGhlIGljb25cclxuXHRcdFx0XHRcdGlmICggc2VsZi5pc011bHRpcGxlICkge1xyXG5cdFx0XHRcdFx0XHRpdGVtLmZpbmQoIFwiYVwiICkucmVtb3ZlQ2xhc3MoIFwidWktY2hlY2tib3gtb2ZmXCIgKS5hZGRDbGFzcyggXCJ1aS1jaGVja2JveC1vblwiICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpZiAoIGl0ZW0uaGFzQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0XHRcdFx0aXRlbS5uZXh0KCkuZmluZCggXCJhXCIgKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpdGVtLmZpbmQoIFwiYVwiICkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzZWxmLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdFx0XHRpdGVtLmZpbmQoIFwiYVwiICkucmVtb3ZlQ2xhc3MoIFwidWktY2hlY2tib3gtb25cIiApLmFkZENsYXNzKCBcInVpLWNoZWNrYm94LW9mZlwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCAhdGhpcy5pc09wZW4gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKCBzZWxmLm1lbnVUeXBlID09PSBcInBhZ2VcIiApIHtcclxuXHRcdFx0c2VsZi5tZW51UGFnZS5kaWFsb2coIFwiY2xvc2VcIiApO1xyXG5cdFx0XHRzZWxmLmxpc3QuYXBwZW5kVG8oIHNlbGYubGlzdGJveCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5saXN0Ym94LnBvcHVwKCBcImNsb3NlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxmLl9mb2N1c0J1dHRvbigpO1xyXG5cdFx0Ly8gYWxsb3cgdGhlIGRpYWxvZyB0byBiZSBjbG9zZWQgYWdhaW5cclxuXHRcdHNlbGYuaXNPcGVuID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0b3BlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmJ1dHRvbi5jbGljaygpO1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c01lbnVJdGVtOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RvciA9IHRoaXMubGlzdC5maW5kKCBcImEuXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0aWYgKCBzZWxlY3Rvci5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHNlbGVjdG9yID0gdGhpcy5saXN0LmZpbmQoIFwibGk6bm90KFwiICsgdW5mb2N1c2FibGVJdGVtU2VsZWN0b3IgKyBcIikgYS51aS1idG5cIiApO1xyXG5cdFx0fVxyXG5cdFx0c2VsZWN0b3IuZmlyc3QoKS5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdF9kZWNpZGVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHQkd2luZG93ID0gdGhpcy53aW5kb3csXHJcblx0XHRcdHNlbGZMaXN0UGFyZW50ID0gc2VsZi5saXN0LnBhcmVudCgpLFxyXG5cdFx0XHRtZW51SGVpZ2h0ID0gc2VsZkxpc3RQYXJlbnQub3V0ZXJIZWlnaHQoKSxcclxuXHRcdFx0c2Nyb2xsVG9wID0gJHdpbmRvdy5zY3JvbGxUb3AoKSxcclxuXHRcdFx0YnRuT2Zmc2V0ID0gc2VsZi5idXR0b24ub2Zmc2V0KCkudG9wLFxyXG5cdFx0XHRzY3JlZW5IZWlnaHQgPSAkd2luZG93LmhlaWdodCgpO1xyXG5cclxuXHRcdGlmICggbWVudUhlaWdodCA+IHNjcmVlbkhlaWdodCAtIDgwIHx8ICEkLnN1cHBvcnQuc2Nyb2xsVG9wICkge1xyXG5cclxuXHRcdFx0c2VsZi5tZW51UGFnZS5hcHBlbmRUbyggJC5tb2JpbGUucGFnZUNvbnRhaW5lciApLnBhZ2UoKTtcclxuXHRcdFx0c2VsZi5tZW51UGFnZUNvbnRlbnQgPSBzZWxmLm1lbnVQYWdlLmZpbmQoIFwiLnVpLWNvbnRlbnRcIiApO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlQ2xvc2UgPSBzZWxmLm1lbnVQYWdlLmZpbmQoIFwiLnVpLWhlYWRlciBhXCIgKTtcclxuXHJcblx0XHRcdC8vIHByZXZlbnQgdGhlIHBhcmVudCBwYWdlIGZyb20gYmVpbmcgcmVtb3ZlZCBmcm9tIHRoZSBET00sXHJcblx0XHRcdC8vIG90aGVyd2lzZSB0aGUgcmVzdWx0cyBvZiBzZWxlY3RpbmcgYSBsaXN0IGl0ZW0gaW4gdGhlIGRpYWxvZ1xyXG5cdFx0XHQvLyBmYWxsIGludG8gYSBibGFjayBob2xlXHJcblx0XHRcdHNlbGYudGhpc1BhZ2UudW5iaW5kKCBcInBhZ2VoaWRlLnJlbW92ZVwiICk7XHJcblxyXG5cdFx0XHQvL2ZvciBXZWJPUy9PcGVyYSBNaW5pIChzZXQgbGFzdHNjcm9sbCB1c2luZyBidXR0b24gb2Zmc2V0KVxyXG5cdFx0XHRpZiAoIHNjcm9sbFRvcCA9PT0gMCAmJiBidG5PZmZzZXQgPiBzY3JlZW5IZWlnaHQgKSB7XHJcblx0XHRcdFx0c2VsZi50aGlzUGFnZS5vbmUoIFwicGFnZWhpZGVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkKCB0aGlzICkuanFtRGF0YSggXCJsYXN0U2Nyb2xsXCIsIGJ0bk9mZnNldCApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLm1lbnVQYWdlLm9uZSgge1xyXG5cdFx0XHRcdHBhZ2VzaG93OiAkLnByb3h5KCB0aGlzLCBcIl9mb2N1c01lbnVJdGVtXCIgKSxcclxuXHRcdFx0XHRwYWdlaGlkZTogJC5wcm94eSggdGhpcywgXCJjbG9zZVwiIClcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzZWxmLm1lbnVUeXBlID0gXCJwYWdlXCI7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VDb250ZW50LmFwcGVuZCggc2VsZi5saXN0ICk7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VcclxuXHRcdFx0XHQuZmluZCggXCJkaXYgLnVpLXRpdGxlXCIgKVxyXG5cdFx0XHRcdFx0LnRleHQoIHNlbGYubGFiZWwuZ2V0RW5jb2RlZFRleHQoKSB8fCBzZWxmLnBsYWNlaG9sZGVyICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWxmLm1lbnVUeXBlID0gXCJvdmVybGF5XCI7XHJcblxyXG5cdFx0XHRzZWxmLmxpc3Rib3gub25lKCB7IHBvcHVwYWZ0ZXJvcGVuOiAkLnByb3h5KCB0aGlzLCBcIl9mb2N1c01lbnVJdGVtXCIgKSB9ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2J1aWxkTGlzdDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcixcclxuXHRcdFx0bmVlZFBsYWNlaG9sZGVyID0gdHJ1ZSxcclxuXHRcdFx0ZGF0YUljb24gPSBcImZhbHNlXCIsXHJcblx0XHRcdCRvcHRpb25zLCBudW1PcHRpb25zLCBzZWxlY3QsXHJcblx0XHRcdGRhdGFQcmVmaXggPSBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyxcclxuXHRcdFx0ZGF0YUluZGV4QXR0ciA9IGRhdGFQcmVmaXggKyBcIm9wdGlvbi1pbmRleFwiLFxyXG5cdFx0XHRkYXRhSWNvbkF0dHIgPSBkYXRhUHJlZml4ICsgXCJpY29uXCIsXHJcblx0XHRcdGRhdGFSb2xlQXR0ciA9IGRhdGFQcmVmaXggKyBcInJvbGVcIixcclxuXHRcdFx0ZGF0YVBsYWNlaG9sZGVyQXR0ciA9IGRhdGFQcmVmaXggKyBcInBsYWNlaG9sZGVyXCIsXHJcblx0XHRcdGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxyXG5cdFx0XHRpc1BsYWNlaG9sZGVySXRlbSA9IGZhbHNlLFxyXG5cdFx0XHRvcHRHcm91cCxcclxuXHRcdFx0aSxcclxuXHRcdFx0b3B0aW9uLCAkb3B0aW9uLCBwYXJlbnQsIHRleHQsIGFuY2hvciwgY2xhc3NlcyxcclxuXHRcdFx0b3B0TGFiZWwsIGRpdmlkZXIsIGl0ZW07XHJcblxyXG5cdFx0c2VsZi5saXN0LmVtcHR5KCkuZmlsdGVyKCBcIi51aS1saXN0dmlld1wiICkubGlzdHZpZXcoIFwiZGVzdHJveVwiICk7XHJcblx0XHQkb3B0aW9ucyA9IHRoaXMuX3NlbGVjdE9wdGlvbnMoKTtcclxuXHRcdG51bU9wdGlvbnMgPSAkb3B0aW9ucy5sZW5ndGg7XHJcblx0XHRzZWxlY3QgPSB0aGlzLnNlbGVjdFsgMCBdO1xyXG5cclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbnVtT3B0aW9ucztpKyssIGlzUGxhY2Vob2xkZXJJdGVtID0gZmFsc2UpIHtcclxuXHRcdFx0b3B0aW9uID0gJG9wdGlvbnNbaV07XHJcblx0XHRcdCRvcHRpb24gPSAkKCBvcHRpb24gKTtcclxuXHJcblx0XHRcdC8vIERvIG5vdCBjcmVhdGUgb3B0aW9ucyBiYXNlZCBvbiB1aS1zY3JlZW4taGlkZGVuIHNlbGVjdCBvcHRpb25zXHJcblx0XHRcdGlmICggJG9wdGlvbi5oYXNDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cGFyZW50ID0gb3B0aW9uLnBhcmVudE5vZGU7XHJcblx0XHRcdGNsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRcdC8vIEFsdGhvdWdoIHVzaW5nIC50ZXh0KCkgaGVyZSByYWlzZXMgdGhlIHJpc2sgdGhhdCwgd2hlbiB3ZSBsYXRlciBwYXN0ZSB0aGlzIGludG8gdGhlXHJcblx0XHRcdC8vIGxpc3QgaXRlbSB3ZSBlbmQgdXAgcGFzdGluZyBwb3NzaWJseSBtYWxpY2lvdXMgdGhpbmdzIGxpa2UgPHNjcmlwdD4gdGFncywgdGhhdCByaXNrXHJcblx0XHRcdC8vIG9ubHkgYXJpc2VzIGlmIHdlIGRvIHNvbWV0aGluZyBsaWtlICQoIFwiPGxpPjxhIGhyZWY9JyMnPlwiICsgdGV4dCArIFwiPC9hPjwvbGk+XCIgKS4gV2VcclxuXHRcdFx0Ly8gZG9uJ3QgZG8gdGhhdC4gV2UgZG8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIHRleHQgKSBpbnN0ZWFkLCB3aGljaCBndWFyYW50ZWVzIHRoYXRcclxuXHRcdFx0Ly8gd2hhdGV2ZXIgd2UgcGFzdGUgaW4gd2lsbCBlbmQgdXAgYXMgdGV4dCwgd2l0aCBjaGFyYWN0ZXJzIGxpa2UgPCwgPiBhbmQgJiBlc2NhcGVkLlxyXG5cdFx0XHR0ZXh0ID0gJG9wdGlvbi50ZXh0KCk7XHJcblx0XHRcdGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XHJcblx0XHRcdGFuY2hvci5zZXRBdHRyaWJ1dGUoIFwiaHJlZlwiLCBcIiNcIiApO1xyXG5cdFx0XHRhbmNob3IuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCB0ZXh0ICkgKTtcclxuXHJcblx0XHRcdC8vIEFyZSB3ZSBpbnNpZGUgYW4gb3B0Z3JvdXA/XHJcblx0XHRcdGlmICggcGFyZW50ICE9PSBzZWxlY3QgJiYgcGFyZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwib3B0Z3JvdXBcIiApIHtcclxuXHRcdFx0XHRvcHRMYWJlbCA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoIFwibGFiZWxcIiApO1xyXG5cdFx0XHRcdGlmICggb3B0TGFiZWwgIT09IG9wdEdyb3VwICkge1xyXG5cdFx0XHRcdFx0ZGl2aWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIGRhdGFSb2xlQXR0ciwgXCJsaXN0LWRpdmlkZXJcIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcIm9wdGlvblwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBvcHRMYWJlbCApICk7XHJcblx0XHRcdFx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggZGl2aWRlciApO1xyXG5cdFx0XHRcdFx0b3B0R3JvdXAgPSBvcHRMYWJlbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggbmVlZFBsYWNlaG9sZGVyICYmICggIW9wdGlvbi5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApIHx8IHRleHQubGVuZ3RoID09PSAwIHx8ICRvcHRpb24uanFtRGF0YSggXCJwbGFjZWhvbGRlclwiICkgKSApIHtcclxuXHRcdFx0XHRuZWVkUGxhY2Vob2xkZXIgPSBmYWxzZTtcclxuXHRcdFx0XHRpc1BsYWNlaG9sZGVySXRlbSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgaWRlbnRpZmllZCBhIHBsYWNlaG9sZGVyLCByZWNvcmQgdGhlIGZhY3QgdGhhdCBpdCB3YXNcclxuXHRcdFx0XHQvLyB1cyB3aG8gaGF2ZSBhZGRlZCB0aGUgcGxhY2Vob2xkZXIgdG8gdGhlIG9wdGlvbiBhbmQgbWFyayBpdFxyXG5cdFx0XHRcdC8vIHJldHJvYWN0aXZlbHkgaW4gdGhlIHNlbGVjdCBhcyB3ZWxsXHJcblx0XHRcdFx0aWYgKCBudWxsID09PSBvcHRpb24uZ2V0QXR0cmlidXRlKCBkYXRhUGxhY2Vob2xkZXJBdHRyICkgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9yZW1vdmVQbGFjZWhvbGRlckF0dHIgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvcHRpb24uc2V0QXR0cmlidXRlKCBkYXRhUGxhY2Vob2xkZXJBdHRyLCB0cnVlICk7XHJcblx0XHRcdFx0aWYgKCBvLmhpZGVQbGFjZWhvbGRlck1lbnVJdGVtcyApIHtcclxuXHRcdFx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBwbGFjZWhvbGRlciAhPT0gdGV4dCApIHtcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gc2VsZi5wbGFjZWhvbGRlciA9IHRleHQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJsaVwiICk7XHJcblx0XHRcdGlmICggb3B0aW9uLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1kaXNhYmxlZFwiLCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIGRhdGFJbmRleEF0dHIsIGkgKTtcclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIGRhdGFJY29uQXR0ciwgZGF0YUljb24gKTtcclxuXHRcdFx0aWYgKCBpc1BsYWNlaG9sZGVySXRlbSApIHtcclxuXHRcdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggZGF0YVBsYWNlaG9sZGVyQXR0ciwgdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCBcIiBcIiApO1xyXG5cdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwib3B0aW9uXCIgKTtcclxuXHRcdFx0YW5jaG9yLnNldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdFx0JCggYW5jaG9yICkuYWRkQ2xhc3MoIFwidWktYnRuIHVpLWNoZWNrYm94LW9mZiB1aS1idG4taWNvbi1yaWdodFwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGl0ZW0uYXBwZW5kQ2hpbGQoIGFuY2hvciApO1xyXG5cdFx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggaXRlbSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGYubGlzdFswXS5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcclxuXHJcblx0XHQvLyBIaWRlIGhlYWRlciBpZiBpdCdzIG5vdCBhIG11bHRpc2VsZWN0IGFuZCB0aGVyZSdzIG5vIHBsYWNlaG9sZGVyXHJcblx0XHRpZiAoICF0aGlzLmlzTXVsdGlwbGUgJiYgIXBsYWNlaG9sZGVyLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5oZWFkZXIuYWRkQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmhlYWRlclRpdGxlLnRleHQoIHRoaXMucGxhY2Vob2xkZXIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3cgcG9wdWxhdGVkLCBjcmVhdGUgbGlzdHZpZXdcclxuXHRcdHNlbGYubGlzdC5saXN0dmlldygpO1xyXG5cdH0sXHJcblxyXG5cdF9idXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5uYXRpdmVNZW51ID9cclxuXHRcdFx0dGhpcy5fc3VwZXIoKSA6XHJcblx0XHRcdCQoIFwiPGE+XCIsIHtcclxuXHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XCJyb2xlXCI6IFwiYnV0dG9uXCIsXHJcblx0XHRcdFx0Ly8gVE9ETyB2YWx1ZSBpcyB1bmRlZmluZWQgYXQgY3JlYXRpb25cclxuXHRcdFx0XHRcImlkXCI6IHRoaXMuYnV0dG9uSWQsXHJcblx0XHRcdFx0XCJhcmlhLWhhc3BvcHVwXCI6IFwidHJ1ZVwiLFxyXG5cclxuXHRcdFx0XHQvLyBUT0RPIHZhbHVlIGlzIHVuZGVmaW5lZCBhdCBjcmVhdGlvblxyXG5cdFx0XHRcdFwiYXJpYS1vd25zXCI6IHRoaXMubWVudUlkXHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cclxuXHRcdFx0Ly8gUmVzdG9yZSB0aGUgdGFiaW5kZXggYXR0cmlidXRlIHRvIGl0cyBvcmlnaW5hbCB2YWx1ZVxyXG5cdFx0XHRpZiAoIHRoaXMuX29yaWdUYWJJbmRleCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fb3JpZ1RhYkluZGV4ICE9PSBmYWxzZSApIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0LmF0dHIoIFwidGFiaW5kZXhcIiwgdGhpcy5fb3JpZ1RhYkluZGV4ICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0LnJlbW92ZUF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBwbGFjZWhvbGRlciBhdHRyaWJ1dGUgaWYgd2Ugd2VyZSB0aGUgb25lcyB0byBhZGQgaXRcclxuXHRcdFx0aWYgKCB0aGlzLl9yZW1vdmVQbGFjZWhvbGRlckF0dHIgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2VsZWN0T3B0aW9ucygpLnJlbW92ZUF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJwbGFjZWhvbGRlclwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlbW92ZSB0aGUgcG9wdXBcclxuXHRcdFx0dGhpcy5saXN0Ym94LnJlbW92ZSgpO1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBkaWFsb2dcclxuXHRcdFx0dGhpcy5tZW51UGFnZS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGFpbiB1cFxyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbi8vIGJ1dHRvbk1hcmt1cCBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMS41LjAuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIEdlbmVyYWwgcG9saWN5OiBEbyBub3QgYWNjZXNzIGRhdGEtKiBhdHRyaWJ1dGVzIGV4Y2VwdCBkdXJpbmcgZW5oYW5jZW1lbnQuXHJcbi8vIEluIGFsbCBvdGhlciBjYXNlcyB3ZSBkZXRlcm1pbmUgdGhlIHN0YXRlIG9mIHRoZSBidXR0b24gZXhjbHVzaXZlbHkgZnJvbSBpdHNcclxuLy8gY2xhc3NOYW1lLiBUaGF0J3Mgd2h5IG9wdGlvbnNUb0NsYXNzZXMgZXhwZWN0cyBhIGZ1bGwgY29tcGxlbWVudCBvZiBvcHRpb25zLFxyXG4vLyBhbmQgdGhlIGpRdWVyeSBwbHVnaW4gY29tcGxldGVzIHRoZSBzZXQgb2Ygb3B0aW9ucyBmcm9tIHRoZSBkZWZhdWx0IHZhbHVlcy5cclxuXHJcbi8vIE1hcCBjbGFzc2VzIHRvIGJ1dHRvbk1hcmt1cCBib29sZWFuIG9wdGlvbnMgLSB1c2VkIGluIGNsYXNzTmFtZVRvT3B0aW9ucygpXHJcbnZhciByZXZlcnNlQm9vbE9wdGlvbk1hcCA9IHtcclxuXHRcdFwidWktc2hhZG93XCIgOiBcInNoYWRvd1wiLFxyXG5cdFx0XCJ1aS1jb3JuZXItYWxsXCIgOiBcImNvcm5lcnNcIixcclxuXHRcdFwidWktYnRuLWlubGluZVwiIDogXCJpbmxpbmVcIixcclxuXHRcdFwidWktc2hhZG93LWljb25cIiA6IFwiaWNvbnNoYWRvd1wiLCAvKiBUT0RPOiBSZW1vdmUgaW4gMS41ICovXHJcblx0XHRcInVpLW1pbmlcIiA6IFwibWluaVwiXHJcblx0fSxcclxuXHRnZXRBdHRyRml4ZWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciByZXQgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdHJldHVybiAoIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0ICk7XHJcblx0fSxcclxuXHRjYXBpdGFsTGV0dGVyc1JFID0gL1tBLVpdL2c7XHJcblxyXG4vLyBvcHRpb25zVG9DbGFzc2VzOlxyXG4vLyBAb3B0aW9uczogQSBjb21wbGV0ZSBzZXQgb2Ygb3B0aW9ucyB0byBjb252ZXJ0IHRvIGNsYXNzIG5hbWVzLlxyXG4vLyBAZXhpc3RpbmdDbGFzc2VzOiBleHRyYSBjbGFzc2VzIHRvIGFkZCB0byB0aGUgcmVzdWx0XHJcbi8vXHJcbi8vIENvbnZlcnRzIEBvcHRpb25zIHRvIGJ1dHRvbk1hcmt1cCBjbGFzc2VzIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYW4gYXJyYXlcclxuLy8gdGhhdCBjYW4gYmUgY29udmVydGVkIHRvIGFuIGVsZW1lbnQncyBjbGFzc05hbWUgd2l0aCAuam9pbiggXCIgXCIgKS4gQWxsXHJcbi8vIHBvc3NpYmxlIG9wdGlvbnMgbXVzdCBiZSBzZXQgaW5zaWRlIEBvcHRpb25zLiBVc2UgJC5mbi5idXR0b25NYXJrdXAuZGVmYXVsdHNcclxuLy8gdG8gZ2V0IGEgY29tcGxldGUgc2V0IGFuZCB1c2UgJC5leHRlbmQgdG8gb3ZlcnJpZGUgeW91ciBjaG9pY2Ugb2Ygb3B0aW9uc1xyXG4vLyBmcm9tIHRoYXQgc2V0LlxyXG5mdW5jdGlvbiBvcHRpb25zVG9DbGFzc2VzKCBvcHRpb25zLCBleGlzdGluZ0NsYXNzZXMgKSB7XHJcblx0dmFyIGNsYXNzZXMgPSBleGlzdGluZ0NsYXNzZXMgPyBleGlzdGluZ0NsYXNzZXMgOiBbXTtcclxuXHJcblx0Ly8gQWRkIGNsYXNzZXMgdG8gdGhlIGFycmF5IC0gZmlyc3QgdWktYnRuXHJcblx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJ0blwiICk7XHJcblxyXG5cdC8vIElmIHRoZXJlIGlzIGEgdGhlbWVcclxuXHRpZiAoIG9wdGlvbnMudGhlbWUgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdH1cclxuXHJcblx0Ly8gSWYgdGhlcmUncyBhbiBpY29uLCBhZGQgdGhlIGljb24tcmVsYXRlZCBjbGFzc2VzXHJcblx0aWYgKCBvcHRpb25zLmljb24gKSB7XHJcblx0XHRjbGFzc2VzID0gY2xhc3Nlcy5jb25jYXQoW1xyXG5cdFx0XHRcInVpLWljb24tXCIgKyBvcHRpb25zLmljb24sXHJcblx0XHRcdFwidWktYnRuLWljb24tXCIgKyBvcHRpb25zLmljb25wb3NcclxuXHRcdF0pO1xyXG5cdFx0aWYgKCBvcHRpb25zLmljb25zaGFkb3cgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zaGFkb3ctaWNvblwiICk7IC8qIFRPRE86IFJlbW92ZSBpbiAxLjUgKi9cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEFkZCB0aGUgYXBwcm9wcmlhdGUgY2xhc3MgZm9yIGVhY2ggYm9vbGVhbiBvcHRpb25cclxuXHRpZiAoIG9wdGlvbnMuaW5saW5lICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJ0bi1pbmxpbmVcIiApO1xyXG5cdH1cclxuXHRpZiAoIG9wdGlvbnMuc2hhZG93ICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXNoYWRvd1wiICk7XHJcblx0fVxyXG5cdGlmICggb3B0aW9ucy5jb3JuZXJzICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWNvcm5lci1hbGxcIiApO1xyXG5cdH1cclxuXHRpZiAoIG9wdGlvbnMubWluaSApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1taW5pXCIgKTtcclxuXHR9XHJcblxyXG5cdC8vIENyZWF0ZSBhIHN0cmluZyBmcm9tIHRoZSBhcnJheSBhbmQgcmV0dXJuIGl0XHJcblx0cmV0dXJuIGNsYXNzZXM7XHJcbn1cclxuXHJcbi8vIGNsYXNzTmFtZVRvT3B0aW9uczpcclxuLy8gQGNsYXNzZXM6IEEgc3RyaW5nIGNvbnRhaW5pbmcgYSAuY2xhc3NOYW1lLXN0eWxlIHNwYWNlLXNlcGFyYXRlZCBjbGFzcyBsaXN0XHJcbi8vXHJcbi8vIExvb3BzIG92ZXIgQGNsYXNzZXMgYW5kIGNhbGN1bGF0ZXMgYW4gb3B0aW9ucyBvYmplY3QgYmFzZWQgb24gdGhlXHJcbi8vIGJ1dHRvbk1hcmt1cC1yZWxhdGVkIGNsYXNzZXMgaXQgZmluZHMuIEl0IHJlY29yZHMgdW5yZWNvZ25pemVkIGNsYXNzZXMgaW4gYW5cclxuLy8gYXJyYXkuXHJcbi8vXHJcbi8vIFJldHVybnM6IEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgaXRlbXM6XHJcbi8vXHJcbi8vIFwib3B0aW9uc1wiOiBidXR0b25NYXJrdXAgb3B0aW9ucyBmb3VuZCB0byBiZSBwcmVzZW50IGJlY2F1c2Ugb2YgdGhlXHJcbi8vIHByZXNlbmNlL2Fic2VuY2Ugb2YgY29ycmVzcG9uZGluZyBjbGFzc2VzXHJcbi8vXHJcbi8vIFwidW5rbm93bkNsYXNzZXNcIjogYSBzdHJpbmcgY29udGFpbmluZyBhbGwgdGhlIG5vbi1idXR0b25NYXJrdXAtcmVsYXRlZFxyXG4vLyBjbGFzc2VzIGZvdW5kIGluIEBjbGFzc2VzXHJcbi8vXHJcbi8vIFwiYWxyZWFkeUVuaGFuY2VkXCI6IEEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHVpLWJ0biBjbGFzcyB3YXMgYW1vbmdcclxuLy8gdGhvc2UgZm91bmQgdG8gYmUgcHJlc2VudFxyXG5mdW5jdGlvbiBjbGFzc05hbWVUb09wdGlvbnMoIGNsYXNzZXMgKSB7XHJcblx0dmFyIGlkeCwgbWFwLCB1bmtub3duQ2xhc3MsXHJcblx0XHRhbHJlYWR5RW5oYW5jZWQgPSBmYWxzZSxcclxuXHRcdG5vSWNvbiA9IHRydWUsXHJcblx0XHRvID0ge1xyXG5cdFx0XHRpY29uOiBcIlwiLFxyXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxyXG5cdFx0XHRzaGFkb3c6IGZhbHNlLFxyXG5cdFx0XHRjb3JuZXJzOiBmYWxzZSxcclxuXHRcdFx0aWNvbnNoYWRvdzogZmFsc2UsXHJcblx0XHRcdG1pbmk6IGZhbHNlXHJcblx0XHR9LFxyXG5cdFx0dW5rbm93bkNsYXNzZXMgPSBbXTtcclxuXHJcblx0Y2xhc3NlcyA9IGNsYXNzZXMuc3BsaXQoIFwiIFwiICk7XHJcblxyXG5cdC8vIExvb3Agb3ZlciB0aGUgY2xhc3Nlc1xyXG5cdGZvciAoIGlkeCA9IDAgOyBpZHggPCBjbGFzc2VzLmxlbmd0aCA7IGlkeCsrICkge1xyXG5cclxuXHRcdC8vIEFzc3VtZSBpdCdzIGFuIHVucmVjb2duaXplZCBjbGFzc1xyXG5cdFx0dW5rbm93bkNsYXNzID0gdHJ1ZTtcclxuXHJcblx0XHQvLyBSZWNvZ25pemUgYm9vbGVhbiBvcHRpb25zIGZyb20gdGhlIHByZXNlbmNlIG9mIGNsYXNzZXNcclxuXHRcdG1hcCA9IHJldmVyc2VCb29sT3B0aW9uTWFwWyBjbGFzc2VzWyBpZHggXSBdO1xyXG5cdFx0aWYgKCBtYXAgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG9bIG1hcCBdID0gdHJ1ZTtcclxuXHJcblx0XHQvLyBSZWNvZ25pemUgdGhlIHByZXNlbmNlIG9mIGFuIGljb24gYW5kIGVzdGFibGlzaCB0aGUgaWNvbiBwb3NpdGlvblxyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0uaW5kZXhPZiggXCJ1aS1idG4taWNvbi1cIiApID09PSAwICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0bm9JY29uID0gZmFsc2U7XHJcblx0XHRcdG8uaWNvbnBvcyA9IGNsYXNzZXNbIGlkeCBdLnN1YnN0cmluZyggMTIgKTtcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggd2hpY2ggaWNvbiBpcyBwcmVzZW50XHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXS5pbmRleE9mKCBcInVpLWljb24tXCIgKSA9PT0gMCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG8uaWNvbiA9IGNsYXNzZXNbIGlkeCBdLnN1YnN0cmluZyggOCApO1xyXG5cclxuXHRcdC8vIEVzdGFibGlzaCB0aGUgdGhlbWUgLSB0aGlzIHJlY29nbml6ZXMgb25lLWxldHRlciB0aGVtZSBzd2F0Y2ggbmFtZXNcclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdLmluZGV4T2YoIFwidWktYnRuLVwiICkgPT09IDAgJiYgY2xhc3Nlc1sgaWR4IF0ubGVuZ3RoID09PSA4ICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0by50aGVtZSA9IGNsYXNzZXNbIGlkeCBdLnN1YnN0cmluZyggNyApO1xyXG5cclxuXHRcdC8vIFJlY29nbml6ZSB0aGF0IHRoaXMgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGJ1dHRvbk1hcmt1cC1lbmhhbmNlZFxyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0gPT09IFwidWktYnRuXCIgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRhbHJlYWR5RW5oYW5jZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHRoaXMgY2xhc3MgaGFzIG5vdCBiZWVuIHJlY29nbml6ZWQsIGFkZCBpdCB0byB0aGUgbGlzdFxyXG5cdFx0aWYgKCB1bmtub3duQ2xhc3MgKSB7XHJcblx0XHRcdHVua25vd25DbGFzc2VzLnB1c2goIGNsYXNzZXNbIGlkeCBdICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBJZiBhIFwidWktYnRuLWljb24tKlwiIGljb24gcG9zaXRpb24gY2xhc3MgaXMgYWJzZW50IHRoZXJlIGNhbm5vdCBiZSBhbiBpY29uXHJcblx0aWYgKCBub0ljb24gKSB7XHJcblx0XHRvLmljb24gPSBcIlwiO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdG9wdGlvbnM6IG8sXHJcblx0XHR1bmtub3duQ2xhc3NlczogdW5rbm93bkNsYXNzZXMsXHJcblx0XHRhbHJlYWR5RW5oYW5jZWQ6IGFscmVhZHlFbmhhbmNlZFxyXG5cdH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbWVsQ2FzZTJIeXBoZW5hdGVkKCBjICkge1xyXG5cdHJldHVybiBcIi1cIiArIGMudG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuLy8gJC5mbi5idXR0b25NYXJrdXA6XHJcbi8vIERPTTogZ2V0cy9zZXRzIC5jbGFzc05hbWVcclxuLy9cclxuLy8gQG9wdGlvbnM6IG9wdGlvbnMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBqUXVlcnkgb2JqZWN0XHJcbi8vIEBvdmVyd3JpdGVDbGFzc2VzOiBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0byBob25vdXIgZXhpc3RpbmcgY2xhc3Nlc1xyXG4vL1xyXG4vLyBDYWxjdWxhdGVzIHRoZSBjbGFzc2VzIHRvIGFwcGx5IHRvIHRoZSBlbGVtZW50cyBpbiB0aGUgalF1ZXJ5IG9iamVjdCBiYXNlZCBvblxyXG4vLyB0aGUgb3B0aW9ucyBwYXNzZWQgaW4uIElmIEBvdmVyd3JpdGVDbGFzc2VzIGlzIHRydWUsIGl0IHNldHMgdGhlIGNsYXNzTmFtZVxyXG4vLyBwcm9wZXJ0eSBvZiBlYWNoIGVsZW1lbnQgaW4gdGhlIGpRdWVyeSBvYmplY3QgdG8gdGhlIGJ1dHRvbk1hcmt1cCBjbGFzc2VzXHJcbi8vIGl0IGNhbGN1bGF0ZXMgYmFzZWQgb24gdGhlIG9wdGlvbnMgcGFzc2VkIGluLlxyXG4vL1xyXG4vLyBJZiB5b3Ugd2lzaCB0byBwcmVzZXJ2ZSBhbnkgY2xhc3NlcyB0aGF0IGFyZSBhbHJlYWR5IHByZXNlbnQgb24gdGhlIGVsZW1lbnRzXHJcbi8vIGluc2lkZSB0aGUgalF1ZXJ5IG9iamVjdCwgaW5jbHVkaW5nIGJ1dHRvbk1hcmt1cC1yZWxhdGVkIGNsYXNzZXMgdGhhdCB3ZXJlXHJcbi8vIGFkZGVkIGJ5IGEgcHJldmlvdXMgY2FsbCB0byAkLmZuLmJ1dHRvbk1hcmt1cCgpIG9yIGR1cmluZyBwYWdlIGVuaGFuY2VtZW50XHJcbi8vIHRoZW4geW91IHNob3VsZCBvbWl0IEBvdmVyd3JpdGVDbGFzc2VzIG9yIHNldCBpdCB0byBmYWxzZS5cclxuJC5mbi5idXR0b25NYXJrdXAgPSBmdW5jdGlvbiggb3B0aW9ucywgb3ZlcndyaXRlQ2xhc3NlcyApIHtcclxuXHR2YXIgaWR4LCBkYXRhLCBlbCwgcmV0cmlldmVkT3B0aW9ucywgb3B0aW9uS2V5LFxyXG5cdFx0ZGVmYXVsdHMgPSAkLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0cztcclxuXHJcblx0Zm9yICggaWR4ID0gMCA7IGlkeCA8IHRoaXMubGVuZ3RoIDsgaWR4KysgKSB7XHJcblx0XHRlbCA9IHRoaXNbIGlkeCBdO1xyXG5cdFx0ZGF0YSA9IG92ZXJ3cml0ZUNsYXNzZXMgP1xyXG5cclxuXHRcdFx0Ly8gQXNzdW1lIHRoaXMgZWxlbWVudCBpcyBub3QgZW5oYW5jZWQgYW5kIGlnbm9yZSBpdHMgY2xhc3Nlc1xyXG5cdFx0XHR7IGFscmVhZHlFbmhhbmNlZDogZmFsc2UsIHVua25vd25DbGFzc2VzOiBbXSB9IDpcclxuXHJcblx0XHRcdC8vIE90aGVyd2lzZSBhbmFseXplIGV4aXN0aW5nIGNsYXNzZXMgdG8gZXN0YWJsaXNoIGV4aXN0aW5nIG9wdGlvbnMgYW5kXHJcblx0XHRcdC8vIGNsYXNzZXNcclxuXHRcdFx0Y2xhc3NOYW1lVG9PcHRpb25zKCBlbC5jbGFzc05hbWUgKTtcclxuXHJcblx0XHRyZXRyaWV2ZWRPcHRpb25zID0gJC5leHRlbmQoIHt9LFxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGVsZW1lbnQgYWxyZWFkeSBoYXMgdGhlIGNsYXNzIHVpLWJ0biwgdGhlbiB3ZSBhc3N1bWUgdGhhdFxyXG5cdFx0XHQvLyBpdCBoYXMgcGFzc2VkIHRocm91Z2ggYnV0dG9uTWFya3VwIGJlZm9yZSAtIG90aGVyd2lzZSwgdGhlIG9wdGlvbnNcclxuXHRcdFx0Ly8gcmV0dXJuZWQgYnkgY2xhc3NOYW1lVG9PcHRpb25zIGRvIG5vdCBjb3JyZWN0bHkgcmVmbGVjdCB0aGUgc3RhdGUgb2ZcclxuXHRcdFx0Ly8gdGhlIGVsZW1lbnRcclxuXHRcdFx0KCBkYXRhLmFscmVhZHlFbmhhbmNlZCA/IGRhdGEub3B0aW9ucyA6IHt9ICksXHJcblxyXG5cdFx0XHQvLyBGaW5hbGx5LCBhcHBseSB0aGUgb3B0aW9ucyBwYXNzZWQgaW5cclxuXHRcdFx0b3B0aW9ucyApO1xyXG5cclxuXHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwgb24gdGhpcyBlbGVtZW50LCByZXRyaWV2ZSByZW1haW5pbmcgb3B0aW9uc1xyXG5cdFx0Ly8gZnJvbSB0aGUgZGF0YS1hdHRyaWJ1dGVzXHJcblx0XHRpZiAoICFkYXRhLmFscmVhZHlFbmhhbmNlZCApIHtcclxuXHRcdFx0Zm9yICggb3B0aW9uS2V5IGluIGRlZmF1bHRzICkge1xyXG5cdFx0XHRcdGlmICggcmV0cmlldmVkT3B0aW9uc1sgb3B0aW9uS2V5IF0gPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHJpZXZlZE9wdGlvbnNbIG9wdGlvbktleSBdID0gZ2V0QXR0ckZpeGVkKCBlbCxcclxuXHRcdFx0XHRcdFx0b3B0aW9uS2V5LnJlcGxhY2UoIGNhcGl0YWxMZXR0ZXJzUkUsIGNhbWVsQ2FzZTJIeXBoZW5hdGVkIClcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZWwuY2xhc3NOYW1lID0gb3B0aW9uc1RvQ2xhc3NlcyhcclxuXHJcblx0XHRcdC8vIE1lcmdlIGFsbCB0aGUgb3B0aW9ucyBhbmQgYXBwbHkgdGhlbSBhcyBjbGFzc2VzXHJcblx0XHRcdCQuZXh0ZW5kKCB7fSxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGRlZmF1bHRzIGZvcm0gdGhlIGJhc2lzXHJcblx0XHRcdFx0ZGVmYXVsdHMsXHJcblxyXG5cdFx0XHRcdC8vIEFkZCB0aGUgY29tcHV0ZWQgb3B0aW9uc1xyXG5cdFx0XHRcdHJldHJpZXZlZE9wdGlvbnNcclxuXHRcdFx0KSxcclxuXHJcblx0XHRcdC8vIC4uLiBhbmQgcmUtYXBwbHkgYW55IHVucmVjb2duaXplZCBjbGFzc2VzIHRoYXQgd2VyZSBmb3VuZFxyXG5cdFx0XHRkYXRhLnVua25vd25DbGFzc2VzICkuam9pbiggXCIgXCIgKTtcclxuXHRcdGlmICggZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImJ1dHRvblwiICkge1xyXG5cdFx0XHRlbC5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcImJ1dHRvblwiICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8vIGJ1dHRvbk1hcmt1cCBkZWZhdWx0cy4gVGhpcyBtdXN0IGJlIGEgY29tcGxldGUgc2V0LCBpLmUuLCBhIHZhbHVlIG11c3QgYmVcclxuLy8gZ2l2ZW4gaGVyZSBmb3IgYWxsIHJlY29nbml6ZWQgb3B0aW9uc1xyXG4kLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0cyA9IHtcclxuXHRpY29uOiBcIlwiLFxyXG5cdGljb25wb3M6IFwibGVmdFwiLFxyXG5cdHRoZW1lOiBudWxsLFxyXG5cdGlubGluZTogZmFsc2UsXHJcblx0c2hhZG93OiB0cnVlLFxyXG5cdGNvcm5lcnM6IHRydWUsXHJcblx0aWNvbnNoYWRvdzogZmFsc2UsIC8qIFRPRE86IFJlbW92ZSBpbiAxLjUuIE9wdGlvbiBkZXByZWNhdGVkIGluIDEuNC4gKi9cclxuXHRtaW5pOiBmYWxzZVxyXG59O1xyXG5cclxuJC5leHRlbmQoICQuZm4uYnV0dG9uTWFya3VwLCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcImE6anFtRGF0YShyb2xlPSdidXR0b24nKSwgLnVpLWJhciA+IGEsIC51aS1iYXIgPiA6anFtRGF0YShyb2xlPSdjb250cm9sZ3JvdXAnKSA+IGEsIGJ1dHRvbjpub3QoOmpxbURhdGEocm9sZT0nbmF2YmFyJykgYnV0dG9uKVwiXHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNvbnRyb2xncm91cFwiLCAkLmV4dGVuZCgge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0c2hhZG93OiBmYWxzZSxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRleGNsdWRlSW52aXNpYmxlOiB0cnVlLFxyXG5cdFx0dHlwZTogXCJ2ZXJ0aWNhbFwiLFxyXG5cdFx0bWluaTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRrZWVwTmF0aXZlID0gJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yKCk7XHJcblxyXG5cdFx0Ly8gUnVuIGJ1dHRvbm1hcmt1cFxyXG5cdFx0aWYgKCAkLmZuLmJ1dHRvbk1hcmt1cCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmZpbmQoICQuZm4uYnV0dG9uTWFya3VwLmluaXRTZWxlY3RvciApXHJcblx0XHRcdFx0Lm5vdCgga2VlcE5hdGl2ZSApXHJcblx0XHRcdFx0LmJ1dHRvbk1hcmt1cCgpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gRW5oYW5jZSBjaGlsZCB3aWRnZXRzXHJcblx0XHQkLmVhY2goIHRoaXMuX2NoaWxkV2lkZ2V0cywgJC5wcm94eSggZnVuY3Rpb24oIG51bWJlciwgd2lkZ2V0TmFtZSApIHtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZVsgd2lkZ2V0TmFtZSBdICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdFx0LmZpbmQoICQubW9iaWxlWyB3aWRnZXROYW1lIF0uaW5pdFNlbGVjdG9yIClcclxuXHRcdFx0XHRcdC5ub3QoIGtlZXBOYXRpdmUgKVsgd2lkZ2V0TmFtZSBdKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIHRoaXMgKSk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3VpOiBudWxsLFxyXG5cdFx0XHRfaW5pdGlhbFJlZnJlc2g6IHRydWVcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB7XHJcblx0XHRcdFx0Z3JvdXBMZWdlbmQ6IGVsZW0uY2hpbGRyZW4oIFwiLnVpLWNvbnRyb2xncm91cC1sYWJlbFwiICkuY2hpbGRyZW4oKSxcclxuXHRcdFx0XHRjaGlsZFdyYXBwZXI6IGVsZW0uY2hpbGRyZW4oIFwiLnVpLWNvbnRyb2xncm91cC1jb250cm9sc1wiIClcclxuXHRcdFx0fTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3VpID0gdGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRfY2hpbGRXaWRnZXRzOiBbIFwiY2hlY2tib3hyYWRpb1wiLCBcInNlbGVjdG1lbnVcIiwgXCJidXR0b25cIiBdLFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogXCJ1aS1ncm91cC10aGVtZS1cIiArIHZhbHVlICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHVpID0ge1xyXG5cdFx0XHRcdGdyb3VwTGVnZW5kOiBlbGVtLmNoaWxkcmVuKCBcImxlZ2VuZFwiICksXHJcblx0XHRcdFx0Y2hpbGRXcmFwcGVyOiBlbGVtXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29udHJvbGdyb3VwIFwiICtcclxuXHRcdFx0XHRcdFx0XCJ1aS1jb250cm9sZ3JvdXAtXCIgK1xyXG5cdFx0XHRcdFx0XHRcdCggb3B0cy50eXBlID09PSBcImhvcml6b250YWxcIiA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBvcHRzLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHRcdCggb3B0cy5jb3JuZXJzID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdFx0KCBvcHRzLm1pbmkgPyBcInVpLW1pbmkgXCIgOiBcIlwiICkgKVxyXG5cdFx0XHRcdFx0LndyYXBJbm5lciggXCI8ZGl2IFwiICtcclxuXHRcdFx0XHRcdFx0XCJjbGFzcz0ndWktY29udHJvbGdyb3VwLWNvbnRyb2xzIFwiICtcclxuXHRcdFx0XHRcdFx0XHQoIG9wdHMuc2hhZG93ID09PSB0cnVlID8gXCJ1aS1zaGFkb3dcIiA6IFwiXCIgKSArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdFx0XHQuY2hpbGRyZW4oKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGlmICggdWkuZ3JvdXBMZWdlbmQubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0JCggXCI8ZGl2IHJvbGU9J2hlYWRpbmcnIGNsYXNzPSd1aS1jb250cm9sZ3JvdXAtbGFiZWwnPjwvZGl2PlwiIClcclxuXHRcdFx0XHQuYXBwZW5kKCB1aS5ncm91cExlZ2VuZCApXHJcblx0XHRcdFx0LnByZXBlbmRUbyggZWxlbSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB1aTtcclxuXHR9LFxyXG5cclxuXHRfaW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgY2FsbFJlZnJlc2gsIHJldHVyblZhbHVlLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdC8vIE11c3QgaGF2ZSBvbmUgb2YgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbFxyXG5cdFx0aWYgKCBvcHRpb25zLnR5cGUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAtaG9yaXpvbnRhbCB1aS1jb250cm9sZ3JvdXAtdmVydGljYWxcIiApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbnRyb2xncm91cC1cIiArICggb3B0aW9ucy50eXBlID09PSBcImhvcml6b250YWxcIiA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiICkgKTtcclxuXHRcdFx0Y2FsbFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggdGhpcy5vcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIG9wdGlvbnMudGhlbWUgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl91aS5jaGlsZFdyYXBwZXIudG9nZ2xlQ2xhc3MoIFwidWktc2hhZG93XCIsIG9wdGlvbnMuc2hhZG93ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmV4Y2x1ZGVJbnZpc2libGUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmV4Y2x1ZGVJbnZpc2libGUgPSBvcHRpb25zLmV4Y2x1ZGVJbnZpc2libGU7XHJcblx0XHRcdGNhbGxSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm5WYWx1ZSA9IHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCBjYWxsUmVmcmVzaCApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH0sXHJcblxyXG5cdGNvbnRhaW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fdWkuY2hpbGRXcmFwcGVyO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyICRlbCA9IHRoaXMuY29udGFpbmVyKCksXHJcblx0XHRcdGVscyA9ICRlbC5maW5kKCBcIi51aS1idG5cIiApLm5vdCggXCIudWktc2xpZGVyLWhhbmRsZVwiICksXHJcblx0XHRcdGNyZWF0ZSA9IHRoaXMuX2luaXRpYWxSZWZyZXNoO1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5jaGVja2JveHJhZGlvICkge1xyXG5cdFx0XHQkZWwuZmluZCggXCI6bW9iaWxlLWNoZWNrYm94cmFkaW9cIiApLmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9hZGRGaXJzdExhc3RDbGFzc2VzKCBlbHMsXHJcblx0XHRcdHRoaXMub3B0aW9ucy5leGNsdWRlSW52aXNpYmxlID8gdGhpcy5fZ2V0VmlzaWJsZXMoIGVscywgY3JlYXRlICkgOiBlbHMsXHJcblx0XHRcdGNyZWF0ZSApO1xyXG5cdFx0dGhpcy5faW5pdGlhbFJlZnJlc2ggPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHQvLyBDYXZlYXQ6IElmIHRoZSBsZWdlbmQgaXMgbm90IHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgY29udHJvbGdyb3VwIGF0IGVuaGFuY2VcclxuXHQvLyB0aW1lLCBpdCB3aWxsIGJlIGFmdGVyIF9kZXN0cm95KCkuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHVpLCBidXR0b25zLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0dWkgPSB0aGlzLl91aTtcclxuXHRcdGJ1dHRvbnMgPSB0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbnRyb2xncm91cCBcIiArXHJcblx0XHRcdFx0XCJ1aS1jb250cm9sZ3JvdXAtaG9yaXpvbnRhbCB1aS1jb250cm9sZ3JvdXAtdmVydGljYWwgdWktY29ybmVyLWFsbCB1aS1taW5pIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggb3B0cy50aGVtZSApIClcclxuXHRcdFx0LmZpbmQoIFwiLnVpLWJ0blwiIClcclxuXHRcdFx0Lm5vdCggXCIudWktc2xpZGVyLWhhbmRsZVwiICk7XHJcblxyXG5cdFx0dGhpcy5fcmVtb3ZlRmlyc3RMYXN0Q2xhc3NlcyggYnV0dG9ucyApO1xyXG5cclxuXHRcdHVpLmdyb3VwTGVnZW5kLnVud3JhcCgpO1xyXG5cdFx0dWkuY2hpbGRXcmFwcGVyLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyApICk7XHJcblxyXG59KShqUXVlcnkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50b29sYmFyXCIsIHtcclxuXHRcdGluaXRTZWxlY3RvcjogXCI6anFtRGF0YShyb2xlPSdmb290ZXInKSwgOmpxbURhdGEocm9sZT0naGVhZGVyJylcIixcclxuXHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0XHRhZGRCYWNrQnRuOiBmYWxzZSxcclxuXHRcdFx0YmFja0J0blRoZW1lOiBudWxsLFxyXG5cdFx0XHRiYWNrQnRuVGV4dDogXCJCYWNrXCJcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBsZWZ0YnRuLCByaWdodGJ0bixcclxuXHRcdFx0XHRyb2xlID0gIHRoaXMuZWxlbWVudC5pcyggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkgPyBcImhlYWRlclwiIDogXCJmb290ZXJcIixcclxuXHRcdFx0XHRwYWdlID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApO1xyXG5cdFx0XHRpZiAoIHBhZ2UubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdHBhZ2UgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xyXG5cdFx0XHRcdFx0XCJwYWdlc2hvd1wiOiBcInJlZnJlc2hcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0cm9sZTogcm9sZSxcclxuXHRcdFx0XHRwYWdlOiBwYWdlLFxyXG5cdFx0XHRcdGxlZnRidG46IGxlZnRidG4sXHJcblx0XHRcdFx0cmlnaHRidG46IHJpZ2h0YnRuXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJyb2xlXCIsIHJvbGUgPT09IFwiaGVhZGVyXCIgPyBcImJhbm5lclwiIDogXCJjb250ZW50aW5mb1wiICkuYWRkQ2xhc3MoIFwidWktXCIgKyByb2xlICk7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0XHR0aGlzLl9zZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHRcdH0sXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG8gKSB7XHJcblx0XHRcdGlmICggby5hZGRCYWNrQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlQmFja0J1dHRvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby5iYWNrQnRuVGhlbWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHRcdC5maW5kKCBcIi51aS10b29sYmFyLWJhY2stYnRuXCIgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0biB1aS1idG4tXCIgKyBvLmJhY2tCdG5UaGVtZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby5iYWNrQnRuVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS10b29sYmFyLWJhY2stYnRuIC51aS1idG4tdGV4dFwiICkudGV4dCggby5iYWNrQnRuVGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHZhciBjdXJyZW50VGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0XHRcdG5ld1RoZW1lID0gby50aGVtZSA/IG8udGhlbWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJhci1cIiArIGN1cnJlbnRUaGVtZSApLmFkZENsYXNzKCBcInVpLWJhci1cIiArIG5ld1RoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvICk7XHJcblx0XHR9LFxyXG5cdFx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICkge1xyXG5cdFx0XHRcdHRoaXMuX2FkZEhlYWRlckJ1dHRvbkNsYXNzZXMoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICF0aGlzLnBhZ2UgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0UmVsYXRpdmUoKTtcclxuXHRcdFx0XHRpZiAoIHRoaXMucm9sZSA9PT0gXCJmb290ZXJcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuZWxlbWVudC5hcHBlbmRUbyggXCJib2R5XCIgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl91cGRhdGVCYWNrQnV0dG9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX2FkZEhlYWRpbmdDbGFzc2VzKCk7XHJcblx0XHRcdHRoaXMuX2J0bk1hcmt1cCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3dlIG9ubHkgd2FudCB0aGlzIHRvIHJ1biBvbiBub24gZml4ZWQgdG9vbGJhcnMgc28gbWFrZSBpdCBlYXN5IHRvIG92ZXJyaWRlXHJcblx0XHRfc2V0UmVsYXRpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCBcIltkYXRhLVwiKyAkLm1vYmlsZS5ucyArIFwicm9sZT0ncGFnZSddXCIgKS5jc3MoeyBcInBvc2l0aW9uXCI6IFwicmVsYXRpdmVcIiB9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQuIEFzIGZyb20gMS41IGJ1dHRvbiBjbGFzc2VzIGhhdmUgdG8gYmUgcHJlc2VudCBpbiB0aGUgbWFya3VwLlxyXG5cdFx0X2J0bk1hcmt1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5jaGlsZHJlbiggXCJhXCIgKVxyXG5cdFx0XHRcdC5maWx0ZXIoIFwiOm5vdChbZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdub25lJ10pXCIgKVxyXG5cdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZVwiLCBcImJ1dHRvblwiICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNyZWF0ZVwiICk7XHJcblx0XHR9LFxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQuIEFzIGZyb20gMS41IHVpLWJ0bi1sZWZ0L3JpZ2h0IGNsYXNzZXMgaGF2ZSB0byBiZSBwcmVzZW50IGluIHRoZSBtYXJrdXAuXHJcblx0XHRfYWRkSGVhZGVyQnV0dG9uQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBoZWFkZXJBbmNob3JzID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImEsIGJ1dHRvblwiICk7XHJcblxyXG5cdFx0XHQvLyBEbyBub3QgbWlzdGFrZSBhIGJhY2sgYnV0dG9uIGZvciBhIGxlZnQgdG9vbGJhciBidXR0b25cclxuXHRcdFx0dGhpcy5sZWZ0YnRuID0gaGVhZGVyQW5jaG9ycy5oYXNDbGFzcyggXCJ1aS1idG4tbGVmdFwiICkgJiZcclxuXHRcdFx0XHQhaGVhZGVyQW5jaG9ycy5oYXNDbGFzcyggXCJ1aS10b29sYmFyLWJhY2stYnRuXCIgKTtcclxuXHJcblx0XHRcdHRoaXMucmlnaHRidG4gPSBoZWFkZXJBbmNob3JzLmhhc0NsYXNzKCBcInVpLWJ0bi1yaWdodFwiICk7XHJcblxyXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHJpZ2h0IGJ1dHRvbnMgYW5kIGJhY2sgYnV0dG9uc1xyXG5cdFx0XHR0aGlzLmxlZnRidG4gPSB0aGlzLmxlZnRidG4gfHxcclxuXHRcdFx0XHRoZWFkZXJBbmNob3JzLmVxKCAwIClcclxuXHRcdFx0XHRcdC5ub3QoIFwiLnVpLWJ0bi1yaWdodCwudWktdG9vbGJhci1iYWNrLWJ0blwiIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tbGVmdFwiIClcclxuXHRcdFx0XHRcdC5sZW5ndGg7XHJcblxyXG5cdFx0XHR0aGlzLnJpZ2h0YnRuID0gdGhpcy5yaWdodGJ0biB8fCBoZWFkZXJBbmNob3JzLmVxKCAxICkuYWRkQ2xhc3MoIFwidWktYnRuLXJpZ2h0XCIgKS5sZW5ndGg7XHJcblx0XHR9LFxyXG5cdFx0X3VwZGF0ZUJhY2tCdXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgYmFja0J1dHRvbixcclxuXHRcdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRcdHRoZW1lID0gb3B0aW9ucy5iYWNrQnRuVGhlbWUgfHwgb3B0aW9ucy50aGVtZTtcclxuXHJcblx0XHRcdC8vIFJldHJpZXZlIHRoZSBiYWNrIGJ1dHRvbiBvciBjcmVhdGUgYSBuZXcsIGVtcHR5IG9uZVxyXG5cdFx0XHRiYWNrQnV0dG9uID0gdGhpcy5fYmFja0J1dHRvbiA9ICggdGhpcy5fYmFja0J1dHRvbiB8fCB7fSApO1xyXG5cclxuXHRcdFx0Ly8gV2UgYWRkIGEgYmFjayBidXR0b24gb25seSBpZiB0aGUgb3B0aW9uIHRvIGRvIHNvIGlzIG9uXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmFkZEJhY2tCdG4gJiZcclxuXHJcblx0XHRcdFx0XHQvLyBUaGlzIG11c3QgYWxzbyBiZSBhIGhlYWRlciB0b29sYmFyXHJcblx0XHRcdFx0XHR0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgJiZcclxuXHJcblx0XHRcdFx0XHQvLyBUaGVyZSBtdXN0IGJlIG11bHRpcGxlIHBhZ2VzIGluIHRoZSBET01cclxuXHRcdFx0XHRcdCQoIFwiLnVpLXBhZ2VcIiApLmxlbmd0aCA+IDEgJiZcclxuXHRcdFx0XHRcdCggdGhpcy5wYWdlID9cclxuXHJcblx0XHRcdFx0XHRcdC8vIElmIHRoZSB0b29sYmFyIGlzIGludGVybmFsIHRoZSBwYWdlJ3MgVVJMIG11c3QgZGlmZmVyIGZyb20gdGhlIGhhc2hcclxuXHRcdFx0XHRcdFx0KCB0aGlzLnBhZ2VbIDAgXS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ1cmxcIiApICE9PVxyXG5cdFx0XHRcdFx0XHRcdCQubW9iaWxlLnBhdGguc3RyaXBIYXNoKCBsb2NhdGlvbi5oYXNoICkgKSA6XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGlmIHRoZSB0b29sYmFyIGlzIGV4dGVybmFsIHRoZXJlIG11c3QgYmUgYXQgbGVhc3Qgb25lXHJcblx0XHRcdFx0XHRcdC8vIGhpc3RvcnkgaXRlbSB0byB3aGljaCBvbmUgY2FuIGdvIGJhY2tcclxuXHRcdFx0XHRcdFx0KCAkLm1vYmlsZS5uYXZpZ2F0ZSAmJiAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5ICYmXHJcblx0XHRcdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgKSApICYmXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlIHRvb2xiYXIgZG9lcyBub3QgaGF2ZSBhIGxlZnQgYnV0dG9uXHJcblx0XHRcdFx0XHQhdGhpcy5sZWZ0YnRuICkge1xyXG5cclxuXHRcdFx0XHQvLyBTa2lwIGJhY2sgYnV0dG9uIGNyZWF0aW9uIGlmIG9uZSBpcyBhbHJlYWR5IHByZXNlbnRcclxuXHRcdFx0XHRpZiAoICFiYWNrQnV0dG9uLmF0dGFjaGVkICkge1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrQnV0dG9uID0gYmFja0J1dHRvbi5lbGVtZW50ID0gKCBiYWNrQnV0dG9uLmVsZW1lbnQgfHxcclxuXHRcdFx0XHRcdFx0JCggXCI8YSByb2xlPSdidXR0b24nIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKTsnIFwiICtcclxuXHRcdFx0XHRcdFx0XHRcImNsYXNzPSd1aS1idG4gdWktY29ybmVyLWFsbCB1aS1zaGFkb3cgdWktYnRuLWxlZnQgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFx0KCB0aGVtZSA/IFwidWktYnRuLVwiICsgdGhlbWUgKyBcIiBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHRcdFx0XHRcInVpLXRvb2xiYXItYmFjay1idG4gdWktaWNvbi1jYXJhdC1sIHVpLWJ0bi1pY29uLWxlZnQnIFwiICtcclxuXHRcdFx0XHRcdFx0XHRcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsPSdiYWNrJz5cIiArIG9wdGlvbnMuYmFja0J0blRleHQgK1xyXG5cdFx0XHRcdFx0XHRcdFwiPC9hPlwiICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5wcmVwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHRcdFx0YmFja0J1dHRvbi5hdHRhY2hlZCA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIG5vdCBhZGRpbmcgYSBiYWNrIGJ1dHRvbiwgdGhlbiByZW1vdmUgdGhlIG9uZSBwcmVzZW50LCBpZiBhbnlcclxuXHRcdFx0fSBlbHNlIGlmICggYmFja0J1dHRvbi5lbGVtZW50ICkge1xyXG5cdFx0XHRcdGJhY2tCdXR0b24uZWxlbWVudC5kZXRhY2goKTtcclxuXHRcdFx0XHRiYWNrQnV0dG9uLmF0dGFjaGVkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRfYWRkSGVhZGluZ0NsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNlwiIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktdGl0bGVcIiApXHJcblx0XHRcdFx0Ly8gUmVnYXJkbGVzcyBvZiBoIGVsZW1lbnQgbnVtYmVyIGluIHNyYywgaXQgYmVjb21lcyBoMSBmb3IgdGhlIGVuaGFuY2VkIHBhZ2VcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHRcInJvbGVcIjogXCJoZWFkaW5nXCIsXHJcblx0XHRcdFx0XHRcImFyaWEtbGV2ZWxcIjogXCIxXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjdXJyZW50VGhlbWU7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNlwiIClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGl0bGVcIiApXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcclxuXHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxldmVsXCIgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJhLCBidXR0b25cIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0IHVpLWJ0biB1aS1zaGFkb3cgdWktY29ybmVyLWFsbFwiICk7XHJcblx0XHRcdFx0aWYgKCB0aGlzLmJhY2tCdXR0b24pIHtcclxuXHRcdFx0XHRcdHRoaXMuYmFja0J1dHRvbi5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGN1cnJlbnRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktYmFyLVwiICsgY3VycmVudFRoZW1lICk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktXCIgKyB0aGlzLnJvbGUgKS5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50b29sYmFyXCIsICQubW9iaWxlLnRvb2xiYXIsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0cG9zaXRpb246bnVsbCxcclxuXHRcdFx0dmlzaWJsZU9uUGFnZVNob3c6IHRydWUsXHJcblx0XHRcdGRpc2FibGVQYWdlWm9vbTogdHJ1ZSxcclxuXHRcdFx0dHJhbnNpdGlvbjogXCJzbGlkZVwiLCAvL2NhbiBiZSBub25lLCBmYWRlLCBzbGlkZSAoc2xpZGUgbWFwcyB0byBzbGlkZXVwIG9yIHNsaWRlZG93bilcclxuXHRcdFx0ZnVsbHNjcmVlbjogZmFsc2UsXHJcblx0XHRcdHRhcFRvZ2dsZTogdHJ1ZSxcclxuXHRcdFx0dGFwVG9nZ2xlQmxhY2tsaXN0OiBcImEsIGJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIC51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWQsIC51aS1mbGlwc3dpdGNoLCAudWktcG9wdXAsIC51aS1wYW5lbCwgLnVpLXBhbmVsLWRpc21pc3Mtb3BlblwiLFxyXG5cdFx0XHRoaWRlRHVyaW5nRm9jdXM6IFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3RcIixcclxuXHRcdFx0dXBkYXRlUGFnZVBhZGRpbmc6IHRydWUsXHJcblx0XHRcdHRyYWNrUGVyc2lzdGVudFRvb2xiYXJzOiB0cnVlLFxyXG5cclxuXHRcdFx0Ly8gQnJvd3NlciBkZXRlY3Rpb24hIFdlZWVlLCBoZXJlIHdlIGdvLi4uXHJcblx0XHRcdC8vIFVuZm9ydHVuYXRlbHksIHBvc2l0aW9uOmZpeGVkIGlzIGNvc3RseSwgbm90IHRvIG1lbnRpb24gcHJvYmFibHkgaW1wb3NzaWJsZSwgdG8gZmVhdHVyZS1kZXRlY3QgYWNjdXJhdGVseS5cclxuXHRcdFx0Ly8gU29tZSB0ZXN0cyBleGlzdCwgYnV0IHRoZXkgY3VycmVudGx5IHJldHVybiBmYWxzZSByZXN1bHRzIGluIGNyaXRpY2FsIGRldmljZXMgYW5kIGJyb3dzZXJzLCB3aGljaCBjb3VsZCBsZWFkIHRvIGEgYnJva2VuIGV4cGVyaWVuY2UuXHJcblx0XHRcdC8vIFRlc3RpbmcgZml4ZWQgcG9zaXRpb25pbmcgaXMgYWxzbyBwcmV0dHkgb2J0cnVzaXZlIHRvIHBhZ2UgbG9hZCwgcmVxdWlyaW5nIGluamVjdGVkIGVsZW1lbnRzIGFuZCBzY3JvbGxpbmcgdGhlIHdpbmRvd1xyXG5cdFx0XHQvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9uIHNlcnZlcyB0byBydWxlIG91dCBzb21lIHBvcHVsYXIgYnJvd3NlcnMgd2l0aCBrbm93biBmaXhlZC1wb3NpdGlvbmluZyBpc3N1ZXNcclxuXHRcdFx0Ly8gVGhpcyBpcyBhIHBsdWdpbiBvcHRpb24gbGlrZSBhbnkgb3RoZXIsIHNvIGZlZWwgZnJlZSB0byBpbXByb3ZlIG9yIG92ZXJ3cml0ZSBpdFxyXG5cdFx0XHRzdXBwb3J0QmxhY2tsaXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gISQuc3VwcG9ydC5maXhlZFBvc2l0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHR0aGlzLnBhZ2Vjb250YWluZXIgPSAkKCBcIjptb2JpbGUtcGFnZWNvbnRhaW5lclwiICk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgIXRoaXMub3B0aW9ucy5zdXBwb3J0QmxhY2tsaXN0KCkgKSB7XHJcblx0XHRcdFx0dGhpcy5fbWFrZUZpeGVkKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X21ha2VGaXhlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1cIisgdGhpcy5yb2xlICtcIi1maXhlZFwiICk7XHJcblx0XHRcdHRoaXMudXBkYXRlUGFnZVBhZGRpbmcoKTtcclxuXHRcdFx0dGhpcy5fYWRkVHJhbnNpdGlvbkNsYXNzKCk7XHJcblx0XHRcdHRoaXMuX2JpbmRQYWdlRXZlbnRzKCk7XHJcblx0XHRcdHRoaXMuX2JpbmRUb2dnbGVIYW5kbGVycygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG8gKSB7XHJcblx0XHRcdGlmICggby5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmIHRoaXMub3B0aW9ucy5wb3NpdGlvbiAhPT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdHRoaXMuX21ha2VGaXhlZCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgIXRoaXMub3B0aW9ucy5zdXBwb3J0QmxhY2tsaXN0KCkgKSB7XHJcblx0XHRcdFx0dmFyICRwYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6ICggJChcIi51aS1wYWdlLWFjdGl2ZVwiKS5sZW5ndGggPiAwICk/ICQoXCIudWktcGFnZS1hY3RpdmVcIik6ICQoXCIudWktcGFnZVwiKS5lcSgwKTtcclxuXHJcblx0XHRcdFx0aWYgKCBvLmZ1bGxzY3JlZW4gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0aWYgKCBvLmZ1bGxzY3JlZW4gKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1cIisgdGhpcy5yb2xlICtcIi1mdWxsc2NyZWVuXCIgKTtcclxuXHRcdFx0XHRcdFx0JHBhZ2UuYWRkQ2xhc3MoIFwidWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gSWYgbm90IGZ1bGxzY3JlZW4sIGFkZCBjbGFzcyB0byBwYWdlIHRvIHNldCB0b3Agb3IgYm90dG9tIHBhZGRpbmdcclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktXCIrIHRoaXMucm9sZSArXCItZnVsbHNjcmVlblwiICk7XHJcblx0XHRcdFx0XHRcdCRwYWdlLnJlbW92ZUNsYXNzKCBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCIgKS5hZGRDbGFzcyggXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlKyBcIi1maXhlZFwiICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3N1cGVyKG8pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfYWRkVHJhbnNpdGlvbkNsYXNzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRjbGFzcyA9IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uO1xyXG5cclxuXHRcdFx0aWYgKCB0Y2xhc3MgJiYgdGNsYXNzICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHQvLyB1c2UgYXBwcm9wcmlhdGUgc2xpZGUgZm9yIGhlYWRlciBvciBmb290ZXJcclxuXHRcdFx0XHRpZiAoIHRjbGFzcyA9PT0gXCJzbGlkZVwiICkge1xyXG5cdFx0XHRcdFx0dGNsYXNzID0gdGhpcy5lbGVtZW50Lmhhc0NsYXNzKCBcInVpLWhlYWRlclwiICkgPyBcInNsaWRlZG93blwiIDogXCJzbGlkZXVwXCI7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRjbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9iaW5kUGFnZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICk6IHRoaXMuZG9jdW1lbnQ7XHJcblx0XHRcdC8vcGFnZSBldmVudCBiaW5kaW5nc1xyXG5cdFx0XHQvLyBGaXhlZCB0b29sYmFycyByZXF1aXJlIHBhZ2Ugem9vbSB0byBiZSBkaXNhYmxlZCwgb3RoZXJ3aXNlIHVzYWJpbGl0eSBpc3N1ZXMgY3JvcCB1cFxyXG5cdFx0XHQvLyBUaGlzIG1ldGhvZCBpcyBtZWFudCB0byBkaXNhYmxlIHpvb20gd2hpbGUgYSBmaXhlZC1wb3NpdGlvbmVkIHRvb2xiYXIgcGFnZSBpcyB2aXNpYmxlXHJcblx0XHRcdHRoaXMuX29uKCBwYWdlICwge1xyXG5cdFx0XHRcdFwicGFnZWJlZm9yZXNob3dcIjogXCJfaGFuZGxlUGFnZUJlZm9yZVNob3dcIixcclxuXHRcdFx0XHRcIndlYmtpdEFuaW1hdGlvblN0YXJ0XCI6XCJfaGFuZGxlQW5pbWF0aW9uU3RhcnRcIixcclxuXHRcdFx0XHRcImFuaW1hdGlvbnN0YXJ0XCI6XCJfaGFuZGxlQW5pbWF0aW9uU3RhcnRcIixcclxuXHRcdFx0XHRcInVwZGF0ZWxheW91dFwiOiBcIl9oYW5kbGVBbmltYXRpb25TdGFydFwiLFxyXG5cdFx0XHRcdFwicGFnZXNob3dcIjogXCJfaGFuZGxlUGFnZVNob3dcIixcclxuXHRcdFx0XHRcInBhZ2ViZWZvcmVoaWRlXCI6IFwiX2hhbmRsZVBhZ2VCZWZvcmVIaWRlXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24oICkge1xyXG5cdFx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcclxuXHRcdFx0aWYgKCBvLmRpc2FibGVQYWdlWm9vbSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICFvLnZpc2libGVPblBhZ2VTaG93ICkge1xyXG5cdFx0XHRcdHRoaXMuaGlkZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVBbmltYXRpb25TdGFydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnVwZGF0ZVBhZ2VQYWRkaW5nICkge1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlUGFnZVBhZGRpbmcoICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiBcIi51aS1wYWdlLWFjdGl2ZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZVBhZ2VTaG93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy51cGRhdGVQYWdlUGFkZGluZyggKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6IFwiLnVpLXBhZ2UtYWN0aXZlXCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudXBkYXRlUGFnZVBhZGRpbmcgKSB7XHJcblx0XHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IFwidGhyb3R0bGVkcmVzaXplXCI6IFwidXBkYXRlUGFnZVBhZGRpbmdcIiB9ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZVBhZ2VCZWZvcmVIaWRlOiBmdW5jdGlvbiggZSwgdWkgKSB7XHJcblx0XHRcdHZhciBvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRcdHRoaXNGb290ZXIsIHRoaXNIZWFkZXIsIG5leHRGb290ZXIsIG5leHRIZWFkZXI7XHJcblxyXG5cdFx0XHRpZiAoIG8uZGlzYWJsZVBhZ2Vab29tICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLnVwZGF0ZVBhZ2VQYWRkaW5nICkge1xyXG5cdFx0XHRcdHRoaXMuX29mZiggdGhpcy53aW5kb3csIFwidGhyb3R0bGVkcmVzaXplXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvLnRyYWNrUGVyc2lzdGVudFRvb2xiYXJzICkge1xyXG5cdFx0XHRcdHRoaXNGb290ZXIgPSAkKCBcIi51aS1mb290ZXItZml4ZWQ6anFtRGF0YShpZClcIiwgdGhpcy5wYWdlICk7XHJcblx0XHRcdFx0dGhpc0hlYWRlciA9ICQoIFwiLnVpLWhlYWRlci1maXhlZDpqcW1EYXRhKGlkKVwiLCB0aGlzLnBhZ2UgKTtcclxuXHRcdFx0XHRuZXh0Rm9vdGVyID0gdGhpc0Zvb3Rlci5sZW5ndGggJiYgdWkubmV4dFBhZ2UgJiYgJCggXCIudWktZm9vdGVyLWZpeGVkOmpxbURhdGEoaWQ9J1wiICsgdGhpc0Zvb3Rlci5qcW1EYXRhKCBcImlkXCIgKSArIFwiJylcIiwgdWkubmV4dFBhZ2UgKSB8fCAkKCk7XHJcblx0XHRcdFx0bmV4dEhlYWRlciA9IHRoaXNIZWFkZXIubGVuZ3RoICYmIHVpLm5leHRQYWdlICYmICQoIFwiLnVpLWhlYWRlci1maXhlZDpqcW1EYXRhKGlkPSdcIiArIHRoaXNIZWFkZXIuanFtRGF0YSggXCJpZFwiICkgKyBcIicpXCIsIHVpLm5leHRQYWdlICkgfHwgJCgpO1xyXG5cclxuXHRcdFx0XHRpZiAoIG5leHRGb290ZXIubGVuZ3RoIHx8IG5leHRIZWFkZXIubGVuZ3RoICkge1xyXG5cclxuXHRcdFx0XHRcdG5leHRGb290ZXIuYWRkKCBuZXh0SGVhZGVyICkuYXBwZW5kVG8oICQubW9iaWxlLnBhZ2VDb250YWluZXIgKTtcclxuXHJcblx0XHRcdFx0XHR1aS5uZXh0UGFnZS5vbmUoIFwicGFnZXNob3dcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdG5leHRIZWFkZXIucHJlcGVuZFRvKCB0aGlzICk7XHJcblx0XHRcdFx0XHRcdG5leHRGb290ZXIuYXBwZW5kVG8oIHRoaXMgKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdmlzaWJsZTogdHJ1ZSxcclxuXHJcblx0XHQvLyBUaGlzIHdpbGwgc2V0IHRoZSBjb250ZW50IGVsZW1lbnQncyB0b3Agb3IgYm90dG9tIHBhZGRpbmcgZXF1YWwgdG8gdGhlIHRvb2xiYXIncyBoZWlnaHRcclxuXHRcdHVwZGF0ZVBhZ2VQYWRkaW5nOiBmdW5jdGlvbiggdGJQYWdlICkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdGhlYWRlciA9ICggdGhpcy5yb2xlID09PVwiaGVhZGVyXCIgKSxcclxuXHRcdFx0XHRwb3MgPSBwYXJzZUZsb2F0KCAkZWwuY3NzKCBoZWFkZXIgPyBcInRvcFwiIDogXCJib3R0b21cIiApICk7XHJcblxyXG5cdFx0XHQvLyBUaGlzIGJlaGF2aW9yIG9ubHkgYXBwbGllcyB0byBcImZpeGVkXCIsIG5vdCBcImZ1bGxzY3JlZW5cIlxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuICkgeyByZXR1cm47IH1cclxuXHRcdFx0Ly8gdGJQYWdlIGFyZ3VtZW50IGNhbiBiZSBhIFBhZ2Ugb2JqZWN0IG9yIGFuIGV2ZW50LCBpZiBjb21pbmcgZnJvbSB0aHJvdHRsZWQgcmVzaXplLlxyXG5cdFx0XHR0YlBhZ2UgPSAoIHRiUGFnZSAmJiB0YlBhZ2UudHlwZSA9PT0gdW5kZWZpbmVkICYmIHRiUGFnZSApIHx8IHRoaXMucGFnZSB8fCAkZWwuY2xvc2VzdCggXCIudWktcGFnZVwiICk7XHJcblx0XHRcdHRiUGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiBcIi51aS1wYWdlLWFjdGl2ZVwiO1xyXG5cdFx0XHQkKCB0YlBhZ2UgKS5jc3MoIFwicGFkZGluZy1cIiArICggaGVhZGVyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCIgKSwgJGVsLm91dGVySGVpZ2h0KCkgKyBwb3MgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3VzZVRyYW5zaXRpb246IGZ1bmN0aW9uKCBub3RyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciAkd2luID0gdGhpcy53aW5kb3csXHJcblx0XHRcdFx0JGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdHNjcm9sbCA9ICR3aW4uc2Nyb2xsVG9wKCksXHJcblx0XHRcdFx0ZWxIZWlnaHQgPSAkZWwuaGVpZ2h0KCksXHJcblx0XHRcdFx0cEhlaWdodCA9ICggISF0aGlzLnBhZ2UgKT8gJGVsLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmhlaWdodCgpOiQoXCIudWktcGFnZS1hY3RpdmVcIikuaGVpZ2h0KCksXHJcblx0XHRcdFx0dmlld3BvcnRIZWlnaHQgPSAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKTtcclxuXHJcblx0XHRcdHJldHVybiAhbm90cmFuc2l0aW9uICYmXHJcblx0XHRcdFx0KCB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiAmJiB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiAhPT0gXCJub25lXCIgJiZcclxuXHRcdFx0XHQoXHJcblx0XHRcdFx0XHQoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiAmJiAhdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4gJiYgc2Nyb2xsID4gZWxIZWlnaHQgKSB8fFxyXG5cdFx0XHRcdFx0KCB0aGlzLnJvbGUgPT09IFwiZm9vdGVyXCIgJiYgIXRoaXMub3B0aW9ucy5mdWxsc2NyZWVuICYmIHNjcm9sbCArIHZpZXdwb3J0SGVpZ2h0IDwgcEhlaWdodCAtIGVsSGVpZ2h0IClcclxuXHRcdFx0XHQpIHx8IHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuXHJcblx0XHRcdFx0KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2hvdzogZnVuY3Rpb24oIG5vdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyIGhpZGVDbGFzcyA9IFwidWktZml4ZWQtaGlkZGVuXCIsXHJcblx0XHRcdFx0JGVsID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl91c2VUcmFuc2l0aW9uKCBub3RyYW5zaXRpb24gKSApIHtcclxuXHRcdFx0XHQkZWxcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJvdXQgXCIgKyBoaWRlQ2xhc3MgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcImluXCIgKVxyXG5cdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0JGVsLnJlbW92ZUNsYXNzKCBcImluXCIgKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdCRlbC5yZW1vdmVDbGFzcyggaGlkZUNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fdmlzaWJsZSA9IHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGU6IGZ1bmN0aW9uKCBub3RyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciBoaWRlQ2xhc3MgPSBcInVpLWZpeGVkLWhpZGRlblwiLFxyXG5cdFx0XHRcdCRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHQvLyBpZiBpdCdzIGEgc2xpZGUgdHJhbnNpdGlvbiwgb3VyIG5ldyB0cmFuc2l0aW9ucyBuZWVkIHRoZSByZXZlcnNlIGNsYXNzIGFzIHdlbGwgdG8gc2xpZGUgb3V0d2FyZFxyXG5cdFx0XHRcdG91dGNsYXNzID0gXCJvdXRcIiArICggdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwic2xpZGVcIiA/IFwiIHJldmVyc2VcIiA6IFwiXCIgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5fdXNlVHJhbnNpdGlvbiggbm90cmFuc2l0aW9uICkgKSB7XHJcblx0XHRcdFx0JGVsXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIG91dGNsYXNzIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJpblwiIClcclxuXHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0JGVsLmFkZENsYXNzKCBoaWRlQ2xhc3MgKS5yZW1vdmVDbGFzcyggb3V0Y2xhc3MgKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdCRlbC5hZGRDbGFzcyggaGlkZUNsYXNzICkucmVtb3ZlQ2xhc3MoIG91dGNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fdmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzWyB0aGlzLl92aXNpYmxlID8gXCJoaWRlXCIgOiBcInNob3dcIiBdKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9iaW5kVG9nZ2xlSGFuZGxlcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0byA9IHNlbGYub3B0aW9ucyxcclxuXHRcdFx0XHRkZWxheVNob3csIGRlbGF5SGlkZSxcclxuXHRcdFx0XHRpc1Zpc2libGUgPSB0cnVlLFxyXG5cdFx0XHRcdHBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogJChcIi51aS1wYWdlXCIpO1xyXG5cclxuXHRcdFx0Ly8gdGFwIHRvZ2dsZVxyXG5cdFx0XHRwYWdlXHJcblx0XHRcdFx0LmJpbmQoIFwidmNsaWNrXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0aWYgKCBvLnRhcFRvZ2dsZSAmJiAhJCggZS50YXJnZXQgKS5jbG9zZXN0KCBvLnRhcFRvZ2dsZUJsYWNrbGlzdCApLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi50b2dnbGUoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5iaW5kKCBcImZvY3VzaW4gZm9jdXNvdXRcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHQvL3RoaXMgaGlkZXMgdGhlIHRvb2xiYXJzIG9uIGEga2V5Ym9hcmQgcG9wIHRvIGdpdmUgbW9yZSBzY3JlZW4gcm9vbSBhbmQgcHJldmVudCBpb3MgYnVnIHdoaWNoXHJcblx0XHRcdFx0XHQvL3Bvc2l0aW9ucyBmaXhlZCB0b29sYmFycyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY3JlZW4gb24gcG9wIGlmIHRoZSBpbnB1dCBpcyBuZWFyIHRoZSB0b3Agb3JcclxuXHRcdFx0XHRcdC8vYm90dG9tIG9mIHRoZSBzY3JlZW4gYWRkcmVzc2VzIGlzc3VlcyAjNDQxMCBGb290ZXIgbmF2YmFyIG1vdmVzIHVwIHdoZW4gY2xpY2tpbmcgb24gYSB0ZXh0Ym94IGluIGFuIEFuZHJvaWQgZW52aXJvbm1lbnRcclxuXHRcdFx0XHRcdC8vYW5kIGlzc3VlICM0MTEzIEhlYWRlciBhbmQgZm9vdGVyIGNoYW5nZSB0aGVpciBwb3NpdGlvbiBhZnRlciBrZXlib2FyZCBwb3B1cCAtIGlPU1xyXG5cdFx0XHRcdFx0Ly9hbmQgaXNzdWUgIzQ0MTAgRm9vdGVyIG5hdmJhciBtb3ZlcyB1cCB3aGVuIGNsaWNraW5nIG9uIGEgdGV4dGJveCBpbiBhbiBBbmRyb2lkIGVudmlyb25tZW50XHJcblx0XHRcdFx0XHRpZiAoIHNjcmVlbi53aWR0aCA8IDEwMjUgJiYgJCggZS50YXJnZXQgKS5pcyggby5oaWRlRHVyaW5nRm9jdXMgKSAmJiAhJCggZS50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIiApLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0Ly9GaXggZm9yIGlzc3VlICM0NzI0IE1vdmluZyB0aHJvdWdoIGZvcm0gaW4gTW9iaWxlIFNhZmFyaSB3aXRoIFwiTmV4dFwiIGFuZCBcIlByZXZpb3VzXCIgc3lzdGVtXHJcblx0XHRcdFx0XHRcdC8vY29udHJvbHMgY2F1c2VzIGZpeGVkIHBvc2l0aW9uLCB0YXAtdG9nZ2xlIGZhbHNlIEhlYWRlciB0byByZXZlYWwgaXRzZWxmXHJcblx0XHRcdFx0XHRcdC8vIGlzVmlzaWJsZSBpbnN0ZWFkIG9mIHNlbGYuX3Zpc2libGUgYmVjYXVzZSB0aGUgZm9jdXNpbiBhbmQgZm9jdXNvdXQgZXZlbnRzIGZpcmUgdHdpY2UgYXQgdGhlIHNhbWUgdGltZVxyXG5cdFx0XHRcdFx0XHQvLyBBbHNvIHVzZSBhIGRlbGF5IGZvciBoaWRpbmcgdGhlIHRvb2xiYXJzIGJlY2F1c2Ugb24gQW5kcm9pZCBuYXRpdmUgYnJvd3NlciBmb2N1c2luIGlzIGRpcmVjbHR5IGZvbGxvd2VkXHJcblx0XHRcdFx0XHRcdC8vIGJ5IGEgZm9jdXNvdXQgd2hlbiBhIG5hdGl2ZSBzZWxlY3RzIG9wZW5zIGFuZCB0aGUgb3RoZXIgd2F5IGFyb3VuZCB3aGVuIGl0IGNsb3Nlcy5cclxuXHRcdFx0XHRcdFx0aWYgKCBlLnR5cGUgPT09IFwiZm9jdXNvdXRcIiAmJiAhaXNWaXNpYmxlICkge1xyXG5cdFx0XHRcdFx0XHRcdGlzVmlzaWJsZSA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0Ly93YWl0IGZvciB0aGUgc3RhY2sgdG8gdW53aW5kIGFuZCBzZWUgaWYgd2UgaGF2ZSBqdW1wZWQgdG8gYW5vdGhlciBpbnB1dFxyXG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCggZGVsYXlIaWRlICk7XHJcblx0XHRcdFx0XHRcdFx0ZGVsYXlTaG93ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnNob3coKTtcclxuXHRcdFx0XHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGUudHlwZSA9PT0gXCJmb2N1c2luXCIgJiYgISFpc1Zpc2libGUgKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly9pZiB3ZSBoYXZlIGp1bXBlZCB0byBhbm90aGVyIGlucHV0IGNsZWFyIHRoZSB0aW1lIG91dCB0byBjYW5jZWwgdGhlIHNob3cuXHJcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBkZWxheVNob3cgKTtcclxuXHRcdFx0XHRcdFx0XHRpc1Zpc2libGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRkZWxheUhpZGUgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuaGlkZSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0UmVsYXRpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiggdGhpcy5vcHRpb25zLnBvc2l0aW9uICE9PSBcImZpeGVkXCIgKXtcclxuXHRcdFx0XHQkKCBcIltkYXRhLVwiKyAkLm1vYmlsZS5ucyArIFwicm9sZT0ncGFnZSddXCIgKS5jc3MoeyBcInBvc2l0aW9uXCI6IFwicmVsYXRpdmVcIiB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWdlQ2xhc3NlcywgdG9vbGJhckNsYXNzZXMsIGhhc0ZpeGVkLCBoZWFkZXIsIGhhc0Z1bGxzY3JlZW4sXHJcblx0XHRcdFx0cGFnZSA9IHRoaXMucGFnZWNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImdldEFjdGl2ZVBhZ2VcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHRoYXNGaXhlZCA9ICQoICBcImJvZHk+LnVpLVwiICsgdGhpcy5yb2xlICsgXCItZml4ZWRcIiApXHJcblx0XHRcdFx0XHRcdFx0LmFkZCggcGFnZS5maW5kKCBcIi51aS1cIiArIHRoaXMub3B0aW9ucy5yb2xlICsgXCItZml4ZWRcIiApIClcclxuXHRcdFx0XHRcdFx0XHQubm90KCB0aGlzLmVsZW1lbnQgKS5sZW5ndGggPiAwO1xyXG5cdFx0XHRcdGhhc0Z1bGxzY3JlZW4gPSAkKCAgXCJib2R5Pi51aS1cIiArIHRoaXMucm9sZSArIFwiLWZpeGVkXCIgKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGQoIHBhZ2UuZmluZCggXCIudWktXCIgKyB0aGlzLm9wdGlvbnMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIiApIClcclxuXHRcdFx0XHRcdFx0XHQubm90KCB0aGlzLmVsZW1lbnQgKS5sZW5ndGggPiAwO1xyXG5cdFx0XHRcdHRvb2xiYXJDbGFzc2VzID0gIFwidWktaGVhZGVyLWZpeGVkIHVpLWZvb3Rlci1maXhlZCB1aS1oZWFkZXItZnVsbHNjcmVlbiBpbiBvdXRcIiArXHJcblx0XHRcdFx0XHRcIiB1aS1mb290ZXItZnVsbHNjcmVlbiBmYWRlIHNsaWRlZG93biBzbGlkZXVwIHVpLWZpeGVkLWhpZGRlblwiO1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggdG9vbGJhckNsYXNzZXMgKTtcclxuXHRcdFx0XHRpZiAoICFoYXNGdWxsc2NyZWVuICkge1xyXG5cdFx0XHRcdFx0cGFnZUNsYXNzZXMgPSBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggIWhhc0ZpeGVkICkge1xyXG5cdFx0XHRcdFx0aGVhZGVyID0gdGhpcy5yb2xlID09PSBcImhlYWRlclwiO1xyXG5cdFx0XHRcdFx0cGFnZUNsYXNzZXMgKz0gXCIgdWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZpeGVkXCI7XHJcblx0XHRcdFx0XHRwYWdlLmNzcyggXCJwYWRkaW5nLVwiICsgKCBoZWFkZXIgPyBcInRvcFwiIDogXCJib3R0b21cIiApLCBcIlwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHBhZ2UucmVtb3ZlQ2xhc3MoIHBhZ2VDbGFzc2VzICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50b29sYmFyXCIsICQubW9iaWxlLnRvb2xiYXIsIHtcclxuXHJcblx0XHRfbWFrZUZpeGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0dGhpcy5fd29ya2Fyb3VuZHMoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9jaGVjayB0aGUgYnJvd3NlciBhbmQgdmVyc2lvbiBhbmQgcnVuIG5lZWRlZCB3b3JrYXJvdW5kc1xyXG5cdFx0X3dvcmthcm91bmRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdFx0cGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0sXHJcblx0XHRcdC8vIFJlbmRlcmluZyBlbmdpbmUgaXMgV2Via2l0LCBhbmQgY2FwdHVyZSBtYWpvciB2ZXJzaW9uXHJcblx0XHRcdHdrbWF0Y2ggPSB1YS5tYXRjaCggL0FwcGxlV2ViS2l0XFwvKFswLTldKykvICksXHJcblx0XHRcdHdrdmVyc2lvbiA9ICEhd2ttYXRjaCAmJiB3a21hdGNoWyAxIF0sXHJcblx0XHRcdG9zID0gbnVsbCxcclxuXHRcdFx0c2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vc2V0IHRoZSBvcyB3ZSBhcmUgd29ya2luZyBpbiBpZiBpdCBkb3NlbnQgbWF0Y2ggb25lIHdpdGggd29ya2Fyb3VuZHMgcmV0dXJuXHJcblx0XHRcdGlmICggcGxhdGZvcm0uaW5kZXhPZiggXCJpUGhvbmVcIiApID4gLTEgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUGFkXCIgKSA+IC0xICB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQb2RcIiApID4gLTEgKSB7XHJcblx0XHRcdFx0b3MgPSBcImlvc1wiO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB1YS5pbmRleE9mKCBcIkFuZHJvaWRcIiApID4gLTEgKSB7XHJcblx0XHRcdFx0b3MgPSBcImFuZHJvaWRcIjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9jaGVjayBvcyB2ZXJzaW9uIGlmIGl0IGRvc2VudCBtYXRjaCBvbmUgd2l0aCB3b3JrYXJvdW5kcyByZXR1cm5cclxuXHRcdFx0aWYgKCBvcyA9PT0gXCJpb3NcIiApIHtcclxuXHRcdFx0XHQvL2lPUyAgd29ya2Fyb3VuZHNcclxuXHRcdFx0XHRzZWxmLl9iaW5kU2Nyb2xsV29ya2Fyb3VuZCgpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBvcyA9PT0gXCJhbmRyb2lkXCIgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCApIHtcclxuXHRcdFx0XHQvL0FuZHJvaWQgMi4zIHJ1biBhbGwgQW5kcm9pZCAyLjMgd29ya2Fyb3VuZFxyXG5cdFx0XHRcdHNlbGYuX2JpbmRTY3JvbGxXb3JrYXJvdW5kKCk7XHJcblx0XHRcdFx0c2VsZi5fYmluZExpc3RUaHVtYldvcmthcm91bmQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9VdGlsaXR5IGNsYXNzIGZvciBjaGVja2luZyBoZWFkZXIgYW5kIGZvb3RlciBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gdmlld3BvcnRcclxuXHRcdF92aWV3cG9ydE9mZnNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0aGVhZGVyID0gJGVsLmhhc0NsYXNzKCBcInVpLWhlYWRlclwiICksXHJcblx0XHRcdFx0b2Zmc2V0ID0gTWF0aC5hYnMoICRlbC5vZmZzZXQoKS50b3AgLSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKSApO1xyXG5cdFx0XHRpZiAoICFoZWFkZXIgKSB7XHJcblx0XHRcdFx0b2Zmc2V0ID0gTWF0aC5yb3VuZCggb2Zmc2V0IC0gdGhpcy53aW5kb3cuaGVpZ2h0KCkgKyAkZWwub3V0ZXJIZWlnaHQoKSApIC0gNjA7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG9mZnNldDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9iaW5kIGV2ZW50cyBmb3IgX3RyaWdnZXJSZWRyYXcoKSBmdW5jdGlvblxyXG5cdFx0X2JpbmRTY3JvbGxXb3JrYXJvdW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL2JpbmQgdG8gc2Nyb2xsc3RvcCBhbmQgY2hlY2sgaWYgdGhlIHRvb2xiYXJzIGFyZSBjb3JyZWN0bHkgcG9zaXRpb25lZFxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgc2Nyb2xsc3RvcDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHZpZXdwb3J0T2Zmc2V0ID0gc2VsZi5fdmlld3BvcnRPZmZzZXQoKTtcclxuXHRcdFx0XHQvL2NoZWNrIGlmIHRoZSBoZWFkZXIgaXMgdmlzaWJsZSBhbmQgaWYgaXRzIGluIHRoZSByaWdodCBwbGFjZVxyXG5cdFx0XHRcdGlmICggdmlld3BvcnRPZmZzZXQgPiAyICYmIHNlbGYuX3Zpc2libGUgKSB7XHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyUmVkcmF3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vdGhpcyBhZGRyZXNzZXMgaXNzdWUgIzQyNTAgUGVyc2lzdGVudCBmb290ZXIgaW5zdGFiaWxpdHkgaW4gdjEuMSB3aXRoIGxvbmcgc2VsZWN0IGxpc3RzIGluIEFuZHJvaWQgMi4zLjNcclxuXHRcdC8vYW5kIGlzc3VlICMzNzQ4IEFuZHJvaWQgMi54OiBQYWdlIHRyYW5zaXRpb25zIGJyb2tlbiB3aGVuIGZpeGVkIHRvb2xiYXJzIHVzZWRcclxuXHRcdC8vdGhlIGFic29sdXRlbHkgcG9zaXRpb25lZCB0aHVtYm5haWwgaW4gYSBsaXN0IHZpZXcgY2F1c2VzIHByb2JsZW1zIHdpdGggZml4ZWQgcG9zaXRpb24gYnV0dG9ucyBhYm92ZSBpbiBhIG5hdiBiYXJcclxuXHRcdC8vc2V0dGluZyB0aGUgbGkncyB0byAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDAsMCk7IHNvbHZlcyB0aGlzIHByb2JsZW0gdG8gYXZvaWRlIHBvdGVudGlhbCBpc3N1ZXMgaW4gb3RoZXJcclxuXHRcdC8vcGxhdGZvcm1zIHdlIHNjb3BlIHRoaXMgd2l0aCB0aGUgY2xhc3MgdWktYW5kcm9pZC0yeC1maXhcclxuXHRcdF9iaW5kTGlzdFRodW1iV29ya2Fyb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5hZGRDbGFzcyggXCJ1aS1hbmRyb2lkLTJ4LWZpeGVkXCIgKTtcclxuXHRcdH0sXHJcblx0XHQvL3RoaXMgYWRkcmVzc2VzIGlzc3VlcyAjNDMzNyBGaXhlZCBoZWFkZXIgcHJvYmxlbSBhZnRlciBzY3JvbGxpbmcgY29udGVudCBvbiBpT1MgYW5kIEFuZHJvaWRcclxuXHRcdC8vYW5kIGRldmljZSBidWdzIHByb2plY3QgaXNzdWUgIzEgRm9ybSBlbGVtZW50cyBjYW4gbG9zZSBjbGljayBoaXQgYXJlYSBpbiBwb3NpdGlvbjogZml4ZWQgY29udGFpbmVycy5cclxuXHRcdC8vdGhpcyBhbHNvIGFkZHJlc3NlcyBub3Qgb24gZml4ZWQgdG9vbGJhcnMgcGFnZSBpbiBkb2NzXHJcblx0XHQvL2FkZGluZyAxcHggb2YgcGFkZGluZyB0byB0aGUgYm90dG9tIHRoZW4gcmVtb3ZpbmcgaXQgY2F1c2VzIGEgXCJyZWRyYXdcIlxyXG5cdFx0Ly93aGljaCBwb3NpdGlvbnMgdGhlIHRvb2xiYXJzIGNvcnJlY3RseSAodGhleSB3aWxsIGFsd2F5cyBiZSB2aXN1YWxseSBjb3JyZWN0KVxyXG5cdFx0X3RyaWdnZXJSZWRyYXc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFkZGluZ0JvdHRvbSA9IHBhcnNlRmxvYXQoICQoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5jc3MoIFwicGFkZGluZy1ib3R0b21cIiApICk7XHJcblx0XHRcdC8vdHJpZ2dlciBwYWdlIHJlZHJhdyB0byBmaXggaW5jb3JyZWN0bHkgcG9zaXRpb25lZCBmaXhlZCBlbGVtZW50c1xyXG5cdFx0XHQkKCBcIi51aS1wYWdlLWFjdGl2ZVwiICkuY3NzKCBcInBhZGRpbmctYm90dG9tXCIsICggcGFkZGluZ0JvdHRvbSArIDEgKSArIFwicHhcIiApO1xyXG5cdFx0XHQvL2lmIHRoZSBwYWRkaW5nIGlzIHJlc2V0IHdpdGggb3V0IGEgdGltZW91dCB0aGUgcmVwb3NpdGlvbiB3aWxsIG5vdCBvY2N1cmUuXHJcblx0XHRcdC8vdGhpcyBpcyBpbmRlcGVuZGFudCBvZiBKUU0gdGhlIGJyb3dzZXIgc2VlbXMgdG8gbmVlZCB0aGUgdGltZSB0byByZWFjdC5cclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggXCIudWktcGFnZS1hY3RpdmVcIiApLmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiLCBwYWRkaW5nQm90dG9tICsgXCJweFwiICk7XHJcblx0XHRcdH0sIDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdC8vUmVtb3ZlIHRoZSBjbGFzcyB3ZSBhZGRlZCB0byB0aGUgcGFnZSBwcmV2aW91c2x5IGluIGFuZHJvaWQgMi54XHJcblx0XHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlLWFjdGl2ZVwiICkucmVtb3ZlQ2xhc3MoIFwidWktYW5kcm9pZC0yeC1maXhcIiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbiggZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBpZUhhY2sgPSAoICQubW9iaWxlLmJyb3dzZXIub2xkSUUgJiYgJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSA8PSA4ICksXHJcblx0dWlUZW1wbGF0ZSA9ICQoXHJcblx0XHRcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWFycm93LWd1aWRlJz48L2Rpdj5cIiArXHJcblx0XHRcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWFycm93LWNvbnRhaW5lclwiICsgKCBpZUhhY2sgPyBcIiBpZVwiIDogXCJcIiApICsgXCInPlwiICtcclxuXHRcdFx0XCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1hcnJvdyc+PC9kaXY+XCIgK1xyXG5cdFx0XCI8L2Rpdj5cIlxyXG5cdCk7XHJcblxyXG5mdW5jdGlvbiBnZXRBcnJvdygpIHtcclxuXHR2YXIgY2xvbmUgPSB1aVRlbXBsYXRlLmNsb25lKCksXHJcblx0XHRnZCA9IGNsb25lLmVxKCAwICksXHJcblx0XHRjdCA9IGNsb25lLmVxKCAxICksXHJcblx0XHRhciA9IGN0LmNoaWxkcmVuKCk7XHJcblxyXG5cdHJldHVybiB7IGFyRWxzOiBjdC5hZGQoIGdkICksIGdkOiBnZCwgY3Q6IGN0LCBhcjogYXIgfTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBvcHVwXCIsICQubW9iaWxlLnBvcHVwLCB7XHJcblx0b3B0aW9uczoge1xyXG5cclxuXHRcdGFycm93OiBcIlwiXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXIsXHJcblx0XHRcdHJldCA9IHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXJyb3cgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmFycm93ID0gYXIgPSB0aGlzLl9hZGRBcnJvdygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0X2FkZEFycm93OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGVtZSxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0YXIgPSBnZXRBcnJvdygpO1xyXG5cclxuXHRcdHRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb3B0cy50aGVtZSApO1xyXG5cdFx0YXIuYXIuYWRkQ2xhc3MoIHRoZW1lICsgKCBvcHRzLnNoYWRvdyA/IFwiIHVpLW92ZXJsYXktc2hhZG93XCIgOiBcIlwiICkgKTtcclxuXHRcdGFyLmFyRWxzLmhpZGUoKS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblxyXG5cdFx0cmV0dXJuIGFyO1xyXG5cdH0sXHJcblxyXG5cdF91bmVuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCBhciApIHtcclxuXHRcdFx0YXIuYXJFbHMucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gUHJldGVuZCB0byBzaG93IGFuIGFycm93IGRlc2NyaWJlZCBieSBAcCBhbmQgQGRpciBhbmQgY2FsY3VsYXRlIHRoZVxyXG5cdC8vIGRpc3RhbmNlIGZyb20gdGhlIGRlc2lyZWQgcG9pbnQuIElmIGEgYmVzdC1kaXN0YW5jZSBpcyBwYXNzZWQgaW4sIHJldHVyblxyXG5cdC8vIHRoZSBtaW5pbXVtIG9mIHRoZSBvbmUgcGFzc2VkIGluIGFuZCB0aGUgb25lIGNhbGN1bGF0ZWQuXHJcblx0X3RyeUFuQXJyb3c6IGZ1bmN0aW9uKCBwLCBkaXIsIGRlc2lyZWQsIHMsIGJlc3QgKSB7XHJcblx0XHR2YXIgcmVzdWx0LCByLCBkaWZmLCBkZXNpcmVkRm9yQXJyb3cgPSB7fSwgdGlwID0ge307XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGFycm93IGhhcyBubyB3aWdnbGUgcm9vbSBhbG9uZyB0aGUgZWRnZSBvZiB0aGUgcG9wdXAsIGl0IGNhbm5vdFxyXG5cdFx0Ly8gYmUgZGlzcGxheWVkIGFsb25nIHRoZSByZXF1ZXN0ZWQgZWRnZSB3aXRob3V0IGl0IHN0aWNraW5nIG91dC5cclxuXHRcdGlmICggcy5hckZ1bGxbIHAuZGltS2V5IF0gPiBzLmd1aWRlRGltc1sgcC5kaW1LZXkgXSApIHtcclxuXHRcdFx0cmV0dXJuIGJlc3Q7XHJcblx0XHR9XHJcblxyXG5cdFx0ZGVzaXJlZEZvckFycm93WyBwLmZzdCBdID0gZGVzaXJlZFsgcC5mc3QgXSArXHJcblx0XHRcdCggcy5hckhhbGZbIHAub0RpbUtleSBdICsgcy5tZW51SGFsZlsgcC5vRGltS2V5IF0gKSAqIHAub2Zmc2V0RmFjdG9yIC1cclxuXHRcdFx0cy5jb250ZW50Qm94WyBwLmZzdCBdICsgKCBzLmNsYW1wSW5mby5tZW51U2l6ZVsgcC5vRGltS2V5IF0gLSBzLmNvbnRlbnRCb3hbIHAub0RpbUtleSBdICkgKiBwLmFycm93T2Zmc2V0RmFjdG9yO1xyXG5cdFx0ZGVzaXJlZEZvckFycm93WyBwLnNuZCBdID0gZGVzaXJlZFsgcC5zbmQgXTtcclxuXHJcblx0XHRyZXN1bHQgPSBzLnJlc3VsdCB8fCB0aGlzLl9jYWxjdWxhdGVGaW5hbExvY2F0aW9uKCBkZXNpcmVkRm9yQXJyb3csIHMuY2xhbXBJbmZvICk7XHJcblx0XHRyID0geyB4OiByZXN1bHQubGVmdCwgeTogcmVzdWx0LnRvcCB9O1xyXG5cclxuXHRcdHRpcFsgcC5mc3QgXSA9IHJbIHAuZnN0IF0gKyBzLmNvbnRlbnRCb3hbIHAuZnN0IF0gKyBwLnRpcE9mZnNldDtcclxuXHRcdHRpcFsgcC5zbmQgXSA9IE1hdGgubWF4KCByZXN1bHRbIHAucHJvcCBdICsgcy5ndWlkZU9mZnNldFsgcC5wcm9wIF0gKyBzLmFySGFsZlsgcC5kaW1LZXkgXSxcclxuXHRcdFx0TWF0aC5taW4oIHJlc3VsdFsgcC5wcm9wIF0gKyBzLmd1aWRlT2Zmc2V0WyBwLnByb3AgXSArIHMuZ3VpZGVEaW1zWyBwLmRpbUtleSBdIC0gcy5hckhhbGZbIHAuZGltS2V5IF0sXHJcblx0XHRcdFx0ZGVzaXJlZFsgcC5zbmQgXSApICk7XHJcblxyXG5cdFx0ZGlmZiA9IE1hdGguYWJzKCBkZXNpcmVkLnggLSB0aXAueCApICsgTWF0aC5hYnMoIGRlc2lyZWQueSAtIHRpcC55ICk7XHJcblx0XHRpZiAoICFiZXN0IHx8IGRpZmYgPCBiZXN0LmRpZmYgKSB7XHJcblx0XHRcdC8vIENvbnZlcnQgdGlwIG9mZnNldCB0byBjb29yZGluYXRlcyBpbnNpZGUgdGhlIHBvcHVwXHJcblx0XHRcdHRpcFsgcC5zbmQgXSAtPSBzLmFySGFsZlsgcC5kaW1LZXkgXSArIHJlc3VsdFsgcC5wcm9wIF0gKyBzLmNvbnRlbnRCb3hbIHAuc25kIF07XHJcblx0XHRcdGJlc3QgPSB7IGRpcjogZGlyLCBkaWZmOiBkaWZmLCByZXN1bHQ6IHJlc3VsdCwgcG9zUHJvcDogcC5wcm9wLCBwb3NWYWw6IHRpcFsgcC5zbmQgXSB9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBiZXN0O1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQbGFjZW1lbnRTdGF0ZTogZnVuY3Rpb24oIGNsYW1wICkge1xyXG5cdFx0dmFyIG9mZnNldCwgZ2RPZmZzZXQsXHJcblx0XHRcdGFyID0gdGhpcy5fdWkuYXJyb3csXHJcblx0XHRcdHN0YXRlID0ge1xyXG5cdFx0XHRcdGNsYW1wSW5mbzogdGhpcy5fY2xhbXBQb3B1cFdpZHRoKCAhY2xhbXAgKSxcclxuXHRcdFx0XHRhckZ1bGw6IHsgY3g6IGFyLmN0LndpZHRoKCksIGN5OiBhci5jdC5oZWlnaHQoKSB9LFxyXG5cdFx0XHRcdGd1aWRlRGltczogeyBjeDogYXIuZ2Qud2lkdGgoKSwgY3k6IGFyLmdkLmhlaWdodCgpIH0sXHJcblx0XHRcdFx0Z3VpZGVPZmZzZXQ6IGFyLmdkLm9mZnNldCgpXHJcblx0XHRcdH07XHJcblxyXG5cdFx0b2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpO1xyXG5cclxuXHRcdGFyLmdkLmNzcyggeyBsZWZ0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAgfSApO1xyXG5cdFx0Z2RPZmZzZXQgPSBhci5nZC5vZmZzZXQoKTtcclxuXHRcdHN0YXRlLmNvbnRlbnRCb3ggPSB7XHJcblx0XHRcdHg6IGdkT2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdCxcclxuXHRcdFx0eTogZ2RPZmZzZXQudG9wIC0gb2Zmc2V0LnRvcCxcclxuXHRcdFx0Y3g6IGFyLmdkLndpZHRoKCksXHJcblx0XHRcdGN5OiBhci5nZC5oZWlnaHQoKVxyXG5cdFx0fTtcclxuXHRcdGFyLmdkLnJlbW92ZUF0dHIoIFwic3R5bGVcIiApO1xyXG5cclxuXHRcdC8vIFRoZSBhcnJvdyBib3ggbW92ZXMgYmV0d2VlbiBndWlkZU9mZnNldCBhbmQgZ3VpZGVPZmZzZXQgKyBndWlkZURpbXMgLSBhckZ1bGxcclxuXHRcdHN0YXRlLmd1aWRlT2Zmc2V0ID0geyBsZWZ0OiBzdGF0ZS5ndWlkZU9mZnNldC5sZWZ0IC0gb2Zmc2V0LmxlZnQsIHRvcDogc3RhdGUuZ3VpZGVPZmZzZXQudG9wIC0gb2Zmc2V0LnRvcCB9O1xyXG5cdFx0c3RhdGUuYXJIYWxmID0geyBjeDogc3RhdGUuYXJGdWxsLmN4IC8gMiwgY3k6IHN0YXRlLmFyRnVsbC5jeSAvIDIgfTtcclxuXHRcdHN0YXRlLm1lbnVIYWxmID0geyBjeDogc3RhdGUuY2xhbXBJbmZvLm1lbnVTaXplLmN4IC8gMiwgY3k6IHN0YXRlLmNsYW1wSW5mby5tZW51U2l6ZS5jeSAvIDIgfTtcclxuXHJcblx0XHRyZXR1cm4gc3RhdGU7XHJcblx0fSxcclxuXHJcblx0X3BsYWNlbWVudENvb3JkczogZnVuY3Rpb24oIGRlc2lyZWQgKSB7XHJcblx0XHR2YXIgc3RhdGUsIGJlc3QsIHBhcmFtcywgZWxPZmZzZXQsIGJnUmVmLFxyXG5cdFx0XHRvcHRpb25WYWx1ZSA9IHRoaXMub3B0aW9ucy5hcnJvdyxcclxuXHRcdFx0YXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoICFhciApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBkZXNpcmVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0YXIuYXJFbHMuc2hvdygpO1xyXG5cclxuXHRcdGJnUmVmID0ge307XHJcblx0XHRzdGF0ZSA9IHRoaXMuX2dldFBsYWNlbWVudFN0YXRlKCB0cnVlICk7XHJcblx0XHRwYXJhbXMgPSB7XHJcblx0XHRcdFwibFwiOiB7IGZzdDogXCJ4XCIsIHNuZDogXCJ5XCIsIHByb3A6IFwidG9wXCIsIGRpbUtleTogXCJjeVwiLCBvRGltS2V5OiBcImN4XCIsIG9mZnNldEZhY3RvcjogMSwgdGlwT2Zmc2V0OiAgLXN0YXRlLmFySGFsZi5jeCwgYXJyb3dPZmZzZXRGYWN0b3I6IDAgfSxcclxuXHRcdFx0XCJyXCI6IHsgZnN0OiBcInhcIiwgc25kOiBcInlcIiwgcHJvcDogXCJ0b3BcIiwgZGltS2V5OiBcImN5XCIsIG9EaW1LZXk6IFwiY3hcIiwgb2Zmc2V0RmFjdG9yOiAtMSwgdGlwT2Zmc2V0OiBzdGF0ZS5hckhhbGYuY3ggKyBzdGF0ZS5jb250ZW50Qm94LmN4LCBhcnJvd09mZnNldEZhY3RvcjogMSB9LFxyXG5cdFx0XHRcImJcIjogeyBmc3Q6IFwieVwiLCBzbmQ6IFwieFwiLCBwcm9wOiBcImxlZnRcIiwgZGltS2V5OiBcImN4XCIsIG9EaW1LZXk6IFwiY3lcIiwgb2Zmc2V0RmFjdG9yOiAtMSwgdGlwT2Zmc2V0OiBzdGF0ZS5hckhhbGYuY3kgKyBzdGF0ZS5jb250ZW50Qm94LmN5LCBhcnJvd09mZnNldEZhY3RvcjogMSB9LFxyXG5cdFx0XHRcInRcIjogeyBmc3Q6IFwieVwiLCBzbmQ6IFwieFwiLCBwcm9wOiBcImxlZnRcIiwgZGltS2V5OiBcImN4XCIsIG9EaW1LZXk6IFwiY3lcIiwgb2Zmc2V0RmFjdG9yOiAxLCB0aXBPZmZzZXQ6IC1zdGF0ZS5hckhhbGYuY3ksIGFycm93T2Zmc2V0RmFjdG9yOiAwIH1cclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gVHJ5IGVhY2ggc2lkZSBzcGVjaWZpZWQgaW4gdGhlIG9wdGlvbnMgdG8gc2VlIG9uIHdoaWNoIG9uZSB0aGUgYXJyb3dcclxuXHRcdC8vIHNob3VsZCBiZSBwbGFjZWQgc3VjaCB0aGF0IHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0aXAgb2YgdGhlIGFycm93IGFuZFxyXG5cdFx0Ly8gdGhlIGRlc2lyZWQgY29vcmRpbmF0ZXMgaXMgdGhlIHNob3J0ZXN0LlxyXG5cdFx0JC5lYWNoKCAoIG9wdGlvblZhbHVlID09PSB0cnVlID8gXCJsLHQscixiXCIgOiBvcHRpb25WYWx1ZSApLnNwbGl0KCBcIixcIiApLFxyXG5cdFx0XHQkLnByb3h5KCBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdFx0XHRiZXN0ID0gdGhpcy5fdHJ5QW5BcnJvdyggcGFyYW1zWyB2YWx1ZSBdLCB2YWx1ZSwgZGVzaXJlZCwgc3RhdGUsIGJlc3QgKTtcclxuXHRcdFx0fSwgdGhpcyApICk7XHJcblxyXG5cdFx0Ly8gQ291bGQgbm90IHBsYWNlIHRoZSBhcnJvdyBhbG9uZyBhbnkgb2YgdGhlIGVkZ2VzIC0gYmVoYXZlIGFzIGlmIHNob3dpbmdcclxuXHRcdC8vIHRoZSBhcnJvdyB3YXMgdHVybmVkIG9mZi5cclxuXHRcdGlmICggIWJlc3QgKSB7XHJcblx0XHRcdGFyLmFyRWxzLmhpZGUoKTtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBkZXNpcmVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTW92ZSB0aGUgYXJyb3cgaW50byBwbGFjZVxyXG5cdFx0YXIuY3RcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWFycm93LWwgdWktcG9wdXAtYXJyb3ctdCB1aS1wb3B1cC1hcnJvdy1yIHVpLXBvcHVwLWFycm93LWJcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cC1hcnJvdy1cIiArIGJlc3QuZGlyIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwic3R5bGVcIiApLmNzcyggYmVzdC5wb3NQcm9wLCBiZXN0LnBvc1ZhbCApXHJcblx0XHRcdC5zaG93KCk7XHJcblxyXG5cdFx0Ly8gRG8gbm90IG1vdmUvc2l6ZSB0aGUgYmFja2dyb3VuZCBkaXYgb24gSUUsIGJlY2F1c2Ugd2UgdXNlIHRoZSBhcnJvdyBkaXYgZm9yIGJhY2tncm91bmQgYXMgd2VsbC5cclxuXHRcdGlmICggIWllSGFjayApIHtcclxuXHRcdFx0ZWxPZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7XHJcblx0XHRcdGJnUmVmWyBwYXJhbXNbIGJlc3QuZGlyIF0uZnN0IF0gPSBhci5jdC5vZmZzZXQoKTtcclxuXHRcdFx0YmdSZWZbIHBhcmFtc1sgYmVzdC5kaXIgXS5zbmQgXSA9IHtcclxuXHRcdFx0XHRsZWZ0OiBlbE9mZnNldC5sZWZ0ICsgc3RhdGUuY29udGVudEJveC54LFxyXG5cdFx0XHRcdHRvcDogZWxPZmZzZXQudG9wICsgc3RhdGUuY29udGVudEJveC55XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGJlc3QucmVzdWx0O1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0cyApIHtcclxuXHRcdHZhciBuZXdUaGVtZSxcclxuXHRcdFx0b2xkVGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUsXHJcblx0XHRcdGFyID0gdGhpcy5fdWkuYXJyb3csXHJcblx0XHRcdHJldCA9IHRoaXMuX3N1cGVyKCBvcHRzICk7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmFycm93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggIWFyICYmIG9wdHMuYXJyb3cgKSB7XHJcblx0XHRcdFx0dGhpcy5fdWkuYXJyb3cgPSB0aGlzLl9hZGRBcnJvdygpO1xyXG5cclxuXHRcdFx0XHQvLyBJbXBvcnRhbnQgdG8gcmV0dXJuIGhlcmUgc28gd2UgZG9uJ3Qgc2V0IHRoZSBzYW1lIG9wdGlvbnMgYWxsIG92ZXJcclxuXHRcdFx0XHQvLyBhZ2FpbiBiZWxvdy5cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH0gZWxzZSBpZiAoIGFyICYmICFvcHRzLmFycm93ICkge1xyXG5cdFx0XHRcdGFyLmFyRWxzLnJlbW92ZSgpO1xyXG5cdFx0XHRcdHRoaXMuX3VpLmFycm93ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlYXNzaWduIHdpdGggcG90ZW50aWFsbHkgbmV3IGFycm93XHJcblx0XHRhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggYXIgKSB7XHJcblx0XHRcdGlmICggb3B0cy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdG9sZFRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb2xkVGhlbWUgKTtcclxuXHRcdFx0XHRuZXdUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9wdHMudGhlbWUgKTtcclxuXHRcdFx0XHRhci5hci5yZW1vdmVDbGFzcyggb2xkVGhlbWUgKS5hZGRDbGFzcyggbmV3VGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRzLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGFyLmFyLnRvZ2dsZUNsYXNzKCBcInVpLW92ZXJsYXktc2hhZG93XCIsIG9wdHMuc2hhZG93ICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggYXIgKSB7XHJcblx0XHRcdGFyLmFyRWxzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucGFuZWxcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGNsYXNzZXM6IHtcclxuXHRcdFx0cGFuZWw6IFwidWktcGFuZWxcIixcclxuXHRcdFx0cGFuZWxPcGVuOiBcInVpLXBhbmVsLW9wZW5cIixcclxuXHRcdFx0cGFuZWxDbG9zZWQ6IFwidWktcGFuZWwtY2xvc2VkXCIsXHJcblx0XHRcdHBhbmVsRml4ZWQ6IFwidWktcGFuZWwtZml4ZWRcIixcclxuXHRcdFx0cGFuZWxJbm5lcjogXCJ1aS1wYW5lbC1pbm5lclwiLFxyXG5cdFx0XHRtb2RhbDogXCJ1aS1wYW5lbC1kaXNtaXNzXCIsXHJcblx0XHRcdG1vZGFsT3BlbjogXCJ1aS1wYW5lbC1kaXNtaXNzLW9wZW5cIixcclxuXHRcdFx0cGFnZUNvbnRhaW5lcjogXCJ1aS1wYW5lbC1wYWdlLWNvbnRhaW5lclwiLFxyXG5cdFx0XHRwYWdlV3JhcHBlcjogXCJ1aS1wYW5lbC13cmFwcGVyXCIsXHJcblx0XHRcdHBhZ2VGaXhlZFRvb2xiYXI6IFwidWktcGFuZWwtZml4ZWQtdG9vbGJhclwiLFxyXG5cdFx0XHRwYWdlQ29udGVudFByZWZpeDogXCJ1aS1wYW5lbC1wYWdlLWNvbnRlbnRcIiwgLyogVXNlZCBmb3Igd3JhcHBlciBhbmQgZml4ZWQgdG9vbGJhcnMgcG9zaXRpb24sIGRpc3BsYXkgYW5kIG9wZW4gY2xhc3Nlcy4gKi9cclxuXHRcdFx0YW5pbWF0ZTogXCJ1aS1wYW5lbC1hbmltYXRlXCJcclxuXHRcdH0sXHJcblx0XHRhbmltYXRlOiB0cnVlLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRwb3NpdGlvbjogXCJsZWZ0XCIsXHJcblx0XHRkaXNtaXNzaWJsZTogdHJ1ZSxcclxuXHRcdGRpc3BsYXk6IFwicmV2ZWFsXCIsIC8vYWNjZXB0cyByZXZlYWwsIHB1c2gsIG92ZXJsYXlcclxuXHRcdHN3aXBlQ2xvc2U6IHRydWUsXHJcblx0XHRwb3NpdGlvbkZpeGVkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jbG9zZUxpbms6IG51bGwsXHJcblx0X3BhcmVudFBhZ2U6IG51bGwsXHJcblx0X3BhZ2U6IG51bGwsXHJcblx0X21vZGFsOiBudWxsLFxyXG5cdF9wYW5lbElubmVyOiBudWxsLFxyXG5cdF93cmFwcGVyOiBudWxsLFxyXG5cdF9maXhlZFRvb2xiYXJzOiBudWxsLFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0cGFyZW50UGFnZSA9IGVsLmNsb3Nlc3QoIFwiLnVpLXBhZ2UsIDpqcW1EYXRhKHJvbGU9J3BhZ2UnKVwiICk7XHJcblxyXG5cdFx0Ly8gZXhwb3NlIHNvbWUgcHJpdmF0ZSBwcm9wcyB0byBvdGhlciBtZXRob2RzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfY2xvc2VMaW5rOiBlbC5maW5kKCBcIjpqcW1EYXRhKHJlbD0nY2xvc2UnKVwiICksXHJcblx0XHRcdF9wYXJlbnRQYWdlOiAoIHBhcmVudFBhZ2UubGVuZ3RoID4gMCApID8gcGFyZW50UGFnZSA6IGZhbHNlLFxyXG5cdFx0XHRfb3BlbmVkUGFnZTogbnVsbCxcclxuXHRcdFx0X3BhZ2U6IHRoaXMuX2dldFBhZ2UsXHJcblx0XHRcdF9wYW5lbElubmVyOiB0aGlzLl9nZXRQYW5lbElubmVyKCksXHJcblx0XHRcdF9maXhlZFRvb2xiYXJzOiB0aGlzLl9nZXRGaXhlZFRvb2xiYXJzXHJcblx0XHR9KTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICl7XHJcblx0XHRcdHRoaXMuX2dldFdyYXBwZXIoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2FkZFBhbmVsQ2xhc3NlcygpO1xyXG5cclxuXHRcdC8vIGlmIGFuaW1hdGluZywgYWRkIHRoZSBjbGFzcyB0byBkbyBzb1xyXG5cdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISF0aGlzLm9wdGlvbnMuYW5pbWF0ZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fYmluZFVwZGF0ZUxheW91dCgpO1xyXG5cdFx0dGhpcy5fYmluZENsb3NlRXZlbnRzKCk7XHJcblx0XHR0aGlzLl9iaW5kTGlua0xpc3RlbmVycygpO1xyXG5cdFx0dGhpcy5fYmluZFBhZ2VFdmVudHMoKTtcclxuXHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLmRpc21pc3NpYmxlICkge1xyXG5cdFx0XHR0aGlzLl9jcmVhdGVNb2RhbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2JpbmRTd2lwZUV2ZW50cygpO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYW5lbElubmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYW5lbElubmVyID0gdGhpcy5lbGVtZW50LmZpbmQoIFwiLlwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxJbm5lciApO1xyXG5cclxuXHRcdGlmICggcGFuZWxJbm5lci5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHBhbmVsSW5uZXIgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS53cmFwQWxsKCBcIjxkaXYgY2xhc3M9J1wiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxJbm5lciArIFwiJyAvPlwiICkucGFyZW50KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBhbmVsSW5uZXI7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZU1vZGFsOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0dGFyZ2V0ID0gc2VsZi5fcGFyZW50UGFnZSA/IHNlbGYuX3BhcmVudFBhZ2UucGFyZW50KCkgOiBzZWxmLmVsZW1lbnQucGFyZW50KCk7XHJcblxyXG5cdFx0c2VsZi5fbW9kYWwgPSAkKCBcIjxkaXYgY2xhc3M9J1wiICsgc2VsZi5vcHRpb25zLmNsYXNzZXMubW9kYWwgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHQub24oIFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFwcGVuZFRvKCB0YXJnZXQgKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFnZSA9IHRoaXMuX29wZW5lZFBhZ2UgfHwgdGhpcy5fcGFyZW50UGFnZSB8fCAkKCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApO1xyXG5cclxuXHRcdHJldHVybiBwYWdlO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRXcmFwcGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3cmFwcGVyID0gdGhpcy5fcGFnZSgpLmZpbmQoIFwiLlwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFnZVdyYXBwZXIgKTtcclxuXHRcdGlmICggd3JhcHBlci5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHdyYXBwZXIgPSB0aGlzLl9wYWdlKCkuY2hpbGRyZW4oIFwiLnVpLWhlYWRlcjpub3QoLnVpLWhlYWRlci1maXhlZCksIC51aS1jb250ZW50Om5vdCgudWktcG9wdXApLCAudWktZm9vdGVyOm5vdCgudWktZm9vdGVyLWZpeGVkKVwiIClcclxuXHRcdFx0XHQud3JhcEFsbCggXCI8ZGl2IGNsYXNzPSdcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhZ2VXcmFwcGVyICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0XHQucGFyZW50KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fd3JhcHBlciA9IHdyYXBwZXI7XHJcblx0fSxcclxuXHJcblx0X2dldEZpeGVkVG9vbGJhcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGV4dEZpeGVkVG9vbGJhcnMgPSAkKCBcImJvZHlcIiApLmNoaWxkcmVuKCBcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIiApLFxyXG5cdFx0XHRpbnRGaXhlZFRvb2xiYXJzID0gdGhpcy5fcGFnZSgpLmZpbmQoIFwiLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZFwiICksXHJcblx0XHRcdGZpeGVkVG9vbGJhcnMgPSBleHRGaXhlZFRvb2xiYXJzLmFkZCggaW50Rml4ZWRUb29sYmFycyApLmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYWdlRml4ZWRUb29sYmFyICk7XHJcblxyXG5cdFx0cmV0dXJuIGZpeGVkVG9vbGJhcnM7XHJcblx0fSxcclxuXHJcblx0X2dldFBvc0Rpc3BsYXlDbGFzc2VzOiBmdW5jdGlvbiggcHJlZml4ICkge1xyXG5cdFx0cmV0dXJuIHByZWZpeCArIFwiLXBvc2l0aW9uLVwiICsgdGhpcy5vcHRpb25zLnBvc2l0aW9uICsgXCIgXCIgKyBwcmVmaXggKyBcIi1kaXNwbGF5LVwiICsgdGhpcy5vcHRpb25zLmRpc3BsYXk7XHJcblx0fSxcclxuXHJcblx0X2dldFBhbmVsQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFuZWxDbGFzc2VzID0gdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWwgK1xyXG5cdFx0XHRcIiBcIiArIHRoaXMuX2dldFBvc0Rpc3BsYXlDbGFzc2VzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbCApICtcclxuXHRcdFx0XCIgXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbENsb3NlZCArXHJcblx0XHRcdFwiIFwiICsgXCJ1aS1ib2R5LVwiICsgKCB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIiApO1xyXG5cclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZCApIHtcclxuXHRcdFx0cGFuZWxDbGFzc2VzICs9IFwiIFwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxGaXhlZDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcGFuZWxDbGFzc2VzO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRQYW5lbENsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLl9nZXRQYW5lbENsYXNzZXMoKSApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVDbG9zZUNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kQ2xvc2VFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuX2Nsb3NlTGluaywge1xyXG5cdFx0XHRcImNsaWNrXCI6IFwiX2hhbmRsZUNsb3NlQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcImNsaWNrIGE6anFtRGF0YShhamF4PSdmYWxzZScpXCI6IFwiX2hhbmRsZUNsb3NlQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3Bvc2l0aW9uUGFuZWw6IGZ1bmN0aW9uKCBzY3JvbGxUb1RvcCApIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0cGFuZWxJbm5lckhlaWdodCA9IHNlbGYuX3BhbmVsSW5uZXIub3V0ZXJIZWlnaHQoKSxcclxuXHRcdFx0ZXhwYW5kID0gcGFuZWxJbm5lckhlaWdodCA+ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpO1xyXG5cclxuXHRcdGlmICggZXhwYW5kIHx8ICFzZWxmLm9wdGlvbnMucG9zaXRpb25GaXhlZCApIHtcclxuXHRcdFx0aWYgKCBleHBhbmQgKSB7XHJcblx0XHRcdFx0c2VsZi5fdW5maXhQYW5lbCgpO1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCggcGFuZWxJbm5lckhlaWdodCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggc2Nyb2xsVG9Ub3AgKSB7XHJcblx0XHRcdFx0dGhpcy53aW5kb3dbIDAgXS5zY3JvbGxUbyggMCwgJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5fZml4UGFuZWwoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZEZpeExpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCAkKCB3aW5kb3cgKSwgeyBcInRocm90dGxlZHJlc2l6ZVwiOiBcIl9wb3NpdGlvblBhbmVsXCIgfSk7XHJcblx0fSxcclxuXHJcblx0X3VuYmluZEZpeExpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29mZiggJCggd2luZG93ICksIFwidGhyb3R0bGVkcmVzaXplXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfdW5maXhQYW5lbDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQgJiYgJC5zdXBwb3J0LmZpeGVkUG9zaXRpb24gKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxGaXhlZCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9maXhQYW5lbDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQgJiYgJC5zdXBwb3J0LmZpeGVkUG9zaXRpb24gKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxGaXhlZCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kVXBkYXRlTGF5b3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRzZWxmLmVsZW1lbnQub24oIFwidXBkYXRlbGF5b3V0XCIsIGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdFx0aWYgKCBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdHNlbGYuX3Bvc2l0aW9uUGFuZWwoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2JpbmRMaW5rTGlzdGVuZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCBcImJvZHlcIiwge1xyXG5cdFx0XHRcImNsaWNrIGFcIjogXCJfaGFuZGxlQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVDbGljazogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHR2YXIgbGluayxcclxuXHRcdFx0cGFuZWxJZCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKTtcclxuXHJcblx0XHRpZiAoIGUuY3VycmVudFRhcmdldC5ocmVmLnNwbGl0KCBcIiNcIiApWyAxIF0gPT09IHBhbmVsSWQgJiYgcGFuZWxJZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRsaW5rID0gJCggZS50YXJnZXQgKTtcclxuXHRcdFx0aWYgKCBsaW5rLmhhc0NsYXNzKCBcInVpLWJ0blwiICkgKSB7XHJcblx0XHRcdFx0bGluay5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQub25lKCBcInBhbmVsb3BlbiBwYW5lbGNsb3NlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0bGluay5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnRvZ2dsZSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kU3dpcGVFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRhcmVhID0gc2VsZi5fbW9kYWwgPyBzZWxmLmVsZW1lbnQuYWRkKCBzZWxmLl9tb2RhbCApIDogc2VsZi5lbGVtZW50O1xyXG5cclxuXHRcdC8vIG9uIHN3aXBlLCBjbG9zZSB0aGUgcGFuZWxcclxuXHRcdGlmICggISFzZWxmLm9wdGlvbnMuc3dpcGVDbG9zZSApIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucG9zaXRpb24gPT09IFwibGVmdFwiICkge1xyXG5cdFx0XHRcdGFyZWEub24oIFwic3dpcGVsZWZ0LnBhbmVsXCIsIGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhcmVhLm9uKCBcInN3aXBlcmlnaHQucGFuZWxcIiwgZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRQYWdlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHR0aGlzLmRvY3VtZW50XHJcblx0XHRcdC8vIENsb3NlIHRoZSBwYW5lbCBpZiBhbm90aGVyIHBhbmVsIG9uIHRoZSBwYWdlIG9wZW5zXHJcblx0XHRcdC5vbiggXCJwYW5lbGJlZm9yZW9wZW5cIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0aWYgKCBzZWxmLl9vcGVuICYmIGUudGFyZ2V0ICE9PSBzZWxmLmVsZW1lbnRbIDAgXSApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC8vIE9uIGVzY2FwZSwgY2xvc2U/IG1pZ2h0IG5lZWQgdG8gaGF2ZSBhIHRhcmdldCBjaGVjayB0b28uLi5cclxuXHRcdFx0Lm9uKCBcImtleXVwLnBhbmVsXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdGlmICggZS5rZXlDb2RlID09PSAyNyAmJiBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRpZiAoICF0aGlzLl9wYXJlbnRQYWdlICYmIHRoaXMub3B0aW9ucy5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHtcclxuXHRcdFx0XHRcInBhZ2VzaG93XCI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fb3BlbmVkUGFnZSA9IG51bGw7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRXcmFwcGVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdC8vIENsZWFuIHVwIG9wZW4gcGFuZWxzIGFmdGVyIHBhZ2UgaGlkZVxyXG5cdFx0aWYgKCBzZWxmLl9wYXJlbnRQYWdlICkge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50Lm9uKCBcInBhZ2VoaWRlXCIsIFwiOmpxbURhdGEocm9sZT0ncGFnZScpXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoIHRydWUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5vbiggXCJwYWdlYmVmb3JlaGlkZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCB0cnVlICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBzdGF0ZSBzdG9yYWdlIG9mIG9wZW4gb3IgY2xvc2VkXHJcblx0X29wZW46IGZhbHNlLFxyXG5cdF9wYWdlQ29udGVudE9wZW5DbGFzc2VzOiBudWxsLFxyXG5cdF9tb2RhbE9wZW5DbGFzc2VzOiBudWxsLFxyXG5cclxuXHRvcGVuOiBmdW5jdGlvbiggaW1tZWRpYXRlICkge1xyXG5cdFx0aWYgKCAhdGhpcy5fb3BlbiApIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG8gPSBzZWxmLm9wdGlvbnMsXHJcblxyXG5cdFx0XHRcdF9vcGVuUGFuZWwgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuX29mZiggc2VsZi5kb2N1bWVudCAsIFwicGFuZWxjbG9zZVwiICk7XHJcblx0XHRcdFx0XHRzZWxmLl9wYWdlKCkuanFtRGF0YSggXCJwYW5lbFwiLCBcIm9wZW5cIiApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5hZGRDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoICFpbW1lZGlhdGUgJiYgJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICkge1xyXG5cdFx0XHRcdFx0XHQoIHNlbGYuX3dyYXBwZXIgfHwgc2VsZi5lbGVtZW50IClcclxuXHRcdFx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoIGNvbXBsZXRlLCBcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCggY29tcGxldGUsIDAgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIG8udGhlbWUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpXHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLXRoZW1lZCBcIiArIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItXCIgKyBvLnRoZW1lICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5lbGVtZW50XHJcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhbmVsQ2xvc2VkIClcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKCBvLmNsYXNzZXMucGFuZWxPcGVuICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fcG9zaXRpb25QYW5lbCggdHJ1ZSApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgPSBzZWxmLl9nZXRQb3NEaXNwbGF5Q2xhc3Nlcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KCkuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIuYWRkQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLmFkZENsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fbW9kYWxPcGVuQ2xhc3NlcyA9IHNlbGYuX2dldFBvc0Rpc3BsYXlDbGFzc2VzKCBvLmNsYXNzZXMubW9kYWwgKSArIFwiIFwiICsgby5jbGFzc2VzLm1vZGFsT3BlbjtcclxuXHRcdFx0XHRcdGlmICggc2VsZi5fbW9kYWwgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX21vZGFsXHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCBzZWxmLl9tb2RhbE9wZW5DbGFzc2VzIClcclxuXHRcdFx0XHRcdFx0XHQuaGVpZ2h0KCBNYXRoLm1heCggc2VsZi5fbW9kYWwuaGVpZ2h0KCksIHNlbGYuZG9jdW1lbnQuaGVpZ2h0KCkgKSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGUgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHQvLyBCYWlsIGlmIHRoZSBwYW5lbCB3YXMgY2xvc2VkIGJlZm9yZSB0aGUgb3BlbmluZyBhbmltYXRpb24gaGFzIGNvbXBsZXRlZFxyXG5cdFx0XHRcdFx0aWYgKCAhc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fYmluZEZpeExpc3RlbmVyKCk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlciggXCJvcGVuXCIgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9vcGVuZWRQYWdlID0gc2VsZi5fcGFnZSgpO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRzZWxmLl90cmlnZ2VyKCBcImJlZm9yZW9wZW5cIiApO1xyXG5cclxuXHRcdFx0aWYgKCBzZWxmLl9wYWdlKCkuanFtRGF0YSggXCJwYW5lbFwiICkgPT09IFwib3BlblwiICkge1xyXG5cdFx0XHRcdHNlbGYuX29uKCBzZWxmLmRvY3VtZW50LCB7XHJcblx0XHRcdFx0XHRcInBhbmVsY2xvc2VcIjogX29wZW5QYW5lbFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdF9vcGVuUGFuZWwoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5fb3BlbiA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCBpbW1lZGlhdGUgKSB7XHJcblx0XHRpZiAoIHRoaXMuX29wZW4gKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cclxuXHRcdFx0XHRfY2xvc2VQYW5lbCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuZWxlbWVudC5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhbmVsT3BlbiApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5yZW1vdmVDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoICFpbW1lZGlhdGUgJiYgJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICkge1xyXG5cdFx0XHRcdFx0XHQoIHNlbGYuX3dyYXBwZXIgfHwgc2VsZi5lbGVtZW50IClcclxuXHRcdFx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoIGNvbXBsZXRlLCBcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCggY29tcGxldGUsIDAgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIHNlbGYuX21vZGFsICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9tb2RhbFxyXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggc2VsZi5fbW9kYWxPcGVuQ2xhc3NlcyApXHJcblx0XHRcdFx0XHRcdFx0LmhlaWdodCggXCJcIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmICggby50aGVtZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItdGhlbWVkIFwiICsgby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi1cIiArIG8udGhlbWUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLmVsZW1lbnQuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbENsb3NlZCApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fZml4UGFuZWwoKTtcclxuXHRcdFx0XHRcdHNlbGYuX3VuYmluZEZpeExpc3RlbmVyKCk7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQoKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wYWdlKCkuanFtUmVtb3ZlRGF0YSggXCJwYW5lbFwiICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlciggXCJjbG9zZVwiICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fb3BlbmVkUGFnZSA9IG51bGw7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdHNlbGYuX3RyaWdnZXIoIFwiYmVmb3JlY2xvc2VcIiApO1xyXG5cclxuXHRcdFx0X2Nsb3NlUGFuZWwoKTtcclxuXHJcblx0XHRcdHNlbGYuX29wZW4gPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHR0b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpc1sgdGhpcy5fb3BlbiA/IFwiY2xvc2VcIiA6IFwib3BlblwiIF0oKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3RoZXJQYW5lbHMsXHJcblx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0bXVsdGlwbGVQYW5lbHMgPSAoICQoIFwiYm9keSA+IDptb2JpbGUtcGFuZWxcIiApLmxlbmd0aCArICQubW9iaWxlLmFjdGl2ZVBhZ2UuZmluZCggXCI6bW9iaWxlLXBhbmVsXCIgKS5sZW5ndGggKSA+IDE7XHJcblxyXG5cdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cclxuXHRcdFx0Ly8gIHJlbW92ZSB0aGUgd3JhcHBlciBpZiBub3QgaW4gdXNlIGJ5IGFub3RoZXIgcGFuZWxcclxuXHRcdFx0b3RoZXJQYW5lbHMgPSAkKCBcImJvZHkgPiA6bW9iaWxlLXBhbmVsXCIgKS5hZGQoICQubW9iaWxlLmFjdGl2ZVBhZ2UuZmluZCggXCI6bW9iaWxlLXBhbmVsXCIgKSApO1xyXG5cdFx0XHRpZiAoIG90aGVyUGFuZWxzLm5vdCggXCIudWktcGFuZWwtZGlzcGxheS1vdmVybGF5XCIgKS5ub3QoIHRoaXMuZWxlbWVudCApLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHR0aGlzLl93cmFwcGVyLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdGhpcy5fb3BlbiApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICk7XHJcblxyXG5cdFx0XHRcdGlmICggby50aGVtZSApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi10aGVtZWQgXCIgKyBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLVwiICsgby50aGVtZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIW11bHRpcGxlUGFuZWxzICkge1xyXG5cclxuXHRcdFx0dGhpcy5kb2N1bWVudC5vZmYoIFwicGFuZWxvcGVuIHBhbmVsY2xvc2VcIiApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMuX29wZW4gKSB7XHJcblx0XHRcdHRoaXMuX3BhZ2UoKS5qcW1SZW1vdmVEYXRhKCBcInBhbmVsXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9wYW5lbElubmVyLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggWyB0aGlzLl9nZXRQYW5lbENsYXNzZXMoKSwgby5jbGFzc2VzLnBhbmVsT3Blbiwgby5jbGFzc2VzLmFuaW1hdGUgXS5qb2luKCBcIiBcIiApIClcclxuXHRcdFx0Lm9mZiggXCJzd2lwZWxlZnQucGFuZWwgc3dpcGVyaWdodC5wYW5lbFwiIClcclxuXHRcdFx0Lm9mZiggXCJwYW5lbGJlZm9yZW9wZW5cIiApXHJcblx0XHRcdC5vZmYoIFwicGFuZWxoaWRlXCIgKVxyXG5cdFx0XHQub2ZmKCBcImtleXVwLnBhbmVsXCIgKVxyXG5cdFx0XHQub2ZmKCBcInVwZGF0ZWxheW91dFwiICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9tb2RhbCApIHtcclxuXHRcdFx0dGhpcy5fbW9kYWwucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRhYmxlXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRjbGFzc2VzOiB7XHJcblx0XHRcdHRhYmxlOiBcInVpLXRhYmxlXCJcclxuXHRcdH0sXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy50YWJsZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGV4dGVuZCBoZXJlLCBhc3NpZ24gb24gcmVmcmVzaCA+IF9zZXRIZWFkZXJzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cclxuXHRcdFx0Ly8gRXhwb3NlIGhlYWRlcnMgYW5kIGFsbEhlYWRlcnMgcHJvcGVydGllcyBvbiB0aGUgd2lkZ2V0XHJcblx0XHRcdC8vIGhlYWRlcnMgcmVmZXJlbmNlcyB0aGUgVEhzIHdpdGhpbiB0aGUgZmlyc3QgVFIgaW4gdGhlIHRhYmxlXHJcblx0XHRcdGhlYWRlcnM6IHVuZGVmaW5lZCxcclxuXHJcblx0XHRcdC8vIGFsbEhlYWRlcnMgcmVmZXJlbmNlcyBoZWFkZXJzLCBwbHVzIGFsbCBUSHMgaW4gdGhlIHRoZWFkLCB3aGljaCBtYXlcclxuXHRcdFx0Ly8gaW5jbHVkZSBzZXZlcmFsIHJvd3MsIG9yIG5vdFxyXG5cdFx0XHRhbGxIZWFkZXJzOiB1bmRlZmluZWRcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2goIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0SGVhZGVyczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdHJzID0gdGhpcy5lbGVtZW50LmZpbmQoIFwidGhlYWQgdHJcIiApO1xyXG5cclxuXHRcdHRoaXMuaGVhZGVycyA9IHRoaXMuZWxlbWVudC5maW5kKCBcInRyOmVxKDApXCIgKS5jaGlsZHJlbigpO1xyXG5cdFx0dGhpcy5hbGxIZWFkZXJzID0gdGhpcy5oZWFkZXJzLmFkZCggdHJzLmNoaWxkcmVuKCkgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRyZWJ1aWxkOiAkLm5vb3AsXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggLyogY3JlYXRlICovICkge1xyXG5cdFx0dmFyIHRhYmxlID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0cnMgPSB0YWJsZS5maW5kKCBcInRoZWFkIHRyXCIgKTtcclxuXHJcblx0XHQvLyB1cGRhdGluZyBoZWFkZXJzIG9uIHJlZnJlc2ggKGZpeGVzICM1ODgwKVxyXG5cdFx0dGhpcy5fc2V0SGVhZGVycygpO1xyXG5cclxuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgdHJzXHJcblx0XHR0cnMuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjb2x1bW5Db3VudCA9IDA7XHJcblxyXG5cdFx0XHQvLyBJdGVyYXRlIG92ZXIgdGhlIGNoaWxkcmVuIG9mIHRoZSB0clxyXG5cdFx0XHQkKCB0aGlzICkuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgc3BhbiA9IHBhcnNlSW50KCB0aGlzLmdldEF0dHJpYnV0ZSggXCJjb2xzcGFuXCIgKSwgMTAgKSxcclxuXHRcdFx0XHRcdHNlbGVjdG9yID0gXCI6bnRoLWNoaWxkKFwiICsgKCBjb2x1bW5Db3VudCArIDEgKSArIFwiKVwiLFxyXG5cdFx0XHRcdFx0ajtcclxuXHJcblx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJjb2xzdGFydFwiLCBjb2x1bW5Db3VudCArIDEgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBzcGFuICkge1xyXG5cdFx0XHRcdFx0Zm9yKCBqID0gMDsgaiA8IHNwYW4gLSAxOyBqKysgKSB7XHJcblx0XHRcdFx0XHRcdGNvbHVtbkNvdW50Kys7XHJcblx0XHRcdFx0XHRcdHNlbGVjdG9yICs9IFwiLCA6bnRoLWNoaWxkKFwiICsgKCBjb2x1bW5Db3VudCArIDEgKSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU3RvcmUgXCJjZWxsc1wiIGRhdGEgb24gaGVhZGVyIGFzIGEgcmVmZXJlbmNlIHRvIGFsbCBjZWxscyBpbiB0aGVcclxuXHRcdFx0XHQvLyBzYW1lIGNvbHVtbiBhcyB0aGlzIFRIXHJcblx0XHRcdFx0JCggdGhpcyApLmpxbURhdGEoIFwiY2VsbHNcIiwgdGFibGUuZmluZCggXCJ0clwiICkubm90KCB0cnMuZXEoIDAgKSApLm5vdCggdGhpcyApLmNoaWxkcmVuKCBzZWxlY3RvciApICk7XHJcblxyXG5cdFx0XHRcdGNvbHVtbkNvdW50Kys7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50YWJsZVwiLCAkLm1vYmlsZS50YWJsZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdG1vZGU6IFwiY29sdW1udG9nZ2xlXCIsXHJcblx0XHRjb2x1bW5CdG5UaGVtZTogbnVsbCxcclxuXHRcdGNvbHVtblBvcHVwVGhlbWU6IG51bGwsXHJcblx0XHRjb2x1bW5CdG5UZXh0OiBcIkNvbHVtbnMuLi5cIixcclxuXHRcdGNsYXNzZXM6ICQuZXh0ZW5kKCAkLm1vYmlsZS50YWJsZS5wcm90b3R5cGUub3B0aW9ucy5jbGFzc2VzLCB7XHJcblx0XHRcdHBvcHVwOiBcInVpLXRhYmxlLWNvbHVtbnRvZ2dsZS1wb3B1cFwiLFxyXG5cdFx0XHRjb2x1bW5CdG46IFwidWktdGFibGUtY29sdW1udG9nZ2xlLWJ0blwiLFxyXG5cdFx0XHRwcmlvcml0eVByZWZpeDogXCJ1aS10YWJsZS1wcmlvcml0eS1cIixcclxuXHRcdFx0Y29sdW1uVG9nZ2xlVGFibGU6IFwidWktdGFibGUtY29sdW1udG9nZ2xlXCJcclxuXHRcdH0pXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgIT09IFwiY29sdW1udG9nZ2xlXCIgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfbWVudTogbnVsbFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX21lbnUgPSAkKCB0aGlzLmRvY3VtZW50WyAwIF0uZ2V0RWxlbWVudEJ5SWQoIHRoaXMuX2lkKCkgKyBcIi1wb3B1cFwiICkgKS5jaGlsZHJlbigpLmZpcnN0KCk7XHJcblx0XHRcdHRoaXMuX2FkZFRvZ2dsZXMoIHRoaXMuX21lbnUsIHRydWUgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX21lbnUgPSB0aGlzLl9lbmhhbmNlQ29sVG9nZ2xlKCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMuY29sdW1uVG9nZ2xlVGFibGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zZXR1cEV2ZW50cygpO1xyXG5cclxuXHRcdHRoaXMuX3NldFRvZ2dsZVN0YXRlKCk7XHJcblx0fSxcclxuXHJcblx0X2lkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoIHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKSB8fCAoIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZCApICk7XHJcblx0fSxcclxuXHJcblx0X3NldHVwRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vTk9URTogaW5wdXRzIGFyZSBib3VuZCBpbiBiaW5kVG9nZ2xlcyxcclxuXHRcdC8vIHNvIGl0IGNhbiBiZSBjYWxsZWQgb24gcmVmcmVzaCwgdG9vXHJcblxyXG5cdFx0Ly8gdXBkYXRlIGNvbHVtbiB0b2dnbGVzIG9uIHJlc2l6ZVxyXG5cdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7XHJcblx0XHRcdHRocm90dGxlZHJlc2l6ZTogXCJfc2V0VG9nZ2xlU3RhdGVcIlxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5fbWVudSwge1xyXG5cdFx0XHRcImNoYW5nZSBpbnB1dFwiOiBcIl9tZW51SW5wdXRDaGFuZ2VcIlxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2FkZFRvZ2dsZXM6IGZ1bmN0aW9uKCBtZW51LCBrZWVwICkge1xyXG5cdFx0dmFyIGlucHV0cyxcclxuXHRcdFx0Y2hlY2tib3hJbmRleCA9IDAsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGNvbnRhaW5lciA9IG1lbnUuY29udHJvbGdyb3VwKCBcImNvbnRhaW5lclwiICk7XHJcblxyXG5cdFx0Ly8gYWxsb3cgdXBkYXRlIG9mIG1lbnUgb24gcmVmcmVzaCAoZml4ZXMgIzU4ODApXHJcblx0XHRpZiAoIGtlZXAgKSB7XHJcblx0XHRcdGlucHV0cyA9IG1lbnUuZmluZCggXCJpbnB1dFwiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjcmVhdGUgdGhlIGhpZGUvc2hvdyB0b2dnbGVzXHJcblx0XHR0aGlzLmhlYWRlcnMubm90KCBcInRkXCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGlucHV0LCBjZWxscyxcclxuXHRcdFx0XHRoZWFkZXIgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0cHJpb3JpdHkgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwicHJpb3JpdHlcIiApO1xyXG5cclxuXHRcdFx0aWYgKCBwcmlvcml0eSApIHtcclxuXHRcdFx0XHRjZWxscyA9IGhlYWRlci5hZGQoIGhlYWRlci5qcW1EYXRhKCBcImNlbGxzXCIgKSApO1xyXG5cdFx0XHRcdGNlbGxzLmFkZENsYXNzKCBvcHRzLmNsYXNzZXMucHJpb3JpdHlQcmVmaXggKyBwcmlvcml0eSApO1xyXG5cclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIChuZXc/KSBjaGVja2JveCBpcyBhc3NvY2lhdGVkIHdpdGggaXRzIGhlYWRlciB2aWEgLmpxbURhdGEoKSBhbmRcclxuXHRcdFx0XHQvLyB0aGF0LCB2aWNlIHZlcnNhLCB0aGUgaGVhZGVyIGlzIGFsc28gYXNzb2NpYXRlZCB3aXRoIHRoZSBjaGVja2JveFxyXG5cdFx0XHRcdGlucHV0ID0gKCBrZWVwID8gaW5wdXRzLmVxKCBjaGVja2JveEluZGV4KysgKSA6XHJcblx0XHRcdFx0XHQkKFwiPGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2hlY2tlZCAvPlwiICtcclxuXHRcdFx0XHRcdFx0KCBoZWFkZXIuY2hpbGRyZW4oIFwiYWJiclwiICkuZmlyc3QoKS5hdHRyKCBcInRpdGxlXCIgKSB8fFxyXG5cdFx0XHRcdFx0XHRcdGhlYWRlci50ZXh0KCkgKSArXHJcblx0XHRcdFx0XHRcdFwiPC9sYWJlbD5cIiApXHJcblx0XHRcdFx0XHRcdC5hcHBlbmRUbyggY29udGFpbmVyIClcclxuXHRcdFx0XHRcdFx0LmNoaWxkcmVuKCAwIClcclxuXHRcdFx0XHRcdFx0LmNoZWNrYm94cmFkaW8oIHtcclxuXHRcdFx0XHRcdFx0XHR0aGVtZTogb3B0cy5jb2x1bW5Qb3B1cFRoZW1lXHJcblx0XHRcdFx0XHRcdH0pIClcclxuXHJcblx0XHRcdFx0XHRcdC8vIEFzc29jaWF0ZSB0aGUgaGVhZGVyIHdpdGggdGhlIGNoZWNrYm94XHJcblx0XHRcdFx0XHRcdC5qcW1EYXRhKCBcImhlYWRlclwiLCBoZWFkZXIgKVxyXG5cdFx0XHRcdFx0XHQuanFtRGF0YSggXCJjZWxsc1wiLCBjZWxscyApO1xyXG5cclxuXHRcdFx0XHQvLyBBc3NvY2lhdGUgdGhlIGNoZWNrYm94IHdpdGggdGhlIGhlYWRlclxyXG5cdFx0XHRcdGhlYWRlci5qcW1EYXRhKCBcImlucHV0XCIsIGlucHV0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIHNldCBiaW5kaW5ncyBoZXJlXHJcblx0XHRpZiAoICFrZWVwICkge1xyXG5cdFx0XHRtZW51LmNvbnRyb2xncm91cCggXCJyZWZyZXNoXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfbWVudUlucHV0Q2hhbmdlOiBmdW5jdGlvbiggZXZ0ICkge1xyXG5cdFx0dmFyIGlucHV0ID0gJCggZXZ0LnRhcmdldCApLFxyXG5cdFx0XHRjaGVja2VkID0gaW5wdXRbIDAgXS5jaGVja2VkO1xyXG5cclxuXHRcdGlucHV0LmpxbURhdGEoIFwiY2VsbHNcIiApXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS10YWJsZS1jZWxsLWhpZGRlblwiLCAhY2hlY2tlZCApXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS10YWJsZS1jZWxsLXZpc2libGVcIiwgY2hlY2tlZCApO1xyXG5cdH0sXHJcblxyXG5cdF91bmxvY2tDZWxsczogZnVuY3Rpb24oIGNlbGxzICkge1xyXG5cdFx0Ly8gYWxsb3cgaGlkZS9zaG93IHZpYSBDU1Mgb25seSA9IHJlbW92ZSBhbGwgdG9nZ2xlLWxvY2tzXHJcblx0XHRjZWxscy5yZW1vdmVDbGFzcyggXCJ1aS10YWJsZS1jZWxsLWhpZGRlbiB1aS10YWJsZS1jZWxsLXZpc2libGVcIik7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2VDb2xUb2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlkICwgbWVudUJ1dHRvbiwgcG9wdXAsIG1lbnUsXHJcblx0XHRcdHRhYmxlID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRucyA9ICQubW9iaWxlLm5zLFxyXG5cdFx0XHRmcmFnbWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG5cdFx0aWQgPSB0aGlzLl9pZCgpICsgXCItcG9wdXBcIjtcclxuXHRcdG1lbnVCdXR0b24gPSAkKCBcIjxhIGhyZWY9JyNcIiArIGlkICsgXCInIFwiICtcclxuXHRcdFx0XCJjbGFzcz0nXCIgKyBvcHRzLmNsYXNzZXMuY29sdW1uQnRuICsgXCIgdWktYnRuIFwiICtcclxuXHRcdFx0XCJ1aS1idG4tXCIgKyAoIG9wdHMuY29sdW1uQnRuVGhlbWUgfHwgXCJhXCIgKSArXHJcblx0XHRcdFwiIHVpLWNvcm5lci1hbGwgdWktc2hhZG93IHVpLW1pbmknIFwiICtcclxuXHRcdFx0XCJkYXRhLVwiICsgbnMgKyBcInJlbD0ncG9wdXAnPlwiICsgb3B0cy5jb2x1bW5CdG5UZXh0ICsgXCI8L2E+XCIgKTtcclxuXHRcdHBvcHVwID0gJCggXCI8ZGl2IGNsYXNzPSdcIiArIG9wdHMuY2xhc3Nlcy5wb3B1cCArIFwiJyBpZD0nXCIgKyBpZCArIFwiJz48L2Rpdj5cIiApO1xyXG5cdFx0bWVudSA9ICQoIFwiPGZpZWxkc2V0PjwvZmllbGRzZXQ+XCIgKS5jb250cm9sZ3JvdXAoKTtcclxuXHJcblx0XHQvLyBzZXQgZXh0ZW5zaW9uIGhlcmUsIHNlbmQgXCJmYWxzZVwiIHRvIHRyaWdnZXIgYnVpbGQvcmVidWlsZFxyXG5cdFx0dGhpcy5fYWRkVG9nZ2xlcyggbWVudSwgZmFsc2UgKTtcclxuXHJcblx0XHRtZW51LmFwcGVuZFRvKCBwb3B1cCApO1xyXG5cclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBwb3B1cFsgMCBdICk7XHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggbWVudUJ1dHRvblsgMCBdICk7XHJcblx0XHR0YWJsZS5iZWZvcmUoIGZyYWdtZW50ICk7XHJcblxyXG5cdFx0cG9wdXAucG9wdXAoKTtcclxuXHJcblx0XHRyZXR1cm4gbWVudTtcclxuXHR9LFxyXG5cclxuXHRyZWJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJjb2x1bW50b2dnbGVcIiApIHtcclxuXHRcdFx0Ly8gTk9URTogcmVidWlsZCBwYXNzZXMgXCJmYWxzZVwiLCB3aGlsZSByZWZyZXNoIHBhc3NlcyBcInVuZGVmaW5lZFwiXHJcblx0XHRcdC8vIGJvdGggcmVmcmVzaCB0aGUgdGFibGUsIGJ1dCBpbnNpZGUgYWRkVG9nZ2xlcywgIWZhbHNlIHdpbGwgYmUgdHJ1ZSxcclxuXHRcdFx0Ly8gc28gYSByZWJ1aWxkIGNhbGwgY2FuIGJlIGluZGVudGlmaWVkXHJcblx0XHRcdHRoaXMuX3JlZnJlc2goIGZhbHNlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgaGVhZGVycywgaGlkZGVuQ29sdW1ucywgaW5kZXg7XHJcblxyXG5cdFx0Ly8gQ2FsbGluZyBfc3VwZXIoKSBoZXJlIHVwZGF0ZXMgdGhpcy5oZWFkZXJzXHJcblx0XHR0aGlzLl9zdXBlciggY3JlYXRlICk7XHJcblxyXG5cdFx0aWYgKCAhY3JlYXRlICYmIHRoaXMub3B0aW9ucy5tb2RlID09PSBcImNvbHVtbnRvZ2dsZVwiICkge1xyXG5cdFx0XHRoZWFkZXJzID0gdGhpcy5oZWFkZXJzO1xyXG5cdFx0XHRoaWRkZW5Db2x1bW5zID0gW107XHJcblxyXG5cdFx0XHQvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgY29sdW1uIGhlYWRlciBhc3NvY2lhdGVkIHdpdGggZWFjaCBvbGQgY2hlY2tib3ggYW1vbmcgdGhlXHJcblx0XHRcdC8vIHBvc3QtcmVmcmVzaCBoZWFkZXJzIGFuZCwgaWYgdGhlIGhlYWRlciBpcyBzdGlsbCB0aGVyZSwgbWFrZSBzdXJlIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHRcdC8vIGNvbHVtbiB3aWxsIGJlIGhpZGRlbiBpZiB0aGUgcHJlLXJlZnJlc2ggY2hlY2tib3ggaW5kaWNhdGVzIHRoYXQgdGhlIGNvbHVtbiBpc1xyXG5cdFx0XHQvLyBoaWRkZW4gYnkgcmVjb3JkaW5nIGl0cyBpbmRleCBpbiB0aGUgYXJyYXkgb2YgaGlkZGVuIGNvbHVtbnMuXHJcblx0XHRcdHRoaXMuX21lbnUuZmluZCggXCJpbnB1dFwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGlucHV0ID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0aGVhZGVyID0gaW5wdXQuanFtRGF0YSggXCJoZWFkZXJcIiApLFxyXG5cdFx0XHRcdFx0aW5kZXggPSBoZWFkZXJzLmluZGV4KCBoZWFkZXJbIDAgXSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIGluZGV4ID4gLTEgJiYgIWlucHV0LnByb3AoIFwiY2hlY2tlZFwiICkgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlIGNvbHVtbiBoZWFkZXIgYXNzb2NpYXRlZCB3aXRoIC90aGlzLyBjaGVja2JveCBpcyBzdGlsbCBwcmVzZW50IGluIHRoZVxyXG5cdFx0XHRcdFx0Ly8gcG9zdC1yZWZyZXNoIHRhYmxlIGFuZCB0aGUgY2hlY2tib3ggaXMgbm90IGNoZWNrZWQsIHNvIHRoZSBjb2x1bW4gYXNzb2NpYXRlZFxyXG5cdFx0XHRcdFx0Ly8gd2l0aCB0aGlzIGNvbHVtbiBoZWFkZXIgaXMgY3VycmVudGx5IGhpZGRlbi4gTGV0J3MgcmVjb3JkIHRoYXQuXHJcblx0XHRcdFx0XHRoaWRkZW5Db2x1bW5zLnB1c2goIGluZGV4ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIGNvbHVtbnMgbm90IGJlaW5nIHJlcGxhY2VkIG11c3QgYmUgY2xlYXJlZCBmcm9tIGlucHV0IHRvZ2dsZS1sb2Nrc1xyXG5cdFx0XHR0aGlzLl91bmxvY2tDZWxscyggdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXRhYmxlLWNlbGwtaGlkZGVuLCBcIiArXHJcblx0XHRcdFx0XCIudWktdGFibGUtY2VsbC12aXNpYmxlXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gdXBkYXRlIGNvbHVtbnRvZ2dsZXMgYW5kIGNlbGxzXHJcblx0XHRcdHRoaXMuX2FkZFRvZ2dsZXMoIHRoaXMuX21lbnUsIGNyZWF0ZSApO1xyXG5cclxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCBhbGwgY29sdW1ucyBhcmUgdmlzaWJsZSwgc28gdW5jaGVjayB0aGUgY2hlY2tib3hlcyB0aGF0IGNvcnJlc3BvbmQgdG9cclxuXHRcdFx0Ly8gdGhvc2UgY29sdW1ucyB3ZSd2ZSBmb3VuZCB0byBiZSBoaWRkZW5cclxuXHRcdFx0Zm9yICggaW5kZXggPSBoaWRkZW5Db2x1bW5zLmxlbmd0aCAtIDEgOyBpbmRleCA+IC0xIDsgaW5kZXgtLSApIHtcclxuXHRcdFx0XHRoZWFkZXJzLmVxKCBoaWRkZW5Db2x1bW5zWyBpbmRleCBdICkuanFtRGF0YSggXCJpbnB1dFwiIClcclxuXHRcdFx0XHRcdC5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKVxyXG5cdFx0XHRcdFx0LmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiIClcclxuXHRcdFx0XHRcdC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0VG9nZ2xlU3RhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fbWVudS5maW5kKCBcImlucHV0XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNoZWNrYm94ID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0dGhpcy5jaGVja2VkID0gY2hlY2tib3guanFtRGF0YSggXCJjZWxsc1wiICkuZXEoIDAgKS5jc3MoIFwiZGlzcGxheVwiICkgPT09IFwidGFibGUtY2VsbFwiO1xyXG5cdFx0XHRjaGVja2JveC5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGFibGVcIiwgJC5tb2JpbGUudGFibGUsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRtb2RlOiBcInJlZmxvd1wiLFxyXG5cdFx0Y2xhc3NlczogJC5leHRlbmQoICQubW9iaWxlLnRhYmxlLnByb3RvdHlwZS5vcHRpb25zLmNsYXNzZXMsIHtcclxuXHRcdFx0cmVmbG93VGFibGU6IFwidWktdGFibGUtcmVmbG93XCIsXHJcblx0XHRcdGNlbGxMYWJlbHM6IFwidWktdGFibGUtY2VsbC1sYWJlbFwiXHJcblx0XHR9KVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQvLyBJZiBpdCdzIG5vdCByZWZsb3cgbW9kZSwgcmV0dXJuIGhlcmUuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlICE9PSBcInJlZmxvd1wiICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnJlZmxvd1RhYmxlICk7XHJcblxyXG5cdFx0XHR0aGlzLl91cGRhdGVSZWZsb3coKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRyZWJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJyZWZsb3dcIiApIHtcclxuXHRcdFx0dGhpcy5fcmVmcmVzaCggZmFsc2UgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHRoaXMuX3N1cGVyKCBjcmVhdGUgKTtcclxuXHRcdGlmICggIWNyZWF0ZSAmJiB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJyZWZsb3dcIiApIHtcclxuXHRcdFx0dGhpcy5fdXBkYXRlUmVmbG93KCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF91cGRhdGVSZWZsb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRhYmxlID0gdGhpcyxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBnZXQgaGVhZGVycyBpbiByZXZlcnNlIG9yZGVyIHNvIHRoYXQgdG9wLWxldmVsIGhlYWRlcnMgYXJlIGFwcGVuZGVkIGxhc3RcclxuXHRcdCQoIHRhYmxlLmFsbEhlYWRlcnMuZ2V0KCkucmV2ZXJzZSgpICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjZWxscyA9ICQoIHRoaXMgKS5qcW1EYXRhKCBcImNlbGxzXCIgKSxcclxuXHRcdFx0XHRjb2xzdGFydCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJjb2xzdGFydFwiICksXHJcblx0XHRcdFx0aGllcmFyY2h5Q2xhc3MgPSBjZWxscy5ub3QoIHRoaXMgKS5maWx0ZXIoIFwidGhlYWQgdGhcIiApLmxlbmd0aCAmJiBcIiB1aS10YWJsZS1jZWxsLWxhYmVsLXRvcFwiLFxyXG5cdFx0XHRcdGNvbnRlbnRzID0gJCggdGhpcyApLmNsb25lKCkuY29udGVudHMoKSxcclxuXHRcdFx0XHRpdGVyYXRpb24sIGZpbHRlcjtcclxuXHJcblx0XHRcdFx0aWYgKCBjb250ZW50cy5sZW5ndGggPiAwICApIHtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGhpZXJhcmNoeUNsYXNzICkge1xyXG5cdFx0XHRcdFx0XHRpdGVyYXRpb24gPSBwYXJzZUludCggdGhpcy5nZXRBdHRyaWJ1dGUoIFwiY29sc3BhblwiICksIDEwICk7XHJcblx0XHRcdFx0XHRcdGZpbHRlciA9IFwiXCI7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIGl0ZXJhdGlvbiApIHtcclxuXHRcdFx0XHRcdFx0XHRmaWx0ZXIgPSBcInRkOm50aC1jaGlsZChcIisgaXRlcmF0aW9uICtcIm4gKyBcIiArICggY29sc3RhcnQgKSArXCIpXCI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHRhYmxlLl9hZGRMYWJlbHMoIGNlbGxzLmZpbHRlciggZmlsdGVyICksXHJcblx0XHRcdFx0XHRcdFx0b3B0cy5jbGFzc2VzLmNlbGxMYWJlbHMgKyBoaWVyYXJjaHlDbGFzcywgY29udGVudHMgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRhYmxlLl9hZGRMYWJlbHMoIGNlbGxzLCBvcHRzLmNsYXNzZXMuY2VsbExhYmVscywgY29udGVudHMgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2FkZExhYmVsczogZnVuY3Rpb24oIGNlbGxzLCBsYWJlbCwgY29udGVudHMgKSB7XHJcblx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50c1sgMCBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYWJiclwiICkge1xyXG5cdFx0XHRjb250ZW50cyA9IGNvbnRlbnRzLmVxKCAwICkuYXR0ciggXCJ0aXRsZVwiICk7XHJcblx0XHR9XHJcblx0XHQvLyAubm90IGZpeGVzICM2MDA2XHJcblx0XHRjZWxsc1xyXG5cdFx0XHQubm90KCBcIjpoYXMoYi5cIiArIGxhYmVsICsgXCIpXCIgKVxyXG5cdFx0XHRcdC5wcmVwZW5kKCAkKCBcIjxiIGNsYXNzPSdcIiArIGxhYmVsICsgXCInPjwvYj5cIiApLmFwcGVuZCggY29udGVudHMgKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIFRPRE8gcmVuYW1lIGZpbHRlckNhbGxiYWNrL2RlcHJlY2F0ZSBhbmQgZGVmYXVsdCB0byB0aGUgaXRlbSBpdHNlbGYgYXMgdGhlIGZpcnN0IGFyZ3VtZW50XHJcbnZhciBkZWZhdWx0RmlsdGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiggaW5kZXgsIHNlYXJjaFZhbHVlICkge1xyXG5cdHJldHVybiAoICggXCJcIiArICggJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcImZpbHRlcnRleHRcIiApIHx8ICQoIHRoaXMgKS50ZXh0KCkgKSApXHJcblx0XHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCBzZWFyY2hWYWx1ZSApID09PSAtMSApO1xyXG59O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmZpbHRlcmFibGVcIiwge1xyXG5cclxuXHRpbml0U2VsZWN0b3I6IFwiOmpxbURhdGEoZmlsdGVyPSd0cnVlJylcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZmlsdGVyUmV2ZWFsOiBmYWxzZSxcclxuXHRcdGZpbHRlckNhbGxiYWNrOiBkZWZhdWx0RmlsdGVyQ2FsbGJhY2ssXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHRpbnB1dDogbnVsbCxcclxuXHRcdGNoaWxkcmVuOiBcIj4gbGksID4gb3B0aW9uLCA+IG9wdGdyb3VwIG9wdGlvbiwgPiB0Ym9keSB0ciwgPiAudWktY29udHJvbGdyb3VwLWNvbnRyb2xzID4gLnVpLWJ0biwgPiAudWktY29udHJvbGdyb3VwLWNvbnRyb2xzID4gLnVpLWNoZWNrYm94LCA+IC51aS1jb250cm9sZ3JvdXAtY29udHJvbHMgPiAudWktcmFkaW9cIlxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3NlYXJjaDogbnVsbCxcclxuXHRcdFx0X3RpbWVyOiAwXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9zZXRJbnB1dCggb3B0cy5pbnB1dCApO1xyXG5cdFx0aWYgKCAhb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZmlsdGVySXRlbXMoICggKCB0aGlzLl9zZWFyY2ggJiYgdGhpcy5fc2VhcmNoLnZhbCgpICkgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfb25LZXlVcDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdmFsLCBsYXN0dmFsLFxyXG5cdFx0XHRzZWFyY2ggPSB0aGlzLl9zZWFyY2g7XHJcblxyXG5cdFx0aWYgKCBzZWFyY2ggKSB7XHJcblx0XHRcdHZhbCA9IHNlYXJjaC52YWwoKS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRsYXN0dmFsID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBzZWFyY2hbIDAgXSwgXCJsYXN0dmFsXCIgKSArIFwiXCI7XHJcblxyXG5cdFx0XHRpZiAoIGxhc3R2YWwgJiYgbGFzdHZhbCA9PT0gdmFsICkge1xyXG5cdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGhhbmRsZXIgb25seSBvbmNlIHBlciB2YWx1ZSBjaGFuZ2VcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdGhpcy5fdGltZXIgKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGhpcy5fdGltZXIgKTtcclxuXHRcdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3RpbWVyID0gdGhpcy5fZGVsYXkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVmaWx0ZXJcIiwgbnVsbCwgeyBpbnB1dDogc2VhcmNoIH0gKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBDaGFuZ2UgdmFsIGFzIGxhc3R2YWwgZm9yIG5leHQgZXhlY3V0aW9uXHJcblx0XHRcdFx0c2VhcmNoWyAwIF0uc2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwibGFzdHZhbFwiLCB2YWwgKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fZmlsdGVySXRlbXMoIHZhbCApO1xyXG5cdFx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdFx0fSwgMjUwICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2dldEZpbHRlcmFibGVJdGVtczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0Y2hpbGRyZW4gPSB0aGlzLm9wdGlvbnMuY2hpbGRyZW4sXHJcblx0XHRcdGl0ZW1zID0gIWNoaWxkcmVuID8geyBsZW5ndGg6IDAgfTpcclxuXHRcdFx0XHQkLmlzRnVuY3Rpb24oIGNoaWxkcmVuICkgPyBjaGlsZHJlbigpOlxyXG5cdFx0XHRcdGNoaWxkcmVuLm5vZGVOYW1lID8gJCggY2hpbGRyZW4gKTpcclxuXHRcdFx0XHRjaGlsZHJlbi5qcXVlcnkgPyBjaGlsZHJlbjpcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggY2hpbGRyZW4gKTtcclxuXHJcblx0XHRpZiAoIGl0ZW1zLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0aXRlbXMgPSBlbGVtLmNoaWxkcmVuKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGl0ZW1zO1xyXG5cdH0sXHJcblxyXG5cdF9maWx0ZXJJdGVtczogZnVuY3Rpb24oIHZhbCApIHtcclxuXHRcdHZhciBpZHgsIGNhbGxiYWNrLCBsZW5ndGgsIGRzdCxcclxuXHRcdFx0c2hvdyA9IFtdLFxyXG5cdFx0XHRoaWRlID0gW10sXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGZpbHRlckl0ZW1zID0gdGhpcy5fZ2V0RmlsdGVyYWJsZUl0ZW1zKCk7XHJcblxyXG5cdFx0aWYgKCB2YWwgIT0gbnVsbCApIHtcclxuXHRcdFx0Y2FsbGJhY2sgPSBvcHRzLmZpbHRlckNhbGxiYWNrIHx8IGRlZmF1bHRGaWx0ZXJDYWxsYmFjaztcclxuXHRcdFx0bGVuZ3RoID0gZmlsdGVySXRlbXMubGVuZ3RoO1xyXG5cclxuXHRcdFx0Ly8gUGFydGl0aW9uIHRoZSBpdGVtcyBpbnRvIHRob3NlIHRvIGJlIGhpZGRlbiBhbmQgdGhvc2UgdG8gYmUgc2hvd25cclxuXHRcdFx0Zm9yICggaWR4ID0gMCA7IGlkeCA8IGxlbmd0aCA7IGlkeCsrICkge1xyXG5cdFx0XHRcdGRzdCA9ICggY2FsbGJhY2suY2FsbCggZmlsdGVySXRlbXNbIGlkeCBdLCBpZHgsIHZhbCApICkgPyBoaWRlIDogc2hvdztcclxuXHRcdFx0XHRkc3QucHVzaCggZmlsdGVySXRlbXNbIGlkeCBdICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBub3RoaW5nIGlzIGhpZGRlbiwgdGhlbiB0aGUgZGVjaXNpb24gd2hldGhlciB0byBoaWRlIG9yIHNob3cgdGhlIGl0ZW1zXHJcblx0XHQvLyBpcyBiYXNlZCBvbiB0aGUgXCJmaWx0ZXJSZXZlYWxcIiBvcHRpb24uXHJcblx0XHRpZiAoIGhpZGUubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRmaWx0ZXJJdGVtc1sgKCBvcHRzLmZpbHRlclJldmVhbCAmJiB2YWwubGVuZ3RoID09PSAwICkgP1xyXG5cdFx0XHRcdFwiYWRkQ2xhc3NcIiA6IFwicmVtb3ZlQ2xhc3NcIiBdKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCggaGlkZSApLmFkZENsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0XHQkKCBzaG93ICkucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaENoaWxkV2lkZ2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJmaWx0ZXJcIiwgbnVsbCwge1xyXG5cdFx0XHRpdGVtczogZmlsdGVySXRlbXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRoZSBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIF9yZWZyZXNoQ2hpbGRXaWRnZXQgYXR0ZW1wdHMgdG8gY2FsbFxyXG5cdC8vIHJlZnJlc2ggb24gY29sbGFwc2libGVzZXQsIGNvbnRyb2xncm91cCwgc2VsZWN0bWVudSwgb3IgbGlzdHZpZXdcclxuXHRfcmVmcmVzaENoaWxkV2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3aWRnZXQsIGlkeCxcclxuXHRcdFx0cmVjb2duaXplZFdpZGdldHMgPSBbIFwiY29sbGFwc2libGVzZXRcIiwgXCJzZWxlY3RtZW51XCIsIFwiY29udHJvbGdyb3VwXCIsIFwibGlzdHZpZXdcIiBdO1xyXG5cclxuXHRcdGZvciAoIGlkeCA9IHJlY29nbml6ZWRXaWRnZXRzLmxlbmd0aCAtIDEgOyBpZHggPiAtMSA7IGlkeC0tICkge1xyXG5cdFx0XHR3aWRnZXQgPSByZWNvZ25pemVkV2lkZ2V0c1sgaWR4IF07XHJcblx0XHRcdGlmICggJC5tb2JpbGVbIHdpZGdldCBdICkge1xyXG5cdFx0XHRcdHdpZGdldCA9IHRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1cIiArIHdpZGdldCApO1xyXG5cdFx0XHRcdGlmICggd2lkZ2V0ICYmICQuaXNGdW5jdGlvbiggd2lkZ2V0LnJlZnJlc2ggKSApIHtcclxuXHRcdFx0XHRcdHdpZGdldC5yZWZyZXNoKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gVE9ETzogV2hlbiB0aGUgaW5wdXQgaXMgbm90IGludGVybmFsLCBkbyBub3QgZXZlbiBzdG9yZSBpdCBpbiB0aGlzLl9zZWFyY2hcclxuXHRfc2V0SW5wdXQ6IGZ1bmN0aW9uICggc2VsZWN0b3IgKSB7XHJcblx0XHR2YXIgc2VhcmNoID0gdGhpcy5fc2VhcmNoO1xyXG5cclxuXHRcdC8vIFN0b3AgYSBwZW5kaW5nIGZpbHRlciBvcGVyYXRpb25cclxuXHRcdGlmICggdGhpcy5fdGltZXIgKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRoaXMuX3RpbWVyICk7XHJcblx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHNlYXJjaCApIHtcclxuXHRcdFx0dGhpcy5fb2ZmKCBzZWFyY2gsIFwia2V5dXAgY2hhbmdlIGlucHV0XCIgKTtcclxuXHRcdFx0c2VhcmNoID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHNlbGVjdG9yICkge1xyXG5cdFx0XHRzZWFyY2ggPSBzZWxlY3Rvci5qcXVlcnkgPyBzZWxlY3RvcjpcclxuXHRcdFx0XHRzZWxlY3Rvci5ub2RlTmFtZSA/ICQoIHNlbGVjdG9yICk6XHJcblx0XHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBzZWxlY3RvciApO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHNlYXJjaCwge1xyXG5cdFx0XHRcdGtleWRvd246IFwiX29uS2V5RG93blwiLFxyXG5cdFx0XHRcdGtleXByZXNzOiBcIl9vbktleVByZXNzXCIsXHJcblx0XHRcdFx0a2V5dXA6IFwiX29uS2V5VXBcIixcclxuXHRcdFx0XHRjaGFuZ2U6IFwiX29uS2V5VXBcIixcclxuXHRcdFx0XHRpbnB1dDogXCJfb25LZXlVcFwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NlYXJjaCA9IHNlYXJjaDtcclxuXHR9LFxyXG5cclxuXHQvLyBQcmV2ZW50IGZvcm0gc3VibWlzc2lvblxyXG5cdF9vbktleURvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLkVOVEVSICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLl9wcmV2ZW50S2V5UHJlc3MgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9vbktleVByZXNzOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX3ByZXZlbnRLZXlQcmVzcyApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dGhpcy5fcHJldmVudEtleVByZXNzID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHJlZmlsdGVyID0gISggKCBvcHRpb25zLmZpbHRlclJldmVhbCA9PT0gdW5kZWZpbmVkICkgJiZcclxuXHRcdFx0XHQoIG9wdGlvbnMuZmlsdGVyQ2FsbGJhY2sgPT09IHVuZGVmaW5lZCApICYmXHJcblx0XHRcdFx0KCBvcHRpb25zLmNoaWxkcmVuID09PSB1bmRlZmluZWQgKSApO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmlucHV0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldElucHV0KCBvcHRpb25zLmlucHV0ICk7XHJcblx0XHRcdHJlZmlsdGVyID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHJlZmlsdGVyICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aXRlbXMgPSB0aGlzLl9nZXRGaWx0ZXJhYmxlSXRlbXMoKTtcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdGl0ZW1zLnRvZ2dsZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiwgb3B0cy5maWx0ZXJSZXZlYWwgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGl0ZW1zLnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl90aW1lciApIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGhpcy5fdGltZXIgKTtcclxuXHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fZmlsdGVySXRlbXMoICggKCB0aGlzLl9zZWFyY2ggJiYgdGhpcy5fc2VhcmNoLnZhbCgpICkgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBDcmVhdGUgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVwbGFjZSB0aGUgX3NldE9wdGlvbnMgZnVuY3Rpb24gb2YgYSB3aWRnZXQsXHJcbi8vIGFuZCB3aWxsIHBhc3MgdGhlIG9wdGlvbnMgb24gdG8gdGhlIGlucHV0IG9mIHRoZSBmaWx0ZXJhYmxlLlxyXG52YXIgcmVwbGFjZVNldE9wdGlvbnMgPSBmdW5jdGlvbiggc2VsZiwgb3JpZyApIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0b3JpZy5jYWxsKCB0aGlzLCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX3N5bmNUZXh0SW5wdXRPcHRpb25zKCBvcHRpb25zICk7XHJcblx0XHR9O1xyXG5cdH0sXHJcblx0ckRpdmlkZXJMaXN0SXRlbSA9IC8oXnxcXHMpdWktbGktZGl2aWRlcihcXHN8JCkvLFxyXG5cdG9yaWdEZWZhdWx0RmlsdGVyQ2FsbGJhY2sgPSAkLm1vYmlsZS5maWx0ZXJhYmxlLnByb3RvdHlwZS5vcHRpb25zLmZpbHRlckNhbGxiYWNrO1xyXG5cclxuLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgZmlsdGVyIGNhbGxiYWNrIHdpdGggb25lIHRoYXQgZG9lcyBub3QgaGlkZSBsaXN0IGRpdmlkZXJzXHJcbiQubW9iaWxlLmZpbHRlcmFibGUucHJvdG90eXBlLm9wdGlvbnMuZmlsdGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiggaW5kZXgsIHNlYXJjaFZhbHVlICkge1xyXG5cdHJldHVybiAhdGhpcy5jbGFzc05hbWUubWF0Y2goIHJEaXZpZGVyTGlzdEl0ZW0gKSAmJlxyXG5cdFx0b3JpZ0RlZmF1bHRGaWx0ZXJDYWxsYmFjay5jYWxsKCB0aGlzLCBpbmRleCwgc2VhcmNoVmFsdWUgKTtcclxufTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5maWx0ZXJhYmxlXCIsICQubW9iaWxlLmZpbHRlcmFibGUsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRmaWx0ZXJQbGFjZWhvbGRlcjogXCJGaWx0ZXIgaXRlbXMuLi5cIixcclxuXHRcdGZpbHRlclRoZW1lOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaWR4LCB3aWRnZXROYW1lLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRyZWNvZ25pemVkV2lkZ2V0cyA9IFsgXCJjb2xsYXBzaWJsZXNldFwiLCBcInNlbGVjdG1lbnVcIiwgXCJjb250cm9sZ3JvdXBcIiwgXCJsaXN0dmlld1wiIF0sXHJcblx0XHRcdGNyZWF0ZUhhbmRsZXJzID0ge307XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfd2lkZ2V0OiBudWxsXHJcblx0XHR9KTtcclxuXHJcblx0XHRmb3IgKCBpZHggPSByZWNvZ25pemVkV2lkZ2V0cy5sZW5ndGggLSAxIDsgaWR4ID4gLTEgOyBpZHgtLSApIHtcclxuXHRcdFx0d2lkZ2V0TmFtZSA9IHJlY29nbml6ZWRXaWRnZXRzWyBpZHggXTtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZVsgd2lkZ2V0TmFtZSBdICkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fc2V0V2lkZ2V0KCBlbGVtLmRhdGEoIFwibW9iaWxlLVwiICsgd2lkZ2V0TmFtZSApICkgKSB7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y3JlYXRlSGFuZGxlcnNbIHdpZGdldE5hbWUgKyBcImNyZWF0ZVwiIF0gPSBcIl9oYW5kbGVDcmVhdGVcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLl93aWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX29uKCBlbGVtLCBjcmVhdGVIYW5kbGVycyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVDcmVhdGU6IGZ1bmN0aW9uKCBldnQgKSB7XHJcblx0XHR0aGlzLl9zZXRXaWRnZXQoIHRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1cIiArIGV2dC50eXBlLnN1YnN0cmluZyggMCwgZXZ0LnR5cGUubGVuZ3RoIC0gNiApICkgKTtcclxuXHR9LFxyXG5cclxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGV2ZW50LCBkYXRhICkge1xyXG5cdFx0aWYgKCB0aGlzLl93aWRnZXQgJiYgdGhpcy5fd2lkZ2V0LndpZGdldEZ1bGxOYW1lID09PSBcIm1vYmlsZS1saXN0dmlld1wiICYmXHJcblx0XHRcdHR5cGUgPT09IFwiYmVmb3JlZmlsdGVyXCIgKSB7XHJcblxyXG5cdFx0XHQvLyBBbHNvIHRyaWdnZXIgbGlzdHZpZXdiZWZvcmVmaWx0ZXIgaWYgdGhpcyB3aWRnZXQgaXMgYWxzbyBhIGxpc3R2aWV3XHJcblx0XHRcdHRoaXMuX3dpZGdldC5fdHJpZ2dlciggXCJiZWZvcmVmaWx0ZXJcIiwgZXZlbnQsIGRhdGEgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQYXNzaW5nIGJhY2sgdGhlIHJlc3BvbnNlIGVuYWJsZXMgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCgpXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIHR5cGUsIGV2ZW50LCBkYXRhICk7XHJcblx0fSxcclxuXHJcblx0X3NldFdpZGdldDogZnVuY3Rpb24oIHdpZGdldCApIHtcclxuXHRcdGlmICggIXRoaXMuX3dpZGdldCAmJiB3aWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3dpZGdldCA9IHdpZGdldDtcclxuXHRcdFx0dGhpcy5fd2lkZ2V0Ll9zZXRPcHRpb25zID0gcmVwbGFjZVNldE9wdGlvbnMoIHRoaXMsIHRoaXMuX3dpZGdldC5fc2V0T3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggISF0aGlzLl93aWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3N5bmNUZXh0SW5wdXRPcHRpb25zKCB0aGlzLl93aWRnZXQub3B0aW9ucyApO1xyXG5cdFx0XHRpZiAoIHRoaXMuX3dpZGdldC53aWRnZXROYW1lID09PSBcImxpc3R2aWV3XCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fd2lkZ2V0Lm9wdGlvbnMuaGlkZURpdmlkZXJzID0gdHJ1ZTtcclxuXHRcdFx0XHR0aGlzLl93aWRnZXQuZWxlbWVudC5saXN0dmlldyggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAhIXRoaXMuX3dpZGdldDtcclxuXHR9LFxyXG5cclxuXHRfaXNTZWFyY2hJbnRlcm5hbDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB0aGlzLl9zZWFyY2ggJiYgdGhpcy5fc2VhcmNoLmpxbURhdGEoIFwidWktZmlsdGVyYWJsZS1cIiArIHRoaXMudXVpZCArIFwiLWludGVybmFsXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRJbnB1dDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHVwZGF0ZVBsYWNlaG9sZGVyID0gdHJ1ZSxcclxuXHRcdFx0dGV4dGlucHV0T3B0cyA9IHt9O1xyXG5cclxuXHRcdGlmICggIXNlbGVjdG9yICkge1xyXG5cdFx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gSWdub3JlIHRoZSBjYWxsIHRvIHNldCBhIG5ldyBpbnB1dCBpZiB0aGUgc2VsZWN0b3IgZ29lcyB0byBmYWxzeSBhbmRcclxuXHRcdFx0XHQvLyB0aGUgY3VycmVudCB0ZXh0aW5wdXQgaXMgYWxyZWFkeSBvZiB0aGUgaW50ZXJuYWxseSBnZW5lcmF0ZWQgdmFyaWV0eS5cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIEdlbmVyYXRpbmcgYSBuZXcgdGV4dGlucHV0IHdpZGdldC4gTm8gbmVlZCB0byBzZXQgdGhlIHBsYWNlaG9sZGVyXHJcblx0XHRcdFx0Ly8gZnVydGhlciBkb3duIHRoZSBmdW5jdGlvbi5cclxuXHRcdFx0XHR1cGRhdGVQbGFjZWhvbGRlciA9IGZhbHNlO1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gJCggXCI8aW5wdXQgXCIgK1xyXG5cdFx0XHRcdFx0XCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInR5cGU9J3NlYXJjaCcgXCIgK1xyXG5cdFx0XHRcdFx0XCJwbGFjZWhvbGRlcj0nXCIgKyBvcHRzLmZpbHRlclBsYWNlaG9sZGVyICsgXCInPjwvaW5wdXQ+XCIgKVxyXG5cdFx0XHRcdFx0LmpxbURhdGEoIFwidWktZmlsdGVyYWJsZS1cIiArIHRoaXMudXVpZCArIFwiLWludGVybmFsXCIsIHRydWUgKTtcclxuXHRcdFx0XHQkKCBcIjxmb3JtIGNsYXNzPSd1aS1maWx0ZXJhYmxlJz48L2Zvcm0+XCIgKVxyXG5cdFx0XHRcdFx0LmFwcGVuZCggc2VsZWN0b3IgKVxyXG5cdFx0XHRcdFx0LnN1Ym1pdCggZnVuY3Rpb24oIGV2dCApIHtcclxuXHRcdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHNlbGVjdG9yLmJsdXIoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuaW5zZXJ0QmVmb3JlKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0XHRpZiAoICQubW9iaWxlLnRleHRpbnB1dCApIHtcclxuXHRcdFx0XHRcdGlmICggdGhpcy5vcHRpb25zLmZpbHRlclRoZW1lICE9IG51bGwgKSB7XHJcblx0XHRcdFx0XHRcdHRleHRpbnB1dE9wdHNbIFwidGhlbWVcIiBdID0gb3B0cy5maWx0ZXJUaGVtZTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxlY3Rvci50ZXh0aW5wdXQoIHRleHRpbnB1dE9wdHMgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggc2VsZWN0b3IgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSAmJiB1cGRhdGVQbGFjZWhvbGRlciApIHtcclxuXHRcdFx0dGhpcy5fc2VhcmNoLmF0dHIoIFwicGxhY2Vob2xkZXJcIiwgdGhpcy5vcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHJldCA9IHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0Ly8gTmVlZCB0byBzZXQgdGhlIGZpbHRlclBsYWNlaG9sZGVyIGFmdGVyIGhhdmluZyBlc3RhYmxpc2hlZCB0aGUgc2VhcmNoIGlucHV0XHJcblx0XHRpZiAoIG9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXIgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2VhcmNoLmF0dHIoIFwicGxhY2Vob2xkZXJcIiwgb3B0aW9ucy5maWx0ZXJQbGFjZWhvbGRlciApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmZpbHRlclRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fc2VhcmNoICYmICQubW9iaWxlLnRleHRpbnB1dCApIHtcclxuXHRcdFx0dGhpcy5fc2VhcmNoLnRleHRpbnB1dCggXCJvcHRpb25cIiwgXCJ0aGVtZVwiLCBvcHRpb25zLmZpbHRlclRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHQvLyBUaGUgbGlzdHZpZXcgaW1wbGVtZW50YXRpb24gYWNjb21wYW55aW5nIHRoaXMgZmlsdGVyYWJsZSBiYWNrY29tcGF0IGxheWVyIHdpbGwgY2FsbFxyXG5cdC8vIGZpbHRlcmFibGUucmVmcmVzaCgpIGFmdGVyIGl0J3MgZG9uZSByZWZyZXNoaW5nIHRoZSBsaXN0dmlldyB0byBtYWtlIHN1cmUgdGhlIGZpbHRlcmFibGVcclxuXHQvLyBmaWx0ZXJzIG91dCBhbnkgbmV3IGl0ZW1zIGFkZGVkLiBIb3dldmVyLCB3aGVuIHRoZSBsaXN0dmlldyByZWZyZXNoIGhhcyBiZWVuIGluaXRpYXRlZCBieVxyXG5cdC8vIHRoZSBmaWx0ZXJhYmxlIGl0c2VsZiwgdGhlbiBzdWNoIGZpbHRlcmluZyBoYXMgYWxyZWFkeSB0YWtlbiBwbGFjZSwgYW5kIGNhbGxpbmcgdGhlXHJcblx0Ly8gZmlsdGVyYWJsZSdzIHJlZnJlc2goKSBtZXRob2Qgd2lsbCBjYXVzZSBhbiBpbmZpbml0ZSByZWN1cnNpb24uIFdlIHN0b3AgdGhpcyBieSBzZXR0aW5nIGFcclxuXHQvLyBmbGFnIHRoYXQgd2lsbCBjYXVzZSB0aGUgZmlsdGVyYWJsZSdzIHJlZnJlc2goKSBtZXRob2QgdG8gc2hvcnQtY2lyY3VpdC5cclxuXHRfcmVmcmVzaENoaWxkV2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2hpbmdDaGlsZFdpZGdldCA9IHRydWU7XHJcblx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHRcdHRoaXMuX3JlZnJlc2hpbmdDaGlsZFdpZGdldCA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhdGhpcy5fcmVmcmVzaGluZ0NoaWxkV2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSApIHtcclxuXHRcdFx0dGhpcy5fc2VhcmNoLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHRfc3luY1RleHRJbnB1dE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGlkeCxcclxuXHRcdFx0dGV4dGlucHV0T3B0aW9ucyA9IHt9O1xyXG5cclxuXHRcdC8vIFdlIG9ubHkgc3luYyBvcHRpb25zIGlmIHRoZSBmaWx0ZXJhYmxlJ3MgdGV4dGlucHV0IGlzIG9mIHRoZSBpbnRlcm5hbGx5XHJcblx0XHQvLyBnZW5lcmF0ZWQgdmFyaWV0eSwgcmF0aGVyIHRoYW4gb25lIHNwZWNpZmllZCBieSB0aGUgdXNlci5cclxuXHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICYmICQubW9iaWxlLnRleHRpbnB1dCApIHtcclxuXHJcblx0XHRcdC8vIEFwcGx5IG9ubHkgdGhlIG9wdGlvbnMgdW5kZXJzdG9vZCBieSB0ZXh0aW5wdXRcclxuXHRcdFx0Zm9yICggaWR4IGluICQubW9iaWxlLnRleHRpbnB1dC5wcm90b3R5cGUub3B0aW9ucyApIHtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnNbIGlkeCBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGlkeCA9PT0gXCJ0aGVtZVwiICYmIHRoaXMub3B0aW9ucy5maWx0ZXJUaGVtZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdFx0XHR0ZXh0aW5wdXRPcHRpb25zWyBpZHggXSA9IHRoaXMub3B0aW9ucy5maWx0ZXJUaGVtZTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRleHRpbnB1dE9wdGlvbnNbIGlkeCBdID0gb3B0aW9uc1sgaWR4IF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3NlYXJjaC50ZXh0aW5wdXQoIFwib3B0aW9uXCIsIHRleHRpbnB1dE9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gSW5zdGFudGlhdGUgYSBmaWx0ZXJhYmxlIG9uIGEgbGlzdHZpZXcgdGhhdCBoYXMgdGhlIGRhdGEtZmlsdGVyPVwidHJ1ZVwiIGF0dHJpYnV0ZVxyXG4vLyBUaGlzIGlzIG5vdCBuZWNlc3NhcnkgZm9yIHN0YXRpYyBjb250ZW50LCBiZWNhdXNlIHRoZSBhdXRvLWVuaGFuY2UgdGFrZXMgY2FyZSBvZiBpbnN0YW50aWF0aW5nXHJcbi8vIHRoZSBmaWx0ZXJhYmxlIHVwb24gZW5jb3VudGVyaW5nIGRhdGEtZmlsdGVyPVwidHJ1ZVwiLiBIb3dldmVyLCBiZWNhdXNlIG9mIDEuMy54IGl0IGlzIGV4cGVjdGVkXHJcbi8vIHRoYXQgYSBsaXN0dmlldyB3aXRoIGRhdGEtZmlsdGVyPVwidHJ1ZVwiIHdpbGwgYmUgZmlsdGVyYWJsZSBldmVuIGlmIHlvdSBqdXN0IGluc3RhbnRpYXRlIGFcclxuLy8gbGlzdHZpZXcgb24gaXQuIFRoZSBleHRlbnNpb24gYmVsb3cgZW5zdXJlcyB0aGF0IHRoaXMgY29udGludWVzIHRvIGhhcHBlbiBpbiAxLjQueC5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQubW9iaWxlLmxpc3R2aWV3LCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZmlsdGVyOiBmYWxzZVxyXG5cdH0sXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5maWx0ZXIgPT09IHRydWUgJiZcclxuXHRcdFx0XHQhdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLWZpbHRlcmFibGVcIiApICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmlsdGVyYWJsZSgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZmlsdGVyYWJsZTtcclxuXHJcblx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5maWx0ZXIgPT09IHRydWUgKSB7XHJcblx0XHRcdGZpbHRlcmFibGUgPSB0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtZmlsdGVyYWJsZVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIGZpbHRlcmFibGUgKSB7XHJcblx0XHRcdFx0ZmlsdGVyYWJsZS5yZWZyZXNoKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBVSSBUYWJzIGZhZGYyYjMxMmEwNTA0MDQzNjQ1MWM2NGJiZmFmNDgxNGJjNjJjNTZcclxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKlxyXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS90YWJzL1xyXG4gKlxyXG4gKiBEZXBlbmRzOlxyXG4gKlx0anF1ZXJ5LnVpLmNvcmUuanNcclxuICpcdGpxdWVyeS51aS53aWRnZXQuanNcclxuICovXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHRhYklkID0gMCxcclxuXHRyaGFzaCA9IC8jLiokLztcclxuXHJcbmZ1bmN0aW9uIGdldE5leHRUYWJJZCgpIHtcclxuXHRyZXR1cm4gKyt0YWJJZDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNMb2NhbCggYW5jaG9yICkge1xyXG5cdHJldHVybiBhbmNob3IuaGFzaC5sZW5ndGggPiAxICYmXHJcblx0XHRkZWNvZGVVUklDb21wb25lbnQoIGFuY2hvci5ocmVmLnJlcGxhY2UoIHJoYXNoLCBcIlwiICkgKSA9PT1cclxuXHRcdFx0ZGVjb2RlVVJJQ29tcG9uZW50KCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoIHJoYXNoLCBcIlwiICkgKTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwidWkudGFic1wiLCB7XHJcblx0dmVyc2lvbjogXCJmYWRmMmIzMTJhMDUwNDA0MzY0NTFjNjRiYmZhZjQ4MTRiYzYyYzU2XCIsXHJcblx0ZGVsYXk6IDMwMCxcclxuXHRvcHRpb25zOiB7XHJcblx0XHRhY3RpdmU6IG51bGwsXHJcblx0XHRjb2xsYXBzaWJsZTogZmFsc2UsXHJcblx0XHRldmVudDogXCJjbGlja1wiLFxyXG5cdFx0aGVpZ2h0U3R5bGU6IFwiY29udGVudFwiLFxyXG5cdFx0aGlkZTogbnVsbCxcclxuXHRcdHNob3c6IG51bGwsXHJcblxyXG5cdFx0Ly8gY2FsbGJhY2tzXHJcblx0XHRhY3RpdmF0ZTogbnVsbCxcclxuXHRcdGJlZm9yZUFjdGl2YXRlOiBudWxsLFxyXG5cdFx0YmVmb3JlTG9hZDogbnVsbCxcclxuXHRcdGxvYWQ6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcyxcclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIiApXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS10YWJzLWNvbGxhcHNpYmxlXCIsIG9wdGlvbnMuY29sbGFwc2libGUgKVxyXG5cdFx0XHQvLyBQcmV2ZW50IHVzZXJzIGZyb20gZm9jdXNpbmcgZGlzYWJsZWQgdGFicyB2aWEgY2xpY2tcclxuXHRcdFx0LmRlbGVnYXRlKCBcIi51aS10YWJzLW5hdiA+IGxpXCIsIFwibW91c2Vkb3duXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQvLyBzdXBwb3J0OiBJRSA8OVxyXG5cdFx0XHQvLyBQcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGFjdGlvbiBpbiBtb3VzZWRvd24gZG9lc24ndCBwcmV2ZW50IElFXHJcblx0XHRcdC8vIGZyb20gZm9jdXNpbmcgdGhlIGVsZW1lbnQsIHNvIGlmIHRoZSBhbmNob3IgZ2V0cyBmb2N1c2VkLCBibHVyLlxyXG5cdFx0XHQvLyBXZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IGZvY3VzaW5nIHRoZSBwcmV2aW91c2x5IGZvY3VzZWRcclxuXHRcdFx0Ly8gZWxlbWVudCBzaW5jZSBjbGlja2luZyBvbiBhIG5vbi1mb2N1c2FibGUgZWxlbWVudCBzaG91bGQgZm9jdXNcclxuXHRcdFx0Ly8gdGhlIGJvZHkgYW55d2F5LlxyXG5cdFx0XHQuZGVsZWdhdGUoIFwiLnVpLXRhYnMtYW5jaG9yXCIsIFwiZm9jdXNcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmNsb3Nlc3QoIFwibGlcIiApLmlzKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3Byb2Nlc3NUYWJzKCk7XHJcblx0XHRvcHRpb25zLmFjdGl2ZSA9IHRoaXMuX2luaXRpYWxBY3RpdmUoKTtcclxuXHJcblx0XHQvLyBUYWtlIGRpc2FibGluZyB0YWJzIHZpYSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MXHJcblx0XHQvLyBpbnRvIGFjY291bnQgYW5kIHVwZGF0ZSBvcHRpb24gcHJvcGVybHkuXHJcblx0XHRpZiAoICQuaXNBcnJheSggb3B0aW9ucy5kaXNhYmxlZCApICkge1xyXG5cdFx0XHRvcHRpb25zLmRpc2FibGVkID0gJC51bmlxdWUoIG9wdGlvbnMuZGlzYWJsZWQuY29uY2F0KFxyXG5cdFx0XHRcdCQubWFwKCB0aGlzLnRhYnMuZmlsdGVyKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICksIGZ1bmN0aW9uKCBsaSApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGF0LnRhYnMuaW5kZXgoIGxpICk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KSApLnNvcnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjaGVjayBmb3IgbGVuZ3RoIGF2b2lkcyBlcnJvciB3aGVuIGluaXRpYWxpemluZyBlbXB0eSBsaXN0XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmUgIT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMuYWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggb3B0aW9ucy5hY3RpdmUgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuYWN0aXZlLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5sb2FkKCBvcHRpb25zLmFjdGl2ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9pbml0aWFsQWN0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhY3RpdmUgPSB0aGlzLm9wdGlvbnMuYWN0aXZlLFxyXG5cdFx0XHRjb2xsYXBzaWJsZSA9IHRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSxcclxuXHRcdFx0bG9jYXRpb25IYXNoID0gbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoIDEgKTtcclxuXHJcblx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCApIHtcclxuXHRcdFx0Ly8gY2hlY2sgdGhlIGZyYWdtZW50IGlkZW50aWZpZXIgaW4gdGhlIFVSTFxyXG5cdFx0XHRpZiAoIGxvY2F0aW9uSGFzaCApIHtcclxuXHRcdFx0XHR0aGlzLnRhYnMuZWFjaChmdW5jdGlvbiggaSwgdGFiICkge1xyXG5cdFx0XHRcdFx0aWYgKCAkKCB0YWIgKS5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApID09PSBsb2NhdGlvbkhhc2ggKSB7XHJcblx0XHRcdFx0XHRcdGFjdGl2ZSA9IGk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gY2hlY2sgZm9yIGEgdGFiIG1hcmtlZCBhY3RpdmUgdmlhIGEgY2xhc3NcclxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgKSB7XHJcblx0XHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLnRhYnMuZmlsdGVyKCBcIi51aS10YWJzLWFjdGl2ZVwiICkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gbm8gYWN0aXZlIHRhYiwgc2V0IHRvIGZhbHNlXHJcblx0XHRcdGlmICggYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gLTEgKSB7XHJcblx0XHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmxlbmd0aCA/IDAgOiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGhhbmRsZSBudW1iZXJzOiBuZWdhdGl2ZSwgb3V0IG9mIHJhbmdlXHJcblx0XHRpZiAoIGFjdGl2ZSAhPT0gZmFsc2UgKSB7XHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmVxKCBhY3RpdmUgKSApO1xyXG5cdFx0XHRpZiAoIGFjdGl2ZSA9PT0gLTEgKSB7XHJcblx0XHRcdFx0YWN0aXZlID0gY29sbGFwc2libGUgPyBmYWxzZSA6IDA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBkb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2VcclxuXHRcdGlmICggIWNvbGxhcHNpYmxlICYmIGFjdGl2ZSA9PT0gZmFsc2UgJiYgdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0YWN0aXZlID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYWN0aXZlO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dGFiOiB0aGlzLmFjdGl2ZSxcclxuXHRcdFx0cGFuZWw6ICF0aGlzLmFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKVxyXG5cdFx0fTtcclxuXHR9LFxyXG5cclxuXHRfdGFiS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGZvY3VzZWRUYWIgPSAkKCB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQgKS5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHRcdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMudGFicy5pbmRleCggZm9jdXNlZFRhYiApLFxyXG5cdFx0XHRnb2luZ0ZvcndhcmQgPSB0cnVlO1xyXG5cclxuXHRcdGlmICggdGhpcy5faGFuZGxlUGFnZU5hdiggZXZlbnQgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOlxyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5ET1dOOlxyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXgrKztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuVVA6XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6XHJcblx0XHRcdFx0Z29pbmdGb3J3YXJkID0gZmFsc2U7XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleC0tO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5FTkQ6XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMuYW5jaG9ycy5sZW5ndGggLSAxO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5IT01FOlxyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5TUEFDRTpcclxuXHRcdFx0XHQvLyBBY3RpdmF0ZSBvbmx5LCBubyBjb2xsYXBzaW5nXHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5FTlRFUjpcclxuXHRcdFx0XHQvLyBUb2dnbGUgKGNhbmNlbCBkZWxheWVkIGFjdGl2YXRpb24sIGFsbG93IGNvbGxhcHNpbmcpXHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xyXG5cdFx0XHRcdC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgY29sbGFwc2Ugb3IgYWN0aXZhdGVcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCA9PT0gdGhpcy5vcHRpb25zLmFjdGl2ZSA/IGZhbHNlIDogc2VsZWN0ZWRJbmRleCApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9jdXMgdGhlIGFwcHJvcHJpYXRlIHRhYiwgYmFzZWQgb24gd2hpY2gga2V5IHdhcyBwcmVzc2VkXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcclxuXHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLl9mb2N1c05leHRUYWIoIHNlbGVjdGVkSW5kZXgsIGdvaW5nRm9yd2FyZCApO1xyXG5cclxuXHRcdC8vIE5hdmlnYXRpbmcgd2l0aCBjb250cm9sIGtleSB3aWxsIHByZXZlbnQgYXV0b21hdGljIGFjdGl2YXRpb25cclxuXHRcdGlmICggIWV2ZW50LmN0cmxLZXkgKSB7XHJcblx0XHRcdC8vIFVwZGF0ZSBhcmlhLXNlbGVjdGVkIGltbWVkaWF0ZWx5IHNvIHRoYXQgQVQgdGhpbmsgdGhlIHRhYiBpcyBhbHJlYWR5IHNlbGVjdGVkLlxyXG5cdFx0XHQvLyBPdGhlcndpc2UgQVQgbWF5IGNvbmZ1c2UgdGhlIHVzZXIgYnkgc3RhdGluZyB0aGF0IHRoZXkgbmVlZCB0byBhY3RpdmF0ZSB0aGUgdGFiLFxyXG5cdFx0XHQvLyBidXQgdGhlIHRhYiB3aWxsIGFscmVhZHkgYmUgYWN0aXZhdGVkIGJ5IHRoZSB0aW1lIHRoZSBhbm5vdW5jZW1lbnQgZmluaXNoZXMuXHJcblx0XHRcdGZvY3VzZWRUYWIuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIFwiZmFsc2VcIiApO1xyXG5cdFx0XHR0aGlzLnRhYnMuZXEoIHNlbGVjdGVkSW5kZXggKS5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMuYWN0aXZhdGluZyA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMub3B0aW9uKCBcImFjdGl2ZVwiLCBzZWxlY3RlZEluZGV4ICk7XHJcblx0XHRcdH0sIHRoaXMuZGVsYXkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcGFuZWxLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDdHJsK3VwIG1vdmVzIGZvY3VzIHRvIHRoZSBjdXJyZW50IHRhYlxyXG5cdFx0aWYgKCBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5VUCApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dGhpcy5hY3RpdmUuZm9jdXMoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBBbHQrcGFnZSB1cC9kb3duIG1vdmVzIGZvY3VzIHRvIHRoZSBwcmV2aW91cy9uZXh0IHRhYiAoYW5kIGFjdGl2YXRlcylcclxuXHRfaGFuZGxlUGFnZU5hdjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfVVAgKSB7XHJcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgLSAxLCBmYWxzZSApICk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfRE9XTiApIHtcclxuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSArIDEsIHRydWUgKSApO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZmluZE5leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkge1xyXG5cdFx0dmFyIGxhc3RUYWJJbmRleCA9IHRoaXMudGFicy5sZW5ndGggLSAxO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNvbnN0cmFpbigpIHtcclxuXHRcdFx0aWYgKCBpbmRleCA+IGxhc3RUYWJJbmRleCApIHtcclxuXHRcdFx0XHRpbmRleCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBpbmRleCA8IDAgKSB7XHJcblx0XHRcdFx0aW5kZXggPSBsYXN0VGFiSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGluZGV4O1xyXG5cdFx0fVxyXG5cclxuXHRcdHdoaWxlICggJC5pbkFycmF5KCBjb25zdHJhaW4oKSwgdGhpcy5vcHRpb25zLmRpc2FibGVkICkgIT09IC0xICkge1xyXG5cdFx0XHRpbmRleCA9IGdvaW5nRm9yd2FyZCA/IGluZGV4ICsgMSA6IGluZGV4IC0gMTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaW5kZXg7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7XHJcblx0XHRpbmRleCA9IHRoaXMuX2ZpbmROZXh0VGFiKCBpbmRleCwgZ29pbmdGb3J3YXJkICk7XHJcblx0XHR0aGlzLnRhYnMuZXEoIGluZGV4ICkuZm9jdXMoKTtcclxuXHRcdHJldHVybiBpbmRleDtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdGlmICgga2V5ID09PSBcImFjdGl2ZVwiICkge1xyXG5cdFx0XHQvLyBfYWN0aXZhdGUoKSB3aWxsIGhhbmRsZSBpbnZhbGlkIHZhbHVlcyBhbmQgdXBkYXRlIHRoaXMub3B0aW9uc1xyXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdmFsdWUgKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XHJcblx0XHRcdC8vIGRvbid0IHVzZSB0aGUgd2lkZ2V0IGZhY3RvcnkncyBkaXNhYmxlZCBoYW5kbGluZ1xyXG5cdFx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCB2YWx1ZSApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUpO1xyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImNvbGxhcHNpYmxlXCIgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS10YWJzLWNvbGxhcHNpYmxlXCIsIHZhbHVlICk7XHJcblx0XHRcdC8vIFNldHRpbmcgY29sbGFwc2libGU6IGZhbHNlIHdoaWxlIGNvbGxhcHNlZDsgb3BlbiBmaXJzdCBwYW5lbFxyXG5cdFx0XHRpZiAoICF2YWx1ZSAmJiB0aGlzLm9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSApIHtcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggMCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiZXZlbnRcIiApIHtcclxuXHRcdFx0dGhpcy5fc2V0dXBFdmVudHMoIHZhbHVlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiaGVpZ2h0U3R5bGVcIiApIHtcclxuXHRcdFx0dGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdmFsdWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdGFiSWQ6IGZ1bmN0aW9uKCB0YWIgKSB7XHJcblx0XHRyZXR1cm4gdGFiLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICkgfHwgXCJ1aS10YWJzLVwiICsgZ2V0TmV4dFRhYklkKCk7XHJcblx0fSxcclxuXHJcblx0X3Nhbml0aXplU2VsZWN0b3I6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0cmV0dXJuIGhhc2ggPyBoYXNoLnJlcGxhY2UoIC9bIVwiJCUmJygpKissLlxcLzo7PD0+P0BcXFtcXF1cXF5ge3x9fl0vZywgXCJcXFxcJCZcIiApIDogXCJcIjtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRsaXMgPSB0aGlzLnRhYmxpc3QuY2hpbGRyZW4oIFwiOmhhcyhhW2hyZWZdKVwiICk7XHJcblxyXG5cdFx0Ly8gZ2V0IGRpc2FibGVkIHRhYnMgZnJvbSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MXHJcblx0XHQvLyB0aGlzIHdpbGwgZ2V0IGNvbnZlcnRlZCB0byBhIGJvb2xlYW4gaWYgbmVlZGVkIGluIF9yZWZyZXNoKClcclxuXHRcdG9wdGlvbnMuZGlzYWJsZWQgPSAkLm1hcCggbGlzLmZpbHRlciggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApLCBmdW5jdGlvbiggdGFiICkge1xyXG5cdFx0XHRyZXR1cm4gbGlzLmluZGV4KCB0YWIgKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3Byb2Nlc3NUYWJzKCk7XHJcblxyXG5cdFx0Ly8gd2FzIGNvbGxhcHNlZCBvciBubyB0YWJzXHJcblx0XHRpZiAoIG9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSB8fCAhdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XHJcblx0XHQvLyB3YXMgYWN0aXZlLCBidXQgYWN0aXZlIHRhYiBpcyBnb25lXHJcblx0XHR9IGVsc2UgaWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggJiYgISQuY29udGFpbnMoIHRoaXMudGFibGlzdFsgMCBdLCB0aGlzLmFjdGl2ZVsgMCBdICkgKSB7XHJcblx0XHRcdC8vIGFsbCByZW1haW5pbmcgdGFicyBhcmUgZGlzYWJsZWRcclxuXHRcdFx0aWYgKCB0aGlzLnRhYnMubGVuZ3RoID09PSBvcHRpb25zLmRpc2FibGVkLmxlbmd0aCApIHtcclxuXHRcdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xyXG5cdFx0XHQvLyBhY3RpdmF0ZSBwcmV2aW91cyB0YWJcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZmluZE5leHRUYWIoIE1hdGgubWF4KCAwLCBvcHRpb25zLmFjdGl2ZSAtIDEgKSwgZmFsc2UgKSApO1xyXG5cdFx0XHR9XHJcblx0XHQvLyB3YXMgYWN0aXZlLCBhY3RpdmUgdGFiIHN0aWxsIGV4aXN0c1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIGFjdGl2ZSBpbmRleCBpcyBjb3JyZWN0XHJcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLmFjdGl2ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdHRoaXMuX3NldHVwRXZlbnRzKCB0aGlzLm9wdGlvbnMuZXZlbnQgKTtcclxuXHRcdHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSApO1xyXG5cclxuXHRcdHRoaXMudGFicy5ub3QoIHRoaXMuYWN0aXZlICkuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcImZhbHNlXCIsXHJcblx0XHRcdHRhYkluZGV4OiAtMVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnBhbmVscy5ub3QoIHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApIClcclxuXHRcdFx0LmhpZGUoKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIixcclxuXHRcdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSBvbmUgdGFiIGlzIGluIHRoZSB0YWIgb3JkZXJcclxuXHRcdGlmICggIXRoaXMuYWN0aXZlLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy50YWJzLmVxKCAwICkuYXR0ciggXCJ0YWJJbmRleFwiLCAwICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHRcdFx0dGFiSW5kZXg6IDBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClcclxuXHRcdFx0XHQuc2hvdygpXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcHJvY2Vzc1RhYnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMudGFibGlzdCA9IHRoaXMuX2dldExpc3QoKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIiApXHJcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJ0YWJsaXN0XCIgKTtcclxuXHJcblx0XHR0aGlzLnRhYnMgPSB0aGlzLnRhYmxpc3QuZmluZCggXCI+IGxpOmhhcyhhW2hyZWZdKVwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcFwiIClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdHJvbGU6IFwidGFiXCIsXHJcblx0XHRcdFx0dGFiSW5kZXg6IC0xXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYW5jaG9ycyA9IHRoaXMudGFicy5tYXAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICQoIFwiYVwiLCB0aGlzIClbIDAgXTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtYW5jaG9yXCIgKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0cm9sZTogXCJwcmVzZW50YXRpb25cIixcclxuXHRcdFx0XHR0YWJJbmRleDogLTFcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wYW5lbHMgPSAkKCk7XHJcblxyXG5cdFx0dGhpcy5hbmNob3JzLmVhY2goZnVuY3Rpb24oIGksIGFuY2hvciApIHtcclxuXHRcdFx0dmFyIHNlbGVjdG9yLCBwYW5lbCwgcGFuZWxJZCxcclxuXHRcdFx0XHRhbmNob3JJZCA9ICQoIGFuY2hvciApLnVuaXF1ZUlkKCkuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdFx0dGFiID0gJCggYW5jaG9yICkuY2xvc2VzdCggXCJsaVwiICksXHJcblx0XHRcdFx0b3JpZ2luYWxBcmlhQ29udHJvbHMgPSB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcclxuXHJcblx0XHRcdC8vIGlubGluZSB0YWJcclxuXHRcdFx0aWYgKCBpc0xvY2FsKCBhbmNob3IgKSApIHtcclxuXHRcdFx0XHRzZWxlY3RvciA9IGFuY2hvci5oYXNoO1xyXG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHRoYXQuX3Nhbml0aXplU2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcclxuXHRcdFx0Ly8gcmVtb3RlIHRhYlxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBhbmVsSWQgPSB0aGF0Ll90YWJJZCggdGFiICk7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSBcIiNcIiArIHBhbmVsSWQ7XHJcblx0XHRcdFx0cGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggc2VsZWN0b3IgKTtcclxuXHRcdFx0XHRpZiAoICFwYW5lbC5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRwYW5lbCA9IHRoYXQuX2NyZWF0ZVBhbmVsKCBwYW5lbElkICk7XHJcblx0XHRcdFx0XHRwYW5lbC5pbnNlcnRBZnRlciggdGhhdC5wYW5lbHNbIGkgLSAxIF0gfHwgdGhhdC50YWJsaXN0ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBwYW5lbC5sZW5ndGgpIHtcclxuXHRcdFx0XHR0aGF0LnBhbmVscyA9IHRoYXQucGFuZWxzLmFkZCggcGFuZWwgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG9yaWdpbmFsQXJpYUNvbnRyb2xzICkge1xyXG5cdFx0XHRcdHRhYi5kYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiLCBvcmlnaW5hbEFyaWFDb250cm9scyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRhYi5hdHRyKHtcclxuXHRcdFx0XHRcImFyaWEtY29udHJvbHNcIjogc2VsZWN0b3Iuc3Vic3RyaW5nKCAxICksXHJcblx0XHRcdFx0XCJhcmlhLWxhYmVsbGVkYnlcIjogYW5jaG9ySWRcclxuXHRcdFx0fSk7XHJcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGFuY2hvcklkICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhbmVsc1xyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tXCIgKVxyXG5cdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwidGFicGFuZWxcIiApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGFsbG93IG92ZXJyaWRpbmcgaG93IHRvIGZpbmQgdGhlIGxpc3QgZm9yIHJhcmUgdXNhZ2Ugc2NlbmFyaW9zICgjNzcxNSlcclxuXHRfZ2V0TGlzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoIFwib2wsdWxcIiApLmVxKCAwICk7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZVBhbmVsOiBmdW5jdGlvbiggaWQgKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2PlwiIClcclxuXHRcdFx0LmF0dHIoIFwiaWRcIiwgaWQgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tXCIgKVxyXG5cdFx0XHQuZGF0YSggXCJ1aS10YWJzLWRlc3Ryb3lcIiwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cERpc2FibGVkOiBmdW5jdGlvbiggZGlzYWJsZWQgKSB7XHJcblx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWQubGVuZ3RoICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSBpZiAoIGRpc2FibGVkLmxlbmd0aCA9PT0gdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBkaXNhYmxlIHRhYnNcclxuXHRcdGZvciAoIHZhciBpID0gMCwgbGk7ICggbGkgPSB0aGlzLnRhYnNbIGkgXSApOyBpKysgKSB7XHJcblx0XHRcdGlmICggZGlzYWJsZWQgPT09IHRydWUgfHwgJC5pbkFycmF5KCBpLCBkaXNhYmxlZCApICE9PSAtMSApIHtcclxuXHRcdFx0XHQkKCBsaSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApXHJcblx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIFwidHJ1ZVwiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCggbGkgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBldmVudHMgPSB7XHJcblx0XHRcdGNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdGlmICggZXZlbnQgKSB7XHJcblx0XHRcdCQuZWFjaCggZXZlbnQuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiggaW5kZXgsIGV2ZW50TmFtZSApIHtcclxuXHRcdFx0XHRldmVudHNbIGV2ZW50TmFtZSBdID0gXCJfZXZlbnRIYW5kbGVyXCI7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29mZiggdGhpcy5hbmNob3JzLmFkZCggdGhpcy50YWJzICkuYWRkKCB0aGlzLnBhbmVscyApICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5hbmNob3JzLCBldmVudHMgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnRhYnMsIHsga2V5ZG93bjogXCJfdGFiS2V5ZG93blwiIH0gKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnBhbmVscywgeyBrZXlkb3duOiBcIl9wYW5lbEtleWRvd25cIiB9ICk7XHJcblxyXG5cdFx0dGhpcy5fZm9jdXNhYmxlKCB0aGlzLnRhYnMgKTtcclxuXHRcdHRoaXMuX2hvdmVyYWJsZSggdGhpcy50YWJzICk7XHJcblx0fSxcclxuXHJcblx0X3NldHVwSGVpZ2h0U3R5bGU6IGZ1bmN0aW9uKCBoZWlnaHRTdHlsZSApIHtcclxuXHRcdHZhciBtYXhIZWlnaHQsXHJcblx0XHRcdHBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTtcclxuXHJcblx0XHRpZiAoIGhlaWdodFN0eWxlID09PSBcImZpbGxcIiApIHtcclxuXHRcdFx0bWF4SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpO1xyXG5cdFx0XHRtYXhIZWlnaHQgLT0gdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkgLSB0aGlzLmVsZW1lbnQuaGVpZ2h0KCk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuc2libGluZ3MoIFwiOnZpc2libGVcIiApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IGVsZW0uY3NzKCBcInBvc2l0aW9uXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG1heEhlaWdodCAtPSBlbGVtLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCkubm90KCB0aGlzLnBhbmVscyApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bWF4SGVpZ2h0IC09ICQoIHRoaXMgKS5vdXRlckhlaWdodCggdHJ1ZSApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmhlaWdodCggTWF0aC5tYXgoIDAsIG1heEhlaWdodCAtXHJcblx0XHRcdFx0XHQkKCB0aGlzICkuaW5uZXJIZWlnaHQoKSArICQoIHRoaXMgKS5oZWlnaHQoKSApICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcclxuXHRcdH0gZWxzZSBpZiAoIGhlaWdodFN0eWxlID09PSBcImF1dG9cIiApIHtcclxuXHRcdFx0bWF4SGVpZ2h0ID0gMDtcclxuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRtYXhIZWlnaHQgPSBNYXRoLm1heCggbWF4SGVpZ2h0LCAkKCB0aGlzICkuaGVpZ2h0KCBcIlwiICkuaGVpZ2h0KCkgKTtcclxuXHRcdFx0fSkuaGVpZ2h0KCBtYXhIZWlnaHQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0YWN0aXZlID0gdGhpcy5hY3RpdmUsXHJcblx0XHRcdGFuY2hvciA9ICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSxcclxuXHRcdFx0dGFiID0gYW5jaG9yLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cdFx0XHRjbGlja2VkSXNBY3RpdmUgPSB0YWJbIDAgXSA9PT0gYWN0aXZlWyAwIF0sXHJcblx0XHRcdGNvbGxhcHNpbmcgPSBjbGlja2VkSXNBY3RpdmUgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSxcclxuXHRcdFx0dG9TaG93ID0gY29sbGFwc2luZyA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSxcclxuXHRcdFx0dG9IaWRlID0gIWFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggYWN0aXZlICksXHJcblx0XHRcdGV2ZW50RGF0YSA9IHtcclxuXHRcdFx0XHRvbGRUYWI6IGFjdGl2ZSxcclxuXHRcdFx0XHRvbGRQYW5lbDogdG9IaWRlLFxyXG5cdFx0XHRcdG5ld1RhYjogY29sbGFwc2luZyA/ICQoKSA6IHRhYixcclxuXHRcdFx0XHRuZXdQYW5lbDogdG9TaG93XHJcblx0XHRcdH07XHJcblxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRpZiAoIHRhYi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgfHxcclxuXHRcdFx0XHQvLyB0YWIgaXMgYWxyZWFkeSBsb2FkaW5nXHJcblx0XHRcdFx0dGFiLmhhc0NsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICkgfHxcclxuXHRcdFx0XHQvLyBjYW4ndCBzd2l0Y2ggZHVybmluZyBhbiBhbmltYXRpb25cclxuXHRcdFx0XHR0aGlzLnJ1bm5pbmcgfHxcclxuXHRcdFx0XHQvLyBjbGljayBvbiBhY3RpdmUgaGVhZGVyLCBidXQgbm90IGNvbGxhcHNpYmxlXHJcblx0XHRcdFx0KCBjbGlja2VkSXNBY3RpdmUgJiYgIW9wdGlvbnMuY29sbGFwc2libGUgKSB8fFxyXG5cdFx0XHRcdC8vIGFsbG93IGNhbmNlbGluZyBhY3RpdmF0aW9uXHJcblx0XHRcdFx0KCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZUFjdGl2YXRlXCIsIGV2ZW50LCBldmVudERhdGEgKSA9PT0gZmFsc2UgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdG9wdGlvbnMuYWN0aXZlID0gY29sbGFwc2luZyA/IGZhbHNlIDogdGhpcy50YWJzLmluZGV4KCB0YWIgKTtcclxuXHJcblx0XHR0aGlzLmFjdGl2ZSA9IGNsaWNrZWRJc0FjdGl2ZSA/ICQoKSA6IHRhYjtcclxuXHRcdGlmICggdGhpcy54aHIgKSB7XHJcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdG9IaWRlLmxlbmd0aCAmJiAhdG9TaG93Lmxlbmd0aCApIHtcclxuXHRcdFx0JC5lcnJvciggXCJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci5cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5sb2FkKCB0aGlzLnRhYnMuaW5kZXgoIHRhYiApLCBldmVudCApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdG9nZ2xlKCBldmVudCwgZXZlbnREYXRhICk7XHJcblx0fSxcclxuXHJcblx0Ly8gaGFuZGxlcyBzaG93L2hpZGUgZm9yIHNlbGVjdGluZyB0YWJzXHJcblx0X3RvZ2dsZTogZnVuY3Rpb24oIGV2ZW50LCBldmVudERhdGEgKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXMsXHJcblx0XHRcdHRvU2hvdyA9IGV2ZW50RGF0YS5uZXdQYW5lbCxcclxuXHRcdFx0dG9IaWRlID0gZXZlbnREYXRhLm9sZFBhbmVsO1xyXG5cclxuXHRcdHRoaXMucnVubmluZyA9IHRydWU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gY29tcGxldGUoKSB7XHJcblx0XHRcdHRoYXQucnVubmluZyA9IGZhbHNlO1xyXG5cdFx0XHR0aGF0Ll90cmlnZ2VyKCBcImFjdGl2YXRlXCIsIGV2ZW50LCBldmVudERhdGEgKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzaG93KCkge1xyXG5cdFx0XHRldmVudERhdGEubmV3VGFiLmNsb3Nlc3QoIFwibGlcIiApLmFkZENsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRvU2hvdy5sZW5ndGggJiYgdGhhdC5vcHRpb25zLnNob3cgKSB7XHJcblx0XHRcdFx0dGhhdC5fc2hvdyggdG9TaG93LCB0aGF0Lm9wdGlvbnMuc2hvdywgY29tcGxldGUgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0b1Nob3cuc2hvdygpO1xyXG5cdFx0XHRcdGNvbXBsZXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBzdGFydCBvdXQgYnkgaGlkaW5nLCB0aGVuIHNob3dpbmcsIHRoZW4gY29tcGxldGluZ1xyXG5cdFx0aWYgKCB0b0hpZGUubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5oaWRlICkge1xyXG5cdFx0XHR0aGlzLl9oaWRlKCB0b0hpZGUsIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRldmVudERhdGEub2xkVGFiLmNsb3Nlc3QoIFwibGlcIiApLnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XHJcblx0XHRcdFx0c2hvdygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICkucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcclxuXHRcdFx0dG9IaWRlLmhpZGUoKTtcclxuXHRcdFx0c2hvdygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRvSGlkZS5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIixcclxuXHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxyXG5cdFx0fSk7XHJcblx0XHRldmVudERhdGEub2xkVGFiLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIgKTtcclxuXHRcdC8vIElmIHdlJ3JlIHN3aXRjaGluZyB0YWJzLCByZW1vdmUgdGhlIG9sZCB0YWIgZnJvbSB0aGUgdGFiIG9yZGVyLlxyXG5cdFx0Ly8gSWYgd2UncmUgb3BlbmluZyBmcm9tIGNvbGxhcHNlZCBzdGF0ZSwgcmVtb3ZlIHRoZSBwcmV2aW91cyB0YWIgZnJvbSB0aGUgdGFiIG9yZGVyLlxyXG5cdFx0Ly8gSWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIHRhYiBpbiB0aGUgdGFiIG9yZGVyLlxyXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7XHJcblx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuYXR0ciggXCJ0YWJJbmRleFwiLCAtMSApO1xyXG5cdFx0fSBlbHNlIGlmICggdG9TaG93Lmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy50YWJzLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLmF0dHIoIFwidGFiSW5kZXhcIiApID09PSAwO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYXR0ciggXCJ0YWJJbmRleFwiLCAtMSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRvU2hvdy5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwiZmFsc2VcIlxyXG5cdFx0fSk7XHJcblx0XHRldmVudERhdGEubmV3VGFiLmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdHRhYkluZGV4OiAwXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHZhciBhbmNob3IsXHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIGluZGV4ICk7XHJcblxyXG5cdFx0Ly8gdHJ5aW5nIHRvIGFjdGl2YXRlIHRoZSBhbHJlYWR5IGFjdGl2ZSBwYW5lbFxyXG5cdFx0aWYgKCBhY3RpdmVbIDAgXSA9PT0gdGhpcy5hY3RpdmVbIDAgXSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHRyeWluZyB0byBjb2xsYXBzZSwgc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgY3VycmVudCBhY3RpdmUgaGVhZGVyXHJcblx0XHRpZiAoICFhY3RpdmUubGVuZ3RoICkge1xyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLmFjdGl2ZTtcclxuXHRcdH1cclxuXHJcblx0XHRhbmNob3IgPSBhY3RpdmUuZmluZCggXCIudWktdGFicy1hbmNob3JcIiApWyAwIF07XHJcblx0XHR0aGlzLl9ldmVudEhhbmRsZXIoe1xyXG5cdFx0XHR0YXJnZXQ6IGFuY2hvcixcclxuXHRcdFx0Y3VycmVudFRhcmdldDogYW5jaG9yLFxyXG5cdFx0XHRwcmV2ZW50RGVmYXVsdDogJC5ub29wXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZmluZEFjdGl2ZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0cmV0dXJuIGluZGV4ID09PSBmYWxzZSA/ICQoKSA6IHRoaXMudGFicy5lcSggaW5kZXggKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0SW5kZXg6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdC8vIG1ldGEtZnVuY3Rpb24gdG8gZ2l2ZSB1c2VycyBvcHRpb24gdG8gcHJvdmlkZSBhIGhyZWYgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1lcmljYWwgaW5kZXguXHJcblx0XHRpZiAoIHR5cGVvZiBpbmRleCA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0aW5kZXggPSB0aGlzLmFuY2hvcnMuaW5kZXgoIHRoaXMuYW5jaG9ycy5maWx0ZXIoIFwiW2hyZWYkPSdcIiArIGluZGV4ICsgXCInXVwiICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaW5kZXg7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLnhociApIHtcclxuXHRcdFx0dGhpcy54aHIuYWJvcnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS10YWJzLWNvbGxhcHNpYmxlXCIgKTtcclxuXHJcblx0XHR0aGlzLnRhYmxpc3RcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcclxuXHJcblx0XHR0aGlzLmFuY2hvcnNcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtYW5jaG9yXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJ0YWJJbmRleFwiIClcclxuXHRcdFx0LnJlbW92ZVVuaXF1ZUlkKCk7XHJcblxyXG5cdFx0dGhpcy50YWJzLmFkZCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICQuZGF0YSggdGhpcywgXCJ1aS10YWJzLWRlc3Ryb3lcIiApICkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmUoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCB0aGlzIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCBcIiArXHJcblx0XHRcdFx0XHRcdFwidWktY29ybmVyLXRvcCB1aS1jb3JuZXItYm90dG9tIHVpLXdpZGdldC1jb250ZW50IHVpLXRhYnMtYWN0aXZlIHVpLXRhYnMtcGFuZWxcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJ0YWJJbmRleFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGl2ZVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtYnVzeVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxhYmVsbGVkYnlcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWhpZGRlblwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZXhwYW5kZWRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy50YWJzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBsaSA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRwcmV2ID0gbGkuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0XHRpZiAoIHByZXYgKSB7XHJcblx0XHRcdFx0bGlcclxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtY29udHJvbHNcIiwgcHJldiApXHJcblx0XHRcdFx0XHQucmVtb3ZlRGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGxpLnJlbW92ZUF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGFuZWxzLnNob3coKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSAhPT0gXCJjb250ZW50XCIgKSB7XHJcblx0XHRcdHRoaXMucGFuZWxzLmNzcyggXCJoZWlnaHRcIiwgXCJcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdGVuYWJsZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0dmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xyXG5cdFx0aWYgKCBkaXNhYmxlZCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGRpc2FibGVkID0gZmFsc2U7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xyXG5cdFx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWFwKCBkaXNhYmxlZCwgZnVuY3Rpb24oIG51bSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWFwKCB0aGlzLnRhYnMsIGZ1bmN0aW9uKCBsaSwgbnVtICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApO1xyXG5cdH0sXHJcblxyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDtcclxuXHRcdGlmICggZGlzYWJsZWQgPT09IHRydWUgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XHJcblx0XHRcdGlmICggJC5pbkFycmF5KCBpbmRleCwgZGlzYWJsZWQgKSAhPT0gLTEgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gJC5tZXJnZSggWyBpbmRleCBdLCBkaXNhYmxlZCApLnNvcnQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9IFsgaW5kZXggXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggZGlzYWJsZWQgKTtcclxuXHR9LFxyXG5cclxuXHRsb2FkOiBmdW5jdGlvbiggaW5kZXgsIGV2ZW50ICkge1xyXG5cdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcclxuXHRcdHZhciB0aGF0ID0gdGhpcyxcclxuXHRcdFx0dGFiID0gdGhpcy50YWJzLmVxKCBpbmRleCApLFxyXG5cdFx0XHRhbmNob3IgPSB0YWIuZmluZCggXCIudWktdGFicy1hbmNob3JcIiApLFxyXG5cdFx0XHRwYW5lbCA9IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSxcclxuXHRcdFx0ZXZlbnREYXRhID0ge1xyXG5cdFx0XHRcdHRhYjogdGFiLFxyXG5cdFx0XHRcdHBhbmVsOiBwYW5lbFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdC8vIG5vdCByZW1vdGVcclxuXHRcdGlmICggaXNMb2NhbCggYW5jaG9yWyAwIF0gKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMueGhyID0gJC5hamF4KCB0aGlzLl9hamF4U2V0dGluZ3MoIGFuY2hvciwgZXZlbnQsIGV2ZW50RGF0YSApICk7XHJcblxyXG5cdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdC8vIGpRdWVyeSA8MS44IHJldHVybnMgZmFsc2UgaWYgdGhlIHJlcXVlc3QgaXMgY2FuY2VsZWQgaW4gYmVmb3JlU2VuZCxcclxuXHRcdC8vIGJ1dCBhcyBvZiAxLjgsICQuYWpheCgpIGFsd2F5cyByZXR1cm5zIGEganFYSFIgb2JqZWN0LlxyXG5cdFx0aWYgKCB0aGlzLnhociAmJiB0aGlzLnhoci5zdGF0dXNUZXh0ICE9PSBcImNhbmNlbGVkXCIgKSB7XHJcblx0XHRcdHRhYi5hZGRDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApO1xyXG5cdFx0XHRwYW5lbC5hdHRyKCBcImFyaWEtYnVzeVwiLCBcInRydWVcIiApO1xyXG5cclxuXHRcdFx0dGhpcy54aHJcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbiggcmVzcG9uc2UgKSB7XHJcblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3NzhcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHBhbmVsLmh0bWwoIHJlc3BvbnNlICk7XHJcblx0XHRcdFx0XHRcdHRoYXQuX3RyaWdnZXIoIFwibG9hZFwiLCBldmVudCwgZXZlbnREYXRhICk7XHJcblx0XHRcdFx0XHR9LCAxICk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY29tcGxldGUoZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XHJcblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3NzhcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGlmICggc3RhdHVzID09PSBcImFib3J0XCIgKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhhdC5wYW5lbHMuc3RvcCggZmFsc2UsIHRydWUgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dGFiLnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICk7XHJcblx0XHRcdFx0XHRcdHBhbmVsLnJlbW92ZUF0dHIoIFwiYXJpYS1idXN5XCIgKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmICgganFYSFIgPT09IHRoYXQueGhyICkge1xyXG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0aGF0LnhocjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMSApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9hamF4U2V0dGluZ3M6IGZ1bmN0aW9uKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXM7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR1cmw6IGFuY2hvci5hdHRyKCBcImhyZWZcIiApLFxyXG5cdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigganFYSFIsIHNldHRpbmdzICkge1xyXG5cdFx0XHRcdHJldHVybiB0aGF0Ll90cmlnZ2VyKCBcImJlZm9yZUxvYWRcIiwgZXZlbnQsXHJcblx0XHRcdFx0XHQkLmV4dGVuZCggeyBqcVhIUiA6IGpxWEhSLCBhamF4U2V0dGluZ3M6IHNldHRpbmdzIH0sIGV2ZW50RGF0YSApICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSxcclxuXHJcblx0X2dldFBhbmVsRm9yVGFiOiBmdW5jdGlvbiggdGFiICkge1xyXG5cdFx0dmFyIGlkID0gJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5fc2FuaXRpemVTZWxlY3RvciggXCIjXCIgKyBpZCApICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3cgKSB7XHJcblxyXG5cdCQubW9iaWxlLmlvc29yaWVudGF0aW9uZml4RW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdC8vIFRoaXMgZml4IGFkZHJlc3NlcyBhbiBpT1MgYnVnLCBzbyByZXR1cm4gZWFybHkgaWYgdGhlIFVBIGNsYWltcyBpdCdzIHNvbWV0aGluZyBlbHNlLlxyXG5cdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHR6b29tLFxyXG5cdFx0ZXZ0LCB4LCB5LCB6LCBhaWc7XHJcblx0aWYgKCAhKCAvaVBob25lfGlQYWR8aVBvZC8udGVzdCggbmF2aWdhdG9yLnBsYXRmb3JtICkgJiYgL09TIFsxLTVdX1swLTlfXSogbGlrZSBNYWMgT1MgWC9pLnRlc3QoIHVhICkgJiYgdWEuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSApICkge1xyXG5cdFx0JC5tb2JpbGUuaW9zb3JpZW50YXRpb25maXhFbmFibGVkID0gZmFsc2U7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHR6b29tID0gJC5tb2JpbGUuem9vbTtcclxuXHJcblx0ZnVuY3Rpb24gY2hlY2tUaWx0KCBlICkge1xyXG5cdFx0ZXZ0ID0gZS5vcmlnaW5hbEV2ZW50O1xyXG5cdFx0YWlnID0gZXZ0LmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk7XHJcblxyXG5cdFx0eCA9IE1hdGguYWJzKCBhaWcueCApO1xyXG5cdFx0eSA9IE1hdGguYWJzKCBhaWcueSApO1xyXG5cdFx0eiA9IE1hdGguYWJzKCBhaWcueiApO1xyXG5cclxuXHRcdC8vIElmIHBvcnRyYWl0IG9yaWVudGF0aW9uIGFuZCBpbiBvbmUgb2YgdGhlIGRhbmdlciB6b25lc1xyXG5cdFx0aWYgKCAhd2luZG93Lm9yaWVudGF0aW9uICYmICggeCA+IDcgfHwgKCAoIHogPiA2ICYmIHkgPCA4IHx8IHogPCA4ICYmIHkgPiA2ICkgJiYgeCA+IDUgKSApICkge1xyXG5cdFx0XHRcdGlmICggem9vbS5lbmFibGVkICkge1xyXG5cdFx0XHRcdFx0em9vbS5kaXNhYmxlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0fVx0ZWxzZSBpZiAoICF6b29tLmVuYWJsZWQgKSB7XHJcblx0XHRcdFx0em9vbS5lbmFibGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdCQubW9iaWxlLmRvY3VtZW50Lm9uKCBcIm1vYmlsZWluaXRcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICQubW9iaWxlLmlvc29yaWVudGF0aW9uZml4RW5hYmxlZCApIHtcclxuXHRcdFx0JC5tb2JpbGUud2luZG93XHJcblx0XHRcdFx0LmJpbmQoIFwib3JpZW50YXRpb25jaGFuZ2UuaW9zb3JpZW50YXRpb25maXhcIiwgem9vbS5lbmFibGUgKVxyXG5cdFx0XHRcdC5iaW5kKCBcImRldmljZW1vdGlvbi5pb3NvcmllbnRhdGlvbmZpeFwiLCBjaGVja1RpbHQgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0oIGpRdWVyeSwgdGhpcyApKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0dmFyXHQkaHRtbCA9ICQoIFwiaHRtbFwiICksXHJcblx0XHQkd2luZG93ID0gJC5tb2JpbGUud2luZG93O1xyXG5cclxuXHQvL3JlbW92ZSBpbml0aWFsIGJ1aWxkIGNsYXNzIChvbmx5IHByZXNlbnQgb24gZmlyc3QgcGFnZXNob3cpXHJcblx0ZnVuY3Rpb24gaGlkZVJlbmRlcmluZ0NsYXNzKCkge1xyXG5cdFx0JGh0bWwucmVtb3ZlQ2xhc3MoIFwidWktbW9iaWxlLXJlbmRlcmluZ1wiICk7XHJcblx0fVxyXG5cclxuXHQvLyB0cmlnZ2VyIG1vYmlsZWluaXQgZXZlbnQgLSB1c2VmdWwgaG9vayBmb3IgY29uZmlndXJpbmcgJC5tb2JpbGUgc2V0dGluZ3MgYmVmb3JlIHRoZXkncmUgdXNlZFxyXG5cdCQoIHdpbmRvdy5kb2N1bWVudCApLnRyaWdnZXIoIFwibW9iaWxlaW5pdFwiICk7XHJcblxyXG5cdC8vIHN1cHBvcnQgY29uZGl0aW9uc1xyXG5cdC8vIGlmIGRldmljZSBzdXBwb3J0IGNvbmRpdGlvbihzKSBhcmVuJ3QgbWV0LCBsZWF2ZSB0aGluZ3MgYXMgdGhleSBhcmUgLT4gYSBiYXNpYywgdXNhYmxlIGV4cGVyaWVuY2UsXHJcblx0Ly8gb3RoZXJ3aXNlLCBwcm9jZWVkIHdpdGggdGhlIGVuaGFuY2VtZW50c1xyXG5cdGlmICggISQubW9iaWxlLmdyYWRlQSgpICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Ly8gb3ZlcnJpZGUgYWpheEVuYWJsZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBrbm93biBjb25mbGljdHMgd2l0aCBoYXNoIGhpc3RvcnkgdXBkYXRlc1xyXG5cdC8vIG9yIGdlbmVyYWxseSB3b3JrIGJldHRlciBicm93c2luZyBpbiByZWd1bGFyIGh0dHAgZm9yIGZ1bGwgcGFnZSByZWZyZXNoZXMgKEJCNSwgT3BlcmEgTWluaSlcclxuXHRpZiAoICQubW9iaWxlLmFqYXhCbGFja2xpc3QgKSB7XHJcblx0XHQkLm1vYmlsZS5hamF4RW5hYmxlZCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gQWRkIG1vYmlsZSwgaW5pdGlhbCBsb2FkIFwicmVuZGVyaW5nXCIgY2xhc3NlcyB0byBkb2NFbFxyXG5cdCRodG1sLmFkZENsYXNzKCBcInVpLW1vYmlsZSB1aS1tb2JpbGUtcmVuZGVyaW5nXCIgKTtcclxuXHJcblx0Ly8gVGhpcyBpcyBhIGZhbGxiYWNrLiBJZiBhbnl0aGluZyBnb2VzIHdyb25nIChKUyBlcnJvcnMsIGV0YyksIG9yIGV2ZW50cyBkb24ndCBmaXJlLFxyXG5cdC8vIHRoaXMgZW5zdXJlcyB0aGUgcmVuZGVyaW5nIGNsYXNzIGlzIHJlbW92ZWQgYWZ0ZXIgNSBzZWNvbmRzLCBzbyBjb250ZW50IGlzIHZpc2libGUgYW5kIGFjY2Vzc2libGVcclxuXHRzZXRUaW1lb3V0KCBoaWRlUmVuZGVyaW5nQ2xhc3MsIDUwMDAgKTtcclxuXHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblx0XHQvLyBmaW5kIGFuZCBlbmhhbmNlIHRoZSBwYWdlcyBpbiB0aGUgZG9tIGFuZCB0cmFuc2l0aW9uIHRvIHRoZSBmaXJzdCBwYWdlLlxyXG5cdFx0aW5pdGlhbGl6ZVBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBmaW5kIHByZXNlbnQgcGFnZXNcclxuXHRcdFx0dmFyIHBhdGggPSAkLm1vYmlsZS5wYXRoLFxyXG5cdFx0XHRcdCRwYWdlcyA9ICQoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpLCA6anFtRGF0YShyb2xlPSdkaWFsb2cnKVwiICksXHJcblx0XHRcdFx0aGFzaCA9IHBhdGguc3RyaXBIYXNoKCBwYXRoLnN0cmlwUXVlcnlQYXJhbXMocGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaCkgKSxcclxuXHRcdFx0XHR0aGVMb2NhdGlvbiA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLFxyXG5cdFx0XHRcdGhhc2hQYWdlID0gaGFzaCA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBoYXNoICkgOiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHQvLyBpZiBubyBwYWdlcyBhcmUgZm91bmQsIGNyZWF0ZSBvbmUgd2l0aCBib2R5J3MgaW5uZXIgaHRtbFxyXG5cdFx0XHRpZiAoICEkcGFnZXMubGVuZ3RoICkge1xyXG5cdFx0XHRcdCRwYWdlcyA9ICQoIFwiYm9keVwiICkud3JhcElubmVyKCBcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdwYWdlJz48L2Rpdj5cIiApLmNoaWxkcmVuKCAwICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGFkZCBkaWFsb2dzLCBzZXQgZGF0YS11cmwgYXR0cnNcclxuXHRcdFx0JHBhZ2VzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0XHQvLyB1bmxlc3MgdGhlIGRhdGEgdXJsIGlzIGFscmVhZHkgc2V0IHNldCBpdCB0byB0aGUgcGF0aG5hbWVcclxuXHRcdFx0XHRpZiAoICEkdGhpc1sgMCBdLmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInVybFwiICkgKSB7XHJcblx0XHRcdFx0XHQkdGhpcy5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidXJsXCIsICR0aGlzLmF0dHIoIFwiaWRcIiApIHx8XHJcblx0XHRcdFx0XHRcdHBhdGguY29udmVydFVybFRvRGF0YVVybCggdGhlTG9jYXRpb24ucGF0aG5hbWUgKyB0aGVMb2NhdGlvbi5zZWFyY2ggKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBkZWZpbmUgZmlyc3QgcGFnZSBpbiBkb20gY2FzZSBvbmUgYmFja3Mgb3V0IHRvIHRoZSBkaXJlY3Rvcnkgcm9vdCAobm90IGFsd2F5cyB0aGUgZmlyc3QgcGFnZSB2aXNpdGVkLCBidXQgZGVmaW5lZCBhcyBmYWxsYmFjaylcclxuXHRcdFx0JC5tb2JpbGUuZmlyc3RQYWdlID0gJHBhZ2VzLmZpcnN0KCk7XHJcblxyXG5cdFx0XHQvLyBkZWZpbmUgcGFnZSBjb250YWluZXJcclxuXHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lciA9ICQubW9iaWxlLmZpcnN0UGFnZVxyXG5cdFx0XHRcdC5wYXJlbnQoKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1tb2JpbGUtdmlld3BvcnRcIiApXHJcblx0XHRcdFx0LnBhZ2Vjb250YWluZXIoKTtcclxuXHJcblx0XHRcdC8vIGluaXRpYWxpemUgbmF2aWdhdGlvbiBldmVudHMgbm93LCBhZnRlciBtb2JpbGVpbml0IGhhcyBvY2N1cnJlZCBhbmQgdGhlIHBhZ2UgY29udGFpbmVyXHJcblx0XHRcdC8vIGhhcyBiZWVuIGNyZWF0ZWQgYnV0IGJlZm9yZSB0aGUgcmVzdCBvZiB0aGUgbGlicmFyeSBpcyBhbGVydGVkIHRvIHRoYXQgZmFjdFxyXG5cdFx0XHQkLm1vYmlsZS5uYXZyZWFkeURlZmVycmVkLnJlc29sdmUoKTtcclxuXHJcblx0XHRcdC8vIGFsZXJ0IGxpc3RlbmVycyB0aGF0IHRoZSBwYWdlY29udGFpbmVyIGhhcyBiZWVuIGRldGVybWluZWQgZm9yIGJpbmRpbmdcclxuXHRcdFx0Ly8gdG8gZXZlbnRzIHRyaWdnZXJlZCBvbiBpdFxyXG5cdFx0XHQkd2luZG93LnRyaWdnZXIoIFwicGFnZWNvbnRhaW5lcmNyZWF0ZVwiICk7XHJcblxyXG5cdFx0XHQvLyBjdWUgcGFnZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0JC5tb2JpbGUubG9hZGluZyggXCJzaG93XCIgKTtcclxuXHJcblx0XHRcdC8vcmVtb3ZlIGluaXRpYWwgYnVpbGQgY2xhc3MgKG9ubHkgcHJlc2VudCBvbiBmaXJzdCBwYWdlc2hvdylcclxuXHRcdFx0aGlkZVJlbmRlcmluZ0NsYXNzKCk7XHJcblxyXG5cdFx0XHQvLyBpZiBoYXNoY2hhbmdlIGxpc3RlbmluZyBpcyBkaXNhYmxlZCwgdGhlcmUncyBubyBoYXNoIGRlZXBsaW5rLFxyXG5cdFx0XHQvLyB0aGUgaGFzaCBpcyBub3QgdmFsaWQgKGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgIyBvciBkb2VzIG5vdCBzdGFydCB3aXRoICMpXHJcblx0XHRcdC8vIG9yIHRoZXJlIGlzIG5vIHBhZ2Ugd2l0aCB0aGF0IGhhc2gsIGNoYW5nZSB0byB0aGUgZmlyc3QgcGFnZSBpbiB0aGUgRE9NXHJcblx0XHRcdC8vIFJlbWVtYmVyLCBob3dldmVyLCB0aGF0IHRoZSBoYXNoIGNhbiBhbHNvIGJlIGEgcGF0aCFcclxuXHRcdFx0aWYgKCAhICggJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzSGFzaFZhbGlkKCBsb2NhdGlvbi5oYXNoICkgJiZcclxuXHRcdFx0XHQoICQoIGhhc2hQYWdlICkuaXMoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpXCIgKSB8fFxyXG5cdFx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc1BhdGgoIGhhc2ggKSB8fFxyXG5cdFx0XHRcdFx0aGFzaCA9PT0gJC5tb2JpbGUuZGlhbG9nSGFzaEtleSApICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgaW5pdGlhbCBwb3BzdGF0ZSBzdGF0ZSBpZiBpdCBleGlzdHNcclxuXHRcdFx0XHQvLyBzbyB0aGF0IG5hdmlnYXRpb24gYmFjayB0byB0aGUgaW5pdGlhbCBwYWdlIHdvcmtzIHByb3Blcmx5XHJcblx0XHRcdFx0aWYgKCAkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5uYXZpZ2F0b3Iuc3F1YXNoKCBwYXRoLnBhcnNlTG9jYXRpb24oKS5ocmVmICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCAkLm1vYmlsZS5maXJzdFBhZ2UsIHtcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246IFwibm9uZVwiLFxyXG5cdFx0XHRcdFx0cmV2ZXJzZTogdHJ1ZSxcclxuXHRcdFx0XHRcdGNoYW5nZUhhc2g6IGZhbHNlLFxyXG5cdFx0XHRcdFx0ZnJvbUhhc2hDaGFuZ2U6IHRydWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyB0cmlnZ2VyIGhhc2hjaGFuZ2Ugb3IgbmF2aWdhdGUgdG8gc3F1YXNoIGFuZCByZWNvcmQgdGhlIGNvcnJlY3RcclxuXHRcdFx0XHQvLyBoaXN0b3J5IGVudHJ5IGZvciBhbiBpbml0aWFsIGhhc2ggcGF0aFxyXG5cdFx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRcdCR3aW5kb3cudHJpZ2dlciggXCJoYXNoY2hhbmdlXCIsIFt0cnVlXSApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBUT0RPIGZpZ3VyZSBvdXQgaG93IHRvIHNpbXBsaWZ5IHRoaXMgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5pdGlhbCBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0XHQvLyBhdCB0aGUgYm90dG9tIGpzL25hdmlnYXRlL25hdmlnYXRlLmpzXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LnN0YWNrID0gW107XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZSggJC5tb2JpbGUucGF0aC5pc1BhdGgoIGxvY2F0aW9uLmhhc2ggKSA/IGxvY2F0aW9uLmhhc2ggOiBsb2NhdGlvbi5ocmVmICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHQvL1J1biBpbmxpbmVTVkcgc3VwcG9ydCB0ZXN0XHJcblx0XHQkLnN1cHBvcnQuaW5saW5lU1ZHKCk7XHJcblxyXG5cdFx0Ly8gY2hlY2sgd2hpY2ggc2Nyb2xsVG9wIHZhbHVlIHNob3VsZCBiZSB1c2VkIGJ5IHNjcm9sbGluZyB0byAxIGltbWVkaWF0ZWx5IGF0IGRvbXJlYWR5XHJcblx0XHQvLyB0aGVuIGNoZWNrIHdoYXQgdGhlIHNjcm9sbCB0b3AgaXMuIEFuZHJvaWQgd2lsbCByZXBvcnQgMC4uLiBvdGhlcnMgMVxyXG5cdFx0Ly8gbm90ZSB0aGF0IHRoaXMgaW5pdGlhbCBzY3JvbGwgd29uJ3QgaGlkZSB0aGUgYWRkcmVzcyBiYXIuIEl0J3MganVzdCBmb3IgdGhlIGNoZWNrLlxyXG5cclxuXHRcdC8vIGhpZGUgaU9TIGJyb3dzZXIgY2hyb21lIG9uIGxvYWQgaWYgaGlkZVVybEJhciBpcyB0cnVlIHRoaXMgaXMgdG8gdHJ5IGFuZCBkbyBpdCBhcyBzb29uIGFzIHBvc3NpYmxlXHJcblx0XHRpZiAoICQubW9iaWxlLmhpZGVVcmxCYXIgKSB7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgMSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGlmIGRlZmF1bHRIb21lU2Nyb2xsIGhhc24ndCBiZWVuIHNldCB5ZXQsIHNlZSBpZiBzY3JvbGxUb3AgaXMgMVxyXG5cdFx0Ly8gaXQgc2hvdWxkIGJlIDEgaW4gbW9zdCBicm93c2VycywgYnV0IGFuZHJvaWQgdHJlYXRzIDEgYXMgMCAoZm9yIGhpZGluZyBhZGRyIGJhcilcclxuXHRcdC8vIHNvIGlmIGl0J3MgMSwgdXNlIDAgZnJvbSBub3cgb25cclxuXHRcdCQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsID0gKCAhJC5zdXBwb3J0LnNjcm9sbFRvcCB8fCAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCkgPT09IDEgKSA/IDAgOiAxO1xyXG5cclxuXHRcdC8vZG9tLXJlYWR5IGluaXRzXHJcblx0XHRpZiAoICQubW9iaWxlLmF1dG9Jbml0aWFsaXplUGFnZSApIHtcclxuXHRcdFx0JC5tb2JpbGUuaW5pdGlhbGl6ZVBhZ2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyB3aW5kb3cgbG9hZCBldmVudFxyXG5cdFx0Ly8gaGlkZSBpT1MgYnJvd3NlciBjaHJvbWUgb24gbG9hZCBpZiBoaWRlVXJsQmFyIGlzIHRydWUgdGhpcyBpcyBhcyBmYWxsIGJhY2sgaW5jYXNlIHdlIHdlcmUgdG9vIGVhcmx5IGJlZm9yZVxyXG5cdFx0aWYgKCAkLm1vYmlsZS5oaWRlVXJsQmFyICkge1xyXG5cdFx0XHQkd2luZG93LmxvYWQoICQubW9iaWxlLnNpbGVudFNjcm9sbCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggISQuc3VwcG9ydC5jc3NQb2ludGVyRXZlbnRzICkge1xyXG5cdFx0XHQvLyBJRSBhbmQgT3BlcmEgZG9uJ3Qgc3VwcG9ydCBDU1MgcG9pbnRlci1ldmVudHM6IG5vbmUgdGhhdCB3ZSB1c2UgdG8gZGlzYWJsZSBsaW5rLWJhc2VkIGJ1dHRvbnNcclxuXHRcdFx0Ly8gYnkgYWRkaW5nIHRoZSAndWktZGlzYWJsZWQnIGNsYXNzIHRvIHRoZW0uIFVzaW5nIGEgSmF2YVNjcmlwdCB3b3JrYXJvdW5kIGZvciB0aG9zZSBicm93c2VyLlxyXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzM1NThcclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgdWktZGlzYWJsZWQgYWZ0ZXIgMS40LjAgcmVsZWFzZVxyXG5cdFx0XHQvLyBvbmx5IHVpLXN0YXRlLWRpc2FibGVkIHNob3VsZCBiZSBwcmVzZW50IHRoZXJlYWZ0ZXJcclxuXHRcdFx0JC5tb2JpbGUuZG9jdW1lbnQuZGVsZWdhdGUoIFwiLnVpLXN0YXRlLWRpc2FibGVkLC51aS1kaXNhYmxlZFwiLCBcInZjbGlja1wiLFxyXG5cdFx0XHRcdGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0oIGpRdWVyeSwgdGhpcyApKTtcclxuXHJcblxyXG59KSk7XHJcblxufS5jYWxsKHdpbmRvdykpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5Lm1vYmlsZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cImJhY2tib25lXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvLyBCYWNrYm9uZSBzaG9ydCBjdXRcclxuICAgIGV4cG9ydCB0eXBlICBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuICAgIGV4cG9ydCBjb25zdCBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuICAgIGV4cG9ydCB0eXBlICBDb2xsZWN0aW9uPFRNb2RlbCBleHRlbmRzIE1vZGVsPiAgICAgICAgICAgPSBCYWNrYm9uZS5Db2xsZWN0aW9uPFRNb2RlbD47XHJcbiAgICBleHBvcnQgY29uc3QgQ29sbGVjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuQ29sbGVjdGlvbjtcclxuICAgIGV4cG9ydCB0eXBlICBWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgICAgICAgPSBCYWNrYm9uZS5WaWV3PFRNb2RlbD47XHJcbiAgICBleHBvcnQgY29uc3QgVmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuVmlldztcclxuICAgIGV4cG9ydCB0eXBlICBFdmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5FdmVudHM7XHJcbiAgICBleHBvcnQgY29uc3QgRXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuRXZlbnRzO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxTZXRPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsU2V0T3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIE1vZGVsRmV0Y2hPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbEZldGNoT3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIE1vZGVsU2F2ZU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbFNhdmVPcHRpb25zO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxEZXN0cm95T3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsRGVzdHJveU9wdGlvbnM7XHJcbiAgICBleHBvcnQgdHlwZSBWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiAgID0gQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEB0eXBlICBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvblxyXG4gICAgICogQGJyaWVmIGRpcmVjdGlvbiBkZWZpbml0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQHR5cGUgIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uXHJcbiAgICAgKiBAYnJpZWYg6YG356e75pa55ZCR44Gu5a6a576pLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgdHlwZSBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiA9IFwiYmFja1wiIHwgXCJmb3J3YXJkXCIgfCBcInNhbWVcIiB8IFwidW5rbm93blwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBTaG93RXZlbnREYXRhXHJcbiAgICAgKiBAYnJpZWYgICAgIEFyZ3VtZW50IG9mIG9uU2hvdy9vbkJlZm9yZVNob3cgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFNob3dFdmVudERhdGFcclxuICAgICAqIEBicmllZiAgICAgb25TaG93L29uQmVmb3JlU2hvdyDjgafmuKHjgZXjgozjgovlvJXmlbBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTaG93RXZlbnREYXRhIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgc291cmNlIHBhZ2UgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+WJjeOBrueUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByZXZQYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBkZXN0aW5hdGlvbiBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vlvozjga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0b1BhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdHJhbnNpdGlvbiBkaXJlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+aWueWQkeOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpcmVjdGlvbjogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIEhpZGVFdmVudERhdGFcclxuICAgICAqIEBicmllZiAgICAgQXJndW1lbnQgb2Ygb25IaWRlL29uQmVmb3JlSGlkZSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YVxyXG4gICAgICogQGJyaWVmICAgICBvbkhpZGUvb25CZWZvcmVIaWRlIOOBp+a4oeOBleOCjOOCi+W8leaVsFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEhpZGVFdmVudERhdGEge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBwYWdlIERPTSBlbGVtZW50IHRvIHdoaWNoIHdlIGp1c3QgdHJhbnNpdGlvbmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg4jjg6njg7Pjgrjjgrfjg6fjg7PlrozkuobjgZfjgZ/nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBuZXh0UGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZGVzdGluYXRpb24gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75b6M44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdG9QYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmcm9tIHBhZ2UgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+WJjeOBrueUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByZXZQYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24gZGlyZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vmlrnlkJHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaXJlY3Rpb246IFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJbnRlbnRcclxuICAgICAqIEBicmllZiAgICAgRGVsZWdhdGUgaW50ZXJmYWNlIG9mIGFkZGl0aW9uYWwgZGF0YSBmb3IgUGFnZSBjbGFzcy5cclxuICAgICAqICAgICAgICAgICAgQ2xpZW50IGNhbiBkZWZpbmUgZXh0ZW5kIHR5cGUgZnJvbSBpdC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJbnRlbnRcclxuICAgICAqIEBicmllZiAgICAg5Lu75oSP44Gu5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKiAgICAgICAgICAgIFBhZ2Ug44Gr5rih44GV44KM44KL44OH44O844K/44CC5ouh5by144GX44Gm5L2/55So5Y+v6IO9XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSW50ZW50IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogYW55IHBhcmFtZXRlci5cclxuICAgICAgICAgKiBwYXJhbXNbXCJxdWVyeVBhcmFtc1wiXSBpcyB1c2VkIGJ5IGZyYW1ld29yayBmb3IgcXVlcnkgcGFyYW1ldGVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Lu75oSP44Gu44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICogcGFyYW1zW1wicXVlcnlQYXJhbXNcIl0g44Gr44Gv44CBcXVlcnkgcGFyYW1ldGVyIOOBjOODleODrOODvOODoOODr+ODvOOCr+OBq+OCiOOCiuagvOe0jeOBleOCjOOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHBhcmFtcz86IG9iamVjdDtcclxuICAgICAgICAvLyEgYW55XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBQYWdlU3RhY2tcclxuICAgICAqIEBicmllZiBBcmd1bWVudHMgaW50ZXJmYWNlIG9mIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjaygpIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBQYWdlU3RhY2tcclxuICAgICAqIEBicmllZiBSb3V0ZXIucmVnaXN0ZXJQYWdlU3RhY2soKSDjgavmjIflrprjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYWdlU3RhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiByb3V0ZSBzdHJpbmcsIGl0IGNhbiBiZSByZWd1bGFyIGV4cHJlc3Npb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODq+ODvOODhuOCo+ODs+OCsOaWh+Wtl+WIlyAvIOato+imj+ihqOePvlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJvdXRlOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBwYWdlIHRpdGxlIHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K444K/44Kk44OI44Or5paH5a2X5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGl0bGU/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24gc3RyaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vjg4jjg6njg7Pjgrjjgrfjg6fjg7PmloflrZfliJdcclxuICAgICAgICAgKi9cclxuICAgICAgICB0cmFuc2l0aW9uPzogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBTdWJGbG93UGFyYW1cclxuICAgICAqIEBicmllZiBpbnRlcmZhY2Ugb2YgUm91dGVyJ3MgU3ViIEZsb3cgcGFyYW1lbnRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyIOOBriBTdWIgRmxvdyDjgavmjIflrprjgZnjgovjg5Hjg6njg6Hjg7zjgr/jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdWJGbG93UGFyYW0ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBzZXQgc3ViIGZsb3cgb3BlcmF0aW9uIFtiZWdpbiB8IGVuZF0uXHJcbiAgICAgICAgICogV2hlbiBcImJlZ2luXCIgaXMgc2V0IGFuZCB0aGVuIFwiZW5kXCIgaXMgY2FsbGVkLCBpdCBjYW4gcmV0dXJuIHRvIHRoZSBVUkwgc3BlY2lmaWVkIGFzIFwiYmFzZVwiIHdpdGggdHJlYXRpbmcgYnJvd3NlciBoaXN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDlh6bnkIbjgpLmjIflrpogW2JlZ2luIHwgZW5kXVxyXG4gICAgICAgICAqIFwiYmVnaW5cIiDjgYzmjIflrprjgZXjgozjgIHmrKHjgasgXCJlbmRcIiDjgpLlkbzjgbbjgajjgY3jgIFcImJhc2VcIiDjgavmjIflrprjgZfjgZ8gdXJsIOOBvuOBp+ODluODqeOCpuOCtuWxpeattOOCkuOBn+OBqeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9wZXJhdGlvbjogXCJiZWdpblwiIHwgXCJlbmRcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFBhZ2UgVVJML0hhc2ggdXNlZCBhcyB0aGUgcmVmZXJlbmNlIHBvaW50IG9mIFN1YiBGbG93IGlzIHNwZWNpZmllZC5cclxuICAgICAgICAgKiBXaGVuIFN1YiBGbG93IG9wZXJhdGlvbiA9PSBcImVuZFwiIGlzIHNwZWNpZmllZCwgVVJMIHNwZWNpZmllZCBhcyBuYXZpZ2F0ZSBpcyBkaXNyZWdhcmRlZC5cclxuICAgICAgICAgKiBJZiBub3Qgc2V0LCB0aGlzIHBhcmFtZXRlciBpcyBhc3NpZ25lZCB0aGUgcGFnZSBjYWxsZWQgUm91dGVyLm5hdmlnYXRlKCkgd2l0aCBzdWJGbG93IHByb3BlcnR5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7ln7rngrnjgajjgarjgovjg5rjg7zjgrggVVJML0hhc2gg44KS5oyH5a6a44CCXHJcbiAgICAgICAgICogU3ViIEZsb3cgb3BlcmF0aW9uID09IFwiZW5kXCIg44GM5oyH5a6a44GV44KM44KL5aC05ZCI44Gv44CBbmF2aWdhdGUg44Gr5oyH5a6a44GV44KM44KLIFVSTCDjga/nhKHoppbjgZXjgozjgovjgIJcclxuICAgICAgICAgKiDmjIflrprjgYzjgarjgYTloLTlkIjjga8gUm91dGVyLm5hdmlnYXRlKCkg5pmC44GrIHN1YkZsb3cg44KS5oyH5a6a44Gu5ZG844Gz5Ye644GX5YWD44GM44Ki44K144Kk44Oz44GV44KM44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVzdEJhc2U/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBQYWdlU3RhY2sgZnJvbSBcImRlc3RCYXNlXCIgd2hpY2ggY2hhbmdlcyBwYWdlIGF0IHRoZSB0aW1lIG9mIHRoZSBlbmQgb2YgU3ViIEZsb3cgaXMgc3BlY2lmaWVkLlxyXG4gICAgICAgICAqIFdoZW4gdGhpcyBwYXJhbWV0ZXIgaXMgbm8gc2V0LCBpdCBjaGFuZ2VzIHBhZ2UgdG8gXCJkZXN0QmFzZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDntYLkuobmmYLjgavpgbfnp7vjgZnjgosgXCJkZXN0QmFzZVwiIOOBi+OCieOBriBQYWdlU3RhY2sg44KS5oyH5a6a44CC5oyH5a6a44GM44Gq44GE5aC05ZCI44Gv44CBXCJkZXN0QmFzZVwiIOOBq+mBt+enu+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3RTdGFja3M/OiBQYWdlU3RhY2tbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgUm91dGVyT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIE9wdGlvbnMgaW50ZXJmYWNlIG9mIFJvdXRlci5zdGFydCgpIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBSb3V0ZXJPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyLnN0YXJ0KCkg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUm91dGVyT3B0aW9ucyBleHRlbmRzIEJhY2tib25lLkhpc3RvcnlPcHRpb25zIHtcclxuICAgICAgICBwYWdlQ29uc3RydWN0PzogYm9vbGVhbjsgICAgLy8g55m76Yyy5riI44G/44Oa44O844K444KS5qeL56+J44GZ44KL5aC05ZCIIHRydWUuIGRlZmF1bHQ6IHRydWVcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgT3B0aW9ucyBpbnRlcmZhY2Ugb2YgUm91dGVyLm5hdmlnYXRlKCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5uYXZpZ2F0ZSgpIOOBq+aMh+WumuOBmeOCi+OCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIE5hdmlnYXRlT3B0aW9ucyBleHRlbmRzIEJhY2tib25lLk5hdmlnYXRlT3B0aW9ucyB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIG92ZXJ3cml0ZTogdHJpZ2dlciBkZWZhdWx0IHZhbHVlIGlzIHRydWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHRyaWdnZXIg44Gu5pei5a6a5YCk44GvIHRydWUg44Go44GX44Gm5omx44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJpZ2dlcj86IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdWJGbG93UGFyYW0gaXMgc3BlY2lmaWVkIHdoZW4gcGVyZm9ybWluZyBTdWIgRmxvdyBwcm9jZXNzaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDlh6bnkIbjgpLooYzjgYbloLTlkIjjgIFTdWJGbG93UGFyYW0g44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3ViRmxvdz86IFN1YkZsb3dQYXJhbTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHNldCBiYWNrIG9wZXJhdGlvbiBkZXN0aW5hdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogW+aIu+OCi10g5pmC44Gr6YG356e744GZ44KL44Oa44O844K4IFVSTCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBiYWNrRGVzdGluYXRpb24/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBubyBoYXNoIGNoYW5nZSBmbGFnIGluIG5hdmlnYXRlIG9wZXJhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogTmF2aWdhdGUg5pmC44GrIEhhc2gg5aSJ5pu044GX44Gq44GE44OV44Op44KwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbm9IYXNoQ2hhbmdlPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGFkZGl0aW9uYWwgaW5mbyBpbnRlcmZhY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOS7mOWKoOaDheWgseOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludGVudD86IEludGVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYgSGFuZGxlIG9yaWVudGF0aW9uIGNoYW5nZWQgbm90aWZ5IGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXJcclxuICAgICAqIEBicmllZiBPcmllbnRhdGlvbiDjga7lpInmm7TmpJznn6XjgpLlj5fkv6HjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWNlaXZlZCBvcmllbnRhdGlvbiBjb2RlIHdoZW4gdGhhdCBpcyBjaGFuZ2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld09yaWVudGF0aW9uIHtPcmllbnRhdGlvbn0gW2luXSBuZXcgb3JpZW50YXRpb24gY29kZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb24ge09yaWVudGF0aW9ufSBbaW5dIG5ldyBvcmllbnRhdGlvbiBjb2RlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIEhhbmRsZSBIL1cgYmFjayBidXR0b24gZXZlbnQgbm90aWZ5IGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXJcclxuICAgICAqIEBicmllZiBIL1cgQmFjayBidXR0b24g44GuIGV2ZW50IOOCkuWPl+S/oeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlY2VpdmVkIEgvVyBCYWNrIEJ1dHRvbiBldmVudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IGNvbnRpbnVlIGRlZmF1bHQgb3BlcmF0aW9uIC8gZmFsc2U6IHN0b3AgZGVmYXVsdCBvcGVyYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkhhcmR3YXJlQmFja0J1dHRvbihldmVudD86IEpRdWVyeS5FdmVudCk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIElDb21tYW5kTGlzdGVuZXJcclxuICAgICAqIEBicmllZiBGcmFtZXdvcmsgZ2VuZXJpYyBjb21tYW5kIGNhbGxiYWNrIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJQ29tbWFuZExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYg5rGO55So44Kz44Oe44Oz44OJ44Kz44O844Or44OQ44OD44Kv44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlY2VpdmVkIGdlbmVyaWMgY29tbWFuZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSAgZXZlbnQge2tpbmR9ICAgICAgICAgICAgICBbaW5dIGNvbW1hbmQga2luZCBzdHJpbmdcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBjb250aW51ZSBkZWZhdWx0IG9wZXJhdGlvbiAvIGZhbHNlOiBzdG9wIGRlZmF1bHQgb3BlcmF0aW9uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaxjueUqOOCs+ODnuODs+ODieOCkuWPl+S/oVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSAgZXZlbnQge2tpbmR9ICAgICAgICAgICAgICBbaW5dIGNvbW1hbmQga2luZCBzdHJpbmdcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25Db21tYW5kKGV2ZW50PzogSlF1ZXJ5LkV2ZW50LCBraW5kPzogc3RyaW5nKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgUGFnZUNvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBJbnRlcmZhY2UgY2xhc3MgZm9yIHN0b3JpbmcgcmVnaXN0cmF0aW9uIGluZm8sIHVzaW5nIGJ5IFJvdXRlci5yZWdpc3RlcigpIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBQYWdlQ29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5yZWdpc3RlcigpIOOBp+aMh+WumuOBmeOCi+eZu+mMsuaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCueOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFBhZ2VDb25zdHJ1Y3RPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcm91dGUgaWRlbnRpZmllclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiByb3V0ZSDorZjliKXlrZBcclxuICAgICAgICAgKi9cclxuICAgICAgICByb3V0ZT86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGNhbGxiYWNrIG9uIGNoYW5naW5nIHJvdXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiByb3V0ZSDlpInmm7TmmYLjgavlkbzjgbPlh7rjgZXjgozjgovjgrPjg7zjg6vjg5Djg4Pjgq9cclxuICAgICAgICAgKi9cclxuICAgICAgICBjYWxsYmFjaz86ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHNldCBcInRydWVcIiBpZiBhcHBsaWNhdGlvbidzIHRvcCB2aWV3LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7Pjga4gdG9wIOeUu+mdouOBp+OBguOCi+WgtOWQiCB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRvcD86IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBUaGUgaW5zdGFuY2Ugb2YgUGFnZSBldmVudCBsaXN0ZW5lciBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogUGFnZSDjgqTjg5njg7Pjg4jjgpLlj5fkv6HjgZnjgovjg6rjgrnjg4rjg7zjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKiDmqZ/og73mi6HlvLXmmYLjgavmjIflrprjgZnjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBvd25lcj86IElQYWdlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogaW50ZW50IGluc3RhbmNlIGlzIGNvbW11bmljYXRlZCBuZXh0IHBhZ2Ugd2hlbiBcImludGVudFwiIGlzbid0IGRlc2lnbmF0ZWQgc3BlY2lmaWNhbGx5IGluIG5hdmlnYXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaYjuekuueahOOBqyBpbnRlbnQg44GM5oyH5a6a44GV44KM44Gq44GE5aC05ZCI44Gr44GK44GE44Gm44KCXHJcbiAgICAgICAgICogaW50ZW50IOOCkuegtOajhOOBl+OBquOBhOWgtOWQiOOBryB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGtlZXBJbnRlbnQ/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJUGFnZVxyXG4gICAgICogQGJyaWVmIEludGVyZmFjZSBvZiBQYWdlIGNsYXNzLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElQYWdlXHJcbiAgICAgKiBAYnJpZWYg44Oa44O844K444Kv44Op44K544Gu44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBhZ2UgZXh0ZW5kcyBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIsIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lciwgSUNvbW1hbmRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJldHVybiB0cnVlIGlmIHBhZ2UgaXMgYWN0aXZlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjgYzjgqLjgq/jg4bjgqPjg5bjgafjgYLjgovmmYIgdHJ1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFjdGl2ZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0b3JlZCB0YXJnZXQgcGFnZSB1cmwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWvvuixoeOBruODmuODvOOCuCBVUkwg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZWQgdGFyZ2V0IHBhZ2UgSUQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWvvuixoeOBruODmuODvOOCuCBJRCDjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZDogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogalF1ZXJ5IG9iamVjdCBvZiBwYWdlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRwYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IG9mIHBhZ2UncyBoZWFkZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOODmOODg+ODgOOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJGhlYWRlcjogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogalF1ZXJ5IG9iamVjdCBvZiBwYWdlJ3MgZm9vdGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjg5Xjg4Pjgr/jga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRmb290ZXI6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGludGVudCBwYXJhbWV0ZXIgcGFzc2luZyBiZXR3ZWVuIHBhZ2VzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjplpPjgaflj5fjgZHmuKHjgZXjgozjgosgaW50ZW50IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludGVudDogSW50ZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVjZWl2ZWQgUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SVByb21pc2VCYXNlfSBqUXVlcnlQcm9taXNlIE9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBSb3V0ZXIgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpXHJcbiAgICAgICAgICog44Oa44O844K46YG356e755u05YmN44Gr6Z2e5ZCM5pyf5Yem55CG44KS6KGM44GG44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtJUHJvbWlzZUJhc2V9IFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25CZWZvcmVSb3V0ZUNoYW5nZSgpOiBJUHJvbWlzZUJhc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEl0J3MgY2FsbGVkIG9ubHkgd2hlbiBiZWZvcmUgdGhlIGZpcnN0IE9uUGFnZUluaXQoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDmnIDliJ3jga4gT25QYWdlSW5pdCgpIOOBruOBqOOBjeOBq+OBruOBv+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25Jbml0aWFsaXplKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWNyZWF0ZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKHByZXZpb3VzIHZlcnNpb24gZGVmaW5lZCBcInBhZ2Vpbml0XCIpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKOaXpzpcInBhZ2Vpbml0XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlSW5pdChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0gYWRkaXRpb25hbCBpbmZvXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3Jlc2hvd1wiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBTaG93RXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKHByZXZpb3VzIHZlcnNpb24gZGVmaW5lZCBcInBhZ2VzaG93XCIpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSBhZGRpdGlvbmFsIGluZm9cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKOaXpzpcInBhZ2VzaG93XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBTaG93RXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIGFkZGl0aW9uYWwgaW5mb1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaGlkZVwiKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0gYWRkaXRpb25hbCBpbmZvXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZVJlbW92ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZDtcclxuICAgIH1cclxufVxyXG5cclxuZGVjbGFyZSBtb2R1bGUgXCJjZHAuZnJhbWV3b3JrLmpxbVwiIHtcclxuICAgIGNvbnN0IEZyYW1ld29yazogdHlwZW9mIENEUC5GcmFtZXdvcms7XHJcbiAgICBleHBvcnQgPSBGcmFtZXdvcms7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL0ludGVyZmFjZXMudHMiLCJuYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbnVtICBSRVNVTFRfQ09ERV9CQVNFXHJcbiAgICAgKiBAYnJpZWYg44Oq44K244Or44OI44Kz44O844OJ44Gu44Kq44OV44K744OD44OI5YCkXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIENEUF9GUkFNRVdPUktfREVDTEFSRVJBVElPTiA9IDAsICAgIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBDRFBfRlJBTUVXT1JLID0gNCAqIF9NT0RVTEVfUkVTVUxUX0NPREVfUkFOR0VfQ0RQLFxyXG4gICAgfVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBtb2R1bGUgZXJyb3IgZGVjbGFyYXRpb246XHJcblxyXG4gICAgY29uc3QgRlVOQ1RJT05fQ09ERV9SQU5HRSA9IDEwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIExPQ0FMX0NPREVfQkFTRVxyXG4gICAgICogQGJyaWVmIGNkcC5mcmFtZXdvcmsuanFtIOWGheOBruODreODvOOCq+ODq+OCs+ODvOODieOCquODleOCu+ODg+ODiOWApFxyXG4gICAgICovXHJcbiAgICBlbnVtIExPQ0FMX0NPREVfQkFTRSB7XHJcbiAgICAgICAgQ09SRV9BUEkgICAgPSAwLFxyXG4gICAgICAgIFJPVVRFUiAgICAgID0gMSAqIEZVTkNUSU9OX0NPREVfUkFOR0UsXHJcbiAgICAgICAgUEFHRSAgICAgICAgPSAyICogRlVOQ1RJT05fQ09ERV9SQU5HRSxcclxuICAgIH1cclxuXHJcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIFJFU1VMVF9DT0RFXHJcbiAgICAgKiBAYnJpZWYgY2RwLmZyYW1ld29yay5qcW0g44Gu44Ko44Op44O844Kz44O844OJ5a6a576pXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFIHtcclxuICAgICAgICBFUlJPUl9DRFBfRlJBTUVXT1JLX0RFQ0xBUkFUSU9OICAgICAgICAgICAgICAgICA9IDAsIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBFUlJPUl9DRFBfRlJBTUVXT1JLX0lOSVRJQUxJWkVfRkFJTEVEICAgICAgICAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9GUkFNRVdPUkssIExPQ0FMX0NPREVfQkFTRS5DT1JFX0FQSSArIDEsIFwiZnJhbWV3b3JrIGluaXRpYWxpemUgZmFpbGVkLlwiKSxcclxuICAgICAgICBFUlJPUl9DRFBfRlJBTUVXT1JLX1JPVVRFUl9JTklUSUFMSVpFX0ZBSUxFRCAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9GUkFNRVdPUkssIExPQ0FMX0NPREVfQkFTRS5ST1VURVIgKyAxLCBcInJvdXRlciBpbml0aWFsaXplIGZhaWxlZC5cIiksXHJcbiAgICB9XHJcbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9FcnJvckRlZnMudHMiLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHBsYXRmb3JtIOWIpOWumuOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogW+WPguiAg10gaHR0cHM6Ly93M2cuanAvYmxvZy90b29scy9qc19icm93c2VyX3NuaWZmaW5nXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjb25zdCBQbGF0Zm9ybSA9ICgoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1ham9yVmVyc2lvbiA9IGZ1bmN0aW9uIChicm93c2VyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gdWEubWF0Y2gobmV3IFJlZ0V4cChcIihcIiArIGJyb3dzZXIgKyBcIikoIHwvKShbMC05XSspXCIpKTtcclxuICAgICAgICAgICAgaWYgKCF2ZXJzaW9uIHx8IHZlcnNpb24ubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZlcnNpb25bM10sIDEwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsdElFNjogdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiAoPGFueT5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnN0eWxlLm1heEhlaWdodCA9PT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgbHRJRTc6IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCA9PT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgbHRJRTg6IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9PT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgbHRJRTk6ICg8YW55PmRvY3VtZW50KS51bmlxdWVJRCAmJiB0eXBlb2Ygd2luZG93Lm1hdGNoTWVkaWEgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGd0SUUxMDogKDxhbnk+ZG9jdW1lbnQpLnVuaXF1ZUlEICYmIHdpbmRvdy5tYXRjaE1lZGlhLFxyXG4gICAgICAgICAgICBUcmlkZW50OiAoPGFueT5kb2N1bWVudCkudW5pcXVlSUQsXHJcbiAgICAgICAgICAgIEdlY2tvOiBcIk1vekFwcGVhcmFuY2VcIiBpbiAoPGFueT5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnN0eWxlLFxyXG4gICAgICAgICAgICBQcmVzdG86IGdsb2JhbC5vcGVyYSxcclxuICAgICAgICAgICAgQmxpbms6IGdsb2JhbC5jaHJvbWUsXHJcbiAgICAgICAgICAgIFdlYmtpdDogdHlwZW9mIGdsb2JhbC5jaHJvbWUgPT09IFwidW5kZWZpbmVkXCIgJiYgXCJXZWJraXRBcHBlYXJhbmNlXCIgaW4gKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZSxcclxuICAgICAgICAgICAgVG91Y2g6IHR5cGVvZiBnbG9iYWwub250b3VjaHN0YXJ0ICE9PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBNb2JpbGU6ICh0eXBlb2YgZ2xvYmFsLm9yaWVudGF0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB8fCAodWEuaW5kZXhPZihcIldpbmRvd3MgUGhvbmVcIikgIT09IC0xKSxcclxuICAgICAgICAgICAgbHRBZDRfNDogdHlwZW9mIGdsb2JhbC5vcmllbnRhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAodHlwZW9mIGdsb2JhbC5FdmVudFNvdXJjZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAzMCA+IG1ham9yVmVyc2lvbihcImNocm9tZVwiKSksXHJcbiAgICAgICAgICAgIFBvaW50ZXI6IGdsb2JhbC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQsXHJcbiAgICAgICAgICAgIE1TUG9uaXRlcjogZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLFxyXG4gICAgICAgICAgICBBbmRyb2lkOiAodWEuaW5kZXhPZihcImFuZHJvaWRcIikgIT09IC0xKSxcclxuICAgICAgICAgICAgaU9TOiAodWEuaW5kZXhPZihcImlwaG9uZVwiKSAhPT0gLTEgfHwgdWEuaW5kZXhPZihcImlwYWRcIikgIT09IC0xIHx8IHVhLmluZGV4T2YoXCJpcG9kXCIpICE9PSAtMSksXHJcbiAgICAgICAgfTtcclxuICAgIH0pKCk7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL1BsYXRmb3JtLnRzIiwiLyogdHNsaW50OmRpc2FibGU6dHlwZWRlZiBuby1iaXR3aXNlICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB2Y2xpY2sgcGF0Y2hcclxuICAgICAqL1xyXG4gICAgY29uc3QgX3ZjbGlja1BhdGNoID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGpxdWVyeV9vbiA9ICQuZm4ub24sXHJcbiAgICAgICAgICAgIGpxdWVyeV9vZmYgPSAkLmZuLm9mZjtcclxuXHJcbiAgICAgICAgY29uc3QgY3VzdG9tX29uID0gZnVuY3Rpb24gKHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIC8qSU5URVJOQUwqLyBvbmUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlcyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdHlwZXMgPSB0eXBlcy5yZXBsYWNlKC92Y2xpY2svZywgXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+Xy5iaW5kKGpxdWVyeV9vbiwgdGhpcykpKHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIG9uZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VzdG9tX29mZiA9IGZ1bmN0aW9uICh0eXBlcywgc2VsZWN0b3IsIGZuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZXMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVzID0gdHlwZXMucmVwbGFjZSgvdmNsaWNrL2csIFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICg8YW55Pl8uYmluZChqcXVlcnlfb2ZmLCB0aGlzKSkodHlwZXMsIHNlbGVjdG9yLCBmbik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gcmVwbGFjZSBmdW5jdGlvbnMuXHJcbiAgICAgICAgKDxhbnk+JC5mbikub24gPSBjdXN0b21fb247XHJcbiAgICAgICAgKDxhbnk+JC5mbikub2ZmID0gY3VzdG9tX29mZjtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAkLm1vYmlsZS53aWRnZXQucG9wdXAgcGF0Y2ggZm9yIFwiX2NyZWF0ZVByZXJlcXVpc2l0ZXNcIlxyXG4gICAgICpcclxuICAgICAqIHBhdGNoIGNvZGUgZnJvbSBqcW0gMS41XHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvY29tbWl0L2QzNGM4NmFlMTRkNGVhNjAzMzU3YmU1ZTMyNmRlMWZiOGMzMWRiZjlcclxuICAgICAqL1xyXG4gICAgY29uc3QgX2FwcGx5X2pxbV9wb3B1cF9jcmVhdGVQcmVyZXF1aXNpdGVzID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IF9zYWZlQ3JlYXRlUHJlcmVxdWlzaXRlcyA9IGZ1bmN0aW9uIChzY3JlZW5QcmVyZXF1aXNpdGU6IGFueSwgY29udGFpbmVyUHJlcmVxdWlzaXRlOiBhbnksIHdoZW5Eb25lOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IHByZXJlcXVpc2l0ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGY6IGFueSA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBwcmVyZXF1aXNpdGVzID0ge1xyXG4gICAgICAgICAgICAgICAgc2NyZWVuOiAkLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXI6ICQuRGVmZXJyZWQoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcHJlcmVxdWlzaXRlcy5zY3JlZW4uZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblByZXJlcXVpc2l0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHByZXJlcXVpc2l0ZXMuY29udGFpbmVyLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJQcmVyZXF1aXNpdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkLndoZW4ocHJlcmVxdWlzaXRlcy5zY3JlZW4sIHByZXJlcXVpc2l0ZXMuY29udGFpbmVyKS5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJlcmVxdWlzaXRlcyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hlbkRvbmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLl9wcmVyZXF1aXNpdGVzID0gcHJlcmVxdWlzaXRlcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCAkbW9iaWxlOiBhbnkgPSAkLm1vYmlsZTtcclxuICAgICAgICBpZiAoJG1vYmlsZS53aWRnZXRzICYmICRtb2JpbGUud2lkZ2V0cy5wb3B1cCkge1xyXG4gICAgICAgICAgICAkbW9iaWxlLndpZGdldHMucG9wdXAucHJvdG90eXBlLl9jcmVhdGVQcmVyZXF1aXNpdGVzID0gX3NhZmVDcmVhdGVQcmVyZXF1aXNpdGVzO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAkLm1vYmlsZS53aWRnZXQucG9wdXAgcGF0Y2ggZm9yIFwiX2hhbmRsZVdpbmRvd1Jlc2l6ZVwiXHJcbiAgICAgKlxyXG4gICAgICogcGF0Y2ggY29kZSBmcm9tIHN0YWNrIG92ZXJmbG93XHJcbiAgICAgKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNzA5MDQ0NS9qcW1vYmlsZS1yZS1wb3NpdGlvbnMtcG9wdXAtd2luZG93LWV2ZXJ5LXRpbWUtd2hlbi1hbmRyb2lkLW9wZW5zLW93bi12aXJ0dWFsLWtleVxyXG4gICAgICovXHJcbiAgICBjb25zdCBfYXBwbHlfanFtX3BvcHVwX2hhbmRsZVdpbmRvd1Jlc2l6ZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBfc2FmZUhhbmRsZVdpbmRvd1Jlc2l6ZSA9IGZ1bmN0aW9uICgvKiB0aGVFdmVudCAqLyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNPcGVuICYmIHRoaXMuX2lnbm9yZVJlc2l6ZVRvID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCkgfHwgdGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICF0aGlzLl91aS5jb250YWluZXIuaGFzQ2xhc3MoXCJ1aS1wb3B1cC1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlZmZlY3RpdmVseSByYXBpZC1jbG9zZSB0aGUgcG9wdXAgd2hpbGUgbGVhdmluZyB0aGUgc2NyZWVuIGludGFjdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vanVkZ2UgdXNlciBpcyBpbiBpbnB1dCBtb2RlIG9yIG5vdC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISgkKFwiOmZvY3VzXCIpLmlzKFwiaW5wdXRcIikgfHwgJChcIjpmb2N1c1wiKS5pcyhcInRleHRhcmVhXCIpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91aS5jb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoXCJzdHlsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCAkbW9iaWxlOiBhbnkgPSAkLm1vYmlsZTtcclxuICAgICAgICBpZiAoJG1vYmlsZS53aWRnZXRzICYmICRtb2JpbGUud2lkZ2V0cy5wb3B1cCkge1xyXG4gICAgICAgICAgICAkbW9iaWxlLndpZGdldHMucG9wdXAucHJvdG90eXBlLl9oYW5kbGVXaW5kb3dSZXNpemUgPSBfc2FmZUhhbmRsZVdpbmRvd1Jlc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogJC5tb2JpbGUud2lkZ2V0LnBvcHVwIHBhdGNoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IF9tb2JpbGVQb3B1cFBhdGNoID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGpxdWVyeU1ham9yID0gfn4kLmZuLmpxdWVyeS5zcGxpdChcIi5cIilbMF07XHJcbiAgICAgICAgY29uc3QganFtVmVyc2lvbiA9ICQubW9iaWxlLnZlcnNpb24uc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgIGNvbnN0IGpxbU1ham9yID0gfn5qcW1WZXJzaW9uWzBdO1xyXG4gICAgICAgIGNvbnN0IGpxbU1pbmVyID0gfn5qcW1WZXJzaW9uWzFdO1xyXG5cclxuICAgICAgICBpZiAoMyA8PSBqcXVlcnlNYWpvciAmJiBqcW1NYWpvciA8IDIgJiYganFtTWluZXIgPCA1KSB7XHJcbiAgICAgICAgICAgIF9hcHBseV9qcW1fcG9wdXBfY3JlYXRlUHJlcmVxdWlzaXRlcygpO1xyXG4gICAgICAgICAgICBfYXBwbHlfanFtX3BvcHVwX2hhbmRsZVdpbmRvd1Jlc2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYXRjaFxyXG4gICAgICogQGJyaWVmIHBhdGNoIGNsYXNzIGZvciBqcW0gZnJhbWV3b3JrLlxyXG4gICAgICogICAgICAgW3Jldmlld10gdmNsaWNrIOOBruODkeODg+ODgeOCkuW9k+OBpuOCi+OBk+OBqOOBjOOCj+OBi+OCi+OBqOOCiOOBhFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGF0Y2gge1xyXG5cclxuICAgICAgICBzdGF0aWMgc192Y2xpY2tFdmVudCA9IFwidmNsaWNrXCI7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIHN0YXRpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBcHBseSBwYXRjaCBiZWZvcmUgaW5pdGlhbGl6ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Yid5pyf5YyW5YmN44Gu44OR44OD44OB44Gu6YGp55SoXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhcHBseUJlZm9yZUluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghUGF0Y2guaXNTdXBwb3J0ZWRWY2xpY2soKSkge1xyXG4gICAgICAgICAgICAgICAgX3ZjbGlja1BhdGNoKCk7XHJcbiAgICAgICAgICAgICAgICBQYXRjaC5zX3ZjbGlja0V2ZW50ID0gXCJjbGlja1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQXBwbHkgcGF0Y2ggYWZ0ZXIgaW5pdGlhbGl6ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Yid5pyf5YyW5b6M44Gu44OR44OD44OB44Gu6YGp55SoXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhcHBseUFmdGVySW5pdCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgX21vYmlsZVBvcHVwUGF0Y2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBpZiBcInZjbGlja1wiIGV2ZW50IGlzIHVuc3VwcG9ydGVkLCByZXR1cm5zIGZhbHNlLiBleDogQW5kcm9pZCA0LjQgKEtpdGthdClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogXCJ2Y2xpY2tcIiBldmVudCDjgYzpnZ7jgrXjg53jg7zjg4jjgafjgYLjgosgcGxhdGZvcm0gKEtpdEthdCkg44GvIGZhbHNlIOOCkui/lOOBmeOAglxyXG4gICAgICAgICAqIGpRTSDjga4gdmVyc2lvbiB1cCDjgavjgojjgorjgIHop6PmsbrjgZXjgozjgovloLTlkIjjga/nhKHlirnjgYvjgZnjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGlzU3VwcG9ydGVkVmNsaWNrKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICAvLyBmb3IgQW5kcm9pZCA0LjQrIChLaXRrYXQg772eKVxyXG4gICAgICAgICAgICBpZiAoUGxhdGZvcm0uQW5kcm9pZCAmJiAhUGxhdGZvcm0ubHRBZDRfNCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGF0Y2gudHMiLCJuYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcbiAgICAvKipcclxuICAgICAqIEBlbnVtIE9yaWVudGF0aW9uXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIE9yaWVudGF0aW9uIHtcclxuICAgICAgICBQT1JUUkFJVCA9IDAsXHJcbiAgICAgICAgTEFORFNDQVBFID0gMSxcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEdldCBPcmllbnRhdGlvbiBlbnVtIGNvZGVcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IE9yaWVudGF0aW9uIENvZGUuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIE9yaWVudGF0aW9uIOOBruWPluW+l1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge051bWJlcn0gT3JpZW50YXRpb24gQ29kZS5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldE9yaWVudGF0aW9uKCk6IE9yaWVudGF0aW9uIHtcclxuICAgICAgICBjb25zdCAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG4gICAgICAgIHJldHVybiAoJHdpbmRvdy53aWR0aCgpIDwgJHdpbmRvdy5oZWlnaHQoKSkgPyBPcmllbnRhdGlvbi5QT1JUUkFJVCA6IE9yaWVudGF0aW9uLkxBTkRTQ0FQRTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvT3JpZW50YXRpb24udHMiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vQHR5cGVzL2pxdWVyeS5tb2JpbGUuZC50c1wiIC8+XHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCBmb3JpbiBuby1iaXR3aXNlICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICBpbXBvcnQgUHJvbWlzZSA9IENEUC5Qcm9taXNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogVGhlIGZ1bmN0aW9uIHJldHVybmVkIFByb21pc2Ugd2FpdHMgdW50aWwgUGhvbmVHYXAgaXMgcmVhZHkuXHJcbiAgICAgKiBbTm90ZV0gZW11bGF0ZSB3aGVuIFBDIGVudmlyb21lbnQuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIFBob25lR2FwIOOBjOacieWKueOBq+OBquOCi+OBvuOBp+W+heapn1xyXG4gICAgICogUEMg55Kw5aKD44Gn44Gv44Ko44Of44Ol44Os44O844OI44GV44KM44KL44CCXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yRGV2aWNlUmVhZHkoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghQ0RQLkZyYW1ld29yay5QbGF0Zm9ybS5Nb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBnbG9iYWwuY29yZG92YSB8fCBudWxsID09IGdsb2JhbC5jb3Jkb3ZhLmV4ZWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbmUoXCJkZXZpY2VyZWFkeVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXI6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBTZXR1cCBIL1cgQmFjayBrZXkgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyIOaMh+Wumi5cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSDku6XliY3jga4gaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldEJhY2tCdXR0b25IYW5kbGVyKGhhbmRsZXI6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb2xkSGFuZGxlciA9IF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXI7XHJcbiAgICAgICAgX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlciA9IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG9sZEhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYmFjayBrZXkgaGFuZGxlciBpbXBsZW1lbnQuXHJcbiAgICAoKCkgPT4ge1xyXG4gICAgICAgIHdhaXRGb3JEZXZpY2VSZWFkeSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwiYmFja2J1dHRvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pKCk7XHJcblxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgRnJhbWV3b3JrIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGludGVyZmFjZSBQbGFpblNldHRpbmdzXHJcbiAgICAgICAgICogQGJyaWVmIGpRdWVyeSDjgavoqK3lrprlj6/og73jgarjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFBsYWluU2V0dGluZ3M8VCA9IGFueT4ge1xyXG4gICAgICAgICAgICBba2V5OiBzdHJpbmddOiBUOyAgICAgICAgICAgICAgICAgICAvLyBhamF4U2V0dXAg5Lul5aSW44Gu44Kq44OX44K344On44OzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJmYWNlIEpRdWVyeVNldHRpbmdzXHJcbiAgICAgICAgICogQGJyaWVmIGpRdWVyeSDjgavoqK3lrprlj6/og73jgarjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEpRdWVyeVNldHRpbmdzIGV4dGVuZHMgUGxhaW5TZXR0aW5ncyB7XHJcbiAgICAgICAgICAgIGFqYXhTZXR1cD86IEpRdWVyeS5BamF4U2V0dGluZ3M7ICAgIC8vICQuYWpheCDjga7ml6Llrprjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgRnJhbWV3b3JrT3B0aW9uc1xyXG4gICAgICAgICAqIEBicmllZiBGcmFtZXdvcmsg44Gr6Kit5a6a5Y+v6IO944Gq44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBGcmFtZXdvcmtPcHRpb25zIHtcclxuICAgICAgICAgICAganF1ZXJ5PzogSlF1ZXJ5U2V0dGluZ3M7XHJcbiAgICAgICAgICAgIGpxdWVyeW1vYmlsZT86IFBsYWluU2V0dGluZ3M7XHJcbiAgICAgICAgICAgIGkxOG4/OiBDRFAuSTE4TlNldHRpbmdzO1xyXG4gICAgICAgICAgICBhcHBseUpRdWVyeUNvbmZpZz86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgICAgIGFwcGx5SlF1ZXJ5TW9iaWxlQ29uZmlnPzogKCkgPT4gdm9pZDtcclxuICAgICAgICAgICAgYXBwbHlQYXRjaD86IGJvb2xlYW47XHJcbiAgICAgICAgICAgIGFuY2hvclZjbGljaz86IGJvb2xlYW47XHJcbiAgICAgICAgICAgIGZpcnN0UGFnZVRyYW5zaXRpb24/OiBib29sZWFuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJmYWNlIE9yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXIge1xyXG4gICAgICAgICAgICBba2V5OiBzdHJpbmddOiBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBUQUcgPSBcIltDRFAuRnJhbWV3b3JrXSBcIjtcclxuXHJcbiAgICAgICAgbGV0IF9kZkluaXRpYWxpemU6IEpRdWVyeURlZmVycmVkPHZvaWQ+ID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogSW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gb2YgRnJhbWV3b3JrLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBGcmFtZXdvcmsg44Gu5Yid5pyf5YyW6Zai5pWwXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7RnJhbWV3b3JrT3B0aW9uc30gW2luXSBvcHRpb25zIG9iamVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zPzogRnJhbWV3b3JrT3B0aW9ucyk6IElQcm9taXNlQmFzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIGlmIChcInBlbmRpbmdcIiAhPT0gX2RmSW5pdGlhbGl6ZS5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPGFueT5fZGZJbml0aWFsaXplLnByb21pc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ0RQIOeSsOWig+OBruWIneacn+WMllxyXG4gICAgICAgICAgICAvLyDnj77nirbjga/jgIFjb25zb2xlIOOCquODluOCuOOCp+OCr+ODiOOBruS/neiovOOBqCBqUXVlcnkg44GuIFdpblJUIOWvvuW/nOOAglxyXG4gICAgICAgICAgICBDRFAuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGcmFtZXdvcmsg55So44GuIFBhdGNoIOmBqeeUqCAoRnJhbWV3b3JrIOWIneacn+WMluWJjSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFwcGx5UGF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWV3b3JrLlBhdGNoLmFwcGx5QmVmb3JlSW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uZmlnIOOBruWPjeaYoDoganF1ZXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmFwcGx5SlF1ZXJ5Q29uZmlnKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSBNb2JpbGUg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJtb2JpbGVpbml0XCIsICgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uZmlnIOOBruWPjeaYoDoganF1ZXJ5IG1vYmlsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYXBwbHlKUXVlcnlNb2JpbGVDb25maWcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNkcC5pMThuIOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDRFAuaW5pdGlhbGl6ZUkxOE4oY29uZmlnLmkxOG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWx3YXlzKChpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaTE4bmV4dCDjga7liJ3mnJ/ljJbmmYLjga7jgqjjg6njg7zjga/nhKHoppbjgZnjgosuIGluZm8g44GMIGFycmF5IOOBruWgtOWQiOOAgeOCqOODqeODvOaDheWgseOBjOagvOe0jeOBleOCjOOBpuOBhOOCiy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25lKFwicGFnZWJlZm9yZWNoYW5nZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPENoYW5nZVBhZ2VPcHRpb25zPmRhdGEub3B0aW9ucykuc2hvd0xvYWRNc2cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaTE4bmV4dOODqeOCpOODluODqeODquOBq+OCiOOCi2h0bWwgZnJhZ21lbnTjga7nv7voqLPlh6bnkIZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8YW55PiQoZXZlbnQudGFyZ2V0KSkubG9jYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLmluaXRpYWxpemUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JWY2xpY2s6IGNvbmZpZy5hbmNob3JWY2xpY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UGFnZVRyYW5zaXRpb246IGNvbmZpZy5maXJzdFBhZ2VUcmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoIChGcmFtZXdvcmsg5Yid5pyf5YyW5b6MKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFwcGx5UGF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZyYW1ld29yay5QYXRjaC5hcHBseUFmdGVySW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVqZWN0KG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfRlJBTUVXT1JLX1JPVVRFUl9JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBRyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3IuIENEUC5GcmFtZXdvcmsuUm91dGVyLmluaXRpYWxpemUoKSBmYWlsZWQuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUgPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsgLy8galF1ZXJ5IE1vYmlsZSDjga7jg63jg7zjg4lcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ganF1ZXJ5IDMrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpxdWVyeU1ham9yID0gfn4kLmZuLmpxdWVyeS5zcGxpdChcIi5cIilbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzIDw9IGpxdWVyeU1ham9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNCA8PSBqcXVlcnlNYWpvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImpxdWVyeS1taWdyYXRlIGZvciAzLjAuMCsgaW4gdXNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW1wianF1ZXJ5LW1pZ3JhdGVcIl0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhaWw6IChlcnJvcjogRXJyb3JJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZWplY3QobWFrZUVycm9ySW5mbyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkVTVUxUX0NPREUuRVJST1JfQ0RQX0ZSQU1FV09SS19JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVEFHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yLiBDRFAuaW5pdGlhbGl6ZSgpIGZhaWxlZC5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPGFueT5fZGZJbml0aWFsaXplLnByb21pc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogaW5pdGlhbGl6ZWQgLyBmYWxzZTogdW5pbml0aWFsaXplZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOWIneacn+WMlua4iOOBvyAvIGZhbHNlOiDmnKrliJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gaXNJbml0aWFsaXplZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwicmVzb2x2ZWRcIiA9PT0gX2RmSW5pdGlhbGl6ZS5zdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFdhaXQgZm9yIGluaXRpYWxpemF0aW9uIHN0YXR1cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZTx2b2lkPn1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Yid5pyf5YyW5b6F44GhXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtJUHJvbWlzZUJhc2U8dm9pZD59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JJbml0aWFsaXplKCk6IElQcm9taXNlQmFzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YW55Pl9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXI6IE9yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXIgPSB7fTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciB0byBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgW2luXSBJRCBrZXlcclxuICAgICAgICAgKiBAcGFyYW0gbGlzdGVuZXIge0lPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcn0gW2luXSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgaW5zdGFuY2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIOOCkiBGcmFtZXdvcmsg44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgW2luXSBJRCBrZXlcclxuICAgICAgICAgKiBAcGFyYW0gbGlzdGVuZXIge0lPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcn0gW2luXSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcihrZXk6IHN0cmluZywgbGlzdGVuZXI6IElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcik6IHZvaWQge1xyXG4gICAgICAgICAgICBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcltrZXldID0gbGlzdGVuZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogVW5yZWdpc3RlciBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgZnJvbSBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0gSUQga2V5XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciDjgpIgRnJhbWV3b3JrIOOBi+OCieeZu+mMsuino+mZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIElEIGtleVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB1bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIoa2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgZGVsZXRlIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgX2FjdGl2ZVBhZ2U6IElQYWdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFNldHVwIGV2ZW50IGhhbmRsZXJzIHdoZW4gYWZ0ZXIgcm91dGVyIGluaXRpYWxpemVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI44OP44Oz44OJ44Op44Gu6Kit5a6aLiBSb3V0ZXIg5Yid5pyf5YyW5b6M44GrIEZyYW1ld29yayDjgYzjgrPjg7zjg6vjgZnjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBzZXR1cEV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRCYWNrQnV0dG9uSGFuZGxlciA9IENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihudWxsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VCYWNrQnV0dG9uSGFuZGxlciA9IChldmVudD86IEpRdWVyeS5FdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSAmJiBfYWN0aXZlUGFnZS5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Op44Kk44Ki44Oz44OI5YG044Gn44OP44Oz44OJ44Oq44Oz44Kw5riI44G/44Go5oyH5a6a44GV44KM44Gf5aC05ZCI44CB5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihiYXNlQmFja0J1dHRvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUm91dGVDaGFuZ2VIYW5kbGVyID0gQ0RQLkZyYW1ld29yay5zZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlUm91dGVDaGFuZ2VIYW5kbGVyID0gKCk6IElQcm9taXNlQmFzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmVQYWdlLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkUm91dGVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9sYXN0T3JpZW50YXRpb246IE9yaWVudGF0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFNldHVwIGFjdGl2ZSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2Uge0lQYWdlfSBbaW5dIElQYWdlIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhY3RpdmUgUGFnZSDjga7oqK3lrpouIEZyYW1ld29yayDjgYzjgrPjg7zjg6vjgZnjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlIHtJUGFnZX0gW2luXSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gc2V0QWN0aXZlUGFnZShwYWdlOiBJUGFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBfYWN0aXZlUGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IGdldE9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXRlcm5zIGZyYW1ld29yayBkZWZhdWx0IGNsaWNrIGV2ZW50IHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEZyYW1ld29yayDjgYzml6Llrprjgavkvb/nlKjjgZnjgovjgq/jg6rjg4Pjgq/jgqTjg5njg7Pjg4jmloflrZfliJfjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBcInZjbGlja1wiIC8gXCJjbGlja1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDbGlja0V2ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRjaC5zX3ZjbGlja0V2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9wYWdlQ29uc3RydWN0b3JzOiAobmV3ICgpID0+IElQYWdlKVtdID0gW107XHJcbiAgICAgICAgbGV0IF9wYWdlSW5zdGFuY2VzOiBJUGFnZVtdID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBhZ2Ug44Gu55m76YyyXHJcbiAgICAgICAgICogY29uc3RydWN0b3Ig44KS5oyH5a6a44GZ44KLLiDlvJXmlbDjgYzjgYLjgovloLTlkIjjga/jgIFiaW5kIOOCkuihjOOBhuOBk+OBqFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtjb25zdHJ1Y3Rvcn0gY3RvciBbaW5dIOOCs+ODs+OCueODiOODqeOCr+OCv+OCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclBhZ2UoY3RvcjogbmV3ICgpID0+IElQYWdlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9wYWdlQ29uc3RydWN0b3JzLnB1c2goY3Rvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDkuojntITjgZXjgozjgZ/jgrPjg7Pjgrnjg4jjg6njgq/jgr/jgYvjgolQYWdlIOOCpOODs+OCueOCv+ODs+OCueOCkueUn+aIkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBjb25zdHJ1Y3RQYWdlcygpOiB2b2lkIHtcclxuICAgICAgICAgICAgX3BhZ2VDb25zdHJ1Y3RvcnMuZm9yRWFjaCgoY3RvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfcGFnZUluc3RhbmNlcy5wdXNoKG5ldyBjdG9yKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3BhZ2VDb25zdHJ1Y3RvcnMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBhZ2Ug44Kk44Oz44K544K/44Oz44K544Gu5Y+C54Wn44KS56C05qOEXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VQYWdlcygpOiB2b2lkIHtcclxuICAgICAgICAgICAgX3BhZ2VJbnN0YW5jZXMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBHZXQgQ29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7RnJhbWV3b3JrT3B0aW9uc30gQ29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQ29uZmlnIG9iamVjdCDjga7lj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7RnJhbWV3b3JrT3B0aW9uc30gQ29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRDb25maWcob3B0aW9uczogRnJhbWV3b3JrT3B0aW9ucyk6IEZyYW1ld29ya09wdGlvbnMge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZDb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgZmFpbCBzYWZlLCBkZWZhdWx0IHNldHRpbmdzLlxyXG4gICAgICAgICAgICAgICAganF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWpheFNldHVwOiB7IGNhY2hlOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVNdXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBqcXVlcnltb2JpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Nyb3NzRG9tYWluUGFnZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VUcmFuc2l0aW9uOiBcInBsYXRmb3JtLWRlZmF1bHRcIixcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjogXCJwbGF0Zm9ybS1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaExpc3RlbmluZ0VuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHB1c2hTdGF0ZUVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEBzZWUganF1ZXJ5Lm1vYmlsZS5qcyBMSU5FIDYzOTRcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSGFuZGxlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0SGFuZGxlcjogXCJzaW11bHRhbmVvdXNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVudGlhbDogW1wiZmFkZVwiLCBcImZsaXBcIiwgXCJmbG93XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW11bHRhbmVvdXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGkxOG46IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1Jlc291cmNlczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge30sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhbmNob3JWY2xpY2s6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uOiBmYWxzZSxcclxuXHJcbiAgICAgICAgICAgICAgICBhcHBseUpRdWVyeUNvbmZpZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuanF1ZXJ5KS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiYWpheFNldHVwXCIgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAodGhpcy5qcXVlcnkuYWpheFNldHVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRba2V5XSA9IHRoaXMuanF1ZXJ5W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgYXBwbHlKUXVlcnlNb2JpbGVDb25maWc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZS5sb2FkZXIucHJvdG90eXBlLm9wdGlvbnMudGV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmpxdWVyeW1vYmlsZSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInRyYW5zaXRpb25IYW5kbGVyXCIgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJG1vYmlsZTogYW55ID0gJC5tb2JpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1t0aGlzLmpxdWVyeW1vYmlsZS50cmFuc2l0aW9uSGFuZGxlci5kZWZhdWx0SGFuZGxlcl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW11bHRhbmVvdXMgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qcXVlcnltb2JpbGUudHJhbnNpdGlvbkhhbmRsZXIuc2ltdWx0YW5lb3VzLmZvckVhY2goKHRyYW5zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1t0cmFuc2l0aW9uXSA9ICRtb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNpbXVsdGFuZW91cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VxdWVudGlhbCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmpxdWVyeW1vYmlsZS50cmFuc2l0aW9uSGFuZGxlci5zZXF1ZW50aWFsLmZvckVhY2goKHRyYW5zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1t0cmFuc2l0aW9uXSA9ICRtb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNlcXVlbnRpYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQubW9iaWxlW2tleV0gPSB0aGlzLmpxdWVyeW1vYmlsZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZDb25maWcsIENEUC5Db25maWcsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBjbG9zdXJlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8gcmVzaXplIGhhbmRsZXJcclxuICAgICAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3T3JpZW50YXRpb24gPSBnZXRPcmllbnRhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoX2xhc3RPcmllbnRhdGlvbiAhPT0gbmV3T3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XS5vbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBfYWN0aXZlUGFnZS5vbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfbGFzdE9yaWVudGF0aW9uID0gbmV3T3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvQ29yZUFQSS50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9AdHlwZXMvanF1ZXJ5Lm1vYmlsZS5kLnRzXCIgLz5cclxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoIG5vLXN0cmluZy1saXRlcmFsICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuRnJhbWV3b3JrLlJvdXRlcl0gXCI7XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQ29udmVydCBwYXRoIHRvIFVSTC5cclxuICAgICAqIElmIHRoZSBwYXRoIHN0YXJ0cyBmcm9tIFwiL1wiLCB0aGUgZnVuY3Rpb24gdHJhbnNsYXRlIHRoZSBwYXRoIGFzIGNoaWxkIGZvbGRlciBvZiBcIndlYiByb290XCIuXHJcbiAgICAgKiBPdGhlcndpc2UsIGl0IGludGVycHJldHMgYXMgcmVsYXRpdmUgcGF0aCBmcm9tIGN1cnJlbnQgcGFnZS5cclxuICAgICAqIFtOb3RlXSBUaGlzIGJlaGF2aW9yIGdvIGFsb25nIHdpdGggalFNLCBOT1Qgd2l0aCByZXF1aXJlLnRvVXJsKCkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSBwYXRoIHN0cmluZ1xyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBwYXRoIOOCkiBVUkwg44Gr5aSJ5o+bXHJcbiAgICAgKiBcIi9cIiDjgYvjgonlp4vjgb7jgovjgoLjga7jga8gd2ViIHJvb3Qg44GL44KJ44CB44Gd44KM5Lul5aSW44Gv54++5Zyo44Gu44Oa44O844K444GL44KJ57W25a++44OR44K5VVJM44Gr5aSJ5o+b44GZ44KL44CCXHJcbiAgICAgKiBqUU0g44Gu5oyZ5YuV44Gr44GC44KP44Gb44Gm44GK44KK44CBcmVxdWlyZS50b1VybCgpIOOBqOeVsOOBquOCi+OBruOBp+azqOaEj+OAglxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0g44OR44K544KS5oyH5a6a44CCXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b1VybChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChudWxsICE9IHBhdGhbMF0gJiYgXCIvXCIgPT09IHBhdGhbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENEUC50b1VybChwYXRoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUocGF0aCwgZ2V0Q3VycmVudERvY3VtZW50VXJsKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEdldCBjdXJyZW50IGRvY3VtZW50IHVybC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiDnj77lnKjooajnpLrjgZfjgabjgYTjgovjg4njgq3jg6Xjg6Hjg7Pjg4jjga4gVVJMIOOCkuWPluW+l1xyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREb2N1bWVudFVybCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0ICRhY3RpdmVQYWdlID0gKDxhbnk+JChcImJvZHlcIikpLnBhZ2Vjb250YWluZXIoXCJnZXRBY3RpdmVQYWdlXCIpO1xyXG4gICAgICAgIGlmIChudWxsID09ICRhY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmFzZSA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcbiAgICAgICAgbGV0IHVybCA9ICQubW9iaWxlLmFjdGl2ZVBhZ2UuY2xvc2VzdChcIi51aS1wYWdlXCIpLmpxbURhdGEoXCJ1cmxcIik7XHJcblxyXG4gICAgICAgIGlmICghdXJsIHx8ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHVybCA9IGJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUodXJsLCBiYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIERlZmF1bHQgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiDml6Llrprjga4gXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgbGV0IF9iZWZvcmVSb3V0ZUNoYW5nZSA9ICgpOiBJUHJvbWlzZUJhc2U8YW55PiA9PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkZWZhdWx0IFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGhhbm5kbGVyXHJcbiAgICBjb25zdCBfZGVmYXVsdEJlZm9yZVJvdXRlQ2hhbmdlID0gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogU2V0dXAgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44Op6Kit5a6aXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXIg5oyH5a6aLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IOS7peWJjeOBriBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGhhbmRsZXI6ICgpID0+IElQcm9taXNlQmFzZTxhbnk+KTogKCkgPT4gSVByb21pc2VCYXNlPGFueT4ge1xyXG4gICAgICAgIGlmIChudWxsID09IGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBvbGRIYW5kbGVyID0gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UgPSBoYW5kbGVyO1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkSGFuZGxlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSW5pdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBpbml0aWFsaXplIG9wdGlvbiBkZWZpbml0aW9uLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJbml0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIOWIneacn+WMluOCquODl+OCt+ODp+ODs1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbml0T3B0aW9ucyB7XHJcbiAgICAgICAgYW5jaG9yVmNsaWNrPzogYm9vbGVhbjsgICAgICAgICAvLyDmmpfpu5njga4gYW5jaG9yIHZjbGljayDjgpLjgrXjg53jg7zjg4hcclxuICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uPzogYm9vbGVhbjsgIC8vIOWIneacn+ODmuODvOOCuOODiOODqeODs+OCuOOCt+ODp+ODs1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBSb3V0ZUNvbnRleHRcclxuICAgICAqIEBicmllZiBNYW5hZ2VtZW50IGluZm8gZm9yIHBhZ2UuXHJcbiAgICAgKiAgICAgICAgVGhpcyBpbnRlcmZhY2Ugcm9sZSBpcyBub3Qgc2FtZSBhcyBCYWNrYm9uZS5Sb3V0ZXIucm91dGVzLlxyXG4gICAgICogICAgICAgIFVzaW5nIGZvciByZXNvbHZpbmcgcmVsYXRpb24gYSBrbm93biBmcmFnbWVudCB2YWx1ZSBhbmQgYSBwYWdlIHBhdGguXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlQ29udGV4dFxyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOeuoeeQhuaDheWgsVxyXG4gICAgICogICAgICAgIEJhY2tib25lLlJvdXRlci5yb3V0ZXMg44Go5ZCM44GY5b255Ymy44Gn44Gv44Gq44GE44CCXHJcbiAgICAgKiAgICAgICAg6YG356e744GX44Gf44GT44Go44GM44GC44KL44OV44Op44Kw44Oh44Oz44OI5YCk44Go44Oa44O844K444Gu44OR44K544Gu6Kej5rG644Gr5L2/55So44GV44KM44KL44CCXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgUm91dGVDb250ZXh0IHtcclxuICAgICAgICByb3V0ZTogc3RyaW5nO1xyXG4gICAgICAgIHJlZ2V4cDogUmVnRXhwO1xyXG4gICAgICAgIHBhZ2U6IHN0cmluZztcclxuICAgICAgICB0b3A6IGJvb2xlYW47XHJcbiAgICAgICAgY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVJbmZvXHJcbiAgICAgKiBAYnJpZWYgU3RvcmVkIGFkZGl0aW9uYWwgaW5mbyBpbnRlcmZhY2Ugb24gbmF2aWdhdGUuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIE5hdmlnYXRlSW5mb1xyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOmBt+enu+OBq+mWouOBmeOCi+S7mOWKoOaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIE5hdmlnYXRlSW5mbyB7XHJcbiAgICAgICAgdXJsPzogc3RyaW5nO1xyXG4gICAgICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgcmV2ZXJzZT86IGJvb2xlYW47XHJcbiAgICAgICAgYmFja0Rlc3RpbmF0aW9uPzogc3RyaW5nO1xyXG4gICAgICAgIG5vSGFzaENoYW5nZT86IGJvb2xlYW47XHJcbiAgICAgICAgaW50ZW50PzogSW50ZW50O1xyXG4gICAgICAgIC8vIHN0YXR1cyBwYXJhbXNcclxuICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlPzogYm9vbGVhbjtcclxuICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZT86IGJvb2xlYW47XHJcbiAgICAgICAgaW5OYXZpZ2F0aW9uPzogYm9vbGVhbjtcclxuICAgICAgICBpbkFkZGl0aW9uYWxCYWNrPzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXhcclxuICAgICAqIEBicmllZiBFeHRlbmVkIFN1YkZsb3dQYXJhbSBpbnRlcmZhY2UgaW4gRnJhbWV3b3JrIHVzZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXhcclxuICAgICAqIEBicmllZiBGcmFtZXdvcmsg44GM5L2/55So44GZ44KLIFN1YkZsb3dQYXJhbSDmi6HlvLXjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBTdWJGbG93UGFyYW1FeCBleHRlbmRzIFN1YkZsb3dQYXJhbSB7XHJcbiAgICAgICAgYWRkaXRpb25hbERpc3RhbmNlPzogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAY2xhc3MgUm91dGVyXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyIGNsYXNzIGZvciBhZGp1c3RpbmcgalF1ZXJ5TW9iaWxlIGZ1bmN0aW9ucyBhbmQgQmFja2JvbmUuUm91dGVyIGZ1bmN0aW9ucy5cclxuICAgICAqICAgICAgICBFdmVuIGlmIEJhY2tib25lLlJvdXRlciBkb2VzIG5vdCBzdGFydCByb3V0aW5nLCBuYXRpZ2F0ZSgpIG1ldGhvZCB3b3JrcyBnb29kIHdpdGggalFNIGZyYW1ld29yay5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGNsYXNzIFJvdXRlclxyXG4gICAgICogQGJyaWVmIGpRdWVyeU1vYmlsZSDjgaggQmFja2JvbmUuUm91dGVyIOOCkuiqv+WBnOOBmeOCiyBSb3V0ZXIg44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAg44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44Gq44GE5aC05ZCI44Gr44KC44CBbmF2aWdhdGUoKSDjga8galFNIOODleODrOODvOODoOODr+ODvOOCr+OCkuS9v+eUqOOBl+OBpuapn+iDveOBmeOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUm91dGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19pbml0T3B0aW9uczogSW5pdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3JvdXRlcjogQmFja2JvbmUuUm91dGVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3Jvb3RDb250ZXh0czogT2JqZWN0ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sYXN0TmF2aWdhdGVJbmZvOiBOYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RDbGlja2VkVGltZTogbnVtYmVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RJbnRlbnQ6IEludGVudCA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZmlyc3RDaGFuZ2VQYWdlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xvYWRVcmw6IChmcmFnbWVudDogc3RyaW5nKSA9PiBib29sZWFuID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2JhY2s6ICgpID0+IHZvaWQgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERFTEFZX1RJTUUgPSAyMDA7ICAgICAgICAvLyBUQkQ6IOaaq+WumuWApFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfQkFDS19ERVNUSU5BVElPTiA9IFwiZGF0YS1iYWNrLWRzdFwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfTk9fSEFTSF9DSEFOR0UgPSBcImRhdGEtbm8taGFzaC1jaGFuZ2VcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX05PX1ZDTElDS19IQU5ETEUgPSBcImRhdGEtbm8tdmNsaWNrLWhhbmRsZVwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEJBQ0tfREVTVElOQVRJT05fVVJMID0gXCJiYWNrRHN0VXJsXCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU1VCRkxPV19QQVJBTSA9IFwic3ViRmxvd1BhcmFtXCI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZGVmYXVsdEluaXRPcHRpb25zOiBJbml0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5jaG9yVmNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHROYXZpZ2F0ZU9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGludGVudDogbnVsbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogZm9yIGluaXRpYWxpemUgUm91dGVyLiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJZcclxuICAgICAgICAgKiDjgZPjga7plqLmlbDjga/jg5Xjg6zjg7zjg6Djg6/jg7zjgq/lhoXpg6jjgafkvb/nlKjjgZXjgozjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgb3B0aW9ucyB7T2JqZWN0fSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IOaIkOWQplxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZShvcHRpb25zOiBJbml0T3B0aW9ucyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCAkYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb3V0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImxvZ2ljIGVycm9yLiBpbml0aWFsaXplIGNhbGwgdHdpY2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuc19pbml0T3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0SW5pdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfaW5pdE9wdGlvbnMuZmlyc3RQYWdlVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfZmlyc3RDaGFuZ2VQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgYzjgIFyb3V0ZSDjgpLop6PmsbrjgafjgY3jgarjgYvjgaPjgZ/loLTlkIjjgavjgoLpgJrnn6XjgpLmjZXmjYnjgZnjgovjgZ/jgoHjga7jgrPjg7zjg6vjg5Djg4Pjgq/jgpLoqK3lrppcclxuICAgICAgICAgICAgUm91dGVyLnNfbG9hZFVybCA9IF8uYmluZChCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwsIEJhY2tib25lLmhpc3RvcnkpO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwgPSBSb3V0ZXIuY3VzdG9tTG9hZFVybDtcclxuICAgICAgICAgICAgUm91dGVyLnNfcm91dGVyID0gbmV3IEJhY2tib25lLlJvdXRlcigpO1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIub24oXCJyb3V0ZVwiLCBSb3V0ZXIub25Sb3V0ZVN1Y2NlZWRlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44KS5L2/55So44GX44Gm44GE44KL5aC05ZCI44CBJC5tb2JpbGUuYmFjaygpIOOBruaMmeWLleOCkuODluODqeOCpuOCtuOBrlvmiLvjgotd44Gr57Wx5LiAXHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2JhY2sgPSBfLmJpbmQoJC5tb2JpbGUuYmFjaywgJC5tb2JpbGUpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYmFjayA9IFJvdXRlci5jdXN0b21KcW1CYWNrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjaGFuZ2VQYWdlIOOCkuOCteODneODvOODiFxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSAkLm1vYmlsZS5jaGFuZ2VQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5jaGFuZ2VQYWdlID0gKHRvOiBhbnksIG9wdD86IENoYW5nZVBhZ2VPcHRpb25zKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+JGJvZHkpLnBhZ2Vjb250YWluZXIoXCJjaGFuZ2VcIiwgdG8sIG9wdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAvLyBGcmFtZXdvcmsg44Gu44Kk44OZ44Oz44OI44OP44Oz44OJ44Op44KS5pu05pawXHJcbiAgICAgICAgICAgIEZyYW1ld29yay5zZXR1cEV2ZW50SGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIHRvIFJvdXRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByb3V0ZSAgICB7U3RyaW5nfSAgIFtpbl0gcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlICAgICB7U3RyaW5nfSAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSBwYXRoLlxyXG4gICAgICAgICAqIEBwYXJhbSB0b3AgICAgICB7Qm9vbGVhbn0gIFtpbl0gc2V0IFwidHJ1ZVwiIGlmIGFwcGxpY2F0aW9uJ3MgdG9wIHZpZXcuIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIGNhbGxiYWNrIGZvciBjdXN0b20gcGFnZSB0cmFuc2l0aW9uLiBJZiB5b3UgZG9uJ3Qgd2FudCB0byB0cmlnZ2VyIGpRTS5jaGFuZ2VQYWdlKCksIHJldHVybiB0cnVlIGJ5IHRoaXMgY2FsbGJhY2suIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcmV0dXJuIHtSb3V0ZXJ9IFJvdXRlciBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcm91dGUgICAge1N0cmluZ30gICBbaW5dIOODq+ODvOODhuOCo+ODs+OCsOaWh+Wtl+WIlyAvIOato+imj+ihqOePvlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlICAgICB7U3RyaW5nfSAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSBwYXRoLiDjgqTjg5njg7Pjg4jlkI3jgavjgoLkvb/nlKjjgZXjgozjgotcclxuICAgICAgICAgKiBAcGFyYW0gdG9wICAgICAge0Jvb2xlYW59ICBbaW5dIFRvcCDjg5rjg7zjgrjjga7loLTlkIjjga8gdHJ1ZSDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIOmBt+enu+OCkuiHqui6q+OBp+euoeeQhuOBmeOCi+WgtOWQiOOBq+aMh+WumuOBl+OAgeaIu+OCiuWApOOCkiB0cnVlIOOBq+ioreWumuOBmeOCi+OBqCBjaGFuZ2VQYWdlIOOCkuOCs+ODvOODq+OBl+OBquOBhCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEByZXR1cm4ge1JvdXRlcn0g44Kk44Oz44K544K/44Oz44K544CC44Gf44Gg44GXIG1ldGhvZCBjaGFpbiDjgpLjgZfjgZ/jgYTloLTlkIjjga/jgIFhbnkgY2FzdCDjgYzlv4XopoHjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKHJvdXRlOiBzdHJpbmcsIHBhZ2U6IHN0cmluZywgdG9wOiBib29sZWFuID0gZmFsc2UsIGNhbGxiYWNrPzogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuKTogUm91dGVyIHtcclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBuOOBrueZu+mMsuOBryBoaXN0b3J5IOOBruWBnOatouOBjOW/heimgVxyXG4gICAgICAgICAgICBjb25zdCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByb3V0ZSArIHBhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQ6IFJvdXRlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIHJvdXRlOiByb3V0ZSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChyb3V0ZSksXHJcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgdG9wOiB0b3AsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIucHVzaENvbnRleHQobmFtZSwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlci5yb3V0ZShyb3V0ZSwgbmFtZSwgKCkgPT4gey8qIG5vb3AgKi8gfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlho3plovmmYLjga/lho3oqq3jgb/ovrzjgb/jgZfjgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSwgcGFnZUNvbnN0cnVjdDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RhcnQgbGlzdGVuaW5nIGhhc2ggY2hhbmdlLlxyXG4gICAgICAgICAqIEl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgcmVnaXN0ZXIoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFtpbl0gb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLkhpc3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWxpeattOebo+imluOBrumWi+Wni1xyXG4gICAgICAgICAqIOeZu+mMsuWujOS6huW+jOOBq+WRvOOBs+WHuuOBmeOAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gW2luXSBCYWNrYm9uZS5IaXN0b3J5IOOBq+OCj+OBn+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RhcnQob3B0aW9ucz86IFJvdXRlck9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0ID0gJC5leHRlbmQoeyBwYWdlQ29uc3RydWN0OiB0cnVlIH0sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAob3B0LnBhZ2VDb25zdHJ1Y3QpIHtcclxuICAgICAgICAgICAgICAgIEZyYW1ld29yay5jb25zdHJ1Y3RQYWdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcInNldHRpbmcgZXJyb3IuIGNvbmZpY3Q6ICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkID0gdHJ1ZSwgY2Fubm90IHN0YXJ0LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KG9wdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcCBsaXN0ZW5pbmcgaGFzaCBjaGFuZ2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBwcmV2aW91cyBzdGF0dXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWxpeattOebo+imluOBrue1guS6hlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0g5Lul5YmN44Gu6ZaL5aeL54q25oWL44KS6L+U5Y20XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdG9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2U3RhdGUgPSAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0b3AoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayByb3V0aW5nIHN0YXR1cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IHJvdXRpbmcgLyBmYWxzZTogbm90IHJvdXRpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnInlirkgLyBmYWxzZTog54Sh5Yq5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc1JvdXRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFVSTCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSAgICAgICAgIFtpbl0gc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWwgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFVSTOmBt+enu1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGUodXJsOiBzdHJpbmcsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIlJvdXRlci5uYXZpZ2F0ZSgpIGNhbGxlZCBpbiBuYXZpZ2F0aW9uIHByb2MuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5pbml0Rmlyc3RQYWdlSWZOZWVkZWQodXJsKSkgeyAvLyBhdXRvSW5pdGlhbGl6ZVBhZ2Ug44GM5oyH5a6a44GV44KM44Gm44GE44Gq44GE44Go44GNXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0TmF2aWdhdGVPcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpS4gU3ViIEZsb3cg44Gr44Gm44GZ44Gn44Gr44Kz44O844Or44GV44KM44Gm44GE44KL5aC05ZCI44Gv5pei5a6a44Gu5L2V44KC44GX44Gq44GE44Kz44O844Or44OQ44OD44Kv44KS5L2/55So44GZ44KLLlxyXG4gICAgICAgICAgICBjb25zdCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSA9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2UgPyBfZGVmYXVsdEJlZm9yZVJvdXRlQ2hhbmdlIDogX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG5cclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgIHJldmVyc2U6IHJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICBiYWNrRGVzdGluYXRpb246IG5hdk9wdGlvbnMuYmFja0Rlc3RpbmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgbm9IYXNoQ2hhbmdlOiBuYXZPcHRpb25zLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgIGludGVudDogbmF2T3B0aW9ucy5pbnRlbnQgfHwge30sXHJcbiAgICAgICAgICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6VcclxuICAgICAgICAgICAgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZVJvdXRlQ2hhbmdlKCkg44GM5aSx5pWX44GX44Gf5aC05ZCI44CB6Ie05ZG955qE44Gq5LiN5YW35ZCI44Go44Gq44KL44Gf44KB44CBZXJyb3Ig6KiY6Yyy44Gu44G/44Gr44GX44Gm5YWI44Gr6YCy44KA44CCXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLmlzUm91dGluZygpICYmICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2T3B0aW9ucy5zdWJGbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmVnaW5cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0U3ViRmxvdyhuYXZPcHRpb25zLnN1YkZsb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5maW5pc2hTdWJGbG93KG5hdk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG5hdmlnYXRpb24g44Gv5ZG844Gw44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBzdWJGbG93Lm9wZXJhdGlvbi4gb3BlcmF0aW9uOiBcIiArIG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwgbmF2T3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhY2tib25lLmhpc3RvcnkubG9hZFVybCgpIOOBjOOCs+ODvOODq+OBleOCjOOBquOBi+OBo+OBn+WgtOWQiCwgbmF2aWdhdGlvbiDntYLkuoZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZPcHRpb25zLnN1YkZsb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInN1YkZsb3cgb25seSBzdXBwb3J0ZWQgdW5kZXIgcm91dGluZyBhbmQgaGFzaCBjaGFuZ2UgY29uZGl0aW9uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRleHQ6IFJvdXRlQ29udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ubm9IYXNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub0hhc2hDaGFuZ2Ug44GM5oyH5a6a44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44GM5pyJ5Yq544Gn44Gq44GE44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmRXaGVyZSg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgeyByb3V0ZTogZnJhZ21lbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQucGFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZSh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIE5hdmlnYXRlIGZyb20gVG9wIFBhZ2UuXHJcbiAgICAgICAgICogSWYgU3ViRmxvdyBzZXQgdXAsIHRoZSBwYXJhbSBpcyBjbGVhcmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRvICAgICAgICAge1N0cmluZ3xQYWdlU3RhY2t8UGFnZVN0YWNrW119IFtpbl0gc2V0IGEgbmF2aWdhdGUgVVJMIG9yIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gICAgICAgICAgICAgIFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODiOODg+ODl+ODmuODvOOCuOOBi+OCieOBrueUu+mdoumBt+enu1xyXG4gICAgICAgICAqIFN1YkZsb3cg44GM5oyH5a6a44GV44KM44Gm44GE44Gf5aC05ZCI44Gv44Kv44Oq44Ki44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdG8gICAgICAgICB7U3RyaW5nfFBhZ2VTdGFja3xQYWdlU3RhY2tbXX0gW2luXSDpgbfnp7sgVVJMIC8gUGFnZVN0YWNrT3B0aW9ucyDjgqrjg5bjgrjjgqfjgq/jg4gv6YWN5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgICAgICBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGVGcm9tVG9wKFxyXG4gICAgICAgICAgICB0bz86IHN0cmluZyB8IFBhZ2VTdGFjayB8IFBhZ2VTdGFja1tdLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZXZlcnNlPzogYm9vbGVhbixcclxuICAgICAgICAgICAgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWdlID0gc3RhY2tbUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IF90cmFuc2l0aW9uID0gdHJhbnNpdGlvbiB8fCBjdXJyZW50UGFnZS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBfcmV2ZXJzZSA9IChudWxsICE9IHJldmVyc2UpID8gcmV2ZXJzZSA6IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc3RTdGFja3M6IFBhZ2VTdGFja1tdID0gKCgpOiBQYWdlU3RhY2tbXSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0bykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGFnZVN0YWNrW10+W3sgcm91dGU6IHRvIH1dO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0byBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFBhZ2VTdGFja1tdPlt0b107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmjIflrprjgZXjgozjgZ8gU3ViRmxvdyDjgpLliYrpmaRcclxuICAgICAgICAgICAgc3RhY2suZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K444GrIFN1YkZsb3cg44OR44Op44Oh44O844K/44KS5oyH5a6aXHJcbiAgICAgICAgICAgIHN0YWNrWzBdW1JvdXRlci5TVUJGTE9XX1BBUkFNXSA9IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJiZWdpblwiLFxyXG4gICAgICAgICAgICAgICAgZGVzdEJhc2U6IHN0YWNrWzBdLmhhc2gsICAgIC8vIOWIneacn+ODmuODvOOCuOOBruODj+ODg+OCt+ODpVxyXG4gICAgICAgICAgICAgICAgZGVzdFN0YWNrczogZGVzdFN0YWNrcyxcclxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxEaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCBfdHJhbnNpdGlvbiwgX3JldmVyc2UsICQuZXh0ZW5kKHt9LCBvcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImVuZFwiLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmFjayB0byBwcmV2aW91cyBoaXN0b3J5LlxyXG4gICAgICAgICAqIEl0J3Mgc2FtZSBhcyBicm93c2VyIGJhY2sgYnV0dG9uJ3MgYmVoYXZpb3VyLlxyXG4gICAgICAgICAqIFtOb3RlXSBJZiBzZXQgdGhlIGpRTTogZGF0YS1yZWw9XCJiYWNrXCIsIHdvcmsgYXMgd2VsbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5bGl5q2044KS5oi744KLXHJcbiAgICAgICAgICog44OW44Op44Km44K244Gu5oi744KL44Oc44K/44Oz44Go5ZCM44GY5oyZ5YuV44CCXHJcbiAgICAgICAgICogalFNOiBkYXRhLXJlbD1cImJhY2tcIiDjgpLmjIflrprjgZfjgabjgoLlkIzjgZjjgafjgYLjgovjgZPjgajjgavms6jmhI/jgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIlJvdXRlci5iYWNrKCkgY2FsbGVkIGluIG5hdmlnYXRpb24gcHJvYy5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUm91dGVyLmlzVG9wUGFnZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUb3Ag44Oa44O844K444Gr5oyH5a6a44GV44KM44Gm44GE44KM44Gw57WC5LqGXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHAgPSAoPGFueT5uYXZpZ2F0b3IpLmFwcCB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmICghIWFwcC5leGl0QXBwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmV4aXRBcHAoKTsgICAgLy8gbm90ZTogbmV2ZXIgZXhpdCBvbiBpT1NcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZTogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpVxyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmJhY2soKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZSBJbnRlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJbnRlbnQg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwdXNoSW50ZW50KGludGVudDogSW50ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RJbnRlbnQgPSAkLmV4dGVuZCh0cnVlLCBSb3V0ZXIuc19sYXN0SW50ZW50LCBpbnRlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBJbnRlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJbnRlbnQg44KS5Y+W5b6XXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwb3BJbnRlbnQoKTogSW50ZW50IHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZW50ID0gUm91dGVyLnNfbGFzdEludGVudDtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdEludGVudCA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBxdWVyeSBwYXJhbWV0ZXIg44Gr5oyH5a6a44GV44KM44Gf5byV5pWw44Gu5Y+W5b6XXHJcbiAgICAgICAgICog44Oa44O844K46YG356e75Lit44Gr44Gu44G/44Ki44Kv44K744K55Y+v6IO9IChwYWdlYmVmb3JlY3JlYXRlIO+9niBwYWdlY2hhbmdlKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0UXVlcnlQYXJhbWV0ZXJzKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCAmJiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXNbXCJxdWVyeVBhcmFtc1wiXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmVnaW4gc3ViIGZsb3cgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsICAgICAgICB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu6ZaL5aeLLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7MgKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYmVnaW5TdWJGbG93KHVybDogc3RyaW5nLCBvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdDogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQoe30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBvcHQuc3ViRmxvdyA9IG9wdC5zdWJGbG93IHx8IHsgb3BlcmF0aW9uOiBcImJlZ2luXCIgfTtcclxuICAgICAgICAgICAgaWYgKFwiYmVnaW5cIiAhPT0gb3B0LnN1YkZsb3cub3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IuIGludmFsaWQgc3ViZmxvdyBvcGVyYXRpb24uIFtvcGVyYXRpb246IFwiICsgb3B0LnN1YkZsb3cub3BlcmF0aW9uICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sIHJldmVyc2UsIG9wdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ29tbWl0IHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu57WC5LqGLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29tbWl0U3ViRmxvdyh0cmFuc2l0aW9uPzogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobnVsbCwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwge1xyXG4gICAgICAgICAgICAgICAgc3ViRmxvdzoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2FuY2VsIHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZVtkZWZhdWx0XSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu44Kt44Oj44Oz44K744OrLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlW+aXouWuml0vZmFsc2U66YCa5bi4ICjku7vmhI8pXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjYW5jZWxTdWJGbG93KHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIOi1t+eCueOBruODmuODvOOCuOOBq+aIu+OCi1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgYmFzZUluZm8uc3ViRmxvd1BhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCB0cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgKG51bGwgIT0gcmV2ZXJzZSkgPyByZXZlcnNlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdFN0YWNrczogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBpbiBzdWIgZmxvdy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg5YaF44Gn44GC44KL44GL5Yik5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc0luU3ViRmxvdygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBjb25zdCBoYXMgPSBfLnNvbWUoc3RhY2ssICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdmFsdWVbUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGhhcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmcm9tIGhhc2ggY2hhbmdlZCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBIYXNoIOWkieabtOOBq+OCiOOBo+OBpiBOYXZpZ2F0ZSDjgYzotbfjgZPjgaPjgZ/jgYvliKTlrppcclxuICAgICAgICAgKiBcInBhZ2VjaGFuZ2VcIiDjgYznmbrnlJ/jgZnjgovjgb7jgafjgavliKTlrprlj6/og71cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21IYXNoQ2hhbmdlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgLy8gcG9zaXRpdmVOYXZpZ2F0ZSA9IGZhbHNlIOOBr+WQq+OCgeOBquOBhFxyXG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gJiYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWdpc3RlciBwYWdlIHN0YWNrLlxyXG4gICAgICAgICAqIFNldCByZWdpc3RlcmVkIHJvdXRlKHMpIHRvIGFkZCB0byBwYWdlIHN0YWNrIG9uIHRoZSBiYXNpcyBvZiB0aGUgcHJlc2VudCBzdGFjayBwb3NpdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlU3RhY2sgICAge1BhZ2VTdGFja3xQYWdlU3RhY2tbXX0gICBbaW5dIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoTmF2aWdhdGUge0Jvb2xlYW59ICAgICAgICAgICAgICAgICBbaW5dIHRydWU6IHdpdGggbmF2aWdhdGUgZmluYWwgc3RhY2suIChkZWZhdWx0KSAvIGZhbHNlOiBub3QgbmF2aWdhdGUuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAgICB7TmF2aWdhdGVPcHRpb25zfSAgICAgICAgIFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLihvcHRpb25hbClcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOOCueOCv+ODg+OCr+eZu+mMslxyXG4gICAgICAgICAqIOeZu+mMsua4iOOBv+OBriByb3V0ZSDjgpLmjIflrprjgZfjgabjgIHnj77lnKjjga7kvY3nva7jgpLln7rngrnjgavjg5rjg7zjgrjjgrnjgr/jg4Pjgq/jgavnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlU3RhY2sgICAge1BhZ2VTdGFja3xQYWdlU3RhY2tbXX0gICBbaW5dIFBhZ2VTdGFja09wdGlvbnMg44Kq44OW44K444Kn44Kv44OIL+mFjeWIl1xyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoTmF2aWdhdGUge0Jvb2xlYW59ICAgICAgICAgICAgICAgICBbaW5dIHRydWU6IOacgOW+jOOBruOCueOCv+ODg+OCr+OBq+WvvuOBl+OBpuODmuODvOOCuOmBt+enu+OBmeOCiy4gKGRlZmF1bHQpIC8gZmFsc2U6IOODmuODvOOCuOmBt+enu+OBl+OBquOBhC5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgW2luXSBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7MgKOS7u+aEjylcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IFBhZ2VTdGFjaywgd2l0aE5hdmlnYXRlPzogYm9vbGVhbiwgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9ucyk6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IFBhZ2VTdGFja1tdLCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogYW55LCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YWNrcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBwYWdlU3RhY2sgPSAocGFnZVN0YWNrIGluc3RhbmNlb2YgQXJyYXkpID8gcGFnZVN0YWNrIDogW3BhZ2VTdGFja107XHJcbiAgICAgICAgICAgIHdpdGhOYXZpZ2F0ZSA9IChudWxsID09IHdpdGhOYXZpZ2F0ZSkgPyBmYWxzZSA6IHdpdGhOYXZpZ2F0ZTtcclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlU3RhY2sgPSAoaW5mbzogUGFnZVN0YWNrKTogYW55ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChpbmZvLnJvdXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwicm91dGUgaXMgbm90IHJlZ2lzdGVyZWQuIHJvdXRlOiBcIiArIGluZm8ucm91dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlOiBpbmZvLnJvdXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlVXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpbmZvLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBpbmZvLnRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBhZ2VTdGFjay5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IG1ha2VTdGFjayhwYWdlU3RhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lgZzmraJcclxuICAgICAgICAgICAgICAgIGxldCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbGVudExlbmd0aCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxJbmRleCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuY2xlYXJGb3J3YXJkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBzaWxlbnRMZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gbmV3U3RhY2tzW2ldLnJvdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2sucHVzaChuZXdTdGFja3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmluYWwgc3RhY2sgd2l0aCBuYXZpZ2F0ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdGFydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnJvdXRlLCB0cmFuc2l0aW9uLCByZXZlcnNlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IG5ld1N0YWNrc1tmaW5hbEluZGV4XS5yb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLnB1c2gobmV3U3RhY2tzW2ZpbmFsSW5kZXhdKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lho3plotcclxuICAgICAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0KHsgc2lsZW50OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogR2V0IGpRTSdzIGhpc3Rvcnkgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSDjga4gSGlzdG9yeSDjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0SnFtSGlzdG9yeSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogT3ZlcnJpZGU6IEJhY2tib25lLkhpc3RvcnkubG9hZFVybCgpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFja2JvbmUuSGlzdG9yeS5sb2FkVXJsKCkg44Gu44Kq44O844OQ44O844Op44Kk44OJXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUxvYWRVcmwoZnJhZ21lbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gUm91dGVyLnNfbG9hZFVybChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLm9uUm91dGVGYWlsZWQoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIE92ZXJyaWRlOiAkLm1vYmlsZS5iYWNrKCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmYWlsIHNhZmUgcHJvY2Vzc2luZy5cclxuICAgICAgICAgKiAgSWYgdXNpbmcgQmFja2JvbmUncyBSb3V0ZXIsXHJcbiAgICAgICAgICogIHRoaXMgY2xhc3MgdW51c2VzIGhpc3Rvcnkgb2JqZWN0IG9mIGpRdWVyeSBNb2JpbGUgMS40LFxyXG4gICAgICAgICAqICBhbmQgc3RhbmRhcmRpemUgYXMgYnJvd3NlciBiYWNrIGJ1dHRvbidzIGJlaGF2aW91ci4gKGpRTSAxLjMgY29tcGFyYWJsZSlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqICQubW9iaWxlLmJhY2soKSDjga7jgqrjg7zjg5Djg7zjg6njgqTjg4lcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFtUQkRdIGZhaWwgc2FmZSDlh6bnkIZcclxuICAgICAgICAgKiAgQmFja2JvbmUg44GuIFJvdXRlciDjgpLkvb/nlKjjgZfjgabjgYTjgovloLTlkIjjgIFcclxuICAgICAgICAgKiAgalF1ZXJ5IE1vYmlsZSAxLjQg5Lul6ZmN44Gu5YaF6YOo44GuIEhpc3Rvcnkg566h55CG44Gv5L2/55So44Gb44Ga44GrXHJcbiAgICAgICAgICogIDEuMyDnm7jlvZPjga7jg5bjg6njgqbjgrbjga5b5oi744KLXeOBruaMmeWLleOBq+e1seS4gOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjdXN0b21KcW1CYWNrKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLmlzUm91dGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LmJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGpRTSDml6Llrprlh6bnkIZcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2JhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEJpbmQgZXZlbnRzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI44OQ44Kk44Oz44OJXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGJpbmRFdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAub25lKFwicGFnZWNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2luaXRPcHRpb25zLmFuY2hvclZjbGljaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmNob3IgdmNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwidmNsaWNrXCIsIFwiW2hyZWZdXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIub25BbmNob3JWY2xpY2tlZChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFwiZGF0YS1iYWNrLWRzdFwiIOOCkiBwYWdlIOOBq+ioreWumlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uYmFja0Rlc3RpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZTogT2JqZWN0ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF0gPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmJhY2tEZXN0aW5hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZXNob3dcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmU6IE9iamVjdCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjaGFuZ2UgcGFnZWNvbnRhaW5lcmxvYWRmYWlsZWRcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgLy8gYmFjayBrZXkgYXNzaWduXHJcbiAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihSb3V0ZXIuYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcmUgdGhlIFJvb3RDb250ZXh0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAgICB7U3RyaW5nfSAgICAgICBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7Um91dGVDb250ZXh0fSBbaW5dIGNvbnRleHQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogYWxyZWFkeSByZWdpc3RlcmVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFJvb3RDb250ZXh0IOOBruagvOe0jVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAgICB7U3RyaW5nfSAgICAgICBbaW5dIHJvdXRlIOWQjVxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IHtSb3V0ZUNvbnRleHR9IFtpbl0gY29udGV4dCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOeZu+mMsuaIkOWKnyAvIGZhbHNlOiDjgZnjgafjgavnmbvpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBwdXNoQ29udGV4dChuYW1lOiBzdHJpbmcsIGNvbnRleHQ6IFJvdXRlQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gcm91dGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkLiBuYW1lOiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGlmICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkgaXMgY2FsbGVkIG9yIG5vdCwgYW5kIGNhbGwgaXQgaWYgbmVlZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9ICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkg44GM5ZG844Gw44KM44Gm44GE44KL44GL56K66KqN44GX44CB5b+F6KaB44Gq44KJ5Yid5pyf5YyW44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwge1N0cmluZ30gW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5pdEZpcnN0UGFnZUlmTmVlZGVkKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnRvUGFnZSA9IEZyYW1ld29yay50b1VybCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmb3IgY3VycmVudCBwYWdlIGlzIHRvcC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiB0b3AgcGFnZSAvIGZhbHNlOiBub3QgdG9wIHBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog54++5Zyo44Gu44Oa44O844K444GMIHRvcCDjgavmjIflrprjgZXjgozjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiB0b3Ag5oyH5a6aIC8gZmFsc2U6IHRvcCDjgafjga/jgarjgYRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc1RvcFBhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKGxvY2F0aW9uLmhyZWYpLmhhc2gpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKG51bGwgPT0gY29udGV4dCkgPyBmYWxzZSA6IGNvbnRleHQudG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENhbGxlZCB3aGVuIGFuY2hvciByZWNlaXZlZCBcInZjbGlja1wiIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgY3VzdG9tIHByb2Nlc3NpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogYW5jaG9yIOOBjCB2Y2xpY2sg44GV44KM44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTogZGVmYXVsdCDlh6bnkIYgLyBmYWxzZTog44Kr44K544K/44Og5Yem55CGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25BbmNob3JWY2xpY2tlZChldmVudDogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuaXNKdXN0QmVmb3JlVmNsaWNrZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLmZvbGxvd0FuY2hvcihldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQW5jaG9yIHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhbmNob3Ig5Yem55CGXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZvbGxvd0FuY2hvcihldmVudDogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCB1cmw6IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcImhyZWZcIikgfHwgJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNpdGlvbjogc3RyaW5nID0gJHRhcmdldC5qcW1EYXRhKFwidHJhbnNpdGlvblwiKTtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhY2tEc3Q6IGFueSA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9CQUNLX0RFU1RJTkFUSU9OKTtcclxuICAgICAgICAgICAgY29uc3Qgbm9IYXNoQ2hhbmdlOiBib29sZWFuID0gJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX0hBU0hfQ0hBTkdFKSA/XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fSEFTSF9DSEFOR0UpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBub0hyZWZIYW5kbGU6IGJvb2xlYW4gPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fVkNMSUNLX0hBTkRMRSkgP1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX1ZDTElDS19IQU5ETEUpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogLSDmmI7npLrnmoTjgavjg4/jg7Pjg4njg6vjgZfjgarjgYTmjIflrprjgYzjgYLjgovloLTlkIhcclxuICAgICAgICAgICAgICogLSBqUU0g44Gu44OV44Op44Kw44Oh44Oz44OI44Gu5aC05ZCIXHJcbiAgICAgICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG5vSHJlZkhhbmRsZSB8fCBSb3V0ZXIubmVlZERlZmF1bHRPcGVyYXRpb24odXJsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGN1c3RvbSBiZWhhdmllclxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc0JhY2tCdXR0b25DbGlja2VkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sICEhZGlyZWN0aW9uLCB7IG5vSGFzaENoYW5nZTogbm9IYXNoQ2hhbmdlLCBiYWNrRGVzdGluYXRpb246IGJhY2tEc3QgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBkZWZhdWx0IHByb2Nlc3NpbmcgbmVlZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCBzdHJpbmdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgbm90XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBm+OCi+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOaXouWumuOBruWHpueQhuOBjOW/heimgSAvIGZhbHNlOiDkuI3opoFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBuZWVkRGVmYXVsdE9wZXJhdGlvbih1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoIXVybCB8fCAoXCIjXCIgPT09IHVybCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiI1wiID09PSB1cmxbMF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhUm91dGVyLmNhblJlc29sdmVSb3V0ZSh1cmwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgc3RhdHVzIG9mIEJhY2tib25lLlJvdXRlciBpZiB0aGV5IGNhbiByZXNvbHZlIHJvdXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IGNhbiByZXNvbHZlIC8gZmFsc2U6IGNhbiBub3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFja2JvbmUuUm91dGVyIOOBjCByb3V0ZSDjgpLop6Pmsbrlj6/og73jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtICB1cmwge1N0cmluZ30gW2luXSB1cmwg5paH5a2X5YiXXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiDop6Pmsbrlj6/og70gLyBmYWxzZTog6Kej5rG65LiN5Y+vXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY2FuUmVzb2x2ZVJvdXRlKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gXy5hbnkoQmFja2JvbmUuaGlzdG9yeS5oYW5kbGVycywgZnVuY3Rpb24gKGhhbmRsZXI6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucm91dGUudGVzdChmcmFnbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgXCJ2Y2xpY2tcIiBmaXJlZCBhdCB0aGUgbGFzdCBtaW51dGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDnm7TliY3jgasgdmNsaWNrIOOBjOWRvOOBsOOCjOOBn+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc0p1c3RCZWZvcmVWY2xpY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgaXNCZWZvcmUgPSAoRGF0ZS5ub3coKSAtIFJvdXRlci5zX2xhc3RDbGlja2VkVGltZSkgPCBSb3V0ZXIuREVMQVlfVElNRSAqIDI7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RDbGlja2VkVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0JlZm9yZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBiYWNrIGJ1dHRvbiBjbGlja2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFjayBCdXR0b24g44GM44Kv44Oq44OD44Kv44GV44KM44Gf44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGlzQmFja0J1dHRvbkNsaWNrZWQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoJChldmVudC5jdXJyZW50VGFyZ2V0KS5qcW1EYXRhKFwicmVsXCIpID09PSBcImJhY2tcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBJdCBjYWxsZWQgb24gc3VjY2VlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyB7QXJyYXl9ICBbaW5dIGFycmF5IG9mIHBhcmFtdGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOaIkOWKn+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlU3VjY2VlZGVkKG5hbWU6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Um91dGVyLnNfcm9vdENvbnRleHRzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoISFjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnQgPSB7IHBhcmFtczogeyBxdWVyeVBhcmFtczogYXJncyB9IH07XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVudC5wYXJhbXMgPSAkLmV4dGVuZCh7fSwgaW50ZW50LnBhcmFtcywgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zIHx8IHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50ID0gJC5leHRlbmQoe30sIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50LCBpbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IGNvbnRleHQuY2FsbGJhY2soYXJncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogSXQgY2FsbGVkIG9uIGZhaWxlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyB7QXJyYXl9ICBbaW5dIGFycmF5IG9mIHBhcmFtdGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOWkseaVl+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlRmFpbGVkKGZyYWdtZW50OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBmcmFnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvdXRlIOOBjOino+axuuOBp+OBjeOBquOBi+OBo+OBn+OCguOBruOCkueuoeeQhuS4i+OBq1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Um91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZTogZnJhZ21lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChmcmFnbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoQ29udGV4dChmcmFnbWVudCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IOOBi+OCiSBwYXRoIOOCkuino+axulxyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IGZyYWdtZW50O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19yb290Q29udGV4dHNbZnJhZ21lbnRdKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUm91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XS5wYWdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGp1c3QgY2FsbHMgalF1ZXJ5IE1vYmlsZSdzIG5hdmlnYXRpb24gbWV0aG9kLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIHRvIHBhZ2UgcGF0aFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUXVlcnkgTW9iaWxlIOOBq+OCiOOCi+ODmuODvOOCuOmBt+enu+aMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIOmBt+enu+WFiOODkeOCueOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNoYW5nZVBhZ2UocGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZTogKCkgPT4gSVByb21pc2VCYXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICAvLyBkYXRhLXJlbD1cImJhY2tcIiwg44OW44Op44Km44K244Oc44K/44OzLCBIL1cgQmFjayBLZXkg44GM5oq85LiL44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgIGlmICghUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbkFkZGl0aW9uYWxCYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbkFkZGl0aW9uYWxCYWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5kZWNpZGVEaXJlY3Rpb24ocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5oyH5a6a5YWI44Gr5oi744KL44GL5Yik5a6aXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbCA9IFJvdXRlci5kZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPCBhZGRpdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDLlm57nm67ku6XpmY3jga4gaGFzaCBjaGFuZ2Ug44Gr44Gv5Y+N5b+c44GV44Gb44Gq44GELlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluQWRkaXRpb25hbEJhY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGFkZGl0aW9uYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oLWFkZGl0aW9uYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOmBt+enu+WFiOOBjCBzdWJmbG93IOmWi+Wni+eCueOBp+OBguOCi+WgtOWQiOOAgXBhcmFtIOOCkuWJiumZpFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViRmxvd0luZm8gPSBSb3V0ZXIuZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViRmxvd0luZm8uaXNDdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN1YkZsb3dJbmZvLnN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOiDveWLleeahOmBt+enu+OBruWgtOWQiCBwcmV2aW91c0luZGV4IOOCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lLiDjgZnjgafjgavjgrPjg7zjg6vjgZXjgozjgabjgYTjgovloLTlkIjjga/ml6Llrprjga7kvZXjgoLjgZfjgarjgYTjgrPjg7zjg6vjg5Djg4Pjgq/jgpLkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlID0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5jYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZSA/IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgOiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci50cmVhdFVybEhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZVRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5zX2ZpcnN0Q2hhbmdlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfZmlyc3RDaGFuZ2VQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub25lXCI7ICAvLyBzcGxhc2gg44GL44KJ44Gu6YG356e7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUuZGVmYXVsdFBhZ2VUcmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZShGcmFtZXdvcmsudG9VcmwocGF0aCksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRNc2c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogcGFnZVRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmVyc2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUhhc2hDaGFuZ2U6ICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUhhc2g6ICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBEZWNpZGUgZGlyZWN0aW9uIHBhcmFtZXRlci5cclxuICAgICAgICAgKiBJdCdzIGFzIHNhbWUgYXMgalFNIGludGVybmFsIGltcGxlbWVudC4gKGltcGVyZmVjdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSB0byBwYWdlIHBhdGhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogZGlyZWN0aW9uIOOBruWIpOWumlxyXG4gICAgICAgICAqIGpRTSDjga7lhoXpg6jlrp/oo4XjgajnrYnkvqEgKOS4jeWujOWFqClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSDpgbfnp7vlhYjjg5HjgrnjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZWNpZGVEaXJlY3Rpb24ocGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9ICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybChGcmFtZXdvcmsudG9VcmwocGF0aCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24gPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZGlyZWN0KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgcHJlc2VudDogZnVuY3Rpb24gKG5ld1BhZ2U6IGFueSwgZGlyZWN0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmFja1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZm9yd2FyZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uID0gbmV3UGFnZS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIGRpcmVjdGlvbjogXCIgKyBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1pc3Npbmc6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliJ3mnJ/jg5rjg7zjgrggVVJMIOOBr+WIpOWumuOBp+OBjeOBquOBhOOAguato+W4uOezu+OAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKDAgIT09IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBkaXJlY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmV0dXJuIGFkZGl0aW9uYWwgYmFjayBkaXN0YW5jZSBjb3VudCB3aGVuIGJhY2sgZGVzdGluYXRpb24gc2V0LlxyXG4gICAgICAgICAqIChjb25zdCBmdW5jdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSBjb3VudCBvZiBhZGRpdGlvbmEgYmFjayBkaXN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5oi744KK5YWI44GM5oyH5a6a44GV44KM44Gm44GE44KL44Go44GN44CB6L+95Yqg44GuIEJhY2sg5pWw44KS6L+U44GX44G+44GZ44CCXHJcbiAgICAgICAgICogKOOBk+OBrumWouaVsOOBryBSb3V0ZXIg44Gu54q25oWL44KS5aSJ5pu044GX44G+44Gb44KT44CCKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOi/veWKoOOBpyBCYWNrIOOBq+W/heimgeOBqui3nemboi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgY29uc3QgaGlzdG9yeUFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDsgICAgLy8gZGVjaWRlRGlyZWN0aW9uKCkg44GuIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZGlyZWN0KCkg44Gr44KI44Gj44Gm44CBaGlzdG9yeSDjga4gYWN0aXZlSW5kZXgg44Gv44GZ44Gn44Gr5aSJ44KP44Gj44Gm44GE44KLXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXg7ICAgICAgIC8vIFvmiLvjgotd44GM5oq85LiL44GV44KM44Gf5aC05ZCI44Gr5YCk44GM5YWl44KLXHJcbiAgICAgICAgICAgIGxldCBpLCBiYWNrRHN0LCBkaXN0YW5jZSwgZnJhZ21lbnQsIGNvbnRleHQsIGpxbURhdGFVcmw7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBcIm9wZXJhdGlvblwiLiBb5oi744KLXeOBiuOCiOOBsyBjbGVhckZvcndhcmQoKSDjgZXjgozjgabjgYTjgarjgYTnirbms4HjgpLjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgaWYgKCFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgfHwgbnVsbCA9PSBwcmV2aW91c0luZGV4IHx8ICFzdGFja1twcmV2aW91c0luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFwiYmFja0RzdCBleGlzdHNcIi4gW+aIu+OCiuWFiF3jgYzmjIflrprjgZXjgozjgabjgYTjgovjgYvjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgYmFja0RzdCA9IHN0YWNrW3ByZXZpb3VzSW5kZXhdW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF07XHJcbiAgICAgICAgICAgIGlmICgobnVsbCA9PSBiYWNrRHN0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChiYWNrRHN0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWIneacn+ODmuODvOOCuFxyXG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gZnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoaXN0b3J5QWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvb3RDb250ZXh0IOOBi+OCiSBwYXRoIOOCkumAhuW8leOBjVxyXG4gICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJiYWNrIGRlc3RpbmF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLiBiYWNrLWRzdDogXCIgKyBiYWNrRHN0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBkYXRhVXJsIOOCkuWFg+OBqyBqUU0gSGlzdG9yeSDjgpLmpJzntKJcclxuICAgICAgICAgICAganFtRGF0YVVybCA9IFJvdXRlci5wYXRoVG9KcW1EYXRhVXJsKGNvbnRleHQucGFnZSk7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IGhpc3RvcnlBY3RpdmVJbmRleCwgZGlzdGFuY2UgPSAwOyAwIDw9IGk7IGktLSAsIGRpc3RhbmNlKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChqcW1EYXRhVXJsID09PSBzdGFja1tpXS5wYWdlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJiYWNrIGRlc3RpbmF0aW9uIGRvZXMgbm90IGV4aXN0IGluIGhpc3RvcnkuIGJhY2stZHN0OiBcIiArIGJhY2tEc3QpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdGFydCBzdWIgZmxvd1xyXG4gICAgICAgICAqIEF0dGFjaCBTdWJGbG93UGFyYW0gdG8ganFtIGhpc3Rvcnkgc3RhY2sgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN1YkZsb3dQYXJhbSB7U3ViRmxvd1BhcmFtfSBbaW5dIFN1YiBGbG93IHBhcmFtZXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7plovlp4tcclxuICAgICAgICAgKiBTdWJGbG93UGFyYW0g44KSIGpxbSBoaXN0b3J5IHN0YWNrIOOBq+OCouOCv+ODg+ODgVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN1YkZsb3dQYXJhbSB7U3ViRmxvd1BhcmFtfSBbaW5dIFN1YiBGbG93IOODkeODqeODoeODvOOCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0YXJ0U3ViRmxvdyhzdWJGbG93UGFyYW06IFN1YkZsb3dQYXJhbSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJhbSA9IDxTdWJGbG93UGFyYW1FeD5zdWJGbG93UGFyYW07XHJcbiAgICAgICAgICAgIGlmIChzdWJGbG93UGFyYW0uZGVzdEJhc2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoc3ViRmxvd1BhcmFtLmRlc3RCYXNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGN0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJiYXNlIGRlc3RpbmF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLiBkZXN0QmFzZTogXCIgKyBzdWJGbG93UGFyYW0uZGVzdEJhc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkYXRhVXJsIOOCkuWFg+OBqyBqUU0gSGlzdG9yeSDjgpLmpJzntKJcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpxbURhdGFVcmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqcW1EYXRhVXJsID09PSBzdGFja1tpXS5wYWdlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5kZXN0QmFzZSA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dID0gcGFyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRW5kIHN1YiBmbG93XHJcbiAgICAgICAgICogbmF2aWdhdGUgYW5kIGRlbGV0ZSBTdWJGbG93UGFyYW0gZnJvbSBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmF2T3B0aW9ucyB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIFN1YiBGbG93IHBhcmFtZXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7ntYLkuoZcclxuICAgICAgICAgKiDpgbfnp7vjgaggU3ViRmxvd1BhcmFtIOOCkiBqcW0gaGlzdG9yeSBzdGFjayDjgYvjgonliYrpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYXZPcHRpb25zIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluaXNoU3ViRmxvdyhvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgbmF2T3B0aW9uczogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgLy8gXCJlbmRcIiDmmYLjgavmm7TmlrDjgZXjgozjgZ/jgoLjga7jgpLkuIrmm7jjgY1cclxuICAgICAgICAgICAgY29uc3QgcGFyYW06IFN1YkZsb3dQYXJhbSA9ICQuZXh0ZW5kKHt9LCBiYXNlSW5mby5zdWJGbG93UGFyYW0sIG5hdk9wdGlvbnMuc3ViRmxvdyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gYmFzZUluZm8uZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gYmFzZUluZm8uc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCByZXRyeSA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IE5BVklHQVRFX0lOVEVSVkFMID0gMTAwO1xyXG4gICAgICAgICAgICBjb25zdCBNQVhfUkVUUllfQ09VTlQgPSAxMDtcclxuXHJcbiAgICAgICAgICAgIC8vIGhhc2gg5aSJ5pu044GM5a6M5LqG44GX44Gf5b6M44GrIG5hdmlnYXRlIOOCkuWun+ihjFxyXG4gICAgICAgICAgICBjb25zdCBfbmF2aWdhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTUFYX1JFVFJZX0NPVU5UIDw9IHJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcInJlYWNoZWQgbmF2aWdhdGUgbWF4IHJldHJ5IGNvdW50LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtLmRlc3RCYXNlICE9PSBsb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cnkrKztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9uYXZpZ2F0ZSwgTkFWSUdBVEVfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjayhwYXJhbS5kZXN0U3RhY2tzLCB0cnVlLCBuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uZGVzdFN0YWNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaU9TIOeSsOWig+OBq+OBiuOBhOOBpiBpbmRleC5odG1sIOOCiOOCiiBoaXN0b3J5LmdvKDApIOOBjOeZuueUn+OBmeOCi+OBqOODquODreODvOODieOBjOeZuueUn+OBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICAvLyDjgZ3jga7lvoznlLvpnaLpgbfnp7vjgpLmjqfjgYjjgovjgZ/jgoEsIOWxpeattOOCkuaIu+OCi+W/heimgeOBjOOBguOCi+OBqOOBjeOBq+OBruOBv+mZkOWumuOBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmF2T3B0aW9ucy5zdWJGbG93OyAgICAvLyBzdWJGbG93IOODl+ODreODkeODhuOCo+OBruegtOajhFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX25hdmlnYXRlLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwic3ViRmxvdyBiZWdpbiBzdGF0dXMgZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS5cIik7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXR1cm4gZGVzdGluYXRpb24gU3ViIEZsb3cgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgICogKGNvbnN0IGZ1bmN0aW9uKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHN1YiBmbG93IGluZm8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOaDheWgseOCkui/lOWNtFxyXG4gICAgICAgICAqICjjgZPjga7plqLmlbDjga8gUm91dGVyIOOBrueKtuaFi+OCkuWkieabtOOBl+OBvuOBm+OCk+OAgilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBTdWIgRmxvdyDmg4XloLEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgY29uc3QgaGlzdG9yeUFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgZGlzdGFuY2U6IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IHBhcmFtOiBTdWJGbG93UGFyYW1FeCA9IDxTdWJGbG93UGFyYW1FeD57fTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldDogT2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgZm9yIChpID0gaGlzdG9yeUFjdGl2ZUluZGV4LCBkaXN0YW5jZSA9IDA7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YWNrW2ldW1JvdXRlci5TVUJGTE9XX1BBUkFNXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHN0YWNrW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtID0gPFN1YkZsb3dQYXJhbUV4PnN0YWNrW2ldW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gcGFyYW0uYWRkaXRpb25hbERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhY2s6IHRhcmdldCxcclxuICAgICAgICAgICAgICAgIHN1YkZsb3dQYXJhbTogcGFyYW0sXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2UgKyBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJlbnQ6ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAwID09PSBkaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkoKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDb252ZXJ0IHBhdGggdG8galFNIGRhdGFVcmwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30galFNIGRhdGEgdXJsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5HjgrnjgpIgalFNIGRhdGFVcmwg44Gr5aSJ5o+bXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30galFNIGRhdGEgdXJsLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHBhdGhUb0pxbURhdGFVcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gRnJhbWV3b3JrLnRvVXJsKHBhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhVXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFVwZGF0ZSBqUU0gdXJsSGlzdG9yeSBieSB3aW5kb3cuaGlzdG9yeSBvYmplY3QuXHJcbiAgICAgICAgICogVG8gYmUgbmF0dXJhbCBicm93c2luZyBoaXN0b3J5IGJlaGF2aW9yLCBhcHBsaWNhdGlvbiBuZWVkcyB0byB1cGRhdGUgalFNIHVybEhpc3RvcnlcclxuICAgICAgICAgKiB3aGVuIGNsaWNraW5nIGJhY2sgb3IgbmV4dCBidXR0b24gb2YgYnJvd3Nlci4gKGltcGVyZmVjdGlvbiBmb3IgZGVjaWRlRGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5bjg6njgqbjgrbjga7lsaXmrbTjgavln7rjgaXjgY0galFNIHVybEhpc3Rvcnkg44KS5pu05pawXHJcbiAgICAgICAgICogW+aIu+OCi10vW+mAsuOCgF3jgYzmirzkuIvjgZXjgozjgZ/lvozjgIHjg5rjg7zjgrjpgbfnp7vjgZXjgozjgovjgajjgY3jgIFqUU0gdXJsSGlzdG9yeSDjgpLmm7TmlrDjgZnjgovjgIIoZGVjaWRlRGlyZWN0aW9uKCkg44Gr44KI44KK5LiN5a6M5YWoKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB0cmVhdFVybEhpc3RvcnkoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUgfHwgaGlzdG9yeS5sZW5ndGggPCBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvUm91dGVyLnRzIiwibmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLkZyYW1ld29yay5QYWdlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTWFuYWdlZEludGVudFxyXG4gICAgICogQGJyaWVmIEludGVybmFsIEludGVudCBpbnRlcmZhY2UgZm9yIG1hbmFnZWQgdXBkYXRlIGluZm8uXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgTWFuYWdlZEludGVudFxyXG4gICAgICogQGJyaWVmIOabtOaWsOaDheWgseOBjOeuoeeQhuOBleOCjOOBn+WGhemDqCBJbnRlbnQg44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBNYW5hZ2VkSW50ZW50IGV4dGVuZHMgSW50ZW50IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogc2V0IFwidHJ1ZVwiIHdoZW4gdXBkYXRlIGluIFBhZ2UgY2xhc3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOWGheOBp+abtOaWsOOBleOCjOOBn+WgtOWQiCB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgX3VwZGF0ZTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBjbGFzcyBQYWdlXHJcbiAgICAgKiBAYnJpZWYgQmFzZSBjbGFzcyBvZiBhbGwgcGFnZSB1bml0LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAY2xhc3MgUGFnZVxyXG4gICAgICogQGJyaWVmIOOBmeOBueOBpuOBruODmuODvOOCuOOBruWfuuacrOOBqOOBquOCi+aXouWumuOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZSBpbXBsZW1lbnRzIElQYWdlIHtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gZGF0YSBtZW1iZXJcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9vd25lcjogSVBhZ2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHBhZ2U6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF8kaGVhZGVyOiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGZvb3RlcjogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgX2ludGVudDogTWFuYWdlZEludGVudDtcclxuICAgICAgICBwcml2YXRlIF9rZWVwSW50ZW50OiBib29sZWFuO1xyXG4gICAgICAgIHByaXZhdGUgX2luaXRpYWxpemVkOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBfdXJsICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSBwYWdlJ3MgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIF9pZCAgICAge1N0cmluZ30gICAgICAgICAgICAgICBbaW5dIHBhZ2UncyBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtQYWdlQ29uc3RydWN0T3B0aW9uc30gW2luXSBvcHRpb25zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gX3VybCAgICB7U3RyaW5nfSAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IFVSTFxyXG4gICAgICAgICAqIEBwYXJhbSBfaWQgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSDjg5rjg7zjgrggSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUNvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfdXJsOiBzdHJpbmcsIHByaXZhdGUgX2lkOiBzdHJpbmcsIG9wdGlvbnM/OiBQYWdlQ29uc3RydWN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIGFjY2Vzc29yXHJcblxyXG4gICAgICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiAgICAgICAgICAgeyByZXR1cm4gISF0aGlzLl8kcGFnZSAmJiB0aGlzLl8kcGFnZS5oYXNDbGFzcyhcInVpLXBhZ2UtYWN0aXZlXCIpOyAgIH1cclxuICAgICAgICBnZXQgdXJsKCk6IHN0cmluZyAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX3VybDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRwYWdlKCk6IEpRdWVyeSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl8kcGFnZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGhlYWRlcigpOiBKUXVlcnkgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuXyRoZWFkZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkZm9vdGVyKCk6IEpRdWVyeSAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fJGZvb3RlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGludGVudCgpOiBJbnRlbnQgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9pbnRlbnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBzZXQgaW50ZW50KG5ld0ludGVudDogSW50ZW50KSAgIHsgdGhpcy5faW50ZW50ID0gPGFueT5uZXdJbnRlbnQ7IHRoaXMuX2ludGVudC5fdXBkYXRlID0gdHJ1ZTsgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgRXZlbnQgSGFuZGxlclxyXG5cclxuICAgICAgICAvLyEgT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIEgvVyBCYWNrIEJ1dHRvbiDjg4/jg7Pjg4njg6lcclxuICAgICAgICBwdWJsaWMgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIub25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICAgIHB1YmxpYyBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IElQcm9taXNlQmFzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIub25CZWZvcmVSb3V0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uQ29tbWFuZChldmVudD86IEpRdWVyeS5FdmVudCwga2luZD86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkNvbW1hbmQoZXZlbnQsIGtpbmQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBwdWJsaWMgb25Jbml0aWFsaXplKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vbkluaXRpYWxpemUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUhpZGUoZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIG1peGluIOeUqOeWkeS8vOOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgIHByaXZhdGUgc2V0dXAob3B0aW9uczogUGFnZUNvbnN0cnVjdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gbWl4aW4gZGVzdGluYXRpb24g55So44Gu5YaN5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3I6IHN0cmluZyA9IFwiI1wiICsgdGhpcy5faWQ7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAub2ZmKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCBzZWxlY3RvcilcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVjcmVhdGVcIiwgc2VsZWN0b3IsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHBhZ2UgPSAkKHNlbGVjdG9yKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9aGVhZGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRmb290ZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9Zm9vdGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjcmVhdGVcIiwgKGV2OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluaXQoZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtOb3RlXWluc3RlYWQgZnV0dXJlIHZlcnNpb24gXCJwYWdlY29udGFpbmVyc2hvd1wiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VCZWZvcmVIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW05vdGVdaW5zdGVhZCBmdXR1cmUgdmVyc2lvbiBcInBhZ2Vjb250YWluZXJoaWRlXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZXJlbW92ZVwiLCAoZXY6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlUmVtb3ZlKGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvLyBvd25lciDoqK3lrppcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICAvLyBpbnRlbnQg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX2tlZXBJbnRlbnQgPSBvcHRpb25zLmtlZXBJbnRlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3V0ZXIg44G455m76YyyXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IG9wdGlvbnMucm91dGUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm91dGUgPSB0aGlzLl9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIucmVnaXN0ZXIob3B0aW9ucy5yb3V0ZSwgdGhpcy5fdXJsLCBvcHRpb25zLnRvcCwgb3B0aW9ucy5jYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24g44Gu5Yik5a6aXHJcbiAgICAgICAgcHJpdmF0ZSBnZXREaXJlY3Rpb24oKTogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleDtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGFjdGl2ZUluZGV4IHx8IG51bGwgPT0gcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1bmtub3duXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldkluZGV4ID09PSBhY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2FtZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZUluZGV4IDwgcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJiYWNrXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmb3J3YXJkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5pdGlhbGl6ZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VJbml0KGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBGcmFtZXdvcmsuc2V0QWN0aXZlUGFnZSh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5faW50ZW50ID0gPE1hbmFnZWRJbnRlbnQ+Um91dGVyLnBvcEludGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUhpZGUoZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW50ZW50ICYmICh0aGlzLl9rZWVwSW50ZW50IHx8IHRoaXMuX2ludGVudC5fdXBkYXRlKSkgeyAgICAvLyBpbnRlbnQg44Gr5pu05paw44GM44GC44Gj44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW50ZW50Ll91cGRhdGU7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIucHVzaEludGVudCh0aGlzLl9pbnRlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5mcm9tSGFzaENoYW5nZWQoKSAmJiBSb3V0ZXIuaXNJblN1YkZsb3coKSkgeyAgICAvLyBTdWIgRmxvdyDlhoXjgacgYmFjayDjgZXjgozjgZ/loLTlkIhcclxuICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KHRoaXMuX2ludGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faW50ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgRnJhbWV3b3JrLnNldEFjdGl2ZVBhZ2UobnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE6IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VIaWRlKGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRwYWdlLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kcGFnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIub2ZmKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBqUU0xLjQg44Gr44Gm44CBZHVwbGljYXRlIOOBqOOBleOCjOOBpuOBhOOCiyBcInBhZ2VzaG93XCIsIFwicGFnZWhpZGVcIiDjga/jgb7jgaDmja7jgYjnva7jgY3jgIJcclxuICAgICAqIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tL3VwZ3JhZGUtZ3VpZGUvMS40LyNuYXZpZ2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICog54m55a6a44Oa44O844K444Gr5a++44GX44Gm44CB44Kk44OZ44Oz44OI44KS5Y+W5b6X44Gn44GN44Gq44GE44Gf44KB44CCXHJcbiAgICAgKiBGb3J1bSDjgafjgoLorbDoq5bkuK3jgarjga7jgafjgIHmsbrnnYDjgYzjgaTjgYTjgabjgYvjgonlr77lv5zjgpLogIPmha7jgZnjgovjgIJcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNjg2NVxyXG4gICAgICpcclxuICAgICAqIFvlj4LogINdIOOCiOOBj+OCj+OBi+OCi+OCpOODmeODs+ODiOODgeODvOODiOOCt+ODvOODiFxyXG4gICAgICogIC0g5pys5a62KDEuNCspIGh0dHA6Ly9qcW10cmlja3Mud29yZHByZXNzLmNvbS8yMDE0LzAzLzI2L2pxdWVyeS1tb2JpbGUtcGFnZS1ldmVudHMvXHJcbiAgICAgKiAgLSDmnInlv5cofjEuMykgaHR0cDovL2Rldi5zY3Jldy1heGlzLmNvbS9kb2MvanF1ZXJ5X21vYmlsZS9yZXNvdXJjZXMvY2hlYXRzaGVldC9cclxuICAgICAqXHJcbiAgICAgKiDku6XkuIvjga/kuI3lrozlhajjgarlr77lv5zkuojlrprjgrPjg7zjg4lcclxuICAgICAqXHJcbiAgICAgKiDnibnjgavmjK/jgovoiJ7jgYTjgYzlpInjgo/jgovjga7jga/jgIFcInBhZ2VoaWRlXCIg44Gn44CB5qSc6KiO44GV44KM44Gm44GE44KL5LuV5qeY44Gn44GvXHJcbiAgICAgKiBET00g44KS54m55a6a44Gn44GN44Gq44GE44Gf44KB44CBb25QYWdlSGlkZSgpIOOCkuOCpOODs+OCueOCv+ODs+OCueOBq+S8neOBiOOCi+OBk+OBqOOBjOOBp+OBjeOBquOBhOOAglxyXG4gICAgICpcclxuICAgICAqIOS7leanmOOBjOWkieOCj+OCieOBquOBhOWgtOWQiOOBr1xyXG4gICAgICogb25QYWdlQmVmb3JlSGlkZSgpIOOBruS4reOBpyBwb3N0IOOBl+OBpiBvblBhZ2VIaWRlKCkg44KS55m66KGM44GZ44KL5LqI5a6aKOmBjuWOu+S6kuaPm+S/neiovClcclxuICAgICAqXHJcbiAgICAgKiAyMDE1LzAzLzI1IOi/veiomDpcclxuICAgICAqIOS7leanmOOBr+eiuuWumi4galFNMS42IOOCiOOCiuWJiumZpOOBleOCjOOCi+S6iOWumlxyXG4gICAgICogIGpRTTEuNCDnm7jlvZPjga7lj4LogIPlrp/oo4UgcGx1Z2luIOOBjOOBguOCiuOAgeOBk+OBruWun+ijheebuOW9k+OBruapn+iDveOCkiBjZHAuZnJhbWV3b3JrLmpxbSDjgafmirHjgYjjgovkuojlrppcclxuICAgICAqICBodHRwczovL2dpdGh1Yi5jb20vYXJzY2htaXR6L2pxdWVyeS1tb2JpbGUtb25wYWdlXHJcbiAgICAgKlxyXG4gICAgICog5YWs5byP6KaL6KejXHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzcyODMjaXNzdWVjb21tZW50LTQwNzQ2NjIyXHJcbiAgICAgKi9cclxuLypcclxuICAgIC8vIGJpbmQgXCJwYWdlY29udGFpbmVyc2hvd1wiLCBhbmQgXCJwYWdlY29udGFpbmVyaGlkZVwiLlxyXG4gICAgKCgpID0+IHtcclxuICAgICAgICBsZXQgJGJvZHk6IGFueSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgIC5vbihcInBhZ2Vjb250YWluZXJzaG93XCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBTaG93RXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGRhdGEucHJldlBhZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2Vjb250YWluZXJoaWRlXCIg44KI44KK44KC6YGF44GE44Gu44Gn44CB44KE44Gv44KKIERPTSDjgavjga/jgqLjgq/jgrvjgrnjgafjgY3jgarjgYRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgJHByZXZwYWdlID0gJChcIiNcIiArIGRhdGEucHJldlBhZ2VbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwcmV2cGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gu5a++5b+c44Gn44CBXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2VzaG93XCIg5ZCM562J44Gu5oyv44KL6Iie44GE44Gr44GZ44KL44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUlkID0gJGJvZHkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIikucHJvcChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRwYWdlID0gJChcIiNcIiArIHBhZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICAkcGFnZS50cmlnZ2VyKFwiX3BhZ2VzaG93XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVyaGlkZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyaGlkZVwiIOOCkuWPl+OBkeOBn+OBqOOBjeOBr+aXouOBqyBET00g44GL44KJ5raI44GI44Gm44GE44KL44Gf44KB44CBcGFnZSDjga/nibnlrprjgafjgY3jgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIC8vbGV0IHBhZ2VJZCA9ICRib2R5LnBhZ2Vjb250YWluZXIoJ2dldEFjdGl2ZVBhZ2UnKS5wcm9wKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAvL2xldCAkcGFnZSA9ICQoXCIjXCIgKyBwYWdlSWQpO1xyXG4gICAgICAgICAgICAgICAgLy8kcGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVydHJhbnNpdGlvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcInBhZ2Vjb250YWluZXJ0cmFuc2l0aW9uXCIg44Gr44GvIHRvUGFnZSDjgavjgZfjgYvjgqLjgq/jgrvjgrnjga/jgafjgY3jgarjgYRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KSgpO1xyXG4qL1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYWdlLnRzIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAuaTE4blwiLFwiY29tbW9uanMyXCI6XCJjZHAuaTE4blwiLFwiYW1kXCI6XCJjZHAuaTE4blwifVxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkJhY2tib25lXCIsXCJjb21tb25qc1wiOlwiYmFja2JvbmVcIixcImNvbW1vbmpzMlwiOlwiYmFja2JvbmVcIixcImFtZFwiOlwiYmFja2JvbmVcIn1cbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xuKGZ1bmN0aW9uKCkge1xuXG4vKiFcclxuICogalF1ZXJ5IE1pZ3JhdGUgLSB2My4wLjEtaG90Zml4IC0gMjAxNy0wMS0xMVxyXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKi9cclxuOyAoZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgICAgICBkZWZpbmUoW1wianF1ZXJ5XCJdLCBmdW5jdGlvbiAoJCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeSgkLCB3aW5kb3cpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XHJcbiAgICAgICAgLy8gTm9kZS9Db21tb25KU1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpLCB3aW5kb3cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93KTtcclxuICAgIH1cclxufSkoZnVuY3Rpb24gKGpRdWVyeSwgd2luZG93KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBqUXVlcnkubWlncmF0ZVZlcnNpb24gPSBcIjMuMC4xLWhvdGZpeFwiOyAvLyB3aXRoIGhvdGZpeFxyXG5cclxuICAgIC8qIGV4cG9ydGVkIG1pZ3JhdGVXYXJuLCBtaWdyYXRlV2FybkZ1bmMsIG1pZ3JhdGVXYXJuUHJvcCAqL1xyXG5cclxuICAgIChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQ6IElFOSBvbmx5XHJcbiAgICAgICAgLy8gSUU5IG9ubHkgY3JlYXRlcyBjb25zb2xlIG9iamVjdCB3aGVuIGRldiB0b29scyBhcmUgZmlyc3Qgb3BlbmVkXHJcbiAgICAgICAgLy8gQWxzbywgYXZvaWQgRnVuY3Rpb24jYmluZCBoZXJlIHRvIHNpbXBsaWZ5IFBoYW50b21KUyB1c2FnZVxyXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cgJiZcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nLmFwcGx5KHdpbmRvdy5jb25zb2xlLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByYmFkVmVyc2lvbnMgPSAvXlsxMl1cXC4vO1xyXG5cclxuICAgICAgICBpZiAoIWxvZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBOZWVkIGpRdWVyeSAzLjAuMCsgYW5kIG5vIG9sZGVyIE1pZ3JhdGUgbG9hZGVkXHJcbiAgICAgICAgaWYgKCFqUXVlcnkgfHwgcmJhZFZlcnNpb25zLnRlc3QoalF1ZXJ5LmZuLmpxdWVyeSkpIHtcclxuICAgICAgICAgICAgbG9nKFwiSlFNSUdSQVRFOiBqUXVlcnkgMy4wLjArIFJFUVVJUkVEXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncykge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IE1pZ3JhdGUgcGx1Z2luIGxvYWRlZCBtdWx0aXBsZSB0aW1lc1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgYSBtZXNzYWdlIG9uIHRoZSBjb25zb2xlIHNvIGRldnMga25vdyB3ZSdyZSBhY3RpdmVcclxuICAgICAgICBpZiAoIWpRdWVyeS5taWdyYXRlTXV0ZSkge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IE1pZ3JhdGUgaXMgaW5zdGFsbGVkXCIgK1xyXG4gICAgICAgICAgICAgICAgKGpRdWVyeS5taWdyYXRlTXV0ZSA/IFwiXCIgOiBcIiB3aXRoIGxvZ2dpbmcgYWN0aXZlXCIpICtcclxuICAgICAgICAgICAgICAgIFwiLCB2ZXJzaW9uIFwiICsgalF1ZXJ5Lm1pZ3JhdGVWZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHZhciB3YXJuZWRBYm91dCA9IHt9O1xyXG5cclxuICAgIC8vIExpc3Qgb2Ygd2FybmluZ3MgYWxyZWFkeSBnaXZlbjsgcHVibGljIHJlYWQgb25seVxyXG4gICAgalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncyA9IFtdO1xyXG5cclxuICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRyYWNlcyB0aGF0IGFwcGVhciB3aXRoIHdhcm5pbmdzXHJcbiAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgalF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yZ2V0IGFueSB3YXJuaW5ncyB3ZSd2ZSBhbHJlYWR5IGdpdmVuOyBwdWJsaWNcclxuICAgIGpRdWVyeS5taWdyYXRlUmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2FybmVkQWJvdXQgPSB7fTtcclxuICAgICAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzLmxlbmd0aCA9IDA7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1pZ3JhdGVXYXJuKG1zZykge1xyXG4gICAgICAgIHZhciBjb25zb2xlID0gd2luZG93LmNvbnNvbGU7XHJcbiAgICAgICAgaWYgKCF3YXJuZWRBYm91dFttc2ddKSB7XHJcbiAgICAgICAgICAgIHdhcm5lZEFib3V0W21zZ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzLnB1c2gobXNnKTtcclxuICAgICAgICAgICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuICYmICFqUXVlcnkubWlncmF0ZU11dGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkpRTUlHUkFURTogXCIgKyBtc2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeS5taWdyYXRlVHJhY2UgJiYgY29uc29sZS50cmFjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUudHJhY2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtaWdyYXRlV2FyblByb3Aob2JqLCBwcm9wLCB2YWx1ZSwgbXNnKSB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwge1xyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4obXNnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWlncmF0ZVdhcm5GdW5jKG9iaiwgcHJvcCwgbmV3RnVuYywgbXNnKSB7XHJcbiAgICAgICAgb2JqW3Byb3BdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2Fybihtc2cpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3RnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbmRvdy5kb2N1bWVudC5jb21wYXRNb2RlID09PSBcIkJhY2tDb21wYXRcIikge1xyXG4gICAgICAgIC8vIEpRdWVyeSBoYXMgbmV2ZXIgc3VwcG9ydGVkIG9yIHRlc3RlZCBRdWlya3MgTW9kZVxyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggUXVpcmtzIE1vZGVcIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHZhciBvbGRJbml0ID0galF1ZXJ5LmZuLmluaXQsXHJcbiAgICAgICAgb2xkSXNOdW1lcmljID0galF1ZXJ5LmlzTnVtZXJpYyxcclxuICAgICAgICBvbGRGaW5kID0galF1ZXJ5LmZpbmQsXHJcbiAgICAgICAgcmF0dHJIYXNoVGVzdCA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS8sXHJcbiAgICAgICAgcmF0dHJIYXNoR2xvYiA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS9nO1xyXG5cclxuICAgIGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24gKGFyZzEpIHtcclxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnMSA9PT0gXCJzdHJpbmdcIiAmJiBhcmcxID09PSBcIiNcIikge1xyXG4gICAgICAgICAgICAvLyBKUXVlcnkoIFwiI1wiICkgaXMgYSBib2d1cyBJRCBzZWxlY3RvciwgYnV0IGl0IHJldHVybmVkIGFuIGVtcHR5IHNldCBiZWZvcmUgalF1ZXJ5IDMuMFxyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeSggJyMnICkgaXMgbm90IGEgdmFsaWQgc2VsZWN0b3JcIik7XHJcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRJbml0LmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIGpRdWVyeS5mbi5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcclxuXHJcbiAgICBqUXVlcnkuZmluZCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydDogUGhhbnRvbUpTIDEueFxyXG4gICAgICAgIC8vIFN0cmluZyNtYXRjaCBmYWlscyB0byBtYXRjaCB3aGVuIHVzZWQgd2l0aCBhIC8vZyBSZWdFeHAsIG9ubHkgb24gc29tZSBzdHJpbmdzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiByYXR0ckhhc2hUZXN0LnRlc3Qoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBub25zdGFuZGFyZCBhbmQgdW5kb2N1bWVudGVkIHVucXVvdGVkLWhhc2ggd2FzIHJlbW92ZWQgaW4galF1ZXJ5IDEuMTIuMFxyXG4gICAgICAgICAgICAvLyBGaXJzdCBzZWUgaWYgcVMgdGhpbmtzIGl0J3MgYSB2YWxpZCBzZWxlY3RvciwgaWYgc28gYXZvaWQgYSBmYWxzZSBwb3NpdGl2ZVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEaWRuJ3QgKmxvb2sqIHZhbGlkIHRvIHFTQSwgd2FybiBhbmQgdHJ5IHF1b3Rpbmcgd2hhdCB3ZSB0aGluayBpcyB0aGUgdmFsdWVcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZShyYXR0ckhhc2hHbG9iLCBmdW5jdGlvbiAoXywgYXR0ciwgb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiW1wiICsgYXR0ciArIG9wICsgXCJcXFwiXCIgKyB2YWx1ZSArIFwiXFxcIl1cIjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZWdleHAgKm1heSogaGF2ZSBjcmVhdGVkIGFuIGludmFsaWQgc2VsZWN0b3IsIGRvbid0IHVwZGF0ZSBpdFxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZXJlIG1heSBiZSBmYWxzZSBhbGFybXMgaWYgc2VsZWN0b3IgdXNlcyBqUXVlcnkgZXh0ZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJBdHRyaWJ1dGUgc2VsZWN0b3Igd2l0aCAnIycgbXVzdCBiZSBxdW90ZWQ6IFwiICsgYXJnc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1swXSA9IHNlbGVjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiQXR0cmlidXRlIHNlbGVjdG9yIHdpdGggJyMnIHdhcyBub3QgZml4ZWQ6IFwiICsgYXJnc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRGaW5kLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDb3B5IHByb3BlcnRpZXMgYXR0YWNoZWQgdG8gb3JpZ2luYWwgalF1ZXJ5LmZpbmQgbWV0aG9kIChlLmcuIC5hdHRyLCAuaXNYTUwpXHJcbiAgICB2YXIgZmluZFByb3A7XHJcbiAgICBmb3IgKGZpbmRQcm9wIGluIG9sZEZpbmQpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9sZEZpbmQsIGZpbmRQcm9wKSkge1xyXG4gICAgICAgICAgICBqUXVlcnkuZmluZFtmaW5kUHJvcF0gPSBvbGRGaW5kW2ZpbmRQcm9wXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcclxuICAgIGpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnNpemUoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkOyB1c2UgdGhlIC5sZW5ndGggcHJvcGVydHlcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LnBhcnNlSlNPTiBpcyBkZXByZWNhdGVkOyB1c2UgSlNPTi5wYXJzZVwiKTtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuaXNOdW1lcmljID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIC8vIFRoZSBqUXVlcnkgMi4yLjMgaW1wbGVtZW50YXRpb24gb2YgaXNOdW1lcmljXHJcbiAgICAgICAgZnVuY3Rpb24gaXNOdW1lcmljMihvYmopIHtcclxuICAgICAgICAgICAgdmFyIHJlYWxTdHJpbmdPYmogPSBvYmogJiYgb2JqLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAhalF1ZXJ5LmlzQXJyYXkob2JqKSAmJiAocmVhbFN0cmluZ09iaiAtIHBhcnNlRmxvYXQocmVhbFN0cmluZ09iaikgKyAxKSA+PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gb2xkSXNOdW1lcmljKHZhbCksXHJcbiAgICAgICAgICAgIG9sZFZhbHVlID0gaXNOdW1lcmljMih2YWwpO1xyXG5cclxuICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmlzTnVtZXJpYygpIHNob3VsZCBub3QgYmUgY2FsbGVkIG9uIGNvbnN0cnVjdGVkIG9iamVjdHNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkVmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIG1pZ3JhdGVXYXJuRnVuYyhqUXVlcnksIFwidW5pcXVlXCIsIGpRdWVyeS51bmlxdWVTb3J0LFxyXG4gICAgICAgIFwialF1ZXJ5LnVuaXF1ZSBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LnVuaXF1ZVNvcnRcIik7XHJcblxyXG4gICAgLy8gTm93IGpRdWVyeS5leHByLnBzZXVkb3MgaXMgdGhlIHN0YW5kYXJkIGluY2FudGF0aW9uXHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV4cHIsIFwiZmlsdGVyc1wiLCBqUXVlcnkuZXhwci5wc2V1ZG9zLFxyXG4gICAgICAgIFwialF1ZXJ5LmV4cHIuZmlsdGVycyBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LmV4cHIucHNldWRvc1wiKTtcclxuICAgIG1pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXhwciwgXCI6XCIsIGpRdWVyeS5leHByLnBzZXVkb3MsXHJcbiAgICAgICAgXCJqUXVlcnkuZXhwclsnOiddIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkuZXhwci5wc2V1ZG9zXCIpO1xyXG5cclxuXHJcbiAgICB2YXIgb2xkQWpheCA9IGpRdWVyeS5hamF4O1xyXG5cclxuICAgIGpRdWVyeS5hamF4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBqUVhIUiA9IG9sZEFqYXguYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgLy8gQmUgc3VyZSB3ZSBnb3QgYSBqUVhIUiAoZS5nLiwgbm90IHN5bmMpXHJcbiAgICAgICAgaWYgKGpRWEhSLnByb21pc2UpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcInN1Y2Nlc3NcIiwgalFYSFIuZG9uZSxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuc3VjY2VzcyBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIpO1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybkZ1bmMoalFYSFIsIFwiZXJyb3JcIiwgalFYSFIuZmFpbCxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuZXJyb3IgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcImNvbXBsZXRlXCIsIGpRWEhSLmFsd2F5cyxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuY29tcGxldGUgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBqUVhIUjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBvbGRSZW1vdmVBdHRyID0galF1ZXJ5LmZuLnJlbW92ZUF0dHIsXHJcbiAgICAgICAgb2xkVG9nZ2xlQ2xhc3MgPSBqUXVlcnkuZm4udG9nZ2xlQ2xhc3MsXHJcbiAgICAgICAgcm1hdGNoTm9uU3BhY2UgPSAvXFxTKy9nO1xyXG5cclxuICAgIGpRdWVyeS5mbi5yZW1vdmVBdHRyID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIGpRdWVyeS5lYWNoKG5hbWUubWF0Y2gocm1hdGNoTm9uU3BhY2UpLCBmdW5jdGlvbiAoaSwgYXR0cikge1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KGF0dHIpKSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5yZW1vdmVBdHRyIG5vIGxvbmdlciBzZXRzIGJvb2xlYW4gcHJvcGVydGllczogXCIgKyBhdHRyKTtcclxuICAgICAgICAgICAgICAgIHNlbGYucHJvcChhdHRyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFJlbW92ZUF0dHIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmZuLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gT25seSBkZXByZWNhdGluZyBuby1hcmdzIG9yIHNpbmdsZSBib29sZWFuIGFyZ1xyXG4gICAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdGF0ZSAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZFRvZ2dsZUNsYXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi50b2dnbGVDbGFzcyggYm9vbGVhbiApIGlzIGRlcHJlY2F0ZWRcIik7XHJcblxyXG4gICAgICAgIC8vIFRvZ2dsZSBlbnRpcmUgY2xhc3MgbmFtZSBvZiBlYWNoIGVsZW1lbnRcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlICYmIHRoaXMuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxyXG4gICAgICAgICAgICAvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxyXG4gICAgICAgICAgICAvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldEF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSB8fCBzdGF0ZSA9PT0gZmFsc2UgP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiKSB8fCBcIlwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgaW50ZXJuYWxTd2FwQ2FsbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIElmIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnkgaGFzIC5zd2FwKCksIGRvbid0IGZhbHNlLWFsYXJtIG9uIGludGVybmFsIHVzZXNcclxuICAgIGlmIChqUXVlcnkuc3dhcCkge1xyXG4gICAgICAgIGpRdWVyeS5lYWNoKFtcImhlaWdodFwiLCBcIndpZHRoXCIsIFwicmVsaWFibGVNYXJnaW5SaWdodFwiXSwgZnVuY3Rpb24gKF8sIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZEhvb2sgPSBqUXVlcnkuY3NzSG9va3NbbmFtZV0gJiYgalF1ZXJ5LmNzc0hvb2tzW25hbWVdLmdldDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbGRIb29rKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuY3NzSG9va3NbbmFtZV0uZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsU3dhcENhbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IG9sZEhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFN3YXBDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBqUXVlcnkuc3dhcCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncykge1xyXG4gICAgICAgIHZhciByZXQsIG5hbWUsXHJcbiAgICAgICAgICAgIG9sZCA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoIWludGVybmFsU3dhcENhbGwpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuc3dhcCgpIGlzIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xyXG4gICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9sZFtuYW1lXSA9IGVsZW0uc3R5bGVbbmFtZV07XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGVbbmFtZV0gPSBvcHRpb25zW25hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0ID0gY2FsbGJhY2suYXBwbHkoZWxlbSwgYXJncyB8fCBbXSk7XHJcblxyXG4gICAgICAgIC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xyXG4gICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGVbbmFtZV0gPSBvbGRbbmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkRGF0YSA9IGpRdWVyeS5kYXRhO1xyXG5cclxuICAgIGpRdWVyeS5kYXRhID0gZnVuY3Rpb24gKGVsZW0sIG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGN1ckRhdGE7XHJcblxyXG4gICAgICAgIC8vIE5hbWUgY2FuIGJlIGFuIG9iamVjdCwgYW5kIGVhY2ggZW50cnkgaW4gdGhlIG9iamVjdCBpcyBtZWFudCB0byBiZSBzZXQgYXMgZGF0YVxyXG4gICAgICAgIGlmIChuYW1lICYmIHR5cGVvZiBuYW1lID09PSBcIm9iamVjdFwiICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgY3VyRGF0YSA9IGpRdWVyeS5oYXNEYXRhKGVsZW0pICYmIG9sZERhdGEuY2FsbCh0aGlzLCBlbGVtKTtcclxuICAgICAgICAgICAgdmFyIHNhbWVLZXlzID0ge307XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSBqUXVlcnkuY2FtZWxDYXNlKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5kYXRhKCkgYWx3YXlzIHNldHMvZ2V0cyBjYW1lbENhc2VkIG5hbWVzOiBcIiArIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyRGF0YVtrZXldID0gbmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzYW1lS2V5c1trZXldID0gbmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvbGREYXRhLmNhbGwodGhpcywgZWxlbSwgc2FtZUtleXMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB0aGUgbmFtZSBpcyB0cmFuc2Zvcm1lZCwgbG9vayBmb3IgdGhlIHVuLXRyYW5zZm9ybWVkIG5hbWUgaW4gdGhlIGRhdGEgb2JqZWN0XHJcbiAgICAgICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIgJiYgbmFtZSAhPT0galF1ZXJ5LmNhbWVsQ2FzZShuYW1lKSkge1xyXG4gICAgICAgICAgICBjdXJEYXRhID0galF1ZXJ5Lmhhc0RhdGEoZWxlbSkgJiYgb2xkRGF0YS5jYWxsKHRoaXMsIGVsZW0pO1xyXG4gICAgICAgICAgICBpZiAoY3VyRGF0YSAmJiBuYW1lIGluIGN1ckRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmRhdGEoKSBhbHdheXMgc2V0cy9nZXRzIGNhbWVsQ2FzZWQgbmFtZXM6IFwiICsgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJEYXRhW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyRGF0YVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZERhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG9sZFR3ZWVuUnVuID0galF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW47XHJcblxyXG4gICAgalF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXHJcbiAgICAgICAgICAgICAgICBcImVhc2luZyBmdW5jdGlvbiBcIiArXHJcbiAgICAgICAgICAgICAgICBcIlxcXCJqUXVlcnkuZWFzaW5nLlwiICsgdGhpcy5lYXNpbmcudG9TdHJpbmcoKSArXHJcbiAgICAgICAgICAgICAgICBcIlxcXCIgc2hvdWxkIHVzZSBvbmx5IGZpcnN0IGFyZ3VtZW50XCJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvbGRFYXNpbmcgPSBqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXTtcclxuICAgICAgICAgICAgalF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ10gPSBmdW5jdGlvbiAocGVyY2VudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVhc2luZy5jYWxsKGpRdWVyeS5lYXNpbmcsIHBlcmNlbnQsIHBlcmNlbnQsIDAsIDEsIDEpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvbGRUd2VlblJ1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZnguaW50ZXJ2YWwgPSBqUXVlcnkuZnguaW50ZXJ2YWwgfHwgMTM7XHJcblxyXG4gICAgLy8gU3VwcG9ydDogSUU5LCBBbmRyb2lkIDw9NC40XHJcbiAgICAvLyBBdm9pZCBmYWxzZSBwb3NpdGl2ZXMgb24gYnJvd3NlcnMgdGhhdCBsYWNrIHJBRlxyXG4gICAgaWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmZ4LCBcImludGVydmFsXCIsIGpRdWVyeS5meC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgXCJqUXVlcnkuZnguaW50ZXJ2YWwgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb2xkTG9hZCA9IGpRdWVyeS5mbi5sb2FkLFxyXG4gICAgICAgIG9sZEV2ZW50QWRkID0galF1ZXJ5LmV2ZW50LmFkZCxcclxuICAgICAgICBvcmlnaW5hbEZpeCA9IGpRdWVyeS5ldmVudC5maXg7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LnByb3BzID0gW107XHJcbiAgICBqUXVlcnkuZXZlbnQuZml4SG9va3MgPSB7fTtcclxuXHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV2ZW50LnByb3BzLCBcImNvbmNhdFwiLCBqUXVlcnkuZXZlbnQucHJvcHMuY29uY2F0LFxyXG4gICAgICAgIFwialF1ZXJ5LmV2ZW50LnByb3BzLmNvbmNhdCgpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIik7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LmZpeCA9IGZ1bmN0aW9uIChvcmlnaW5hbEV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50LFxyXG4gICAgICAgICAgICB0eXBlID0gb3JpZ2luYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICBmaXhIb29rID0gdGhpcy5maXhIb29rc1t0eXBlXSxcclxuICAgICAgICAgICAgcHJvcHMgPSBqUXVlcnkuZXZlbnQucHJvcHM7XHJcblxyXG4gICAgICAgIGlmIChwcm9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZXZlbnQucHJvcHMgYXJlIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ6IFwiICsgcHJvcHMuam9pbigpKTtcclxuICAgICAgICAgICAgd2hpbGUgKHByb3BzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZFByb3AocHJvcHMucG9wKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4SG9vayAmJiAhZml4SG9vay5fbWlncmF0ZWRfKSB7XHJcbiAgICAgICAgICAgIGZpeEhvb2suX21pZ3JhdGVkXyA9IHRydWU7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmV2ZW50LmZpeEhvb2tzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICBpZiAoKHByb3BzID0gZml4SG9vay5wcm9wcykgJiYgcHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZFByb3AocHJvcHMucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBldmVudCA9IG9yaWdpbmFsRml4LmNhbGwodGhpcywgb3JpZ2luYWxFdmVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmaXhIb29rICYmIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoZXZlbnQsIG9yaWdpbmFsRXZlbnQpIDogZXZlbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5hZGQgPSBmdW5jdGlvbiAoZWxlbSwgdHlwZXMpIHtcclxuICAgICAgICAvLyBUaGlzIG1pc3NlcyB0aGUgbXVsdGlwbGUtdHlwZXMgY2FzZSBidXQgdGhhdCBzZWVtcyBhd2Z1bGx5IHJhcmVcclxuICAgICAgICBpZiAoZWxlbSA9PT0gd2luZG93ICYmIHR5cGVzID09PSBcImxvYWRcIiAmJiB3aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5KHdpbmRvdykub24oJ2xvYWQnLi4uKSBjYWxsZWQgYWZ0ZXIgbG9hZCBldmVudCBvY2N1cnJlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEV2ZW50QWRkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5lYWNoKFtcImxvYWRcIiwgXCJ1bmxvYWRcIiwgXCJlcnJvclwiXSwgZnVuY3Rpb24gKF8sIG5hbWUpIHtcclxuXHJcbiAgICAgICAgalF1ZXJ5LmZuW25hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGFqYXggbG9hZCgpIHRoZSBmaXJzdCBhcmcgc2hvdWxkIGJlIHRoZSBzdHJpbmcgVVJMO1xyXG4gICAgICAgICAgICAvLyB0ZWNobmljYWxseSB0aGlzIGNvdWxkIGFsc28gYmUgdGhlIFwiQW55dGhpbmdcIiBhcmcgb2YgdGhlIGV2ZW50IC5sb2FkKClcclxuICAgICAgICAgICAgLy8gd2hpY2gganVzdCBnb2VzIHRvIHNob3cgd2h5IHRoaXMgZHVtYiBzaWduYXR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZCFcclxuICAgICAgICAgICAgLy8galF1ZXJ5IGN1c3RvbSBidWlsZHMgdGhhdCBleGNsdWRlIHRoZSBBamF4IG1vZHVsZSBqdXN0aWZpYWJseSBkaWUgaGVyZS5cclxuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwibG9hZFwiICYmIHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkTG9hZC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uXCIgKyBuYW1lICsgXCIoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG5cclxuICAgICAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgbmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbi5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVXNlIC50cmlnZ2VySGFuZGxlciBoZXJlIGJlY2F1c2U6XHJcbiAgICAgICAgICAgIC8vIC0gbG9hZCBhbmQgdW5sb2FkIGV2ZW50cyBkb24ndCBuZWVkIHRvIGJ1YmJsZSwgb25seSBhcHBsaWVkIHRvIHdpbmRvdyBvciBpbWFnZVxyXG4gICAgICAgICAgICAvLyAtIGVycm9yIGV2ZW50IHNob3VsZCBub3QgYnViYmxlIHRvIHdpbmRvdywgYWx0aG91Z2ggaXQgZG9lcyBwcmUtMS43XHJcbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTgyMFxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRyaWdnZXIgXCJyZWFkeVwiIGV2ZW50IG9ubHkgb25jZSwgb24gZG9jdW1lbnQgcmVhZHlcclxuICAgIGpRdWVyeShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdy5kb2N1bWVudCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsLnJlYWR5ID0ge1xyXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzID09PSB3aW5kb3cuZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiJ3JlYWR5JyBldmVudCBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZm4uZXh0ZW5kKHtcclxuICAgICAgICBiaW5kOiBmdW5jdGlvbiAodHlwZXMsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmJpbmQoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbih0eXBlcywgbnVsbCwgZGF0YSwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbiAodHlwZXMsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnVuYmluZCgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZih0eXBlcywgbnVsbCwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZWdhdGU6IGZ1bmN0aW9uIChzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24odHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHR5cGVzLCBmbikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi51bmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoc2VsZWN0b3IsIFwiKipcIikgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYodHlwZXMsIHNlbGVjdG9yIHx8IFwiKipcIiwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB2YXIgb2xkT2Zmc2V0ID0galF1ZXJ5LmZuLm9mZnNldDtcclxuXHJcbiAgICBqUXVlcnkuZm4ub2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkb2NFbGVtLFxyXG4gICAgICAgICAgICBlbGVtID0gdGhpc1swXSxcclxuICAgICAgICAgICAgb3JpZ2luID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcclxuXHJcbiAgICAgICAgaWYgKCFlbGVtIHx8ICFlbGVtLm5vZGVUeXBlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLm9mZnNldCgpIHJlcXVpcmVzIGEgdmFsaWQgRE9NIGVsZW1lbnRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2NFbGVtID0gKGVsZW0ub3duZXJEb2N1bWVudCB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICBpZiAoIWpRdWVyeS5jb250YWlucyhkb2NFbGVtLCBlbGVtKSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5vZmZzZXQoKSByZXF1aXJlcyBhbiBlbGVtZW50IGNvbm5lY3RlZCB0byBhIGRvY3VtZW50XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZE9mZnNldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZFBhcmFtID0galF1ZXJ5LnBhcmFtO1xyXG5cclxuICAgIGpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uIChkYXRhLCB0cmFkaXRpb25hbCkge1xyXG4gICAgICAgIHZhciBhamF4VHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XHJcblxyXG4gICAgICAgIGlmICh0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICYmIGFqYXhUcmFkaXRpb25hbCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5wYXJhbSgpIG5vIGxvbmdlciB1c2VzIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWxcIik7XHJcbiAgICAgICAgICAgIHRyYWRpdGlvbmFsID0gYWpheFRyYWRpdGlvbmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFBhcmFtLmNhbGwodGhpcywgZGF0YSwgdHJhZGl0aW9uYWwpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkU2VsZiA9IGpRdWVyeS5mbi5hbmRTZWxmIHx8IGpRdWVyeS5mbi5hZGRCYWNrO1xyXG5cclxuICAgIGpRdWVyeS5mbi5hbmRTZWxmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmFuZFNlbGYoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkLCB1c2UgalF1ZXJ5LmZuLmFkZEJhY2soKVwiKTtcclxuICAgICAgICByZXR1cm4gb2xkU2VsZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZERlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkLFxyXG4gICAgICAgIHR1cGxlcyA9IFtcclxuICAgICAgICAgICAgLy8gQWN0aW9uLCBhZGQgbGlzdGVuZXIsIGNhbGxiYWNrcywgLnRoZW4gaGFuZGxlcnMsIGZpbmFsIHN0YXRlXHJcbiAgICAgICAgICAgIFtcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiXSxcclxuICAgICAgICAgICAgW1wicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksIFwicmVqZWN0ZWRcIl0sXHJcbiAgICAgICAgICAgIFtcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpXVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgalF1ZXJ5LkRlZmVycmVkID0gZnVuY3Rpb24gKGZ1bmMpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBvbGREZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICBkZWZlcnJlZC5waXBlID0gcHJvbWlzZS5waXBlID0gZnVuY3Rpb24gKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLykge1xyXG4gICAgICAgICAgICB2YXIgZm5zID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJkZWZlcnJlZC5waXBlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24gKG5ld0RlZmVyKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaCh0dXBsZXMsIGZ1bmN0aW9uIChpLCB0dXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKGZuc1tpXSkgJiYgZm5zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWZlcnJlZC5kb25lKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlc29sdmUgfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmVycmVkLnByb2dyZXNzKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLm5vdGlmeSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkW3R1cGxlWzFdXShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5lZCAmJiBqUXVlcnkuaXNGdW5jdGlvbihyZXR1cm5lZC5wcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWQucHJvbWlzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUobmV3RGVmZXIucmVzb2x2ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmFpbChuZXdEZWZlci5yZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb2dyZXNzKG5ld0RlZmVyLm5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEZWZlclt0dXBsZVswXSArIFwiV2l0aFwiXShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA/IFtyZXR1cm5lZF0gOiBhcmd1bWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZm5zID0gbnVsbDtcclxuICAgICAgICAgICAgfSkucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZnVuYykge1xyXG4gICAgICAgICAgICBmdW5jLmNhbGwoZGVmZXJyZWQsIGRlZmVycmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBqUXVlcnk7XHJcbn0pO1xyXG5cbn0uY2FsbCh3aW5kb3cpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2V4dGVybmFsL2pxdWVyeS9zY3JpcHRzL2pxdWVyeS1taWdyYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdfQ=="]}